<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2833px" preserveAspectRatio="none" style="width:3346px;height:2833px;background:#FFFFFF;" version="1.1" viewBox="0 0 3346 2833" width="3346px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="381" x="1481" y="27.9951">Doctor Operation Request Search Flow - Level 3</text><rect fill="#FFFFFF" height="1987.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="404" y="444.2344"/><rect fill="#FFFFFF" height="1463.4688" style="stroke:#181818;stroke-width:1.0;" width="10" x="1092" y="814.8906"/><rect fill="none" height="257.25" style="stroke:#000000;stroke-width:1.5;" width="1787" x="989" y="1640.1719"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="41" x2="41" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="409" x2="409" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1097" x2="1097" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1672" x2="1672" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1878" x2="1878" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2046" x2="2046" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2197" x2="2197" y1="125.5781" y2="2746.1406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2716" x2="2716" y1="125.5781" y2="2746.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="5" y="120.8613">Doctor</text><ellipse cx="41" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41,58.7969 L41,85.7969 M28,66.7969 L54,66.7969 M41,85.7969 L28,100.7969 M41,85.7969 L54,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="66" x="5" y="2763.7051">Doctor</text><ellipse cx="41" cy="2776.9219" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M41,2784.9219 L41,2811.9219 M28,2792.9219 L54,2792.9219 M41,2811.9219 L28,2826.9219 M41,2811.9219 L54,2826.9219 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="311" y="64.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="318" y="89.5801">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="359.5" y="112.8613">Controller</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="311" y="2745.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="318" y="2770.7051">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="99" x="359.5" y="2793.9863">Controller</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="999" y="64.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="1006" y="89.5801">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="1060.5" y="112.8613">Service</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="999" y="2745.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="1006" y="2770.7051">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="1060.5" y="2793.9863">Service</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="1574" y="64.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="1581" y="89.5801">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="75" x="1634.5" y="112.8613">Mapper</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="1574" y="2745.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="1581" y="2770.7051">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="75" x="1634.5" y="2793.9863">Mapper</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="1780" y="64.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="1787" y="89.5801">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="106" x="1825" y="112.8613">Repository</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="1780" y="2745.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="182" x="1787" y="2770.7051">OperationRequest</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="106" x="1825" y="2793.9863">Repository</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1986" y="64.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="2010.5" y="89.5801">Patient</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="106" x="1993" y="112.8613">Repository</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="1986" y="2745.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="2010.5" y="2770.7051">Patient</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="106" x="1993" y="2793.9863">Repository</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="2116" y="64.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="148" x="2123" y="89.5801">OperationType</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="106" x="2144" y="112.8613">Repository</text><rect fill="#E2E2F0" height="60.5625" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="2116" y="2745.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="148" x="2123" y="2770.7051">OperationType</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="106" x="2144" y="2793.9863">Repository</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="2666" y="120.8613">Database</text><path d="M2698,66.2969 C2698,56.2969 2716,56.2969 2716,56.2969 C2716,56.2969 2734,56.2969 2734,66.2969 L2734,92.2969 C2734,102.2969 2716,102.2969 2716,102.2969 C2716,102.2969 2698,102.2969 2698,92.2969 L2698,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2698,66.2969 C2698,76.2969 2716,76.2969 2716,76.2969 C2716,76.2969 2734,76.2969 2734,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="2666" y="2763.7051">Database</text><path d="M2698,2778.4219 C2698,2768.4219 2716,2768.4219 2716,2768.4219 C2716,2768.4219 2734,2768.4219 2734,2778.4219 L2734,2804.4219 C2734,2814.4219 2716,2814.4219 2716,2814.4219 C2716,2814.4219 2698,2814.4219 2698,2804.4219 L2698,2778.4219 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2698,2778.4219 C2698,2788.4219 2716,2788.4219 2716,2788.4219 C2716,2788.4219 2734,2788.4219 2734,2778.4219 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="1987.8125" style="stroke:#181818;stroke-width:1.0;" width="10" x="404" y="444.2344"/><rect fill="#FFFFFF" height="1463.4688" style="stroke:#181818;stroke-width:1.0;" width="10" x="1092" y="814.8906"/><polygon fill="#181818" points="392,440.2344,402,444.2344,392,448.2344,396,444.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="41" x2="398" y1="444.2344" y2="444.2344"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="337" x="48" y="158.1426">GET /api/operationrequest/search</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="48" y="181.4238">Headers: {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="265" x="60" y="204.7051">Authorization: Bearer JWT,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="308" x="60" y="227.9863">Content-Type: application/json</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="48" y="251.2676">}</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="86" x="48" y="274.5488">Query: {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="219" x="60" y="297.8301">patientName?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="232" x="60" y="321.1113">operationType?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="212" x="60" y="344.3926">priorityLevel?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="149" x="60" y="367.6738">status?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="220" x="60" y="390.9551">startDate?: DateTime,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="206" x="60" y="414.2363">endDate?: DateTime</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="48" y="437.5176">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="414" x2="456" y1="551.3594" y2="551.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="456" x2="456" y1="551.3594" y2="564.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="456" y1="564.3594" y2="564.3594"/><polygon fill="#181818" points="425,560.3594,415,564.3594,425,568.3594,421,564.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="298" x="421" y="474.7988">[Authorize(Roles = "Doctor")]</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="471" x="421" y="498.0801">var doctorId = User.FindFirst("StaffId")?.Value;</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="343" x="421" y="521.3613">if (string.IsNullOrEmpty(doctorId))</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="220" x="433" y="544.6426">return Unauthorized()</text><line style="stroke:#181818;stroke-width:1.0;" x1="414" x2="456" y1="764.6094" y2="764.6094"/><line style="stroke:#181818;stroke-width:1.0;" x1="456" x2="456" y1="764.6094" y2="777.6094"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="456" y1="777.6094" y2="777.6094"/><polygon fill="#181818" points="425,773.6094,415,777.6094,425,781.6094,421,777.6094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="587" x="421" y="594.9238">var searchCriteria = new OperationRequestSearchParams(</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="426" x="433" y="618.2051">patientName: searchParams.PatientName,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="457" x="433" y="641.4863">operationType: searchParams.OperationType,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="652" x="433" y="664.7676">priority: Enum.Parse&lt;PriorityLevel&gt;(searchParams.PriorityLevel),</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="605" x="433" y="688.0488">status: Enum.Parse&lt;RequestStatus&gt;(searchParams.Status),</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="354" x="433" y="711.3301">startDate: searchParams.StartDate,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="330" x="433" y="734.6113">endDate: searchParams.EndDate</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="15" x="421" y="757.8926">);</text><polygon fill="#181818" points="1080,810.8906,1090,814.8906,1080,818.8906,1084,814.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="414" x2="1086" y1="814.8906" y2="814.8906"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="476" x="421" y="808.1738">SearchOperationRequestsAsync(searchCriteria)</text><polygon fill="#181818" points="1866,1290.5156,1876,1294.5156,1866,1298.5156,1870,1294.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="1872" y1="1294.5156" y2="1294.5156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="562" x="1109" y="845.4551">var query = _context.OperationRequests.AsQueryable();</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="6" x="1109" y="868.7363"> </text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="544" x="1109" y="892.0176">if (!string.IsNullOrEmpty(searchParams.PatientName))</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="397" x="1133" y="915.2988">query = query.Include(r =&gt; r.PatientId)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="344" x="1133" y="938.5801">.Where(r =&gt; r.PatientId.ToString()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="401" x="1133" y="961.8613">.Contains(searchParams.PatientName));</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="6" x="1109" y="985.1426"> </text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="562" x="1109" y="1008.4238">if (!string.IsNullOrEmpty(searchParams.OperationType))</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="564" x="1133" y="1031.7051">query = query.Where(r =&gt; r.OperationTypeId.ToString()</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="349" x="1133" y="1054.9863">== searchParams.OperationType);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="6" x="1109" y="1078.2676"> </text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="352" x="1109" y="1101.5488">if (searchParams.Priority.HasValue)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="361" x="1133" y="1124.8301">query = query.Where(r =&gt; r.Priority</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="335" x="1133" y="1148.1113">== searchParams.Priority.Value);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="6" x="1109" y="1171.3926"> </text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="345" x="1109" y="1194.6738">if (searchParams.Status.HasValue)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="354" x="1133" y="1217.9551">query = query.Where(r =&gt; r.Status</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="265" x="1133" y="1241.2363">== searchParams.Status);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="6" x="1109" y="1264.5176"> </text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="333" x="1109" y="1287.7988">return await query.ToListAsync();</text><polygon fill="#181818" points="2704,1583.8906,2714,1587.8906,2704,1591.8906,2708,1587.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1878" x2="2710" y1="1587.8906" y2="1587.8906"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="1885" y="1325.0801">SELECT r.*, p.*, ot.*</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="271" x="1885" y="1348.3613">FROM OperationRequests r</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="417" x="1885" y="1371.6426">LEFT JOIN Patients p ON r.PatientId = p.Id</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="585" x="1885" y="1394.9238">LEFT JOIN OperationTypes ot ON r.OperationTypeId = ot.Id</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="75" x="1885" y="1418.2051">WHERE</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="611" x="1897" y="1441.4863">(@PatientName IS NULL OR p.FullName LIKE @PatientName)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="641" x="1897" y="1464.7676">AND (@OperationType IS NULL OR ot.Name = @OperationType)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="487" x="1897" y="1488.0488">AND (@Priority IS NULL OR r.Priority = @Priority)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="466" x="1897" y="1511.3301">AND (@Status IS NULL OR r.Status = @Status)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="584" x="1897" y="1534.6113">AND (@StartDate IS NULL OR r.CreatedAt &gt;= @StartDate)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="564" x="1897" y="1557.8926">AND (@EndDate IS NULL OR r.CreatedAt &lt;= @EndDate)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="200" x="1897" y="1581.1738">AND r.IsDeleted = 0</text><polygon fill="#181818" points="1889,1621.1719,1879,1625.1719,1889,1629.1719,1885,1625.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1883" x2="2715" y1="1625.1719" y2="1625.1719"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73" x="1895" y="1618.4551">Results</text><path d="M989,1640.1719 L1083,1640.1719 L1083,1655.4531 L1073,1665.4531 L989,1665.4531 L989,1640.1719 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="257.25" style="stroke:#000000;stroke-width:1.5;" width="1787" x="989" y="1640.1719"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="49" x="1004" y="1659.7363">loop</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="212" x="1098" y="1660.7363">[For each request]</text><polygon fill="#181818" points="2034,1699.0156,2044,1703.0156,2034,1707.0156,2038,1703.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="2040" y1="1703.0156" y2="1703.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="481" x="1109" y="1696.2988">GetByIdAsync(new PatientId(request.PatientId))</text><polygon fill="#181818" points="2704,1736.2969,2714,1740.2969,2704,1744.2969,2708,1740.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2046" x2="2710" y1="1740.2969" y2="1740.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="418" x="2053" y="1733.5801">SELECT * FROM Patients WHERE Id = @Id</text><polygon fill="#181818" points="2057,1773.5781,2047,1777.5781,2057,1781.5781,2053,1777.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2051" x2="2715" y1="1777.5781" y2="1777.5781"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="118" x="2063" y="1770.8613">PatientData</text><polygon fill="#181818" points="2185,1810.8594,2195,1814.8594,2185,1818.8594,2189,1814.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="2191" y1="1814.8594" y2="1814.8594"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="635" x="1109" y="1808.1426">GetByIdAsync(new OperationTypeId(request.OperationTypeId))</text><polygon fill="#181818" points="2704,1848.1406,2714,1852.1406,2704,1856.1406,2708,1852.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2197" x2="2710" y1="1852.1406" y2="1852.1406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="495" x="2204" y="1845.4238">SELECT * FROM OperationTypes WHERE Id = @Id</text><polygon fill="#181818" points="2208,1885.4219,2198,1889.4219,2208,1893.4219,2204,1889.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2202" x2="2715" y1="1889.4219" y2="1889.4219"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="2214" y="1882.7051">OperationTypeData</text><polygon fill="#181818" points="1113,1929.7031,1103,1933.7031,1113,1937.7031,1109,1933.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1107" x2="1877" y1="1933.7031" y2="1933.7031"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="181" x="1119" y="1926.9863">EnrichedRequests</text><polygon fill="#181818" points="1660,2199.7969,1670,2203.7969,1660,2207.7969,1664,2203.7969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="1666" y1="2203.7969" y2="2203.7969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="546" x="1109" y="1964.2676">return results.Select(r =&gt; new OperationRequestDTO(</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="270" x="1121" y="1987.5488">Guid.Parse(r.Id.ToString()),</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="217" x="1121" y="2010.8301">r.PatientId.ToString(),</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="253" x="1121" y="2034.1113">r.CreatedByStaffId.Value,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="294" x="1121" y="2057.3926">r.OperationTypeId.ToString(),</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="109" x="1121" y="2080.6738">r.Deadline,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="91" x="1121" y="2103.9551">r.Priority,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="1121" y="2127.2363">r.CreatedAt,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="84" x="1121" y="2150.5176">r.Status,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="85" x="1121" y="2173.7988">r.Patient</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="23" x="1109" y="2197.0801">));</text><polygon fill="#181818" points="1113,2237.0781,1103,2241.0781,1113,2245.0781,1109,2241.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1107" x2="1671" y1="2241.0781" y2="2241.0781"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="133" x="1119" y="2234.3613">MappedDTOs</text><polygon fill="#181818" points="425,2274.3594,415,2278.3594,425,2282.3594,421,2278.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="419" x2="1096" y1="2278.3594" y2="2278.3594"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="294" x="431" y="2271.6426">List&lt;OperationRequestDTO&gt;</text><polygon fill="#181818" points="52,2428.0469,42,2432.0469,52,2436.0469,48,2432.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="46" x2="408" y1="2432.0469" y2="2432.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="93" x="58" y="2308.9238">200 OK {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="327" x="70" y="2332.2051">results: OperationRequestDTO[],</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="70" y="2355.4863">total: number,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="148" x="70" y="2378.7676">page: number,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="184" x="70" y="2402.0488">pageSize: number</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="58" y="2425.3301">}</text><path d="M2721,2445.0469 L2721,2571.0469 L3339,2571.0469 L3339,2455.0469 L3329,2445.0469 L2721,2445.0469 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M3329,2445.0469 L3329,2455.0469 L3339,2455.0469 L3329,2445.0469 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="221" x="2727" y="2468.6113">Database Constraints:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="281" x="2727" y="2491.8926">- PK_OperationRequests (Id)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="443" x="2727" y="2515.1738">- FK_OperationRequests_Patients (PatientId)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="597" x="2727" y="2538.4551">- FK_OperationRequests_OperationTypes (OperationTypeId)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="395" x="2727" y="2561.7363">- FK_OperationRequests_Staffs (StaffId)</text><path d="M414,2581.4531 L414,2730.4531 L732,2730.4531 L732,2591.4531 L722,2581.4531 L414,2581.4531 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M722,2581.4531 L722,2591.4531 L732,2591.4531 L722,2581.4531 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="153" x="420" y="2605.0176">Error Handling:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="252" x="420" y="2628.2988">- 400: Invalid Parameters</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="201" x="420" y="2651.5801">- 401: Unauthorized</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="222" x="420" y="2674.8613">- 403: Not Doctor Role</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="184" x="420" y="2698.1426">- 500: Server Error</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="297" x="420" y="2721.4238">All errors logged to AuditLogs</text><!--SRC=[bLTRTzf647xNhvZIXugSM7QRzaM9dO01cnW31T8yX1oVDLhZRUHTPNUnIthwtpjx4MW5n2Sl8ErST-QRYzGNnWiYoKCk5bze1Xcz8wjSzmJNK_QDmcydaMOwfz0H2oqaZ0egYMQ2muH-NL6bOKg9NDn3BnTFS0G3-aXpU1L5nB8xgGWjQBPW1U4Q6XiLNiESdwCrAVASoWOG1QF9-NCIKoeVsO9wzkbpxDUaA3RAhv_Zdj12A8P-hxr4A316Rift-SQJ0ufdwuBkQfrDeeneSaiKXKR7FrbIfnr5Fjn7PoOQALnqPt1C2dOiIgNIUNkiRFZd_9AIZ4gLmhzp3j1QwNiXsJVBca8RcQY4znzdBmtLn1jlS6GSIm5ZaxE5vJp-Mma-v__D-PyhAjTUMU4kF2GFz6qAIal6brQFgDum91MIeNszjdW8IKeJlL8xPr9Z48mMypTZ3zGIACzgn-YU0HTxn7SBbGX_De7wLDwSnXEHKmMd65mRoqRpyvm_4WcPVUrdIFgWg4nwZ6Sz9fME6rDDxkxwMQFvDlcBv2lwUixP7SJEqQIlXgiy7ydkGw7NSQccsJH-IgfNaiC7JahxMToCebzWR8gBQep-Gl17p126A_3OkEIIU8u1ev8HT8pJ9wW3qnMQrQVYMbvIhy9Ha_6Mifke6cy0qo1tANJvwW6LIKNVZAi9FOj3SrLQivBaG4Dv3KkfQN27pH0BDKUdvNaL63MUhZkTy-Rh2YwcgUzIzP2gbbhpHHo6lrc5rzIecJerBbTVJMLWYcuMfeh-qScEqgIbRFcGsvp6JSIGGz5FUs5qA6yELh0nP_-JFb_agup64axFG9Ry24B7d7oyftANcip4rDgEIpxJ0GZZwZlcVyJl04FxFGyy2_W3_y39dfv-1wHRr_QYCBaaobRlytwK8WUiRZGwTVlDEkZ-W54dSC2aBmHholSKyaIOzefcOi2KTgXr43VGxBGHuDr1zto6wb-yXCBy29sycFFUP7IzqqaKo3aVT7ipU3_g3y6dNK41es4LD-X_aVIpAc-G28L6d4WjeIY8vetanylkf6kk6h-he0lwKnX-60omgD123s5bJmVzgovK-MmmMyCEIWSMgl9eo0gVGiXJaTsakI9MIJvAbiyL8P-cGCIVeO3FKy3kkbCeSIufdcKj3MTEoZ5L17tBEYJs1iKyoqP8OYrsQ8vJnKJw9EgquSXtg0bLkBufCtcwN39Sp9wOliUr3iizLr4kH04zN2meGPBV8I83HD_bngZZWkhskfyvb9b9j054x2KgZQTffSTr7Bu0YxmDj2mEm2BZNJ-pCjvhOz6pcIt8ageUuQAqnwKQu3QErSwzUwXZltyrE1_sqdeHS5jdSGgv8YpdZ0iwpSfACud0xHEqWCvifBR3v3ejTmRfKfPCCQCBxRh4llcFydRiNwnOvaPgZ42eDaytF_StVa_om6gl_QhZMfid7cxBdg63IsREUCbVLasekwNzkwkHq2USpDYtyFhRaDdbFBFHSU4fDoFJwjxiYS9PbD7wY3wtOcxJI_6hvGH6LsvxzU5DzyNpqsVhdHQQv2dWgd9BfLk1o9Bk79WFelBGRA615xY7Se5FaYtlDOWx0voV1-RbGbBAetB3Dyit3bGSlkXJT0JZgvlTzXmZSf7MsqExsPHKl2t2GxmrUCVrwZWaPy61_1uaJODpCDUhNz84tjsoZJ2Akb9YRxaatA1aQQxt-yb92dtSktEMRNTXPIc_fi6-RCzUfJ34eU8_VymAZyT_62Ncam-tQ6iYQkKvKFEa81VB9VP1BB3MAcDw89Pgw-x_]--></g></svg>
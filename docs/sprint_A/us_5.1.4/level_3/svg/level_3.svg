<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="4176px" preserveAspectRatio="none" style="width:3172px;height:4176px;background:#FFFFFF;" version="1.1" viewBox="0 0 3172 4176" width="3172px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="287" x="1441" y="27.9951">Patient Profile Update Flow - Level 3</text><rect fill="#FFFFFF" height="3612.4375" style="stroke:#181818;stroke-width:1.0;" width="10" x="580.5" y="467.5156"/><rect fill="#FFFFFF" height="232.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="1534.5" y="601.6406"/><rect fill="#FFFFFF" height="1568.9063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1534.5" y="1359.9531"/><rect fill="#FFFFFF" height="83.8438" style="stroke:#181818;stroke-width:1.0;" width="10" x="2157.5" y="3099.8281"/><rect fill="#FFFFFF" height="144.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="2328" y="1178.2656"/><rect fill="#FFFFFF" height="74.5625" style="stroke:#181818;stroke-width:1.0;" width="10" x="2328" y="3407.2031"/><rect fill="none" height="107.125" style="stroke:#000000;stroke-width:1.5;" width="536" x="1450.5" y="1676.7656"/><rect fill="none" height="107.125" style="stroke:#000000;stroke-width:1.5;" width="530" x="1450.5" y="1797.8906"/><rect fill="none" height="130.4063" style="stroke:#000000;stroke-width:1.5;" width="444" x="1450.5" y="1919.0156"/><rect fill="none" height="130.4063" style="stroke:#000000;stroke-width:1.5;" width="616" x="1450.5" y="2063.4219"/><rect fill="none" height="130.4063" style="stroke:#000000;stroke-width:1.5;" width="712" x="1450.5" y="2207.8281"/><rect fill="none" height="107.125" style="stroke:#000000;stroke-width:1.5;" width="698" x="1450.5" y="2352.2344"/><rect fill="none" height="785.4375" style="stroke:#000000;stroke-width:1.5;" width="2901" x="10" y="2943.8594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="125.5781" y2="4088.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="585.5" x2="585.5" y1="125.5781" y2="4088.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1539.5" x2="1539.5" y1="125.5781" y2="4088.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2162.5" x2="2162.5" y1="125.5781" y2="4088.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2332.5" x2="2332.5" y1="125.5781" y2="4088.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2526.5" x2="2526.5" y1="125.5781" y2="4088.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2851" x2="2851" y1="125.5781" y2="4088.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="20" y="120.8613">Patient</text><ellipse cx="58.5" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M58.5,58.7969 L58.5,85.7969 M45.5,66.7969 L71.5,66.7969 M58.5,85.7969 L45.5,100.7969 M58.5,85.7969 L71.5,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="20" y="4106.5176">Patient</text><ellipse cx="58.5" cy="4119.7344" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M58.5,4127.7344 L58.5,4154.7344 M45.5,4135.7344 L71.5,4135.7344 M58.5,4154.7344 L45.5,4169.7344 M58.5,4154.7344 L71.5,4169.7344 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="493.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="170" x="500.5" y="112.8613">PatientController</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="493.5" y="4087.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="170" x="500.5" y="4113.5176">PatientController</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="1460.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="1467.5" y="112.8613">PatientService</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="1460.5" y="4087.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="1467.5" y="4113.5176">PatientService</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="2090.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="130" x="2097.5" y="112.8613">EmailService</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="2090.5" y="4087.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="130" x="2097.5" y="4113.5176">EmailService</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="2244.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="163" x="2251.5" y="112.8613">AuditLogService</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177" x="2244.5" y="4087.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="163" x="2251.5" y="4113.5176">AuditLogService</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="2431.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="177" x="2438.5" y="112.8613">PatientRepository</text><rect fill="#E2E2F0" height="37.2813" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="2431.5" y="4087.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="177" x="2438.5" y="4113.5176">PatientRepository</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="2801" y="120.8613">Database</text><path d="M2833,66.2969 C2833,56.2969 2851,56.2969 2851,56.2969 C2851,56.2969 2869,56.2969 2869,66.2969 L2869,92.2969 C2869,102.2969 2851,102.2969 2851,102.2969 C2851,102.2969 2833,102.2969 2833,92.2969 L2833,66.2969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2833,66.2969 C2833,76.2969 2851,76.2969 2851,76.2969 C2851,76.2969 2869,76.2969 2869,66.2969 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="94" x="2801" y="4106.5176">Database</text><path d="M2833,4121.2344 C2833,4111.2344 2851,4111.2344 2851,4111.2344 C2851,4111.2344 2869,4111.2344 2869,4121.2344 L2869,4147.2344 C2869,4157.2344 2851,4157.2344 2851,4157.2344 C2851,4157.2344 2833,4157.2344 2833,4147.2344 L2833,4121.2344 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2833,4121.2344 C2833,4131.2344 2851,4131.2344 2851,4131.2344 C2851,4131.2344 2869,4131.2344 2869,4121.2344 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="3612.4375" style="stroke:#181818;stroke-width:1.0;" width="10" x="580.5" y="467.5156"/><rect fill="#FFFFFF" height="232.9688" style="stroke:#181818;stroke-width:1.0;" width="10" x="1534.5" y="601.6406"/><rect fill="#FFFFFF" height="1568.9063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1534.5" y="1359.9531"/><rect fill="#FFFFFF" height="83.8438" style="stroke:#181818;stroke-width:1.0;" width="10" x="2157.5" y="3099.8281"/><rect fill="#FFFFFF" height="144.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="2328" y="1178.2656"/><rect fill="#FFFFFF" height="74.5625" style="stroke:#181818;stroke-width:1.0;" width="10" x="2328" y="3407.2031"/><polygon fill="#181818" points="568.5,463.5156,578.5,467.5156,568.5,471.5156,572.5,467.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="58.5" x2="574.5" y1="467.5156" y2="467.5156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="233" x="65.5" y="158.1426">PUT /api/patient/profile</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="108" x="65.5" y="181.4238">Headers: {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="265" x="77.5" y="204.7051">Authorization: Bearer JWT,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="308" x="77.5" y="227.9863">Content-Type: application/json</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="65.5" y="251.2676">}</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="269" x="65.5" y="274.5488">Body: UpdatePatientDTO {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="186" x="77.5" y="297.8301">firstName?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="183" x="77.5" y="321.1113">lastName?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179" x="77.5" y="344.3926">fullName?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="77.5" y="367.6738">email?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="232" x="77.5" y="390.9551">phoneNumber?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="278" x="77.5" y="414.2363">emergencyContact?: string,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="269" x="77.5" y="437.5176">medicalConditions?: string</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="65.5" y="460.7988">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="632.5" y1="551.3594" y2="551.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="632.5" x2="632.5" y1="551.3594" y2="564.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="591.5" x2="632.5" y1="564.3594" y2="564.3594"/><polygon fill="#181818" points="601.5,560.3594,591.5,564.3594,601.5,568.3594,597.5,564.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="303" x="597.5" y="498.0801">[Authorize(Roles = "Patient")]</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="304" x="597.5" y="521.3613">var patientId = User.FindFirst(</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="354" x="609.5" y="544.6426">ClaimTypes.NameIdentifier)?.Value</text><polygon fill="#181818" points="1522.5,597.6406,1532.5,601.6406,1522.5,605.6406,1526.5,601.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="1528.5" y1="601.6406" y2="601.6406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="382" x="597.5" y="594.9238">GetPatientById(Guid.Parse(patientId))</text><polygon fill="#181818" points="2515,634.9219,2525,638.9219,2515,642.9219,2519,638.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="2521" y1="638.9219" y2="638.9219"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="400" x="1551.5" y="632.2051">GetByIdAsync(new PatientId(patientId))</text><polygon fill="#181818" points="2839,718.7656,2849,722.7656,2839,726.7656,2843,722.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2527" x2="2845" y1="722.7656" y2="722.7656"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="2534" y="669.4863">SELECT *</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="146" x="2534" y="692.7676">FROM Patients</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="240" x="2534" y="716.0488">WHERE Id = @patientId</text><polygon fill="#181818" points="2538,756.0469,2528,760.0469,2538,764.0469,2534,760.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2532" x2="2850" y1="760.0469" y2="760.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="130" x="2544" y="753.3301">PatientEntity</text><polygon fill="#181818" points="1555.5,793.3281,1545.5,797.3281,1555.5,801.3281,1551.5,797.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1549.5" x2="2526" y1="797.3281" y2="797.3281"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="1561.5" y="790.6113">Patient</text><polygon fill="#181818" points="601.5,830.6094,591.5,834.6094,601.5,838.6094,597.5,834.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="595.5" x2="1538.5" y1="834.6094" y2="834.6094"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="114" x="607.5" y="827.8926">PatientDTO</text><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="632.5" y1="941.7344" y2="941.7344"/><line style="stroke:#181818;stroke-width:1.0;" x1="632.5" x2="632.5" y1="941.7344" y2="954.7344"/><line style="stroke:#181818;stroke-width:1.0;" x1="591.5" x2="632.5" y1="954.7344" y2="954.7344"/><polygon fill="#181818" points="601.5,950.7344,591.5,954.7344,601.5,958.7344,597.5,954.7344" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="489" x="597.5" y="865.1738">var changes = new Dictionary&lt;string, object&gt;();</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="467" x="597.5" y="888.4551">if (dto.FirstName != currentPatient.FirstName)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="918" x="609.5" y="911.7363">changes.Add("FirstName", new { Old = currentPatient.FirstName, New = dto.FirstName });</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="264" x="597.5" y="935.0176">// ... similar for other fields</text><polygon fill="#181818" points="2316,1174.2656,2326,1178.2656,2316,1182.2656,2320,1178.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="2322" y1="1178.2656" y2="1178.2656"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="260" x="597.5" y="985.2988">LogAsync(new AuditLog {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="190" x="609.5" y="1008.5801">UserId = patientId,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="447" x="609.5" y="1031.8613">TypeOfAction = TypeOfAction.ProfileUpdate,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="412" x="609.5" y="1055.1426">Changes = JsonSerializer.Serialize(new {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="264" x="621.5" y="1078.4238">UpdatedFields = changes,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="556" x="621.5" y="1101.7051">UpdatedBy = User.FindFirst(ClaimTypes.Name)?.Value,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="318" x="621.5" y="1124.9863">UpdatedAt = DateTime.UtcNow</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="21" x="609.5" y="1148.2676">})</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="21" x="597.5" y="1171.5488">})</text><polygon fill="#181818" points="2839,1281.3906,2849,1285.3906,2839,1289.3906,2843,1285.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2338" x2="2845" y1="1285.3906" y2="1285.3906"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="248" x="2345" y="1208.8301">INSERT INTO AuditLogs (</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="248" x="2357" y="1232.1113">Id, UserId, TypeOfAction,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="212" x="2357" y="1255.3926">Changes, Timestamp</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="200" x="2345" y="1278.6738">) VALUES (@values)</text><polygon fill="#181818" points="2344,1318.6719,2334,1322.6719,2344,1326.6719,2340,1322.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2338" x2="2850" y1="1322.6719" y2="1322.6719"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="109" x="2350" y="1315.9551">AuditLogId</text><polygon fill="#181818" points="1522.5,1355.9531,1532.5,1359.9531,1522.5,1363.9531,1526.5,1359.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="1528.5" y1="1359.9531" y2="1359.9531"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="483" x="597.5" y="1353.2363">UpdatePatientProfile(Guid.Parse(patientId), dto)</text><polygon fill="#181818" points="2515,1393.2344,2525,1397.2344,2515,1401.2344,2519,1397.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="2521" y1="1397.2344" y2="1397.2344"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="400" x="1551.5" y="1390.5176">GetByIdAsync(new PatientId(patientId))</text><polygon fill="#181818" points="2839,1500.3594,2849,1504.3594,2839,1508.3594,2843,1504.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2527" x2="2845" y1="1504.3594" y2="1504.3594"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="92" x="2534" y="1427.7988">SELECT *</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="146" x="2534" y="1451.0801">FROM Patients</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="240" x="2534" y="1474.3613">WHERE Id = @patientId</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="129" x="2534" y="1497.6426">FOR UPDATE</text><polygon fill="#181818" points="2538,1537.6406,2528,1541.6406,2538,1545.6406,2534,1541.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2532" x2="2850" y1="1541.6406" y2="1541.6406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="71" x="2544" y="1534.9238">Patient</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="1648.7656" y2="1648.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="1648.7656" y2="1661.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="1661.7656" y2="1661.7656"/><polygon fill="#181818" points="1555.5,1657.7656,1545.5,1661.7656,1555.5,1665.7656,1551.5,1661.7656" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="407" x="1551.5" y="1572.2051">var updatedFields = new List&lt;string&gt;();</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="391" x="1551.5" y="1595.4863">foreach (var action in updateActions) {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="85" x="1563.5" y="1618.7676">action();</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="1551.5" y="1642.0488">}</text><path d="M1450.5,1676.7656 L1526.5,1676.7656 L1526.5,1692.0469 L1516.5,1702.0469 L1450.5,1702.0469 L1450.5,1676.7656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="107.125" style="stroke:#000000;stroke-width:1.5;" width="536" x="1450.5" y="1676.7656"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1465.5" y="1696.3301">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="243" x="1541.5" y="1697.3301">[FirstName Changed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="1762.8906" y2="1762.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="1762.8906" y2="1775.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="1775.8906" y2="1775.8906"/><polygon fill="#181818" points="1555.5,1771.8906,1545.5,1775.8906,1555.5,1779.8906,1551.5,1775.8906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="423" x="1551.5" y="1732.8926">patient.ChangeFirstName(dto.FirstName);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="341" x="1551.5" y="1756.1738">updatedFields.Add("First Name");</text><path d="M1450.5,1797.8906 L1526.5,1797.8906 L1526.5,1813.1719 L1516.5,1823.1719 L1450.5,1823.1719 L1450.5,1797.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="107.125" style="stroke:#000000;stroke-width:1.5;" width="530" x="1450.5" y="1797.8906"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1465.5" y="1817.4551">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="239" x="1541.5" y="1818.4551">[LastName Changed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="1884.0156" y2="1884.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="1884.0156" y2="1897.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="1897.0156" y2="1897.0156"/><polygon fill="#181818" points="1555.5,1893.0156,1545.5,1897.0156,1555.5,1901.0156,1551.5,1897.0156" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="417" x="1551.5" y="1854.0176">patient.ChangeLastName(dto.LastName);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="338" x="1551.5" y="1877.2988">updatedFields.Add("Last Name");</text><path d="M1450.5,1919.0156 L1526.5,1919.0156 L1526.5,1934.2969 L1516.5,1944.2969 L1450.5,1944.2969 L1450.5,1919.0156 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="130.4063" style="stroke:#000000;stroke-width:1.5;" width="444" x="1450.5" y="1919.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1465.5" y="1938.5801">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="187" x="1541.5" y="1939.5801">[Email Changed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="2028.4219" y2="2028.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="2028.4219" y2="2041.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="2041.4219" y2="2041.4219"/><polygon fill="#181818" points="1555.5,2037.4219,1545.5,2041.4219,1555.5,2045.4219,1551.5,2041.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="259" x="1551.5" y="1975.1426">ValidateEmail(dto.Email);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="331" x="1551.5" y="1998.4238">patient.ChangeEmail(dto.Email);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="289" x="1551.5" y="2021.7051">updatedFields.Add("Email");</text><path d="M1450.5,2063.4219 L1526.5,2063.4219 L1526.5,2078.7031 L1516.5,2088.7031 L1450.5,2088.7031 L1450.5,2063.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="130.4063" style="stroke:#000000;stroke-width:1.5;" width="616" x="1450.5" y="2063.4219"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1465.5" y="2082.9863">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="285" x="1541.5" y="2083.9863">[PhoneNumber Changed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="2172.8281" y2="2172.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="2172.8281" y2="2185.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="2185.8281" y2="2185.8281"/><polygon fill="#181818" points="1555.5,2181.8281,1545.5,2185.8281,1555.5,2189.8281,1551.5,2185.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="431" x="1551.5" y="2119.5488">ValidatePhoneNumber(dto.PhoneNumber);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="503" x="1551.5" y="2142.8301">patient.ChangePhoneNumber(dto.PhoneNumber);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="381" x="1551.5" y="2166.1113">updatedFields.Add("Phone Number");</text><path d="M1450.5,2207.8281 L1526.5,2207.8281 L1526.5,2223.1094 L1516.5,2233.1094 L1450.5,2233.1094 L1450.5,2207.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="130.4063" style="stroke:#000000;stroke-width:1.5;" width="712" x="1450.5" y="2207.8281"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1465.5" y="2227.3926">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="339" x="1541.5" y="2228.3926">[EmergencyContact Changed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="2317.2344" y2="2317.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="2317.2344" y2="2330.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="2330.2344" y2="2330.2344"/><polygon fill="#181818" points="1555.5,2326.2344,1545.5,2330.2344,1555.5,2334.2344,1551.5,2330.2344" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="479" x="1551.5" y="2263.9551">ValidatePhoneNumber(dto.EmergencyContact);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="599" x="1551.5" y="2287.2363">patient.ChangeEmergencyContact(dto.EmergencyContact);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="429" x="1551.5" y="2310.5176">updatedFields.Add("Emergency Contact");</text><path d="M1450.5,2352.2344 L1526.5,2352.2344 L1526.5,2367.5156 L1516.5,2377.5156 L1450.5,2377.5156 L1450.5,2352.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="107.125" style="stroke:#000000;stroke-width:1.5;" width="698" x="1450.5" y="2352.2344"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="1465.5" y="2371.7988">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="333" x="1541.5" y="2372.7988">[MedicalConditions Changed]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="1586.5" y1="2438.3594" y2="2438.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="1586.5" x2="1586.5" y1="2438.3594" y2="2451.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="1545.5" x2="1586.5" y1="2451.3594" y2="2451.3594"/><polygon fill="#181818" points="1555.5,2447.3594,1545.5,2451.3594,1555.5,2455.3594,1551.5,2451.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="585" x="1551.5" y="2408.3613">patient.ChangeMedicalConditions(dto.MedicalConditions);</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="422" x="1551.5" y="2431.6426">updatedFields.Add("Medical Conditions");</text><polygon fill="#181818" points="2515,2491.6406,2525,2495.6406,2515,2499.6406,2519,2495.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="2521" y1="2495.6406" y2="2495.6406"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="220" x="1551.5" y="2488.9238">UpdateAsync(patient)</text><polygon fill="#181818" points="2839,2622.0469,2849,2626.0469,2839,2630.0469,2843,2626.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2527" x2="2845" y1="2626.0469" y2="2626.0469"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="168" x="2534" y="2526.2051">UPDATE Patients</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="300" x="2534" y="2549.4863">SET FirstName = @firstName,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="250" x="2558" y="2572.7676">LastName = @lastName,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="18" x="2558" y="2596.0488">...</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="240" x="2534" y="2619.3301">WHERE Id = @patientId</text><polygon fill="#181818" points="2538,2659.3281,2528,2663.3281,2538,2667.3281,2534,2663.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2532" x2="2850" y1="2663.3281" y2="2663.3281"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="80" x="2544" y="2656.6113">Success</text><polygon fill="#181818" points="2321,2813.0156,2331,2817.0156,2321,2821.0156,2325,2817.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1544.5" x2="2327" y1="2817.0156" y2="2817.0156"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195" x="1551.5" y="2693.8926">LogAsync(new Log(</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="220" x="1563.5" y="2717.1738">TypeOfAction.Update,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="210" x="1563.5" y="2740.4551">patient.Id.ToString(),</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="288" x="1563.5" y="2763.7363">"Patient updated. Fields: " +</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="304" x="1563.5" y="2787.0176">string.Join(", ", updatedFields)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="16" x="1551.5" y="2810.2988">))</text><polygon fill="#181818" points="2839,2850.2969,2849,2854.2969,2839,2858.2969,2843,2854.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2333" x2="2845" y1="2854.2969" y2="2854.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="180" x="2340" y="2847.5801">INSERT INTO Logs</text><polygon fill="#181818" points="2344,2887.5781,2334,2891.5781,2344,2895.5781,2340,2891.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2338" x2="2850" y1="2891.5781" y2="2891.5781"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="55" x="2350" y="2884.8613">LogId</text><polygon fill="#181818" points="601.5,2924.8594,591.5,2928.8594,601.5,2932.8594,597.5,2928.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="595.5" x2="1538.5" y1="2928.8594" y2="2928.8594"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="114" x="607.5" y="2922.1426">PatientDTO</text><path d="M10,2943.8594 L86,2943.8594 L86,2959.1406 L76,2969.1406 L10,2969.1406 L10,2943.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="785.4375" style="stroke:#000000;stroke-width:1.5;" width="2901" x="10" y="2943.8594"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="31" x="25" y="2963.4238">alt</text><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="187" x="101" y="2964.4238">[Email Changed]</text><polygon fill="#181818" points="2145.5,3095.8281,2155.5,3099.8281,2145.5,3103.8281,2149.5,3099.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="2151.5" y1="3099.8281" y2="3099.8281"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="313" x="597.5" y="2999.9863">SendEmailVerificationRequest(</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="102" x="609.5" y="3023.2676">dto.Email,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="317" x="609.5" y="3046.5488">patient.EmailVerificationToken,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="312" x="609.5" y="3069.8301">patient.EmailVerificationExpiry</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="8" x="597.5" y="3093.1113">)</text><polygon fill="#181818" points="69.5,3179.6719,59.5,3183.6719,69.5,3187.6719,65.5,3183.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="63.5" x2="2161.5" y1="3183.6719" y2="3183.6719"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="121" x="75.5" y="3130.3926">Send Email:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="331" x="75.5" y="3153.6738">Subject: "Verify Your New Email"</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="280" x="75.5" y="3176.9551">Body: "Click link to verify..."</text><polygon fill="#181818" points="2316,3403.2031,2326,3407.2031,2316,3411.2031,2320,3407.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="590.5" x2="2322" y1="3407.2031" y2="3407.2031"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="260" x="597.5" y="3214.2363">LogAsync(new AuditLog {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="190" x="609.5" y="3237.5176">UserId = patientId,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="445" x="609.5" y="3260.7988">TypeOfAction = TypeOfAction.EmailChange,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="412" x="609.5" y="3284.0801">Changes = JsonSerializer.Serialize(new {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="334" x="621.5" y="3307.3613">OldEmail = currentPatient.Email,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="232" x="621.5" y="3330.6426">NewEmail = dto.Email,</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="276" x="621.5" y="3353.9238">VerificationRequired = true</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="21" x="609.5" y="3377.2051">})</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="21" x="597.5" y="3400.4863">})</text><polygon fill="#181818" points="2839,3440.4844,2849,3444.4844,2839,3448.4844,2843,3444.4844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2338" x2="2845" y1="3444.4844" y2="3444.4844"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="234" x="2345" y="3437.7676">INSERT INTO AuditLogs</text><polygon fill="#181818" points="2344,3477.7656,2334,3481.7656,2344,3485.7656,2340,3481.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="2338" x2="2850" y1="3481.7656" y2="3481.7656"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="55" x="2350" y="3475.0488">LogId</text><polygon fill="#181818" points="69.5,3584.8906,59.5,3588.8906,69.5,3592.8906,65.5,3588.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63.5" x2="579.5" y1="3588.8906" y2="3588.8906"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="93" x="75.5" y="3512.3301">200 OK {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="486" x="87.5" y="3535.6113">message: "Profile updated. Please verify email.",</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="199" x="87.5" y="3558.8926">patient: PatientDTO</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="75.5" y="3582.1738">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="2911" y1="3597.8906" y2="3597.8906"/><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="211" x="15" y="3616.4551">[No Email Change]</text><polygon fill="#181818" points="69.5,3717.2969,59.5,3721.2969,69.5,3725.2969,65.5,3721.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63.5" x2="579.5" y1="3721.2969" y2="3721.2969"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="93" x="75.5" y="3644.7363">200 OK {</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="407" x="87.5" y="3668.0176">message: "Profile updated successfully",</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="199" x="87.5" y="3691.2988">patient: PatientDTO</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="13" x="75.5" y="3714.5801">}</text><path d="M2856,3741.2969 L2856,3890.2969 L3165,3890.2969 L3165,3751.2969 L3155,3741.2969 L2856,3741.2969 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><path d="M3155,3741.2969 L3155,3751.2969 L3165,3751.2969 L3155,3741.2969 " fill="#90EE90" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="221" x="2862" y="3764.8613">Database Constraints:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="170" x="2862" y="3788.1426">- PK_Patients (Id)</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="202" x="2862" y="3811.4238">- UQ_Patients_Email</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="288" x="2862" y="3834.7051">- UQ_Patients_PhoneNumber</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="280" x="2862" y="3857.9863">- CK_Patients_Email_Format</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="285" x="2862" y="3881.2676">- CK_Patients_Phone_Format</text><path d="M595,3900.9844 L595,4072.9844 L913,4072.9844 L913,3910.9844 L903,3900.9844 L595,3900.9844 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M903,3900.9844 L903,3910.9844 L913,3910.9844 L903,3900.9844 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="153" x="601" y="3924.5488">Error Handling:</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="191" x="601" y="3947.8301">- 400: Invalid Input</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="201" x="601" y="3971.1113">- 401: Unauthorized</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="246" x="601" y="3994.3926">- 404: Patient Not Found</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="274" x="601" y="4017.6738">- 409: Email/Phone Conflict</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="184" x="601" y="4040.9551">- 500: Server Error</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="297" x="601" y="4064.2363">All errors logged to AuditLogs</text><!--SRC=[lLXjazCs4FxkNx5DFpHfxvmhfHyQ2ZIvE70Gxj8uWUaq7KROIawS8xcoVJGmzz-xArcEdHVUPjeP66BjIllesLUHtGYPCitMYOfkU0mnNx8YoKTAvg5up-7UcPUBFE4mORdWCeU9Lak1t_CqPZc7KQBUmIcC-IrFu2VFOr6kj5FsyEHSH29bkB5LBfxZqLeb2TSjO1bCpWzgXLpVYeXRbR2f4goPIEeAmOv2luX5FbQhkav_71uqDEMfoWI2tbXRKm_lnTwmZ4DhMFuoak70ynm9fuyGTmycynbqMIgwgLtlffQSXNpAMSnrreCF2mdGB_9hfSLxr5Ao1mFEDDVmxDNiXAH426u-dMrItWEMfec8Z6RtRQRaGjujv435crv9UObXEBkoXo-5pl9BjkQFUv3bMiYLEJLXXrQNHPBiht8YjBcKNYl9Bulr6wvtTRbUSHbj23PwkobTynZ19oX33-0LiagCzw3W4BSKDUXqRtBkQFpJySFRKvNm31vMtcbr_bh8MwQXPFWYHk4yuzeV2HcFwEfjms72n9e8p7owtaMCkc8fkEuyzb-ofE2LlR07JtXU7Z_ONCJj9uM8_GdJ6MzNLZgT6jZGcuHcxzJifKtzR2EZjkJlNAZZEVNDaobj60vw40RZu7m6to_aQ7hrmgbd2_dgQJ0Dm5pejsghDnp0QMcgL0tm9ld6d5ZYTzb5g5maLa7XnRoEtFiEPff5DnWcF8aXkcPonRCQ-KHkkOf8w4P34P7hcDxyMdeMr9ktFCeVjJiF5b8ieHtdoX-vk8Dl7a9KQ8tsInXRMOUSKnxlz-EutQf4hHDZxGDS9SJ1iHDEu1Ar7aBJv1qXwNR1ztt8n5eaU8ib5XwLNsDccRjcpkMO-Jt0Qh3rcQiFDe4ed8mRAY-OKAPekbhs3HSeh7_wPH6q2McJkABm6IOj5Xx14WnexLS_ZMLZ4CfCnlWbd7Hvk_ka8HrizcDz9yvTT3StzdFSYBMBpyIQ-_CykbJlIE4ElN5N2smgYVZNHUh5PHXCP_WFLXR7K0OclP2IagQJ1X7rgwC4pMKvMwSBsO6N_V4y2A7zsoq1p3ekieqttF4OyBLm9JorD6sKkvBnmybwGj7HpDZ_BsLHwseAyycmFmiEf6-59BIvLkoudW2DHPQNkMPp34CPQRc6DkrWDWI5BFTQwhEE3IOhDRlkiFqcEMopn7eczYWsjYXAvBwLLjhDfARp6b1hsGicVJiFF2vZOt7Cli2WKpRstCSHSoJUisRQ_n5Jc0s2JZ4wneBvHSStKHnGE63VoEgs9zks-0a4DKrZflQzZ-OJoWUG6GsmAarocktv2r7kRZz4N5FZwBQ3T9PgKEhLaR_O7Hq-AvhsTXayUwj709Lwi5LqY6hrmzOXMpvAu_LgOJE_LYN2O5RBGImLrOHMbkagNL3cnhHIXFtiCoQ3i8WYdcKEv7w3mu_sRW_pQztASNWH-pCLciBJxXY96xnSdVB1yjM35ln02hPC-S-Ka6riuVYdmIks6AobHxeADPH67x0juFC6cIEfRzf5W6U5w3OZVuaTTrcEq5F-DpOVEoDMoTwWO6_BJDrm-N6Lu9zKw0tUr42eKE8pXBu36pbsiyLbWVSmDWepII6RvhmD_A4ARIOSMshSgDywnqV03IH2ta2kuDOeOt2qZ8KQCwND6XV_mRXZi5dMlsBOmVdE-crloDjw0uW3fzLq5C2kGuNcX3_N1Q-DDGrNq2X12vyQRupIVaJkaEnEgrYk-_VUsHbSFRUNnVadOojynRNSCxbAeqd2wKrfFMbVN7wh7cRrsATUpXDKlrIDcFzw093Pca4FmCt7xLBramglhSNgEWUr98A-7TF74ysvzDopcCecbWCciEprl5EOF7_jgY2qSQR2fVdlrT9hSv6TjLh_GSdvyntjroEbropV4PbDJaJPHMXtCIDB5lE0Nd-1rlWwUCfaZ2cr8h3tpyum9l1jYOqG_qsBt2p-Y0LTClSUZStQ_OeYz0VELwgGLl1BptgdQxinqh74jAM3VgRJwRyVS4umjhr-aW2dNnaaQeNbY_9w6uVLDVu5]--></g></svg>
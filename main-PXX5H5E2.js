var A6=Object.create;var TC=Object.defineProperty,I6=Object.defineProperties,R6=Object.getOwnPropertyDescriptor,N6=Object.getOwnPropertyDescriptors,F6=Object.getOwnPropertyNames,Rg=Object.getOwnPropertySymbols,k6=Object.getPrototypeOf,PC=Object.prototype.hasOwnProperty,FA=Object.prototype.propertyIsEnumerable;var NA=(n,t,e)=>t in n?TC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ee=(n,t)=>{for(var e in t||={})PC.call(t,e)&&NA(n,e,t[e]);if(Rg)for(var e of Rg(t))FA.call(t,e)&&NA(n,e,t[e]);return n},kt=(n,t)=>I6(n,N6(t));var Ng=(n,t)=>{var e={};for(var i in n)PC.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Rg)for(var i of Rg(n))t.indexOf(i)<0&&FA.call(n,i)&&(e[i]=n[i]);return e};var L6=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var U6=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of F6(t))!PC.call(n,r)&&r!==e&&TC(n,r,{get:()=>t[r],enumerable:!(i=R6(t,r))||i.enumerable});return n};var V6=(n,t,e)=>(e=n!=null?A6(k6(n)):{},U6(t||!n||!n.__esModule?TC(e,"default",{value:n,enumerable:!0}):e,n));var Xc=(n,t,e)=>new Promise((i,r)=>{var o=c=>{try{a(e.next(c))}catch(d){r(d)}},s=c=>{try{a(e.throw(c))}catch(d){r(d)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((e=e.apply(n,t)).next())});var sV=L6((ch,Am)=>{"use strict";(function(){var n,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,c="__lodash_placeholder__",d=1,f=2,h=4,v=1,_=2,C=1,w=2,b=4,x=8,D=16,S=32,P=64,W=128,V=256,H=512,$=30,F="...",I=800,U=16,q=1,ie=2,oe=3,pe=1/0,fe=9007199254740991,Te=17976931348623157e292,ce=NaN,De=4294967295,$e=De-1,Qe=De>>>1,Jt=[["ary",W],["bind",C],["bindKey",w],["curry",x],["curryRight",D],["flip",H],["partial",S],["partialRight",P],["rearg",V]],Dn="[object Arguments]",ve="[object Array]",Ne="[object AsyncFunction]",rt="[object Boolean]",ze="[object Date]",Nt="[object DOMException]",Vt="[object Error]",nn="[object Function]",gi="[object GeneratorFunction]",$t="[object Map]",si="[object Number]",te="[object Null]",Li="[object Object]",bn="[object Promise]",On="[object Proxy]",xt="[object RegExp]",Cn="[object Set]",_t="[object String]",L="[object Symbol]",O="[object Undefined]",re="[object WeakMap]",be="[object WeakSet]",Se="[object ArrayBuffer]",_e="[object DataView]",dt="[object Float32Array]",He="[object Float64Array]",Je="[object Int8Array]",Mn="[object Int16Array]",Re="[object Int32Array]",et="[object Uint8Array]",wt="[object Uint8ClampedArray]",Ft="[object Uint16Array]",tt="[object Uint32Array]",An=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,ei=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,We=/[&<>"']/g,de=RegExp(Y.source),Ce=RegExp(We.source),Ze=/<%-([\s\S]+?)%>/g,qe=/<%([\s\S]+?)%>/g,qt=/<%=([\s\S]+?)%>/g,Si=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gr=/^\w*$/,jn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/[\\^$.*+?()[\]{}|]/g,Os=RegExp(Xr.source),nd=/^\s+/,Wm=/\s/,La=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Sh=/\{\n\/\* \[wrapped with (.+)\] \*/,jm=/,? & /,Gm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,id=/[()=,{}\[\]\/\s]/,$m=/\\(\\)?/g,rd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Th=/\w*$/,qm=/^[-+]0x[0-9a-f]+$/i,_b=/^0b[01]+$/i,yb=/^\[object .+?Constructor\]$/,xb=/^0o[0-7]+$/i,R=/^(?:0|[1-9]\d*)$/,J=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,se=/($^)/,ae=/['\n\r\u2028\u2029\\]/g,K="\\ud800-\\udfff",ke="\\u0300-\\u036f",Ye="\\ufe20-\\ufe2f",ft="\\u20d0-\\u20ff",ut=ke+Ye+ft,Bt="\\u2700-\\u27bf",Yt="a-z\\xdf-\\xf6\\xf8-\\xff",ht="\\xac\\xb1\\xd7\\xf7",Ln="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ti="\\u2000-\\u206f",ai=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Er="A-Z\\xc0-\\xd6\\xd8-\\xde",Vn="\\ufe0e\\ufe0f",gt=ht+Ln+ti+ai,Po="['\u2019]",Wn="["+K+"]",uo="["+gt+"]",As="["+ut+"]",Ar="\\d+",Vc="["+Bt+"]",ni="["+Yt+"]",Do="[^"+K+gt+Ar+Bt+Yt+Er+"]",Ua="\\ud83c[\\udffb-\\udfff]",fo="(?:"+As+"|"+Ua+")",Is="[^"+K+"]",Zo="(?:\\ud83c[\\udde6-\\uddff]){2}",od="[\\ud800-\\udbff][\\udc00-\\udfff]",sd="["+Er+"]",xD="\\u200d",bD="(?:"+ni+"|"+Do+")",Nz="(?:"+sd+"|"+Do+")",CD="(?:"+Po+"(?:d|ll|m|re|s|t|ve))?",MD="(?:"+Po+"(?:D|LL|M|RE|S|T|VE))?",wD=fo+"?",ED="["+Vn+"]?",Fz="(?:"+xD+"(?:"+[Is,Zo,od].join("|")+")"+ED+wD+")*",kz="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lz="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",SD=ED+wD+Fz,Uz="(?:"+[Vc,Zo,od].join("|")+")"+SD,Vz="(?:"+[Is+As+"?",As,Zo,od,Wn].join("|")+")",Bz=RegExp(Po,"g"),zz=RegExp(As,"g"),bb=RegExp(Ua+"(?="+Ua+")|"+Vz+SD,"g"),Hz=RegExp([sd+"?"+ni+"+"+CD+"(?="+[uo,sd,"$"].join("|")+")",Nz+"+"+MD+"(?="+[uo,sd+bD,"$"].join("|")+")",sd+"?"+bD+"+"+CD,sd+"+"+MD,Lz,kz,Ar,Uz].join("|"),"g"),Wz=RegExp("["+xD+K+ut+Vn+"]"),jz=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gz=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$z=-1,Mi={};Mi[dt]=Mi[He]=Mi[Je]=Mi[Mn]=Mi[Re]=Mi[et]=Mi[wt]=Mi[Ft]=Mi[tt]=!0,Mi[Dn]=Mi[ve]=Mi[Se]=Mi[rt]=Mi[_e]=Mi[ze]=Mi[Vt]=Mi[nn]=Mi[$t]=Mi[si]=Mi[Li]=Mi[xt]=Mi[Cn]=Mi[_t]=Mi[re]=!1;var vi={};vi[Dn]=vi[ve]=vi[Se]=vi[_e]=vi[rt]=vi[ze]=vi[dt]=vi[He]=vi[Je]=vi[Mn]=vi[Re]=vi[$t]=vi[si]=vi[Li]=vi[xt]=vi[Cn]=vi[_t]=vi[L]=vi[et]=vi[wt]=vi[Ft]=vi[tt]=!0,vi[Vt]=vi[nn]=vi[re]=!1;var qz={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Yz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xz={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zz={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kz=parseFloat,Jz=parseInt,TD=typeof global=="object"&&global&&global.Object===Object&&global,Qz=typeof self=="object"&&self&&self.Object===Object&&self,vr=TD||Qz||Function("return this")(),Cb=typeof ch=="object"&&ch&&!ch.nodeType&&ch,Bc=Cb&&typeof Am=="object"&&Am&&!Am.nodeType&&Am,PD=Bc&&Bc.exports===Cb,Mb=PD&&TD.process,Ko=function(){try{var Z=Bc&&Bc.require&&Bc.require("util").types;return Z||Mb&&Mb.binding&&Mb.binding("util")}catch{}}(),DD=Ko&&Ko.isArrayBuffer,OD=Ko&&Ko.isDate,AD=Ko&&Ko.isMap,ID=Ko&&Ko.isRegExp,RD=Ko&&Ko.isSet,ND=Ko&&Ko.isTypedArray;function Oo(Z,he,le){switch(le.length){case 0:return Z.call(he);case 1:return Z.call(he,le[0]);case 2:return Z.call(he,le[0],le[1]);case 3:return Z.call(he,le[0],le[1],le[2])}return Z.apply(he,le)}function e4(Z,he,le,nt){for(var Xt=-1,Gn=Z==null?0:Z.length;++Xt<Gn;){var ar=Z[Xt];he(nt,ar,le(ar),Z)}return nt}function Jo(Z,he){for(var le=-1,nt=Z==null?0:Z.length;++le<nt&&he(Z[le],le,Z)!==!1;);return Z}function t4(Z,he){for(var le=Z==null?0:Z.length;le--&&he(Z[le],le,Z)!==!1;);return Z}function FD(Z,he){for(var le=-1,nt=Z==null?0:Z.length;++le<nt;)if(!he(Z[le],le,Z))return!1;return!0}function Nl(Z,he){for(var le=-1,nt=Z==null?0:Z.length,Xt=0,Gn=[];++le<nt;){var ar=Z[le];he(ar,le,Z)&&(Gn[Xt++]=ar)}return Gn}function Ym(Z,he){var le=Z==null?0:Z.length;return!!le&&ad(Z,he,0)>-1}function wb(Z,he,le){for(var nt=-1,Xt=Z==null?0:Z.length;++nt<Xt;)if(le(he,Z[nt]))return!0;return!1}function Ti(Z,he){for(var le=-1,nt=Z==null?0:Z.length,Xt=Array(nt);++le<nt;)Xt[le]=he(Z[le],le,Z);return Xt}function Fl(Z,he){for(var le=-1,nt=he.length,Xt=Z.length;++le<nt;)Z[Xt+le]=he[le];return Z}function Eb(Z,he,le,nt){var Xt=-1,Gn=Z==null?0:Z.length;for(nt&&Gn&&(le=Z[++Xt]);++Xt<Gn;)le=he(le,Z[Xt],Xt,Z);return le}function n4(Z,he,le,nt){var Xt=Z==null?0:Z.length;for(nt&&Xt&&(le=Z[--Xt]);Xt--;)le=he(le,Z[Xt],Xt,Z);return le}function Sb(Z,he){for(var le=-1,nt=Z==null?0:Z.length;++le<nt;)if(he(Z[le],le,Z))return!0;return!1}var i4=Tb("length");function r4(Z){return Z.split("")}function o4(Z){return Z.match(Gm)||[]}function kD(Z,he,le){var nt;return le(Z,function(Xt,Gn,ar){if(he(Xt,Gn,ar))return nt=Gn,!1}),nt}function Xm(Z,he,le,nt){for(var Xt=Z.length,Gn=le+(nt?1:-1);nt?Gn--:++Gn<Xt;)if(he(Z[Gn],Gn,Z))return Gn;return-1}function ad(Z,he,le){return he===he?v4(Z,he,le):Xm(Z,LD,le)}function s4(Z,he,le,nt){for(var Xt=le-1,Gn=Z.length;++Xt<Gn;)if(nt(Z[Xt],he))return Xt;return-1}function LD(Z){return Z!==Z}function UD(Z,he){var le=Z==null?0:Z.length;return le?Db(Z,he)/le:ce}function Tb(Z){return function(he){return he==null?n:he[Z]}}function Pb(Z){return function(he){return Z==null?n:Z[he]}}function VD(Z,he,le,nt,Xt){return Xt(Z,function(Gn,ar,li){le=nt?(nt=!1,Gn):he(le,Gn,ar,li)}),le}function a4(Z,he){var le=Z.length;for(Z.sort(he);le--;)Z[le]=Z[le].value;return Z}function Db(Z,he){for(var le,nt=-1,Xt=Z.length;++nt<Xt;){var Gn=he(Z[nt]);Gn!==n&&(le=le===n?Gn:le+Gn)}return le}function Ob(Z,he){for(var le=-1,nt=Array(Z);++le<Z;)nt[le]=he(le);return nt}function l4(Z,he){return Ti(he,function(le){return[le,Z[le]]})}function BD(Z){return Z&&Z.slice(0,jD(Z)+1).replace(nd,"")}function Ao(Z){return function(he){return Z(he)}}function Ab(Z,he){return Ti(he,function(le){return Z[le]})}function Ph(Z,he){return Z.has(he)}function zD(Z,he){for(var le=-1,nt=Z.length;++le<nt&&ad(he,Z[le],0)>-1;);return le}function HD(Z,he){for(var le=Z.length;le--&&ad(he,Z[le],0)>-1;);return le}function c4(Z,he){for(var le=Z.length,nt=0;le--;)Z[le]===he&&++nt;return nt}var u4=Pb(qz),d4=Pb(Yz);function f4(Z){return"\\"+Zz[Z]}function h4(Z,he){return Z==null?n:Z[he]}function ld(Z){return Wz.test(Z)}function p4(Z){return jz.test(Z)}function m4(Z){for(var he,le=[];!(he=Z.next()).done;)le.push(he.value);return le}function Ib(Z){var he=-1,le=Array(Z.size);return Z.forEach(function(nt,Xt){le[++he]=[Xt,nt]}),le}function WD(Z,he){return function(le){return Z(he(le))}}function kl(Z,he){for(var le=-1,nt=Z.length,Xt=0,Gn=[];++le<nt;){var ar=Z[le];(ar===he||ar===c)&&(Z[le]=c,Gn[Xt++]=le)}return Gn}function Zm(Z){var he=-1,le=Array(Z.size);return Z.forEach(function(nt){le[++he]=nt}),le}function g4(Z){var he=-1,le=Array(Z.size);return Z.forEach(function(nt){le[++he]=[nt,nt]}),le}function v4(Z,he,le){for(var nt=le-1,Xt=Z.length;++nt<Xt;)if(Z[nt]===he)return nt;return-1}function _4(Z,he,le){for(var nt=le+1;nt--;)if(Z[nt]===he)return nt;return nt}function cd(Z){return ld(Z)?x4(Z):i4(Z)}function Rs(Z){return ld(Z)?b4(Z):r4(Z)}function jD(Z){for(var he=Z.length;he--&&Wm.test(Z.charAt(he)););return he}var y4=Pb(Xz);function x4(Z){for(var he=bb.lastIndex=0;bb.test(Z);)++he;return he}function b4(Z){return Z.match(bb)||[]}function C4(Z){return Z.match(Hz)||[]}var M4=function Z(he){he=he==null?vr:Ll.defaults(vr.Object(),he,Ll.pick(vr,Gz));var le=he.Array,nt=he.Date,Xt=he.Error,Gn=he.Function,ar=he.Math,li=he.Object,Rb=he.RegExp,w4=he.String,Qo=he.TypeError,Km=le.prototype,E4=Gn.prototype,ud=li.prototype,Jm=he["__core-js_shared__"],Qm=E4.toString,Kn=ud.hasOwnProperty,S4=0,GD=function(){var l=/[^.]+$/.exec(Jm&&Jm.keys&&Jm.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),eg=ud.toString,T4=Qm.call(li),P4=vr._,D4=Rb("^"+Qm.call(Kn).replace(Xr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tg=PD?he.Buffer:n,Ul=he.Symbol,ng=he.Uint8Array,$D=tg?tg.allocUnsafe:n,ig=WD(li.getPrototypeOf,li),qD=li.create,YD=ud.propertyIsEnumerable,rg=Km.splice,XD=Ul?Ul.isConcatSpreadable:n,Dh=Ul?Ul.iterator:n,zc=Ul?Ul.toStringTag:n,og=function(){try{var l=$c(li,"defineProperty");return l({},"",{}),l}catch{}}(),O4=he.clearTimeout!==vr.clearTimeout&&he.clearTimeout,A4=nt&&nt.now!==vr.Date.now&&nt.now,I4=he.setTimeout!==vr.setTimeout&&he.setTimeout,sg=ar.ceil,ag=ar.floor,Nb=li.getOwnPropertySymbols,R4=tg?tg.isBuffer:n,ZD=he.isFinite,N4=Km.join,F4=WD(li.keys,li),lr=ar.max,Ir=ar.min,k4=nt.now,L4=he.parseInt,KD=ar.random,U4=Km.reverse,Fb=$c(he,"DataView"),Oh=$c(he,"Map"),kb=$c(he,"Promise"),dd=$c(he,"Set"),Ah=$c(he,"WeakMap"),Ih=$c(li,"create"),lg=Ah&&new Ah,fd={},V4=qc(Fb),B4=qc(Oh),z4=qc(kb),H4=qc(dd),W4=qc(Ah),cg=Ul?Ul.prototype:n,Rh=cg?cg.valueOf:n,JD=cg?cg.toString:n;function A(l){if(Ui(l)&&!Qt(l)&&!(l instanceof In)){if(l instanceof es)return l;if(Kn.call(l,"__wrapped__"))return QO(l)}return new es(l)}var hd=function(){function l(){}return function(u){if(!Ni(u))return{};if(qD)return qD(u);l.prototype=u;var m=new l;return l.prototype=n,m}}();function ug(){}function es(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}A.templateSettings={escape:Ze,evaluate:qe,interpolate:qt,variable:"",imports:{_:A}},A.prototype=ug.prototype,A.prototype.constructor=A,es.prototype=hd(ug.prototype),es.prototype.constructor=es;function In(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function j4(){var l=new In(this.__wrapped__);return l.__actions__=ho(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ho(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ho(this.__views__),l}function G4(){if(this.__filtered__){var l=new In(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function $4(){var l=this.__wrapped__.value(),u=this.__dir__,m=Qt(l),M=u<0,E=m?l.length:0,N=r5(0,E,this.__views__),B=N.start,G=N.end,Q=G-B,ye=M?G:B-1,xe=this.__iteratees__,Pe=xe.length,je=0,pt=Ir(Q,this.__takeCount__);if(!m||!M&&E==Q&&pt==Q)return CO(l,this.__actions__);var Dt=[];e:for(;Q--&&je<pt;){ye+=u;for(var pn=-1,Ot=l[ye];++pn<Pe;){var wn=xe[pn],Nn=wn.iteratee,No=wn.type,Jr=Nn(Ot);if(No==ie)Ot=Jr;else if(!Jr){if(No==q)continue e;break e}}Dt[je++]=Ot}return Dt}In.prototype=hd(ug.prototype),In.prototype.constructor=In;function Hc(l){var u=-1,m=l==null?0:l.length;for(this.clear();++u<m;){var M=l[u];this.set(M[0],M[1])}}function q4(){this.__data__=Ih?Ih(null):{},this.size=0}function Y4(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}function X4(l){var u=this.__data__;if(Ih){var m=u[l];return m===s?n:m}return Kn.call(u,l)?u[l]:n}function Z4(l){var u=this.__data__;return Ih?u[l]!==n:Kn.call(u,l)}function K4(l,u){var m=this.__data__;return this.size+=this.has(l)?0:1,m[l]=Ih&&u===n?s:u,this}Hc.prototype.clear=q4,Hc.prototype.delete=Y4,Hc.prototype.get=X4,Hc.prototype.has=Z4,Hc.prototype.set=K4;function Va(l){var u=-1,m=l==null?0:l.length;for(this.clear();++u<m;){var M=l[u];this.set(M[0],M[1])}}function J4(){this.__data__=[],this.size=0}function Q4(l){var u=this.__data__,m=dg(u,l);if(m<0)return!1;var M=u.length-1;return m==M?u.pop():rg.call(u,m,1),--this.size,!0}function eH(l){var u=this.__data__,m=dg(u,l);return m<0?n:u[m][1]}function tH(l){return dg(this.__data__,l)>-1}function nH(l,u){var m=this.__data__,M=dg(m,l);return M<0?(++this.size,m.push([l,u])):m[M][1]=u,this}Va.prototype.clear=J4,Va.prototype.delete=Q4,Va.prototype.get=eH,Va.prototype.has=tH,Va.prototype.set=nH;function Ba(l){var u=-1,m=l==null?0:l.length;for(this.clear();++u<m;){var M=l[u];this.set(M[0],M[1])}}function iH(){this.size=0,this.__data__={hash:new Hc,map:new(Oh||Va),string:new Hc}}function rH(l){var u=Mg(this,l).delete(l);return this.size-=u?1:0,u}function oH(l){return Mg(this,l).get(l)}function sH(l){return Mg(this,l).has(l)}function aH(l,u){var m=Mg(this,l),M=m.size;return m.set(l,u),this.size+=m.size==M?0:1,this}Ba.prototype.clear=iH,Ba.prototype.delete=rH,Ba.prototype.get=oH,Ba.prototype.has=sH,Ba.prototype.set=aH;function Wc(l){var u=-1,m=l==null?0:l.length;for(this.__data__=new Ba;++u<m;)this.add(l[u])}function lH(l){return this.__data__.set(l,s),this}function cH(l){return this.__data__.has(l)}Wc.prototype.add=Wc.prototype.push=lH,Wc.prototype.has=cH;function Ns(l){var u=this.__data__=new Va(l);this.size=u.size}function uH(){this.__data__=new Va,this.size=0}function dH(l){var u=this.__data__,m=u.delete(l);return this.size=u.size,m}function fH(l){return this.__data__.get(l)}function hH(l){return this.__data__.has(l)}function pH(l,u){var m=this.__data__;if(m instanceof Va){var M=m.__data__;if(!Oh||M.length<e-1)return M.push([l,u]),this.size=++m.size,this;m=this.__data__=new Ba(M)}return m.set(l,u),this.size=m.size,this}Ns.prototype.clear=uH,Ns.prototype.delete=dH,Ns.prototype.get=fH,Ns.prototype.has=hH,Ns.prototype.set=pH;function QD(l,u){var m=Qt(l),M=!m&&Yc(l),E=!m&&!M&&Wl(l),N=!m&&!M&&!E&&vd(l),B=m||M||E||N,G=B?Ob(l.length,w4):[],Q=G.length;for(var ye in l)(u||Kn.call(l,ye))&&!(B&&(ye=="length"||E&&(ye=="offset"||ye=="parent")||N&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||ja(ye,Q)))&&G.push(ye);return G}function eO(l){var u=l.length;return u?l[qb(0,u-1)]:n}function mH(l,u){return wg(ho(l),jc(u,0,l.length))}function gH(l){return wg(ho(l))}function Lb(l,u,m){(m!==n&&!Fs(l[u],m)||m===n&&!(u in l))&&za(l,u,m)}function Nh(l,u,m){var M=l[u];(!(Kn.call(l,u)&&Fs(M,m))||m===n&&!(u in l))&&za(l,u,m)}function dg(l,u){for(var m=l.length;m--;)if(Fs(l[m][0],u))return m;return-1}function vH(l,u,m,M){return Vl(l,function(E,N,B){u(M,E,m(E),B)}),M}function tO(l,u){return l&&la(u,_r(u),l)}function _H(l,u){return l&&la(u,mo(u),l)}function za(l,u,m){u=="__proto__"&&og?og(l,u,{configurable:!0,enumerable:!0,value:m,writable:!0}):l[u]=m}function Ub(l,u){for(var m=-1,M=u.length,E=le(M),N=l==null;++m<M;)E[m]=N?n:_C(l,u[m]);return E}function jc(l,u,m){return l===l&&(m!==n&&(l=l<=m?l:m),u!==n&&(l=l>=u?l:u)),l}function ts(l,u,m,M,E,N){var B,G=u&d,Q=u&f,ye=u&h;if(m&&(B=E?m(l,M,E,N):m(l)),B!==n)return B;if(!Ni(l))return l;var xe=Qt(l);if(xe){if(B=s5(l),!G)return ho(l,B)}else{var Pe=Rr(l),je=Pe==nn||Pe==gi;if(Wl(l))return EO(l,G);if(Pe==Li||Pe==Dn||je&&!E){if(B=Q||je?{}:jO(l),!G)return Q?XH(l,_H(B,l)):YH(l,tO(B,l))}else{if(!vi[Pe])return E?l:{};B=a5(l,Pe,G)}}N||(N=new Ns);var pt=N.get(l);if(pt)return pt;N.set(l,B),yA(l)?l.forEach(function(Ot){B.add(ts(Ot,u,m,Ot,l,N))}):vA(l)&&l.forEach(function(Ot,wn){B.set(wn,ts(Ot,u,m,wn,l,N))});var Dt=ye?Q?rC:iC:Q?mo:_r,pn=xe?n:Dt(l);return Jo(pn||l,function(Ot,wn){pn&&(wn=Ot,Ot=l[wn]),Nh(B,wn,ts(Ot,u,m,wn,l,N))}),B}function yH(l){var u=_r(l);return function(m){return nO(m,l,u)}}function nO(l,u,m){var M=m.length;if(l==null)return!M;for(l=li(l);M--;){var E=m[M],N=u[E],B=l[E];if(B===n&&!(E in l)||!N(B))return!1}return!0}function iO(l,u,m){if(typeof l!="function")throw new Qo(r);return zh(function(){l.apply(n,m)},u)}function Fh(l,u,m,M){var E=-1,N=Ym,B=!0,G=l.length,Q=[],ye=u.length;if(!G)return Q;m&&(u=Ti(u,Ao(m))),M?(N=wb,B=!1):u.length>=e&&(N=Ph,B=!1,u=new Wc(u));e:for(;++E<G;){var xe=l[E],Pe=m==null?xe:m(xe);if(xe=M||xe!==0?xe:0,B&&Pe===Pe){for(var je=ye;je--;)if(u[je]===Pe)continue e;Q.push(xe)}else N(u,Pe,M)||Q.push(xe)}return Q}var Vl=OO(aa),rO=OO(Bb,!0);function xH(l,u){var m=!0;return Vl(l,function(M,E,N){return m=!!u(M,E,N),m}),m}function fg(l,u,m){for(var M=-1,E=l.length;++M<E;){var N=l[M],B=u(N);if(B!=null&&(G===n?B===B&&!Ro(B):m(B,G)))var G=B,Q=N}return Q}function bH(l,u,m,M){var E=l.length;for(m=cn(m),m<0&&(m=-m>E?0:E+m),M=M===n||M>E?E:cn(M),M<0&&(M+=E),M=m>M?0:bA(M);m<M;)l[m++]=u;return l}function oO(l,u){var m=[];return Vl(l,function(M,E,N){u(M,E,N)&&m.push(M)}),m}function Sr(l,u,m,M,E){var N=-1,B=l.length;for(m||(m=c5),E||(E=[]);++N<B;){var G=l[N];u>0&&m(G)?u>1?Sr(G,u-1,m,M,E):Fl(E,G):M||(E[E.length]=G)}return E}var Vb=AO(),sO=AO(!0);function aa(l,u){return l&&Vb(l,u,_r)}function Bb(l,u){return l&&sO(l,u,_r)}function hg(l,u){return Nl(u,function(m){return Ga(l[m])})}function Gc(l,u){u=zl(u,l);for(var m=0,M=u.length;l!=null&&m<M;)l=l[ca(u[m++])];return m&&m==M?l:n}function aO(l,u,m){var M=u(l);return Qt(l)?M:Fl(M,m(l))}function Zr(l){return l==null?l===n?O:te:zc&&zc in li(l)?i5(l):g5(l)}function zb(l,u){return l>u}function CH(l,u){return l!=null&&Kn.call(l,u)}function MH(l,u){return l!=null&&u in li(l)}function wH(l,u,m){return l>=Ir(u,m)&&l<lr(u,m)}function Hb(l,u,m){for(var M=m?wb:Ym,E=l[0].length,N=l.length,B=N,G=le(N),Q=1/0,ye=[];B--;){var xe=l[B];B&&u&&(xe=Ti(xe,Ao(u))),Q=Ir(xe.length,Q),G[B]=!m&&(u||E>=120&&xe.length>=120)?new Wc(B&&xe):n}xe=l[0];var Pe=-1,je=G[0];e:for(;++Pe<E&&ye.length<Q;){var pt=xe[Pe],Dt=u?u(pt):pt;if(pt=m||pt!==0?pt:0,!(je?Ph(je,Dt):M(ye,Dt,m))){for(B=N;--B;){var pn=G[B];if(!(pn?Ph(pn,Dt):M(l[B],Dt,m)))continue e}je&&je.push(Dt),ye.push(pt)}}return ye}function EH(l,u,m,M){return aa(l,function(E,N,B){u(M,m(E),N,B)}),M}function kh(l,u,m){u=zl(u,l),l=YO(l,u);var M=l==null?l:l[ca(is(u))];return M==null?n:Oo(M,l,m)}function lO(l){return Ui(l)&&Zr(l)==Dn}function SH(l){return Ui(l)&&Zr(l)==Se}function TH(l){return Ui(l)&&Zr(l)==ze}function Lh(l,u,m,M,E){return l===u?!0:l==null||u==null||!Ui(l)&&!Ui(u)?l!==l&&u!==u:PH(l,u,m,M,Lh,E)}function PH(l,u,m,M,E,N){var B=Qt(l),G=Qt(u),Q=B?ve:Rr(l),ye=G?ve:Rr(u);Q=Q==Dn?Li:Q,ye=ye==Dn?Li:ye;var xe=Q==Li,Pe=ye==Li,je=Q==ye;if(je&&Wl(l)){if(!Wl(u))return!1;B=!0,xe=!1}if(je&&!xe)return N||(N=new Ns),B||vd(l)?zO(l,u,m,M,E,N):t5(l,u,Q,m,M,E,N);if(!(m&v)){var pt=xe&&Kn.call(l,"__wrapped__"),Dt=Pe&&Kn.call(u,"__wrapped__");if(pt||Dt){var pn=pt?l.value():l,Ot=Dt?u.value():u;return N||(N=new Ns),E(pn,Ot,m,M,N)}}return je?(N||(N=new Ns),n5(l,u,m,M,E,N)):!1}function DH(l){return Ui(l)&&Rr(l)==$t}function Wb(l,u,m,M){var E=m.length,N=E,B=!M;if(l==null)return!N;for(l=li(l);E--;){var G=m[E];if(B&&G[2]?G[1]!==l[G[0]]:!(G[0]in l))return!1}for(;++E<N;){G=m[E];var Q=G[0],ye=l[Q],xe=G[1];if(B&&G[2]){if(ye===n&&!(Q in l))return!1}else{var Pe=new Ns;if(M)var je=M(ye,xe,Q,l,u,Pe);if(!(je===n?Lh(xe,ye,v|_,M,Pe):je))return!1}}return!0}function cO(l){if(!Ni(l)||d5(l))return!1;var u=Ga(l)?D4:yb;return u.test(qc(l))}function OH(l){return Ui(l)&&Zr(l)==xt}function AH(l){return Ui(l)&&Rr(l)==Cn}function IH(l){return Ui(l)&&Og(l.length)&&!!Mi[Zr(l)]}function uO(l){return typeof l=="function"?l:l==null?go:typeof l=="object"?Qt(l)?hO(l[0],l[1]):fO(l):IA(l)}function jb(l){if(!Bh(l))return F4(l);var u=[];for(var m in li(l))Kn.call(l,m)&&m!="constructor"&&u.push(m);return u}function RH(l){if(!Ni(l))return m5(l);var u=Bh(l),m=[];for(var M in l)M=="constructor"&&(u||!Kn.call(l,M))||m.push(M);return m}function Gb(l,u){return l<u}function dO(l,u){var m=-1,M=po(l)?le(l.length):[];return Vl(l,function(E,N,B){M[++m]=u(E,N,B)}),M}function fO(l){var u=sC(l);return u.length==1&&u[0][2]?$O(u[0][0],u[0][1]):function(m){return m===l||Wb(m,l,u)}}function hO(l,u){return lC(l)&&GO(u)?$O(ca(l),u):function(m){var M=_C(m,l);return M===n&&M===u?yC(m,l):Lh(u,M,v|_)}}function pg(l,u,m,M,E){l!==u&&Vb(u,function(N,B){if(E||(E=new Ns),Ni(N))NH(l,u,B,m,pg,M,E);else{var G=M?M(uC(l,B),N,B+"",l,u,E):n;G===n&&(G=N),Lb(l,B,G)}},mo)}function NH(l,u,m,M,E,N,B){var G=uC(l,m),Q=uC(u,m),ye=B.get(Q);if(ye){Lb(l,m,ye);return}var xe=N?N(G,Q,m+"",l,u,B):n,Pe=xe===n;if(Pe){var je=Qt(Q),pt=!je&&Wl(Q),Dt=!je&&!pt&&vd(Q);xe=Q,je||pt||Dt?Qt(G)?xe=G:ji(G)?xe=ho(G):pt?(Pe=!1,xe=EO(Q,!0)):Dt?(Pe=!1,xe=SO(Q,!0)):xe=[]:Hh(Q)||Yc(Q)?(xe=G,Yc(G)?xe=CA(G):(!Ni(G)||Ga(G))&&(xe=jO(Q))):Pe=!1}Pe&&(B.set(Q,xe),E(xe,Q,M,N,B),B.delete(Q)),Lb(l,m,xe)}function pO(l,u){var m=l.length;if(m)return u+=u<0?m:0,ja(u,m)?l[u]:n}function mO(l,u,m){u.length?u=Ti(u,function(N){return Qt(N)?function(B){return Gc(B,N.length===1?N[0]:N)}:N}):u=[go];var M=-1;u=Ti(u,Ao(Pt()));var E=dO(l,function(N,B,G){var Q=Ti(u,function(ye){return ye(N)});return{criteria:Q,index:++M,value:N}});return a4(E,function(N,B){return qH(N,B,m)})}function FH(l,u){return gO(l,u,function(m,M){return yC(l,M)})}function gO(l,u,m){for(var M=-1,E=u.length,N={};++M<E;){var B=u[M],G=Gc(l,B);m(G,B)&&Uh(N,zl(B,l),G)}return N}function kH(l){return function(u){return Gc(u,l)}}function $b(l,u,m,M){var E=M?s4:ad,N=-1,B=u.length,G=l;for(l===u&&(u=ho(u)),m&&(G=Ti(l,Ao(m)));++N<B;)for(var Q=0,ye=u[N],xe=m?m(ye):ye;(Q=E(G,xe,Q,M))>-1;)G!==l&&rg.call(G,Q,1),rg.call(l,Q,1);return l}function vO(l,u){for(var m=l?u.length:0,M=m-1;m--;){var E=u[m];if(m==M||E!==N){var N=E;ja(E)?rg.call(l,E,1):Zb(l,E)}}return l}function qb(l,u){return l+ag(KD()*(u-l+1))}function LH(l,u,m,M){for(var E=-1,N=lr(sg((u-l)/(m||1)),0),B=le(N);N--;)B[M?N:++E]=l,l+=m;return B}function Yb(l,u){var m="";if(!l||u<1||u>fe)return m;do u%2&&(m+=l),u=ag(u/2),u&&(l+=l);while(u);return m}function vn(l,u){return dC(qO(l,u,go),l+"")}function UH(l){return eO(_d(l))}function VH(l,u){var m=_d(l);return wg(m,jc(u,0,m.length))}function Uh(l,u,m,M){if(!Ni(l))return l;u=zl(u,l);for(var E=-1,N=u.length,B=N-1,G=l;G!=null&&++E<N;){var Q=ca(u[E]),ye=m;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return l;if(E!=B){var xe=G[Q];ye=M?M(xe,Q,G):n,ye===n&&(ye=Ni(xe)?xe:ja(u[E+1])?[]:{})}Nh(G,Q,ye),G=G[Q]}return l}var _O=lg?function(l,u){return lg.set(l,u),l}:go,BH=og?function(l,u){return og(l,"toString",{configurable:!0,enumerable:!1,value:bC(u),writable:!0})}:go;function zH(l){return wg(_d(l))}function ns(l,u,m){var M=-1,E=l.length;u<0&&(u=-u>E?0:E+u),m=m>E?E:m,m<0&&(m+=E),E=u>m?0:m-u>>>0,u>>>=0;for(var N=le(E);++M<E;)N[M]=l[M+u];return N}function HH(l,u){var m;return Vl(l,function(M,E,N){return m=u(M,E,N),!m}),!!m}function mg(l,u,m){var M=0,E=l==null?M:l.length;if(typeof u=="number"&&u===u&&E<=Qe){for(;M<E;){var N=M+E>>>1,B=l[N];B!==null&&!Ro(B)&&(m?B<=u:B<u)?M=N+1:E=N}return E}return Xb(l,u,go,m)}function Xb(l,u,m,M){var E=0,N=l==null?0:l.length;if(N===0)return 0;u=m(u);for(var B=u!==u,G=u===null,Q=Ro(u),ye=u===n;E<N;){var xe=ag((E+N)/2),Pe=m(l[xe]),je=Pe!==n,pt=Pe===null,Dt=Pe===Pe,pn=Ro(Pe);if(B)var Ot=M||Dt;else ye?Ot=Dt&&(M||je):G?Ot=Dt&&je&&(M||!pt):Q?Ot=Dt&&je&&!pt&&(M||!pn):pt||pn?Ot=!1:Ot=M?Pe<=u:Pe<u;Ot?E=xe+1:N=xe}return Ir(N,$e)}function yO(l,u){for(var m=-1,M=l.length,E=0,N=[];++m<M;){var B=l[m],G=u?u(B):B;if(!m||!Fs(G,Q)){var Q=G;N[E++]=B===0?0:B}}return N}function xO(l){return typeof l=="number"?l:Ro(l)?ce:+l}function Io(l){if(typeof l=="string")return l;if(Qt(l))return Ti(l,Io)+"";if(Ro(l))return JD?JD.call(l):"";var u=l+"";return u=="0"&&1/l==-pe?"-0":u}function Bl(l,u,m){var M=-1,E=Ym,N=l.length,B=!0,G=[],Q=G;if(m)B=!1,E=wb;else if(N>=e){var ye=u?null:QH(l);if(ye)return Zm(ye);B=!1,E=Ph,Q=new Wc}else Q=u?[]:G;e:for(;++M<N;){var xe=l[M],Pe=u?u(xe):xe;if(xe=m||xe!==0?xe:0,B&&Pe===Pe){for(var je=Q.length;je--;)if(Q[je]===Pe)continue e;u&&Q.push(Pe),G.push(xe)}else E(Q,Pe,m)||(Q!==G&&Q.push(Pe),G.push(xe))}return G}function Zb(l,u){return u=zl(u,l),l=YO(l,u),l==null||delete l[ca(is(u))]}function bO(l,u,m,M){return Uh(l,u,m(Gc(l,u)),M)}function gg(l,u,m,M){for(var E=l.length,N=M?E:-1;(M?N--:++N<E)&&u(l[N],N,l););return m?ns(l,M?0:N,M?N+1:E):ns(l,M?N+1:0,M?E:N)}function CO(l,u){var m=l;return m instanceof In&&(m=m.value()),Eb(u,function(M,E){return E.func.apply(E.thisArg,Fl([M],E.args))},m)}function Kb(l,u,m){var M=l.length;if(M<2)return M?Bl(l[0]):[];for(var E=-1,N=le(M);++E<M;)for(var B=l[E],G=-1;++G<M;)G!=E&&(N[E]=Fh(N[E]||B,l[G],u,m));return Bl(Sr(N,1),u,m)}function MO(l,u,m){for(var M=-1,E=l.length,N=u.length,B={};++M<E;){var G=M<N?u[M]:n;m(B,l[M],G)}return B}function Jb(l){return ji(l)?l:[]}function Qb(l){return typeof l=="function"?l:go}function zl(l,u){return Qt(l)?l:lC(l,u)?[l]:JO(Xn(l))}var WH=vn;function Hl(l,u,m){var M=l.length;return m=m===n?M:m,!u&&m>=M?l:ns(l,u,m)}var wO=O4||function(l){return vr.clearTimeout(l)};function EO(l,u){if(u)return l.slice();var m=l.length,M=$D?$D(m):new l.constructor(m);return l.copy(M),M}function eC(l){var u=new l.constructor(l.byteLength);return new ng(u).set(new ng(l)),u}function jH(l,u){var m=u?eC(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.byteLength)}function GH(l){var u=new l.constructor(l.source,Th.exec(l));return u.lastIndex=l.lastIndex,u}function $H(l){return Rh?li(Rh.call(l)):{}}function SO(l,u){var m=u?eC(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.length)}function TO(l,u){if(l!==u){var m=l!==n,M=l===null,E=l===l,N=Ro(l),B=u!==n,G=u===null,Q=u===u,ye=Ro(u);if(!G&&!ye&&!N&&l>u||N&&B&&Q&&!G&&!ye||M&&B&&Q||!m&&Q||!E)return 1;if(!M&&!N&&!ye&&l<u||ye&&m&&E&&!M&&!N||G&&m&&E||!B&&E||!Q)return-1}return 0}function qH(l,u,m){for(var M=-1,E=l.criteria,N=u.criteria,B=E.length,G=m.length;++M<B;){var Q=TO(E[M],N[M]);if(Q){if(M>=G)return Q;var ye=m[M];return Q*(ye=="desc"?-1:1)}}return l.index-u.index}function PO(l,u,m,M){for(var E=-1,N=l.length,B=m.length,G=-1,Q=u.length,ye=lr(N-B,0),xe=le(Q+ye),Pe=!M;++G<Q;)xe[G]=u[G];for(;++E<B;)(Pe||E<N)&&(xe[m[E]]=l[E]);for(;ye--;)xe[G++]=l[E++];return xe}function DO(l,u,m,M){for(var E=-1,N=l.length,B=-1,G=m.length,Q=-1,ye=u.length,xe=lr(N-G,0),Pe=le(xe+ye),je=!M;++E<xe;)Pe[E]=l[E];for(var pt=E;++Q<ye;)Pe[pt+Q]=u[Q];for(;++B<G;)(je||E<N)&&(Pe[pt+m[B]]=l[E++]);return Pe}function ho(l,u){var m=-1,M=l.length;for(u||(u=le(M));++m<M;)u[m]=l[m];return u}function la(l,u,m,M){var E=!m;m||(m={});for(var N=-1,B=u.length;++N<B;){var G=u[N],Q=M?M(m[G],l[G],G,m,l):n;Q===n&&(Q=l[G]),E?za(m,G,Q):Nh(m,G,Q)}return m}function YH(l,u){return la(l,aC(l),u)}function XH(l,u){return la(l,HO(l),u)}function vg(l,u){return function(m,M){var E=Qt(m)?e4:vH,N=u?u():{};return E(m,l,Pt(M,2),N)}}function pd(l){return vn(function(u,m){var M=-1,E=m.length,N=E>1?m[E-1]:n,B=E>2?m[2]:n;for(N=l.length>3&&typeof N=="function"?(E--,N):n,B&&Kr(m[0],m[1],B)&&(N=E<3?n:N,E=1),u=li(u);++M<E;){var G=m[M];G&&l(u,G,M,N)}return u})}function OO(l,u){return function(m,M){if(m==null)return m;if(!po(m))return l(m,M);for(var E=m.length,N=u?E:-1,B=li(m);(u?N--:++N<E)&&M(B[N],N,B)!==!1;);return m}}function AO(l){return function(u,m,M){for(var E=-1,N=li(u),B=M(u),G=B.length;G--;){var Q=B[l?G:++E];if(m(N[Q],Q,N)===!1)break}return u}}function ZH(l,u,m){var M=u&C,E=Vh(l);function N(){var B=this&&this!==vr&&this instanceof N?E:l;return B.apply(M?m:this,arguments)}return N}function IO(l){return function(u){u=Xn(u);var m=ld(u)?Rs(u):n,M=m?m[0]:u.charAt(0),E=m?Hl(m,1).join(""):u.slice(1);return M[l]()+E}}function md(l){return function(u){return Eb(OA(DA(u).replace(Bz,"")),l,"")}}function Vh(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var m=hd(l.prototype),M=l.apply(m,u);return Ni(M)?M:m}}function KH(l,u,m){var M=Vh(l);function E(){for(var N=arguments.length,B=le(N),G=N,Q=gd(E);G--;)B[G]=arguments[G];var ye=N<3&&B[0]!==Q&&B[N-1]!==Q?[]:kl(B,Q);if(N-=ye.length,N<m)return LO(l,u,_g,E.placeholder,n,B,ye,n,n,m-N);var xe=this&&this!==vr&&this instanceof E?M:l;return Oo(xe,this,B)}return E}function RO(l){return function(u,m,M){var E=li(u);if(!po(u)){var N=Pt(m,3);u=_r(u),m=function(G){return N(E[G],G,E)}}var B=l(u,m,M);return B>-1?E[N?u[B]:B]:n}}function NO(l){return Wa(function(u){var m=u.length,M=m,E=es.prototype.thru;for(l&&u.reverse();M--;){var N=u[M];if(typeof N!="function")throw new Qo(r);if(E&&!B&&Cg(N)=="wrapper")var B=new es([],!0)}for(M=B?M:m;++M<m;){N=u[M];var G=Cg(N),Q=G=="wrapper"?oC(N):n;Q&&cC(Q[0])&&Q[1]==(W|x|S|V)&&!Q[4].length&&Q[9]==1?B=B[Cg(Q[0])].apply(B,Q[3]):B=N.length==1&&cC(N)?B[G]():B.thru(N)}return function(){var ye=arguments,xe=ye[0];if(B&&ye.length==1&&Qt(xe))return B.plant(xe).value();for(var Pe=0,je=m?u[Pe].apply(this,ye):xe;++Pe<m;)je=u[Pe].call(this,je);return je}})}function _g(l,u,m,M,E,N,B,G,Q,ye){var xe=u&W,Pe=u&C,je=u&w,pt=u&(x|D),Dt=u&H,pn=je?n:Vh(l);function Ot(){for(var wn=arguments.length,Nn=le(wn),No=wn;No--;)Nn[No]=arguments[No];if(pt)var Jr=gd(Ot),Fo=c4(Nn,Jr);if(M&&(Nn=PO(Nn,M,E,pt)),N&&(Nn=DO(Nn,N,B,pt)),wn-=Fo,pt&&wn<ye){var Gi=kl(Nn,Jr);return LO(l,u,_g,Ot.placeholder,m,Nn,Gi,G,Q,ye-wn)}var ks=Pe?m:this,qa=je?ks[l]:l;return wn=Nn.length,G?Nn=v5(Nn,G):Dt&&wn>1&&Nn.reverse(),xe&&Q<wn&&(Nn.length=Q),this&&this!==vr&&this instanceof Ot&&(qa=pn||Vh(qa)),qa.apply(ks,Nn)}return Ot}function FO(l,u){return function(m,M){return EH(m,l,u(M),{})}}function yg(l,u){return function(m,M){var E;if(m===n&&M===n)return u;if(m!==n&&(E=m),M!==n){if(E===n)return M;typeof m=="string"||typeof M=="string"?(m=Io(m),M=Io(M)):(m=xO(m),M=xO(M)),E=l(m,M)}return E}}function tC(l){return Wa(function(u){return u=Ti(u,Ao(Pt())),vn(function(m){var M=this;return l(u,function(E){return Oo(E,M,m)})})})}function xg(l,u){u=u===n?" ":Io(u);var m=u.length;if(m<2)return m?Yb(u,l):u;var M=Yb(u,sg(l/cd(u)));return ld(u)?Hl(Rs(M),0,l).join(""):M.slice(0,l)}function JH(l,u,m,M){var E=u&C,N=Vh(l);function B(){for(var G=-1,Q=arguments.length,ye=-1,xe=M.length,Pe=le(xe+Q),je=this&&this!==vr&&this instanceof B?N:l;++ye<xe;)Pe[ye]=M[ye];for(;Q--;)Pe[ye++]=arguments[++G];return Oo(je,E?m:this,Pe)}return B}function kO(l){return function(u,m,M){return M&&typeof M!="number"&&Kr(u,m,M)&&(m=M=n),u=$a(u),m===n?(m=u,u=0):m=$a(m),M=M===n?u<m?1:-1:$a(M),LH(u,m,M,l)}}function bg(l){return function(u,m){return typeof u=="string"&&typeof m=="string"||(u=rs(u),m=rs(m)),l(u,m)}}function LO(l,u,m,M,E,N,B,G,Q,ye){var xe=u&x,Pe=xe?B:n,je=xe?n:B,pt=xe?N:n,Dt=xe?n:N;u|=xe?S:P,u&=~(xe?P:S),u&b||(u&=~(C|w));var pn=[l,u,E,pt,Pe,Dt,je,G,Q,ye],Ot=m.apply(n,pn);return cC(l)&&XO(Ot,pn),Ot.placeholder=M,ZO(Ot,l,u)}function nC(l){var u=ar[l];return function(m,M){if(m=rs(m),M=M==null?0:Ir(cn(M),292),M&&ZD(m)){var E=(Xn(m)+"e").split("e"),N=u(E[0]+"e"+(+E[1]+M));return E=(Xn(N)+"e").split("e"),+(E[0]+"e"+(+E[1]-M))}return u(m)}}var QH=dd&&1/Zm(new dd([,-0]))[1]==pe?function(l){return new dd(l)}:wC;function UO(l){return function(u){var m=Rr(u);return m==$t?Ib(u):m==Cn?g4(u):l4(u,l(u))}}function Ha(l,u,m,M,E,N,B,G){var Q=u&w;if(!Q&&typeof l!="function")throw new Qo(r);var ye=M?M.length:0;if(ye||(u&=~(S|P),M=E=n),B=B===n?B:lr(cn(B),0),G=G===n?G:cn(G),ye-=E?E.length:0,u&P){var xe=M,Pe=E;M=E=n}var je=Q?n:oC(l),pt=[l,u,m,M,E,xe,Pe,N,B,G];if(je&&p5(pt,je),l=pt[0],u=pt[1],m=pt[2],M=pt[3],E=pt[4],G=pt[9]=pt[9]===n?Q?0:l.length:lr(pt[9]-ye,0),!G&&u&(x|D)&&(u&=~(x|D)),!u||u==C)var Dt=ZH(l,u,m);else u==x||u==D?Dt=KH(l,u,G):(u==S||u==(C|S))&&!E.length?Dt=JH(l,u,m,M):Dt=_g.apply(n,pt);var pn=je?_O:XO;return ZO(pn(Dt,pt),l,u)}function VO(l,u,m,M){return l===n||Fs(l,ud[m])&&!Kn.call(M,m)?u:l}function BO(l,u,m,M,E,N){return Ni(l)&&Ni(u)&&(N.set(u,l),pg(l,u,n,BO,N),N.delete(u)),l}function e5(l){return Hh(l)?n:l}function zO(l,u,m,M,E,N){var B=m&v,G=l.length,Q=u.length;if(G!=Q&&!(B&&Q>G))return!1;var ye=N.get(l),xe=N.get(u);if(ye&&xe)return ye==u&&xe==l;var Pe=-1,je=!0,pt=m&_?new Wc:n;for(N.set(l,u),N.set(u,l);++Pe<G;){var Dt=l[Pe],pn=u[Pe];if(M)var Ot=B?M(pn,Dt,Pe,u,l,N):M(Dt,pn,Pe,l,u,N);if(Ot!==n){if(Ot)continue;je=!1;break}if(pt){if(!Sb(u,function(wn,Nn){if(!Ph(pt,Nn)&&(Dt===wn||E(Dt,wn,m,M,N)))return pt.push(Nn)})){je=!1;break}}else if(!(Dt===pn||E(Dt,pn,m,M,N))){je=!1;break}}return N.delete(l),N.delete(u),je}function t5(l,u,m,M,E,N,B){switch(m){case _e:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Se:return!(l.byteLength!=u.byteLength||!N(new ng(l),new ng(u)));case rt:case ze:case si:return Fs(+l,+u);case Vt:return l.name==u.name&&l.message==u.message;case xt:case _t:return l==u+"";case $t:var G=Ib;case Cn:var Q=M&v;if(G||(G=Zm),l.size!=u.size&&!Q)return!1;var ye=B.get(l);if(ye)return ye==u;M|=_,B.set(l,u);var xe=zO(G(l),G(u),M,E,N,B);return B.delete(l),xe;case L:if(Rh)return Rh.call(l)==Rh.call(u)}return!1}function n5(l,u,m,M,E,N){var B=m&v,G=iC(l),Q=G.length,ye=iC(u),xe=ye.length;if(Q!=xe&&!B)return!1;for(var Pe=Q;Pe--;){var je=G[Pe];if(!(B?je in u:Kn.call(u,je)))return!1}var pt=N.get(l),Dt=N.get(u);if(pt&&Dt)return pt==u&&Dt==l;var pn=!0;N.set(l,u),N.set(u,l);for(var Ot=B;++Pe<Q;){je=G[Pe];var wn=l[je],Nn=u[je];if(M)var No=B?M(Nn,wn,je,u,l,N):M(wn,Nn,je,l,u,N);if(!(No===n?wn===Nn||E(wn,Nn,m,M,N):No)){pn=!1;break}Ot||(Ot=je=="constructor")}if(pn&&!Ot){var Jr=l.constructor,Fo=u.constructor;Jr!=Fo&&"constructor"in l&&"constructor"in u&&!(typeof Jr=="function"&&Jr instanceof Jr&&typeof Fo=="function"&&Fo instanceof Fo)&&(pn=!1)}return N.delete(l),N.delete(u),pn}function Wa(l){return dC(qO(l,n,nA),l+"")}function iC(l){return aO(l,_r,aC)}function rC(l){return aO(l,mo,HO)}var oC=lg?function(l){return lg.get(l)}:wC;function Cg(l){for(var u=l.name+"",m=fd[u],M=Kn.call(fd,u)?m.length:0;M--;){var E=m[M],N=E.func;if(N==null||N==l)return E.name}return u}function gd(l){var u=Kn.call(A,"placeholder")?A:l;return u.placeholder}function Pt(){var l=A.iteratee||CC;return l=l===CC?uO:l,arguments.length?l(arguments[0],arguments[1]):l}function Mg(l,u){var m=l.__data__;return u5(u)?m[typeof u=="string"?"string":"hash"]:m.map}function sC(l){for(var u=_r(l),m=u.length;m--;){var M=u[m],E=l[M];u[m]=[M,E,GO(E)]}return u}function $c(l,u){var m=h4(l,u);return cO(m)?m:n}function i5(l){var u=Kn.call(l,zc),m=l[zc];try{l[zc]=n;var M=!0}catch{}var E=eg.call(l);return M&&(u?l[zc]=m:delete l[zc]),E}var aC=Nb?function(l){return l==null?[]:(l=li(l),Nl(Nb(l),function(u){return YD.call(l,u)}))}:EC,HO=Nb?function(l){for(var u=[];l;)Fl(u,aC(l)),l=ig(l);return u}:EC,Rr=Zr;(Fb&&Rr(new Fb(new ArrayBuffer(1)))!=_e||Oh&&Rr(new Oh)!=$t||kb&&Rr(kb.resolve())!=bn||dd&&Rr(new dd)!=Cn||Ah&&Rr(new Ah)!=re)&&(Rr=function(l){var u=Zr(l),m=u==Li?l.constructor:n,M=m?qc(m):"";if(M)switch(M){case V4:return _e;case B4:return $t;case z4:return bn;case H4:return Cn;case W4:return re}return u});function r5(l,u,m){for(var M=-1,E=m.length;++M<E;){var N=m[M],B=N.size;switch(N.type){case"drop":l+=B;break;case"dropRight":u-=B;break;case"take":u=Ir(u,l+B);break;case"takeRight":l=lr(l,u-B);break}}return{start:l,end:u}}function o5(l){var u=l.match(Sh);return u?u[1].split(jm):[]}function WO(l,u,m){u=zl(u,l);for(var M=-1,E=u.length,N=!1;++M<E;){var B=ca(u[M]);if(!(N=l!=null&&m(l,B)))break;l=l[B]}return N||++M!=E?N:(E=l==null?0:l.length,!!E&&Og(E)&&ja(B,E)&&(Qt(l)||Yc(l)))}function s5(l){var u=l.length,m=new l.constructor(u);return u&&typeof l[0]=="string"&&Kn.call(l,"index")&&(m.index=l.index,m.input=l.input),m}function jO(l){return typeof l.constructor=="function"&&!Bh(l)?hd(ig(l)):{}}function a5(l,u,m){var M=l.constructor;switch(u){case Se:return eC(l);case rt:case ze:return new M(+l);case _e:return jH(l,m);case dt:case He:case Je:case Mn:case Re:case et:case wt:case Ft:case tt:return SO(l,m);case $t:return new M;case si:case _t:return new M(l);case xt:return GH(l);case Cn:return new M;case L:return $H(l)}}function l5(l,u){var m=u.length;if(!m)return l;var M=m-1;return u[M]=(m>1?"& ":"")+u[M],u=u.join(m>2?", ":" "),l.replace(La,`{
/* [wrapped with `+u+`] */
`)}function c5(l){return Qt(l)||Yc(l)||!!(XD&&l&&l[XD])}function ja(l,u){var m=typeof l;return u=u??fe,!!u&&(m=="number"||m!="symbol"&&R.test(l))&&l>-1&&l%1==0&&l<u}function Kr(l,u,m){if(!Ni(m))return!1;var M=typeof u;return(M=="number"?po(m)&&ja(u,m.length):M=="string"&&u in m)?Fs(m[u],l):!1}function lC(l,u){if(Qt(l))return!1;var m=typeof l;return m=="number"||m=="symbol"||m=="boolean"||l==null||Ro(l)?!0:gr.test(l)||!Si.test(l)||u!=null&&l in li(u)}function u5(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function cC(l){var u=Cg(l),m=A[u];if(typeof m!="function"||!(u in In.prototype))return!1;if(l===m)return!0;var M=oC(m);return!!M&&l===M[0]}function d5(l){return!!GD&&GD in l}var f5=Jm?Ga:SC;function Bh(l){var u=l&&l.constructor,m=typeof u=="function"&&u.prototype||ud;return l===m}function GO(l){return l===l&&!Ni(l)}function $O(l,u){return function(m){return m==null?!1:m[l]===u&&(u!==n||l in li(m))}}function h5(l){var u=Pg(l,function(M){return m.size===a&&m.clear(),M}),m=u.cache;return u}function p5(l,u){var m=l[1],M=u[1],E=m|M,N=E<(C|w|W),B=M==W&&m==x||M==W&&m==V&&l[7].length<=u[8]||M==(W|V)&&u[7].length<=u[8]&&m==x;if(!(N||B))return l;M&C&&(l[2]=u[2],E|=m&C?0:b);var G=u[3];if(G){var Q=l[3];l[3]=Q?PO(Q,G,u[4]):G,l[4]=Q?kl(l[3],c):u[4]}return G=u[5],G&&(Q=l[5],l[5]=Q?DO(Q,G,u[6]):G,l[6]=Q?kl(l[5],c):u[6]),G=u[7],G&&(l[7]=G),M&W&&(l[8]=l[8]==null?u[8]:Ir(l[8],u[8])),l[9]==null&&(l[9]=u[9]),l[0]=u[0],l[1]=E,l}function m5(l){var u=[];if(l!=null)for(var m in li(l))u.push(m);return u}function g5(l){return eg.call(l)}function qO(l,u,m){return u=lr(u===n?l.length-1:u,0),function(){for(var M=arguments,E=-1,N=lr(M.length-u,0),B=le(N);++E<N;)B[E]=M[u+E];E=-1;for(var G=le(u+1);++E<u;)G[E]=M[E];return G[u]=m(B),Oo(l,this,G)}}function YO(l,u){return u.length<2?l:Gc(l,ns(u,0,-1))}function v5(l,u){for(var m=l.length,M=Ir(u.length,m),E=ho(l);M--;){var N=u[M];l[M]=ja(N,m)?E[N]:n}return l}function uC(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}var XO=KO(_O),zh=I4||function(l,u){return vr.setTimeout(l,u)},dC=KO(BH);function ZO(l,u,m){var M=u+"";return dC(l,l5(M,_5(o5(M),m)))}function KO(l){var u=0,m=0;return function(){var M=k4(),E=U-(M-m);if(m=M,E>0){if(++u>=I)return arguments[0]}else u=0;return l.apply(n,arguments)}}function wg(l,u){var m=-1,M=l.length,E=M-1;for(u=u===n?M:u;++m<u;){var N=qb(m,E),B=l[N];l[N]=l[m],l[m]=B}return l.length=u,l}var JO=h5(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(jn,function(m,M,E,N){u.push(E?N.replace($m,"$1"):M||m)}),u});function ca(l){if(typeof l=="string"||Ro(l))return l;var u=l+"";return u=="0"&&1/l==-pe?"-0":u}function qc(l){if(l!=null){try{return Qm.call(l)}catch{}try{return l+""}catch{}}return""}function _5(l,u){return Jo(Jt,function(m){var M="_."+m[0];u&m[1]&&!Ym(l,M)&&l.push(M)}),l.sort()}function QO(l){if(l instanceof In)return l.clone();var u=new es(l.__wrapped__,l.__chain__);return u.__actions__=ho(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}function y5(l,u,m){(m?Kr(l,u,m):u===n)?u=1:u=lr(cn(u),0);var M=l==null?0:l.length;if(!M||u<1)return[];for(var E=0,N=0,B=le(sg(M/u));E<M;)B[N++]=ns(l,E,E+=u);return B}function x5(l){for(var u=-1,m=l==null?0:l.length,M=0,E=[];++u<m;){var N=l[u];N&&(E[M++]=N)}return E}function b5(){var l=arguments.length;if(!l)return[];for(var u=le(l-1),m=arguments[0],M=l;M--;)u[M-1]=arguments[M];return Fl(Qt(m)?ho(m):[m],Sr(u,1))}var C5=vn(function(l,u){return ji(l)?Fh(l,Sr(u,1,ji,!0)):[]}),M5=vn(function(l,u){var m=is(u);return ji(m)&&(m=n),ji(l)?Fh(l,Sr(u,1,ji,!0),Pt(m,2)):[]}),w5=vn(function(l,u){var m=is(u);return ji(m)&&(m=n),ji(l)?Fh(l,Sr(u,1,ji,!0),n,m):[]});function E5(l,u,m){var M=l==null?0:l.length;return M?(u=m||u===n?1:cn(u),ns(l,u<0?0:u,M)):[]}function S5(l,u,m){var M=l==null?0:l.length;return M?(u=m||u===n?1:cn(u),u=M-u,ns(l,0,u<0?0:u)):[]}function T5(l,u){return l&&l.length?gg(l,Pt(u,3),!0,!0):[]}function P5(l,u){return l&&l.length?gg(l,Pt(u,3),!0):[]}function D5(l,u,m,M){var E=l==null?0:l.length;return E?(m&&typeof m!="number"&&Kr(l,u,m)&&(m=0,M=E),bH(l,u,m,M)):[]}function eA(l,u,m){var M=l==null?0:l.length;if(!M)return-1;var E=m==null?0:cn(m);return E<0&&(E=lr(M+E,0)),Xm(l,Pt(u,3),E)}function tA(l,u,m){var M=l==null?0:l.length;if(!M)return-1;var E=M-1;return m!==n&&(E=cn(m),E=m<0?lr(M+E,0):Ir(E,M-1)),Xm(l,Pt(u,3),E,!0)}function nA(l){var u=l==null?0:l.length;return u?Sr(l,1):[]}function O5(l){var u=l==null?0:l.length;return u?Sr(l,pe):[]}function A5(l,u){var m=l==null?0:l.length;return m?(u=u===n?1:cn(u),Sr(l,u)):[]}function I5(l){for(var u=-1,m=l==null?0:l.length,M={};++u<m;){var E=l[u];M[E[0]]=E[1]}return M}function iA(l){return l&&l.length?l[0]:n}function R5(l,u,m){var M=l==null?0:l.length;if(!M)return-1;var E=m==null?0:cn(m);return E<0&&(E=lr(M+E,0)),ad(l,u,E)}function N5(l){var u=l==null?0:l.length;return u?ns(l,0,-1):[]}var F5=vn(function(l){var u=Ti(l,Jb);return u.length&&u[0]===l[0]?Hb(u):[]}),k5=vn(function(l){var u=is(l),m=Ti(l,Jb);return u===is(m)?u=n:m.pop(),m.length&&m[0]===l[0]?Hb(m,Pt(u,2)):[]}),L5=vn(function(l){var u=is(l),m=Ti(l,Jb);return u=typeof u=="function"?u:n,u&&m.pop(),m.length&&m[0]===l[0]?Hb(m,n,u):[]});function U5(l,u){return l==null?"":N4.call(l,u)}function is(l){var u=l==null?0:l.length;return u?l[u-1]:n}function V5(l,u,m){var M=l==null?0:l.length;if(!M)return-1;var E=M;return m!==n&&(E=cn(m),E=E<0?lr(M+E,0):Ir(E,M-1)),u===u?_4(l,u,E):Xm(l,LD,E,!0)}function B5(l,u){return l&&l.length?pO(l,cn(u)):n}var z5=vn(rA);function rA(l,u){return l&&l.length&&u&&u.length?$b(l,u):l}function H5(l,u,m){return l&&l.length&&u&&u.length?$b(l,u,Pt(m,2)):l}function W5(l,u,m){return l&&l.length&&u&&u.length?$b(l,u,n,m):l}var j5=Wa(function(l,u){var m=l==null?0:l.length,M=Ub(l,u);return vO(l,Ti(u,function(E){return ja(E,m)?+E:E}).sort(TO)),M});function G5(l,u){var m=[];if(!(l&&l.length))return m;var M=-1,E=[],N=l.length;for(u=Pt(u,3);++M<N;){var B=l[M];u(B,M,l)&&(m.push(B),E.push(M))}return vO(l,E),m}function fC(l){return l==null?l:U4.call(l)}function $5(l,u,m){var M=l==null?0:l.length;return M?(m&&typeof m!="number"&&Kr(l,u,m)?(u=0,m=M):(u=u==null?0:cn(u),m=m===n?M:cn(m)),ns(l,u,m)):[]}function q5(l,u){return mg(l,u)}function Y5(l,u,m){return Xb(l,u,Pt(m,2))}function X5(l,u){var m=l==null?0:l.length;if(m){var M=mg(l,u);if(M<m&&Fs(l[M],u))return M}return-1}function Z5(l,u){return mg(l,u,!0)}function K5(l,u,m){return Xb(l,u,Pt(m,2),!0)}function J5(l,u){var m=l==null?0:l.length;if(m){var M=mg(l,u,!0)-1;if(Fs(l[M],u))return M}return-1}function Q5(l){return l&&l.length?yO(l):[]}function e8(l,u){return l&&l.length?yO(l,Pt(u,2)):[]}function t8(l){var u=l==null?0:l.length;return u?ns(l,1,u):[]}function n8(l,u,m){return l&&l.length?(u=m||u===n?1:cn(u),ns(l,0,u<0?0:u)):[]}function i8(l,u,m){var M=l==null?0:l.length;return M?(u=m||u===n?1:cn(u),u=M-u,ns(l,u<0?0:u,M)):[]}function r8(l,u){return l&&l.length?gg(l,Pt(u,3),!1,!0):[]}function o8(l,u){return l&&l.length?gg(l,Pt(u,3)):[]}var s8=vn(function(l){return Bl(Sr(l,1,ji,!0))}),a8=vn(function(l){var u=is(l);return ji(u)&&(u=n),Bl(Sr(l,1,ji,!0),Pt(u,2))}),l8=vn(function(l){var u=is(l);return u=typeof u=="function"?u:n,Bl(Sr(l,1,ji,!0),n,u)});function c8(l){return l&&l.length?Bl(l):[]}function u8(l,u){return l&&l.length?Bl(l,Pt(u,2)):[]}function d8(l,u){return u=typeof u=="function"?u:n,l&&l.length?Bl(l,n,u):[]}function hC(l){if(!(l&&l.length))return[];var u=0;return l=Nl(l,function(m){if(ji(m))return u=lr(m.length,u),!0}),Ob(u,function(m){return Ti(l,Tb(m))})}function oA(l,u){if(!(l&&l.length))return[];var m=hC(l);return u==null?m:Ti(m,function(M){return Oo(u,n,M)})}var f8=vn(function(l,u){return ji(l)?Fh(l,u):[]}),h8=vn(function(l){return Kb(Nl(l,ji))}),p8=vn(function(l){var u=is(l);return ji(u)&&(u=n),Kb(Nl(l,ji),Pt(u,2))}),m8=vn(function(l){var u=is(l);return u=typeof u=="function"?u:n,Kb(Nl(l,ji),n,u)}),g8=vn(hC);function v8(l,u){return MO(l||[],u||[],Nh)}function _8(l,u){return MO(l||[],u||[],Uh)}var y8=vn(function(l){var u=l.length,m=u>1?l[u-1]:n;return m=typeof m=="function"?(l.pop(),m):n,oA(l,m)});function sA(l){var u=A(l);return u.__chain__=!0,u}function x8(l,u){return u(l),l}function Eg(l,u){return u(l)}var b8=Wa(function(l){var u=l.length,m=u?l[0]:0,M=this.__wrapped__,E=function(N){return Ub(N,l)};return u>1||this.__actions__.length||!(M instanceof In)||!ja(m)?this.thru(E):(M=M.slice(m,+m+(u?1:0)),M.__actions__.push({func:Eg,args:[E],thisArg:n}),new es(M,this.__chain__).thru(function(N){return u&&!N.length&&N.push(n),N}))});function C8(){return sA(this)}function M8(){return new es(this.value(),this.__chain__)}function w8(){this.__values__===n&&(this.__values__=xA(this.value()));var l=this.__index__>=this.__values__.length,u=l?n:this.__values__[this.__index__++];return{done:l,value:u}}function E8(){return this}function S8(l){for(var u,m=this;m instanceof ug;){var M=QO(m);M.__index__=0,M.__values__=n,u?E.__wrapped__=M:u=M;var E=M;m=m.__wrapped__}return E.__wrapped__=l,u}function T8(){var l=this.__wrapped__;if(l instanceof In){var u=l;return this.__actions__.length&&(u=new In(this)),u=u.reverse(),u.__actions__.push({func:Eg,args:[fC],thisArg:n}),new es(u,this.__chain__)}return this.thru(fC)}function P8(){return CO(this.__wrapped__,this.__actions__)}var D8=vg(function(l,u,m){Kn.call(l,m)?++l[m]:za(l,m,1)});function O8(l,u,m){var M=Qt(l)?FD:xH;return m&&Kr(l,u,m)&&(u=n),M(l,Pt(u,3))}function A8(l,u){var m=Qt(l)?Nl:oO;return m(l,Pt(u,3))}var I8=RO(eA),R8=RO(tA);function N8(l,u){return Sr(Sg(l,u),1)}function F8(l,u){return Sr(Sg(l,u),pe)}function k8(l,u,m){return m=m===n?1:cn(m),Sr(Sg(l,u),m)}function aA(l,u){var m=Qt(l)?Jo:Vl;return m(l,Pt(u,3))}function lA(l,u){var m=Qt(l)?t4:rO;return m(l,Pt(u,3))}var L8=vg(function(l,u,m){Kn.call(l,m)?l[m].push(u):za(l,m,[u])});function U8(l,u,m,M){l=po(l)?l:_d(l),m=m&&!M?cn(m):0;var E=l.length;return m<0&&(m=lr(E+m,0)),Ag(l)?m<=E&&l.indexOf(u,m)>-1:!!E&&ad(l,u,m)>-1}var V8=vn(function(l,u,m){var M=-1,E=typeof u=="function",N=po(l)?le(l.length):[];return Vl(l,function(B){N[++M]=E?Oo(u,B,m):kh(B,u,m)}),N}),B8=vg(function(l,u,m){za(l,m,u)});function Sg(l,u){var m=Qt(l)?Ti:dO;return m(l,Pt(u,3))}function z8(l,u,m,M){return l==null?[]:(Qt(u)||(u=u==null?[]:[u]),m=M?n:m,Qt(m)||(m=m==null?[]:[m]),mO(l,u,m))}var H8=vg(function(l,u,m){l[m?0:1].push(u)},function(){return[[],[]]});function W8(l,u,m){var M=Qt(l)?Eb:VD,E=arguments.length<3;return M(l,Pt(u,4),m,E,Vl)}function j8(l,u,m){var M=Qt(l)?n4:VD,E=arguments.length<3;return M(l,Pt(u,4),m,E,rO)}function G8(l,u){var m=Qt(l)?Nl:oO;return m(l,Dg(Pt(u,3)))}function $8(l){var u=Qt(l)?eO:UH;return u(l)}function q8(l,u,m){(m?Kr(l,u,m):u===n)?u=1:u=cn(u);var M=Qt(l)?mH:VH;return M(l,u)}function Y8(l){var u=Qt(l)?gH:zH;return u(l)}function X8(l){if(l==null)return 0;if(po(l))return Ag(l)?cd(l):l.length;var u=Rr(l);return u==$t||u==Cn?l.size:jb(l).length}function Z8(l,u,m){var M=Qt(l)?Sb:HH;return m&&Kr(l,u,m)&&(u=n),M(l,Pt(u,3))}var K8=vn(function(l,u){if(l==null)return[];var m=u.length;return m>1&&Kr(l,u[0],u[1])?u=[]:m>2&&Kr(u[0],u[1],u[2])&&(u=[u[0]]),mO(l,Sr(u,1),[])}),Tg=A4||function(){return vr.Date.now()};function J8(l,u){if(typeof u!="function")throw new Qo(r);return l=cn(l),function(){if(--l<1)return u.apply(this,arguments)}}function cA(l,u,m){return u=m?n:u,u=l&&u==null?l.length:u,Ha(l,W,n,n,n,n,u)}function uA(l,u){var m;if(typeof u!="function")throw new Qo(r);return l=cn(l),function(){return--l>0&&(m=u.apply(this,arguments)),l<=1&&(u=n),m}}var pC=vn(function(l,u,m){var M=C;if(m.length){var E=kl(m,gd(pC));M|=S}return Ha(l,M,u,m,E)}),dA=vn(function(l,u,m){var M=C|w;if(m.length){var E=kl(m,gd(dA));M|=S}return Ha(u,M,l,m,E)});function fA(l,u,m){u=m?n:u;var M=Ha(l,x,n,n,n,n,n,u);return M.placeholder=fA.placeholder,M}function hA(l,u,m){u=m?n:u;var M=Ha(l,D,n,n,n,n,n,u);return M.placeholder=hA.placeholder,M}function pA(l,u,m){var M,E,N,B,G,Q,ye=0,xe=!1,Pe=!1,je=!0;if(typeof l!="function")throw new Qo(r);u=rs(u)||0,Ni(m)&&(xe=!!m.leading,Pe="maxWait"in m,N=Pe?lr(rs(m.maxWait)||0,u):N,je="trailing"in m?!!m.trailing:je);function pt(Gi){var ks=M,qa=E;return M=E=n,ye=Gi,B=l.apply(qa,ks),B}function Dt(Gi){return ye=Gi,G=zh(wn,u),xe?pt(Gi):B}function pn(Gi){var ks=Gi-Q,qa=Gi-ye,RA=u-ks;return Pe?Ir(RA,N-qa):RA}function Ot(Gi){var ks=Gi-Q,qa=Gi-ye;return Q===n||ks>=u||ks<0||Pe&&qa>=N}function wn(){var Gi=Tg();if(Ot(Gi))return Nn(Gi);G=zh(wn,pn(Gi))}function Nn(Gi){return G=n,je&&M?pt(Gi):(M=E=n,B)}function No(){G!==n&&wO(G),ye=0,M=Q=E=G=n}function Jr(){return G===n?B:Nn(Tg())}function Fo(){var Gi=Tg(),ks=Ot(Gi);if(M=arguments,E=this,Q=Gi,ks){if(G===n)return Dt(Q);if(Pe)return wO(G),G=zh(wn,u),pt(Q)}return G===n&&(G=zh(wn,u)),B}return Fo.cancel=No,Fo.flush=Jr,Fo}var Q8=vn(function(l,u){return iO(l,1,u)}),eW=vn(function(l,u,m){return iO(l,rs(u)||0,m)});function tW(l){return Ha(l,H)}function Pg(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new Qo(r);var m=function(){var M=arguments,E=u?u.apply(this,M):M[0],N=m.cache;if(N.has(E))return N.get(E);var B=l.apply(this,M);return m.cache=N.set(E,B)||N,B};return m.cache=new(Pg.Cache||Ba),m}Pg.Cache=Ba;function Dg(l){if(typeof l!="function")throw new Qo(r);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}function nW(l){return uA(2,l)}var iW=WH(function(l,u){u=u.length==1&&Qt(u[0])?Ti(u[0],Ao(Pt())):Ti(Sr(u,1),Ao(Pt()));var m=u.length;return vn(function(M){for(var E=-1,N=Ir(M.length,m);++E<N;)M[E]=u[E].call(this,M[E]);return Oo(l,this,M)})}),mC=vn(function(l,u){var m=kl(u,gd(mC));return Ha(l,S,n,u,m)}),mA=vn(function(l,u){var m=kl(u,gd(mA));return Ha(l,P,n,u,m)}),rW=Wa(function(l,u){return Ha(l,V,n,n,n,u)});function oW(l,u){if(typeof l!="function")throw new Qo(r);return u=u===n?u:cn(u),vn(l,u)}function sW(l,u){if(typeof l!="function")throw new Qo(r);return u=u==null?0:lr(cn(u),0),vn(function(m){var M=m[u],E=Hl(m,0,u);return M&&Fl(E,M),Oo(l,this,E)})}function aW(l,u,m){var M=!0,E=!0;if(typeof l!="function")throw new Qo(r);return Ni(m)&&(M="leading"in m?!!m.leading:M,E="trailing"in m?!!m.trailing:E),pA(l,u,{leading:M,maxWait:u,trailing:E})}function lW(l){return cA(l,1)}function cW(l,u){return mC(Qb(u),l)}function uW(){if(!arguments.length)return[];var l=arguments[0];return Qt(l)?l:[l]}function dW(l){return ts(l,h)}function fW(l,u){return u=typeof u=="function"?u:n,ts(l,h,u)}function hW(l){return ts(l,d|h)}function pW(l,u){return u=typeof u=="function"?u:n,ts(l,d|h,u)}function mW(l,u){return u==null||nO(l,u,_r(u))}function Fs(l,u){return l===u||l!==l&&u!==u}var gW=bg(zb),vW=bg(function(l,u){return l>=u}),Yc=lO(function(){return arguments}())?lO:function(l){return Ui(l)&&Kn.call(l,"callee")&&!YD.call(l,"callee")},Qt=le.isArray,_W=DD?Ao(DD):SH;function po(l){return l!=null&&Og(l.length)&&!Ga(l)}function ji(l){return Ui(l)&&po(l)}function yW(l){return l===!0||l===!1||Ui(l)&&Zr(l)==rt}var Wl=R4||SC,xW=OD?Ao(OD):TH;function bW(l){return Ui(l)&&l.nodeType===1&&!Hh(l)}function CW(l){if(l==null)return!0;if(po(l)&&(Qt(l)||typeof l=="string"||typeof l.splice=="function"||Wl(l)||vd(l)||Yc(l)))return!l.length;var u=Rr(l);if(u==$t||u==Cn)return!l.size;if(Bh(l))return!jb(l).length;for(var m in l)if(Kn.call(l,m))return!1;return!0}function MW(l,u){return Lh(l,u)}function wW(l,u,m){m=typeof m=="function"?m:n;var M=m?m(l,u):n;return M===n?Lh(l,u,n,m):!!M}function gC(l){if(!Ui(l))return!1;var u=Zr(l);return u==Vt||u==Nt||typeof l.message=="string"&&typeof l.name=="string"&&!Hh(l)}function EW(l){return typeof l=="number"&&ZD(l)}function Ga(l){if(!Ni(l))return!1;var u=Zr(l);return u==nn||u==gi||u==Ne||u==On}function gA(l){return typeof l=="number"&&l==cn(l)}function Og(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=fe}function Ni(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}function Ui(l){return l!=null&&typeof l=="object"}var vA=AD?Ao(AD):DH;function SW(l,u){return l===u||Wb(l,u,sC(u))}function TW(l,u,m){return m=typeof m=="function"?m:n,Wb(l,u,sC(u),m)}function PW(l){return _A(l)&&l!=+l}function DW(l){if(f5(l))throw new Xt(i);return cO(l)}function OW(l){return l===null}function AW(l){return l==null}function _A(l){return typeof l=="number"||Ui(l)&&Zr(l)==si}function Hh(l){if(!Ui(l)||Zr(l)!=Li)return!1;var u=ig(l);if(u===null)return!0;var m=Kn.call(u,"constructor")&&u.constructor;return typeof m=="function"&&m instanceof m&&Qm.call(m)==T4}var vC=ID?Ao(ID):OH;function IW(l){return gA(l)&&l>=-fe&&l<=fe}var yA=RD?Ao(RD):AH;function Ag(l){return typeof l=="string"||!Qt(l)&&Ui(l)&&Zr(l)==_t}function Ro(l){return typeof l=="symbol"||Ui(l)&&Zr(l)==L}var vd=ND?Ao(ND):IH;function RW(l){return l===n}function NW(l){return Ui(l)&&Rr(l)==re}function FW(l){return Ui(l)&&Zr(l)==be}var kW=bg(Gb),LW=bg(function(l,u){return l<=u});function xA(l){if(!l)return[];if(po(l))return Ag(l)?Rs(l):ho(l);if(Dh&&l[Dh])return m4(l[Dh]());var u=Rr(l),m=u==$t?Ib:u==Cn?Zm:_d;return m(l)}function $a(l){if(!l)return l===0?l:0;if(l=rs(l),l===pe||l===-pe){var u=l<0?-1:1;return u*Te}return l===l?l:0}function cn(l){var u=$a(l),m=u%1;return u===u?m?u-m:u:0}function bA(l){return l?jc(cn(l),0,De):0}function rs(l){if(typeof l=="number")return l;if(Ro(l))return ce;if(Ni(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=Ni(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=BD(l);var m=_b.test(l);return m||xb.test(l)?Jz(l.slice(2),m?2:8):qm.test(l)?ce:+l}function CA(l){return la(l,mo(l))}function UW(l){return l?jc(cn(l),-fe,fe):l===0?l:0}function Xn(l){return l==null?"":Io(l)}var VW=pd(function(l,u){if(Bh(u)||po(u)){la(u,_r(u),l);return}for(var m in u)Kn.call(u,m)&&Nh(l,m,u[m])}),MA=pd(function(l,u){la(u,mo(u),l)}),Ig=pd(function(l,u,m,M){la(u,mo(u),l,M)}),BW=pd(function(l,u,m,M){la(u,_r(u),l,M)}),zW=Wa(Ub);function HW(l,u){var m=hd(l);return u==null?m:tO(m,u)}var WW=vn(function(l,u){l=li(l);var m=-1,M=u.length,E=M>2?u[2]:n;for(E&&Kr(u[0],u[1],E)&&(M=1);++m<M;)for(var N=u[m],B=mo(N),G=-1,Q=B.length;++G<Q;){var ye=B[G],xe=l[ye];(xe===n||Fs(xe,ud[ye])&&!Kn.call(l,ye))&&(l[ye]=N[ye])}return l}),jW=vn(function(l){return l.push(n,BO),Oo(wA,n,l)});function GW(l,u){return kD(l,Pt(u,3),aa)}function $W(l,u){return kD(l,Pt(u,3),Bb)}function qW(l,u){return l==null?l:Vb(l,Pt(u,3),mo)}function YW(l,u){return l==null?l:sO(l,Pt(u,3),mo)}function XW(l,u){return l&&aa(l,Pt(u,3))}function ZW(l,u){return l&&Bb(l,Pt(u,3))}function KW(l){return l==null?[]:hg(l,_r(l))}function JW(l){return l==null?[]:hg(l,mo(l))}function _C(l,u,m){var M=l==null?n:Gc(l,u);return M===n?m:M}function QW(l,u){return l!=null&&WO(l,u,CH)}function yC(l,u){return l!=null&&WO(l,u,MH)}var ej=FO(function(l,u,m){u!=null&&typeof u.toString!="function"&&(u=eg.call(u)),l[u]=m},bC(go)),tj=FO(function(l,u,m){u!=null&&typeof u.toString!="function"&&(u=eg.call(u)),Kn.call(l,u)?l[u].push(m):l[u]=[m]},Pt),nj=vn(kh);function _r(l){return po(l)?QD(l):jb(l)}function mo(l){return po(l)?QD(l,!0):RH(l)}function ij(l,u){var m={};return u=Pt(u,3),aa(l,function(M,E,N){za(m,u(M,E,N),M)}),m}function rj(l,u){var m={};return u=Pt(u,3),aa(l,function(M,E,N){za(m,E,u(M,E,N))}),m}var oj=pd(function(l,u,m){pg(l,u,m)}),wA=pd(function(l,u,m,M){pg(l,u,m,M)}),sj=Wa(function(l,u){var m={};if(l==null)return m;var M=!1;u=Ti(u,function(N){return N=zl(N,l),M||(M=N.length>1),N}),la(l,rC(l),m),M&&(m=ts(m,d|f|h,e5));for(var E=u.length;E--;)Zb(m,u[E]);return m});function aj(l,u){return EA(l,Dg(Pt(u)))}var lj=Wa(function(l,u){return l==null?{}:FH(l,u)});function EA(l,u){if(l==null)return{};var m=Ti(rC(l),function(M){return[M]});return u=Pt(u),gO(l,m,function(M,E){return u(M,E[0])})}function cj(l,u,m){u=zl(u,l);var M=-1,E=u.length;for(E||(E=1,l=n);++M<E;){var N=l==null?n:l[ca(u[M])];N===n&&(M=E,N=m),l=Ga(N)?N.call(l):N}return l}function uj(l,u,m){return l==null?l:Uh(l,u,m)}function dj(l,u,m,M){return M=typeof M=="function"?M:n,l==null?l:Uh(l,u,m,M)}var SA=UO(_r),TA=UO(mo);function fj(l,u,m){var M=Qt(l),E=M||Wl(l)||vd(l);if(u=Pt(u,4),m==null){var N=l&&l.constructor;E?m=M?new N:[]:Ni(l)?m=Ga(N)?hd(ig(l)):{}:m={}}return(E?Jo:aa)(l,function(B,G,Q){return u(m,B,G,Q)}),m}function hj(l,u){return l==null?!0:Zb(l,u)}function pj(l,u,m){return l==null?l:bO(l,u,Qb(m))}function mj(l,u,m,M){return M=typeof M=="function"?M:n,l==null?l:bO(l,u,Qb(m),M)}function _d(l){return l==null?[]:Ab(l,_r(l))}function gj(l){return l==null?[]:Ab(l,mo(l))}function vj(l,u,m){return m===n&&(m=u,u=n),m!==n&&(m=rs(m),m=m===m?m:0),u!==n&&(u=rs(u),u=u===u?u:0),jc(rs(l),u,m)}function _j(l,u,m){return u=$a(u),m===n?(m=u,u=0):m=$a(m),l=rs(l),wH(l,u,m)}function yj(l,u,m){if(m&&typeof m!="boolean"&&Kr(l,u,m)&&(u=m=n),m===n&&(typeof u=="boolean"?(m=u,u=n):typeof l=="boolean"&&(m=l,l=n)),l===n&&u===n?(l=0,u=1):(l=$a(l),u===n?(u=l,l=0):u=$a(u)),l>u){var M=l;l=u,u=M}if(m||l%1||u%1){var E=KD();return Ir(l+E*(u-l+Kz("1e-"+((E+"").length-1))),u)}return qb(l,u)}var xj=md(function(l,u,m){return u=u.toLowerCase(),l+(m?PA(u):u)});function PA(l){return xC(Xn(l).toLowerCase())}function DA(l){return l=Xn(l),l&&l.replace(J,u4).replace(zz,"")}function bj(l,u,m){l=Xn(l),u=Io(u);var M=l.length;m=m===n?M:jc(cn(m),0,M);var E=m;return m-=u.length,m>=0&&l.slice(m,E)==u}function Cj(l){return l=Xn(l),l&&Ce.test(l)?l.replace(We,d4):l}function Mj(l){return l=Xn(l),l&&Os.test(l)?l.replace(Xr,"\\$&"):l}var wj=md(function(l,u,m){return l+(m?"-":"")+u.toLowerCase()}),Ej=md(function(l,u,m){return l+(m?" ":"")+u.toLowerCase()}),Sj=IO("toLowerCase");function Tj(l,u,m){l=Xn(l),u=cn(u);var M=u?cd(l):0;if(!u||M>=u)return l;var E=(u-M)/2;return xg(ag(E),m)+l+xg(sg(E),m)}function Pj(l,u,m){l=Xn(l),u=cn(u);var M=u?cd(l):0;return u&&M<u?l+xg(u-M,m):l}function Dj(l,u,m){l=Xn(l),u=cn(u);var M=u?cd(l):0;return u&&M<u?xg(u-M,m)+l:l}function Oj(l,u,m){return m||u==null?u=0:u&&(u=+u),L4(Xn(l).replace(nd,""),u||0)}function Aj(l,u,m){return(m?Kr(l,u,m):u===n)?u=1:u=cn(u),Yb(Xn(l),u)}function Ij(){var l=arguments,u=Xn(l[0]);return l.length<3?u:u.replace(l[1],l[2])}var Rj=md(function(l,u,m){return l+(m?"_":"")+u.toLowerCase()});function Nj(l,u,m){return m&&typeof m!="number"&&Kr(l,u,m)&&(u=m=n),m=m===n?De:m>>>0,m?(l=Xn(l),l&&(typeof u=="string"||u!=null&&!vC(u))&&(u=Io(u),!u&&ld(l))?Hl(Rs(l),0,m):l.split(u,m)):[]}var Fj=md(function(l,u,m){return l+(m?" ":"")+xC(u)});function kj(l,u,m){return l=Xn(l),m=m==null?0:jc(cn(m),0,l.length),u=Io(u),l.slice(m,m+u.length)==u}function Lj(l,u,m){var M=A.templateSettings;m&&Kr(l,u,m)&&(u=n),l=Xn(l),u=Ig({},u,M,VO);var E=Ig({},u.imports,M.imports,VO),N=_r(E),B=Ab(E,N),G,Q,ye=0,xe=u.interpolate||se,Pe="__p += '",je=Rb((u.escape||se).source+"|"+xe.source+"|"+(xe===qt?rd:se).source+"|"+(u.evaluate||se).source+"|$","g"),pt="//# sourceURL="+(Kn.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$z+"]")+`
`;l.replace(je,function(Ot,wn,Nn,No,Jr,Fo){return Nn||(Nn=No),Pe+=l.slice(ye,Fo).replace(ae,f4),wn&&(G=!0,Pe+=`' +
__e(`+wn+`) +
'`),Jr&&(Q=!0,Pe+=`';
`+Jr+`;
__p += '`),Nn&&(Pe+=`' +
((__t = (`+Nn+`)) == null ? '' : __t) +
'`),ye=Fo+Ot.length,Ot}),Pe+=`';
`;var Dt=Kn.call(u,"variable")&&u.variable;if(!Dt)Pe=`with (obj) {
`+Pe+`
}
`;else if(id.test(Dt))throw new Xt(o);Pe=(Q?Pe.replace(An,""):Pe).replace(rn,"$1").replace(ei,"$1;"),Pe="function("+(Dt||"obj")+`) {
`+(Dt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pe+`return __p
}`;var pn=AA(function(){return Gn(N,pt+"return "+Pe).apply(n,B)});if(pn.source=Pe,gC(pn))throw pn;return pn}function Uj(l){return Xn(l).toLowerCase()}function Vj(l){return Xn(l).toUpperCase()}function Bj(l,u,m){if(l=Xn(l),l&&(m||u===n))return BD(l);if(!l||!(u=Io(u)))return l;var M=Rs(l),E=Rs(u),N=zD(M,E),B=HD(M,E)+1;return Hl(M,N,B).join("")}function zj(l,u,m){if(l=Xn(l),l&&(m||u===n))return l.slice(0,jD(l)+1);if(!l||!(u=Io(u)))return l;var M=Rs(l),E=HD(M,Rs(u))+1;return Hl(M,0,E).join("")}function Hj(l,u,m){if(l=Xn(l),l&&(m||u===n))return l.replace(nd,"");if(!l||!(u=Io(u)))return l;var M=Rs(l),E=zD(M,Rs(u));return Hl(M,E).join("")}function Wj(l,u){var m=$,M=F;if(Ni(u)){var E="separator"in u?u.separator:E;m="length"in u?cn(u.length):m,M="omission"in u?Io(u.omission):M}l=Xn(l);var N=l.length;if(ld(l)){var B=Rs(l);N=B.length}if(m>=N)return l;var G=m-cd(M);if(G<1)return M;var Q=B?Hl(B,0,G).join(""):l.slice(0,G);if(E===n)return Q+M;if(B&&(G+=Q.length-G),vC(E)){if(l.slice(G).search(E)){var ye,xe=Q;for(E.global||(E=Rb(E.source,Xn(Th.exec(E))+"g")),E.lastIndex=0;ye=E.exec(xe);)var Pe=ye.index;Q=Q.slice(0,Pe===n?G:Pe)}}else if(l.indexOf(Io(E),G)!=G){var je=Q.lastIndexOf(E);je>-1&&(Q=Q.slice(0,je))}return Q+M}function jj(l){return l=Xn(l),l&&de.test(l)?l.replace(Y,y4):l}var Gj=md(function(l,u,m){return l+(m?" ":"")+u.toUpperCase()}),xC=IO("toUpperCase");function OA(l,u,m){return l=Xn(l),u=m?n:u,u===n?p4(l)?C4(l):o4(l):l.match(u)||[]}var AA=vn(function(l,u){try{return Oo(l,n,u)}catch(m){return gC(m)?m:new Xt(m)}}),$j=Wa(function(l,u){return Jo(u,function(m){m=ca(m),za(l,m,pC(l[m],l))}),l});function qj(l){var u=l==null?0:l.length,m=Pt();return l=u?Ti(l,function(M){if(typeof M[1]!="function")throw new Qo(r);return[m(M[0]),M[1]]}):[],vn(function(M){for(var E=-1;++E<u;){var N=l[E];if(Oo(N[0],this,M))return Oo(N[1],this,M)}})}function Yj(l){return yH(ts(l,d))}function bC(l){return function(){return l}}function Xj(l,u){return l==null||l!==l?u:l}var Zj=NO(),Kj=NO(!0);function go(l){return l}function CC(l){return uO(typeof l=="function"?l:ts(l,d))}function Jj(l){return fO(ts(l,d))}function Qj(l,u){return hO(l,ts(u,d))}var e6=vn(function(l,u){return function(m){return kh(m,l,u)}}),t6=vn(function(l,u){return function(m){return kh(l,m,u)}});function MC(l,u,m){var M=_r(u),E=hg(u,M);m==null&&!(Ni(u)&&(E.length||!M.length))&&(m=u,u=l,l=this,E=hg(u,_r(u)));var N=!(Ni(m)&&"chain"in m)||!!m.chain,B=Ga(l);return Jo(E,function(G){var Q=u[G];l[G]=Q,B&&(l.prototype[G]=function(){var ye=this.__chain__;if(N||ye){var xe=l(this.__wrapped__),Pe=xe.__actions__=ho(this.__actions__);return Pe.push({func:Q,args:arguments,thisArg:l}),xe.__chain__=ye,xe}return Q.apply(l,Fl([this.value()],arguments))})}),l}function n6(){return vr._===this&&(vr._=P4),this}function wC(){}function i6(l){return l=cn(l),vn(function(u){return pO(u,l)})}var r6=tC(Ti),o6=tC(FD),s6=tC(Sb);function IA(l){return lC(l)?Tb(ca(l)):kH(l)}function a6(l){return function(u){return l==null?n:Gc(l,u)}}var l6=kO(),c6=kO(!0);function EC(){return[]}function SC(){return!1}function u6(){return{}}function d6(){return""}function f6(){return!0}function h6(l,u){if(l=cn(l),l<1||l>fe)return[];var m=De,M=Ir(l,De);u=Pt(u),l-=De;for(var E=Ob(M,u);++m<l;)u(m);return E}function p6(l){return Qt(l)?Ti(l,ca):Ro(l)?[l]:ho(JO(Xn(l)))}function m6(l){var u=++S4;return Xn(l)+u}var g6=yg(function(l,u){return l+u},0),v6=nC("ceil"),_6=yg(function(l,u){return l/u},1),y6=nC("floor");function x6(l){return l&&l.length?fg(l,go,zb):n}function b6(l,u){return l&&l.length?fg(l,Pt(u,2),zb):n}function C6(l){return UD(l,go)}function M6(l,u){return UD(l,Pt(u,2))}function w6(l){return l&&l.length?fg(l,go,Gb):n}function E6(l,u){return l&&l.length?fg(l,Pt(u,2),Gb):n}var S6=yg(function(l,u){return l*u},1),T6=nC("round"),P6=yg(function(l,u){return l-u},0);function D6(l){return l&&l.length?Db(l,go):0}function O6(l,u){return l&&l.length?Db(l,Pt(u,2)):0}return A.after=J8,A.ary=cA,A.assign=VW,A.assignIn=MA,A.assignInWith=Ig,A.assignWith=BW,A.at=zW,A.before=uA,A.bind=pC,A.bindAll=$j,A.bindKey=dA,A.castArray=uW,A.chain=sA,A.chunk=y5,A.compact=x5,A.concat=b5,A.cond=qj,A.conforms=Yj,A.constant=bC,A.countBy=D8,A.create=HW,A.curry=fA,A.curryRight=hA,A.debounce=pA,A.defaults=WW,A.defaultsDeep=jW,A.defer=Q8,A.delay=eW,A.difference=C5,A.differenceBy=M5,A.differenceWith=w5,A.drop=E5,A.dropRight=S5,A.dropRightWhile=T5,A.dropWhile=P5,A.fill=D5,A.filter=A8,A.flatMap=N8,A.flatMapDeep=F8,A.flatMapDepth=k8,A.flatten=nA,A.flattenDeep=O5,A.flattenDepth=A5,A.flip=tW,A.flow=Zj,A.flowRight=Kj,A.fromPairs=I5,A.functions=KW,A.functionsIn=JW,A.groupBy=L8,A.initial=N5,A.intersection=F5,A.intersectionBy=k5,A.intersectionWith=L5,A.invert=ej,A.invertBy=tj,A.invokeMap=V8,A.iteratee=CC,A.keyBy=B8,A.keys=_r,A.keysIn=mo,A.map=Sg,A.mapKeys=ij,A.mapValues=rj,A.matches=Jj,A.matchesProperty=Qj,A.memoize=Pg,A.merge=oj,A.mergeWith=wA,A.method=e6,A.methodOf=t6,A.mixin=MC,A.negate=Dg,A.nthArg=i6,A.omit=sj,A.omitBy=aj,A.once=nW,A.orderBy=z8,A.over=r6,A.overArgs=iW,A.overEvery=o6,A.overSome=s6,A.partial=mC,A.partialRight=mA,A.partition=H8,A.pick=lj,A.pickBy=EA,A.property=IA,A.propertyOf=a6,A.pull=z5,A.pullAll=rA,A.pullAllBy=H5,A.pullAllWith=W5,A.pullAt=j5,A.range=l6,A.rangeRight=c6,A.rearg=rW,A.reject=G8,A.remove=G5,A.rest=oW,A.reverse=fC,A.sampleSize=q8,A.set=uj,A.setWith=dj,A.shuffle=Y8,A.slice=$5,A.sortBy=K8,A.sortedUniq=Q5,A.sortedUniqBy=e8,A.split=Nj,A.spread=sW,A.tail=t8,A.take=n8,A.takeRight=i8,A.takeRightWhile=r8,A.takeWhile=o8,A.tap=x8,A.throttle=aW,A.thru=Eg,A.toArray=xA,A.toPairs=SA,A.toPairsIn=TA,A.toPath=p6,A.toPlainObject=CA,A.transform=fj,A.unary=lW,A.union=s8,A.unionBy=a8,A.unionWith=l8,A.uniq=c8,A.uniqBy=u8,A.uniqWith=d8,A.unset=hj,A.unzip=hC,A.unzipWith=oA,A.update=pj,A.updateWith=mj,A.values=_d,A.valuesIn=gj,A.without=f8,A.words=OA,A.wrap=cW,A.xor=h8,A.xorBy=p8,A.xorWith=m8,A.zip=g8,A.zipObject=v8,A.zipObjectDeep=_8,A.zipWith=y8,A.entries=SA,A.entriesIn=TA,A.extend=MA,A.extendWith=Ig,MC(A,A),A.add=g6,A.attempt=AA,A.camelCase=xj,A.capitalize=PA,A.ceil=v6,A.clamp=vj,A.clone=dW,A.cloneDeep=hW,A.cloneDeepWith=pW,A.cloneWith=fW,A.conformsTo=mW,A.deburr=DA,A.defaultTo=Xj,A.divide=_6,A.endsWith=bj,A.eq=Fs,A.escape=Cj,A.escapeRegExp=Mj,A.every=O8,A.find=I8,A.findIndex=eA,A.findKey=GW,A.findLast=R8,A.findLastIndex=tA,A.findLastKey=$W,A.floor=y6,A.forEach=aA,A.forEachRight=lA,A.forIn=qW,A.forInRight=YW,A.forOwn=XW,A.forOwnRight=ZW,A.get=_C,A.gt=gW,A.gte=vW,A.has=QW,A.hasIn=yC,A.head=iA,A.identity=go,A.includes=U8,A.indexOf=R5,A.inRange=_j,A.invoke=nj,A.isArguments=Yc,A.isArray=Qt,A.isArrayBuffer=_W,A.isArrayLike=po,A.isArrayLikeObject=ji,A.isBoolean=yW,A.isBuffer=Wl,A.isDate=xW,A.isElement=bW,A.isEmpty=CW,A.isEqual=MW,A.isEqualWith=wW,A.isError=gC,A.isFinite=EW,A.isFunction=Ga,A.isInteger=gA,A.isLength=Og,A.isMap=vA,A.isMatch=SW,A.isMatchWith=TW,A.isNaN=PW,A.isNative=DW,A.isNil=AW,A.isNull=OW,A.isNumber=_A,A.isObject=Ni,A.isObjectLike=Ui,A.isPlainObject=Hh,A.isRegExp=vC,A.isSafeInteger=IW,A.isSet=yA,A.isString=Ag,A.isSymbol=Ro,A.isTypedArray=vd,A.isUndefined=RW,A.isWeakMap=NW,A.isWeakSet=FW,A.join=U5,A.kebabCase=wj,A.last=is,A.lastIndexOf=V5,A.lowerCase=Ej,A.lowerFirst=Sj,A.lt=kW,A.lte=LW,A.max=x6,A.maxBy=b6,A.mean=C6,A.meanBy=M6,A.min=w6,A.minBy=E6,A.stubArray=EC,A.stubFalse=SC,A.stubObject=u6,A.stubString=d6,A.stubTrue=f6,A.multiply=S6,A.nth=B5,A.noConflict=n6,A.noop=wC,A.now=Tg,A.pad=Tj,A.padEnd=Pj,A.padStart=Dj,A.parseInt=Oj,A.random=yj,A.reduce=W8,A.reduceRight=j8,A.repeat=Aj,A.replace=Ij,A.result=cj,A.round=T6,A.runInContext=Z,A.sample=$8,A.size=X8,A.snakeCase=Rj,A.some=Z8,A.sortedIndex=q5,A.sortedIndexBy=Y5,A.sortedIndexOf=X5,A.sortedLastIndex=Z5,A.sortedLastIndexBy=K5,A.sortedLastIndexOf=J5,A.startCase=Fj,A.startsWith=kj,A.subtract=P6,A.sum=D6,A.sumBy=O6,A.template=Lj,A.times=h6,A.toFinite=$a,A.toInteger=cn,A.toLength=bA,A.toLower=Uj,A.toNumber=rs,A.toSafeInteger=UW,A.toString=Xn,A.toUpper=Vj,A.trim=Bj,A.trimEnd=zj,A.trimStart=Hj,A.truncate=Wj,A.unescape=jj,A.uniqueId=m6,A.upperCase=Gj,A.upperFirst=xC,A.each=aA,A.eachRight=lA,A.first=iA,MC(A,function(){var l={};return aa(A,function(u,m){Kn.call(A.prototype,m)||(l[m]=u)}),l}(),{chain:!1}),A.VERSION=t,Jo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){A[l].placeholder=A}),Jo(["drop","take"],function(l,u){In.prototype[l]=function(m){m=m===n?1:lr(cn(m),0);var M=this.__filtered__&&!u?new In(this):this.clone();return M.__filtered__?M.__takeCount__=Ir(m,M.__takeCount__):M.__views__.push({size:Ir(m,De),type:l+(M.__dir__<0?"Right":"")}),M},In.prototype[l+"Right"]=function(m){return this.reverse()[l](m).reverse()}}),Jo(["filter","map","takeWhile"],function(l,u){var m=u+1,M=m==q||m==oe;In.prototype[l]=function(E){var N=this.clone();return N.__iteratees__.push({iteratee:Pt(E,3),type:m}),N.__filtered__=N.__filtered__||M,N}}),Jo(["head","last"],function(l,u){var m="take"+(u?"Right":"");In.prototype[l]=function(){return this[m](1).value()[0]}}),Jo(["initial","tail"],function(l,u){var m="drop"+(u?"":"Right");In.prototype[l]=function(){return this.__filtered__?new In(this):this[m](1)}}),In.prototype.compact=function(){return this.filter(go)},In.prototype.find=function(l){return this.filter(l).head()},In.prototype.findLast=function(l){return this.reverse().find(l)},In.prototype.invokeMap=vn(function(l,u){return typeof l=="function"?new In(this):this.map(function(m){return kh(m,l,u)})}),In.prototype.reject=function(l){return this.filter(Dg(Pt(l)))},In.prototype.slice=function(l,u){l=cn(l);var m=this;return m.__filtered__&&(l>0||u<0)?new In(m):(l<0?m=m.takeRight(-l):l&&(m=m.drop(l)),u!==n&&(u=cn(u),m=u<0?m.dropRight(-u):m.take(u-l)),m)},In.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},In.prototype.toArray=function(){return this.take(De)},aa(In.prototype,function(l,u){var m=/^(?:filter|find|map|reject)|While$/.test(u),M=/^(?:head|last)$/.test(u),E=A[M?"take"+(u=="last"?"Right":""):u],N=M||/^find/.test(u);E&&(A.prototype[u]=function(){var B=this.__wrapped__,G=M?[1]:arguments,Q=B instanceof In,ye=G[0],xe=Q||Qt(B),Pe=function(wn){var Nn=E.apply(A,Fl([wn],G));return M&&je?Nn[0]:Nn};xe&&m&&typeof ye=="function"&&ye.length!=1&&(Q=xe=!1);var je=this.__chain__,pt=!!this.__actions__.length,Dt=N&&!je,pn=Q&&!pt;if(!N&&xe){B=pn?B:new In(this);var Ot=l.apply(B,G);return Ot.__actions__.push({func:Eg,args:[Pe],thisArg:n}),new es(Ot,je)}return Dt&&pn?l.apply(this,G):(Ot=this.thru(Pe),Dt?M?Ot.value()[0]:Ot.value():Ot)})}),Jo(["pop","push","shift","sort","splice","unshift"],function(l){var u=Km[l],m=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",M=/^(?:pop|shift)$/.test(l);A.prototype[l]=function(){var E=arguments;if(M&&!this.__chain__){var N=this.value();return u.apply(Qt(N)?N:[],E)}return this[m](function(B){return u.apply(Qt(B)?B:[],E)})}}),aa(In.prototype,function(l,u){var m=A[u];if(m){var M=m.name+"";Kn.call(fd,M)||(fd[M]=[]),fd[M].push({name:u,func:m})}}),fd[_g(n,w).name]=[{name:"wrapper",func:n}],In.prototype.clone=j4,In.prototype.reverse=G4,In.prototype.value=$4,A.prototype.at=b8,A.prototype.chain=C8,A.prototype.commit=M8,A.prototype.next=w8,A.prototype.plant=S8,A.prototype.reverse=T8,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=P8,A.prototype.first=A.prototype.head,Dh&&(A.prototype[Dh]=E8),A},Ll=M4();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(vr._=Ll,define(function(){return Ll})):Bc?((Bc.exports=Ll)._=Ll,Cb._=Ll):vr._=Ll}).call(ch)});function kA(n,t){return Object.is(n,t)}var cr=null,Fg=!1,kg=1,Ya=Symbol("SIGNAL");function Bn(n){let t=cr;return cr=n,t}function LA(){return cr}var jh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function AC(n){if(Fg)throw new Error("");if(cr===null)return;cr.consumerOnSignalRead(n);let t=cr.nextProducerIndex++;if(Bg(cr),t<cr.producerNode.length&&cr.producerNode[t]!==n&&Wh(cr)){let e=cr.producerNode[t];Vg(e,cr.producerIndexOfThis[t])}cr.producerNode[t]!==n&&(cr.producerNode[t]=n,cr.producerIndexOfThis[t]=Wh(cr)?zA(n,cr,t):0),cr.producerLastReadVersion[t]=n.version}function B6(){kg++}function UA(n){if(!(Wh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===kg)){if(!n.producerMustRecompute(n)&&!RC(n)){n.dirty=!1,n.lastCleanEpoch=kg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=kg}}function VA(n){if(n.liveConsumerNode===void 0)return;let t=Fg;Fg=!0;try{for(let e of n.liveConsumerNode)e.dirty||z6(e)}finally{Fg=t}}function BA(){return cr?.consumerAllowSignalWrites!==!1}function z6(n){n.dirty=!0,VA(n),n.consumerMarkedDirty?.(n)}function Ug(n){return n&&(n.nextProducerIndex=0),Bn(n)}function IC(n,t){if(Bn(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Wh(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Vg(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function RC(n){Bg(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(UA(e),i!==e.version))return!0}return!1}function NC(n){if(Bg(n),Wh(n))for(let t=0;t<n.producerNode.length;t++)Vg(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zA(n,t,e){if(HA(n),n.liveConsumerNode.length===0&&WA(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=zA(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function Vg(n,t){if(HA(n),n.liveConsumerNode.length===1&&WA(n))for(let i=0;i<n.producerNode.length;i++)Vg(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Bg(r),r.producerIndexOfThis[i]=t}}function Wh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function WA(n){return n.producerNode!==void 0}function jA(n){let t=Object.create(H6);t.computation=n;let e=()=>{if(UA(t),AC(t),t.value===Lg)throw t.error;return t.value};return e[Ya]=t,e}var DC=Symbol("UNSET"),OC=Symbol("COMPUTING"),Lg=Symbol("ERRORED"),H6=kt(Ee({},jh),{value:DC,dirty:!0,error:null,equal:kA,producerMustRecompute(n){return n.value===DC||n.value===OC},producerRecomputeValue(n){if(n.value===OC)throw new Error("Detected cycle in computations.");let t=n.value;n.value=OC;let e=Ug(n),i;try{i=n.computation()}catch(r){i=Lg,n.error=r}finally{IC(n,e)}if(t!==DC&&t!==Lg&&i!==Lg&&n.equal(t,i)){n.value=t;return}n.value=i,n.version++}});function W6(){throw new Error}var GA=W6;function $A(){GA()}function qA(n){GA=n}var j6=null;function YA(n){let t=Object.create(ZA);t.value=n;let e=()=>(AC(t),t.value);return e[Ya]=t,e}function FC(n,t){BA()||$A(),n.equal(n.value,t)||(n.value=t,G6(n))}function XA(n,t){BA()||$A(),FC(n,t(n.value))}var ZA=kt(Ee({},jh),{equal:kA,value:void 0});function G6(n){n.version++,B6(),VA(n),j6?.()}function Mt(n){return typeof n=="function"}function yd(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var zg=yd(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Zc(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Vi=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Mt(i))try{i()}catch(o){t=o instanceof zg?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{KA(o)}catch(s){t=t??[],s instanceof zg?t=[...t,...s.errors]:t.push(s)}}if(t)throw new zg(t)}}add(t){var e;if(t&&t!==this)if(this.closed)KA(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Zc(e,t)}remove(t){let{_finalizers:e}=this;e&&Zc(e,t),t instanceof n&&t._removeParent(this)}};Vi.EMPTY=(()=>{let n=new Vi;return n.closed=!0,n})();var kC=Vi.EMPTY;function Hg(n){return n instanceof Vi||n&&"closed"in n&&Mt(n.remove)&&Mt(n.add)&&Mt(n.unsubscribe)}function KA(n){Mt(n)?n():n.unsubscribe()}var Ls={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xd={setTimeout(n,t,...e){let{delegate:i}=xd;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=xd;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Wg(n){xd.setTimeout(()=>{let{onUnhandledError:t}=Ls;if(t)t(n);else throw n})}function Gh(){}var JA=LC("C",void 0,void 0);function QA(n){return LC("E",void 0,n)}function eI(n){return LC("N",n,void 0)}function LC(n,t,e){return{kind:n,value:t,error:e}}var Kc=null;function bd(n){if(Ls.useDeprecatedSynchronousErrorHandling){let t=!Kc;if(t&&(Kc={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=Kc;if(Kc=null,e)throw i}}else n()}function tI(n){Ls.useDeprecatedSynchronousErrorHandling&&Kc&&(Kc.errorThrown=!0,Kc.error=n)}var Jc=class extends Vi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Hg(t)&&t.add(this)):this.destination=Y6}static create(t,e,i){return new Xa(t,e,i)}next(t){this.isStopped?VC(eI(t),this):this._next(t)}error(t){this.isStopped?VC(QA(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?VC(JA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$6=Function.prototype.bind;function UC(n,t){return $6.call(n,t)}var BC=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){jg(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){jg(i)}else jg(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){jg(e)}}},Xa=class extends Jc{constructor(t,e,i){super();let r;if(Mt(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Ls.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&UC(t.next,o),error:t.error&&UC(t.error,o),complete:t.complete&&UC(t.complete,o)}):r=t}this.destination=new BC(r)}};function jg(n){Ls.useDeprecatedSynchronousErrorHandling?tI(n):Wg(n)}function q6(n){throw n}function VC(n,t){let{onStoppedNotification:e}=Ls;e&&xd.setTimeout(()=>e(n,t))}var Y6={closed:!0,next:Gh,error:q6,complete:Gh};var Cd=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qr(n){return n}function zC(...n){return HC(n)}function HC(n){return n.length===0?Qr:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Wt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=Z6(e)?e:new Xa(e,i,r);return bd(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=nI(i),new i((r,o)=>{let s=new Xa({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Cd](){return this}pipe(...e){return HC(e)(this)}toPromise(e){return e=nI(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function nI(n){var t;return(t=n??Ls.Promise)!==null&&t!==void 0?t:Promise}function X6(n){return n&&Mt(n.next)&&Mt(n.error)&&Mt(n.complete)}function Z6(n){return n&&n instanceof Jc||X6(n)&&Hg(n)}function WC(n){return Mt(n?.lift)}function on(n){return t=>{if(WC(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function mn(n,t,e,i,r){return new jC(n,t,e,i,r)}var jC=class extends Jc{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Md(){return on((n,t)=>{let e=null;n._refCount++;let i=mn(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var wd=class extends Wt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,WC(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Vi;let e=this.getSubject();t.add(this.source.subscribe(mn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Vi.EMPTY)}return t}refCount(){return Md()(this)}};var iI=yd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yn=(()=>{class n extends Wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Gg(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new iI}next(e){bd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){bd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){bd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?kC:(this.currentObservers=null,o.push(e),new Vi(()=>{this.currentObservers=null,Zc(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new Wt;return e.source=this,e}}return n.create=(t,e)=>new Gg(t,e),n})(),Gg=class extends yn{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:kC}};var Fi=class extends yn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var $h={now(){return($h.delegate||Date).now()},delegate:void 0};var qh=class extends yn{constructor(t=1/0,e=1/0,i=$h){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var $g=class extends Vi{constructor(t,e){super()}schedule(t,e=0){return this}};var Yh={setInterval(n,t,...e){let{delegate:i}=Yh;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Yh;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var qg=class extends $g{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return Yh.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Yh.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Zc(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Ed=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Ed.now=$h.now;var Yg=class extends Ed{constructor(t,e=Ed.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var GC=new Yg(qg),rI=GC;var eo=new Wt(n=>n.complete());function Xg(n){return n&&Mt(n.schedule)}function $C(n){return n[n.length-1]}function Zg(n){return Mt($C(n))?n.pop():void 0}function ua(n){return Xg($C(n))?n.pop():void 0}function oI(n,t){return typeof $C(n)=="number"?n.pop():t}var Xh=function(){return Xh=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Xh.apply(this,arguments)};function aI(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{d(i.next(f))}catch(h){s(h)}}function c(f){try{d(i.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):r(f.value).then(a,c)}d((i=i.apply(n,t||[])).next())})}function sI(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qc(n){return this instanceof Qc?(this.v=n,this):new Qc(n)}function lI(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(_){return function(C){return Promise.resolve(C).then(_,h)}}function a(_,C){i[_]&&(r[_]=function(w){return new Promise(function(b,x){o.push([_,w,b,x])>1||c(_,w)})},C&&(r[_]=C(r[_])))}function c(_,C){try{d(i[_](C))}catch(w){v(o[0][3],w)}}function d(_){_.value instanceof Qc?Promise.resolve(_.value.v).then(f,h):v(o[0][2],_)}function f(_){c("next",_)}function h(_){c("throw",_)}function v(_,C){_(C),o.shift(),o.length&&c(o[0][0],o[0][1])}}function cI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof sI=="function"?sI(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}var Sd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Kg(n){return Mt(n?.then)}function Jg(n){return Mt(n[Cd])}function Qg(n){return Symbol.asyncIterator&&Mt(n?.[Symbol.asyncIterator])}function e0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function K6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var t0=K6();function n0(n){return Mt(n?.[t0])}function i0(n){return lI(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield Qc(e.read());if(r)return yield Qc(void 0);yield yield Qc(i)}}finally{e.releaseLock()}})}function r0(n){return Mt(n?.getReader)}function ci(n){if(n instanceof Wt)return n;if(n!=null){if(Jg(n))return J6(n);if(Sd(n))return Q6(n);if(Kg(n))return eG(n);if(Qg(n))return uI(n);if(n0(n))return tG(n);if(r0(n))return nG(n)}throw e0(n)}function J6(n){return new Wt(t=>{let e=n[Cd]();if(Mt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Q6(n){return new Wt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function eG(n){return new Wt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Wg)})}function tG(n){return new Wt(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function uI(n){return new Wt(t=>{iG(n,t).catch(e=>t.error(e))})}function nG(n){return uI(i0(n))}function iG(n,t){var e,i,r,o;return aI(this,void 0,void 0,function*(){try{for(e=cI(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function vo(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function o0(n,t=0){return on((e,i)=>{e.subscribe(mn(i,r=>vo(i,n,()=>i.next(r),t),()=>vo(i,n,()=>i.complete(),t),r=>vo(i,n,()=>i.error(r),t)))})}function s0(n,t=0){return on((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function dI(n,t){return ci(n).pipe(s0(t),o0(t))}function fI(n,t){return ci(n).pipe(s0(t),o0(t))}function hI(n,t){return new Wt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function pI(n,t){return new Wt(e=>{let i;return vo(e,t,()=>{i=n[t0](),vo(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Mt(i?.return)&&i.return()})}function a0(n,t){if(!n)throw new Error("Iterable cannot be null");return new Wt(e=>{vo(e,t,()=>{let i=n[Symbol.asyncIterator]();vo(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function mI(n,t){return a0(i0(n),t)}function gI(n,t){if(n!=null){if(Jg(n))return dI(n,t);if(Sd(n))return hI(n,t);if(Kg(n))return fI(n,t);if(Qg(n))return a0(n,t);if(n0(n))return pI(n,t);if(r0(n))return mI(n,t)}throw e0(n)}function ii(n,t){return t?gI(n,t):ci(n)}function yt(...n){let t=ua(n);return ii(n,t)}function En(n,t){let e=Mt(n)?n:()=>n,i=r=>r.error(e());return new Wt(t?r=>t.schedule(i,0,r):i)}function qC(n){return!!n&&(n instanceof Wt||Mt(n.lift)&&Mt(n.subscribe))}var Za=yd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function vI(n){return n instanceof Date&&!isNaN(n)}function mt(n,t){return on((e,i)=>{let r=0;e.subscribe(mn(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:rG}=Array;function oG(n,t){return rG(t)?n(...t):n(t)}function Td(n){return mt(t=>oG(n,t))}var{isArray:sG}=Array,{getPrototypeOf:aG,prototype:lG,keys:cG}=Object;function l0(n){if(n.length===1){let t=n[0];if(sG(t))return{args:t,keys:null};if(uG(t)){let e=cG(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function uG(n){return n&&typeof n=="object"&&aG(n)===lG}function c0(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function eu(...n){let t=ua(n),e=Zg(n),{args:i,keys:r}=l0(n);if(i.length===0)return ii([],t);let o=new Wt(dG(i,t,r?s=>c0(r,s):Qr));return e?o.pipe(Td(e)):o}function dG(n,t,e=Qr){return i=>{_I(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)_I(t,()=>{let d=ii(n[c],t),f=!1;d.subscribe(mn(i,h=>{o[c]=h,f||(f=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function _I(n,t,e){n?vo(e,n,t):t()}function yI(n,t,e,i,r,o,s,a){let c=[],d=0,f=0,h=!1,v=()=>{h&&!c.length&&!d&&t.complete()},_=w=>d<i?C(w):c.push(w),C=w=>{o&&t.next(w),d++;let b=!1;ci(e(w,f++)).subscribe(mn(t,x=>{r?.(x),o?_(x):t.next(x)},()=>{b=!0},void 0,()=>{if(b)try{for(d--;c.length&&d<i;){let x=c.shift();s?vo(t,s,()=>C(x)):C(x)}v()}catch(x){t.error(x)}}))};return n.subscribe(mn(t,_,()=>{h=!0,v()})),()=>{a?.()}}function ui(n,t,e=1/0){return Mt(t)?ui((i,r)=>mt((o,s)=>t(i,o,r,s))(ci(n(i,r))),e):(typeof t=="number"&&(e=t),on((i,r)=>yI(i,r,n,e)))}function da(n=1/0){return ui(Qr,n)}function xI(){return da(1)}function Pd(...n){return xI()(ii(n,ua(n)))}function u0(n){return new Wt(t=>{ci(n()).subscribe(t)})}function YC(...n){let t=Zg(n),{args:e,keys:i}=l0(n),r=new Wt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,d=s;for(let f=0;f<s;f++){let h=!1;ci(e[f]).subscribe(mn(o,v=>{h||(h=!0,d--),a[f]=v},()=>c--,void 0,()=>{(!c||!h)&&(d||o.next(i?c0(i,a):a),o.complete())}))}});return t?r.pipe(Td(t)):r}var fG=["addListener","removeListener"],hG=["addEventListener","removeEventListener"],pG=["on","off"];function jl(n,t,e,i){if(Mt(e)&&(i=e,e=void 0),i)return jl(n,t,e).pipe(Td(i));let[r,o]=vG(n)?hG.map(s=>a=>n[s](t,a,e)):mG(n)?fG.map(bI(n,t)):gG(n)?pG.map(bI(n,t)):[];if(!r&&Sd(n))return ui(s=>jl(s,t,e))(ci(n));if(!r)throw new TypeError("Invalid event target");return new Wt(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function bI(n,t){return e=>i=>n[e](t,i)}function mG(n){return Mt(n.addListener)&&Mt(n.removeListener)}function gG(n){return Mt(n.on)&&Mt(n.off)}function vG(n){return Mt(n.addEventListener)&&Mt(n.removeEventListener)}function Zh(n=0,t,e=rI){let i=-1;return t!=null&&(Xg(t)?e=t:i=t),new Wt(r=>{let o=vI(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function XC(n=0,t=GC){return n<0&&(n=0),Zh(n,n,t)}function os(...n){let t=ua(n),e=oI(n,1/0),i=n;return i.length?i.length===1?ci(i[0]):da(e)(ii(i,t)):eo}function di(n,t){return on((e,i)=>{let r=0;e.subscribe(mn(i,o=>n.call(t,o,r++)&&i.next(o)))})}function un(n){return on((t,e)=>{let i=null,r=!1,o;i=t.subscribe(mn(e,void 0,void 0,s=>{o=ci(n(s,un(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function d0(n,t,e,i,r){return(o,s)=>{let a=e,c=t,d=0;o.subscribe(mn(s,f=>{let h=d++;c=a?n(c,f,h):(a=!0,f),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function CI(n,t){return on(d0(n,t,arguments.length>=2,!1,!0))}function Ka(n,t){return Mt(t)?ui(n,t,1):ui(n,1)}function ZC(n){return CI((t,e,i)=>!n||n(e,i)?t+1:t,0)}function Gl(n){return on((t,e)=>{let i=!1;t.subscribe(mn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Nr(n){return n<=0?()=>eo:on((t,e)=>{let i=0;t.subscribe(mn(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function KC(n){return mt(()=>n)}function JC(n,t=Qr){return n=n??_G,on((e,i)=>{let r,o=!0;e.subscribe(mn(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function _G(n,t){return n===t}function f0(n=yG){return on((t,e)=>{let i=!1;t.subscribe(mn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function yG(){return new Za}function $l(n){return on((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Us(n,t){let e=arguments.length>=2;return i=>i.pipe(n?di((r,o)=>n(r,o,i)):Qr,Nr(1),e?Gl(t):f0(()=>new Za))}function ql(n){return n<=0?()=>eo:on((t,e)=>{let i=[];t.subscribe(mn(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function QC(n,t){let e=arguments.length>=2;return i=>i.pipe(n?di((r,o)=>n(r,o,i)):Qr,ql(1),e?Gl(t):f0(()=>new Za))}function Dd(){return on((n,t)=>{let e,i=!1;n.subscribe(mn(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function eM(n,t){return on(d0(n,t,arguments.length>=2,!0))}function ss(n={}){let{connector:t=()=>new yn,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,d=0,f=!1,h=!1,v=()=>{a?.unsubscribe(),a=void 0},_=()=>{v(),s=c=void 0,f=h=!1},C=()=>{let w=s;_(),w?.unsubscribe()};return on((w,b)=>{d++,!h&&!f&&v();let x=c=c??t();b.add(()=>{d--,d===0&&!h&&!f&&(a=tM(C,r))}),x.subscribe(b),!s&&d>0&&(s=new Xa({next:D=>x.next(D),error:D=>{h=!0,v(),a=tM(_,e,D),x.error(D)},complete:()=>{f=!0,v(),a=tM(_,i),x.complete()}}),ci(w).subscribe(s))})(o)}}function tM(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Xa({next:()=>{i.unsubscribe(),n()}});return ci(t(...e)).subscribe(i)}function tu(...n){let t=ua(n);return on((e,i)=>{(t?Pd(n,e,t):Pd(n,e)).subscribe(i)})}function ur(n,t){return on((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(mn(i,c=>{r?.unsubscribe();let d=0,f=o++;ci(n(c,f)).subscribe(r=mn(i,h=>i.next(t?t(c,h,f,d++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function nM(n,t){return Mt(t)?ur(()=>n,t):ur(()=>n)}function _o(n){return on((t,e)=>{ci(n).subscribe(mn(e,()=>e.complete(),Gh)),!e.closed&&t.subscribe(e)})}function fi(n,t,e){let i=Mt(n)||t||e?{next:n,error:t,complete:e}:n;return i?on((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(mn(o,c=>{var d;(d=i.next)===null||d===void 0||d.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var d;a=!1,(d=i.error)===null||d===void 0||d.call(i,c),o.error(c)},()=>{var c,d;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(d=i.finalize)===null||d===void 0||d.call(i)}))}):Qr}var mR="https://g.co/ng/security#xss",lt=class extends Error{constructor(t,e){super(tv(t,e)),this.code=t}};function tv(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}function ap(n){return{toString:n}.toString()}var h0="__parameters__";function xG(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function gR(n,t,e){return ap(()=>{let i=xG(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,d,f){let h=c.hasOwnProperty(h0)?c[h0]:Object.defineProperty(c,h0,{value:[]})[h0];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),c}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var Ja=globalThis;function hi(n){for(let t in n)if(n[t]===hi)return t;throw Error("Could not find renamed property on target object.")}function bG(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function no(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(no).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function MI(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var CG=hi({__forward_ref__:hi});function yr(n){return n.__forward_ref__=yr,n.toString=function(){return no(this())},n}function to(n){return vR(n)?n():n}function vR(n){return typeof n=="function"&&n.hasOwnProperty(CG)&&n.__forward_ref__===yr}function we(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $i(n){return{providers:n.providers||[],imports:n.imports||[]}}function nv(n){return wI(n,yR)||wI(n,xR)}function _R(n){return nv(n)!==null}function wI(n,t){return n.hasOwnProperty(t)?n[t]:null}function MG(n){let t=n&&(n[yR]||n[xR]);return t||null}function EI(n){return n&&(n.hasOwnProperty(SI)||n.hasOwnProperty(wG))?n[SI]:null}var yR=hi({\u0275prov:hi}),SI=hi({\u0275inj:hi}),xR=hi({ngInjectableDef:hi}),wG=hi({ngInjectorDef:hi}),it=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=we({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function bR(n){return n&&!!n.\u0275providers}var EG=hi({\u0275cmp:hi}),SG=hi({\u0275dir:hi}),TG=hi({\u0275pipe:hi}),PG=hi({\u0275mod:hi}),P0=hi({\u0275fac:hi}),Qh=hi({__NG_ELEMENT_ID__:hi}),TI=hi({__NG_ENV_ID__:hi});function ru(n){return typeof n=="string"?n:n==null?"":String(n)}function DG(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ru(n)}function OG(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new lt(-200,n)}function Cw(n,t){throw new lt(-201,!1)}var _n=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_n||{}),yM;function CR(){return yM}function yo(n){let t=yM;return yM=n,t}function MR(n,t,e){let i=nv(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&_n.Optional)return null;if(t!==void 0)return t;Cw(n,"Injector")}var AG={},ep=AG,xM="__NG_DI_FLAG__",D0="ngTempTokenPath",IG="ngTokenPath",RG=/\n/gm,NG="\u0275",PI="__source",Nd;function FG(){return Nd}function Yl(n){let t=Nd;return Nd=n,t}function kG(n,t=_n.Default){if(Nd===void 0)throw new lt(-203,!1);return Nd===null?MR(n,void 0,t):Nd.get(n,t&_n.Optional?null:void 0,t)}function Ae(n,t=_n.Default){return(CR()||kG)(to(n),t)}function Me(n,t=_n.Default){return Ae(n,iv(t))}function iv(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bM(n){let t=[];for(let e=0;e<n.length;e++){let i=to(n[e]);if(Array.isArray(i)){if(i.length===0)throw new lt(900,!1);let r,o=_n.Default;for(let s=0;s<i.length;s++){let a=i[s],c=LG(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}t.push(Ae(r,o))}else t.push(Ae(i))}return t}function wR(n,t){return n[xM]=t,n.prototype[xM]=t,n}function LG(n){return n[xM]}function UG(n,t,e,i){let r=n[D0];throw t[PI]&&r.unshift(t[PI]),n.message=VG(`
`+n.message,r,e,i),n[IG]=r,n[D0]=null,n}function VG(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==NG?n.slice(2):n;let r=no(t);if(Array.isArray(t))r=t.map(no).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):no(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(RG,`
  `)}`}var lp=wR(gR("Optional"),8);var rv=wR(gR("SkipSelf"),4);function ou(n,t){let e=n.hasOwnProperty(P0);return e?n[P0]:null}function BG(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function zG(n){return n.flat(Number.POSITIVE_INFINITY)}function Mw(n,t){n.forEach(e=>Array.isArray(e)?Mw(e,t):t(e))}function ER(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function O0(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function HG(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function WG(n,t,e){let i=cp(n,t);return i>=0?n[i|1]=e:(i=~i,HG(n,i,t,e)),i}function iM(n,t){let e=cp(n,t);if(e>=0)return n[e|1]}function cp(n,t){return jG(n,t,1)}function jG(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var kd={},ko=[],su=new it(""),SR=new it("",-1),TR=new it(""),A0=class{get(t,e=ep){if(e===ep){let i=new Error(`NullInjectorError: No provider for ${no(t)}!`);throw i.name="NullInjectorError",i}return e}},PR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(PR||{}),pa=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(pa||{}),Zl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Zl||{});function GG(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function CM(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];$G(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function DR(n){return n===3||n===4||n===6}function $G(n){return n.charCodeAt(0)===64}function tp(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?DI(n,e,r,null,t[++i]):DI(n,e,r,null,null))}}return n}function DI(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var OR="ng-template";function qG(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&GG(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(ww(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function ww(n){return n.type===4&&n.value!==OR}function YG(n,t,e){let i=n.type===4&&!e?OR:n.value;return t===i}function XG(n,t,e){let i=4,r=n.attrs,o=r!==null?JG(r):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Vs(i)&&!Vs(c))return!1;if(s&&Vs(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!YG(n,c,e)||c===""&&t.length===1){if(Vs(i))return!1;s=!0}}else if(i&8){if(r===null||!qG(n,r,c,e)){if(Vs(i))return!1;s=!0}}else{let d=t[++a],f=ZG(c,r,ww(n),e);if(f===-1){if(Vs(i))return!1;s=!0;continue}if(d!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&d!==h){if(Vs(i))return!1;s=!0}}}}return Vs(i)||s}function Vs(n){return(n&1)===0}function ZG(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return QG(t,n)}function KG(n,t,e=!1){for(let i=0;i<t.length;i++)if(XG(n,t[i],e))return!0;return!1}function JG(n){for(let t=0;t<n.length;t++){let e=n[t];if(DR(e))return t}return n.length}function QG(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function OI(n,t){return n?":not("+t.trim()+")":t}function e7(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Vs(s)&&(t+=OI(o,r),r=""),i=s,o=o||!Vs(i);e++}return r!==""&&(t+=OI(o,r)),t}function t7(n){return n.map(e7).join(",")}function n7(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!Vs(r))break;r=o}i++}return{attrs:t,classes:e}}function Oe(n){return ap(()=>{let t=FR(n),e=kt(Ee({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===PR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||pa.Emulated,styles:n.styles||ko,_:null,schemas:n.schemas||null,tView:null,id:""});kR(e);let i=n.dependencies;return e.directiveDefs=II(i,!1),e.pipeDefs=II(i,!0),e.id=o7(e),e})}function i7(n){return Kl(n)||AR(n)}function r7(n){return n!==null}function qi(n){return ap(()=>({type:n.type,bootstrap:n.bootstrap||ko,declarations:n.declarations||ko,imports:n.imports||ko,exports:n.exports||ko,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function AI(n,t){if(n==null)return kd;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=Zl.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==Zl.None?[i,a]:i,t[o]=s):e[o]=i}return e}function Gt(n){return ap(()=>{let t=FR(n);return kR(t),t})}function nc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Kl(n){return n[EG]||null}function AR(n){return n[SG]||null}function IR(n){return n[TG]||null}function RR(n){let t=Kl(n)||AR(n)||IR(n);return t!==null?t.standalone:!1}function NR(n,t){let e=n[PG]||null;if(!e&&t===!0)throw new Error(`Type ${no(n)} does not have '\u0275mod' property.`);return e}function FR(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||kd,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||ko,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:AI(n.inputs,t),outputs:AI(n.outputs),debugInfo:null}}function kR(n){n.features?.forEach(t=>t(n))}function II(n,t){if(!n)return null;let e=t?IR:i7;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(r7)}function o7(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function ic(n){return{\u0275providers:n}}function Ew(...n){return{\u0275providers:LR(!0,n),\u0275fromNgModule:!0}}function LR(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return Mw(t,s=>{let a=s;MM(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&UR(r,o),e}function UR(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Sw(r,o=>{t(o,i)})}}function MM(n,t,e,i){if(n=to(n),!n)return!1;let r=null,o=EI(n),s=!o&&Kl(n);if(!o&&!s){let c=n.ngModule;if(o=EI(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)MM(d,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let d;try{Mw(o.imports,f=>{MM(f,t,e,i)&&(d||=[],d.push(f))})}finally{}d!==void 0&&UR(d,t)}if(!a){let d=ou(r)||(()=>new r);t({provide:r,useFactory:d,deps:ko},r),t({provide:TR,useValue:r,multi:!0},r),t({provide:su,useValue:()=>Ae(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let d=n;Sw(c,f=>{t(f,d)})}}else return!1;return r!==n&&n.providers!==void 0}function Sw(n,t){for(let e of n)bR(e)&&(e=e.\u0275providers),Array.isArray(e)?Sw(e,t):t(e)}var s7=hi({provide:String,useValue:hi});function VR(n){return n!==null&&typeof n=="object"&&s7 in n}function a7(n){return!!(n&&n.useExisting)}function l7(n){return!!(n&&n.useFactory)}function Ld(n){return typeof n=="function"}function c7(n){return!!n.useClass}var ov=new it(""),C0={},u7={},rM;function Tw(){return rM===void 0&&(rM=new A0),rM}var io=class{},np=class extends io{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,EM(t,s=>this.processProvider(s)),this.records.set(SR,Od(void 0,this)),r.has("environment")&&this.records.set(io,Od(void 0,this));let o=this.records.get(ov);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(TR,ko,_n.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Bn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Bn(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Yl(this),i=yo(void 0),r;try{return t()}finally{Yl(e),yo(i)}}get(t,e=ep,i=_n.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(TI))return t[TI](this);i=iv(i);let r,o=Yl(this),s=yo(void 0);try{if(!(i&_n.SkipSelf)){let c=this.records.get(t);if(c===void 0){let d=m7(t)&&nv(t);d&&this.injectableDefInScope(d)?c=Od(wM(t),C0):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=i&_n.Self?Tw():this.parent;return e=i&_n.Optional&&e===ep?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[D0]=a[D0]||[]).unshift(no(t)),o)throw a;return UG(a,t,"R3InjectorError",this.source)}else throw a}finally{yo(s),Yl(o)}}resolveInjectorInitializers(){let t=Bn(null),e=Yl(this),i=yo(void 0),r;try{let o=this.get(su,ko,_n.Self);for(let s of o)s()}finally{Yl(e),yo(i),Bn(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(no(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new lt(205,!1)}processProvider(t){t=to(t);let e=Ld(t)?t:to(t&&t.provide),i=f7(t);if(!Ld(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Od(void 0,C0,!0),r.factory=()=>bM(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=Bn(null);try{return e.value===C0&&(e.value=u7,e.value=e.factory()),typeof e.value=="object"&&e.value&&p7(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Bn(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=to(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function wM(n){let t=nv(n),e=t!==null?t.factory:ou(n);if(e!==null)return e;if(n instanceof it)throw new lt(204,!1);if(n instanceof Function)return d7(n);throw new lt(204,!1)}function d7(n){if(n.length>0)throw new lt(204,!1);let e=MG(n);return e!==null?()=>e.factory(n):()=>new n}function f7(n){if(VR(n))return Od(void 0,n.useValue);{let t=BR(n);return Od(t,C0)}}function BR(n,t,e){let i;if(Ld(n)){let r=to(n);return ou(r)||wM(r)}else if(VR(n))i=()=>to(n.useValue);else if(l7(n))i=()=>n.useFactory(...bM(n.deps||[]));else if(a7(n))i=()=>Ae(to(n.useExisting));else{let r=to(n&&(n.useClass||n.provide));if(h7(n))i=()=>new r(...bM(n.deps));else return ou(r)||wM(r)}return i}function Od(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function h7(n){return!!n.deps}function p7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function m7(n){return typeof n=="function"||typeof n=="object"&&n instanceof it}function EM(n,t){for(let e of n)Array.isArray(e)?EM(e,t):e&&bR(e)?EM(e.\u0275providers,t):t(e)}function cs(n,t){n instanceof np&&n.assertNotDestroyed();let e,i=Yl(n),r=yo(void 0);try{return t()}finally{Yl(i),yo(r)}}function zR(){return CR()!==void 0||FG()!=null}function g7(n){if(!zR())throw new lt(-203,!1)}function v7(n){return typeof n=="function"}var Lo=0,en=1,jt=2,Tr=3,Bs=4,Gs=5,ma=6,I0=7,Hs=8,Ud=9,ga=10,wi=11,ip=12,RI=13,$d=14,ls=15,au=16,Ad=17,Qa=18,sv=19,HR=20,Xl=21,oM=22,as=23,Ji=25,WR=1,rp=6,el=7,R0=8,Vd=9,xo=10,N0=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(N0||{});function zs(n){return Array.isArray(n)&&typeof n[WR]=="object"}function _a(n){return Array.isArray(n)&&n[WR]===!0}function Pw(n){return(n.flags&4)!==0}function up(n){return n.componentOffset>-1}function av(n){return(n.flags&1)===1}function Jl(n){return!!n.template}function F0(n){return(n[jt]&512)!==0}var SM=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function jR(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function xr(){return GR}function GR(n){return n.type.prototype.ngOnChanges&&(n.setInput=y7),_7}xr.ngInherit=!0;function _7(){let n=qR(this),t=n?.current;if(t){let e=n.previous;if(e===kd)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function y7(n,t,e,i,r){let o=this.declaredInputs[i],s=qR(n)||x7(n,{previous:kd,current:null}),a=s.current||(s.current={}),c=s.previous,d=c[o];a[o]=new SM(d&&d.currentValue,e,c===kd),jR(n,t,r,e)}var $R="__ngSimpleChanges__";function qR(n){return n[$R]||null}function x7(n,t){return n[$R]=t}var NI=null;var fa=function(n,t,e){NI?.(n,t,e)},b7="svg",C7="math";function Ws(n){for(;Array.isArray(n);)n=n[Lo];return n}function YR(n,t){return Ws(t[n])}function Uo(n,t){return Ws(t[n.index])}function XR(n,t){return n.data[t]}function lv(n,t){return n[t]}function rc(n,t){let e=t[n];return zs(e)?e:e[Lo]}function M7(n){return(n[jt]&4)===4}function Dw(n){return(n[jt]&128)===128}function w7(n){return _a(n[Tr])}function Bd(n,t){return t==null?null:n[t]}function ZR(n){n[Ad]=0}function KR(n){n[jt]&1024||(n[jt]|=1024,Dw(n)&&uv(n))}function E7(n,t){for(;n>0;)t=t[$d],n--;return t}function cv(n){return!!(n[jt]&9216||n[as]?.dirty)}function TM(n){n[ga].changeDetectionScheduler?.notify(8),n[jt]&64&&(n[jt]|=1024),cv(n)&&uv(n)}function uv(n){n[ga].changeDetectionScheduler?.notify(0);let t=lu(n);for(;t!==null&&!(t[jt]&8192||(t[jt]|=8192,!Dw(t)));)t=lu(t)}function JR(n,t){if((n[jt]&256)===256)throw new lt(911,!1);n[Xl]===null&&(n[Xl]=[]),n[Xl].push(t)}function S7(n,t){if(n[Xl]===null)return;let e=n[Xl].indexOf(t);e!==-1&&n[Xl].splice(e,1)}function lu(n){let t=n[Tr];return _a(t)?t[Tr]:t}var dn={lFrame:l2(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var QR=!1;function T7(){return dn.lFrame.elementDepthCount}function P7(){dn.lFrame.elementDepthCount++}function D7(){dn.lFrame.elementDepthCount--}function e2(){return dn.bindingsEnabled}function dp(){return dn.skipHydrationRootTNode!==null}function O7(n){return dn.skipHydrationRootTNode===n}function A7(n){dn.skipHydrationRootTNode=n}function I7(){dn.skipHydrationRootTNode=null}function Zt(){return dn.lFrame.lView}function dr(){return dn.lFrame.tView}function me(n){return dn.lFrame.contextLView=n,n[Hs]}function ge(n){return dn.lFrame.contextLView=null,n}function Pr(){let n=t2();for(;n!==null&&n.type===64;)n=n.parent;return n}function t2(){return dn.lFrame.currentTNode}function R7(){let n=dn.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function mu(n,t){let e=dn.lFrame;e.currentTNode=n,e.isParent=t}function Ow(){return dn.lFrame.isParent}function n2(){dn.lFrame.isParent=!1}function N7(){return dn.lFrame.contextLView}function i2(){return QR}function FI(n){QR=n}function us(){let n=dn.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function F7(){return dn.lFrame.bindingIndex}function k7(n){return dn.lFrame.bindingIndex=n}function dv(){return dn.lFrame.bindingIndex++}function r2(n){let t=dn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function L7(){return dn.lFrame.inI18n}function U7(n,t){let e=dn.lFrame;e.bindingIndex=e.bindingRootIndex=n,PM(t)}function V7(){return dn.lFrame.currentDirectiveIndex}function PM(n){dn.lFrame.currentDirectiveIndex=n}function B7(n){let t=dn.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function o2(){return dn.lFrame.currentQueryIndex}function Aw(n){dn.lFrame.currentQueryIndex=n}function z7(n){let t=n[en];return t.type===2?t.declTNode:t.type===1?n[Gs]:null}function s2(n,t,e){if(e&_n.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&_n.Host);)if(r=z7(o),r===null||(o=o[$d],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=dn.lFrame=a2();return i.currentTNode=t,i.lView=n,!0}function Iw(n){let t=a2(),e=n[en];dn.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function a2(){let n=dn.lFrame,t=n===null?null:n.child;return t===null?l2(n):t}function l2(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function c2(){let n=dn.lFrame;return dn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var u2=c2;function Rw(){let n=c2();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function H7(n){return(dn.lFrame.contextLView=E7(n,dn.lFrame.contextLView))[Hs]}function gu(){return dn.lFrame.selectedIndex}function cu(n){dn.lFrame.selectedIndex=n}function fv(){let n=dn.lFrame;return XR(n.tView,n.selectedIndex)}function d2(){return dn.lFrame.currentNamespace}var f2=!0;function hv(){return f2}function oc(n){f2=n}function W7(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=GR(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function pv(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),c&&(n.viewHooks??=[]).push(-e,c),d&&((n.viewHooks??=[]).push(e,d),(n.viewCheckHooks??=[]).push(e,d)),f!=null&&(n.destroyHooks??=[]).push(e,f)}}function M0(n,t,e){h2(n,t,3,e)}function w0(n,t,e,i){(n[jt]&3)===e&&h2(n,t,e,i)}function sM(n,t){let e=n[jt];(e&3)===t&&(e&=16383,e+=1,n[jt]=e)}function h2(n,t,e,i){let r=i!==void 0?n[Ad]&65535:0,o=i??-1,s=t.length-1,a=0;for(let c=r;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],i!=null&&a>=i)break}else t[c]<0&&(n[Ad]+=65536),(a<o||o==-1)&&(j7(n,e,t,c),n[Ad]=(n[Ad]&4294901760)+c+2),c++}function kI(n,t){fa(4,n,t);let e=Bn(null);try{t.call(n)}finally{Bn(e),fa(5,n,t)}}function j7(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[jt]>>14<n[Ad]>>16&&(n[jt]&3)===t&&(n[jt]+=16384,kI(a,o)):kI(a,o)}var Fd=-1,uu=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function G7(n){return n instanceof uu}function $7(n){return(n.flags&8)!==0}function q7(n){return(n.flags&16)!==0}var aM={},DM=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=iv(i);let r=this.injector.get(t,aM,i);return r!==aM||e===aM?r:this.parentInjector.get(t,e,i)}};function p2(n){return n!==Fd}function k0(n){return n&32767}function Y7(n){return n>>16}function L0(n,t){let e=Y7(n),i=t;for(;e>0;)i=i[$d],e--;return i}var OM=!0;function U0(n){let t=OM;return OM=n,t}var X7=256,m2=X7-1,g2=5,Z7=0,ha={};function K7(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Qh)&&(i=e[Qh]),i==null&&(i=e[Qh]=Z7++);let r=i&m2,o=1<<r;t.data[n+(r>>g2)]|=o}function V0(n,t){let e=v2(n,t);if(e!==-1)return e;let i=t[en];i.firstCreatePass&&(n.injectorIndex=t.length,lM(i.data,n),lM(t,null),lM(i.blueprint,null));let r=Nw(n,t),o=n.injectorIndex;if(p2(r)){let s=k0(r),a=L0(r,t),c=a[en].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|c[s+d]}return t[o+8]=r,o}function lM(n,t){n.push(0,0,0,0,0,0,0,0,t)}function v2(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Nw(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=C2(r),i===null)return Fd;if(e++,r=r[$d],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Fd}function AM(n,t,e){K7(n,t,e)}function J7(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(DR(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function _2(n,t,e){if(e&_n.Optional||n!==void 0)return n;Cw(t,"NodeInjector")}function y2(n,t,e,i){if(e&_n.Optional&&i===void 0&&(i=null),!(e&(_n.Self|_n.Host))){let r=n[Ud],o=yo(void 0);try{return r?r.get(t,i,e&_n.Optional):MR(t,i,e&_n.Optional)}finally{yo(o)}}return _2(i,t,e)}function x2(n,t,e,i=_n.Default,r){if(n!==null){if(t[jt]&2048&&!(i&_n.Self)){let s=n9(n,t,e,i,ha);if(s!==ha)return s}let o=b2(n,t,e,i,ha);if(o!==ha)return o}return y2(t,e,i,r)}function b2(n,t,e,i,r){let o=e9(e);if(typeof o=="function"){if(!s2(t,n,i))return i&_n.Host?_2(r,e,i):y2(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&_n.Optional))Cw(e);else return s}finally{u2()}}else if(typeof o=="number"){let s=null,a=v2(n,t),c=Fd,d=i&_n.Host?t[ls][Gs]:null;for((a===-1||i&_n.SkipSelf)&&(c=a===-1?Nw(n,t):t[a+8],c===Fd||!UI(i,!1)?a=-1:(s=t[en],a=k0(c),t=L0(c,t)));a!==-1;){let f=t[en];if(LI(o,a,f.data)){let h=Q7(a,t,e,s,i,d);if(h!==ha)return h}c=t[a+8],c!==Fd&&UI(i,t[en].data[a+8]===d)&&LI(o,a,t)?(s=f,a=k0(c),t=L0(c,t)):a=-1}}return r}function Q7(n,t,e,i,r,o){let s=t[en],a=s.data[n+8],c=i==null?up(a)&&OM:i!=s&&(a.type&3)!==0,d=r&_n.Host&&o===a,f=E0(a,s,e,c,d);return f!==null?du(t,s,f,a):ha}function E0(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,c=n.directiveStart,d=n.directiveEnd,f=o>>20,h=i?a:a+f,v=r?a+f:d;for(let _=h;_<v;_++){let C=s[_];if(_<c&&e===C||_>=c&&C.type===e)return _}if(r){let _=s[c];if(_&&Jl(_)&&_.type===e)return c}return null}function du(n,t,e,i){let r=n[e],o=t.data;if(G7(r)){let s=r;s.resolving&&OG(DG(o[e]));let a=U0(s.canSeeViewProviders);s.resolving=!0;let c,d=s.injectImpl?yo(s.injectImpl):null,f=s2(n,i,_n.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&W7(e,o[e],t)}finally{d!==null&&yo(d),U0(a),s.resolving=!1,u2()}}return r}function e9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Qh)?n[Qh]:void 0;return typeof t=="number"?t>=0?t&m2:t9:t}function LI(n,t,e){let i=1<<n;return!!(e[t+(n>>g2)]&i)}function UI(n,t){return!(n&_n.Self)&&!(n&_n.Host&&t)}var iu=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return x2(this._tNode,this._lView,t,iv(i),e)}};function t9(){return new iu(Pr(),Zt())}function Fr(n){return ap(()=>{let t=n.prototype.constructor,e=t[P0]||IM(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[P0]||IM(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function IM(n){return vR(n)?()=>{let t=IM(to(n));return t&&t()}:ou(n)}function n9(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[jt]&2048&&!(s[jt]&512);){let a=b2(o,s,e,i|_n.Self,ha);if(a!==ha)return a;let c=o.parent;if(!c){let d=s[HR];if(d){let f=d.get(e,ha,i);if(f!==ha)return f}c=C2(s),s=s[$d]}o=c}return r}function C2(n){let t=n[en],e=t.type;return e===2?t.declTNode:e===1?n[Gs]:null}function Fw(n){return J7(Pr(),n)}function VI(n,t=null,e=null,i){let r=M2(n,t,e,i);return r.resolveInjectorInitializers(),r}function M2(n,t=null,e=null,i,r=new Set){let o=[e||ko,Ew(n)];return i=i||(typeof n=="object"?void 0:no(n)),new np(o,t||Tw(),i||null,r)}var bo=class n{static{this.THROW_IF_NOT_FOUND=ep}static{this.NULL=new A0}static create(t,e){if(Array.isArray(t))return VI({name:""},e,t,"");{let i=t.name??"";return VI({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=we({token:n,providedIn:"any",factory:()=>Ae(SR)})}static{this.__NG_ELEMENT_ID__=-1}};var i9=new it("");i9.__NG_ELEMENT_ID__=n=>{let t=Pr();if(t===null)throw new lt(204,!1);if(t.type&2)return t.value;if(n&_n.Optional)return null;throw new lt(204,!1)};var r9="ngOriginalError";function cM(n){return n[r9]}var w2=!0,kw=(()=>{class n{static{this.__NG_ELEMENT_ID__=o9}static{this.__NG_ENV_ID__=e=>e}}return n})(),RM=class extends kw{constructor(t){super(),this._lView=t}onDestroy(t){return JR(this._lView,t),()=>S7(this._lView,t)}};function o9(){return new RM(Zt())}var nl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Fi(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>new n})}}return n})();var NM=class extends yn{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,zR()&&(this.destroyRef=Me(kw,{optional:!0})??void 0,this.pendingTasks=Me(nl,{optional:!0})??void 0)}emit(t){let e=Bn(null);try{super.next(t)}finally{Bn(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let c=t;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof Vi&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(e),i!==void 0&&this.pendingTasks?.remove(i)})}}},ot=NM;function B0(...n){}function E2(n){let t,e;function i(){n=B0;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function BI(n){return queueMicrotask(()=>n()),()=>{n=B0}}var Lw="isAngularZone",z0=Lw+"_ID",s9=0,zn=class n{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=w2}=t;if(typeof Zone>"u")throw new lt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,c9(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Lw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new lt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new lt(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,a9,B0,B0);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},a9={};function Uw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function l9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){E2(()=>{n.callbackScheduled=!1,FM(n),n.isCheckStableRunning=!0,Uw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),FM(n)}function c9(n){let t=()=>{l9(n)},e=s9++;n._inner=n._inner.fork({name:"angular",properties:{[Lw]:!0,[z0]:e,[z0+e]:!0},onInvokeTask:(i,r,o,s,a,c)=>{if(u9(c))return i.invokeTask(o,s,a,c);try{return zI(n),i.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),HI(n)}},onInvoke:(i,r,o,s,a,c,d)=>{try{return zI(n),i.invoke(o,s,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!d9(c)&&t(),HI(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,FM(n),Uw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function FM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function zI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function HI(n){n._nesting--,Uw(n)}var kM=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function u9(n){return S2(n,"__ignore_ng_zone__")}function d9(n){return S2(n,"__scheduler_tick__")}function S2(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var tl=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&cM(t);for(;e&&cM(e);)e=cM(e);return e||null}},f9=new it("",{providedIn:"root",factory:()=>{let n=Me(zn),t=Me(tl);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function h9(){return qd(Pr(),Zt())}function qd(n,t){return new ri(Uo(n,t))}var ri=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=h9}}return n})();function p9(n){return n instanceof ri?n.nativeElement:n}function m9(){return this._results[Symbol.iterator]()}var LM=class n{get changes(){return this._changes??=new ot}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=m9)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=zG(t);(this._changesDetected=!BG(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},g9="ngSkipHydration",v9="ngskiphydration";function T2(n){let t=n.mergedAttrs;if(t===null)return!1;for(let e=0;e<t.length;e+=2){let i=t[e];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===v9)return!0}return!1}function P2(n){return n.hasAttribute(g9)}function H0(n){return(n.flags&128)===128}function _9(n){if(H0(n))return!0;let t=n.parent;for(;t;){if(H0(n)||T2(t))return!0;t=t.parent}return!1}var D2=new Map,y9=0;function x9(){return y9++}function b9(n){D2.set(n[sv],n)}function UM(n){D2.delete(n[sv])}var WI="__ngContext__";function Ql(n,t){zs(t)?(n[WI]=t[sv],b9(t)):n[WI]=t}function O2(n){return I2(n[ip])}function A2(n){return I2(n[Bs])}function I2(n){for(;n!==null&&!_a(n);)n=n[Bs];return n}var VM;function R2(n){VM=n}function fp(){if(VM!==void 0)return VM;if(typeof document<"u")return document;throw new lt(210,!1)}var mv=new it("",{providedIn:"root",factory:()=>C9}),C9="ng",Vw=new it(""),kr=new it("",{providedIn:"platform",factory:()=>"unknown"});var Bw=new it("",{providedIn:"root",factory:()=>fp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function M9(){let n=new Yd;return Me(kr)==="browser"&&(n.store=w9(fp(),Me(mv))),n}var Yd=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=we({token:n,providedIn:"root",factory:M9})}get(e,i){return this.store[e]!==void 0?this.store[e]:i}set(e,i){this.store[e]=i}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(e,i){this.onSerializeCallbacks[e]=i}toJson(){for(let e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function w9(n,t){let e=n.getElementById(t+"-state");if(e?.textContent)try{return JSON.parse(e.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var N2="h",F2="b",BM=function(n){return n.FirstChild="f",n.NextSibling="n",n}(BM||{}),E9="e",S9="t",zw="c",k2="x",W0="r",T9="i",P9="n",L2="d";var D9="__nghData__",U2=D9,uM="ngh",O9="nghm",V2=()=>null;function A9(n,t,e=!1){let i=n.getAttribute(uM);if(i==null)return null;let[r,o]=i.split("|");if(i=e?o:r,!i)return null;let s=o?`|${o}`:"",a=e?r:s,c={};if(i!==""){let f=t.get(Yd,null,{optional:!0});f!==null&&(c=f.get(U2,[])[Number(i)])}let d={data:c,firstChild:n.firstChild??null};return e&&(d.firstChild=n,gv(d,0,n.nextSibling)),a?n.setAttribute(uM,a):n.removeAttribute(uM),d}function I9(){V2=A9}function Hw(n,t,e=!1){return V2(n,t,e)}function R9(n){let t=n._lView;return t[en].type===2?null:(F0(t)&&(t=t[Ji]),t)}function N9(n){return n.textContent?.replace(/\s/gm,"")}function F9(n){let t=fp(),e=t.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=N9(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=e.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function gv(n,t,e){n.segmentHeads??={},n.segmentHeads[t]=e}function zM(n,t){return n.segmentHeads?.[t]??null}function k9(n,t){let e=n.data,i=e[E9]?.[t]??null;return i===null&&e[zw]?.[t]&&(i=Ww(n,t)),i}function B2(n,t){return n.data[zw]?.[t]??null}function Ww(n,t){let e=B2(n,t)??[],i=0;for(let r of e)i+=r[W0]*(r[k2]??1);return i}function L9(n){if(typeof n.disconnectedNodes>"u"){let t=n.data[L2];n.disconnectedNodes=t?new Set(t):null}return n.disconnectedNodes}function hp(n,t){if(typeof n.disconnectedNodes>"u"){let e=n.data[L2];n.disconnectedNodes=e?new Set(e):null}return!!L9(n)?.has(t)}var p0=new it(""),z2=!1,H2=new it("",{providedIn:"root",factory:()=>z2});var m0;function U9(){if(m0===void 0&&(m0=null,Ja.trustedTypes))try{m0=Ja.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return m0}function vv(n){return U9()?.createHTML(n)||n}var g0;function W2(){if(g0===void 0&&(g0=null,Ja.trustedTypes))try{g0=Ja.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return g0}function jI(n){return W2()?.createHTML(n)||n}function GI(n){return W2()?.createScriptURL(n)||n}var j0=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mR})`}};function Xd(n){return n instanceof j0?n.changingThisBreaksApplicationSecurity:n}function _v(n,t){let e=V9(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${mR})`)}return e===t}function V9(n){return n instanceof j0&&n.getTypeName()||null}function B9(n){let t=new WM(n);return z9()?new HM(t):t}var HM=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(vv(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},WM=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=vv(t),e}};function z9(){try{return!!new window.DOMParser().parseFromString(vv(""),"text/html")}catch{return!1}}var H9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jw(n){return n=String(n),n.match(H9)?n:"unsafe:"+n}function il(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function pp(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var j2=il("area,br,col,hr,img,wbr"),G2=il("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$2=il("rp,rt"),W9=pp($2,G2),j9=pp(G2,il("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),G9=pp($2,il("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$I=pp(j2,j9,G9,W9),q2=il("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$9=il("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),q9=il("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Y9=pp(q2,$9,q9),X9=il("script,style,template"),jM=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=J9(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=K9(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=qI(t).toLowerCase();if(!$I.hasOwnProperty(e))return this.sanitizedSomething=!0,!X9.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!Y9.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;q2[a]&&(c=jw(c)),this.buf.push(" ",s,'="',YI(c),'"')}return this.buf.push(">"),!0}endElement(t){let e=qI(t).toLowerCase();$I.hasOwnProperty(e)&&!j2.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(YI(t))}};function Z9(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function K9(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw Y2(t);return t}function J9(n){let t=n.firstChild;if(t&&Z9(n,t))throw Y2(t);return t}function qI(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function Y2(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Q9=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e$=/([^\#-~ |!])/g;function YI(n){return n.replace(/&/g,"&amp;").replace(Q9,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(e$,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var v0;function X2(n,t){let e=null;try{v0=v0||B9(n);let i=t?String(t):"";e=v0.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=v0.getInertBodyElement(i)}while(i!==o);let a=new jM().sanitizeChildren(XI(e)||e);return vv(a)}finally{if(e){let i=XI(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function XI(n){return"content"in n&&t$(n)?n.content:null}function t$(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var mp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(mp||{});function yv(n){let t=Gw();return t?jI(t.sanitize(mp.HTML,n)||""):_v(n,"HTML")?jI(Xd(n)):X2(fp(),ru(n))}function Zd(n){let t=Gw();return t?t.sanitize(mp.URL,n)||"":_v(n,"URL")?Xd(n):jw(ru(n))}function n$(n){let t=Gw();if(t)return GI(t.sanitize(mp.RESOURCE_URL,n)||"");if(_v(n,"ResourceURL"))return GI(Xd(n));throw new lt(904,!1)}function i$(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?n$:Zd}function Z2(n,t,e){return i$(t,e)(n)}function Gw(){let n=Zt();return n&&n[ga].sanitizer}var r$=/^>|^->|<!--|-->|--!>|<!-$/g,o$=/(<|>)/g,s$="\u200B$1\u200B";function a$(n){return n.replace(r$,t=>t.replace(o$,s$))}function l$(n){return n.ownerDocument.body}function K2(n){return n instanceof Function?n():n}function Kh(n){return(n??Me(bo)).get(kr)==="browser"}var va=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(va||{}),c$;function $w(n,t){return c$(n,t)}function Id(n,t,e,i,r){if(i!=null){let o,s=!1;_a(i)?o=i:zs(i)&&(s=!0,i=i[Lo]);let a=Ws(i);n===0&&e!==null?r==null?iN(t,e,a):G0(t,e,a,r||null,!0):n===1&&e!==null?G0(t,e,a,r||null,!0):n===2?Xw(t,a,s):n===3&&t.destroyNode(a),o!=null&&w$(t,n,o,e,r)}}function J2(n,t){return n.createText(t)}function u$(n,t,e){n.setValue(t,e)}function Q2(n,t){return n.createComment(a$(t))}function qw(n,t,e){return n.createElement(t,e)}function d$(n,t){eN(n,t),t[Lo]=null,t[Gs]=null}function f$(n,t,e,i,r,o){i[Lo]=r,i[Gs]=t,bv(n,i,e,1,r,o)}function eN(n,t){t[ga].changeDetectionScheduler?.notify(9),bv(n,t,t[wi],2,null,null)}function h$(n){let t=n[ip];if(!t)return dM(n[en],n);for(;t;){let e=null;if(zs(t))e=t[ip];else{let i=t[xo];i&&(e=i)}if(!e){for(;t&&!t[Bs]&&t!==n;)zs(t)&&dM(t[en],t),t=t[Tr];t===null&&(t=n),zs(t)&&dM(t[en],t),e=t&&t[Bs]}t=e}}function p$(n,t,e,i){let r=xo+i,o=e.length;i>0&&(e[r-1][Bs]=t),i<o-xo?(t[Bs]=e[r],ER(e,xo+i,t)):(e.push(t),t[Bs]=null),t[Tr]=e;let s=t[au];s!==null&&e!==s&&tN(s,t);let a=t[Qa];a!==null&&a.insertView(n),TM(t),t[jt]|=128}function tN(n,t){let e=n[Vd],i=t[Tr];if(zs(i))n[jt]|=N0.HasTransplantedViews;else{let r=i[Tr][ls];t[ls]!==r&&(n[jt]|=N0.HasTransplantedViews)}e===null?n[Vd]=[t]:e.push(t)}function Yw(n,t){let e=n[Vd],i=e.indexOf(t);e.splice(i,1)}function GM(n,t){if(n.length<=xo)return;let e=xo+t,i=n[e];if(i){let r=i[au];r!==null&&r!==n&&Yw(r,i),t>0&&(n[e-1][Bs]=i[Bs]);let o=O0(n,xo+t);d$(i[en],i);let s=o[Qa];s!==null&&s.detachView(o[en]),i[Tr]=null,i[Bs]=null,i[jt]&=-129}return i}function nN(n,t){if(!(t[jt]&256)){let e=t[wi];e.destroyNode&&bv(n,t,e,3,null,null),h$(t)}}function dM(n,t){if(t[jt]&256)return;let e=Bn(null);try{t[jt]&=-129,t[jt]|=256,t[as]&&NC(t[as]),g$(n,t),m$(n,t),t[en].type===1&&t[wi].destroy();let i=t[au];if(i!==null&&_a(t[Tr])){i!==t[Tr]&&Yw(i,t);let r=t[Qa];r!==null&&r.detachView(n)}UM(t)}finally{Bn(e)}}function m$(n,t){let e=n.cleanup,i=t[I0];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[I0]=null);let r=t[Xl];if(r!==null){t[Xl]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function g$(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof uu)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];fa(4,a,c);try{c.call(a)}finally{fa(5,a,c)}}else{fa(4,r,o);try{o.call(r)}finally{fa(5,r,o)}}}}}function v$(n,t,e){return _$(n,t.parent,e)}function _$(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Lo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===pa.None||o===pa.Emulated)return null}return Uo(i,e)}}function G0(n,t,e,i,r){n.insertBefore(t,e,i,r)}function iN(n,t,e){n.appendChild(t,e)}function ZI(n,t,e,i,r){i!==null?G0(n,t,e,i,r):iN(n,t,e)}function rN(n,t){return n.parentNode(t)}function y$(n,t){return n.nextSibling(t)}function x$(n,t,e){return C$(n,t,e)}function b$(n,t,e){return n.type&40?Uo(n,e):null}var C$=b$,KI;function xv(n,t,e,i){let r=v$(n,i,t),o=t[wi],s=i.parent||t[Gs],a=x$(s,i,t);if(r!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)ZI(o,r,e[c],a,!1);else ZI(o,r,e,a,!1);KI!==void 0&&KI(o,i,t,e,r)}function Jh(n,t){if(t!==null){let e=t.type;if(e&3)return Uo(t,n);if(e&4)return $M(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Jh(n,i);{let r=n[t.index];return _a(r)?$M(-1,r):Ws(r)}}else{if(e&128)return Jh(n,t.next);if(e&32)return $w(t,n)()||Ws(n[t.index]);{let i=oN(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=lu(n[ls]);return Jh(r,i)}else return Jh(n,t.next)}}}return null}function oN(n,t){if(t!==null){let i=n[ls][Gs],r=t.projection;return i.projection[r]}return null}function $M(n,t){let e=xo+n+1;if(e<t.length){let i=t[e],r=i[en].firstChild;if(r!==null)return Jh(i,r)}return t[el]}function Xw(n,t,e){n.removeChild(null,t,e)}function sN(n){n.textContent=""}function Zw(n,t,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],c=e.type;if(s&&t===0&&(a&&Ql(Ws(a),i),e.flags|=2),(e.flags&32)!==32)if(c&8)Zw(n,t,e.child,i,r,o,!1),Id(t,n,r,a,o);else if(c&32){let d=$w(e,i),f;for(;f=d();)Id(t,n,r,f,o);Id(t,n,r,a,o)}else c&16?M$(n,t,i,e,r,o):Id(t,n,r,a,o);e=s?e.projectionNext:e.next}}function bv(n,t,e,i,r,o){Zw(e,i,n.firstChild,t,r,o,!1)}function M$(n,t,e,i,r,o){let s=e[ls],c=s[Gs].projection[i.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let f=c[d];Id(t,n,r,f,o)}else{let d=c,f=s[Tr];H0(i)&&(d.flags|=128),Zw(n,t,d,f,r,o,!0)}}function w$(n,t,e,i,r){let o=e[el],s=Ws(e);o!==s&&Id(t,n,i,o,r);for(let a=xo;a<e.length;a++){let c=e[a];bv(c[en],c,n,t,i,o)}}function E$(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:va.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=va.Important),n.setStyle(e,i,r,o))}}function S$(n,t,e){n.setAttribute(t,"style",e)}function aN(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function lN(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&CM(n,t,i),r!==null&&aN(n,t,r),o!==null&&S$(n,t,o)}var $s={};function T(n=1){cN(dr(),Zt(),gu()+n,!1)}function cN(n,t,e,i){if(!i)if((t[jt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&M0(t,o,e)}else{let o=n.preOrderHooks;o!==null&&w0(t,o,0,e)}cu(e)}function k(n,t=_n.Default){let e=Zt();if(e===null)return Ae(n,t);let i=Pr();return x2(i,e,to(n),t)}function uN(){let n="invalid";throw new Error(n)}function dN(n,t,e,i,r,o){let s=Bn(null);try{let a=null;r&Zl.SignalBased&&(a=t[i][Ya]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&Zl.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):jR(t,a,i,o)}finally{Bn(s)}}function T$(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)cu(~r);else{let o=r,s=e[++i],a=e[++i];U7(s,o);let c=t[o];a(2,c)}}}finally{cu(-1)}}function Cv(n,t,e,i,r,o,s,a,c,d,f){let h=t.blueprint.slice();return h[Lo]=r,h[jt]=i|4|128|8|64,(d!==null||n&&n[jt]&2048)&&(h[jt]|=2048),ZR(h),h[Tr]=h[$d]=n,h[Hs]=e,h[ga]=s||n&&n[ga],h[wi]=a||n&&n[wi],h[Ud]=c||n&&n[Ud]||null,h[Gs]=o,h[sv]=x9(),h[ma]=f,h[HR]=d,h[ls]=t.type==2?n[ls]:h,h}function gp(n,t,e,i,r){let o=n.data[t];if(o===null)o=P$(n,t,e,i,r),L7()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=R7();o.injectorIndex=s===null?-1:s.injectorIndex}return mu(o,!0),o}function P$(n,t,e,i,r){let o=t2(),s=Ow(),a=s?o:o&&o.parent,c=n.data[t]=F$(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function fN(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function hN(n,t,e,i,r){let o=gu(),s=i&2;try{cu(-1),s&&t.length>Ji&&cN(n,t,Ji,!1),fa(s?2:0,r),e(i,r)}finally{cu(o),fa(s?3:1,r)}}function Kw(n,t,e){if(Pw(t)){let i=Bn(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{Bn(i)}}}function Jw(n,t,e){e2()&&(z$(n,t,e,Uo(e,t)),(e.flags&64)===64&&vN(n,t,e))}function Qw(n,t,e=Uo){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function pN(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=e1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function e1(n,t,e,i,r,o,s,a,c,d,f){let h=Ji+i,v=h+r,_=D$(h,v),C=typeof d=="function"?d():d;return _[en]={type:n,blueprint:_,template:e,queries:null,viewQuery:a,declTNode:t,data:_.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:C,incompleteFirstPass:!1,ssrId:f}}function D$(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:$s);return e}function O$(n,t,e,i){let o=i.get(H2,z2)||e===pa.ShadowDom,s=n.selectRootElement(t,o);return A$(s),s}function A$(n){mN(n)}var mN=()=>null;function I$(n){P2(n)?sN(n):F9(n)}function R$(){mN=I$}function N$(n,t,e,i){let r=xN(t);r.push(e),n.firstCreatePass&&bN(n).push(i,r.length-1)}function F$(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return dp()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function JI(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,c=Zl.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let d=o;if(r!==null){if(!r.hasOwnProperty(o))continue;d=r[o]}n===0?QI(i,e,d,a,c):QI(i,e,d,a)}return i}function QI(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function k$(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],c=null,d=null;for(let f=i;f<r;f++){let h=o[f],v=e?e.get(h):null,_=v?v.inputs:null,C=v?v.outputs:null;c=JI(0,h.inputs,f,c,_),d=JI(1,h.outputs,f,d,C);let w=c!==null&&s!==null&&!ww(t)?J$(c,f,s):null;a.push(w)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=d}function L$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function t1(n,t,e,i,r,o,s,a){let c=Uo(t,e),d=t.inputs,f;!a&&d!=null&&(f=d[i])?(i1(n,e,f,i,r),up(t)&&U$(e,t.index)):t.type&3?(i=L$(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(c,i,r)):t.type&12}function U$(n,t){let e=rc(t,n);e[jt]&16||(e[jt]|=64)}function n1(n,t,e,i){if(e2()){let r=i===null?null:{"":-1},o=W$(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&gN(n,t,e,s,r,a),r&&j$(e,i,r)}e.mergedAttrs=tp(e.mergedAttrs,e.attrs)}function gN(n,t,e,i,r,o){for(let d=0;d<i.length;d++)AM(V0(e,t),n,i[d].type);$$(e,n.data.length,i.length);for(let d=0;d<i.length;d++){let f=i[d];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,c=fN(n,t,i.length,null);for(let d=0;d<i.length;d++){let f=i[d];e.mergedAttrs=tp(e.mergedAttrs,f.hostAttrs),q$(n,e,t,c,f),G$(c,f,r),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let h=f.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),c++}k$(n,e,o)}function V$(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;B$(s)!=a&&s.push(a),s.push(e,i,o)}}function B$(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function z$(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;up(e)&&Y$(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||V0(e,t),Ql(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let c=n.data[a],d=du(t,n,a,e);if(Ql(d,t),s!==null&&K$(t,a-r,d,c,e,s),Jl(c)){let f=rc(e.index,t);f[Hs]=du(t,n,a,e)}}}function vN(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=V7();try{cu(o);for(let a=i;a<r;a++){let c=n.data[a],d=t[a];PM(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&H$(c,d)}}finally{cu(-1),PM(s)}}function H$(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function W$(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(KG(t,s.selectors,!1))if(i||(i=[]),Jl(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let c=a.length;qM(n,t,c)}else i.unshift(s),qM(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function qM(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function j$(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new lt(-301,!1);i.push(t[r],o)}}}function G$(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;Jl(t)&&(e[""]=n)}}function $$(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function q$(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=ou(r.type,!0)),s=new uu(o,Jl(r),k);n.blueprint[i]=s,e[i]=s,V$(n,t,i,fN(n,e,r.hostVars,$s),r)}function Y$(n,t,e){let i=Uo(t,n),r=pN(e),o=n[ga].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=Mv(n,Cv(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function X$(n,t,e,i,r,o){let s=Uo(n,t);Z$(t[wi],s,o,n.value,e,i,r)}function Z$(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?ru(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function K$(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],d=s[a++],f=s[a++],h=s[a++];dN(i,e,c,d,f,h)}}function J$(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function _N(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function yN(n,t){let e=n.contentQueries;if(e!==null){let i=Bn(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];Aw(o),a.contentQueries(2,t[s],s)}}}finally{Bn(i)}}}function Mv(n,t){return n[ip]?n[RI][Bs]=t:n[ip]=t,n[RI]=t,t}function YM(n,t,e){Aw(0);let i=Bn(null);try{t(n,e)}finally{Bn(i)}}function xN(n){return n[I0]??=[]}function bN(n){return n.cleanup??=[]}function CN(n,t){let e=n[Ud],i=e?e.get(tl,null):null;i&&i.handleError(t)}function i1(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],c=e[o++],d=t[s],f=n.data[s];dN(f,d,i,a,c,r)}}function MN(n,t,e){let i=YR(t,n);u$(n[wi],i,e)}function Q$(n,t){let e=rc(t,n),i=e[en];eq(i,e);let r=e[Lo];r!==null&&e[ma]===null&&(e[ma]=Hw(r,e[Ud])),r1(i,e,e[Hs])}function eq(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function r1(n,t,e){Iw(t);try{let i=n.viewQuery;i!==null&&YM(1,i,e);let r=n.template;r!==null&&hN(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Qa]?.finishViewCreation(n),n.staticContentQueries&&yN(n,t),n.staticViewQueries&&YM(2,n.viewQuery,e);let o=n.components;o!==null&&tq(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[jt]&=-5,Rw()}}function tq(n,t){for(let e=0;e<t.length;e++)Q$(n,t[e])}function nq(n,t,e,i){let r=Bn(null);try{let o=t.tView,a=n[jt]&4096?4096:16,c=Cv(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),d=n[t.index];c[au]=d;let f=n[Qa];return f!==null&&(c[Qa]=f.createEmbeddedView(o)),r1(o,c,e),c}finally{Bn(r)}}function eR(n,t){return!t||t.firstChild===null||H0(n)}function iq(n,t,e,i=!0){let r=t[en];if(p$(r,t,n,e),i){let s=$M(e,n),a=t[wi],c=rN(a,n[el]);c!==null&&f$(r,n[Gs],a,t,c,s)}let o=t[ma];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $0(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(Ws(o)),_a(o)&&rq(o,i);let s=e.type;if(s&8)$0(n,t,e.child,i);else if(s&32){let a=$w(e,t),c;for(;c=a();)i.push(c)}else if(s&16){let a=oN(t,e);if(Array.isArray(a))i.push(...a);else{let c=lu(t[ls]);$0(c[en],c,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function rq(n,t){for(let e=xo;e<n.length;e++){let i=n[e],r=i[en].firstChild;r!==null&&$0(i[en],i,r,t)}n[el]!==n[Lo]&&t.push(n[el])}var wN=[];function oq(n){return n[as]??sq(n)}function sq(n){let t=wN.pop()??Object.create(lq);return t.lView=n,t}function aq(n){n.lView[as]!==n&&(n.lView=null,wN.push(n))}var lq=kt(Ee({},jh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{uv(n.lView)},consumerOnSignalRead(){this.lView[as]=this}});function cq(n){let t=n[as]??Object.create(uq);return t.lView=n,t}var uq=kt(Ee({},jh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let t=lu(n.lView);for(;t&&!EN(t[en]);)t=lu(t);t&&KR(t)},consumerOnSignalRead(){this.lView[as]=this}});function EN(n){return n.type!==2}var dq=100;function SN(n,t=!0,e=0){let i=n[ga],r=i.rendererFactory,o=!1;o||r.begin?.();try{fq(n,e)}catch(s){throw t&&CN(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function fq(n,t){let e=i2();try{FI(!0),XM(n,t);let i=0;for(;cv(n);){if(i===dq)throw new lt(103,!1);i++,XM(n,1)}}finally{FI(e)}}function hq(n,t,e,i){let r=t[jt];if((r&256)===256)return;let o=!1,s=!1;!o&&t[ga].inlineEffectRunner?.flush(),Iw(t);let a=!0,c=null,d=null;o||(EN(n)?(d=oq(t),c=Ug(d)):LA()===null?(a=!1,d=cq(t),c=Ug(d)):t[as]&&(NC(t[as]),t[as]=null));try{ZR(t),k7(n.bindingStartIndex),e!==null&&hN(n,t,e,2,i);let f=(r&3)===3;if(!o)if(f){let _=n.preOrderCheckHooks;_!==null&&M0(t,_,null)}else{let _=n.preOrderHooks;_!==null&&w0(t,_,0,null),sM(t,0)}if(s||pq(t),TN(t,0),n.contentQueries!==null&&yN(n,t),!o)if(f){let _=n.contentCheckHooks;_!==null&&M0(t,_)}else{let _=n.contentHooks;_!==null&&w0(t,_,1),sM(t,1)}T$(n,t);let h=n.components;h!==null&&DN(t,h,0);let v=n.viewQuery;if(v!==null&&YM(2,v,i),!o)if(f){let _=n.viewCheckHooks;_!==null&&M0(t,_)}else{let _=n.viewHooks;_!==null&&w0(t,_,2),sM(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[oM]){for(let _ of t[oM])_();t[oM]=null}o||(t[jt]&=-73)}catch(f){throw o||uv(t),f}finally{d!==null&&(IC(d,c),a&&aq(d)),Rw()}}function TN(n,t){for(let e=O2(n);e!==null;e=A2(e))for(let i=xo;i<e.length;i++){let r=e[i];PN(r,t)}}function pq(n){for(let t=O2(n);t!==null;t=A2(t)){if(!(t[jt]&N0.HasTransplantedViews))continue;let e=t[Vd];for(let i=0;i<e.length;i++){let r=e[i];KR(r)}}}function mq(n,t,e){let i=rc(t,n);PN(i,e)}function PN(n,t){Dw(n)&&XM(n,t)}function XM(n,t){let i=n[en],r=n[jt],o=n[as],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&RC(o)),s||=!1,o&&(o.dirty=!1),n[jt]&=-9217,s)hq(i,n,i.template,n[Hs]);else if(r&8192){TN(n,1);let a=i.components;a!==null&&DN(n,a,1)}}function DN(n,t,e){for(let i=0;i<t.length;i++)mq(n,t[i],e)}function o1(n,t){let e=i2()?64:1088;for(n[ga].changeDetectionScheduler?.notify(t);n;){n[jt]|=e;let i=lu(n);if(F0(n)&&!i)return n;n=i}return null}var fu=class{get rootNodes(){let t=this._lView,e=t[en];return $0(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hs]}set context(t){this._lView[Hs]=t}get destroyed(){return(this._lView[jt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Tr];if(_a(t)){let e=t[R0],i=e?e.indexOf(this):-1;i>-1&&(GM(t,i),O0(e,i))}this._attachedToViewContainer=!1}nN(this._lView[en],this._lView)}onDestroy(t){JR(this._lView,t)}markForCheck(){o1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[jt]&=-129}reattach(){TM(this._lView),this._lView[jt]|=128}detectChanges(){this._lView[jt]|=1024,SN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new lt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=F0(this._lView),e=this._lView[au];e!==null&&!t&&Yw(e,this._lView),eN(this._lView[en],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new lt(902,!1);this._appRef=t;let e=F0(this._lView),i=this._lView[au];i!==null&&!e&&tN(i,this._lView),TM(this._lView)}},hu=(()=>{class n{static{this.__NG_ELEMENT_ID__=_q}}return n})(),gq=hu,vq=class extends gq{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=nq(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new fu(r)}};function _q(){return wv(Pr(),Zt())}function wv(n,t){return n.type&4?new vq(t,n,qd(n,t)):null}var yq=new RegExp(`^(\\d+)*(${F2}|${N2})*(.*)`);function xq(n){let t=n.match(yq),[e,i,r,o]=t,s=i?parseInt(i,10):r,a=[];for(let[c,d,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(d,h)}return[s,...a]}function bq(n){return!n.prev&&n.parent?.type===8}function fM(n){return n.index-Ji}function Cq(n,t){let e=n.i18nNodes;if(e)return e.get(t)}function Ev(n,t,e,i){let r=fM(i),o=Cq(n,r);if(o===void 0){let s=n.data[P9];if(s?.[r])o=wq(s[r],e);else if(t.firstChild===i)o=n.firstChild;else{let a=i.prev===null,c=i.prev??i.parent;if(bq(i)){let d=fM(i.parent);o=zM(n,d)}else{let d=Uo(c,e);if(a)o=d.firstChild;else{let f=fM(c),h=zM(n,f);if(c.type===2&&h){let _=Ww(n,f)+1;o=Sv(_,h)}else o=d.nextSibling}}}}return o}function Sv(n,t){let e=t;for(let i=0;i<n;i++)e=e.nextSibling;return e}function Mq(n,t){let e=n;for(let i=0;i<t.length;i+=2){let r=t[i],o=t[i+1];for(let s=0;s<o;s++)switch(r){case BM.FirstChild:e=e.firstChild;break;case BM.NextSibling:e=e.nextSibling;break}}return e}function wq(n,t){let[e,...i]=xq(n),r;if(e===N2)r=t[ls][Lo];else if(e===F2)r=l$(t[ls][Lo]);else{let o=Number(e);r=Ws(t[o+Ji])}return Mq(r,i)}var Eq=!1;function Sq(n){Eq=n}function Tq(n){let t=n[ma];if(t){let{i18nNodes:e,dehydratedIcuData:i}=t;if(e&&i){let r=n[wi];for(let o of i.values())Pq(r,e,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function Pq(n,t,e){for(let i of e.node.cases[e.case]){let r=t.get(i.index-Ji);r&&Xw(n,r,!1)}}function ON(n){let t=n[rp]??[],i=n[Tr][wi];for(let r of t)Dq(r,i);n[rp]=ko}function Dq(n,t){let e=0,i=n.firstChild;if(i){let r=n.data[W0];for(;e<r;){let o=i.nextSibling;Xw(t,i,!1),i=o,e++}}}function AN(n){ON(n);let t=n[Lo];zs(t)&&q0(t);for(let e=xo;e<n.length;e++)q0(n[e])}function q0(n){Tq(n);let t=n[en];for(let e=Ji;e<t.bindingStartIndex;e++)if(_a(n[e])){let i=n[e];AN(i)}else zs(n[e])&&q0(n[e])}function Oq(n){let t=n._views;for(let e of t){let i=R9(e);i!==null&&i[Lo]!==null&&(zs(i)?q0(i):AN(i))}}function Aq(n,t){let e=[];for(let i of t)for(let r=0;r<(i[k2]??1);r++){let o={data:i,firstChild:null};i[W0]>0&&(o.firstChild=n,n=Sv(i[W0],n)),e.push(o)}return[n,e]}var IN=()=>null;function Iq(n,t){let e=n[rp];return!t||e===null||e.length===0?null:e[0].data[T9]===t?e.shift():(ON(n),null)}function Rq(){IN=Iq}function tR(n,t){return IN(n,t)}var zd=class{},Tv=new it("",{providedIn:"root",factory:()=>!1});var RN=new it(""),NN=new it(""),ZM=class{},Y0=class{};function Nq(n){let t=Error(`No component factory found for ${no(n)}.`);return t[Fq]=n,t}var Fq="ngComponent";var KM=class{resolveComponentFactory(t){throw Nq(t)}},ec=class{static{this.NULL=new KM}},Hd=class{},Pi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>kq()}}return n})();function kq(){let n=Zt(),t=Pr(),e=rc(t.index,n);return(zs(e)?e:n)[wi]}var Lq=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>null})}}return n})();function X0(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=MI(r,a);else if(o==2){let c=a,d=t[++s];i=MI(i,c+": "+d+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var Z0=class extends ec{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=Kl(t);return new Wd(e,this.ngModule)}};function nR(n,t){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:Zl.None;t?e.push({propName:s,templateName:i,isSignal:(a&Zl.SignalBased)!==0}):e.push({propName:s,templateName:i})}return e}function Uq(n){let t=n.toLowerCase();return t==="svg"?b7:t==="math"?C7:null}var Wd=class extends Y0{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=nR(t.inputs,!0);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return nR(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t7(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=Bn(null);try{r=r||this.ngModule;let s=r instanceof io?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new DM(t,s):t,c=a.get(Hd,null);if(c===null)throw new lt(407,!1);let d=a.get(Lq,null),f=a.get(zd,null),h={rendererFactory:c,sanitizer:d,inlineEffectRunner:null,changeDetectionScheduler:f},v=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",C=i?O$(v,i,this.componentDef.encapsulation,a):qw(v,_,Uq(_)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let b=null;C!==null&&(b=Hw(C,a,!0));let x=e1(0,null,null,1,0,null,null,null,null,null,null),D=Cv(null,x,null,w,null,null,h,v,a,null,b);Iw(D);let S,P,W=null;try{let V=this.componentDef,H,$=null;V.findHostDirectiveDefs?(H=[],$=new Map,V.findHostDirectiveDefs(V,H,$),H.push(V)):H=[V];let F=Vq(D,C);W=Bq(F,C,V,H,D,h,v),P=XR(x,Ji),C&&Wq(v,V,C,i),e!==void 0&&jq(P,this.ngContentSelectors,e),S=Hq(W,V,H,$,D,[Gq]),r1(x,D,null)}catch(V){throw W!==null&&UM(W),UM(D),V}finally{Rw()}return new JM(this.componentType,S,qd(P,D),D,P)}finally{Bn(o)}}},JM=class extends ZM{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new fu(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;i1(o[en],o,r,t,e),this.previousInputValues.set(t,e);let s=rc(this._tNode.index,o);o1(s,1)}}get injector(){return new iu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Vq(n,t){let e=n[en],i=Ji;return n[i]=t,gp(e,i,2,"#host",null)}function Bq(n,t,e,i,r,o,s){let a=r[en];zq(i,n,t,s);let c=null;t!==null&&(c=Hw(t,r[Ud]));let d=o.rendererFactory.createRenderer(t,e),f=16;e.signals?f=4096:e.onPush&&(f=64);let h=Cv(r,pN(e),null,f,r[n.index],n,o,d,null,null,c);return a.firstCreatePass&&qM(a,n,i.length-1),Mv(r,h),r[n.index]=h}function zq(n,t,e,i){for(let r of n)t.mergedAttrs=tp(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(X0(t,t.mergedAttrs,!0),e!==null&&lN(i,e,t))}function Hq(n,t,e,i,r,o){let s=Pr(),a=r[en],c=Uo(s,r);gN(a,r,s,e,null,i);for(let f=0;f<e.length;f++){let h=s.directiveStart+f,v=du(r,a,h,s);Ql(v,r)}vN(a,r,s),c&&Ql(c,r);let d=du(r,a,s.directiveStart+s.componentOffset,s);if(n[Hs]=r[Hs]=d,o!==null)for(let f of o)f(d,t);return Kw(a,s,r),d}function Wq(n,t,e,i){if(i)CM(n,e,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=n7(t.selectors[0]);r&&CM(n,e,r),o&&o.length>0&&aN(n,e,o.join(" "))}}function jq(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function Gq(){let n=Pr();pv(Zt()[en],n)}var Vo=(()=>{class n{static{this.__NG_ELEMENT_ID__=$q}}return n})();function $q(){let n=Pr();return kN(n,Zt())}var qq=Vo,FN=class extends qq{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return qd(this._hostTNode,this._hostLView)}get injector(){return new iu(this._hostTNode,this._hostLView)}get parentInjector(){let t=Nw(this._hostTNode,this._hostLView);if(p2(t)){let e=L0(t,this._hostLView),i=k0(t),r=e[en].data[i+8];return new iu(r,e)}else return new iu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=iR(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-xo}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=tR(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,eR(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!v7(t),a;if(s)a=e;else{let C=e||{};a=C.index,i=C.injector,r=C.projectableNodes,o=C.environmentInjector||C.ngModuleRef}let c=s?t:new Wd(Kl(t)),d=i||this.parentInjector;if(!o&&c.ngModule==null){let w=(s?d:this.parentInjector).get(io,null);w&&(o=w)}let f=Kl(c.componentType??{}),h=tR(this._lContainer,f?.id??null),v=h?.firstChild??null,_=c.create(d,r,v,o);return this.insertImpl(_.hostView,a,eR(this._hostTNode,h)),_}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(w7(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=r[Tr],d=new FN(c,c[Gs],c[Tr]);d.detach(d.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return iq(s,r,o,i),t.attachToViewContainerRef(),ER(hM(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=iR(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=GM(this._lContainer,e);i&&(O0(hM(this._lContainer),e),nN(i[en],i))}detach(t){let e=this._adjustIndex(t,-1),i=GM(this._lContainer,e);return i&&O0(hM(this._lContainer),e)!=null?new fu(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function iR(n){return n[R0]}function hM(n){return n[R0]||(n[R0]=[])}function kN(n,t){let e,i=t[n.index];return _a(i)?e=i:(e=_N(i,t,null,n),t[n.index]=e,Mv(t,e)),LN(e,t,n,i),new FN(e,n,t)}function Yq(n,t){let e=n[wi],i=e.createComment(""),r=Uo(t,n),o=rN(e,r);return G0(e,o,i,y$(e,r),!1),i}var LN=UN,s1=()=>!1;function Xq(n,t,e){return s1(n,t,e)}function UN(n,t,e,i){if(n[el])return;let r;e.type&8?r=Ws(i):r=Yq(t,e),n[el]=r}function Zq(n,t,e){if(n[el]&&n[rp])return!0;let i=e[ma],r=t.index-Ji;if(!i||_9(t)||hp(i,r))return!1;let s=zM(i,r),a=i.data[zw]?.[r],[c,d]=Aq(s,a);return n[el]=c,n[rp]=d,!0}function Kq(n,t,e,i){s1(n,e,t)||UN(n,t,e,i)}function Jq(){LN=Kq,s1=Zq}var QM=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},ew=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)a1(t,e).matches!==null&&this.queries[e].setDirty()}},tw=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=sY(t):this.predicate=t}},nw=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},iw=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,Qq(e,o)),this.matchTNodeWithReadOption(t,e,E0(e,t,o,!1,!1))}else i===hu?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,E0(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ri||r===Vo||r===hu&&e.type&4)this.addMatch(e.index,-2);else{let o=E0(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function Qq(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function eY(n,t){return n.type&11?qd(n,t):n.type&4?wv(n,t):null}function tY(n,t,e,i){return e===-1?eY(t,n):e===-2?nY(n,t,i):du(n,n[en],e,t)}function nY(n,t,e){if(e===ri)return qd(t,n);if(e===hu)return wv(t,n);if(e===Vo)return kN(t,n)}function VN(n,t,e,i){let r=t[Qa].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let d=s[c];if(d<0)a.push(null);else{let f=o[d];a.push(tY(t,f,s[c+1],e.metadata.read))}}r.matches=a}return r.matches}function rw(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=VN(n,t,r,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let d=o[a+1],f=t[-c];for(let h=xo;h<f.length;h++){let v=f[h];v[au]===v[Tr]&&rw(v[en],v,d,i)}if(f[Vd]!==null){let h=f[Vd];for(let v=0;v<h.length;v++){let _=h[v];rw(_[en],_,d,i)}}}}}return i}function iY(n,t){return n[Qa].queries[t].queryList}function rY(n,t,e){let i=new LM((e&4)===4);return N$(n,t,i,i.destroy),(t[Qa]??=new ew).queries.push(new QM(i))-1}function oY(n,t,e,i){let r=dr();if(r.firstCreatePass){let o=Pr();aY(r,new tw(t,e,i),o.index),lY(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return rY(r,Zt(),e)}function sY(n){return n.split(",").map(t=>t.trim())}function aY(n,t,e){n.queries===null&&(n.queries=new nw),n.queries.track(new iw(t,e))}function lY(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function a1(n,t){return n.queries.getByIndex(t)}function cY(n,t){let e=n[en],i=a1(e,t);return i.crossesNgTemplate?rw(e,n,t,[]):VN(e,n,i,t)}var rR=new Set;function rl(n){rR.has(n)||(rR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function uY(n){return typeof n=="function"&&n[Ya]!==void 0}function Kd(n,t){rl("NgSignals");let e=YA(n),i=e[Ya];return t?.equal&&(i.equal=t.equal),e.set=r=>FC(i,r),e.update=r=>XA(i,r),e.asReadonly=dY.bind(e),e}function dY(){let n=this[Ya];if(n.readonlyFn===void 0){let t=()=>this();t[Ya]=n,n.readonlyFn=t}return n.readonlyFn}function BN(n){return uY(n)&&typeof n.set=="function"}function fY(n){return Object.getPrototypeOf(n.prototype).constructor}function Yi(n){let t=fY(n.type),e=!0,i=[n];for(;t;){let r;if(Jl(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new lt(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=_0(n.inputs),s.inputTransforms=_0(n.inputTransforms),s.declaredInputs=_0(n.declaredInputs),s.outputs=_0(n.outputs);let a=r.hostBindings;a&&vY(n,a);let c=r.viewQuery,d=r.contentQueries;if(c&&mY(n,c),d&&gY(n,d),hY(n,r),bG(n.outputs,r.outputs),Jl(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Yi&&(e=!1)}}t=Object.getPrototypeOf(t)}pY(i)}function hY(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function pY(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=tp(r.hostAttrs,e=tp(e,r.hostAttrs))}}function _0(n){return n===kd?{}:n===ko?[]:n}function mY(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function gY(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function vY(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function l1(n){let t=n.inputConfig,e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];Array.isArray(r)&&r[3]&&(e[i]=r[3])}n.inputTransforms=e}var tc=class{},op=class{};var ow=class extends tc{constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Z0(this);let o=NR(t);this._bootstrapComponents=K2(o.bootstrap),this._r3Injector=M2(t,e,[{provide:tc,useValue:this},{provide:ec,useValue:this.componentFactoryResolver},...i],no(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},sw=class extends op{constructor(t){super(),this.moduleType=t}create(t){return new ow(this.moduleType,t,[])}};var K0=class extends tc{constructor(t){super(),this.componentFactoryResolver=new Z0(this),this.instance=null;let e=new np([...t.providers,{provide:tc,useValue:this},{provide:ec,useValue:this.componentFactoryResolver}],t.parent||Tw(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Pv(n,t,e=null){return new K0({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}function zN(n){return c1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function _Y(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function c1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ol(n,t,e){return n[t]=e}function Dv(n,t){return n[t]}function js(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function jd(n,t,e,i){let r=js(n,t,e);return js(n,t+1,i)||r}function HN(n,t,e,i,r){let o=jd(n,t,e,i);return js(n,t+2,r)||o}function Ov(n,t,e,i,r,o){let s=jd(n,t,e,i);return jd(n,t+2,r,o)||s}function vp(n){return(n.flags&32)===32}function yY(n,t,e,i,r,o,s,a,c){let d=t.consts,f=gp(t,n,4,s||null,a||null);n1(t,e,f,Bd(d,c)),pv(t,f);let h=f.tView=e1(2,f,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d,null);return t.queries!==null&&(t.queries.template(t,f),h.queries=t.queries.embeddedTView(f)),f}function xY(n,t,e,i,r,o,s,a,c,d){let f=e+Ji,h=t.firstCreatePass?yY(f,t,n,i,r,o,s,a,c):t.data[f];mu(h,!1);let v=WN(t,n,h,e);hv()&&xv(t,n,v,h),Ql(v,n);let _=_N(v,n,v,h);return n[f]=_,Mv(n,_),Xq(_,h,n),av(h)&&Jw(t,n,h),c!=null&&Qw(n,h,d),h}function ue(n,t,e,i,r,o,s,a){let c=Zt(),d=dr(),f=Bd(d.consts,o);return xY(c,d,n,t,e,i,r,f,s,a),ue}var WN=jN;function jN(n,t,e,i){return oc(!0),t[wi].createComment("")}function bY(n,t,e,i){let r=t[ma],o=!r||dp()||vp(e)||hp(r,i);if(oc(o),o)return jN(n,t,e,i);let s=r.data[S9]?.[i]??null;s!==null&&e.tView!==null&&e.tView.ssrId===null&&(e.tView.ssrId=s);let a=Ev(r,n,t,e);gv(r,i,a);let c=Ww(r,i);return Sv(c,a)}function CY(){WN=bY}var Rd=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Rd||{}),GN=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>new n})}}return n})(),aw=class n{constructor(){this.ngZone=Me(zn),this.scheduler=Me(zd),this.errorHandler=Me(tl,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Rd.EarlyRead,Rd.Write,Rd.MixedReadWrite,Rd.Read]}execute(){this.executing=!0;for(let t of n.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[t]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(i){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>new n})}},lw=class{constructor(t,e,i,r){this.impl=t,this.hooks=e,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function u1(n,t){!t?.injector&&g7(u1);let e=t?.injector??Me(bo);return Kh(e)?(rl("NgAfterNextRender"),wY(n,e,t,!0)):EY}function MY(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function wY(n,t,e,i){let r=t.get(GN);r.impl??=t.get(aw);let o=e?.phase??Rd.MixedReadWrite,s=e?.manualCleanup!==!0?t.get(kw):null,a=new lw(r.impl,MY(n,o),i,s);return r.impl.register(a),a}var EY={destroy(){}};function Xi(n,t,e,i){let r=Zt(),o=dv();if(js(r,o,t)){let s=dr(),a=fv();X$(a,r,n,t,e,i)}return Xi}function $N(n,t,e,i){return js(n,dv(),e)?t+ru(e)+i:$s}function SY(n,t,e,i,r,o){let s=F7(),a=jd(n,s,e,r);return r2(2),a?t+ru(e)+i+ru(r)+o:$s}function y0(n,t){return n<<17|t<<2}function pu(n){return n>>17&32767}function TY(n){return(n&2)==2}function PY(n,t){return n&131071|t<<17}function cw(n){return n|2}function Gd(n){return(n&131068)>>2}function pM(n,t){return n&-131069|t<<2}function DY(n){return(n&1)===1}function uw(n){return n|1}function OY(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=pu(s),c=Gd(s);n[i]=e;let d=!1,f;if(Array.isArray(e)){let h=e;f=h[1],(f===null||cp(h,f)>0)&&(d=!0)}else f=e;if(r)if(c!==0){let v=pu(n[a+1]);n[i+1]=y0(v,a),v!==0&&(n[v+1]=pM(n[v+1],i)),n[a+1]=PY(n[a+1],i)}else n[i+1]=y0(a,0),a!==0&&(n[a+1]=pM(n[a+1],i)),a=i;else n[i+1]=y0(c,0),a===0?a=i:n[c+1]=pM(n[c+1],i),c=i;d&&(n[i+1]=cw(n[i+1])),oR(n,f,i,!0),oR(n,f,i,!1),AY(t,f,n,i,o),s=y0(a,c),o?t.classBindings=s:t.styleBindings=s}function AY(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&cp(o,t)>=0&&(e[i+1]=uw(e[i+1]))}function oR(n,t,e,i){let r=n[e+1],o=t===null,s=i?pu(r):Gd(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],d=n[s+1];IY(c,t)&&(a=!0,n[s+1]=i?uw(d):cw(d)),s=i?pu(d):Gd(d)}a&&(n[e+1]=i?cw(r):uw(r))}function IY(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?cp(n,t)>=0:!1}function z(n,t,e){let i=Zt(),r=dv();if(js(i,r,t)){let o=dr(),s=fv();t1(o,s,i,n,t,i[wi],e,!1)}return z}function sR(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";i1(n,e,o[s],s,i)}function sl(n,t,e){return qN(n,t,e,!1),sl}function Co(n,t){return qN(n,t,null,!0),Co}function qN(n,t,e,i){let r=Zt(),o=dr(),s=r2(2);if(o.firstUpdatePass&&NY(o,n,s,i),t!==$s&&js(r,s,t)){let a=o.data[gu()];VY(o,a,r,r[wi],n,r[s+1]=BY(t,e),i,s)}}function RY(n,t){return t>=n.expandoStartIndex}function NY(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[gu()],s=RY(n,e);zY(o,i)&&t===null&&!s&&(t=!1),t=FY(r,o,t,i),OY(r,o,t,e,s,i)}}function FY(n,t,e,i){let r=B7(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=mM(null,n,t,e,i),e=sp(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=mM(r,n,t,e,i),o===null){let c=kY(n,t,i);c!==void 0&&Array.isArray(c)&&(c=mM(null,n,t,c[1],i),c=sp(c,t.attrs,i),LY(n,t,i,c))}else o=UY(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function kY(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Gd(i)!==0)return n[pu(i)]}function LY(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[pu(r)]=i}function UY(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=sp(i,s,e)}return sp(i,t.attrs,e)}function mM(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=sp(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function sp(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),WG(n,s,e?!0:t[++o]))}return n===void 0?null:n}function VY(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let c=n.data,d=c[a+1],f=DY(d)?aR(c,t,e,r,Gd(d),s):void 0;if(!J0(f)){J0(o)||TY(d)&&(o=aR(c,null,e,r,a,s));let h=YR(gu(),e);E$(i,s,h,r,o)}}function aR(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let c=n[r],d=Array.isArray(c),f=d?c[1]:c,h=f===null,v=e[r+1];v===$s&&(v=h?ko:void 0);let _=h?iM(v,i):f===i?v:void 0;if(d&&!J0(_)&&(_=iM(c,i)),J0(_)&&(a=_,s))return a;let C=n[r+1];r=s?pu(C):Gd(C)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=iM(c,i))}return a}function J0(n){return n!==void 0}function BY(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=no(Xd(n)))),n}function zY(n,t){return(n.flags&(t?8:16))!==0}function HY(n,t,e,i,r,o){let s=t.consts,a=Bd(s,r),c=gp(t,n,2,i,a);return n1(t,e,c,Bd(s,o)),c.attrs!==null&&X0(c,c.attrs,!1),c.mergedAttrs!==null&&X0(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function p(n,t,e,i){let r=Zt(),o=dr(),s=Ji+n,a=r[wi],c=o.firstCreatePass?HY(s,o,r,t,e,i):o.data[s],d=YN(o,r,c,a,t,n);r[s]=d;let f=av(c);return mu(c,!0),lN(a,d,c),!vp(c)&&hv()&&xv(o,r,d,c),T7()===0&&Ql(d,r),P7(),f&&(Jw(o,r,c),Kw(o,c,r)),i!==null&&Qw(r,c),p}function g(){let n=Pr();Ow()?n2():(n=n.parent,mu(n,!1));let t=n;O7(t)&&I7(),D7();let e=dr();return e.firstCreatePass&&(pv(e,n),Pw(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&$7(t)&&sR(e,t,Zt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&q7(t)&&sR(e,t,Zt(),t.stylesWithoutHost,!1),g}function ne(n,t,e,i){return p(n,t,e,i),g(),ne}var YN=(n,t,e,i,r,o)=>(oc(!0),qw(i,r,d2()));function WY(n,t,e,i,r,o){let s=t[ma],a=!s||dp()||vp(e)||hp(s,o);if(oc(a),a)return qw(i,r,d2());let c=Ev(s,n,t,e);return B2(s,o)&&gv(s,o,c.nextSibling),s&&(T2(e)||P2(c))&&up(e)&&(A7(e),sN(c)),c}function jY(){YN=WY}function GY(n,t,e,i,r){let o=t.consts,s=Bd(o,i),a=gp(t,n,8,"ng-container",s);s!==null&&X0(a,s,!0);let c=Bd(o,r);return n1(t,e,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function vu(n,t,e){let i=Zt(),r=dr(),o=n+Ji,s=r.firstCreatePass?GY(o,r,i,t,e):r.data[o];mu(s,!0);let a=XN(r,i,s,n);return i[o]=a,hv()&&xv(r,i,a,s),Ql(a,i),av(s)&&(Jw(r,i,s),Kw(r,s,i)),e!=null&&Qw(i,s),vu}function _u(){let n=Pr(),t=dr();return Ow()?n2():(n=n.parent,mu(n,!1)),t.firstCreatePass&&(pv(t,n),Pw(n)&&t.queries.elementEnd(n)),_u}function d1(n,t,e){return vu(n,t,e),_u(),d1}var XN=(n,t,e,i)=>(oc(!0),Q2(t[wi],""));function $Y(n,t,e,i){let r,o=t[ma],s=!o||dp()||hp(o,i)||vp(e);if(oc(s),s)return Q2(t[wi],"");let a=Ev(o,n,t,e),c=k9(o,i);return gv(o,i,a),r=Sv(c,a),r}function qY(){XN=$Y}function Xe(){return Zt()}var nu=void 0;function YY(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&i===0?1:5}var XY=["en",[["a","p"],["AM","PM"],nu],[["AM","PM"],nu,nu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nu,"{1} 'at' {0}",nu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",YY],gM={};function Bo(n){let t=ZY(n),e=lR(t);if(e)return e;let i=t.split("-")[0];if(e=lR(i),e)return e;if(i==="en")return XY;throw new lt(701,!1)}function ZN(n){return Bo(n)[Bi.PluralCase]}function lR(n){return n in gM||(gM[n]=Ja.ng&&Ja.ng.common&&Ja.ng.common.locales&&Ja.ng.common.locales[n]),gM[n]}var Bi=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bi||{});function ZY(n){return n.toLowerCase().replace(/_/g,"-")}var Q0="en-US";var KY=Q0;function JY(n){typeof n=="string"&&(KY=n.toLowerCase().replace(/_/g,"-"))}var QY=(n,t,e)=>{};function ee(n,t,e,i){let r=Zt(),o=dr(),s=Pr();return KN(o,r,r[wi],s,n,t,i),ee}function eX(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[I0],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function KN(n,t,e,i,r,o,s){let a=av(i),d=n.firstCreatePass&&bN(n),f=t[Hs],h=xN(t),v=!0;if(i.type&3||s){let w=Uo(i,t),b=s?s(w):w,x=h.length,D=s?P=>s(Ws(P[i.index])):i.index,S=null;if(!s&&a&&(S=eX(n,t,r,i.index)),S!==null){let P=S.__ngLastListenerFn__||S;P.__ngNextListenerFn__=o,S.__ngLastListenerFn__=o,v=!1}else{o=uR(i,t,f,o),QY(w,r,o);let P=e.listen(b,r,o);h.push(o,P),d&&d.push(r,D,x,x+1)}}else o=uR(i,t,f,o);let _=i.outputs,C;if(v&&_!==null&&(C=_[r])){let w=C.length;if(w)for(let b=0;b<w;b+=2){let x=C[b],D=C[b+1],W=t[x][D].subscribe(o),V=h.length;h.push(o,W),d&&d.push(r,i.index,V,-(V+1))}}}function cR(n,t,e,i){let r=Bn(null);try{return fa(6,t,e),e(i)!==!1}catch(o){return CN(n,o),!1}finally{fa(7,t,e),Bn(r)}}function uR(n,t,e,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?rc(n.index,t):t;o1(s,5);let a=cR(t,e,i,o),c=r.__ngNextListenerFn__;for(;c;)a=cR(t,e,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function X(n=1){return H7(n)}function yu(n,t,e,i,r){let o=Zt(),s=$N(o,t,e,i);if(s!==$s){let a=dr(),c=fv();t1(a,c,o,n,s,o[wi],r,!1)}return yu}function JN(n,t,e,i){oY(n,t,e,i)}function QN(n){let t=Zt(),e=dr(),i=o2();Aw(i+1);let r=a1(e,i);if(n.dirty&&M7(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=cY(t,i);n.reset(o,p9),n.notifyOnChanges()}return!0}return!1}function eF(){return iY(Zt(),o2())}function tX(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Di(n){let t=N7();return lv(t,Ji+n)}function y(n,t=""){let e=Zt(),i=dr(),r=n+Ji,o=i.firstCreatePass?gp(i,r,1,t,null):i.data[r],s=tF(i,e,o,t,n);e[r]=s,hv()&&xv(i,e,s,o),mu(o,!1)}var tF=(n,t,e,i,r)=>(oc(!0),J2(t[wi],i));function nX(n,t,e,i,r){let o=t[ma],s=!o||dp()||vp(e)||hp(o,r);return oc(s),s?J2(t[wi],i):Ev(o,n,t,e)}function iX(){tF=nX}function Ie(n){return Et("",n,""),Ie}function Et(n,t,e){let i=Zt(),r=$N(i,n,t,e);return r!==$s&&MN(i,gu(),r),Et}function f1(n,t,e,i,r){let o=Zt(),s=SY(o,n,t,e,i,r);return s!==$s&&MN(o,gu(),s),f1}function Le(n,t,e){BN(t)&&(t=t());let i=Zt(),r=dv();if(js(i,r,t)){let o=dr(),s=fv();t1(o,s,i,n,t,i[wi],e,!1)}return Le}function Ve(n,t){let e=BN(n);return e&&n.set(t),e}function Ue(n,t){let e=Zt(),i=dr(),r=Pr();return KN(i,e,e[wi],r,n,t),Ue}function rX(n,t,e){let i=dr();if(i.firstCreatePass){let r=Jl(n);dw(e,i.data,i.blueprint,r,!0),dw(t,i.data,i.blueprint,r,!1)}}function dw(n,t,e,i,r){if(n=to(n),Array.isArray(n))for(let o=0;o<n.length;o++)dw(n[o],t,e,i,r);else{let o=dr(),s=Zt(),a=Pr(),c=Ld(n)?n:to(n.provide),d=BR(n),f=a.providerIndexes&1048575,h=a.directiveStart,v=a.providerIndexes>>20;if(Ld(n)||!n.multi){let _=new uu(d,r,k),C=_M(c,t,r?f:f+v,h);C===-1?(AM(V0(a,s),o,c),vM(o,n,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(_),s.push(_)):(e[C]=_,s[C]=_)}else{let _=_M(c,t,f+v,h),C=_M(c,t,f,f+v),w=_>=0&&e[_],b=C>=0&&e[C];if(r&&!b||!r&&!w){AM(V0(a,s),o,c);let x=aX(r?sX:oX,e.length,r,i,d);!r&&b&&(e[C].providerFactory=x),vM(o,n,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(x),s.push(x)}else{let x=nF(e[r?C:_],d,!r&&i);vM(o,n,_>-1?_:C,x)}!r&&i&&b&&e[C].componentProviders++}}}function vM(n,t,e,i){let r=Ld(t),o=c7(t);if(r||o){let c=(o?to(t.useClass):t).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let f=d.indexOf(e);f===-1?d.push(e,[i,c]):d[f+1].push(i,c)}else d.push(e,c)}}}function nF(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function _M(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function oX(n,t,e,i){return fw(this.multi,[])}function sX(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=du(e,e[en],this.providerFactory.index,i);o=a.slice(0,s),fw(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],fw(r,o);return o}function fw(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function aX(n,t,e,i,r){let o=new uu(n,e,k);return o.multi=[],o.index=t,o.componentProviders=0,nF(o,r,i&&!e),o}function zi(n,t=[]){return e=>{e.providersResolver=(i,r)=>rX(i,r?r(n):n,t)}}var lX=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=LR(!1,e.type),r=i.length>0?Pv([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=we({token:n,providedIn:"environment",factory:()=>new n(Ae(io))})}}return n})();function Fe(n){rl("NgStandalone"),n.getStandaloneInjector=t=>t.get(lX).getOrCreateStandaloneInjector(n)}function Hi(n,t,e){let i=us()+n,r=Zt();return r[i]===$s?ol(r,i,e?t.call(e):t()):Dv(r,i)}function _i(n,t,e,i){return lF(Zt(),us(),n,t,e,i)}function ya(n,t,e,i,r){return cF(Zt(),us(),n,t,e,i,r)}function h1(n,t,e,i,r,o){return uF(Zt(),us(),n,t,e,i,r,o)}function iF(n,t,e,i,r,o,s){return cX(Zt(),us(),n,t,e,i,r,o,s)}function rF(n,t,e,i,r,o,s,a){let c=us()+n,d=Zt(),f=Ov(d,c,e,i,r,o);return js(d,c+4,s)||f?ol(d,c+5,a?t.call(a,e,i,r,o,s):t(e,i,r,o,s)):Dv(d,c+5)}function oF(n,t,e,i,r,o,s,a,c){let d=us()+n,f=Zt(),h=Ov(f,d,e,i,r,o);return jd(f,d+4,s,a)||h?ol(f,d+6,c?t.call(c,e,i,r,o,s,a):t(e,i,r,o,s,a)):Dv(f,d+6)}function sF(n,t,e,i,r,o,s,a,c,d){let f=us()+n,h=Zt(),v=Ov(h,f,e,i,r,o);return HN(h,f+4,s,a,c)||v?ol(h,f+7,d?t.call(d,e,i,r,o,s,a,c):t(e,i,r,o,s,a,c)):Dv(h,f+7)}function aF(n,t,e,i){return uX(Zt(),us(),n,t,e,i)}function _p(n,t){let e=n[t];return e===$s?void 0:e}function lF(n,t,e,i,r,o){let s=t+e;return js(n,s,r)?ol(n,s+1,o?i.call(o,r):i(r)):_p(n,s+1)}function cF(n,t,e,i,r,o,s){let a=t+e;return jd(n,a,r,o)?ol(n,a+2,s?i.call(s,r,o):i(r,o)):_p(n,a+2)}function uF(n,t,e,i,r,o,s,a){let c=t+e;return HN(n,c,r,o,s)?ol(n,c+3,a?i.call(a,r,o,s):i(r,o,s)):_p(n,c+3)}function cX(n,t,e,i,r,o,s,a,c){let d=t+e;return Ov(n,d,r,o,s,a)?ol(n,d+4,c?i.call(c,r,o,s,a):i(r,o,s,a)):_p(n,d+4)}function uX(n,t,e,i,r,o){let s=t+e,a=!1;for(let c=0;c<r.length;c++)js(n,s++,r[c])&&(a=!0);return a?ol(n,s,i.apply(o,r)):_p(n,s)}function Lr(n,t){let e=dr(),i,r=n+Ji;e.firstCreatePass?(i=dX(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=ou(i.type,!0)),s,a=yo(k);try{let c=U0(!1),d=o();return U0(c),tX(e,Zt(),r,d),d}finally{yo(a)}}function dX(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function p1(n,t,e){let i=n+Ji,r=Zt(),o=lv(r,i);return m1(r,i)?lF(r,us(),t,o.transform,e,o):o.transform(e)}function al(n,t,e,i){let r=n+Ji,o=Zt(),s=lv(o,r);return m1(o,r)?cF(o,us(),t,s.transform,e,i,s):s.transform(e,i)}function Jd(n,t,e,i,r){let o=n+Ji,s=Zt(),a=lv(s,o);return m1(s,o)?uF(s,us(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function m1(n,t){return n[en].data[t].pure}function qs(n,t){return wv(n,t)}var Av=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var dF=new it("");function sc(n){return!!n&&typeof n.then=="function"}function g1(n){return!!n&&typeof n.subscribe=="function"}var Iv=new it(""),fF=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=Me(Iv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(sc(o))e.push(o);else if(g1(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xu=new it("");function fX(){qA(()=>{throw new lt(600,!1)})}function hX(n){return n.isBoundToModule}var pX=10;function mX(n,t,e){try{let i=e();return sc(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var xa=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Me(f9),this.afterRenderManager=Me(GN),this.zonelessEnabled=Me(Tv),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new yn,this.afterTick=new yn,this.componentTypes=[],this.components=[],this.isStable=Me(nl).hasPendingTasks.pipe(mt(e=>!e)),this._injector=Me(io)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof Y0;if(!this._injector.get(fF).done){let v=!r&&RR(e),_=!1;throw new lt(405,_)}let s;r?s=e:s=this._injector.get(ec).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=hX(s)?void 0:this._injector.get(tc),c=i||s.selector,d=s.create(bo.NULL,[],c,a),f=d.location.nativeElement,h=d.injector.get(dF,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),S0(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new lt(101,!1);let e=Bn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Bn(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(Hd,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<pX;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)gX(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>cv(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;S0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(xu,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>S0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new lt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function S0(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var x0;function Rv(n){x0??=new WeakMap;let t=x0.get(n);if(t)return t;let e=n.isStable.pipe(Us(i=>i)).toPromise().then(()=>{});return x0.set(n,e),n.onDestroy(()=>x0?.delete(n)),e}function gX(n,t,e,i){if(!e&&!cv(n))return;SN(n,t,e&&!i?0:1)}var hw=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Nv=(()=>{class n{compileModuleSync(e){return new sw(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=NR(e),o=K2(r.declarations).reduce((s,a)=>{let c=Kl(a);return c&&s.push(new Wd(c)),s},[]);return new hw(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vX=(()=>{class n{constructor(){this.zone=Me(zn),this.changeDetectionScheduler=Me(zd),this.applicationRef=Me(xa)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_X=new it("",{factory:()=>!1});function hF({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new zn(kt(Ee({},mF()),{scheduleInRootZone:e})),[{provide:zn,useFactory:n},{provide:su,multi:!0,useFactory:()=>{let i=Me(vX,{optional:!0});return()=>i.initialize()}},{provide:su,multi:!0,useFactory:()=>{let i=Me(yX);return()=>{i.initialize()}}},t===!0?{provide:RN,useValue:!0}:[],{provide:NN,useValue:e??w2}]}function pF(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=hF({ngZoneFactory:()=>{let r=mF(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&rl("NgZone_CoalesceEvent"),new zn(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return ic([{provide:_X,useValue:!0},{provide:Tv,useValue:!1},i])}function mF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var yX=(()=>{class n{constructor(){this.subscription=new Vi,this.initialized=!1,this.zone=Me(zn),this.pendingTasks=Me(nl)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{zn.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{zn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var xX=(()=>{class n{constructor(){this.appRef=Me(xa),this.taskService=Me(nl),this.ngZone=Me(zn),this.zonelessEnabled=Me(Tv),this.disableScheduling=Me(RN,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Vi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(z0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Me(NN,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kM||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?BI:E2;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(z0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,BI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bX(){return typeof $localize<"u"&&$localize.locale||Q0}var ba=new it("",{providedIn:"root",factory:()=>Me(ba,_n.Optional|_n.SkipSelf)||bX()});var pw=new it("");function b0(n){return!n.moduleRef}function CX(n){let t=b0(n)?n.r3Injector:n.moduleRef.injector,e=t.get(zn);return e.run(()=>{b0(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(tl,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),b0(n)){let o=()=>t.destroy(),s=n.platformInjector.get(pw);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pw);s.add(o),n.moduleRef.onDestroy(()=>{S0(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return mX(i,e,()=>{let o=t.get(fF);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(ba,Q0);if(JY(s||Q0),b0(n)){let a=t.get(xa);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return MX(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function MX(n,t){let e=n.injector.get(xa);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new lt(-403,!1);t.push(n)}var T0=null;function wX(n=[],t){return bo.create({name:t,providers:[{provide:ov,useValue:"platform"},{provide:pw,useValue:new Set([()=>T0=null])},...n]})}function EX(n=[]){if(T0)return T0;let t=wX(n);return T0=t,fX(),SX(t),t}function SX(n){n.get(Vw,null)?.forEach(e=>e())}var Ys=(()=>{class n{static{this.__NG_ELEMENT_ID__=TX}}return n})();function TX(n){return PX(Pr(),Zt(),(n&16)===16)}function PX(n,t,e){if(up(n)&&!e){let i=rc(n.index,t);return new fu(i,i)}else if(n.type&175){let i=t[ls];return new fu(i,t)}return null}var mw=class{constructor(){}supports(t){return zN(t)}create(t){return new gw(t)}},DX=(n,t)=>t,gw=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||DX}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<dR(i,r,o)?e:i,a=dR(s,r,o),c=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let d=a-r,f=c-r;if(d!=f){for(let v=0;v<d;v++){let _=v<o.length?o[v]:o[v]=0,C=_+v;f<=C&&C<d&&(o[v]=_+1)}let h=s.previousIndex;o[h]=f-d}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!zN(t))throw new lt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,_Y(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new vw(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new ev),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ev),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},vw=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},_w=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},ev=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new _w,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dR(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var yw=class{constructor(){}supports(t){return t instanceof Map||c1(t)}create(){return new xw}},xw=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||c1(t)))throw new lt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new bw(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},bw=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function fR(){return new v1([new mw])}var v1=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:fR})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||fR()),deps:[[n,new rv,new lp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new lt(901,!1)}}return n})();function hR(){return new _1([new yw])}var _1=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:hR})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||hR()),deps:[[n,new rv,new lp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new lt(901,!1)}}return n})();function gF(n){try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=EX(i),o=[hF({}),{provide:zd,useExisting:xX},...e||[]],s=new K0({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return CX({r3Injector:s.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}}var pR=!1;function OX(){pR||(pR=!0,I9(),jY(),iX(),qY(),CY(),Jq(),Rq(),R$())}function AX(n,t){return Rv(n)}function vF(){return ic([{provide:p0,useFactory:()=>{let n=!0;return Kh()&&(n=!!Me(Yd,{optional:!0})?.get(U2,null)),n&&rl("NgHydration"),n}},{provide:su,useValue:()=>{Sq(!1),Kh()&&Me(p0)&&(IX(),OX())},multi:!0},{provide:H2,useFactory:()=>Kh()&&Me(p0)},{provide:xu,useFactory:()=>{if(Kh()&&Me(p0)){let n=Me(xa),t=Me(bo);return()=>{AX(n,t).then(()=>{Oq(n)})}}return()=>{}},multi:!0}])}function IX(){let n=fp(),t;for(let e of n.body.childNodes)if(e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===O9){t=e;break}if(!t)throw new lt(-507,!1)}function ac(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Qd(n,t){rl("NgSignals");let e=jA(n);return t?.equal&&(e[Ya].equal=t.equal),e}function ds(n){let t=Bn(null);try{return n()}finally{Bn(t)}}function _F(n){let t=Kl(n);if(!t)return null;let e=new Wd(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var EF=null;function dl(){return EF}function SF(n){EF??=n}var Wv=class{};var Zi=new it(""),O1=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>Me(RX),providedIn:"platform"})}}return n})(),TF=new it(""),RX=(()=>{class n extends O1{constructor(){super(),this._doc=Me(Zi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dl().getBaseHref(this._doc)}onPopState(e){let i=dl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=dl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function A1(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function yF(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function cl(n){return n&&n[0]!=="?"?"?"+n:n}var fl=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>Me(I1),providedIn:"root"})}}return n})(),PF=new it(""),I1=(()=>{class n extends fl{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Me(Zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return A1(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+cl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+cl(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+cl(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(Ae(O1),Ae(PF,8))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),DF=(()=>{class n extends fl{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=A1(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+cl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+cl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(Ae(O1),Ae(PF,8))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),nf=(()=>{class n{constructor(e){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=kX(yF(xF(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+cl(i))}normalize(e){return n.stripTrailingSlash(FX(this._basePath,xF(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+cl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+cl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=cl}static{this.joinWithSlash=A1}static{this.stripTrailingSlash=yF}static{this.\u0275fac=function(i){return new(i||n)(Ae(fl))}}static{this.\u0275prov=we({token:n,factory:()=>NX(),providedIn:"root"})}}return n})();function NX(){return new nf(Ae(fl))}function FX(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function xF(n){return n.replace(/\/index.html$/,"")}function kX(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var ef=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(ef||{}),ro=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ro||{}),pi=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(pi||{}),zo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(zo||{}),lc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function LX(n){return Bo(n)[Bi.LocaleId]}function UX(n,t,e){let i=Bo(n),r=[i[Bi.DayPeriodsFormat],i[Bi.DayPeriodsStandalone]],o=fs(r,t);return fs(o,e)}function VX(n,t,e){let i=Bo(n),r=[i[Bi.DaysFormat],i[Bi.DaysStandalone]],o=fs(r,t);return fs(o,e)}function BX(n,t,e){let i=Bo(n),r=[i[Bi.MonthsFormat],i[Bi.MonthsStandalone]],o=fs(r,t);return fs(o,e)}function zX(n,t){let i=Bo(n)[Bi.Eras];return fs(i,t)}function Fv(n,t){let e=Bo(n);return fs(e[Bi.DateFormat],t)}function kv(n,t){let e=Bo(n);return fs(e[Bi.TimeFormat],t)}function Lv(n,t){let i=Bo(n)[Bi.DateTimeFormat];return fs(i,t)}function Gv(n,t){let e=Bo(n),i=e[Bi.NumberSymbols][t];if(typeof i>"u"){if(t===lc.CurrencyDecimal)return e[Bi.NumberSymbols][lc.Decimal];if(t===lc.CurrencyGroup)return e[Bi.NumberSymbols][lc.Group]}return i}var HX=ZN;function OF(n){if(!n[Bi.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Bi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function WX(n){let t=Bo(n);return OF(t),(t[Bi.ExtraData][2]||[]).map(i=>typeof i=="string"?y1(i):[y1(i[0]),y1(i[1])])}function jX(n,t,e){let i=Bo(n);OF(i);let r=[i[Bi.ExtraData][0],i[Bi.ExtraData][1]],o=fs(r,t)||[];return fs(o,e)||[]}function fs(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function y1(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var GX=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Uv={},$X=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ul=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ul||{}),qn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(qn||{}),$n=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}($n||{});function er(n,t,e,i){let r=tZ(n);t=ll(e,t)||t;let s=[],a;for(;t;)if(a=$X.exec(t),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;t=f}else{s.push(t);break}let c=r.getTimezoneOffset();i&&(c=IF(i,c),r=eZ(r,i,!0));let d="";return s.forEach(f=>{let h=JX(f);d+=h?h(r,e,c):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function jv(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function ll(n,t){let e=LX(n);if(Uv[e]??={},Uv[e][t])return Uv[e][t];let i="";switch(t){case"shortDate":i=Fv(n,zo.Short);break;case"mediumDate":i=Fv(n,zo.Medium);break;case"longDate":i=Fv(n,zo.Long);break;case"fullDate":i=Fv(n,zo.Full);break;case"shortTime":i=kv(n,zo.Short);break;case"mediumTime":i=kv(n,zo.Medium);break;case"longTime":i=kv(n,zo.Long);break;case"fullTime":i=kv(n,zo.Full);break;case"short":let r=ll(n,"shortTime"),o=ll(n,"shortDate");i=Vv(Lv(n,zo.Short),[r,o]);break;case"medium":let s=ll(n,"mediumTime"),a=ll(n,"mediumDate");i=Vv(Lv(n,zo.Medium),[s,a]);break;case"long":let c=ll(n,"longTime"),d=ll(n,"longDate");i=Vv(Lv(n,zo.Long),[c,d]);break;case"full":let f=ll(n,"fullTime"),h=ll(n,"fullDate");i=Vv(Lv(n,zo.Full),[f,h]);break}return i&&(Uv[e][t]=i),i}function Vv(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Xs(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function qX(n,t){return Xs(n,3).substring(0,t)}function Qi(n,t,e=0,i=!1,r=!1){return function(o,s){let a=YX(n,o);if((e>0||a>-e)&&(a+=e),n===qn.Hours)a===0&&e===-12&&(a=12);else if(n===qn.FractionalSeconds)return qX(a,t);let c=Gv(s,lc.MinusSign);return Xs(a,t,c,i,r)}}function YX(n,t){switch(n){case qn.FullYear:return t.getFullYear();case qn.Month:return t.getMonth();case qn.Date:return t.getDate();case qn.Hours:return t.getHours();case qn.Minutes:return t.getMinutes();case qn.Seconds:return t.getSeconds();case qn.FractionalSeconds:return t.getMilliseconds();case qn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function yi(n,t,e=ro.Format,i=!1){return function(r,o){return XX(r,o,n,t,e,i)}}function XX(n,t,e,i,r,o){switch(e){case $n.Months:return BX(t,r,i)[n.getMonth()];case $n.Days:return VX(t,r,i)[n.getDay()];case $n.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let d=WX(t),f=jX(t,r,i),h=d.findIndex(v=>{if(Array.isArray(v)){let[_,C]=v,w=s>=_.hours&&a>=_.minutes,b=s<C.hours||s===C.hours&&a<C.minutes;if(_.hours<C.hours){if(w&&b)return!0}else if(w||b)return!0}else if(v.hours===s&&v.minutes===a)return!0;return!1});if(h!==-1)return f[h]}return UX(t,r,i)[s<12?0:1];case $n.Eras:return zX(t,i)[n.getFullYear()<=0?0:1];default:let c=e;throw new Error(`unexpected translation type ${c}`)}}function Bv(n){return function(t,e,i){let r=-1*i,o=Gv(e,lc.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case ul.Short:return(r>=0?"+":"")+Xs(s,2,o)+Xs(Math.abs(r%60),2,o);case ul.ShortGMT:return"GMT"+(r>=0?"+":"")+Xs(s,1,o);case ul.Long:return"GMT"+(r>=0?"+":"")+Xs(s,2,o)+":"+Xs(Math.abs(r%60),2,o);case ul.Extended:return i===0?"Z":(r>=0?"+":"")+Xs(s,2,o)+":"+Xs(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var ZX=0,Hv=4;function KX(n){let t=jv(n,ZX,1).getDay();return jv(n,0,1+(t<=Hv?Hv:Hv+7)-t)}function AF(n){let t=n.getDay(),e=t===0?-3:Hv-t;return jv(n.getFullYear(),n.getMonth(),n.getDate()+e)}function x1(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=AF(e),s=KX(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Xs(r,n,Gv(i,lc.MinusSign))}}function zv(n,t=!1){return function(e,i){let o=AF(e).getFullYear();return Xs(o,n,Gv(i,lc.MinusSign),t)}}var b1={};function JX(n){if(b1[n])return b1[n];let t;switch(n){case"G":case"GG":case"GGG":t=yi($n.Eras,pi.Abbreviated);break;case"GGGG":t=yi($n.Eras,pi.Wide);break;case"GGGGG":t=yi($n.Eras,pi.Narrow);break;case"y":t=Qi(qn.FullYear,1,0,!1,!0);break;case"yy":t=Qi(qn.FullYear,2,0,!0,!0);break;case"yyy":t=Qi(qn.FullYear,3,0,!1,!0);break;case"yyyy":t=Qi(qn.FullYear,4,0,!1,!0);break;case"Y":t=zv(1);break;case"YY":t=zv(2,!0);break;case"YYY":t=zv(3);break;case"YYYY":t=zv(4);break;case"M":case"L":t=Qi(qn.Month,1,1);break;case"MM":case"LL":t=Qi(qn.Month,2,1);break;case"MMM":t=yi($n.Months,pi.Abbreviated);break;case"MMMM":t=yi($n.Months,pi.Wide);break;case"MMMMM":t=yi($n.Months,pi.Narrow);break;case"LLL":t=yi($n.Months,pi.Abbreviated,ro.Standalone);break;case"LLLL":t=yi($n.Months,pi.Wide,ro.Standalone);break;case"LLLLL":t=yi($n.Months,pi.Narrow,ro.Standalone);break;case"w":t=x1(1);break;case"ww":t=x1(2);break;case"W":t=x1(1,!0);break;case"d":t=Qi(qn.Date,1);break;case"dd":t=Qi(qn.Date,2);break;case"c":case"cc":t=Qi(qn.Day,1);break;case"ccc":t=yi($n.Days,pi.Abbreviated,ro.Standalone);break;case"cccc":t=yi($n.Days,pi.Wide,ro.Standalone);break;case"ccccc":t=yi($n.Days,pi.Narrow,ro.Standalone);break;case"cccccc":t=yi($n.Days,pi.Short,ro.Standalone);break;case"E":case"EE":case"EEE":t=yi($n.Days,pi.Abbreviated);break;case"EEEE":t=yi($n.Days,pi.Wide);break;case"EEEEE":t=yi($n.Days,pi.Narrow);break;case"EEEEEE":t=yi($n.Days,pi.Short);break;case"a":case"aa":case"aaa":t=yi($n.DayPeriods,pi.Abbreviated);break;case"aaaa":t=yi($n.DayPeriods,pi.Wide);break;case"aaaaa":t=yi($n.DayPeriods,pi.Narrow);break;case"b":case"bb":case"bbb":t=yi($n.DayPeriods,pi.Abbreviated,ro.Standalone,!0);break;case"bbbb":t=yi($n.DayPeriods,pi.Wide,ro.Standalone,!0);break;case"bbbbb":t=yi($n.DayPeriods,pi.Narrow,ro.Standalone,!0);break;case"B":case"BB":case"BBB":t=yi($n.DayPeriods,pi.Abbreviated,ro.Format,!0);break;case"BBBB":t=yi($n.DayPeriods,pi.Wide,ro.Format,!0);break;case"BBBBB":t=yi($n.DayPeriods,pi.Narrow,ro.Format,!0);break;case"h":t=Qi(qn.Hours,1,-12);break;case"hh":t=Qi(qn.Hours,2,-12);break;case"H":t=Qi(qn.Hours,1);break;case"HH":t=Qi(qn.Hours,2);break;case"m":t=Qi(qn.Minutes,1);break;case"mm":t=Qi(qn.Minutes,2);break;case"s":t=Qi(qn.Seconds,1);break;case"ss":t=Qi(qn.Seconds,2);break;case"S":t=Qi(qn.FractionalSeconds,1);break;case"SS":t=Qi(qn.FractionalSeconds,2);break;case"SSS":t=Qi(qn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Bv(ul.Short);break;case"ZZZZZ":t=Bv(ul.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Bv(ul.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Bv(ul.Long);break;default:return null}return b1[n]=t,t}function IF(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function QX(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function eZ(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),o=IF(t,r);return QX(n,i*(o-r))}function tZ(n){if(bF(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return jv(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(GX))return nZ(i)}let t=new Date(n);if(!bF(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function nZ(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,c=Number(n[6]||0),d=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,c,d),t}function bF(n){return n instanceof Date&&!isNaN(n.valueOf())}var RF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:function(i){let r=null;return i?r=new i:r=(o=>new rZ(o))(Ae(ba)),r},providedIn:"root"})}}return n})();function iZ(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}var rZ=(()=>{class n extends RF{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(HX(i||this.locale)(e)){case ef.Zero:return"zero";case ef.One:return"one";case ef.Two:return"two";case ef.Few:return"few";case ef.Many:return"many";default:return"other"}}static{this.\u0275fac=function(i){return new(i||n)(Ae(ba))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function $v(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var C1=/\s+/,CF=[],hs=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=CF,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(C1):CF}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(C1):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(C1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)(k(ri),k(Pi))}}static{this.\u0275dir=Gt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var M1=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xn=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new M1(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),MF(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);MF(o,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(k(Vo),k(hu),k(v1))}}static{this.\u0275dir=Gt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function MF(n,t){n.context.$implicit=t.item}var zt=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new w1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){wF("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){wF("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(k(Vo),k(hu))}}static{this.\u0275dir=Gt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),w1=class{constructor(){this.$implicit=null,this.ngIf=null}};function wF(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${no(t)}'.`)}var NF=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:va.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)(k(ri),k(_1),k(Pi))}}static{this.\u0275dir=Gt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),hl=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)(k(Vo))}}static{this.\u0275dir=Gt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[xr]})}}return n})();function R1(n,t){return new lt(2100,!1)}var E1=class{createSubscription(t,e){return ds(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){ds(()=>t.unsubscribe())}},S1=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},oZ=new S1,sZ=new E1,FF=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(sc(e))return oZ;if(g1(e))return sZ;throw R1(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)(k(Ys,16))}}static{this.\u0275pipe=nc({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var aZ="mediumDate",lZ=new it(""),cZ=new it(""),bu=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let s=i??this.defaultOptions?.dateFormat??aZ,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return er(e,s,o||this.locale,a)}catch(s){throw R1(n,s.message)}}static{this.\u0275fac=function(i){return new(i||n)(k(ba,16),k(lZ,24),k(cZ,24))}}static{this.\u0275pipe=nc({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),uZ=/#/g,qv=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(e==null)return"";if(typeof i!="object"||i===null)throw R1(n,i);let o=iZ(e,Object.keys(i),this._localization,r);return i[o].replace(uZ,e.toString())}static{this.\u0275fac=function(i){return new(i||n)(k(RF,16))}}static{this.\u0275pipe=nc({name:"i18nPlural",type:n,pure:!0,standalone:!0})}}return n})();var st=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})(),N1="browser",dZ="server";function rf(n){return n===N1}function yp(n){return n===dZ}var kF=(()=>{class n{static{this.\u0275prov=we({token:n,providedIn:"root",factory:()=>rf(Me(kr))?new T1(Me(Zi),window):new P1})}}return n})(),T1=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=fZ(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function fZ(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var P1=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},tf=class{};var bp=class{},Cp=class{},Ca=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var k1=class{encodeKey(t){return LF(t)}encodeValue(t){return LF(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function hZ(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}var pZ=/%(\d[a-f0-9])/gi,mZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function LF(n){return encodeURIComponent(n).replace(pZ,(t,e)=>mZ[e]??t)}function Yv(n){return`${n}`}var ps=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new k1,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=hZ(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Yv):[Yv(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Yv(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Yv(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var L1=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function gZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function UF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function VF(n){return typeof Blob<"u"&&n instanceof Blob}function BF(n){return typeof FormData<"u"&&n instanceof FormData}function vZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var xp=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(gZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ca,this.context??=new L1,!this.params)this.params=new ps,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||UF(this.body)||VF(this.body)||BF(this.body)||vZ(this.body)?this.body:this.body instanceof ps?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||BF(this.body)?null:VF(this.body)?this.body.type||null:UF(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ps?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,d=t.headers||this.headers,f=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(d=Object.keys(t.setHeaders).reduce((v,_)=>v.set(_,t.setHeaders[_]),d)),t.setParams&&(f=Object.keys(t.setParams).reduce((v,_)=>v.set(_,t.setParams[_]),f)),new n(e,i,s,{params:f,headers:d,context:h,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},uc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(uc||{}),Mp=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new Ca,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Zv=class n extends Mp{constructor(t={}){super(t),this.type=uc.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Cu=class n extends Mp{constructor(t={}){super(t),this.type=uc.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},cc=class extends Mp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},JF=200,_Z=204;function F1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Yn=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof xp)o=e;else{let c;r.headers instanceof Ca?c=r.headers:c=new Ca(r.headers);let d;r.params&&(r.params instanceof ps?d=r.params:d=new ps({fromObject:r.params})),o=new xp(e,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=yt(o).pipe(Ka(c=>this.handler.handle(c)));if(e instanceof xp||r.observe==="events")return s;let a=s.pipe(di(c=>c instanceof Cu));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(mt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(mt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(mt(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(mt(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new ps().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,F1(r,i))}post(e,i,r={}){return this.request("POST",e,F1(r,i))}put(e,i,r={}){return this.request("PUT",e,F1(r,i))}static{this.\u0275fac=function(i){return new(i||n)(Ae(bp))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),yZ=/^\)\]\}',?\n/,xZ="X-Request-URL";function zF(n){if(n.url)return n.url;let t=xZ.toLocaleLowerCase();return n.headers.get(t)}var U1=(()=>{class n{constructor(){this.fetchImpl=Me(V1,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=Me(zn)}handle(e){return new Wt(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(B1,o=>i.error(new cc({error:o}))),()=>r.abort()})}doRequest(e,i,r){return Xc(this,null,function*(){let o=this.createRequestInit(e),s;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,Ee({signal:i},o)));bZ(_),r.next({type:uc.Sent}),s=yield _}catch(_){r.error(new cc({error:_,status:_.status??0,statusText:_.statusText,url:e.urlWithParams,headers:_.headers}));return}let a=new Ca(s.headers),c=s.statusText,d=zF(s)??e.urlWithParams,f=s.status,h=null;if(e.reportProgress&&r.next(new Zv({headers:a,status:f,statusText:c,url:d})),s.body){let _=s.headers.get("content-length"),C=[],w=s.body.getReader(),b=0,x,D,S=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Xc(this,null,function*(){for(;;){let{done:W,value:V}=yield w.read();if(W)break;if(C.push(V),b+=V.length,e.reportProgress){D=e.responseType==="text"?(D??"")+(x??=new TextDecoder).decode(V,{stream:!0}):void 0;let H=()=>r.next({type:uc.DownloadProgress,total:_?+_:void 0,loaded:b,partialText:D});S?S.run(H):H()}}}));let P=this.concatChunks(C,b);try{let W=s.headers.get("Content-Type")??"";h=this.parseBody(e,P,W)}catch(W){r.error(new cc({error:W,headers:new Ca(s.headers),status:s.status,statusText:s.statusText,url:zF(s)??e.urlWithParams}));return}}f===0&&(f=h?JF:0),f>=200&&f<300?(r.next(new Cu({body:h,headers:a,status:f,statusText:c,url:d})),r.complete()):r.error(new cc({error:h,headers:a,status:f,statusText:c,url:d}))})}parseBody(e,i,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(i).replace(yZ,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>i[o]=s.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),V1=class{};function B1(){}function bZ(n){n.then(B1,B1)}function QF(n,t){return t(n)}function CZ(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function MZ(n,t,e){return(i,r)=>cs(e,()=>t(i,o=>n(o,r)))}var z1=new it(""),H1=new it(""),ek=new it(""),tk=new it("",{providedIn:"root",factory:()=>!0});function wZ(){let n=null;return(t,e)=>{n===null&&(n=(Me(z1,{optional:!0})??[]).reduceRight(CZ,QF));let i=Me(nl);if(Me(tk)){let o=i.add();return n(t,e).pipe($l(()=>i.remove(o)))}else return n(t,e)}}var HF=(()=>{class n extends bp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=Me(nl),this.contributeToStability=Me(tk)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(H1),...this.injector.get(ek,[])]));this.chain=i.reduceRight((r,o)=>MZ(r,o,this.injector),QF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe($l(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Cp),Ae(io))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();var EZ=/^\)\]\}',?\n/;function SZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var WF=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new lt(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ii(i.\u0275loadImpl()):yt(null)).pipe(ur(()=>new Wt(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((w,b)=>s.setRequestHeader(w,b.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let w=e.detectContentTypeHeader();w!==null&&s.setRequestHeader("Content-Type",w)}if(e.responseType){let w=e.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=e.serializeBody(),c=null,d=()=>{if(c!==null)return c;let w=s.statusText||"OK",b=new Ca(s.getAllResponseHeaders()),x=SZ(s)||e.url;return c=new Zv({headers:b,status:s.status,statusText:w,url:x}),c},f=()=>{let{headers:w,status:b,statusText:x,url:D}=d(),S=null;b!==_Z&&(S=typeof s.response>"u"?s.responseText:s.response),b===0&&(b=S?JF:0);let P=b>=200&&b<300;if(e.responseType==="json"&&typeof S=="string"){let W=S;S=S.replace(EZ,"");try{S=S!==""?JSON.parse(S):null}catch(V){S=W,P&&(P=!1,S={error:V,text:S})}}P?(o.next(new Cu({body:S,headers:w,status:b,statusText:x,url:D||void 0})),o.complete()):o.error(new cc({error:S,headers:w,status:b,statusText:x,url:D||void 0}))},h=w=>{let{url:b}=d(),x=new cc({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:b||void 0});o.error(x)},v=!1,_=w=>{v||(o.next(d()),v=!0);let b={type:uc.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(b.total=w.total),e.responseType==="text"&&s.responseText&&(b.partialText=s.responseText),o.next(b)},C=w=>{let b={type:uc.UploadProgress,loaded:w.loaded};w.lengthComputable&&(b.total=w.total),o.next(b)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",_),a!==null&&s.upload&&s.upload.addEventListener("progress",C)),s.send(a),o.next({type:uc.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",_),a!==null&&s.upload&&s.upload.removeEventListener("progress",C)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(Ae(tf))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),nk=new it(""),TZ="XSRF-TOKEN",PZ=new it("",{providedIn:"root",factory:()=>TZ}),DZ="X-XSRF-TOKEN",OZ=new it("",{providedIn:"root",factory:()=>DZ}),Kv=class{},AZ=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=$v(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(Ae(Zi),Ae(kr),Ae(PZ))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function IZ(n,t){let e=n.url.toLowerCase();if(!Me(nk)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=Me(Kv).getToken(),r=Me(OZ);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var W1=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(W1||{});function ik(n,t){return{\u0275kind:n,\u0275providers:t}}function j1(...n){let t=[Yn,WF,HF,{provide:bp,useExisting:HF},{provide:Cp,useFactory:()=>Me(U1,{optional:!0})??Me(WF)},{provide:H1,useValue:IZ,multi:!0},{provide:nk,useValue:!0},{provide:Kv,useClass:AZ}];for(let e of n)t.push(...e.\u0275providers);return ic(t)}var jF=new it("");function RZ(){return ik(W1.LegacyInterceptors,[{provide:jF,useFactory:wZ},{provide:H1,useExisting:jF,multi:!0}])}function rk(){return ik(W1.Fetch,[U1,{provide:Cp,useExisting:U1}])}var ok=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({providers:[j1(RZ())]})}}return n})();var NZ=new it(""),GF="b",$F="h",qF="s",YF="st",XF="u",ZF="rt",Xv=new it(""),FZ=["GET","HEAD"];function kZ(n,t){let _=Me(Xv),{isCacheActive:e}=_,i=Ng(_,["isCacheActive"]),{transferCache:r,method:o}=n;if(!e||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!FZ.includes(o)||!i.includeRequestsWithAuthHeaders&&LZ(n)||i.filter?.(n)===!1)return t(n);let s=Me(Yd),a=Me(NZ,{optional:!0}),c=yp(Me(kr));if(a&&!c)throw new lt(2803,!1);let d=c&&a?zZ(n.url,a):n.url,f=VZ(n,d),h=s.get(f,null),v=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(v=r.includeHeaders),h){let{[GF]:C,[ZF]:w,[$F]:b,[qF]:x,[YF]:D,[XF]:S}=h,P=C;switch(w){case"arraybuffer":P=new TextEncoder().encode(C).buffer;break;case"blob":P=new Blob([C]);break}let W=new Ca(b);return yt(new Cu({body:P,headers:W,status:x,statusText:D,url:S}))}return t(n).pipe(fi(C=>{C instanceof Cu&&c&&s.set(f,{[GF]:C.body,[$F]:UZ(C.headers,v),[qF]:C.status,[YF]:C.statusText,[XF]:d,[ZF]:n.responseType})}))}function LZ(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function UZ(n,t){if(!t)return{};let e={};for(let i of t){let r=n.getAll(i);r!==null&&(e[i]=r)}return e}function KF(n){return[...n.keys()].sort().map(t=>`${t}=${n.getAll(t)}`).join("&")}function VZ(n,t){let{params:e,method:i,responseType:r}=n,o=KF(e),s=n.serializeBody();s instanceof URLSearchParams?s=KF(s):typeof s!="string"&&(s="");let a=[i,r,t,s,o].join("|"),c=BZ(a);return c}function BZ(n){let t=0;for(let e of n)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function sk(n){return[{provide:Xv,useFactory:()=>(rl("NgHttpTransferCache"),Ee({isCacheActive:!0},n))},{provide:ek,useValue:kZ,multi:!0,deps:[Yd,Xv]},{provide:xu,multi:!0,useFactory:()=>{let t=Me(xa),e=Me(Xv);return()=>{Rv(t).then(()=>{e.isCacheActive=!1})}}}]}function zZ(n,t){let e=new URL(n,"resolve://").origin,i=t[e];return i?n.replace(e,i):n}var q1=class extends Wv{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Y1=class n extends q1{static makeCurrent(){SF(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=HZ();return e==null?null:WZ(e)}resetBaseElement(){wp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $v(document.cookie,t)}},wp=null;function HZ(){return wp=wp||document.querySelector("base"),wp?wp.getAttribute("href"):null}function WZ(n){return new URL(n,document.baseURI).pathname}var jZ=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),X1=new it(""),uk=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new lt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(Ae(X1),Ae(zn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),Jv=class{constructor(t){this._doc=t}},G1="ng-app-id",dk=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yp(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${G1}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(G1),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(G1,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(Ae(Zi),Ae(mv),Ae(Bw,8),Ae(kr))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),$1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},J1=/%COMP%/g,fk="%COMP%",GZ=`_nghost-${fk}`,$Z=`_ngcontent-${fk}`,qZ=!0,YZ=new it("",{providedIn:"root",factory:()=>qZ});function XZ(n){return $Z.replace(J1,n)}function ZZ(n){return GZ.replace(J1,n)}function hk(n,t){return t.map(e=>e.replace(J1,n))}var ak=(()=>{class n{constructor(e,i,r,o,s,a,c,d=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=yp(a),this.defaultRenderer=new Ep(e,s,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===pa.ShadowDom&&(i=kt(Ee({},i),{encapsulation:pa.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof Qv?r.applyToHost(e):r instanceof Sp&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case pa.Emulated:o=new Qv(c,d,i,this.appId,f,s,a,h);break;case pa.ShadowDom:return new Z1(c,d,e,i,s,a,this.nonce,h);default:o=new Sp(c,d,i,f,s,a,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(Ae(uk),Ae(dk),Ae(mv),Ae(YZ),Ae(Zi),Ae(kr),Ae(zn),Ae(Bw))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),Ep=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS($1[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(lk(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(lk(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new lt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=$1[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=$1[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(va.DashCase|va.Important)?t.style.setProperty(e,i,r&va.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&va.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=dl().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function lk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Z1=class extends Ep{constructor(t,e,i,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=hk(r.id,r.styles);for(let f of d){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sp=class extends Ep{constructor(t,e,i,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?hk(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qv=class extends Sp{constructor(t,e,i,r,o,s,a,c){let d=r+"-"+i.id;super(t,e,i,o,s,a,c,d),this.contentAttr=XZ(d),this.hostAttr=ZZ(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},KZ=(()=>{class n extends Jv{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(Ae(Zi))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})(),ck=["alt","control","meta","shift"],JZ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},eK=(()=>{class n extends Jv{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dl().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),ck.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),s+=d+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(e,i){let r=JZ[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),ck.forEach(s=>{if(s!==r){let a=QZ[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(Ae(Zi))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function pk(n,t){return gF(Ee({rootComponent:n},tK(t)))}function tK(n){return{appProviders:[...sK,...n?.providers??[]],platformProviders:oK}}function nK(){Y1.makeCurrent()}function iK(){return new tl}function rK(){return R2(document),document}var oK=[{provide:kr,useValue:N1},{provide:Vw,useValue:nK,multi:!0},{provide:Zi,useFactory:rK,deps:[]}];var sK=[{provide:ov,useValue:"root"},{provide:tl,useFactory:iK,deps:[]},{provide:X1,useClass:KZ,multi:!0,deps:[Zi,zn,kr]},{provide:X1,useClass:eK,multi:!0,deps:[Zi]},ak,dk,uk,{provide:Hd,useExisting:ak},{provide:tf,useClass:jZ,deps:[]},[]];var mk=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(Ae(Zi))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var K1=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(K1||{});function gk(...n){let t=[],e=new Set,i=e.has(K1.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of n)e.add(o),r.length&&t.push(r);return ic([[],vF(),e.has(K1.NoHttpTransferCache)||i?[]:sk({}),t])}var vk=(()=>{class n{constructor(){console.log("AuthInterceptor instantiated")}intercept(e,i){let o=["/login","/register","/delete-user","/activate-patient-user"].some(c=>e.url.includes(c)),s=e.headers.has("X-Skip-Interceptor");console.log("Request URL:",e.url),console.log("Is Non-Auth URL:",o),console.log("Skip Interceptor:",s);let a="";if(typeof window<"u"&&localStorage&&(a=localStorage.getItem("token")||"",console.log("Auth Token:",a)),a&&!o&&!s){let c=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return console.log("Auth Request Headers:",c.headers),i.handle(c)}return i.handle(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();var fn="primary",zp=Symbol("RouteTitle"),iE=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function uf(n){return new iE(n)}function lK(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function cK(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ma(n[e],t[e]))return!1;return!0}function Ma(n,t){let e=n?rE(n):void 0,i=t?rE(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!Pk(n[r],t[r]))return!1;return!0}function rE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Pk(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function Dk(n){return n.length>0?n[n.length-1]:null}function fc(n){return qC(n)?n:sc(n)?ii(Promise.resolve(n)):yt(n)}var uK={exact:Ak,subset:Ik},Ok={exact:dK,subset:fK,ignored:()=>!0};function _k(n,t,e){return uK[e.paths](n.root,t.root,e.matrixParams)&&Ok[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function dK(n,t){return Ma(n,t)}function Ak(n,t,e){if(!wu(n.segments,t.segments)||!n_(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Ak(n.children[i],t.children[i],e))return!1;return!0}function fK(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Pk(n[e],t[e]))}function Ik(n,t,e){return Rk(n,t,t.segments,e)}function Rk(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!wu(r,e)||t.hasChildren()||!n_(r,e,i))}else if(n.segments.length===e.length){if(!wu(n.segments,e)||!n_(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Ik(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!wu(n.segments,r)||!n_(n.segments,r,i)||!n.children[fn]?!1:Rk(n.children[fn],t,o,i)}}function n_(n,t,e){return t.every((i,r)=>Ok[e](n[r].parameters,i.parameters))}var ml=class{constructor(t=new Zn([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=uf(this.queryParams),this._queryParamMap}toString(){return mK.serialize(this)}},Zn=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return i_(this)}},Mu=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=uf(this.parameters),this._parameterMap}toString(){return Fk(this)}};function hK(n,t){return wu(n,t)&&n.every((e,i)=>Ma(e.parameters,t[i].parameters))}function wu(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function pK(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===fn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==fn&&(e=e.concat(t(r,i)))}),e}var Hp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>new df,providedIn:"root"})}}return n})(),df=class{parse(t){let e=new sE(t);return new ml(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Tp(t.root,!0)}`,i=_K(t.queryParams),r=typeof t.fragment=="string"?`#${gK(t.fragment)}`:"";return`${e}${i}${r}`}},mK=new df;function i_(n){return n.segments.map(t=>Fk(t)).join("/")}function Tp(n,t){if(!n.hasChildren())return i_(n);if(t){let e=n.children[fn]?Tp(n.children[fn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==fn&&i.push(`${r}:${Tp(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=pK(n,(i,r)=>r===fn?[Tp(n.children[fn],!1)]:[`${r}:${Tp(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[fn]!=null?`${i_(n)}/${e[0]}`:`${i_(n)}/(${e.join("//")})`}}function Nk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function e_(n){return Nk(n).replace(/%3B/gi,";")}function gK(n){return encodeURI(n)}function oE(n){return Nk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function r_(n){return decodeURIComponent(n)}function yk(n){return r_(n.replace(/\+/g,"%20"))}function Fk(n){return`${oE(n.path)}${vK(n.parameters)}`}function vK(n){return Object.entries(n).map(([t,e])=>`;${oE(t)}=${oE(e)}`).join("")}function _K(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${e_(e)}=${e_(r)}`).join("&"):`${e_(e)}=${e_(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var yK=/^[^\/()?;#]+/;function Q1(n){let t=n.match(yK);return t?t[0]:""}var xK=/^[^\/()?;=#]+/;function bK(n){let t=n.match(xK);return t?t[0]:""}var CK=/^[^=?&#]+/;function MK(n){let t=n.match(CK);return t?t[0]:""}var wK=/^[^&#]+/;function EK(n){let t=n.match(wK);return t?t[0]:""}var sE=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zn([],{}):new Zn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[fn]=new Zn(t,e)),i}parseSegment(){let t=Q1(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new lt(4009,!1);return this.capture(t),new Mu(r_(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=bK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Q1(this.remaining);r&&(i=r,this.capture(i))}t[r_(e)]=r_(i)}parseQueryParam(t){let e=MK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=EK(this.remaining);s&&(i=s,this.capture(i))}let r=yk(e),o=yk(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Q1(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new lt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=fn);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[fn]:new Zn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new lt(4011,!1)}};function kk(n){return n.segments.length>0?new Zn([],{[fn]:n}):n}function Lk(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=Lk(r);if(i===fn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new Zn(n.segments,t);return SK(e)}function SK(n){if(n.numberOfChildren===1&&n.children[fn]){let t=n.children[fn];return new Zn(n.segments.concat(t.segments),t.children)}return n}function Eu(n){return n instanceof ml}function TK(n,t,e=null,i=null){let r=Uk(n);return Vk(r,t,e,i)}function Uk(n){let t;function e(o){let s={};for(let c of o.children){let d=e(c);s[c.outlet]=d}let a=new Zn(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=kk(i);return t??r}function Vk(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return eE(r,r,r,e,i);let o=PK(t);if(o.toRoot())return eE(r,r,new Zn([],{}),e,i);let s=DK(o,r,n),a=s.processChildren?Op(s.segmentGroup,s.index,o.commands):zk(s.segmentGroup,s.index,o.commands);return eE(r,s.segmentGroup,a,e,i)}function o_(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Rp(n){return typeof n=="object"&&n!=null&&n.outlets}function eE(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([c,d])=>{o[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let s;n===t?s=e:s=Bk(n,t,e);let a=kk(Lk(s));return new ml(a,o,r)}function Bk(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=Bk(o,t,e)}),new Zn(n.segments,i)}var s_=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&o_(i[0]))throw new lt(4003,!1);let r=i.find(Rp);if(r&&r!==Dk(i))throw new lt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function PK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new s_(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new s_(e,t,i)}var af=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function DK(n,t,e){if(n.isAbsolute)return new af(t,!0,0);if(!e)return new af(t,!1,NaN);if(e.parent===null)return new af(e,!0,0);let i=o_(n.commands[0])?0:1,r=e.segments.length-1+i;return OK(e,r,n.numberOfDoubleDots)}function OK(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new lt(4005,!1);r=i.segments.length}return new af(i,!1,r-o)}function AK(n){return Rp(n[0])?n[0].outlets:{[fn]:n}}function zk(n,t,e){if(n??=new Zn([],{}),n.segments.length===0&&n.hasChildren())return Op(n,t,e);let i=IK(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new Zn(n.segments.slice(0,i.pathIndex),{});return o.children[fn]=new Zn(n.segments.slice(i.pathIndex),n.children),Op(o,0,r)}else return i.match&&r.length===0?new Zn(n.segments,{}):i.match&&!n.hasChildren()?aE(n,t,e):i.match?Op(n,0,r):aE(n,t,e)}function Op(n,t,e){if(e.length===0)return new Zn(n.segments,{});{let i=AK(e),r={};if(Object.keys(i).some(o=>o!==fn)&&n.children[fn]&&n.numberOfChildren===1&&n.children[fn].segments.length===0){let o=Op(n.children[fn],t,e);return new Zn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=zk(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Zn(n.segments,r)}}function IK(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(Rp(a))break;let c=`${a}`,d=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!bk(c,d,s))return o;i+=2}else{if(!bk(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function aE(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Rp(o)){let c=RK(o.outlets);return new Zn(i,c)}if(r===0&&o_(e[0])){let c=n.segments[t];i.push(new Mu(c.path,xk(e[0]))),r++;continue}let s=Rp(o)?o.outlets[fn]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&o_(a)?(i.push(new Mu(s,xk(a))),r+=2):(i.push(new Mu(s,{})),r++)}return new Zn(i,{})}function RK(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=aE(new Zn([],{}),0,i))}),t}function xk(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function bk(n,t,e){return n==e.path&&Ma(t,e.parameters)}var Ap="imperative",br=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(br||{}),ms=class{constructor(t,e){this.id=t,this.url=e}},ff=class extends ms{constructor(t,e,i="imperative",r=null){super(t,e),this.type=br.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ks=class extends ms{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=br.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Wo||{}),a_=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(a_||{}),pl=class extends ms{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=br.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dc=class extends ms{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=br.NavigationSkipped}},Np=class extends ms{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=br.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},l_=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lE=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cE=class extends ms{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=br.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},uE=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dE=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fE=class{constructor(t){this.route=t,this.type=br.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hE=class{constructor(t){this.route=t,this.type=br.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pE=class{constructor(t){this.snapshot=t,this.type=br.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mE=class{constructor(t){this.snapshot=t,this.type=br.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gE=class{constructor(t){this.snapshot=t,this.type=br.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vE=class{constructor(t){this.snapshot=t,this.type=br.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},c_=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=br.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Fp=class{},hf=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function NK(n,t){return n.providers&&!n._injector&&(n._injector=Pv(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Zs(n){return n.outlet||fn}function FK(n,t){let e=n.filter(i=>Zs(i)===t);return e.push(...n.filter(i=>Zs(i)!==t)),e}function Wp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var _E=class{get injector(){return Wp(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new jp(this.rootInjector),this.attachRef=null}},jp=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new _E(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(Ae(io))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),u_=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=yE(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=yE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=xE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return xE(t,this._root).map(e=>e.value)}};function yE(n,t){if(n===t.value)return t;for(let e of t.children){let i=yE(n,e);if(i)return i}return null}function xE(n,t){if(n===t.value)return[t];for(let e of t.children){let i=xE(n,e);if(i.length)return i.unshift(t),i}return[]}var Ho=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function sf(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var d_=class extends u_{constructor(t,e){super(t),this.snapshot=e,DE(this,t)}toString(){return this.snapshot.toString()}};function Hk(n){let t=kK(n),e=new Fi([new Mu("",{})]),i=new Fi({}),r=new Fi({}),o=new Fi({}),s=new Fi(""),a=new tr(e,i,o,s,r,fn,n,t.root);return a.snapshot=t.root,new d_(new Ho(a,[]),t)}function kK(n){let t={},e={},i={},r="",o=new lf([],t,i,r,e,fn,n,null,{});return new h_("",new Ho(o,[]))}var tr=class{constructor(t,e,i,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(mt(d=>d[zp]))??yt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(mt(t=>uf(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(mt(t=>uf(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function f_(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:Ee(Ee({},t.params),n.params),data:Ee(Ee({},t.data),n.data),resolve:Ee(Ee(Ee(Ee({},n.data),t.data),r?.data),n._resolvedData)}:i={params:Ee({},n.params),data:Ee({},n.data),resolve:Ee(Ee({},n.data),n._resolvedData??{})},r&&jk(r)&&(i.resolve[zp]=r.title),i}var lf=class{get title(){return this.data?.[zp]}constructor(t,e,i,r,o,s,a,c,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=uf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=uf(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},h_=class extends u_{constructor(t,e){super(e),this.url=t,DE(this,e)}toString(){return Wk(this._root)}};function DE(n,t){t.value._routerState=n,t.children.forEach(e=>DE(n,e))}function Wk(n){let t=n.children.length>0?` { ${n.children.map(Wk).join(", ")} } `:"";return`${n.value}${t}`}function tE(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ma(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ma(t.params,e.params)||n.paramsSubject.next(e.params),cK(t.url,e.url)||n.urlSubject.next(e.url),Ma(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function bE(n,t){let e=Ma(n.params,t.params)&&hK(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||bE(n.parent,t.parent))}function jk(n){return typeof n.title=="string"||n.title===null}var OE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fn,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=Me(jp),this.location=Me(Vo),this.changeDetector=Me(Ys),this.inputBinder=Me(v_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new lt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new lt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new lt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new lt(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new CE(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Gt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xr]})}}return n})(),CE=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===tr?this.route:t===jp?this.childContexts:this.parent.get(t,e)}},v_=new it(""),Ck=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=eu([i.queryParams,i.params,i.data]).pipe(ur(([o,s,a],c)=>(a=Ee(Ee(Ee({},o),s),a),c===0?yt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=_F(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function LK(n,t,e){let i=kp(n,t._root,e?e._root:void 0);return new d_(i,t)}function kp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=UK(n,t,e);return new Ho(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>kp(n,a)),s}}let i=VK(t.value),r=t.children.map(o=>kp(n,o));return new Ho(i,r)}}function UK(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return kp(n,i,r);return kp(n,i)})}function VK(n){return new tr(new Fi(n.url),new Fi(n.params),new Fi(n.queryParams),new Fi(n.fragment),new Fi(n.data),n.outlet,n.component,n)}var Lp=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},Gk="ngNavigationCancelingError";function p_(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Eu(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=$k(!1,Wo.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function $k(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[Gk]=!0,e.cancellationCode=t,e}function BK(n){return qk(n)&&Eu(n.url)}function qk(n){return!!n&&n[Gk]}var zK=(n,t,e,i)=>mt(r=>(new ME(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),ME=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),tE(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=sf(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=sf(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=sf(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=sf(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new vE(o.value.snapshot))}),t.children.length&&this.forwardEvent(new mE(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(tE(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tE(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},m_=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},cf=class{constructor(t,e){this.component=t,this.route=e}};function HK(n,t,e){let i=n._root,r=t?t._root:null;return Pp(i,r,e,[i.value])}function WK(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function mf(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!_R(n)?n:t.get(n):i}function Pp(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=sf(t);return n.children.forEach(s=>{jK(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ip(a,e.getContext(s),r)),r}function jK(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=GK(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new m_(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pp(n,t,a?a.children:null,i,r):Pp(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new cf(a.outlet.component,s))}else s&&Ip(t,a,r),r.canActivateChecks.push(new m_(i)),o.component?Pp(n,null,a?a.children:null,i,r):Pp(n,null,e,i,r);return r}function GK(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!wu(n.url,t.url);case"pathParamsOrQueryParamsChange":return!wu(n.url,t.url)||!Ma(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bE(n,t)||!Ma(n.queryParams,t.queryParams);case"paramsChange":default:return!bE(n,t)}}function Ip(n,t,e){let i=sf(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?Ip(s,t.children.getContext(o),e):Ip(s,null,e):Ip(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new cf(t.outlet.component,r)):e.canDeactivateChecks.push(new cf(null,r)):e.canDeactivateChecks.push(new cf(null,r))}function Gp(n){return typeof n=="function"}function $K(n){return typeof n=="boolean"}function qK(n){return n&&Gp(n.canLoad)}function YK(n){return n&&Gp(n.canActivate)}function XK(n){return n&&Gp(n.canActivateChild)}function ZK(n){return n&&Gp(n.canDeactivate)}function KK(n){return n&&Gp(n.canMatch)}function Yk(n){return n instanceof Za||n?.name==="EmptyError"}var t_=Symbol("INITIAL_VALUE");function pf(){return ur(n=>eu(n.map(t=>t.pipe(Nr(1),tu(t_)))).pipe(mt(t=>{for(let e of t)if(e!==!0){if(e===t_)return t_;if(e===!1||JK(e))return e}return!0}),di(t=>t!==t_),Nr(1)))}function JK(n){return Eu(n)||n instanceof Lp}function QK(n,t){return ui(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?yt(kt(Ee({},e),{guardsResult:!0})):eJ(s,i,r,n).pipe(ui(a=>a&&$K(a)?tJ(i,o,n,t):yt(a)),mt(a=>kt(Ee({},e),{guardsResult:a})))})}function eJ(n,t,e,i){return ii(n).pipe(ui(r=>sJ(r.component,r.route,e,t,i)),Us(r=>r!==!0,!0))}function tJ(n,t,e,i){return ii(t).pipe(Ka(r=>Pd(iJ(r.route.parent,i),nJ(r.route,i),oJ(n,r.path,e),rJ(n,r.route,e))),Us(r=>r!==!0,!0))}function nJ(n,t){return n!==null&&t&&t(new gE(n)),yt(!0)}function iJ(n,t){return n!==null&&t&&t(new pE(n)),yt(!0)}function rJ(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return yt(!0);let r=i.map(o=>u0(()=>{let s=Wp(t)??e,a=mf(o,s),c=YK(a)?a.canActivate(t,n):cs(s,()=>a(t,n));return fc(c).pipe(Us())}));return yt(r).pipe(pf())}function oJ(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>WK(s)).filter(s=>s!==null).map(s=>u0(()=>{let a=s.guards.map(c=>{let d=Wp(s.node)??e,f=mf(c,d),h=XK(f)?f.canActivateChild(i,n):cs(d,()=>f(i,n));return fc(h).pipe(Us())});return yt(a).pipe(pf())}));return yt(o).pipe(pf())}function sJ(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return yt(!0);let s=o.map(a=>{let c=Wp(t)??r,d=mf(a,c),f=ZK(d)?d.canDeactivate(n,t,e,i):cs(c,()=>d(n,t,e,i));return fc(f).pipe(Us())});return yt(s).pipe(pf())}function aJ(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return yt(!0);let o=r.map(s=>{let a=mf(s,n),c=qK(a)?a.canLoad(t,e):cs(n,()=>a(t,e));return fc(c)});return yt(o).pipe(pf(),Xk(i))}function Xk(n){return zC(fi(t=>{if(typeof t!="boolean")throw p_(n,t)}),mt(t=>t===!0))}function lJ(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return yt(!0);let o=r.map(s=>{let a=mf(s,n),c=KK(a)?a.canMatch(t,e):cs(n,()=>a(t,e));return fc(c)});return yt(o).pipe(pf(),Xk(i))}var Up=class{constructor(t){this.segmentGroup=t||null}},Vp=class extends Error{constructor(t){super(),this.urlTree=t}};function of(n){return En(new Up(n))}function cJ(n){return En(new lt(4e3,!1))}function uJ(n){return En($k(!1,Wo.GuardRejected))}var wE=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return yt(i);if(r.numberOfChildren>1||!r.children[fn])return cJ(`${t.redirectTo}`);r=r.children[fn]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:c,fragment:d,routeConfig:f,url:h,outlet:v,params:_,data:C,title:w}=r,b=cs(o,()=>a({params:_,data:C,queryParams:c,fragment:d,routeConfig:f,url:h,outlet:v,title:w}));if(b instanceof ml)throw new Vp(b);e=b}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Vp(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new ml(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,i,r)}),new Zn(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new lt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},EE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dJ(n,t,e,i,r){let o=Zk(n,t,e);return o.matched?(i=NK(t,i),lJ(i,t,e,r).pipe(mt(s=>s===!0?o:Ee({},EE)))):yt(o)}function Zk(n,t,e){if(t.path==="**")return fJ(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Ee({},EE):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||lK)(e,n,t);if(!r)return Ee({},EE);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?Ee(Ee({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function fJ(n){return{matched:!0,parameters:n.length>0?Dk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Mk(n,t,e,i){return e.length>0&&mJ(n,e,i)?{segmentGroup:new Zn(t,pJ(i,new Zn(e,n.children))),slicedSegments:[]}:e.length===0&&gJ(n,e,i)?{segmentGroup:new Zn(n.segments,hJ(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Zn(n.segments,n.children),slicedSegments:e}}function hJ(n,t,e,i){let r={};for(let o of e)if(__(n,t,o)&&!i[Zs(o)]){let s=new Zn([],{});r[Zs(o)]=s}return Ee(Ee({},i),r)}function pJ(n,t){let e={};e[fn]=t;for(let i of n)if(i.path===""&&Zs(i)!==fn){let r=new Zn([],{});e[Zs(i)]=r}return e}function mJ(n,t,e){return e.some(i=>__(n,t,i)&&Zs(i)!==fn)}function gJ(n,t,e){return e.some(i=>__(n,t,i))}function __(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function vJ(n,t,e){return t.length===0&&!n.children[e]}var SE=class{};function _J(n,t,e,i,r,o,s="emptyOnly"){return new TE(n,t,e,i,r,s,o).recognize()}var yJ=31,TE=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new lt(4002,`'${t.segmentGroup}'`)}recognize(){let t=Mk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(mt(({children:e,rootSnapshot:i})=>{let r=new Ho(i,e),o=new h_("",r),s=TK(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new lf([],Object.freeze({}),Object.freeze(Ee({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,fn,e).pipe(mt(i=>({children:i,rootSnapshot:e})),un(i=>{if(i instanceof Vp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Up?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(mt(s=>s instanceof Ho?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ii(o).pipe(Ka(s=>{let a=i.children[s],c=FK(e,s);return this.processSegmentGroup(t,c,a,s,r)}),eM((s,a)=>(s.push(...a),s)),Gl(null),QC(),ui(s=>{if(s===null)return of(i);let a=Kk(s);return xJ(a),yt(a)}))}processSegment(t,e,i,r,o,s,a){return ii(e).pipe(Ka(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,o,s,a).pipe(un(d=>{if(d instanceof Up)return yt(null);throw d}))),Us(c=>!!c),un(c=>{if(Yk(c))return vJ(i,r,o)?yt(new SE):of(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,c){return Zs(i)!==s&&(s===fn||!__(r,o,i))?of(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,c):of(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:c,parameters:d,consumedSegments:f,positionalParamSegments:h,remainingSegments:v}=Zk(e,r,o);if(!c)return of(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yJ&&(this.allowRedirects=!1));let _=new lf(o,d,Object.freeze(Ee({},this.urlTree.queryParams)),this.urlTree.fragment,wk(r),Zs(r),r.component??r._loadedComponent??null,r,Ek(r)),C=f_(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(C.params),_.data=Object.freeze(C.data);let w=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,_,t);return this.applyRedirects.lineralizeSegments(r,w).pipe(ui(b=>this.processSegment(t,i,e,b.concat(v),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=dJ(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(ur(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ur(({routes:d})=>{let f=i._loadedInjector??t,{parameters:h,consumedSegments:v,remainingSegments:_}=c,C=new lf(v,h,Object.freeze(Ee({},this.urlTree.queryParams)),this.urlTree.fragment,wk(i),Zs(i),i.component??i._loadedComponent??null,i,Ek(i)),w=f_(C,s,this.paramsInheritanceStrategy);C.params=Object.freeze(w.params),C.data=Object.freeze(w.data);let{segmentGroup:b,slicedSegments:x}=Mk(e,v,_,d);if(x.length===0&&b.hasChildren())return this.processChildren(f,d,b,C).pipe(mt(S=>new Ho(C,S)));if(d.length===0&&x.length===0)return yt(new Ho(C,[]));let D=Zs(i)===o;return this.processSegment(f,d,b,x,D?fn:o,!0,C).pipe(mt(S=>new Ho(C,S instanceof Ho?[S]:[])))}))):of(e)))}getChildConfig(t,e,i){return e.children?yt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?yt({routes:e._loadedRoutes,injector:e._loadedInjector}):aJ(t,e,i,this.urlSerializer).pipe(ui(r=>r?this.configLoader.loadChildren(t,e).pipe(fi(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):uJ(e))):yt({routes:[],injector:t})}};function xJ(n){n.sort((t,e)=>t.value.outlet===fn?-1:e.value.outlet===fn?1:t.value.outlet.localeCompare(e.value.outlet))}function bJ(n){let t=n.value.routeConfig;return t&&t.path===""}function Kk(n){let t=[],e=new Set;for(let i of n){if(!bJ(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=Kk(i.children);t.push(new Ho(i.value,r))}return t.filter(i=>!e.has(i))}function wk(n){return n.data||{}}function Ek(n){return n.resolve||{}}function CJ(n,t,e,i,r,o){return ui(s=>_J(n,t,e,i,s.extractedUrl,r,o).pipe(mt(({state:a,tree:c})=>kt(Ee({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function MJ(n,t){return ui(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return yt(e);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let d of Jk(c))s.add(d);let a=0;return ii(s).pipe(Ka(c=>o.has(c)?wJ(c,i,n,t):(c.data=f_(c,c.parent,n).resolve,yt(void 0))),fi(()=>a++),ql(1),ui(c=>a===s.size?yt(e):eo))})}function Jk(n){let t=n.children.map(e=>Jk(e)).flat();return[n,...t]}function wJ(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!jk(r)&&(o[zp]=r.title),EJ(o,n,t,i).pipe(mt(s=>(n._resolvedData=s,n.data=f_(n,n.parent,e).resolve,null)))}function EJ(n,t,e,i){let r=rE(n);if(r.length===0)return yt({});let o={};return ii(r).pipe(ui(s=>SJ(n[s],t,e,i).pipe(Us(),fi(a=>{if(a instanceof Lp)throw p_(new df,a);o[s]=a}))),ql(1),KC(o),un(s=>Yk(s)?eo:En(s)))}function SJ(n,t,e,i){let r=Wp(t)??i,o=mf(n,r),s=o.resolve?o.resolve(t,e):cs(r,()=>o(t,e));return fc(s)}function nE(n){return ur(t=>{let e=n(t);return e?ii(e).pipe(mt(()=>t)):yt(t)})}var Qk=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===fn);return i}getResolvedTitleForRoute(e){return e.data[zp]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>Me(TJ),providedIn:"root"})}}return n})(),TJ=(()=>{class n extends Qk{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(Ae(mk))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$p=new it("",{providedIn:"root",factory:()=>({})}),PJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["ng-component"]],standalone:!0,features:[Fe],decls:1,vars:0,template:function(i,r){i&1&&ne(0,"router-outlet")},dependencies:[OE],encapsulation:2})}}return n})();function AE(n){let t=n.children&&n.children.map(AE),e=t?kt(Ee({},n),{children:t}):Ee({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==fn&&(e.component=PJ),e}var Bp=new it(""),IE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Me(Nv)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return yt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=fc(e.loadComponent()).pipe(mt(e3),fi(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),$l(()=>{this.componentLoaders.delete(e)})),r=new wd(i,()=>new yn).pipe(Md());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return yt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=DJ(i,this.compiler,e,this.onLoadEndListener).pipe($l(()=>{this.childrenLoaders.delete(i)})),s=new wd(o,()=>new yn).pipe(Md());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function DJ(n,t,e,i){return fc(n.loadChildren()).pipe(mt(e3),ui(r=>r instanceof op||Array.isArray(r)?yt(r):ii(t.compileModuleAsync(r))),mt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Bp,[],{optional:!0,self:!0}).flat()),{routes:s.map(AE),injector:o}}))}function OJ(n){return n&&typeof n=="object"&&"default"in n}function e3(n){return OJ(n)?n.default:n}var RE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>Me(AJ),providedIn:"root"})}}return n})(),AJ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),t3=new it(""),n3=new it("");function IJ(n,t,e){let i=n.get(n3),r=n.get(Zi);return n.get(zn).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,s=new Promise(d=>{o=d}),a=r.startViewTransition(()=>(o(),RJ(n))),{onViewTransitionCreated:c}=i;return c&&cs(n,()=>c({transition:a,from:t,to:e})),s})}function RJ(n){return new Promise(t=>{u1({read:()=>setTimeout(t)},{injector:n})})}var NJ=new it(""),NE=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yn,this.transitionAbortSubject=new yn,this.configLoader=Me(IE),this.environmentInjector=Me(io),this.urlSerializer=Me(Hp),this.rootContexts=Me(jp),this.location=Me(nf),this.inputBindingEnabled=Me(v_,{optional:!0})!==null,this.titleStrategy=Me(Qk),this.options=Me($p,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Me(RE),this.createViewTransition=Me(t3,{optional:!0}),this.navigationErrorHandler=Me(NJ,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>yt(void 0),this.rootComponentType=null;let e=r=>this.events.next(new fE(r)),i=r=>this.events.next(new hE(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(kt(Ee(Ee({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Fi({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ap,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(di(o=>o.id!==0),mt(o=>kt(Ee({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ur(o=>{let s=!1,a=!1;return yt(o).pipe(ur(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Wo.SupersededByNewNavigation),eo;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?kt(Ee({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&f!=="reload"){let h="";return this.events.next(new dc(c.id,this.urlSerializer.serialize(c.rawUrl),h,a_.IgnoredSameUrlNavigation)),c.resolve(!1),eo}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return yt(c).pipe(ur(h=>{let v=this.transitions?.getValue();return this.events.next(new ff(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),v!==this.transitions?.getValue()?eo:Promise.resolve(h)}),CJ(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),fi(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=kt(Ee({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let v=new l_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(v)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:v,source:_,restoredState:C,extras:w}=c,b=new ff(h,this.urlSerializer.serialize(v),_,C);this.events.next(b);let x=Hk(this.rootComponentType).snapshot;return this.currentTransition=o=kt(Ee({},c),{targetSnapshot:x,urlAfterRedirects:v,extras:kt(Ee({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,yt(o)}else{let h="";return this.events.next(new dc(c.id,this.urlSerializer.serialize(c.extractedUrl),h,a_.IgnoredByUrlHandlingStrategy)),c.resolve(!1),eo}}),fi(c=>{let d=new lE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),mt(c=>(this.currentTransition=o=kt(Ee({},c),{guards:HK(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),QK(this.environmentInjector,c=>this.events.next(c)),fi(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw p_(this.urlSerializer,c.guardsResult);let d=new cE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),di(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Wo.GuardRejected),!1)),nE(c=>{if(c.guards.canActivateChecks.length)return yt(c).pipe(fi(d=>{let f=new uE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ur(d=>{let f=!1;return yt(d).pipe(MJ(this.paramsInheritanceStrategy,this.environmentInjector),fi({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Wo.NoDataFromResolver)}}))}),fi(d=>{let f=new dE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),nE(c=>{let d=f=>{let h=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(f.routeConfig).pipe(fi(v=>{f.component=v}),mt(()=>{})));for(let v of f.children)h.push(...d(v));return h};return eu(d(c.targetSnapshot.root)).pipe(Gl(null),Nr(1))}),nE(()=>this.afterPreactivation()),ur(()=>{let{currentSnapshot:c,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return f?ii(f).pipe(mt(()=>o)):yt(o)}),mt(c=>{let d=LK(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=kt(Ee({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),fi(()=>{this.events.next(new Fp)}),zK(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Nr(1),fi({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ks(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),_o(this.transitionAbortSubject.pipe(fi(c=>{throw c}))),$l(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Wo.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),un(c=>{if(a=!0,qk(c))this.events.next(new pl(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),BK(c)?this.events.next(new hf(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Np(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let f=cs(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Lp){let{message:h,cancellationCode:v}=p_(this.urlSerializer,f);this.events.next(new pl(o.id,this.urlSerializer.serialize(o.extractedUrl),h,v)),this.events.next(new hf(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let h=e.errorHandler(c);o.resolve(!!h)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return eo}))}))}cancelNavigationTransition(e,i,r){let o=new pl(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FJ(n){return n!==Ap}var kJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>Me(LJ),providedIn:"root"})}}return n})(),PE=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},LJ=(()=>{class n extends PE{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),i3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:()=>Me(UJ),providedIn:"root"})}}return n})(),UJ=(()=>{class n extends i3{constructor(){super(...arguments),this.location=Me(nf),this.urlSerializer=Me(Hp),this.options=Me($p,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Me(RE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ml,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Hk(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof ff)this.stateMemento=this.createStateMemento();else if(e instanceof dc)this.rawUrlTree=i.initialUrl;else if(e instanceof l_){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof Fp?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof pl&&(e.code===Wo.GuardRejected||e.code===Wo.NoDataFromResolver)?this.restoreHistory(i):e instanceof Np?this.restoreHistory(i,!0):e instanceof Ks&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof ml?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=Ee(Ee({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=Ee(Ee({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Dp||{});function r3(n,t){n.events.pipe(di(e=>e instanceof Ks||e instanceof pl||e instanceof Np||e instanceof dc),mt(e=>e instanceof Ks||e instanceof dc?Dp.COMPLETE:(e instanceof pl?e.code===Wo.Redirect||e.code===Wo.SupersededByNewNavigation:!1)?Dp.REDIRECTING:Dp.FAILED),di(e=>e!==Dp.REDIRECTING),Nr(1)).subscribe(()=>{t()})}function VJ(n){throw n}var BJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ct=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Me(Av),this.stateManager=Me(i3),this.options=Me($p,{optional:!0})||{},this.pendingTasks=Me(nl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Me(NE),this.urlSerializer=Me(Hp),this.location=Me(nf),this.urlHandlingStrategy=Me(RE),this._events=new yn,this.errorHandler=this.options.errorHandler||VJ,this.navigated=!1,this.routeReuseStrategy=Me(kJ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Me(Bp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Me(v_,{optional:!0}),this.eventsSubscription=new Vi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof pl&&i.code!==Wo.Redirect&&i.code!==Wo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ks)this.navigated=!0;else if(i instanceof hf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=Ee({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||FJ(r.source)},s);this.scheduleNavigation(a,Ap,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}WJ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ap,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=Ee({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(AE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=Ee(Ee({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let v=r?r.snapshot:this.routerState.snapshot.root;h=Uk(v)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return Vk(h,e,f,d??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Eu(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ap,null,i)}navigate(e,i={skipLocationChange:!1}){return HJ(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=Ee({},BJ):i===!1?r=Ee({},zJ):r=i,Eu(e))return _k(this.currentUrlTree,e,r);let o=this.parseUrl(e);return _k(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,d;s?(a=s.resolve,c=s.reject,d=s.promise):d=new Promise((h,v)=>{a=h,c=v});let f=this.pendingTasks.add();return r3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HJ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new lt(4008,!1)}function WJ(n){return!(n instanceof Fp)&&!(n instanceof hf)}var At=(()=>{class n{constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new yn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=e.events.subscribe(d=>{d instanceof Ks&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Eu(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:Z2(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Eu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(k(ct),k(tr),Fw("tabindex"),k(Pi),k(ri),k(fl))}}static{this.\u0275dir=Gt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&ee("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Xi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ac],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ac],replaceUrl:[2,"replaceUrl","replaceUrl",ac],routerLink:"routerLink"},standalone:!0,features:[l1,xr]})}}return n})(),wa=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,o,s){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new ot,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Ks&&this.update()})}ngAfterContentInit(){yt(this.links.changes,yt(null)).pipe(da()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ii(e).pipe(da()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=jJ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(i){return new(i||n)(k(ct),k(ri),k(Pi),k(Ys),k(At,8))}}static{this.\u0275dir=Gt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&JN(o,At,5),i&2){let s;QN(s=eF())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[xr]})}}return n})();function jJ(n){return!!n.paths}var g_=class{};var GJ=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(di(e=>e instanceof Ks),Ka(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Pv(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ii(r).pipe(da())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=yt(null);let o=r.pipe(ui(s=>s===null?yt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return ii([o,s]).pipe(da())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(Ae(ct),Ae(Nv),Ae(io),Ae(g_),Ae(IE))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),o3=new it(""),$J=(()=>{class n{constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ff?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ks?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof dc&&e.code===a_.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof c_&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new c_(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){uN()}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac})}}return n})();function s3(n,...t){return ic([{provide:Bp,multi:!0,useValue:n},[],{provide:tr,useFactory:a3,deps:[ct]},{provide:xu,multi:!0,useFactory:l3},t.map(e=>e.\u0275providers)])}function a3(n){return n.routerState.root}function qp(n,t){return{\u0275kind:n,\u0275providers:t}}function l3(){let n=Me(bo);return t=>{let e=n.get(xa);if(t!==e.components[0])return;let i=n.get(ct),r=n.get(c3);n.get(FE)===1&&i.initialNavigation(),n.get(u3,null,_n.Optional)?.setUpPreloading(),n.get(o3,null,_n.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var c3=new it("",{factory:()=>new yn}),FE=new it("",{providedIn:"root",factory:()=>1});function qJ(){return qp(2,[{provide:FE,useValue:0},{provide:Iv,multi:!0,deps:[bo],useFactory:t=>{let e=t.get(TF,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(ct),o=t.get(c3);r3(r,()=>{i(!0)}),t.get(NE).afterPreactivation=()=>(i(!0),o.closed?yt(void 0):o),r.initialNavigation()}))}}])}function YJ(){return qp(3,[{provide:Iv,multi:!0,useFactory:()=>{let t=Me(ct);return()=>{t.setUpLocationChangeListener()}}},{provide:FE,useValue:2}])}var u3=new it("");function XJ(n){return qp(0,[{provide:u3,useExisting:GJ},{provide:g_,useExisting:n}])}function ZJ(){return qp(8,[Ck,{provide:v_,useExisting:Ck}])}function KJ(n){let t=[{provide:t3,useValue:IJ},{provide:n3,useValue:Ee({skipNextTransition:!!n?.skipInitialTransition},n)}];return qp(9,t)}var Sk=new it("ROUTER_FORROOT_GUARD"),JJ=[nf,{provide:Hp,useClass:df},ct,jp,{provide:tr,useFactory:a3,deps:[ct]},IE,[]],bt=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[JJ,[],{provide:Bp,multi:!0,useValue:e},{provide:Sk,useFactory:nQ,deps:[[ct,new lp,new rv]]},{provide:$p,useValue:i||{}},i?.useHash?eQ():tQ(),QJ(),i?.preloadingStrategy?XJ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?iQ(i):[],i?.bindToComponentInputs?ZJ().\u0275providers:[],i?.enableViewTransitions?KJ().\u0275providers:[],rQ()]}}static forChild(e){return{ngModule:n,providers:[{provide:Bp,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(Ae(Sk,8))}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})();function QJ(){return{provide:o3,useFactory:()=>{let n=Me(kF),t=Me(zn),e=Me($p),i=Me(NE),r=Me(Hp);return e.scrollOffset&&n.setOffset(e.scrollOffset),new $J(r,i,n,t,e)}}}function eQ(){return{provide:fl,useClass:DF}}function tQ(){return{provide:fl,useClass:I1}}function nQ(n){return"guarded"}function iQ(n){return[n.initialNavigation==="disabled"?YJ().\u0275providers:[],n.initialNavigation==="enabledBlocking"?qJ().\u0275providers:[]]}var Tk=new it("");function rQ(){return[{provide:Tk,useFactory:l3},{provide:xu,multi:!0,useExisting:Tk}]}var x3=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(k(Pi),k(ri))}}static{this.\u0275dir=Gt({type:n})}}return n})(),P_=(()=>{class n extends x3{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,features:[Yi]})}}return n})(),yf=new it(""),oQ={provide:yf,useExisting:yr(()=>Qp),multi:!0},Qp=(()=>{class n extends P_{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&ee("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[zi([oQ]),Yi]})}}return n})(),sQ={provide:yf,useExisting:yr(()=>Ct),multi:!0};function aQ(){let n=dl()?dl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var lQ=new it(""),Ct=(()=>{class n extends x3{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!aQ())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(k(Pi),k(ri),k(lQ,8))}}static{this.\u0275dir=Gt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&ee("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[zi([sQ]),Yi]})}}return n})();function hc(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function b3(n){return n!=null&&typeof n.length=="number"}var Js=new it(""),xf=new it(""),cQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,It=class{static min(t){return uQ(t)}static max(t){return dQ(t)}static required(t){return C3(t)}static requiredTrue(t){return M3(t)}static email(t){return fQ(t)}static minLength(t){return w3(t)}static maxLength(t){return E3(t)}static pattern(t){return S3(t)}static nullValidator(t){return x_(t)}static compose(t){return I3(t)}static composeAsync(t){return R3(t)}};function uQ(n){return t=>{if(hc(t.value)||hc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function dQ(n){return t=>{if(hc(t.value)||hc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function C3(n){return hc(n.value)?{required:!0}:null}function M3(n){return n.value===!0?null:{required:!0}}function fQ(n){return hc(n.value)||cQ.test(n.value)?null:{email:!0}}function w3(n){return t=>hc(t.value)||!b3(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function E3(n){return t=>b3(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function S3(n){if(!n)return x_;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(hc(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function x_(n){return null}function T3(n){return n!=null}function P3(n){return sc(n)?ii(n):n}function D3(n){let t={};return n.forEach(e=>{t=e!=null?Ee(Ee({},t),e):t}),Object.keys(t).length===0?null:t}function O3(n,t){return t.map(e=>e(n))}function hQ(n){return!n.validate}function A3(n){return n.map(t=>hQ(t)?t:e=>t.validate(e))}function I3(n){if(!n)return null;let t=n.filter(T3);return t.length==0?null:function(e){return D3(O3(e,t))}}function zE(n){return n!=null?I3(A3(n)):null}function R3(n){if(!n)return null;let t=n.filter(T3);return t.length==0?null:function(e){let i=O3(e,t).map(P3);return YC(i).pipe(mt(D3))}}function HE(n){return n!=null?R3(A3(n)):null}function d3(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function N3(n){return n._rawValidators}function F3(n){return n._rawAsyncValidators}function kE(n){return n?Array.isArray(n)?n:[n]:[]}function b_(n,t){return Array.isArray(n)?n.includes(t):n===t}function f3(n,t){let e=kE(t);return kE(n).forEach(r=>{b_(e,r)||e.push(r)}),e}function h3(n,t){return kE(t).filter(e=>!b_(n,e))}var C_=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=HE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},so=class extends C_{get formDirective(){return null}get path(){return null}},Su=class extends C_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},M_=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},dye=kt(Ee({},pQ),{"[class.ng-submitted]":"isSubmitted"}),St=(()=>{class n extends M_{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(k(Su,2))}}static{this.\u0275dir=Gt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Co("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Yi]})}}return n})(),Lt=(()=>{class n extends M_{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(k(so,10))}}static{this.\u0275dir=Gt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Co("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Yi]})}}return n})();var Yp="VALID",y_="INVALID",gf="PENDING",Xp="DISABLED",pc=class{},w_=class extends pc{constructor(t,e){super(),this.value=t,this.source=e}},Kp=class extends pc{constructor(t,e){super(),this.pristine=t,this.source=e}},Jp=class extends pc{constructor(t,e){super(),this.touched=t,this.source=e}},vf=class extends pc{constructor(t,e){super(),this.status=t,this.source=e}},LE=class extends pc{constructor(t){super(),this.source=t}},UE=class extends pc{constructor(t){super(),this.source=t}};function WE(n){return(D_(n)?n.validators:n)||null}function mQ(n){return Array.isArray(n)?zE(n):n||null}function jE(n,t){return(D_(t)?t.asyncValidators:n)||null}function gQ(n){return Array.isArray(n)?HE(n):n||null}function D_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function k3(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new lt(1e3,"");if(!i[e])throw new lt(1001,"")}function L3(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new lt(1002,"")})}var _f=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Qd(()=>this.statusReactive()),this.statusReactive=Kd(void 0),this._pristine=Qd(()=>this.pristineReactive()),this.pristineReactive=Kd(!0),this._touched=Qd(()=>this.touchedReactive()),this.touchedReactive=Kd(!1),this._events=new yn,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ds(this.statusReactive)}set status(t){ds(()=>this.statusReactive.set(t))}get valid(){return this.status===Yp}get invalid(){return this.status===y_}get pending(){return this.status==gf}get disabled(){return this.status===Xp}get enabled(){return this.status!==Xp}get pristine(){return ds(this.pristineReactive)}set pristine(t){ds(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return ds(this.touchedReactive)}set touched(t){ds(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(f3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(f3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(h3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(h3(t,this._rawAsyncValidators))}hasValidator(t){return b_(this._rawValidators,t)}hasAsyncValidator(t){return b_(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(kt(Ee({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Jp(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Jp(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(kt(Ee({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Kp(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Kp(!0,i))}markAsPending(t={}){this.status=gf;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new vf(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(kt(Ee({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Xp,this.errors=null,this._forEachChild(r=>{r.disable(kt(Ee({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new w_(this.value,i)),this._events.next(new vf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(kt(Ee({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Yp,this._forEachChild(i=>{i.enable(kt(Ee({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(kt(Ee({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yp||this.status===gf)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new w_(this.value,e)),this._events.next(new vf(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(kt(Ee({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xp:Yp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=gf,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=P3(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new vf(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Xp:this.errors?y_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gf)?gf:this._anyControlsHaveStatus(y_)?y_:Yp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Kp(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Jp(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){D_(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=mQ(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=gQ(this._rawAsyncValidators)}},gs=class extends _f{constructor(t,e,i){super(WE(e),jE(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){L3(this,!0,t),Object.keys(t).forEach(i=>{k3(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var VE=class extends gs{};var em=new it("CallSetDisabledState",{providedIn:"root",factory:()=>O_}),O_="always";function A_(n,t){return[...t.path,n]}function E_(n,t,e=O_){GE(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),_Q(n,t),xQ(n,t),yQ(n,t),vQ(n,t)}function p3(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),T_(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function S_(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function vQ(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function GE(n,t){let e=N3(n);t.validator!==null?n.setValidators(d3(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=F3(n);t.asyncValidator!==null?n.setAsyncValidators(d3(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();S_(t._rawValidators,r),S_(t._rawAsyncValidators,r)}function T_(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=N3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=F3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return S_(t._rawValidators,i),S_(t._rawAsyncValidators,i),e}function _Q(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&U3(n,t)})}function yQ(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&U3(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function U3(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xQ(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function V3(n,t){n==null,GE(n,t)}function bQ(n,t){return T_(n,t)}function B3(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function CQ(n){return Object.getPrototypeOf(n.constructor)===P_}function z3(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function H3(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Ct?e=o:CQ(o)?i=o:r=o}),r||i||e||null}function MQ(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var wQ={provide:so,useExisting:yr(()=>Hn)},Zp=Promise.resolve(),Hn=(()=>{class n extends so{get submitted(){return ds(this.submittedReactive)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=Qd(()=>this.submittedReactive()),this.submittedReactive=Kd(!1),this._directives=new Set,this.ngSubmit=new ot,this.form=new gs({},zE(e),HE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Zp.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),E_(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Zp.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Zp.then(()=>{let i=this._findContainer(e.path),r=new gs({});V3(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Zp.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Zp.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),z3(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)(k(Js,10),k(xf,10),k(em,8))}}static{this.\u0275dir=Gt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&ee("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([wQ]),Yi]})}}return n})();function m3(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function g3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Fn=class extends _f{constructor(t=null,e,i){super(WE(e),jE(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),D_(e)&&(e.nonNullable||e.initialValueIsDefault)&&(g3(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){m3(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){m3(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){g3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var EQ=n=>n instanceof Fn,SQ=(()=>{class n extends so{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return A_(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,features:[Yi]})}}return n})();var TQ={provide:Su,useExisting:yr(()=>Tn)},v3=Promise.resolve(),Tn=(()=>{class n extends Su{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Fn,this._registered=!1,this.name="",this.update=new ot,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=H3(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),B3(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){E_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){v3.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&ac(i);v3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?A_(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(k(so,9),k(Js,10),k(xf,10),k(yf,10),k(Ys,8),k(em,8))}}static{this.\u0275dir=Gt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zi([TQ]),Yi,xr]})}}return n})(),Ut=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Gt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var W3=new it("");var PQ={provide:so,useExisting:yr(()=>Cr)},Cr=(()=>{class n extends so{get submitted(){return ds(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=Qd(()=>this._submittedReactive()),this._submittedReactive=Kd(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ot,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(T_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return E_(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){p3(e.control||null,e,!1),MQ(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),z3(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new LE(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new UE(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(p3(i||null,e),EQ(r)&&(E_(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);V3(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&bQ(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GE(this.form,this),this._oldForm&&T_(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(k(Js,10),k(xf,10),k(em,8))}}static{this.\u0275dir=Gt({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&ee("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([PQ]),Yi,xr]})}}return n})(),DQ={provide:so,useExisting:yr(()=>j3)},j3=(()=>{class n extends SQ{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){G3(this._parent)}static{this.\u0275fac=function(i){return new(i||n)(k(so,13),k(Js,10),k(xf,10))}}static{this.\u0275dir=Gt({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[zi([DQ]),Yi]})}}return n})(),OQ={provide:so,useExisting:yr(()=>bf)},bf=(()=>{class n extends so{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return A_(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){G3(this._parent)}static{this.\u0275fac=function(i){return new(i||n)(k(so,13),k(Js,10),k(xf,10))}}static{this.\u0275dir=Gt({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[zi([OQ]),Yi]})}}return n})();function G3(n){return!(n instanceof j3)&&!(n instanceof Cr)&&!(n instanceof bf)}var AQ={provide:Su,useExisting:yr(()=>Dr)},Dr=(()=>{class n extends Su{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new ot,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=H3(this,o)}ngOnChanges(e){this._added||this._setUpControl(),B3(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return A_(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(k(so,13),k(Js,10),k(xf,10),k(yf,10),k(W3,8))}}static{this.\u0275dir=Gt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[zi([AQ]),Yi,xr]})}}return n})(),IQ={provide:yf,useExisting:yr(()=>Wi),multi:!0};function $3(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function RQ(n){return n.split(":")[0]}var Wi=(()=>{class n extends P_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=$3(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=RQ(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&ee("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zi([IQ]),Yi]})}}return n})(),Oi=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue($3(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(k(ri),k(Pi),k(Wi,9))}}static{this.\u0275dir=Gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),NQ={provide:yf,useExisting:yr(()=>q3),multi:!0};function _3(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function FQ(n){return n.split(":")[0]}var q3=(()=>{class n extends P_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],d=this._getOptionValue(c.value);r.push(d)}}else{let s=i.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let d=this._getOptionValue(c.value);r.push(d)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=FQ(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&ee("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zi([NQ]),Yi]})}}return n})(),Ai=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(_3(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(_3(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(k(ri),k(Pi),k(q3,9))}}static{this.\u0275dir=Gt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function Y3(n){return typeof n=="number"?n:parseInt(n,10)}var I_=(()=>{class n{constructor(){this._validator=x_}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):x_,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Gt({type:n,features:[xr]})}}return n})();var kQ={provide:Js,useExisting:yr(()=>sn),multi:!0},LQ={provide:Js,useExisting:yr(()=>$E),multi:!0},sn=(()=>{class n extends I_{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ac,this.createValidator=e=>C3}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("required",r._enabled?"":null)},inputs:{required:"required"},features:[zi([kQ]),Yi]})}}return n})(),$E=(()=>{class n extends sn{constructor(){super(...arguments),this.createValidator=e=>M3}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("required",r._enabled?"":null)},features:[zi([LQ]),Yi]})}}return n})();var UQ={provide:Js,useExisting:yr(()=>tm),multi:!0},tm=(()=>{class n extends I_{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>Y3(e),this.createValidator=e=>w3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[zi([UQ]),Yi]})}}return n})(),VQ={provide:Js,useExisting:yr(()=>qE),multi:!0},qE=(()=>{class n extends I_{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>Y3(e),this.createValidator=e=>E3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[zi([VQ]),Yi]})}}return n})(),BQ={provide:Js,useExisting:yr(()=>Tu),multi:!0},Tu=(()=>{class n extends I_{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>S3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Fr(n)))(r||n)}})()}static{this.\u0275dir=Gt({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[zi([BQ]),Yi]})}}return n})();var X3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})(),BE=class extends _f{constructor(t,e,i){super(WE(e),jE(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){L3(this,!1,t),t.forEach((i,r)=>{k3(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function y3(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ea=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return y3(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new gs(r,o)}record(e,i=null){let r=this._reduceControls(e);return new VE(r,i)}control(e,i,r){let o={};return this.useNonNullable?(y3(i)?o=i:(o.validators=i,o.asyncValidators=r),new Fn(e,kt(Ee({},o),{nonNullable:!0}))):new Fn(e,i,r)}array(e,i,r){let o=e.map(s=>this._createControl(s));return new BE(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof Fn)return e;if(e instanceof _f)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:em,useValue:e.callSetDisabledState??O_}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({imports:[X3]})}}return n})(),nr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:W3,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:em,useValue:e.callSetDisabledState??O_}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({imports:[X3]})}}return n})();var mc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}login(e,i){let r={email:e,password:i};return this.http.post(`${this.apiUrl}/login`,r,{observe:"response",responseType:"text"})}getRoleFromToken(e){return JSON.parse(atob(e.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]}sendTokenToBackend(e){let i={"X-Skip-Interceptor":"true"};return this.http.post(`${this.apiUrl}/Google`,{token:e},{headers:i,observe:"response",responseType:"text"})}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zQ(n,t){n&1&&(p(0,"p"),y(1," Email is required. "),g())}function HQ(n,t){n&1&&(p(0,"p"),y(1," Please enter a valid email address. "),g())}function WQ(n,t){if(n&1&&(p(0,"div",20),ue(1,zQ,2,0,"p",21)(2,HQ,2,0,"p",21),g()),n&2){let e,i,r=X();T(),z("ngIf",(e=r.loginForm.get("email"))==null||e.errors==null?null:e.errors.required),T(),z("ngIf",(i=r.loginForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function jQ(n,t){n&1&&(p(0,"p"),y(1," Password is required. "),g())}function GQ(n,t){if(n&1&&(p(0,"div",20),ue(1,jQ,2,0,"p",21),g()),n&2){let e,i=X();T(),z("ngIf",(e=i.loginForm.get("password"))==null||e.errors==null?null:e.errors.required)}}function $Q(n,t){if(n&1&&(p(0,"div",20)(1,"p"),y(2),g()()),n&2){let e=X();T(2),Ie(e.loginError)}}var Z3=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i,this.passwordFieldType="password",this.loginForm=new gs({email:new Fn("",[It.required,It.email]),password:new Fn("",It.required)}),this.loginError=null}ngOnInit(){if(typeof document<"u"){let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>this.initializeGoogleSignIn(),document.head.appendChild(e)}}initializeGoogleSignIn(){google.accounts.id.initialize({client_id:"421903046401-5q20kb0ijen3tah9r68ngg2m1kmv66bj.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this)}),google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"})}handleCredentialResponse(e){console.log("Encoded JWT ID token: "+e.credential),this.sendTokenToBackend(e.credential)}sendTokenToBackend(e){this.loginService.sendTokenToBackend(e).subscribe(i=>{let r=i.body;if(r){localStorage.setItem("token",r);let s=JSON.parse(atob(r.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];s==="Admin"?this.router.navigate(["/panel-admin"]):s==="Patient"?this.router.navigate(["/patient-panel"]):s==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",s),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},i=>{i.status===401&&this.router.navigate(["/register"],{queryParams:{token:e}}),console.error("Login failed",i),this.loginError="Invalid email or password"})}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loginService.login(this.loginForm.value.email,this.loginForm.value.password).subscribe(e=>{let i=e.body;if(i){localStorage.setItem("token",i);let o=JSON.parse(atob(i.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];o==="Admin"?this.router.navigate(["/panel-admin"]):o==="Patient"?this.router.navigate(["/patient-panel"]):o==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",o),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},e=>{console.error("Login failed",e),this.loginError="Invalid email or password"})}static{this.\u0275fac=function(i){return new(i||n)(k(mc),k(ct))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-login"]],standalone:!0,features:[Fe],decls:36,vars:6,consts:[[1,"login-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"login-left"],[1,"top"],["src","logo.png","alt","logo"],[3,"ngSubmit","formGroup"],["id","google-signin-button"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["class","error-message",4,"ngIf"],["for","password"],[1,"input-container"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["type","submit",1,"btn","btn-signin"],["routerLink","/register",1,"button"],[1,"login-right"],[1,"login-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"error-message"],[4,"ngIf"]],template:function(i,r){if(i&1&&(p(0,"div",0)(1,"a",1),ne(2,"img",2),g(),p(3,"div",3)(4,"div",4),ne(5,"img",5),p(6,"h2"),y(7,"Hospital Management App"),g()(),p(8,"form",6),ee("ngSubmit",function(){return r.onSubmit()}),ne(9,"div",7),p(10,"option"),y(11,"\u23AF\u23AF\u23AF Or Login with your email \u23AF\u23AF\u23AF"),g(),p(12,"label",8),y(13,"Email"),g(),ne(14,"input",9),ue(15,WQ,3,2,"div",10),p(16,"label",11),y(17,"Password"),g(),p(18,"div",12),ne(19,"input",13),p(20,"img",14),ee("click",function(){return r.togglePasswordVisibility()}),g()(),ue(21,GQ,2,1,"div",10)(22,$Q,3,1,"div",10),p(23,"button",15),y(24,"Login"),g()(),p(25,"p"),y(26," Don't have an account? "),p(27,"a",16),y(28,"Sign Up Now"),g()()(),p(29,"div",17)(30,"div",18)(31,"h3"),y(32,"Why should I login?"),g(),p(33,"p"),y(34," By logging in, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),g(),ne(35,"img",19),g()()()),i&2){let o,s;T(8),z("formGroup",r.loginForm),T(7),z("ngIf",((o=r.loginForm.get("email"))==null?null:o.invalid)&&(((o=r.loginForm.get("email"))==null?null:o.dirty)||((o=r.loginForm.get("email"))==null?null:o.touched))),T(4),z("type",r.passwordFieldType),T(),z("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Zd),T(),z("ngIf",((s=r.loginForm.get("password"))==null?null:s.invalid)&&(((s=r.loginForm.get("password"))==null?null:s.dirty)||((s=r.loginForm.get("password"))==null?null:s.touched))),T(),z("ngIf",r.loginError)}},dependencies:[vt,Ut,Oi,Ai,Ct,St,Lt,sn,nr,Cr,Dr,bt,At,st,zt],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{display:flex;height:100vh}.login-left[_ngcontent-%COMP%], .login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.login-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.login-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.login-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.login-left[_ngcontent-%COMP%]   #google-signin-button[_ngcontent-%COMP%]{margin-top:1rem;background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-right[_ngcontent-%COMP%]{background-image:url(https://online-learning-college.com/wp-content/uploads/2023/01/Qualifications-to-Become-a-Doctor--scaled.jpg);background-size:cover;background-position:center;color:#000}.login-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.login-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.login-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}']})}}return n})();var Pu=class extends Error{};Pu.prototype.name="InvalidTokenError";function qQ(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function YQ(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return qQ(t)}catch{return atob(t)}}function gc(n,t){if(typeof n!="string")throw new Pu("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,i=n.split(".")[e];if(typeof i!="string")throw new Pu(`Invalid token specified: missing part #${e+1}`);let r;try{r=YQ(i)}catch(o){throw new Pu(`Invalid token specified: invalid base64 for part #${e+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new Pu(`Invalid token specified: invalid json for part #${e+1} (${o.message})`)}}var K3=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}register(e,i,r,o){let s={email:e,phoneNumber:i+r,password:o};return console.log("Registering user",s),this.http.post(`${this.apiUrl}/RegisterUserAsPatient`,s,{observe:"response",responseType:"text"}).pipe(fi(a=>{let c=a.body;c&&localStorage.setItem("authToken",c)}))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var J3=(()=>{class n{constructor(e,i,r){this.registerService=e,this.router=i,this.route=r,this.passwordFieldType="password",this.confirmPasswordFieldType="password",this.isModalVisible=!1,this.registerForm=new gs({email:new Fn("",[It.required,It.email]),identifier:new Fn("",It.required),phoneNumber:new Fn("",It.required),password:new Fn("",It.required),confirmPassword:new Fn("",It.required),acceptPolicy:new Fn(!1,It.requiredTrue)})}ngOnInit(){this.route.queryParams.subscribe(e=>{if(Object.keys(e).length>0&&(console.log("Query parameters:",e),e.token)){let i=gc(e.token);i&&i.email&&this.registerForm.get("email")?.setValue(i.email)}})}togglePasswordVisibility(e){e==="password"?this.passwordFieldType=this.passwordFieldType==="password"?"text":"password":e==="confirm-password"&&(this.confirmPasswordFieldType=this.confirmPasswordFieldType==="password"?"text":"password")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}if(this.registerForm.value.password!==this.registerForm.value.confirmPassword){alert("Passwords do not match");return}this.registerService.register(this.registerForm.value.email,this.registerForm.value.identifier,this.registerForm.value.phoneNumber,this.registerForm.value.password).subscribe(e=>{console.log("Registration successful",e),this.router.navigate(["/login"])},e=>{console.error("Registration failed",e),alert("Registration failed - "+e.error)})}openPrivacyPolicy(e){e.preventDefault(),this.isModalVisible=!0,console.log("Modal opened:",this.isModalVisible)}closeModal(){this.isModalVisible=!1,console.log("Modal closed:",this.isModalVisible)}static{this.\u0275fac=function(i){return new(i||n)(k(K3),k(ct),k(tr))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-register"]],standalone:!0,features:[Fe],decls:204,vars:8,consts:[[1,"register-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"register-left"],[1,"top"],["src","logo.png","alt","Hospital Management App Logo"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","identifier"],[1,"identifier-container"],["type","text","id","identifier","formControlName","identifier","placeholder","+1","required","",1,"identifier-input"],["type","tel","id","phone","formControlName","phoneNumber","placeholder","123456789","required",""],[1,"input-container"],["for","password"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["for","confirm-password"],["id","confirm-password","formControlName","confirmPassword","placeholder","******","required","",3,"type"],["type","checkbox","id","acceptPolicy","formControlName","acceptPolicy","required",""],["for","acceptPolicy"],["routerLink","/#",3,"click"],["type","submit",1,"btn","btn-register",3,"disabled"],["routerLink","/login"],[1,"register-right"],[1,"register-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"modal-container"],[1,"modal-content"],[3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"a",1),ne(2,"img",2),g(),p(3,"div",3)(4,"div",4),ne(5,"img",5),p(6,"h2"),y(7,"Hospital Management App"),g()(),p(8,"form",6),ee("ngSubmit",function(){return r.onSubmit()}),p(9,"label",7),y(10,"Email"),g(),ne(11,"input",8),p(12,"label",9),y(13,"Phone Number"),g(),p(14,"div",10),ne(15,"input",11)(16,"input",12),g(),p(17,"div",13)(18,"label",14),y(19,"Password"),g(),ne(20,"input",15),p(21,"img",16),ee("click",function(){return r.togglePasswordVisibility("password")}),g()(),p(22,"div",13)(23,"label",17),y(24,"Confirm Password"),g(),ne(25,"input",18),p(26,"img",16),ee("click",function(){return r.togglePasswordVisibility("confirm-password")}),g()(),p(27,"div",13),ne(28,"input",19),p(29,"label",20),y(30," I accept the "),p(31,"a",21),ee("click",function(s){return r.openPrivacyPolicy(s)}),y(32,"Privacy Policy"),g()()(),p(33,"button",22),y(34,"Register"),g()(),p(35,"p"),y(36,"Already have an account? "),p(37,"a",23),y(38,"Login Now"),g()()(),p(39,"div",24)(40,"div",25)(41,"h3"),y(42,"Why should I register?"),g(),p(43,"p"),y(44," By registering, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),g(),ne(45,"img",26),g()()(),p(46,"div",27)(47,"div",28)(48,"h1"),y(49,"Privacy Policy"),g(),p(50,"p"),y(51,"Last updated: 11 de Dezembro de 2024"),g(),p(52,"section")(53,"h2"),y(54,"Introdu\xE7\xE3o"),g(),p(55,"p"),y(56," No mundo da sa\xFAde, a confidencialidade \xE9 fundamental. A prote\xE7\xE3o de dados de sa\xFAde \xE9 um direito fundamental de cada paciente, consagrado no Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD) (Artigo 4\xBA, n\xBA Artigo 32\xBA). A gest\xE3o manual ou sistemas desatualizados podem levar \xE0 perda de dados, acesso n\xE3o autorizado e incumprimento do RGPD. As consequ\xEAncias podem ser graves: multas elevadas, processos judiciais e danos \xE0 reputa\xE7\xE3o. A nossa equipa \xE9 composta pelos especialistas em seguran\xE7a inform\xE1tica e gest\xE3o de dados, Vasco Sousa, Jo\xE3o Pereira e Tiago Sousa e pela advogada especializada em prote\xE7\xE3o de dados, Maria Medina e hoje estamos aqui com o objetivo de apresentar o Hospital Management App, um sistema inovador que garante a gest\xE3o eficiente e segura de recursos e a marca\xE7\xE3o de consultas cir\xFArgicas, com total respeito pela privacidade dos seus pacientes (Artigo 13 e 14\xBA). O Hospital Management App foi concebido com base nos princ\xEDpios de prote\xE7\xE3o de dados desde a conce\xE7\xE3o e por defeito (Artigo 25\xBA) Este minimiza a recolha e o tratamento de dados, utilizando a pseudonimiza\xE7\xE3o para proteger a identidade dos pacientes, encripta todos os dados, garantindo a sua confidencialidade e integridade, controla o acesso aos dados, permitindo apenas a utilizadores autorizados aceder \xE0 informa\xE7\xE3o necess\xE1ria para o desempenho das suas fun\xE7\xF5es e mant\xE9m registos detalhados de todas as opera\xE7\xF5es de tratamento, permitindo auditorias e a demonstra\xE7\xE3o de conformidade com o RGPD (Artigo 24\xBA e 28\xBA) Com o Hospital Management App, pode ter a certeza de que est\xE1 a otimizar os seus processos, reduzindo custos e protegendo os dados sens\xEDveis dos seus pacientes, em total conformidade com o RGPD "),g()(),p(57,"section")(58,"h2"),y(59,"Respons\xE1vel pelo Tratamento de Dados"),g(),p(60,"p")(61,"strong"),y(62,"Nome da Empresa/Organiza\xE7\xE3o:"),g(),y(63," Hospital Management App"),ne(64,"br"),p(65,"strong"),y(66,"Contato:"),g(),y(67," 1211503@isep.ipp.pt"),ne(68,"br"),p(69,"strong"),y(70,"Encarregado de Prote\xE7\xE3o de Dados:"),g(),y(71," Jo\xE3o Pereira "),g()(),p(72,"section")(73,"h2"),y(74,"Dados Pessoais Coletados"),g(),p(75,"ul")(76,"li"),y(77,"Identifica\xE7\xE3o (nome, email, NIF)"),g(),p(78,"li"),y(79,"Dados de contato (n\xFAmero de telem\xF3vel pessoal e de emerg\xEAncia, e-mail)"),g(),p(80,"li"),y(81,"Dados m\xE9dicos (hist\xF3rico de sa\xFAde, alergias)"),g()()(),p(82,"section")(83,"h2"),y(84,"Processamento dos Dados pessoais"),g(),p(85,"p"),y(86,"Os dados passam por diversos tipos de processamento, incluindo:"),g(),p(87,"ul")(88,"li"),y(89,"Recolha: Os dados s\xE3o obtidos atrav\xE9s de diferentes meios, como formul\xE1rios de registo, prontu\xE1rios m\xE9dicos ou sistemas de agendamento."),g(),p(90,"li"),y(91,"Registo: Os dados recolhidos s\xE3o inseridos no Hospital Management App, nos campos apropriados de cada funcionalidade."),g(),p(92,"li"),y(93,"Organiza\xE7\xE3o: Os dados s\xE3o estruturados e categorizados dentro do sistema, de forma l\xF3gica e eficiente, facilitando a sua consulta e utiliza\xE7\xE3o. "),g(),p(94,"li"),y(95,"Consulta: Os dados s\xE3o acedidos e visualizados pelos utilizadores autorizados do Hospital Management App, de acordo com as suas fun\xE7\xF5es e permiss\xF5es. "),g(),p(96,"li"),y(97,"Utiliza\xE7\xE3o: Os dados s\xE3o utilizados para as finalidades espec\xEDficas para as quais foram recolhidos, como a gest\xE3o de informa\xE7\xF5es, o planeamento e agendamento cir\xFArgico, a visualiza\xE7\xE3o do hospital, a garantia da continuidade das opera\xE7\xF5es e a conformidade com o RGPD."),g(),p(98,"li"),y(99,"Quando aplic\xE1vel, apagamento: Os dados s\xE3o eliminados do sistema quando deixam de ser necess\xE1rios para as finalidades para as quais foram recolhidos, ou quando o titular dos dados exerce o seu direito de apagamento (direito a ser esquecido)"),g(),p(100,"p"),y(101,"Todas estas opera\xE7\xF5es respeitam os princ\xEDpios do RGPD, como a limita\xE7\xE3o das finalidades e a integridade e confidencialidade dos dados (Artigo 5.\xBA)"),g()()(),p(102,"section")(103,"h2"),y(104,"Finalidades do Tratamento"),g(),p(105,"p"),y(106,"Utilizamos os seus dados pessoais para:"),g(),p(107,"ul")(108,"li"),y(109,"Gest\xE3o de Informa\xE7\xF5es Essenciais"),g(),p(110,"li"),y(111,"Planeamento e Agendamento Cir\xFArgico"),g()()(),p(112,"section")(113,"h2"),y(114,"Base Legal para o Tratamento"),g(),p(115,"p"),y(116,"O tratamento de dados pessoais pode ser baseado nas seguintes bases legais:"),g(),p(117,"ul")(118,"li"),y(119,"Execu\xE7\xE3o de um contrato"),g(),p(120,"li"),y(121,"Cumprimento de uma obriga\xE7\xE3o legal"),g(),p(122,"li"),y(123,"Consentimento expl\xEDcito (para finalidades espec\xEDficas, como marketing)"),g(),p(124,"li"),y(125,"Interesses leg\xEDtimos da aplica\xE7\xE3o"),g()()(),p(126,"section")(127,"h2"),y(128,"Compartilhamento de Dados"),g(),p(129,"p"),y(130,"Os seus dados podem ser compartilhados com:"),g(),p(131,"ul")(132,"li"),y(133,"Parceiros e prestadores de servi\xE7os que auxiliam na execu\xE7\xE3o das nossas atividades"),g(),p(134,"li"),y(135,"Autoridades legais, quando exigido por lei"),g(),p(136,"li"),y(137,"Familiares quando se encontrar com limita\xE7\xF5es f\xEDsicas e ps\xEDcol\xF3gicas"),g()()(),p(138,"section")(139,"h2"),y(140,"Reten\xE7\xE3o de Dados"),g(),p(141,"p"),y(142," Os seus dados pessoais ser\xE3o armazenados apenas pelo tempo necess\xE1rio para cumprir as finalidades descritas nesta Pol\xEDtica ou conforme exigido por lei. Ap\xF3s o per\xEDodo de reten\xE7\xE3o, os dados ser\xE3o apagados ou anonimizados. "),g()(),p(143,"section")(144,"h2"),y(145,"Direitos do Titular dos Dados"),g(),p(146,"p"),y(147,"Voc\xEA possui os seguintes direitos em rela\xE7\xE3o aos seus dados pessoais:"),g(),p(148,"ul")(149,"li"),y(150,"Acesso aos dados tratados"),g(),p(151,"li"),y(152,"Retifica\xE7\xE3o de dados incorretos ou desatualizados"),g(),p(153,"li"),y(154,"Exclus\xE3o dos dados (direito ao esquecimento)"),g(),p(155,"li"),y(156,"Restri\xE7\xE3o do tratamento"),g(),p(157,"li"),y(158,"Portabilidade dos dados"),g(),p(159,"li"),y(160,"Oposi\xE7\xE3o ao tratamento em determinadas circunst\xE2ncias"),g(),p(161,"li"),y(162,"Retirada do consentimento, quando aplic\xE1vel"),g()(),p(163,"p"),y(164,"Para exercer os seus direitos, entre em contato connosco pelo e-mail "),p(165,"strong"),y(166,"1211503@isep.ipp.pt"),g(),y(167,". "),g()(),p(168,"section")(169,"h2"),y(170,"Transfer\xEAncia Internacional de Dados"),g(),p(171,"p"),y(172," Se houver necessidade de transfer\xEAncia de dados para fora do Espa\xE7o Econ\xF4mico Europeu (EEE), garantiremos que os seus dados estar\xE3o protegidos com medidas adequadas, como cl\xE1usulas contratuais padr\xE3o ou outras bases legais reconhecidas pelo RGPD. "),g()(),p(173,"section")(174,"h2"),y(175,"Seguran\xE7a dos Dados"),g(),p(176,"p"),y(177," Implementamos medidas t\xE9cnicas e organizacionais para proteger os seus dados pessoais contra acessos n\xE3o autorizados, perda, altera\xE7\xE3o ou destrui\xE7\xE3o. "),g()(),p(178,"section")(179,"h2"),y(180,"Altera\xE7\xF5es \xE0 Pol\xEDtica de Privacidade"),g(),p(181,"p"),y(182," Podemos atualizar esta Pol\xEDtica de Privacidade periodicamente. Notificaremos sobre mudan\xE7as significativas, caso necess\xE1rio. "),g()(),p(183,"section")(184,"h2"),y(185,"Reclama\xE7\xF5es"),g(),p(186,"p"),y(187," Se acreditar que os seus direitos foram violados, pode entrar em contato connosco para esclarecimentos. Al\xE9m disso, voc\xEA tem o direito de apresentar uma reclama\xE7\xE3o junto \xE0 autoridade supervisora do seu pa\xEDs. "),g()(),p(188,"section")(189,"h2"),y(190,"Contato"),g(),p(191,"p"),y(192," Para quaisquer d\xFAvidas, entre em contato conosco: "),g(),p(193,"ul")(194,"li")(195,"strong"),y(196,"E-mail:"),g(),y(197," 1211503@isep.ipp.pt"),g(),p(198,"li")(199,"strong"),y(200,"Telefone:"),g(),y(201," +351912345678"),g()()(),p(202,"button",29),ee("click",function(){return r.closeModal()}),y(203,"Close"),g()()()),i&2&&(T(8),z("formGroup",r.registerForm),T(12),z("type",r.passwordFieldType),T(),z("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Zd),T(4),z("type",r.confirmPasswordFieldType),T(),z("src",r.confirmPasswordFieldType==="password"?"eye.png":"eye-slash.png",Zd),T(7),z("disabled",!r.registerForm.valid),T(13),Co("active",r.isModalVisible))},dependencies:[vt,Ut,Ct,Qp,St,Lt,sn,$E,nr,Cr,Dr,bt,At,st],styles:['.register-container[_ngcontent-%COMP%]{display:flex;height:100vh}.register-left[_ngcontent-%COMP%], .register-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.register-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.register-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.register-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.identifier-container[_ngcontent-%COMP%]{display:flex;gap:2px}.identifier-input[_ngcontent-%COMP%]{width:50px}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.register-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]{background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;margin-right:.3rem}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]:hover{background-color:#0056b3}.register-right[_ngcontent-%COMP%]{background-image:url("https://www.verywellhealth.com/thmb/GXgk5oXpQWDe0N_-UHh3Aa_wCqk=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-519516073-962e173b7e2149d69c4f66915fd491f6.jpg");background-size:cover;background-position:center;color:#000}.register-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.register-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.register-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.register-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:none;justify-content:center;align-items:center}.modal-container.active[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:500px;max-width:90%;height:500px;overflow-y:auto}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}input[type=checkbox][_ngcontent-%COMP%]{display:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;padding-left:25px;cursor:pointer;font-size:14px;-webkit-user-select:none;user-select:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:16px;height:16px;border:2px solid #ccc;background-color:#fff;transition:background-color .3s,border-color .3s}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#4caf50;border-color:#4caf50}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:50%;transform:translateY(-50%) rotate(45deg);width:5px;height:10px;border:solid white;border-width:0 2px 2px 0}']})}}return n})();var Q3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-home"]],standalone:!0,features:[Fe],decls:91,vars:0,consts:[[1,"hero"],["src","hero.gif","alt","Hero Background",1,"hero-background"],[1,"logo"],["src","logo.png","alt","Hospital Logo"],[1,"buttons"],["routerLink","/login",1,"btn"],["routerLink","/register",1,"btn"],["src","arrow.png","alt","Hero Image","onclick","document.querySelector('.articles-container').scrollIntoView({ behavior: 'smooth' });",1,"hero-img"],[1,"articles-container"],[1,"articles"],["src","lifestyle.jpg","alt","Article 1 Image"],["routerLink","/"],["src","meds.jpg","alt","Article 2 Image"],["src","stress.jpg","alt","Article 3 Image"],[1,"footer"],[1,"container"],[1,"row"],[1,"footer-col"],["routerLink","/about-us"],["routerLink","/our-services"],["routerLink","/privacy-policy"],["routerLink","/faq"],["routerLink","/patient-portal"],["routerLink","/doctor-directory"],["routerLink","/health-library"],["routerLink","/emergency-services"],[1,"social"],["href","mailto:support@hospital.com"],["href","tel:+1234567890"]],template:function(i,r){i&1&&(p(0,"body")(1,"div",0),ne(2,"img",1),p(3,"div",2),ne(4,"img",3),p(5,"p"),y(6,"Hospital Management App"),g()(),p(7,"div",4)(8,"a",5),y(9,"Login"),g(),p(10,"a",6),y(11,"Register"),g()(),ne(12,"img",7),g(),p(13,"div",8)(14,"h1"),y(15,"Health & Wellness Articles"),g(),p(16,"section",9)(17,"article"),ne(18,"img",10),p(19,"h2"),y(20,"5 Tips for a Healthy Lifestyle"),g(),p(21,"p"),y(22,"Discover essential tips to maintain a healthy lifestyle, including diet, exercise, and mental well-being."),g(),p(23,"a",11),y(24,"Read more"),g()(),p(25,"article"),ne(26,"img",12),p(27,"h2"),y(28,"Understanding Common Medications"),g(),p(29,"p"),y(30,"Learn about the most commonly prescribed medications, their uses, and potential side effects."),g(),p(31,"a",11),y(32,"Read more"),g()(),p(33,"article"),ne(34,"img",13),p(35,"h2"),y(36,"How to Manage Stress Effectively"),g(),p(37,"p"),y(38,"Explore various techniques and strategies to manage stress and improve your overall well-being."),g(),p(39,"a",11),y(40,"Read more"),g()()()()(),p(41,"footer",14)(42,"div",15)(43,"div",16)(44,"div",17)(45,"h4"),y(46,"company"),g(),p(47,"ul")(48,"li")(49,"a",18),y(50,"About Us"),g()(),p(51,"li")(52,"a",19),y(53,"Our Services"),g()(),p(54,"li")(55,"a",20),y(56,"Privacy Policy"),g()()()(),p(57,"div",17)(58,"h4"),y(59,"get help"),g(),p(60,"ul")(61,"li")(62,"a",21),y(63,"FAQ"),g()()()(),p(64,"div",17)(65,"h4"),y(66,"resources"),g(),p(67,"ul")(68,"li")(69,"a",22),y(70,"Patient Portal"),g()(),p(71,"li")(72,"a",23),y(73,"Doctor Directory"),g()(),p(74,"li")(75,"a",24),y(76,"Health Library"),g()(),p(77,"li")(78,"a",25),y(79,"Emergency Services"),g()()()(),p(80,"div",17)(81,"h4"),y(82,"contact us"),g(),p(83,"div",26)(84,"ul")(85,"li")(86,"a",27),y(87,"support@hospital.com"),g()(),p(88,"li")(89,"a",28),y(90,"+351 912345678"),g()()()()()()()())},dependencies:[bt,At],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;box-sizing:border-box;height:100%}.hero[_ngcontent-%COMP%]{position:relative;text-align:center;padding:50px 20px;color:#fff;opacity:.9;height:100vh}.hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;display:flex;align-items:center;max-width:500px;max-height:60px;margin:10px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:20px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5em;font-family:Poppins,sans-serif;padding:0;margin:0;max-width:440px}.buttons[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;max-width:500px;margin:10px;display:flex;align-items:center;justify-content:center}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;margin:0 10px;border:2px solid #ffffff;transition:all .3s;border-radius:0;width:95px;font-family:Poppins,sans-serif;font-size:.8em}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff;color:#333;border-radius:0}.hero-img[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-50%);margin-bottom:1.5rem;height:40px;cursor:pointer;animation:_ngcontent-%COMP%_piscar 3s infinite}h1[_ngcontent-%COMP%]{margin:0;font-size:2.5em;font-family:Poppins,sans-serif}p[_ngcontent-%COMP%]{font-size:1.2em;font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_piscar{0%,to{opacity:1}50%{opacity:0}}.articles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex-wrap:wrap;padding:20px;height:100vh}.articles-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2em;font-family:Poppins,sans-serif;margin-bottom:2rem;color:#fff}.articles[_ngcontent-%COMP%]{width:50vw;height:fit-content;display:grid;grid-template-columns:repeat(3,minmax(200px,1fr));gap:30px;padding:10px;place-items:center}article[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin:2vh 1vw;padding:2vh 1vw;width:100%;height:100%;transition:transform .3s;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden}article[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:5px;flex-shrink:0;margin-bottom:5px}article[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}article[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;color:#333;margin:5px 0;flex-shrink:0;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;flex-grow:1;margin:5px 0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:5px;color:#007bff;text-decoration:none;flex-shrink:0}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#go-to-article[_ngcontent-%COMP%]{position:absolute;top:10px;scroll-margin-top:60px}.container[_ngcontent-%COMP%]{max-width:1170px;margin:auto}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer[_ngcontent-%COMP%]{background-color:#153e4c;padding:70px 0}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]{width:25%;padding:0 15px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;color:#fff;text-transform:capitalize;margin-bottom:35px;font-weight:500;position:relative}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:-10px;background-color:#e91e63;height:2px;box-sizing:border-box;width:50px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#bbb;text-decoration:none;font-weight:300;display:block;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;padding-left:8px}@media (max-width: 767px){.footer-col[_ngcontent-%COMP%]{width:50%;margin-bottom:30px}}@media (max-width: 574px){.footer-col[_ngcontent-%COMP%]{width:100%}}']})}}return n})();var eL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-not-found"]],standalone:!0,features:[Fe],decls:7,vars:0,consts:[[1,"container"],[1,"screen"],["src","404-image.png","alt","Page not found image"],[1,"center"],["routerLink","/",1,"button"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1),ne(2,"img",2),p(3,"div",3)(4,"a",4)(5,"span"),y(6," Go to Home Page "),g()()()()())},dependencies:[bt,At],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.screen[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#123646;box-shadow:0 4px 8px #0000001a;border-radius:8px;height:fit-content;width:50%}img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}p[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:1em}a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-weight:700}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.image-container[_ngcontent-%COMP%]{margin-top:20px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}a.button[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;position:relative;height:50px;padding:0 30px;border:3px solid #ffffff;background:#37b0b4;-webkit-user-select:none;user-select:none;white-space:nowrap;transition:all .05s linear;font-family:inherit;text-decoration:none;color:inherit}a.button[_ngcontent-%COMP%]:before, a.button[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#37b0b4;transition:all .2s linear}a.button[_ngcontent-%COMP%]:before{width:calc(100% + 6px);height:calc(100% - 16px);top:8px;left:-3px}a.button[_ngcontent-%COMP%]:after{width:calc(100% - 16px);height:calc(100% + 6px);top:-3px;left:8px}a.button[_ngcontent-%COMP%]:hover{cursor:crosshair}a.button[_ngcontent-%COMP%]:active{transform:scale(.95)}a.button[_ngcontent-%COMP%]:hover:before{height:calc(100% - 32px);top:16px}a.button[_ngcontent-%COMP%]:hover:after{width:calc(100% - 32px);left:16px}a.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;z-index:3;position:relative;font-weight:600;display:flex;justify-content:center;align-items:center}']})}}return n})();var bi=(()=>{class n{constructor(){this.panelIdSource=new Fi("default-panel"),this.panelId$=this.panelIdSource.asObservable()}setPanelId(e){this.panelIdSource.next(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user",this.settingsIdSource=new Fi("default-settings"),this.settingsId$=this.settingsIdSource.asObservable()}setSettingsId(e){this.settingsIdSource.next(e)}deleteAccount(e){return this.http.post(`${this.apiUrl}/RequestDelete`,JSON.stringify(e),{headers:{"Content-Type":"application/json"},observe:"response"})}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tL=n=>["/",n],ZQ=()=>["/patient-policy"],Rt=(()=>{class n{constructor(e,i){this.panelService=e,this.settingsService=i,this.panelId="",this.settingsId="",this.name="",this.role="",this.privacyId=""}ngOnInit(){this.panelService.panelId$.subscribe(i=>{this.panelId=i}),this.settingsService.settingsId$.subscribe(i=>{this.settingsId=i});let e=localStorage.getItem("token");if(e){console.log("Token:",e);let i=gc(e);console.log("Decoded Token:",i),this.name=i["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],this.role=i["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],console.log("Name:",this.name),console.log("Role:",this.role)}}logout(){localStorage.removeItem("token")}static{this.\u0275fac=function(i){return new(i||n)(k(bi),k(vc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-sidebar"]],standalone:!0,features:[Fe],decls:50,vars:10,consts:[[1,"sidebar"],[1,"sidebar-header"],["src","logo.png","alt","logo"],[1,"sidebar-links"],[1,"menu-separator"],[3,"routerLink"],["src","dashboard.png","alt","icon"],["routerLink","/#"],["src","notifications.png","alt","icon"],["src","profile.png","alt","icon"],["src","settings.png","alt","icon"],["src","insurance.png","alt","icon",1,"colored-icon"],["routerLink","/",3,"click"],["src","logout.png","alt","icon"],[1,"user-account"],[1,"user-profile"],["src","user.png","alt","Profile Image"],[1,"user-detail"]],template:function(i,r){i&1&&(p(0,"aside",0)(1,"div",1),ne(2,"img",2),p(3,"h2"),y(4,"Hospital Management App"),g()(),p(5,"ul",3)(6,"h4")(7,"span"),y(8,"Main Menu"),g(),ne(9,"div",4),g(),p(10,"li")(11,"a",5),ne(12,"img",6),y(13,"User Panel"),g()(),p(14,"h4")(15,"span"),y(16,"General"),g(),ne(17,"div",4),g(),p(18,"li")(19,"a",7),ne(20,"img",8),y(21,"Notifications"),g()(),p(22,"h4")(23,"span"),y(24,"Account"),g(),ne(25,"div",4),g(),p(26,"li")(27,"a",7),ne(28,"img",9),y(29,"Profile"),g()(),p(30,"li")(31,"a",5),ne(32,"img",10),y(33,"Settings"),g()(),p(34,"li")(35,"a",5),ne(36,"img",11),y(37,"Privacy Policy "),g()(),p(38,"li")(39,"a",12),ee("click",function(){return r.logout()}),ne(40,"img",13),y(41,"Logout"),g()()(),p(42,"div",14)(43,"div",15),ne(44,"img",16),p(45,"div",17)(46,"h3"),y(47),g(),p(48,"span"),y(49),g()()()()()),i&2&&(T(11),z("routerLink",_i(5,tL,r.panelId)),T(20),z("routerLink",_i(7,tL,r.settingsId)),T(4),z("routerLink",Hi(9,ZQ)),T(12),Ie(r.name),T(2),Ie(r.role))},dependencies:[bt,At],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;width:85px;display:flex;overflow-x:hidden;flex-direction:column;background:#0b0d16;padding:25px 20px;transition:all .4s ease;z-index:1000}.sidebar[_ngcontent-%COMP%]:hover{width:400px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:600;white-space:nowrap;margin-left:23px}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-weight:500;white-space:nowrap;margin:10px 0;position:relative}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover}.sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;width:100%;height:1px;transform:scaleX(1);transform:translateY(-50%);background:#4f52ba;transform-origin:right;transition-delay:.2s}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{transition-delay:0s;transform:scaleX(0)}.sidebar-links[_ngcontent-%COMP%]{list-style:none;margin-top:20px;height:80%;overflow-y:auto;scrollbar-width:none}.sidebar-links[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0 20px;color:#fff;font-weight:500;white-space:nowrap;padding:15px 10px;text-decoration:none;transition:.2s ease}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#161a2d;background:#fff;border-radius:4px}.user-account[_ngcontent-%COMP%]{margin-top:auto;padding:12px 10px;margin-left:-10px}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;color:#161a2d}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.user-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.user-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.775rem;font-weight:600}.user-detail[_ngcontent-%COMP%]{margin-left:23px;white-space:nowrap}.sidebar[_ngcontent-%COMP%]:hover   .user-account[_ngcontent-%COMP%]{background:#fff;border-radius:4px}.colored-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover;filter:invert(50%) sepia(100%) saturate(500%) hue-rotate(200deg)}"]})}}return n})();var vs=(()=>{class n{deleteOperationType(e){throw new Error("Method not implemented.")}constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}getSpecializations(){return this.http.get(`${this.apiUrl}/Specialization`)}createOperationType(e){return this.http.post(`${this.apiUrl}/OperationType`,e)}getStaffs(e){return this.http.get(`${this.apiUrl}/Specialization/staff/${encodeURIComponent(e)}`).pipe(un(i=>(console.error("Error fetching staff:",i),En(()=>new Error("Failed to fetch staff members")))))}editOperationType(e,i){return this.http.put(`${this.apiUrl}/OperationType/${e}`,i)}getOperationTypeByName(e){return this.http.get(`${this.apiUrl}/OperationType/name/${e}`)}deactivateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/deactivate/${e}`,{},{responseType:"text"}).pipe(un(i=>(console.error("Deactivation failed:",i),En(()=>i))))}activateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/activate/${e}`,{},{responseType:"text"}).pipe(un(i=>(console.error("Activation failed:",i),En(()=>i))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KQ=()=>["/create-operation-type"],JQ=()=>["/panel-admin"],QQ=n=>({deactivated:n}),eee=n=>["/update-operation-type",n];function tee(n,t){if(n&1&&(p(0,"td"),y(1),g()),n&2){let e=X(2).$implicit;Xi("rowspan",e.specializations.length),T(),Et(" ",e.name," ")}}function nee(n,t){if(n&1&&(p(0,"td"),y(1),g()),n&2){let e=X(2).$implicit;Xi("rowspan",e.specializations.length),T(),Et(" ",e.estimatedDuration," ")}}function iee(n,t){if(n&1&&(p(0,"div"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" \u{1F464} ",e.fullName," ")}}function ree(n,t){if(n&1&&(p(0,"div",10),ue(1,iee,2,1,"div",4),g()),n&2){let e=X().$implicit,i=X(2);T(),z("ngForOf",i.staffs[e.specOption])}}function oee(n,t){if(n&1){let e=Xe();p(0,"a",14),ee("click",function(){me(e);let r=X(3).$implicit,o=X();return ge(o.deactivateOperationType(r.name))}),y(1,"Deactivate"),g()}}function see(n,t){if(n&1){let e=Xe();p(0,"a",15),ee("click",function(){me(e);let r=X(3).$implicit,o=X();return ge(o.activateOperationType(r.name))}),y(1,"Activate"),g()}}function aee(n,t){if(n&1&&(p(0,"td")(1,"a",11),y(2,"Edit"),g(),ue(3,oee,2,0,"a",12)(4,see,2,0,"a",13),g()),n&2){let e=X(2).$implicit;Xi("rowspan",e.specializations.length),T(),z("routerLink",_i(4,eee,e.name)),T(2),z("ngIf",!e.isDeactivated),T(),z("ngIf",e.isDeactivated)}}function lee(n,t){if(n&1){let e=Xe();vu(0),p(1,"tr",6),ue(2,tee,2,2,"td",7)(3,nee,2,2,"td",7),p(4,"td"),y(5),g(),p(6,"td")(7,"button",8),ee("click",function(){let r=me(e).$implicit,o=X().$implicit,s=X();return ge(s.loadStaffForSpecialization(o.name,r.specOption))}),y(8," Show Staff "),g(),ue(9,ree,2,1,"div",9),g(),ue(10,aee,5,6,"td",7),g(),_u()}if(n&2){let e=t.$implicit,i=t.index,r=X().$implicit,o=X();T(),z("ngClass",_i(6,QQ,r.isDeactivated)),T(),z("ngIf",i===0),T(),z("ngIf",i===0),T(2),Ie(e.specOption),T(4),z("ngIf",o.isStaffVisible(r.name,e.specOption)),T(),z("ngIf",i===0)}}function cee(n,t){if(n&1&&(vu(0),ue(1,lee,11,8,"ng-container",4),_u()),n&2){let e=t.$implicit;T(),z("ngForOf",e.specializations)}}var nL=(()=>{class n{constructor(e,i){this.operationTypeService=e,this.panelService=i,this.operationTypes=[],this.staffs={},this.visibleStaffs={}}ngOnInit(){this.fetchOperationTypes(),this.panelService.setPanelId("panel-admin")}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.operationTypes=e,console.log("Operation types fetched:",e)},e=>{console.error("Error fetching operation types",e)})}loadStaffForSpecialization(e,i){this.staffs[i]?this.toggleStaffVisibility(e,i):this.operationTypeService.getStaffs(i).subscribe({next:r=>{Array.isArray(r)&&(this.staffs[i]=r.map(o=>kt(Ee({},o),{fullName:o.fullName||`${o.firstName} ${o.lastName}`}))),this.toggleStaffVisibility(e,i)},error:r=>{console.error("Error fetching staff:",r),this.staffs[i]=[]}})}toggleStaffVisibility(e,i){this.visibleStaffs[e]||(this.visibleStaffs[e]={}),this.visibleStaffs[e][i]=!this.visibleStaffs[e][i]}isStaffVisible(e,i){return this.visibleStaffs[e]&&this.visibleStaffs[e][i]}onEdit(e){console.log("Editing operation type:",e),this.operationTypeService.editOperationType(e.name,e).subscribe(()=>{alert("Operation type updated successfully"),this.fetchOperationTypes()},i=>{console.error("Error updating operation type",i),alert("Error updating operation type")})}deactivateOperationType(e){window.confirm(`Are you sure you want to deactivate the operation type: ${e}?`)&&this.operationTypeService.deactivateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!0,alert("Operation type deactivated successfully"))},r=>{console.error("Error deactivating operation type:",r)})}activateOperationType(e){window.confirm(`Are you sure you want to activate the operation type: ${e}?`)&&this.operationTypeService.activateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!1,alert("Operation type activated successfully"))},r=>{console.error("Error activating operation type:",r)})}static{this.\u0275fac=function(i){return new(i||n)(k(vs),k(bi))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-operation-types"]],standalone:!0,features:[Fe],decls:24,vars:5,consts:[[1,"operationType-container"],[1,"operation-title"],[1,"btn","btn-create",3,"routerLink"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-back",3,"routerLink"],[3,"ngClass"],[4,"ngIf"],[1,"btn","btn-info",3,"click"],["class","staff-members",4,"ngIf"],[1,"staff-members"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)","class","btn btn-delete",3,"click",4,"ngIf"],["href","javascript:void(0)","class","btn btn-activate",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-activate",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"h2",1),y(3,"Operation Types"),g(),p(4,"div")(5,"a",2),y(6,"Create Operation Type"),g(),p(7,"table",3)(8,"thead")(9,"tr")(10,"th"),y(11,"Operation Type"),g(),p(12,"th"),y(13,"Estimated Time"),g(),p(14,"th"),y(15,"Specialization"),g(),p(16,"th"),y(17,"Staff Members"),g(),p(18,"th"),y(19,"Actions"),g()()(),p(20,"tbody"),ue(21,cee,2,1,"ng-container",4),g()(),p(22,"a",5),y(23,"Back to Dashboard"),g()()()),i&2&&(T(5),z("routerLink",Hi(3,KQ)),T(16),z("ngForOf",r.operationTypes),T(),z("routerLink",Hi(4,JQ)))},dependencies:[st,hs,xn,zt,bt,At,Rt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;max-width:1400px;font-family:Arial,sans-serif;background-color:#f8f8f8;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;align-items:center}.operation-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:2rem;color:#333}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;border-radius:4px;cursor:pointer;text-decoration:none;border:none;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]{background-color:#ff6f61;color:#fff;margin-top:20px}.btn-create[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;margin-bottom:20px}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#555}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.btn-update[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;padding:6px 12px;font-size:14px;text-decoration:none;border-radius:4px}.btn-update[_ngcontent-%COMP%]{background-color:orange;color:#fff}.btn-update[_ngcontent-%COMP%]:hover{background-color:#ff8c00}.btn-delete[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#e53935}.btn-activate[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover{background-color:#45a049}.router-outlet[_ngcontent-%COMP%]{margin-top:40px}@media (max-width: 768px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:8px}.btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}.operation-title[_ngcontent-%COMP%]{font-size:1.5rem}}.staff-members[_ngcontent-%COMP%]{margin-top:10px;background-color:#f9f9f9;border-radius:6px;padding:10px;box-shadow:0 2px 4px #0000001a}.staff-members[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#555}.deactivated[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.deactivated[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through}']})}}return n})();var uee=()=>["/operation-types"];function dee(n,t){if(n&1){let e=Xe();p(0,"div",17)(1,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.onSpecializationChange(o,r))}),g(),p(2,"label",19),y(3),g()()}if(n&2){let e=t.$implicit,i=X();T(),yu("id","specialization-",e.id,""),z("checked",i.operationType.specializations.includes(e.specOption)),T(),yu("for","specialization-",e.id,""),T(),Ie(e.specOption)}}function fee(n,t){n&1&&(p(0,"div",20)(1,"p",21),y(2,"You must add at least one specialization to the operation type."),g()())}var iL=(()=>{class n{constructor(e,i){this.router=e,this.operationTypeService=i,this.operationType={name:"",estimatedDuration:"",specializations:[]},this.availableSpecializations=[],i.getSpecializations().subscribe(r=>{this.availableSpecializations=r},r=>{console.error("Error fetching specializations",r)})}onSpecializationChange(e,i){if(i.target.checked)this.operationType.specializations.push(e.specOption);else{let r=this.operationType.specializations.indexOf(e.specOption);r!==-1&&this.operationType.specializations.splice(r,1)}}onSubmit(){this.operationTypeService.createOperationType(this.operationType).subscribe(()=>{alert("Operation type created successfully"),this.operationType={name:"",estimatedDuration:"",specializations:[]},this.router.navigate(["/operation-types"])},e=>{console.error("Error creating operation type",e),alert("Error creating operation type")})}static{this.\u0275fac=function(i){return new(i||n)(k(ct),k(vs))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-operation-type"]],standalone:!0,features:[Fe],decls:26,vars:7,consts:[["operationForm","ngForm"],[1,"operationType-container"],[1,"operation-title"],[1,"form-and-table-container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","estimatedTime"],["type","text","id","estimatedTime","name","estimatedTime","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","specializations"],[1,"checkboxes-container"],["class","checkbox-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"checkbox-group"],["type","checkbox",3,"change","id","checked"],[3,"for"],[1,"error-message"],[1,"text-danger"]],template:function(i,r){if(i&1){let o=Xe();p(0,"div",1),ne(1,"app-sidebar"),p(2,"h2",2),y(3,"Create Operation Type"),g(),p(4,"div",3)(5,"div",4)(6,"form",5,0),ee("ngSubmit",function(){return me(o),ge(r.onSubmit())}),p(8,"div",6)(9,"label",7),y(10,"Name"),g(),p(11,"input",8),Ue("ngModelChange",function(a){return me(o),Ve(r.operationType.name,a)||(r.operationType.name=a),ge(a)}),g()(),p(12,"div",6)(13,"label",9),y(14,"Estimated Time"),g(),p(15,"input",10),Ue("ngModelChange",function(a){return me(o),Ve(r.operationType.estimatedDuration,a)||(r.operationType.estimatedDuration=a),ge(a)}),g()(),p(16,"div",6)(17,"label",11),y(18,"Available Specializations"),g(),p(19,"div",12),ue(20,dee,4,6,"div",13),g(),ue(21,fee,3,0,"div",14),g(),p(22,"button",15),y(23,"Create"),g(),p(24,"a",16),y(25,"Back"),g()()()()()}if(i&2){let o=Di(7);T(11),Le("ngModel",r.operationType.name),T(4),Le("ngModel",r.operationType.estimatedDuration),T(5),z("ngForOf",r.availableSpecializations),T(),z("ngIf",r.operationType.specializations.length===0),T(),z("disabled",!o.valid||r.operationType.specializations.length===0),T(2),z("routerLink",Hi(6,uee))}},dependencies:[st,xn,zt,vt,Ut,Ct,St,Lt,sn,Tn,Hn,bt,At,Rt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;padding:30px;background-color:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;font-family:Arial,sans-serif}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:25px;color:#333}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;font-size:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#444;margin-bottom:8px}.form-control[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:8px;box-sizing:border-box;transition:all .3s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.form-control[_ngcontent-%COMP%]:required{border-color:#ff4d4d;background-color:#fff6f6}.form-control[_ngcontent-%COMP%]:required:focus{border-color:#ff1a1a}.form-control[_ngcontent-%COMP%]:valid{border-color:#28a745;background-color:#e6ffe6}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border-color:#ff4d4d}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]:after{content:"*";color:#ff4d4d;font-size:18px;margin-left:5px}.btn[_ngcontent-%COMP%]{padding:12px 25px;font-size:16px;text-align:center;text-decoration:none;cursor:pointer;border-radius:8px;border:none;transition:background-color .3s ease}.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-back[_ngcontent-%COMP%]{background-color:#a5342c;color:#fff}.btn-back[_ngcontent-%COMP%]:hover{background-color:#5a6268}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}@media (max-width: 600px){.operationType-container[_ngcontent-%COMP%]{padding:20px}.operation-title[_ngcontent-%COMP%]{font-size:24px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.btn[_ngcontent-%COMP%]{width:100%}}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px;cursor:pointer;transform:scale(1.3);transition:transform .3s ease-in-out;margin-left:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;color:#444;margin-left:5px;cursor:pointer}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{transform:scale(1.4)}.error-message[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#ff4d4d}']})}}return n})();var ir=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/staff",this.apiURLSpecializaction="https://localhost:5001/api/specialization",this.apiURLUser="https://localhost:5001/api/user"}createStaff(e){return this.http.post(`${this.apiUrl}`,e,{observe:"response",responseType:"text"})}getSpecialization(){return this.http.get(`${this.apiURLSpecializaction}`)}getStaffTypes(){return this.http.get(`${this.apiUrl}/staff-types`)}searchStaffProfiles(e){return this.http.get(`${this.apiUrl}/search`,{params:e})}deactivateStaff(e){return this.http.put(`${this.apiUrl}/deactivate/${e}`,{})}updateStaff(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}getStaffById(e){return this.http.get(`${this.apiUrl}/${e}`)}getAllStaffs(){return this.http.get(`${this.apiUrl}`)}confirmUpdates(e){let i=new ps;return e.phoneNumber&&(i=i.append("phoneNumber",e.phoneNumber)),e.email&&(i=i.append("email",e.email)),i=i.append("token",e.token),this.http.put(`${this.apiUrl}/ConfirmUpdates`,{},{params:i})}activateStaff(e){let i=`${this.apiURLUser}/RegisterUser`;return this.http.post(i,e)}activateUser(e,i){let r={token:e,newPassword:i};return this.http.post(`${this.apiURLUser}/Activate`,null,{params:r})}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hee(n,t){if(n&1&&(p(0,"option",28),y(1),g()),n&2){let e=t.$implicit;z("value",e),T(),Ie(e)}}function pee(n,t){if(n&1&&(p(0,"option",28),y(1),g()),n&2){let e=t.$implicit;z("value",e.specOption),T(),Et(" ",e.specOption," ")}}function mee(n,t){if(n&1&&(p(0,"div",29),y(1),g()),n&2){let e=X();T(),Et(" ",e.errorMessage," ")}}var rL=(()=>{class n{constructor(e,i){this.service=e,this.router=i,this.createStaffForm=new gs({firstName:new Fn("",[It.required]),lastName:new Fn("",[It.required]),fullName:new Fn("",[It.required]),email:new Fn("",[It.required,It.email]),identifier:new Fn("",[It.required]),phoneNumber:new Fn("",[It.required]),staffType:new Fn("",[It.required]),specializationName:new Fn("",[It.required])}),this.newStaff={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",staffType:"",specializationName:""},this.staffTypes=[],this.specializations=[],this.errorMessage="",this.NumberPhone=""}ngOnInit(){this.loadSpecializations(),this.loadStaffTypes()}loadSpecializations(){this.service.getSpecialization().subscribe({next:e=>{console.log(`Data specilazation:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffTypes(){this.service.getStaffTypes().subscribe({next:e=>{console.log(`Data staff types:
`,e),this.staffTypes=e},error:e=>{console.error("Error loading staff types",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff types ")}})}onSubmit(){if(this.createStaffForm.invalid){this.errorMessage="",this.createStaffForm.markAllAsTouched();return}this.newStaff={firstName:this.createStaffForm.value.firstName.trim(),lastName:this.createStaffForm.value.lastName.trim(),fullName:this.createStaffForm.value.fullName.trim(),email:this.createStaffForm.value.email.trim(),phoneNumber:this.createStaffForm.value.identifier.trim()+this.createStaffForm.value.phoneNumber.trim(),staffType:this.createStaffForm.value.staffType.trim(),specializationName:this.createStaffForm.value.specializationName.trim()},this.createStaffForm.valid&&this.service.createStaff(this.newStaff).subscribe({next:e=>{console.log("Staff created successfully",e),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:e=>{if(console.error("Error creating staff",e),e.status===400){let i=JSON.parse(e.error);this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Creating failed - "+e.error)}})}static{this.\u0275fac=function(i){return new(i||n)(k(ir),k(ct))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-staff"]],standalone:!0,features:[Fe],decls:46,vars:4,consts:[[1,"create-staff-container"],[1,"create-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","First Name","required",""],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name","required",""],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Full Name","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],[1,"form-group"],["for","staffType"],["id","staffType","formControlName","staffType","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","specializationName"],["id","specializationName","formControlName","specializationName","required",""],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(ne(0,"app-sidebar"),p(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),y(5,"Go Back"),g(),p(6,"h2"),y(7,"Create Staff"),g()(),p(8,"form",4),ee("ngSubmit",function(){return r.onSubmit()}),p(9,"label",5),y(10,"First Name"),g(),ne(11,"input",6),p(12,"label",7),y(13,"Last Name"),g(),ne(14,"input",8),p(15,"label",9),y(16,"Full Name"),g(),ne(17,"input",10),p(18,"label",11),y(19,"Email"),g(),ne(20,"input",12),p(21,"label",13),y(22,"Phone Number"),g(),p(23,"div",14)(24,"div",15),ne(25,"input",16),g(),p(26,"div",17),ne(27,"input",18),g()(),p(28,"div",14)(29,"div",19)(30,"label",20),y(31,"Staff Type"),g(),p(32,"select",21)(33,"option",22),y(34,"Select Staff Type"),g(),ue(35,hee,2,2,"option",23),g()(),p(36,"div",19)(37,"label",24),y(38,"Specialization Name"),g(),p(39,"select",25)(40,"option",22),y(41,"Select Specialization"),g(),ue(42,pee,2,2,"option",23),g()()(),ue(43,mee,2,1,"div",26),p(44,"button",27),y(45,"Create Staff"),g()()()()),i&2&&(T(8),z("formGroup",r.createStaffForm),T(27),z("ngForOf",r.staffTypes),T(7),z("ngForOf",r.specializations),T(),z("ngIf",r.errorMessage))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,sn,st,xn,zt,Rt,nr,Cr,Dr,bt,At],styles:[".create-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.create-staff-container[_ngcontent-%COMP%]   .create-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem 2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#333;margin:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;color:#fff;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var oL=(()=>{class n{constructor(e,i,r){this.router=e,this.panelService=i,this.settingsService=r}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings")}onSubmit(){let e=localStorage.getItem("token");e?this.settingsService.deleteAccount(e).subscribe(i=>{console.log("Request Finished With Success",i),localStorage.removeItem("token"),this.router.navigate(["/login"]),alert("To complete the account deletion process, please check your email for further instructions.")},i=>{console.error("Account deletion failed",i),alert("Account deletion failed - "+i.error)}):(this.router.navigate(["/login"]),alert("No token found. Please log in again."))}static{this.\u0275fac=function(i){return new(i||n)(k(ct),k(bi),k(vc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-patient-settings"]],standalone:!0,features:[Fe],decls:21,vars:0,consts:[[1,"settings-container"],[1,"settings-content"],[1,"header"],[1,"settings-details"],["id","theme-settings",1,"box"],["type","radio","name","theme","value","light"],["type","radio","name","theme","value","dark","checked",""],["id","account-settings",1,"box"],[1,"delete-account",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h1"),y(5,"Settings"),g()(),p(6,"div",3)(7,"section",4)(8,"h2"),y(9,"Theme"),g(),p(10,"label"),ne(11,"input",5),y(12," Light "),g(),p(13,"label"),ne(14,"input",6),y(15," Dark "),g()(),p(16,"section",7)(17,"h2"),y(18,"Account"),g(),p(19,"button",8),ee("click",function(){return r.onSubmit()}),y(20," Request Account Delete "),g()()()()())},dependencies:[Rt],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.settings-container[_ngcontent-%COMP%]{display:flex;background-color:#161a2d;font-family:Poppins,sans-serif;color:#fff;height:100vh;margin-left:85px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]{flex:1;padding:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]{margin-top:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{background-color:#161a2d;border:1px solid #515253;border-radius:6px;padding:20px;margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;border-bottom:1px solid #515253;padding-bottom:10px;margin-bottom:15px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:1rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:8px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]{background-color:#d73a49;color:#fff;padding:10px 20px;font-size:1rem;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]:hover{background-color:#b92534}"]})}}return n})();var rr=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Admin")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(Ae(mc),Ae(ct))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YE=n=>({"is-invalid":n}),gee=()=>["/operation-types"];function vee(n,t){n&1&&(p(0,"div",15),y(1," Name is required. "),g())}function _ee(n,t){n&1&&(p(0,"div",15),y(1," Estimated Duration is required. "),g())}function yee(n,t){if(n&1){let e=Xe();p(0,"div",16),ne(1,"input",17),p(2,"button",18),ee("click",function(){let r=me(e).index,o=X();return ge(o.removeSpecialization(r))}),y(3,"Remove"),g()()}if(n&2){let e=t.$implicit,i=t.index;T(),z("formControlName",i)("ngClass",_i(2,YE,e.invalid&&e.touched))}}function xee(n,t){n&1&&(p(0,"div",19),y(1," At least one specialization is required. "),g())}var sL=(()=>{class n{constructor(e,i,r,o){this.route=e,this.router=i,this.fb=r,this.operationTypeService=o,this.operationTypeName=""}ngOnInit(){this.updateForm=this.fb.group({name:[""],estimatedDuration:[""],specializations:this.fb.array([],It.required)}),this.operationTypeName=this.route.snapshot.paramMap.get("name"),this.loadOperationType()}loadOperationType(){this.operationTypeService.getOperationTypeByName(this.operationTypeName).subscribe(e=>{this.updateForm.patchValue({name:e.name,estimatedDuration:e.estimatedDuration});let i=this.updateForm.get("specializations");e.specializations.map(o=>o.specOption).forEach(o=>{i.push(this.fb.control(o,It.required))})},e=>{console.error("Error fetching operation type",e)})}updateOperationType(){if(this.updateForm.valid){let e=this.updateForm.value,i={name:e.name,estimatedDuration:e.estimatedDuration,specializations:e.specializations};this.operationTypeService.editOperationType(this.operationTypeName,i).subscribe(()=>{alert("Operation type updated successfully"),this.router.navigate(["/operation-types"])},r=>{console.error("Error updating operation type",r)})}}get specializations(){return this.updateForm.get("specializations")}addSpecialization(){this.specializations.push(this.fb.control("",It.required))}removeSpecialization(e){this.specializations.removeAt(e)}static{this.\u0275fac=function(i){return new(i||n)(k(tr),k(ct),k(Ea),k(vs))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-operation-type"]],standalone:!0,features:[Fe],decls:26,vars:13,consts:[[1,"update-operation-type-container"],[1,"operation-title",2,"text-align","center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","estimatedDuration"],["type","text","id","estimatedDuration","formControlName","estimatedDuration",1,"form-control",3,"ngClass"],["formArrayName","specializations",1,"form-group"],["class","input-group mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-addSpecialization",3,"click"],["class","invalid-feedback d-block",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-secondary",3,"routerLink"],[1,"invalid-feedback"],[1,"input-group","mb-2"],["type","text","placeholder","Specialization",1,"form-control",3,"formControlName","ngClass"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback","d-block"]],template:function(i,r){if(i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"h2",1),y(3,"Update Operation Type"),g(),p(4,"form",2),ee("ngSubmit",function(){return r.updateOperationType()}),p(5,"div",3)(6,"label",4),y(7,"Name"),g(),ne(8,"input",5),ue(9,vee,2,0,"div",6),g(),p(10,"div",3)(11,"label",7),y(12,"Estimated Duration"),g(),ne(13,"input",8),ue(14,_ee,2,0,"div",6),g(),p(15,"div",9)(16,"label"),y(17,"Specializations"),g(),ue(18,yee,4,4,"div",10),p(19,"button",11),ee("click",function(){return r.addSpecialization()}),y(20,"Add Specialization"),g(),ue(21,xee,2,0,"div",12),g(),p(22,"button",13),y(23,"Update"),g(),p(24,"a",14),y(25,"Cancel"),g()()()),i&2){let o,s,a,c;T(4),z("formGroup",r.updateForm),T(4),z("ngClass",_i(8,YE,((o=r.updateForm.get("name"))==null?null:o.touched)&&((o=r.updateForm.get("name"))==null?null:o.invalid))),T(),z("ngIf",((s=r.updateForm.get("name"))==null?null:s.touched)&&((s=r.updateForm.get("name"))==null?null:s.invalid)),T(4),z("ngClass",_i(10,YE,((a=r.updateForm.get("estimatedDuration"))==null?null:a.touched)&&((a=r.updateForm.get("estimatedDuration"))==null?null:a.invalid))),T(),z("ngIf",((c=r.updateForm.get("estimatedDuration"))==null?null:c.touched)&&((c=r.updateForm.get("estimatedDuration"))==null?null:c.invalid)),T(4),z("ngForOf",r.specializations.controls),T(3),z("ngIf",r.specializations.invalid&&r.specializations.touched),T(3),z("routerLink",Hi(12,gee))}},dependencies:[vt,Ut,Ct,St,Lt,nr,Cr,Dr,bf,bt,At,Rt,st,hs,xn,zt],styles:['@charset "UTF-8";.update-operation-type-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:30px;background-color:#fdfdfd;border-radius:12px;box-shadow:0 6px 12px #0000001a;border:1px solid #e6e6e6}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;font-weight:700;color:#333;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:15px;font-weight:500;color:#555;margin-bottom:6px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #ccc;border-radius:6px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#0069d9;outline:none;box-shadow:0 0 5px #007bff4d}.is-invalid[_ngcontent-%COMP%]{border-color:#e63946;box-shadow:0 0 5px #e639464d}.invalid-feedback[_ngcontent-%COMP%]{color:#e63946;font-size:14px;margin-top:5px}button.btn[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease}button.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 4px 8px #007bff33}.btn-secondary[_ngcontent-%COMP%]{background-color:#e63946;color:#fff;margin-top:30px;text-align:center}button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;box-shadow:0 4px 8px #6c757d33}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}a[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;font-size:15px;color:#007bff;font-weight:600;text-decoration:none;text-align:center}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-addSpecialization[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-top:10px}']})}}return n})();var zT="170";var bee=0,aL=1,Cee=2;var TU=1,HT=2,Cl=3,Da=0,wo=1,qo=2,Ec=0,Hf=1,lL=2,cL=3,uL=4,Mee=5,ku=100,wee=101,Eee=102,See=103,Tee=104,Pee=200,Dee=201,Oee=202,Aee=203,TS=204,PS=205,Iee=206,Ree=207,Nee=208,Fee=209,kee=210,Lee=211,Uee=212,Vee=213,Bee=214,DS=0,OS=1,AS=2,$f=3,IS=4,RS=5,NS=6,FS=7,PU=0,zee=1,Hee=2,Sc=0,Wee=1,jee=2,Gee=3,$ee=4,qee=5,Yee=6,Xee=7,dL="attached",Zee="detached",fL=300,qf=301,Yf=302,kS=303,LS=304,zy=306,sr=1e3,wl=1001,gm=1002,zr=1003,WT=1004;var Uf=1005;var wr=1006,fm=1007;var Mo=1008;var Tl=1009,DU=1010,OU=1011,vm=1012,jT=1013,Vu=1014,ia=1015,Pm=1016,GT=1017,$T=1018,Xf=1020,AU=35902,IU=1021,RU=1022,ys=1023,NU=1024,FU=1025,Wf=1026,Zf=1027,qT=1028,YT=1029,kU=1030,XT=1031;var ZT=1033,ly=33776,cy=33777,uy=33778,dy=33779,US=35840,VS=35841,BS=35842,zS=35843,HS=36196,WS=37492,jS=37496,GS=37808,$S=37809,qS=37810,YS=37811,XS=37812,ZS=37813,KS=37814,JS=37815,QS=37816,eT=37817,tT=37818,nT=37819,iT=37820,rT=37821,fy=36492,oT=36494,sT=36495,LU=36283,aT=36284,lT=36285,cT=36286,KT=2200,Kee=2201,Jee=2202,Kf=2300,Jf=2301,XE=2302,Vf=2400,Bf=2401,hy=2402,JT=2500,Qee=2501,UU=0,Hy=1,Dm=2,ete=3200,tte=3201;var VU=0,nte=1,wc="",ki="srgb",Gr="srgb-linear",Wy="linear",oi="srgb";var Mf=7680;var hL=519,ite=512,rte=513,ote=514,BU=515,ste=516,ate=517,lte=518,cte=519,uT=35044;var pL="300 es",El=2e3,py=2001,Pl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let r=this._listeners[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},Ur=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],mL=1234567,hm=Math.PI/180,Qf=180/Math.PI;function ra(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ur[n&255]+Ur[n>>8&255]+Ur[n>>16&255]+Ur[n>>24&255]+"-"+Ur[t&255]+Ur[t>>8&255]+"-"+Ur[t>>16&15|64]+Ur[t>>24&255]+"-"+Ur[e&63|128]+Ur[e>>8&255]+"-"+Ur[e>>16&255]+Ur[e>>24&255]+Ur[i&255]+Ur[i>>8&255]+Ur[i>>16&255]+Ur[i>>24&255]).toLowerCase()}function Br(n,t,e){return Math.max(t,Math.min(e,n))}function QT(n,t){return(n%t+t)%t}function ute(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function dte(n,t,e){return n!==t?(e-n)/(t-n):0}function pm(n,t,e){return(1-e)*n+e*t}function fte(n,t,e,i){return pm(n,t,1-Math.exp(-e*i))}function hte(n,t=1){return t-Math.abs(QT(n,t*2)-t)}function pte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function mte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function gte(n,t){return n+Math.floor(Math.random()*(t-n+1))}function vte(n,t){return n+Math.random()*(t-n)}function _te(n){return n*(.5-Math.random())}function yte(n){n!==void 0&&(mL=n);let t=mL+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function xte(n){return n*hm}function bte(n){return n*Qf}function Cte(n){return(n&n-1)===0&&n!==0}function Mte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function wte(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Ete(n,t,e,i,r){let o=Math.cos,s=Math.sin,a=o(e/2),c=s(e/2),d=o((t+i)/2),f=s((t+i)/2),h=o((t-i)/2),v=s((t-i)/2),_=o((i-t)/2),C=s((i-t)/2);switch(r){case"XYX":n.set(a*f,c*h,c*v,a*d);break;case"YZY":n.set(c*v,a*f,c*h,a*d);break;case"ZXZ":n.set(c*h,c*v,a*f,a*d);break;case"XZX":n.set(a*f,c*C,c*_,a*d);break;case"YXY":n.set(c*_,a*f,c*C,a*d);break;case"ZYZ":n.set(c*C,c*_,a*f,a*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function na(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Jn(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Or={DEG2RAD:hm,RAD2DEG:Qf,generateUUID:ra,clamp:Br,euclideanModulo:QT,mapLinear:ute,inverseLerp:dte,lerp:pm,damp:fte,pingpong:hte,smoothstep:pte,smootherstep:mte,randInt:gte,randFloat:vte,randFloatSpread:_te,seededRandom:yte,degToRad:xte,radToDeg:bte,isPowerOfTwo:Cte,ceilPowerOfTwo:Mte,floorPowerOfTwo:wte,setQuaternionFromProperEuler:Ete,normalize:Jn,denormalize:na},tn=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Br(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},hn=class n{constructor(t,e,i,r,o,s,a,c,d){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,c,d)}set(t,e,i,r,o,s,a,c,d){let f=this.elements;return f[0]=t,f[1]=r,f[2]=a,f[3]=e,f[4]=o,f[5]=c,f[6]=i,f[7]=s,f[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[3],c=i[6],d=i[1],f=i[4],h=i[7],v=i[2],_=i[5],C=i[8],w=r[0],b=r[3],x=r[6],D=r[1],S=r[4],P=r[7],W=r[2],V=r[5],H=r[8];return o[0]=s*w+a*D+c*W,o[3]=s*b+a*S+c*V,o[6]=s*x+a*P+c*H,o[1]=d*w+f*D+h*W,o[4]=d*b+f*S+h*V,o[7]=d*x+f*P+h*H,o[2]=v*w+_*D+C*W,o[5]=v*b+_*S+C*V,o[8]=v*x+_*P+C*H,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],d=t[7],f=t[8];return e*s*f-e*a*d-i*o*f+i*a*c+r*o*d-r*s*c}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],d=t[7],f=t[8],h=f*s-a*d,v=a*c-f*o,_=d*o-s*c,C=e*h+i*v+r*_;if(C===0)return this.set(0,0,0,0,0,0,0,0,0);let w=1/C;return t[0]=h*w,t[1]=(r*d-f*i)*w,t[2]=(a*i-r*s)*w,t[3]=v*w,t[4]=(f*e-r*c)*w,t[5]=(r*o-a*e)*w,t[6]=_*w,t[7]=(i*c-d*e)*w,t[8]=(s*e-i*o)*w,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,o,s,a){let c=Math.cos(o),d=Math.sin(o);return this.set(i*c,i*d,-i*(c*s+d*a)+s+t,-r*d,r*c,-r*(-d*s+c*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(ZE.makeScale(t,e)),this}rotate(t){return this.premultiply(ZE.makeRotation(-t)),this}translate(t,e){return this.premultiply(ZE.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},ZE=new hn;function zU(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function _m(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ste(){let n=_m("canvas");return n.style.display="block",n}var gL={};function um(n){n in gL||(gL[n]=!0,console.warn(n))}function Tte(n,t,e){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}function Pte(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function Dte(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var Rn={enabled:!0,workingColorSpace:Gr,spaces:{},convert:function(n,t,e){return this.enabled===!1||t===e||!t||!e||(this.spaces[t].transfer===oi&&(n.r=Sl(n.r),n.g=Sl(n.g),n.b=Sl(n.b)),this.spaces[t].primaries!==this.spaces[e].primaries&&(n.applyMatrix3(this.spaces[t].toXYZ),n.applyMatrix3(this.spaces[e].fromXYZ)),this.spaces[e].transfer===oi&&(n.r=jf(n.r),n.g=jf(n.g),n.b=jf(n.b))),n},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===wc?Wy:this.spaces[n].transfer},getLuminanceCoefficients:function(n,t=this.workingColorSpace){return n.fromArray(this.spaces[t].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,t,e){return n.copy(this.spaces[t].toXYZ).multiply(this.spaces[e].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Sl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function jf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var vL=[.64,.33,.3,.6,.15,.06],_L=[.2126,.7152,.0722],yL=[.3127,.329],xL=new hn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),bL=new hn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Rn.define({[Gr]:{primaries:vL,whitePoint:yL,transfer:Wy,toXYZ:xL,fromXYZ:bL,luminanceCoefficients:_L,workingColorSpaceConfig:{unpackColorSpace:ki},outputColorSpaceConfig:{drawingBufferColorSpace:ki}},[ki]:{primaries:vL,whitePoint:yL,transfer:oi,toXYZ:xL,fromXYZ:bL,luminanceCoefficients:_L,outputColorSpaceConfig:{drawingBufferColorSpace:ki}}});var wf,dT=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{wf===void 0&&(wf=_m("canvas")),wf.width=t.width,wf.height=t.height;let i=wf.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=wf}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=_m("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Sl(o[s]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Sl(e[i]/255)*255):e[i]=Sl(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Ote=0,my=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ote++}),this.uuid=ra(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(KE(r[s].image)):o.push(KE(r[s]))}else o=KE(r);i.url=o}return e||(t.images[this.uuid]=i),i}};function KE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?dT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Ate=0,Ms=(()=>{class n extends Pl{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=wl,o=wl,s=wr,a=Mo,c=ys,d=Tl,f=n.DEFAULT_ANISOTROPY,h=wc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ate++}),this.uuid=ra(),this.name="",this.source=new my(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=c,this.internalFormat=null,this.type=d,this.offset=new tn(0,0),this.repeat=new tn(1,1),this.center=new tn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==fL)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sr:e.x=e.x-Math.floor(e.x);break;case wl:e.x=e.x<0?0:1;break;case gm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sr:e.y=e.y-Math.floor(e.y);break;case wl:e.y=e.y<0?0:1;break;case gm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=fL,n.DEFAULT_ANISOTROPY=1,n})(),an=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,o,c=t.elements,d=c[0],f=c[4],h=c[8],v=c[1],_=c[5],C=c[9],w=c[2],b=c[6],x=c[10];if(Math.abs(f-v)<.01&&Math.abs(h-w)<.01&&Math.abs(C-b)<.01){if(Math.abs(f+v)<.1&&Math.abs(h+w)<.1&&Math.abs(C+b)<.1&&Math.abs(d+_+x-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let S=(d+1)/2,P=(_+1)/2,W=(x+1)/2,V=(f+v)/4,H=(h+w)/4,$=(C+b)/4;return S>P&&S>W?S<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(S),r=V/i,o=H/i):P>W?P<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(P),i=V/r,o=$/r):W<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(W),i=H/o,r=$/o),this.set(i,r,o,e),this}let D=Math.sqrt((b-C)*(b-C)+(h-w)*(h-w)+(v-f)*(v-f));return Math.abs(D)<.001&&(D=1),this.x=(b-C)/D,this.y=(h-w)/D,this.z=(v-f)/D,this.w=Math.acos((d+_+x-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},fT=class extends Pl{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new an(0,0,t,e),this.scissorTest=!1,this.viewport=new an(0,0,t,e);let r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let o=new Ms(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new my(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Dl=class extends fT{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},gy=class extends Ms{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=zr,this.minFilter=zr,this.wrapR=wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var hT=class extends Ms{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=zr,this.minFilter=zr,this.wrapR=wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Hr=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,o,s,a){let c=i[r+0],d=i[r+1],f=i[r+2],h=i[r+3],v=o[s+0],_=o[s+1],C=o[s+2],w=o[s+3];if(a===0){t[e+0]=c,t[e+1]=d,t[e+2]=f,t[e+3]=h;return}if(a===1){t[e+0]=v,t[e+1]=_,t[e+2]=C,t[e+3]=w;return}if(h!==w||c!==v||d!==_||f!==C){let b=1-a,x=c*v+d*_+f*C+h*w,D=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){let W=Math.sqrt(S),V=Math.atan2(W,x*D);b=Math.sin(b*V)/W,a=Math.sin(a*V)/W}let P=a*D;if(c=c*b+v*P,d=d*b+_*P,f=f*b+C*P,h=h*b+w*P,b===1-a){let W=1/Math.sqrt(c*c+d*d+f*f+h*h);c*=W,d*=W,f*=W,h*=W}}t[e]=c,t[e+1]=d,t[e+2]=f,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,r,o,s){let a=i[r],c=i[r+1],d=i[r+2],f=i[r+3],h=o[s],v=o[s+1],_=o[s+2],C=o[s+3];return t[e]=a*C+f*h+c*_-d*v,t[e+1]=c*C+f*v+d*h-a*_,t[e+2]=d*C+f*_+a*v-c*h,t[e+3]=f*C-a*h-c*v-d*_,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,c=Math.sin,d=a(i/2),f=a(r/2),h=a(o/2),v=c(i/2),_=c(r/2),C=c(o/2);switch(s){case"XYZ":this._x=v*f*h+d*_*C,this._y=d*_*h-v*f*C,this._z=d*f*C+v*_*h,this._w=d*f*h-v*_*C;break;case"YXZ":this._x=v*f*h+d*_*C,this._y=d*_*h-v*f*C,this._z=d*f*C-v*_*h,this._w=d*f*h+v*_*C;break;case"ZXY":this._x=v*f*h-d*_*C,this._y=d*_*h+v*f*C,this._z=d*f*C+v*_*h,this._w=d*f*h-v*_*C;break;case"ZYX":this._x=v*f*h-d*_*C,this._y=d*_*h+v*f*C,this._z=d*f*C-v*_*h,this._w=d*f*h+v*_*C;break;case"YZX":this._x=v*f*h+d*_*C,this._y=d*_*h+v*f*C,this._z=d*f*C-v*_*h,this._w=d*f*h-v*_*C;break;case"XZY":this._x=v*f*h-d*_*C,this._y=d*_*h-v*f*C,this._z=d*f*C+v*_*h,this._w=d*f*h+v*_*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],d=e[2],f=e[6],h=e[10],v=i+a+h;if(v>0){let _=.5/Math.sqrt(v+1);this._w=.25/_,this._x=(f-c)*_,this._y=(o-d)*_,this._z=(s-r)*_}else if(i>a&&i>h){let _=2*Math.sqrt(1+i-a-h);this._w=(f-c)/_,this._x=.25*_,this._y=(r+s)/_,this._z=(o+d)/_}else if(a>h){let _=2*Math.sqrt(1+a-i-h);this._w=(o-d)/_,this._x=(r+s)/_,this._y=.25*_,this._z=(c+f)/_}else{let _=2*Math.sqrt(1+h-i-a);this._w=(s-r)/_,this._x=(o+d)/_,this._y=(c+f)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Br(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,o=t._z,s=t._w,a=e._x,c=e._y,d=e._z,f=e._w;return this._x=i*f+s*a+r*d-o*c,this._y=r*f+s*c+o*a-i*d,this._z=o*f+s*d+i*c-r*a,this._w=s*f-i*a-r*c-o*d,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let _=1-e;return this._w=_*s+e*this._w,this._x=_*i+e*this._x,this._y=_*r+e*this._y,this._z=_*o+e*this._z,this.normalize(),this}let d=Math.sqrt(c),f=Math.atan2(d,a),h=Math.sin((1-e)*f)/d,v=Math.sin(e*f)/d;return this._w=s*h+this._w*v,this._x=i*h+this._x*v,this._y=r*h+this._y*v,this._z=o*h+this._z*v,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},j=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(CL.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(CL.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*r,this.y=o[1]*e+o[4]*i+o[7]*r,this.z=o[2]*e+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,o=t.x,s=t.y,a=t.z,c=t.w,d=2*(s*r-a*i),f=2*(a*e-o*r),h=2*(o*i-s*e);return this.x=e+c*d+s*h-a*f,this.y=i+c*f+a*d-o*h,this.z=r+c*h+o*f-s*d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r,this.y=o[1]*e+o[5]*i+o[9]*r,this.z=o[2]*e+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,o=t.z,s=e.x,a=e.y,c=e.z;return this.x=r*c-o*a,this.y=o*s-i*c,this.z=i*a-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return JE.copy(this).projectOnVector(t),this.sub(JE)}reflect(t){return this.sub(JE.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Br(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},JE=new j,CL=new Hr,Ki=class{constructor(t=new j(1/0,1/0,1/0),e=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Qs.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Qs.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=Qs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,Qs):Qs.fromBufferAttribute(o,s),Qs.applyMatrix4(t.matrixWorld),this.expandByPoint(Qs);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),F_.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),F_.copy(i.boundingBox)),F_.applyMatrix4(t.matrixWorld),this.union(F_)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Qs),Qs.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(nm),k_.subVectors(this.max,nm),Ef.subVectors(t.a,nm),Sf.subVectors(t.b,nm),Tf.subVectors(t.c,nm),_c.subVectors(Sf,Ef),yc.subVectors(Tf,Sf),Du.subVectors(Ef,Tf);let e=[0,-_c.z,_c.y,0,-yc.z,yc.y,0,-Du.z,Du.y,_c.z,0,-_c.x,yc.z,0,-yc.x,Du.z,0,-Du.x,-_c.y,_c.x,0,-yc.y,yc.x,0,-Du.y,Du.x,0];return!QE(e,Ef,Sf,Tf,k_)||(e=[1,0,0,0,1,0,0,0,1],!QE(e,Ef,Sf,Tf,k_))?!1:(L_.crossVectors(_c,yc),e=[L_.x,L_.y,L_.z],QE(e,Ef,Sf,Tf,k_))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Qs).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Qs).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(gl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),gl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),gl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),gl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),gl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),gl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),gl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),gl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(gl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},gl=[new j,new j,new j,new j,new j,new j,new j,new j],Qs=new j,F_=new Ki,Ef=new j,Sf=new j,Tf=new j,_c=new j,yc=new j,Du=new j,nm=new j,k_=new j,L_=new j,Ou=new j;function QE(n,t,e,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Ou.fromArray(n,o);let a=r.x*Math.abs(Ou.x)+r.y*Math.abs(Ou.y)+r.z*Math.abs(Ou.z),c=t.dot(Ou),d=e.dot(Ou),f=i.dot(Ou);if(Math.max(-Math.max(c,d,f),Math.min(c,d,f))>a)return!1}return!0}var Ite=new Ki,im=new j,eS=new j,Yo=class{constructor(t=new j,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):Ite.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;im.subVectors(t,this.center);let e=im.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(im,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(eS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(im.copy(t.center).add(eS)),this.expandByPoint(im.copy(t.center).sub(eS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},vl=new j,tS=new j,U_=new j,xc=new j,nS=new j,V_=new j,iS=new j,Bu=class{constructor(t=new j,e=new j(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,vl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=vl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(vl.copy(this.origin).addScaledVector(this.direction,e),vl.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){tS.copy(t).add(e).multiplyScalar(.5),U_.copy(e).sub(t).normalize(),xc.copy(this.origin).sub(tS);let o=t.distanceTo(e)*.5,s=-this.direction.dot(U_),a=xc.dot(this.direction),c=-xc.dot(U_),d=xc.lengthSq(),f=Math.abs(1-s*s),h,v,_,C;if(f>0)if(h=s*c-a,v=s*a-c,C=o*f,h>=0)if(v>=-C)if(v<=C){let w=1/f;h*=w,v*=w,_=h*(h+s*v+2*a)+v*(s*h+v+2*c)+d}else v=o,h=Math.max(0,-(s*v+a)),_=-h*h+v*(v+2*c)+d;else v=-o,h=Math.max(0,-(s*v+a)),_=-h*h+v*(v+2*c)+d;else v<=-C?(h=Math.max(0,-(-s*o+a)),v=h>0?-o:Math.min(Math.max(-o,-c),o),_=-h*h+v*(v+2*c)+d):v<=C?(h=0,v=Math.min(Math.max(-o,-c),o),_=v*(v+2*c)+d):(h=Math.max(0,-(s*o+a)),v=h>0?o:Math.min(Math.max(-o,-c),o),_=-h*h+v*(v+2*c)+d);else v=s>0?-o:o,h=Math.max(0,-(s*v+a)),_=-h*h+v*(v+2*c)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(tS).addScaledVector(U_,v),_}intersectSphere(t,e){vl.subVectors(t.center,this.origin);let i=vl.dot(this.direction),r=vl.dot(vl)-i*i,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,c=i+s;return c<0?null:a<0?this.at(c,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,o,s,a,c,d=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,v=this.origin;return d>=0?(i=(t.min.x-v.x)*d,r=(t.max.x-v.x)*d):(i=(t.max.x-v.x)*d,r=(t.min.x-v.x)*d),f>=0?(o=(t.min.y-v.y)*f,s=(t.max.y-v.y)*f):(o=(t.max.y-v.y)*f,s=(t.min.y-v.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(t.min.z-v.z)*h,c=(t.max.z-v.z)*h):(a=(t.max.z-v.z)*h,c=(t.min.z-v.z)*h),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,vl)!==null}intersectTriangle(t,e,i,r,o){nS.subVectors(e,t),V_.subVectors(i,t),iS.crossVectors(nS,V_);let s=this.direction.dot(iS),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;xc.subVectors(this.origin,t);let c=a*this.direction.dot(V_.crossVectors(xc,V_));if(c<0)return null;let d=a*this.direction.dot(nS.cross(xc));if(d<0||c+d>s)return null;let f=-a*xc.dot(iS);return f<0?null:this.at(f/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Kt=class n{constructor(t,e,i,r,o,s,a,c,d,f,h,v,_,C,w,b){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,c,d,f,h,v,_,C,w,b)}set(t,e,i,r,o,s,a,c,d,f,h,v,_,C,w,b){let x=this.elements;return x[0]=t,x[4]=e,x[8]=i,x[12]=r,x[1]=o,x[5]=s,x[9]=a,x[13]=c,x[2]=d,x[6]=f,x[10]=h,x[14]=v,x[3]=_,x[7]=C,x[11]=w,x[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/Pf.setFromMatrixColumn(t,0).length(),o=1/Pf.setFromMatrixColumn(t,1).length(),s=1/Pf.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),c=Math.cos(r),d=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(t.order==="XYZ"){let v=s*f,_=s*h,C=a*f,w=a*h;e[0]=c*f,e[4]=-c*h,e[8]=d,e[1]=_+C*d,e[5]=v-w*d,e[9]=-a*c,e[2]=w-v*d,e[6]=C+_*d,e[10]=s*c}else if(t.order==="YXZ"){let v=c*f,_=c*h,C=d*f,w=d*h;e[0]=v+w*a,e[4]=C*a-_,e[8]=s*d,e[1]=s*h,e[5]=s*f,e[9]=-a,e[2]=_*a-C,e[6]=w+v*a,e[10]=s*c}else if(t.order==="ZXY"){let v=c*f,_=c*h,C=d*f,w=d*h;e[0]=v-w*a,e[4]=-s*h,e[8]=C+_*a,e[1]=_+C*a,e[5]=s*f,e[9]=w-v*a,e[2]=-s*d,e[6]=a,e[10]=s*c}else if(t.order==="ZYX"){let v=s*f,_=s*h,C=a*f,w=a*h;e[0]=c*f,e[4]=C*d-_,e[8]=v*d+w,e[1]=c*h,e[5]=w*d+v,e[9]=_*d-C,e[2]=-d,e[6]=a*c,e[10]=s*c}else if(t.order==="YZX"){let v=s*c,_=s*d,C=a*c,w=a*d;e[0]=c*f,e[4]=w-v*h,e[8]=C*h+_,e[1]=h,e[5]=s*f,e[9]=-a*f,e[2]=-d*f,e[6]=_*h+C,e[10]=v-w*h}else if(t.order==="XZY"){let v=s*c,_=s*d,C=a*c,w=a*d;e[0]=c*f,e[4]=-h,e[8]=d*f,e[1]=v*h+w,e[5]=s*f,e[9]=_*h-C,e[2]=C*h-_,e[6]=a*f,e[10]=w*h+v}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Rte,t,Nte)}lookAt(t,e,i){let r=this.elements;return Go.subVectors(t,e),Go.lengthSq()===0&&(Go.z=1),Go.normalize(),bc.crossVectors(i,Go),bc.lengthSq()===0&&(Math.abs(i.z)===1?Go.x+=1e-4:Go.z+=1e-4,Go.normalize(),bc.crossVectors(i,Go)),bc.normalize(),B_.crossVectors(Go,bc),r[0]=bc.x,r[4]=B_.x,r[8]=Go.x,r[1]=bc.y,r[5]=B_.y,r[9]=Go.y,r[2]=bc.z,r[6]=B_.z,r[10]=Go.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[4],c=i[8],d=i[12],f=i[1],h=i[5],v=i[9],_=i[13],C=i[2],w=i[6],b=i[10],x=i[14],D=i[3],S=i[7],P=i[11],W=i[15],V=r[0],H=r[4],$=r[8],F=r[12],I=r[1],U=r[5],q=r[9],ie=r[13],oe=r[2],pe=r[6],fe=r[10],Te=r[14],ce=r[3],De=r[7],$e=r[11],Qe=r[15];return o[0]=s*V+a*I+c*oe+d*ce,o[4]=s*H+a*U+c*pe+d*De,o[8]=s*$+a*q+c*fe+d*$e,o[12]=s*F+a*ie+c*Te+d*Qe,o[1]=f*V+h*I+v*oe+_*ce,o[5]=f*H+h*U+v*pe+_*De,o[9]=f*$+h*q+v*fe+_*$e,o[13]=f*F+h*ie+v*Te+_*Qe,o[2]=C*V+w*I+b*oe+x*ce,o[6]=C*H+w*U+b*pe+x*De,o[10]=C*$+w*q+b*fe+x*$e,o[14]=C*F+w*ie+b*Te+x*Qe,o[3]=D*V+S*I+P*oe+W*ce,o[7]=D*H+S*U+P*pe+W*De,o[11]=D*$+S*q+P*fe+W*$e,o[15]=D*F+S*ie+P*Te+W*Qe,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],o=t[12],s=t[1],a=t[5],c=t[9],d=t[13],f=t[2],h=t[6],v=t[10],_=t[14],C=t[3],w=t[7],b=t[11],x=t[15];return C*(+o*c*h-r*d*h-o*a*v+i*d*v+r*a*_-i*c*_)+w*(+e*c*_-e*d*v+o*s*v-r*s*_+r*d*f-o*c*f)+b*(+e*d*h-e*a*_-o*s*h+i*s*_+o*a*f-i*d*f)+x*(-r*a*f-e*c*h+e*a*v+r*s*h-i*s*v+i*c*f)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],d=t[7],f=t[8],h=t[9],v=t[10],_=t[11],C=t[12],w=t[13],b=t[14],x=t[15],D=h*b*d-w*v*d+w*c*_-a*b*_-h*c*x+a*v*x,S=C*v*d-f*b*d-C*c*_+s*b*_+f*c*x-s*v*x,P=f*w*d-C*h*d+C*a*_-s*w*_-f*a*x+s*h*x,W=C*h*c-f*w*c-C*a*v+s*w*v+f*a*b-s*h*b,V=e*D+i*S+r*P+o*W;if(V===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let H=1/V;return t[0]=D*H,t[1]=(w*v*o-h*b*o-w*r*_+i*b*_+h*r*x-i*v*x)*H,t[2]=(a*b*o-w*c*o+w*r*d-i*b*d-a*r*x+i*c*x)*H,t[3]=(h*c*o-a*v*o-h*r*d+i*v*d+a*r*_-i*c*_)*H,t[4]=S*H,t[5]=(f*b*o-C*v*o+C*r*_-e*b*_-f*r*x+e*v*x)*H,t[6]=(C*c*o-s*b*o-C*r*d+e*b*d+s*r*x-e*c*x)*H,t[7]=(s*v*o-f*c*o+f*r*d-e*v*d-s*r*_+e*c*_)*H,t[8]=P*H,t[9]=(C*h*o-f*w*o-C*i*_+e*w*_+f*i*x-e*h*x)*H,t[10]=(s*w*o-C*a*o+C*i*d-e*w*d-s*i*x+e*a*x)*H,t[11]=(f*a*o-s*h*o-f*i*d+e*h*d+s*i*_-e*a*_)*H,t[12]=W*H,t[13]=(f*w*r-C*h*r+C*i*v-e*w*v-f*i*b+e*h*b)*H,t[14]=(C*a*r-s*w*r-C*i*c+e*w*c+s*i*b-e*a*b)*H,t[15]=(s*h*r-f*a*r+f*i*c-e*h*c-s*i*v+e*a*v)*H,this}scale(t){let e=this.elements,i=t.x,r=t.y,o=t.z;return e[0]*=i,e[4]*=r,e[8]*=o,e[1]*=i,e[5]*=r,e[9]*=o,e[2]*=i,e[6]*=r,e[10]*=o,e[3]*=i,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),o=1-i,s=t.x,a=t.y,c=t.z,d=o*s,f=o*a;return this.set(d*s+i,d*a-r*c,d*c+r*a,0,d*a+r*c,f*a+i,f*c-r*s,0,d*c-r*a,f*c+r*s,o*c*c+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,o,s){return this.set(1,i,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,o=e._x,s=e._y,a=e._z,c=e._w,d=o+o,f=s+s,h=a+a,v=o*d,_=o*f,C=o*h,w=s*f,b=s*h,x=a*h,D=c*d,S=c*f,P=c*h,W=i.x,V=i.y,H=i.z;return r[0]=(1-(w+x))*W,r[1]=(_+P)*W,r[2]=(C-S)*W,r[3]=0,r[4]=(_-P)*V,r[5]=(1-(v+x))*V,r[6]=(b+D)*V,r[7]=0,r[8]=(C+S)*H,r[9]=(b-D)*H,r[10]=(1-(v+w))*H,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,o=Pf.set(r[0],r[1],r[2]).length(),s=Pf.set(r[4],r[5],r[6]).length(),a=Pf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],ea.copy(this);let d=1/o,f=1/s,h=1/a;return ea.elements[0]*=d,ea.elements[1]*=d,ea.elements[2]*=d,ea.elements[4]*=f,ea.elements[5]*=f,ea.elements[6]*=f,ea.elements[8]*=h,ea.elements[9]*=h,ea.elements[10]*=h,e.setFromRotationMatrix(ea),i.x=o,i.y=s,i.z=a,this}makePerspective(t,e,i,r,o,s,a=El){let c=this.elements,d=2*o/(e-t),f=2*o/(i-r),h=(e+t)/(e-t),v=(i+r)/(i-r),_,C;if(a===El)_=-(s+o)/(s-o),C=-2*s*o/(s-o);else if(a===py)_=-s/(s-o),C=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=d,c[4]=0,c[8]=h,c[12]=0,c[1]=0,c[5]=f,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=_,c[14]=C,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,e,i,r,o,s,a=El){let c=this.elements,d=1/(e-t),f=1/(i-r),h=1/(s-o),v=(e+t)*d,_=(i+r)*f,C,w;if(a===El)C=(s+o)*h,w=-2*h;else if(a===py)C=o*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*d,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*f,c[9]=0,c[13]=-_,c[2]=0,c[6]=0,c[10]=w,c[14]=-C,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Pf=new j,ea=new Kt,Rte=new j(0,0,0),Nte=new j(1,1,1),bc=new j,B_=new j,Go=new j,ML=new Kt,wL=new Hr,zu=(()=>{class n{constructor(e=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,o=this._order){return this._x=e,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let o=e.elements,s=o[0],a=o[4],c=o[8],d=o[1],f=o[5],h=o[9],v=o[2],_=o[6],C=o[10];switch(i){case"XYZ":this._y=Math.asin(Br(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,C),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(_,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Br(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,C),this._z=Math.atan2(d,f)):(this._y=Math.atan2(-v,s),this._z=0);break;case"ZXY":this._x=Math.asin(Br(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,C),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-Br(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,C),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Br(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-v,s)):(this._x=0,this._y=Math.atan2(c,C));break;case"XZY":this._z=Math.asin(-Br(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(_,f),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-h,C),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return ML.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ML,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return wL.setFromEuler(this),this.setFromQuaternion(wL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),ym=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},Fte=0,EL=new j,Df=new Hr,_l=new Kt,z_=new j,rm=new j,kte=new j,Lte=new Hr,SL=new j(1,0,0),TL=new j(0,1,0),PL=new j(0,0,1),DL={type:"added"},Ute={type:"removed"},Of={type:"childadded",child:null},rS={type:"childremoved",child:null},hr=(()=>{class n extends Pl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Fte++}),this.uuid=ra(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new j,i=new zu,r=new Hr,o=new j(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Kt},normalMatrix:{value:new hn}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ym,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Df.setFromAxisAngle(e,i),this.quaternion.multiply(Df),this}rotateOnWorldAxis(e,i){return Df.setFromAxisAngle(e,i),this.quaternion.premultiply(Df),this}rotateX(e){return this.rotateOnAxis(SL,e)}rotateY(e){return this.rotateOnAxis(TL,e)}rotateZ(e){return this.rotateOnAxis(PL,e)}translateOnAxis(e,i){return EL.copy(e).applyQuaternion(this.quaternion),this.position.add(EL.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(SL,e)}translateY(e){return this.translateOnAxis(TL,e)}translateZ(e){return this.translateOnAxis(PL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_l.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?z_.copy(e):z_.set(e,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),rm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_l.lookAt(rm,z_,this.up):_l.lookAt(z_,rm,this.up),this.quaternion.setFromRotationMatrix(_l),o&&(_l.extractRotation(o.matrixWorld),Df.setFromRotationMatrix(_l),this.quaternion.premultiply(Df.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(DL),Of.child=e,this.dispatchEvent(Of),Of.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(Ute),rS.child=e,this.dispatchEvent(rS),rS.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_l.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_l.multiply(e.parent.matrixWorld)),e.applyMatrix4(_l),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(DL),Of.child=e,this.dispatchEvent(Of),Of.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rm,e,kte),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rm,Lte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let d=c.shapes;if(Array.isArray(d))for(let f=0,h=d.length;f<h;f++){let v=d[f];s(e.shapes,v)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let d=0,f=this.material.length;d<f;d++)c.push(s(e.materials,this.material[d]));o.material=c}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let d=this.animations[c];o.animations.push(s(e.animations,d))}}if(i){let c=a(e.geometries),d=a(e.materials),f=a(e.textures),h=a(e.images),v=a(e.shapes),_=a(e.skeletons),C=a(e.animations),w=a(e.nodes);c.length>0&&(r.geometries=c),d.length>0&&(r.materials=d),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),v.length>0&&(r.shapes=v),_.length>0&&(r.skeletons=_),C.length>0&&(r.animations=C),w.length>0&&(r.nodes=w)}return r.object=o,r;function a(c){let d=[];for(let f in c){let h=c[f];delete h.metadata,d.push(h)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new j(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),ta=new j,yl=new j,oS=new j,xl=new j,Af=new j,If=new j,OL=new j,sS=new j,aS=new j,lS=new j,cS=new an,uS=new an,dS=new an,Lu=class n{constructor(t=new j,e=new j,i=new j){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),ta.subVectors(t,e),r.cross(ta);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,i,r,o){ta.subVectors(r,e),yl.subVectors(i,e),oS.subVectors(t,e);let s=ta.dot(ta),a=ta.dot(yl),c=ta.dot(oS),d=yl.dot(yl),f=yl.dot(oS),h=s*d-a*a;if(h===0)return o.set(0,0,0),null;let v=1/h,_=(d*c-a*f)*v,C=(s*f-a*c)*v;return o.set(1-_-C,C,_)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,xl)===null?!1:xl.x>=0&&xl.y>=0&&xl.x+xl.y<=1}static getInterpolation(t,e,i,r,o,s,a,c){return this.getBarycoord(t,e,i,r,xl)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,xl.x),c.addScaledVector(s,xl.y),c.addScaledVector(a,xl.z),c)}static getInterpolatedAttribute(t,e,i,r,o,s){return cS.setScalar(0),uS.setScalar(0),dS.setScalar(0),cS.fromBufferAttribute(t,e),uS.fromBufferAttribute(t,i),dS.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(cS,o.x),s.addScaledVector(uS,o.y),s.addScaledVector(dS,o.z),s}static isFrontFacing(t,e,i,r){return ta.subVectors(i,e),yl.subVectors(t,e),ta.cross(yl).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ta.subVectors(this.c,this.b),yl.subVectors(this.a,this.b),ta.cross(yl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,o){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,o)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,o=this.c,s,a;Af.subVectors(r,i),If.subVectors(o,i),sS.subVectors(t,i);let c=Af.dot(sS),d=If.dot(sS);if(c<=0&&d<=0)return e.copy(i);aS.subVectors(t,r);let f=Af.dot(aS),h=If.dot(aS);if(f>=0&&h<=f)return e.copy(r);let v=c*h-f*d;if(v<=0&&c>=0&&f<=0)return s=c/(c-f),e.copy(i).addScaledVector(Af,s);lS.subVectors(t,o);let _=Af.dot(lS),C=If.dot(lS);if(C>=0&&_<=C)return e.copy(o);let w=_*d-c*C;if(w<=0&&d>=0&&C<=0)return a=d/(d-C),e.copy(i).addScaledVector(If,a);let b=f*C-_*h;if(b<=0&&h-f>=0&&_-C>=0)return OL.subVectors(o,r),a=(h-f)/(h-f+(_-C)),e.copy(r).addScaledVector(OL,a);let x=1/(b+w+v);return s=w*x,a=v*x,e.copy(i).addScaledVector(Af,s).addScaledVector(If,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},HU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cc={h:0,s:0,l:0},H_={h:0,s:0,l:0};function fS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var Tt=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ki){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Rn.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Rn.workingColorSpace){return this.r=t,this.g=e,this.b=i,Rn.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Rn.workingColorSpace){if(t=QT(t,1),e=Br(e,0,1),i=Br(i,0,1),e===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=fS(s,o,t+1/3),this.g=fS(s,o,t),this.b=fS(s,o,t-1/3)}return Rn.toWorkingColorSpace(this,r),this}setStyle(t,e=ki){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=ki){let i=HU[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Sl(t.r),this.g=Sl(t.g),this.b=Sl(t.b),this}copyLinearToSRGB(t){return this.r=jf(t.r),this.g=jf(t.g),this.b=jf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ki){return Rn.fromWorkingColorSpace(Vr.copy(this),t),Math.round(Br(Vr.r*255,0,255))*65536+Math.round(Br(Vr.g*255,0,255))*256+Math.round(Br(Vr.b*255,0,255))}getHexString(t=ki){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Rn.workingColorSpace){Rn.fromWorkingColorSpace(Vr.copy(this),e);let i=Vr.r,r=Vr.g,o=Vr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),c,d,f=(a+s)/2;if(a===s)c=0,d=0;else{let h=s-a;switch(d=f<=.5?h/(s+a):h/(2-s-a),s){case i:c=(r-o)/h+(r<o?6:0);break;case r:c=(o-i)/h+2;break;case o:c=(i-r)/h+4;break}c/=6}return t.h=c,t.s=d,t.l=f,t}getRGB(t,e=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(Vr.copy(this),e),t.r=Vr.r,t.g=Vr.g,t.b=Vr.b,t}getStyle(t=ki){Rn.fromWorkingColorSpace(Vr.copy(this),t);let e=Vr.r,i=Vr.g,r=Vr.b;return t!==ki?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Cc),this.setHSL(Cc.h+t,Cc.s+e,Cc.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Cc),t.getHSL(H_);let i=pm(Cc.h,H_.h,e),r=pm(Cc.s,H_.s,e),o=pm(Cc.l,H_.l,e);return this.setHSL(i,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*r,this.g=o[1]*e+o[4]*i+o[7]*r,this.b=o[2]*e+o[5]*i+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Vr=new Tt;Tt.NAMES=HU;var Vte=0,Wr=class extends Pl{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Vte++}),this.uuid=ra(),this.name="",this.blending=Hf,this.side=Da,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=TS,this.blendDst=PS,this.blendEquation=ku,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tt(0,0,0),this.blendAlpha=0,this.depthFunc=$f,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=hL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mf,this.stencilZFail=Mf,this.stencilZPass=Mf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Hf&&(i.blending=this.blending),this.side!==Da&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==TS&&(i.blendSrc=this.blendSrc),this.blendDst!==PS&&(i.blendDst=this.blendDst),this.blendEquation!==ku&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==$f&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==hL&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Mf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Mf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Mf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},Oa=class extends Wr{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new Tt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zu,this.combine=PU,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var or=new j,W_=new tn,Ei=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=uT,this.updateRanges=[],this.gpuType=ia,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)W_.fromBufferAttribute(this,e),W_.applyMatrix3(t),this.setXY(e,W_.x,W_.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix3(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix4(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyNormalMatrix(t),this.setXYZ(e,or.x,or.y,or.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.transformDirection(t),this.setXYZ(e,or.x,or.y,or.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=na(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Jn(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=na(e,this.array)),e}setX(t,e){return this.normalized&&(e=Jn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=na(e,this.array)),e}setY(t,e){return this.normalized&&(e=Jn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=na(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Jn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=na(e,this.array)),e}setW(t,e){return this.normalized&&(e=Jn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Jn(e,this.array),i=Jn(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Jn(e,this.array),i=Jn(i,this.array),r=Jn(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=Jn(e,this.array),i=Jn(i,this.array),r=Jn(r,this.array),o=Jn(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==uT&&(t.usage=this.usage),t}};var vy=class extends Ei{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var _y=class extends Ei{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var xs=class extends Ei{constructor(t,e,i){super(new Float32Array(t),e,i)}},Bte=0,_s=new Kt,hS=new hr,Rf=new j,$o=new Ki,om=new Ki,Mr=new j,Eo=class n extends Pl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Bte++}),this.uuid=ra(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(zU(t)?_y:vy)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new hn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return _s.makeRotationFromQuaternion(t),this.applyMatrix4(_s),this}rotateX(t){return _s.makeRotationX(t),this.applyMatrix4(_s),this}rotateY(t){return _s.makeRotationY(t),this.applyMatrix4(_s),this}rotateZ(t){return _s.makeRotationZ(t),this.applyMatrix4(_s),this}translate(t,e,i){return _s.makeTranslation(t,e,i),this.applyMatrix4(_s),this}scale(t,e,i){return _s.makeScale(t,e,i),this.applyMatrix4(_s),this}lookAt(t){return hS.lookAt(t),hS.updateMatrix(),this.applyMatrix4(hS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rf).negate(),this.translate(Rf.x,Rf.y,Rf.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,o=t.length;r<o;r++){let s=t[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new xs(i,3))}else{for(let i=0,r=e.count;i<r;i++){let o=t[i];e.setXYZ(i,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ki);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let o=e[i];$o.setFromBufferAttribute(o),this.morphTargetsRelative?(Mr.addVectors(this.boundingBox.min,$o.min),this.boundingBox.expandByPoint(Mr),Mr.addVectors(this.boundingBox.max,$o.max),this.boundingBox.expandByPoint(Mr)):(this.boundingBox.expandByPoint($o.min),this.boundingBox.expandByPoint($o.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Yo);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(t){let i=this.boundingSphere.center;if($o.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let a=e[o];om.setFromBufferAttribute(a),this.morphTargetsRelative?(Mr.addVectors($o.min,om.min),$o.expandByPoint(Mr),Mr.addVectors($o.max,om.max),$o.expandByPoint(Mr)):($o.expandByPoint(om.min),$o.expandByPoint(om.max))}$o.getCenter(i);let r=0;for(let o=0,s=t.count;o<s;o++)Mr.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(Mr));if(e)for(let o=0,s=e.length;o<s;o++){let a=e[o],c=this.morphTargetsRelative;for(let d=0,f=a.count;d<f;d++)Mr.fromBufferAttribute(a,d),c&&(Rf.fromBufferAttribute(t,d),Mr.add(Rf)),r=Math.max(r,i.distanceToSquared(Mr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ei(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let $=0;$<i.count;$++)a[$]=new j,c[$]=new j;let d=new j,f=new j,h=new j,v=new tn,_=new tn,C=new tn,w=new j,b=new j;function x($,F,I){d.fromBufferAttribute(i,$),f.fromBufferAttribute(i,F),h.fromBufferAttribute(i,I),v.fromBufferAttribute(o,$),_.fromBufferAttribute(o,F),C.fromBufferAttribute(o,I),f.sub(d),h.sub(d),_.sub(v),C.sub(v);let U=1/(_.x*C.y-C.x*_.y);isFinite(U)&&(w.copy(f).multiplyScalar(C.y).addScaledVector(h,-_.y).multiplyScalar(U),b.copy(h).multiplyScalar(_.x).addScaledVector(f,-C.x).multiplyScalar(U),a[$].add(w),a[F].add(w),a[I].add(w),c[$].add(b),c[F].add(b),c[I].add(b))}let D=this.groups;D.length===0&&(D=[{start:0,count:t.count}]);for(let $=0,F=D.length;$<F;++$){let I=D[$],U=I.start,q=I.count;for(let ie=U,oe=U+q;ie<oe;ie+=3)x(t.getX(ie+0),t.getX(ie+1),t.getX(ie+2))}let S=new j,P=new j,W=new j,V=new j;function H($){W.fromBufferAttribute(r,$),V.copy(W);let F=a[$];S.copy(F),S.sub(W.multiplyScalar(W.dot(F))).normalize(),P.crossVectors(V,F);let U=P.dot(c[$])<0?-1:1;s.setXYZW($,S.x,S.y,S.z,U)}for(let $=0,F=D.length;$<F;++$){let I=D[$],U=I.start,q=I.count;for(let ie=U,oe=U+q;ie<oe;ie+=3)H(t.getX(ie+0)),H(t.getX(ie+1)),H(t.getX(ie+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ei(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let v=0,_=i.count;v<_;v++)i.setXYZ(v,0,0,0);let r=new j,o=new j,s=new j,a=new j,c=new j,d=new j,f=new j,h=new j;if(t)for(let v=0,_=t.count;v<_;v+=3){let C=t.getX(v+0),w=t.getX(v+1),b=t.getX(v+2);r.fromBufferAttribute(e,C),o.fromBufferAttribute(e,w),s.fromBufferAttribute(e,b),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,C),c.fromBufferAttribute(i,w),d.fromBufferAttribute(i,b),a.add(f),c.add(f),d.add(f),i.setXYZ(C,a.x,a.y,a.z),i.setXYZ(w,c.x,c.y,c.z),i.setXYZ(b,d.x,d.y,d.z)}else for(let v=0,_=e.count;v<_;v+=3)r.fromBufferAttribute(e,v+0),o.fromBufferAttribute(e,v+1),s.fromBufferAttribute(e,v+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(v+0,f.x,f.y,f.z),i.setXYZ(v+1,f.x,f.y,f.z),i.setXYZ(v+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Mr.fromBufferAttribute(t,e),Mr.normalize(),t.setXYZ(e,Mr.x,Mr.y,Mr.z)}toNonIndexed(){function t(a,c){let d=a.array,f=a.itemSize,h=a.normalized,v=new d.constructor(c.length*f),_=0,C=0;for(let w=0,b=c.length;w<b;w++){a.isInterleavedBufferAttribute?_=c[w]*a.data.stride+a.offset:_=c[w]*f;for(let x=0;x<f;x++)v[C++]=d[_++]}return new Ei(v,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],d=t(c,i);e.setAttribute(a,d)}let o=this.morphAttributes;for(let a in o){let c=[],d=o[a];for(let f=0,h=d.length;f<h;f++){let v=d[f],_=t(v,i);c.push(_)}e.morphAttributes[a]=c}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let d=s[a];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let d in c)c[d]!==void 0&&(t[d]=c[d]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let c in i){let d=i[c];t.data.attributes[c]=d.toJSON(t.data)}let r={},o=!1;for(let c in this.morphAttributes){let d=this.morphAttributes[c],f=[];for(let h=0,v=d.length;h<v;h++){let _=d[h];f.push(_.toJSON(t.data))}f.length>0&&(r[c]=f,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let r=t.attributes;for(let d in r){let f=r[d];this.setAttribute(d,f.clone(e))}let o=t.morphAttributes;for(let d in o){let f=[],h=o[d];for(let v=0,_=h.length;v<_;v++)f.push(h[v].clone(e));this.morphAttributes[d]=f}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let d=0,f=s.length;d<f;d++){let h=s[d];this.addGroup(h.start,h.count,h.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},AL=new Kt,Au=new Bu,j_=new Yo,IL=new j,G_=new j,$_=new j,q_=new j,pS=new j,Y_=new j,RL=new j,X_=new j,Ci=class extends hr{constructor(t=new Eo,e=new Oa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(o&&a){Y_.set(0,0,0);for(let c=0,d=o.length;c<d;c++){let f=a[c],h=o[c];f!==0&&(pS.fromBufferAttribute(h,t),s?Y_.addScaledVector(pS,f):Y_.addScaledVector(pS.sub(e),f))}e.add(Y_)}return e}raycast(t,e){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),j_.copy(i.boundingSphere),j_.applyMatrix4(o),Au.copy(t.ray).recast(t.near),!(j_.containsPoint(Au.origin)===!1&&(Au.intersectSphere(j_,IL)===null||Au.origin.distanceToSquared(IL)>(t.far-t.near)**2))&&(AL.copy(o).invert(),Au.copy(t.ray).applyMatrix4(AL),!(i.boundingBox!==null&&Au.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Au)))}_computeIntersections(t,e,i){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,d=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,v=o.groups,_=o.drawRange;if(a!==null)if(Array.isArray(s))for(let C=0,w=v.length;C<w;C++){let b=v[C],x=s[b.materialIndex],D=Math.max(b.start,_.start),S=Math.min(a.count,Math.min(b.start+b.count,_.start+_.count));for(let P=D,W=S;P<W;P+=3){let V=a.getX(P),H=a.getX(P+1),$=a.getX(P+2);r=Z_(this,x,t,i,d,f,h,V,H,$),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=b.materialIndex,e.push(r))}}else{let C=Math.max(0,_.start),w=Math.min(a.count,_.start+_.count);for(let b=C,x=w;b<x;b+=3){let D=a.getX(b),S=a.getX(b+1),P=a.getX(b+2);r=Z_(this,s,t,i,d,f,h,D,S,P),r&&(r.faceIndex=Math.floor(b/3),e.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let C=0,w=v.length;C<w;C++){let b=v[C],x=s[b.materialIndex],D=Math.max(b.start,_.start),S=Math.min(c.count,Math.min(b.start+b.count,_.start+_.count));for(let P=D,W=S;P<W;P+=3){let V=P,H=P+1,$=P+2;r=Z_(this,x,t,i,d,f,h,V,H,$),r&&(r.faceIndex=Math.floor(P/3),r.face.materialIndex=b.materialIndex,e.push(r))}}else{let C=Math.max(0,_.start),w=Math.min(c.count,_.start+_.count);for(let b=C,x=w;b<x;b+=3){let D=b,S=b+1,P=b+2;r=Z_(this,s,t,i,d,f,h,D,S,P),r&&(r.faceIndex=Math.floor(b/3),e.push(r))}}}};function zte(n,t,e,i,r,o,s,a){let c;if(t.side===wo?c=i.intersectTriangle(s,o,r,!0,a):c=i.intersectTriangle(r,o,s,t.side===Da,a),c===null)return null;X_.copy(a),X_.applyMatrix4(n.matrixWorld);let d=e.ray.origin.distanceTo(X_);return d<e.near||d>e.far?null:{distance:d,point:X_.clone(),object:n}}function Z_(n,t,e,i,r,o,s,a,c,d){n.getVertexPosition(a,G_),n.getVertexPosition(c,$_),n.getVertexPosition(d,q_);let f=zte(n,t,e,i,G_,$_,q_,RL);if(f){let h=new j;Lu.getBarycoord(RL,G_,$_,q_,h),r&&(f.uv=Lu.getInterpolatedAttribute(r,a,c,d,h,new tn)),o&&(f.uv1=Lu.getInterpolatedAttribute(o,a,c,d,h,new tn)),s&&(f.normal=Lu.getInterpolatedAttribute(s,a,c,d,h,new j),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let v={a,b:c,c:d,normal:new j,materialIndex:0};Lu.getNormal(G_,$_,q_,v.normal),f.face=v,f.barycoord=h}return f}var xm=class n extends Eo{constructor(t=1,e=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],d=[],f=[],h=[],v=0,_=0;C("z","y","x",-1,-1,i,e,t,s,o,0),C("z","y","x",1,-1,i,e,-t,s,o,1),C("x","z","y",1,1,t,i,e,r,s,2),C("x","z","y",1,-1,t,i,-e,r,s,3),C("x","y","z",1,-1,t,e,i,r,o,4),C("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(c),this.setAttribute("position",new xs(d,3)),this.setAttribute("normal",new xs(f,3)),this.setAttribute("uv",new xs(h,2));function C(w,b,x,D,S,P,W,V,H,$,F){let I=P/H,U=W/$,q=P/2,ie=W/2,oe=V/2,pe=H+1,fe=$+1,Te=0,ce=0,De=new j;for(let $e=0;$e<fe;$e++){let Qe=$e*U-ie;for(let Jt=0;Jt<pe;Jt++){let Dn=Jt*I-q;De[w]=Dn*D,De[b]=Qe*S,De[x]=oe,d.push(De.x,De.y,De.z),De[w]=0,De[b]=0,De[x]=V>0?1:-1,f.push(De.x,De.y,De.z),h.push(Jt/H),h.push(1-$e/$),Te+=1}}for(let $e=0;$e<$;$e++)for(let Qe=0;Qe<H;Qe++){let Jt=v+Qe+pe*$e,Dn=v+Qe+pe*($e+1),ve=v+(Qe+1)+pe*($e+1),Ne=v+(Qe+1)+pe*$e;c.push(Jt,Dn,Ne),c.push(Dn,ve,Ne),ce+=6}a.addGroup(_,ce,F),_+=ce,v+=Te}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function eh(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function lo(n){let t={};for(let e=0;e<n.length;e++){let i=eh(n[e]);for(let r in i)t[r]=i[r]}return t}function Hte(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function WU(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Rn.workingColorSpace}var Wte={clone:eh,merge:lo},jte=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Gte=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Aa=class extends Wr{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=jte,this.fragmentShader=Gte,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=eh(t.uniforms),this.uniformsGroups=Hte(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},yy=class extends hr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=El}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Mc=new j,NL=new tn,FL=new tn,fr=class extends yy{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=Qf*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(hm*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Qf*2*Math.atan(Math.tan(hm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Mc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Mc.x,Mc.y).multiplyScalar(-t/Mc.z),Mc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Mc.x,Mc.y).multiplyScalar(-t/Mc.z)}getViewSize(t,e){return this.getViewBounds(t,NL,FL),e.subVectors(FL,NL)}setViewOffset(t,e,i,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(hm*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,d=s.fullHeight;o+=s.offsetX*r/c,e-=s.offsetY*i/d,r*=s.width/c,i*=s.height/d}let a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Nf=-90,Ff=1,pT=class extends hr{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new fr(Nf,Ff,t,e);r.layers=this.layers,this.add(r);let o=new fr(Nf,Ff,t,e);o.layers=this.layers,this.add(o);let s=new fr(Nf,Ff,t,e);s.layers=this.layers,this.add(s);let a=new fr(Nf,Ff,t,e);a.layers=this.layers,this.add(a);let c=new fr(Nf,Ff,t,e);c.layers=this.layers,this.add(c);let d=new fr(Nf,Ff,t,e);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,o,s,a,c]=e;for(let d of e)this.remove(d);if(t===El)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===py)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let d of e)this.add(d),d.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,d,f]=this.children,h=t.getRenderTarget(),v=t.getActiveCubeFace(),_=t.getActiveMipmapLevel(),C=t.xr.enabled;t.xr.enabled=!1;let w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,o),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,c),t.setRenderTarget(i,4,r),t.render(e,d),i.texture.generateMipmaps=w,t.setRenderTarget(i,5,r),t.render(e,f),t.setRenderTarget(h,v,_),t.xr.enabled=C,i.texture.needsPMREMUpdate=!0}},xy=class extends Ms{constructor(t,e,i,r,o,s,a,c,d,f){t=t!==void 0?t:[],e=e!==void 0?e:qf,super(t,e,i,r,o,s,a,c,d,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},mT=class extends Dl{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new xy(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:wr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new xm(5,5,5),o=new Aa({name:"CubemapFromEquirect",uniforms:eh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:wo,blending:Ec});o.uniforms.tEquirect.value=e;let s=new Ci(r,o),a=e.minFilter;return e.minFilter===Mo&&(e.minFilter=wr),new pT(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,r){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,r);t.setRenderTarget(o)}},mS=new j,$te=new j,qte=new hn,Ml=class{constructor(t=new j(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=mS.subVectors(i,e).cross($te.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(mS),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||qte.getNormalMatrix(t),r=this.coplanarPoint(mS).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Iu=new Yo,K_=new j,bm=class{constructor(t=new Ml,e=new Ml,i=new Ml,r=new Ml,o=new Ml,s=new Ml){this.planes=[t,e,i,r,o,s]}set(t,e,i,r,o,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=El){let i=this.planes,r=t.elements,o=r[0],s=r[1],a=r[2],c=r[3],d=r[4],f=r[5],h=r[6],v=r[7],_=r[8],C=r[9],w=r[10],b=r[11],x=r[12],D=r[13],S=r[14],P=r[15];if(i[0].setComponents(c-o,v-d,b-_,P-x).normalize(),i[1].setComponents(c+o,v+d,b+_,P+x).normalize(),i[2].setComponents(c+s,v+f,b+C,P+D).normalize(),i[3].setComponents(c-s,v-f,b-C,P-D).normalize(),i[4].setComponents(c-a,v-h,b-w,P-S).normalize(),e===El)i[5].setComponents(c+a,v+h,b+w,P+S).normalize();else if(e===py)i[5].setComponents(a,h,w,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Iu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Iu.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Iu)}intersectsSprite(t){return Iu.center.set(0,0,0),Iu.radius=.7071067811865476,Iu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Iu)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(K_.x=r.normal.x>0?t.max.x:t.min.x,K_.y=r.normal.y>0?t.max.y:t.min.y,K_.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(K_)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function jU(){let n=null,t=!1,e=null,i=null;function r(o,s){e(o,s),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function Yte(n){let t=new WeakMap;function e(a,c){let d=a.array,f=a.usage,h=d.byteLength,v=n.createBuffer();n.bindBuffer(c,v),n.bufferData(c,d,f),a.onUploadCallback();let _;if(d instanceof Float32Array)_=n.FLOAT;else if(d instanceof Uint16Array)a.isFloat16BufferAttribute?_=n.HALF_FLOAT:_=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)_=n.SHORT;else if(d instanceof Uint32Array)_=n.UNSIGNED_INT;else if(d instanceof Int32Array)_=n.INT;else if(d instanceof Int8Array)_=n.BYTE;else if(d instanceof Uint8Array)_=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)_=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:v,type:_,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,c,d){let f=c.array,h=c.updateRanges;if(n.bindBuffer(d,a),h.length===0)n.bufferSubData(d,0,f);else{h.sort((_,C)=>_.start-C.start);let v=0;for(let _=1;_<h.length;_++){let C=h[v],w=h[_];w.start<=C.start+C.count+1?C.count=Math.max(C.count,w.start+w.count-C.start):(++v,h[v]=w)}h.length=v+1;for(let _=0,C=h.length;_<C;_++){let w=h[_];n.bufferSubData(d,w.start*f.BYTES_PER_ELEMENT,f,w.start,w.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=t.get(a);c&&(n.deleteBuffer(c.buffer),t.delete(a))}function s(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=t.get(a);(!f||f.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let d=t.get(a);if(d===void 0)t.set(a,e(a,c));else if(d.version<a.version){if(d.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(d.buffer,a,c),d.version=a.version}}return{get:r,remove:o,update:s}}var bs=class n extends Eo{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let o=t/2,s=e/2,a=Math.floor(i),c=Math.floor(r),d=a+1,f=c+1,h=t/a,v=e/c,_=[],C=[],w=[],b=[];for(let x=0;x<f;x++){let D=x*v-s;for(let S=0;S<d;S++){let P=S*h-o;C.push(P,-D,0),w.push(0,0,1),b.push(S/a),b.push(1-x/c)}}for(let x=0;x<c;x++)for(let D=0;D<a;D++){let S=D+d*x,P=D+d*(x+1),W=D+1+d*(x+1),V=D+1+d*x;_.push(S,P,V),_.push(P,W,V)}this.setIndex(_),this.setAttribute("position",new xs(C,3)),this.setAttribute("normal",new xs(w,3)),this.setAttribute("uv",new xs(b,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}},Xte=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Zte=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Kte=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Jte=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Qte=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ene=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ine=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,rne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,one=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,sne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,ane=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,lne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,une=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,dne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,fne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,hne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,mne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,gne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,vne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,_ne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,xne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,bne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Cne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Mne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,wne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ene="gl_FragColor = linearToOutputTexel( gl_FragColor );",Sne=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Tne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Dne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,One=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ane=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ine=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Rne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Nne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Fne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kne=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Lne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Une=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Bne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,zne=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Hne=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Wne=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jne=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Gne=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,$ne=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,qne=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yne=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Xne=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zne=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Kne=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Jne=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Qne=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eie=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,tie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,nie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,iie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,rie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,sie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,aie=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,lie=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,uie=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,die=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,hie=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_ie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,yie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,xie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,bie=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Cie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Mie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,wie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Eie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Sie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Tie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Die=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Oie=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Aie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Iie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Rie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Nie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Fie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,kie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Lie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Uie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Vie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Bie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,zie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Hie=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Wie=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,jie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Gie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$ie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,qie=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Yie=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Xie=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Zie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Kie=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Jie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Qie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ere=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,tre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,nre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ire=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,rre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ore=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,are=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ure=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fre=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,hre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,mre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,gre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_re=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,yre=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xre=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bre=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cre=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Mre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wre=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ere=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Sre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Tre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,gn={alphahash_fragment:Xte,alphahash_pars_fragment:Zte,alphamap_fragment:Kte,alphamap_pars_fragment:Jte,alphatest_fragment:Qte,alphatest_pars_fragment:ene,aomap_fragment:tne,aomap_pars_fragment:nne,batching_pars_vertex:ine,batching_vertex:rne,begin_vertex:one,beginnormal_vertex:sne,bsdfs:ane,iridescence_fragment:lne,bumpmap_pars_fragment:cne,clipping_planes_fragment:une,clipping_planes_pars_fragment:dne,clipping_planes_pars_vertex:fne,clipping_planes_vertex:hne,color_fragment:pne,color_pars_fragment:mne,color_pars_vertex:gne,color_vertex:vne,common:_ne,cube_uv_reflection_fragment:yne,defaultnormal_vertex:xne,displacementmap_pars_vertex:bne,displacementmap_vertex:Cne,emissivemap_fragment:Mne,emissivemap_pars_fragment:wne,colorspace_fragment:Ene,colorspace_pars_fragment:Sne,envmap_fragment:Tne,envmap_common_pars_fragment:Pne,envmap_pars_fragment:Dne,envmap_pars_vertex:One,envmap_physical_pars_fragment:zne,envmap_vertex:Ane,fog_vertex:Ine,fog_pars_vertex:Rne,fog_fragment:Nne,fog_pars_fragment:Fne,gradientmap_pars_fragment:kne,lightmap_pars_fragment:Lne,lights_lambert_fragment:Une,lights_lambert_pars_fragment:Vne,lights_pars_begin:Bne,lights_toon_fragment:Hne,lights_toon_pars_fragment:Wne,lights_phong_fragment:jne,lights_phong_pars_fragment:Gne,lights_physical_fragment:$ne,lights_physical_pars_fragment:qne,lights_fragment_begin:Yne,lights_fragment_maps:Xne,lights_fragment_end:Zne,logdepthbuf_fragment:Kne,logdepthbuf_pars_fragment:Jne,logdepthbuf_pars_vertex:Qne,logdepthbuf_vertex:eie,map_fragment:tie,map_pars_fragment:nie,map_particle_fragment:iie,map_particle_pars_fragment:rie,metalnessmap_fragment:oie,metalnessmap_pars_fragment:sie,morphinstance_vertex:aie,morphcolor_vertex:lie,morphnormal_vertex:cie,morphtarget_pars_vertex:uie,morphtarget_vertex:die,normal_fragment_begin:fie,normal_fragment_maps:hie,normal_pars_fragment:pie,normal_pars_vertex:mie,normal_vertex:gie,normalmap_pars_fragment:vie,clearcoat_normal_fragment_begin:_ie,clearcoat_normal_fragment_maps:yie,clearcoat_pars_fragment:xie,iridescence_pars_fragment:bie,opaque_fragment:Cie,packing:Mie,premultiplied_alpha_fragment:wie,project_vertex:Eie,dithering_fragment:Sie,dithering_pars_fragment:Tie,roughnessmap_fragment:Pie,roughnessmap_pars_fragment:Die,shadowmap_pars_fragment:Oie,shadowmap_pars_vertex:Aie,shadowmap_vertex:Iie,shadowmask_pars_fragment:Rie,skinbase_vertex:Nie,skinning_pars_vertex:Fie,skinning_vertex:kie,skinnormal_vertex:Lie,specularmap_fragment:Uie,specularmap_pars_fragment:Vie,tonemapping_fragment:Bie,tonemapping_pars_fragment:zie,transmission_fragment:Hie,transmission_pars_fragment:Wie,uv_pars_fragment:jie,uv_pars_vertex:Gie,uv_vertex:$ie,worldpos_vertex:qie,background_vert:Yie,background_frag:Xie,backgroundCube_vert:Zie,backgroundCube_frag:Kie,cube_vert:Jie,cube_frag:Qie,depth_vert:ere,depth_frag:tre,distanceRGBA_vert:nre,distanceRGBA_frag:ire,equirect_vert:rre,equirect_frag:ore,linedashed_vert:sre,linedashed_frag:are,meshbasic_vert:lre,meshbasic_frag:cre,meshlambert_vert:ure,meshlambert_frag:dre,meshmatcap_vert:fre,meshmatcap_frag:hre,meshnormal_vert:pre,meshnormal_frag:mre,meshphong_vert:gre,meshphong_frag:vre,meshphysical_vert:_re,meshphysical_frag:yre,meshtoon_vert:xre,meshtoon_frag:bre,points_vert:Cre,points_frag:Mre,shadow_vert:wre,shadow_frag:Ere,sprite_vert:Sre,sprite_frag:Tre},Ge={common:{diffuse:{value:new Tt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new hn}},envmap:{envMap:{value:null},envMapRotation:{value:new hn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new hn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new hn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new hn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new hn},normalScale:{value:new tn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new hn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new hn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new hn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new hn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0},uvTransform:{value:new hn}},sprite:{diffuse:{value:new Tt(16777215)},opacity:{value:1},center:{value:new tn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}}},Ta={basic:{uniforms:lo([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:gn.meshbasic_vert,fragmentShader:gn.meshbasic_frag},lambert:{uniforms:lo([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new Tt(0)}}]),vertexShader:gn.meshlambert_vert,fragmentShader:gn.meshlambert_frag},phong:{uniforms:lo([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new Tt(0)},specular:{value:new Tt(1118481)},shininess:{value:30}}]),vertexShader:gn.meshphong_vert,fragmentShader:gn.meshphong_frag},standard:{uniforms:lo([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new Tt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag},toon:{uniforms:lo([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new Tt(0)}}]),vertexShader:gn.meshtoon_vert,fragmentShader:gn.meshtoon_frag},matcap:{uniforms:lo([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:gn.meshmatcap_vert,fragmentShader:gn.meshmatcap_frag},points:{uniforms:lo([Ge.points,Ge.fog]),vertexShader:gn.points_vert,fragmentShader:gn.points_frag},dashed:{uniforms:lo([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:gn.linedashed_vert,fragmentShader:gn.linedashed_frag},depth:{uniforms:lo([Ge.common,Ge.displacementmap]),vertexShader:gn.depth_vert,fragmentShader:gn.depth_frag},normal:{uniforms:lo([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:gn.meshnormal_vert,fragmentShader:gn.meshnormal_frag},sprite:{uniforms:lo([Ge.sprite,Ge.fog]),vertexShader:gn.sprite_vert,fragmentShader:gn.sprite_frag},background:{uniforms:{uvTransform:{value:new hn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:gn.background_vert,fragmentShader:gn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new hn}},vertexShader:gn.backgroundCube_vert,fragmentShader:gn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:gn.cube_vert,fragmentShader:gn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:gn.equirect_vert,fragmentShader:gn.equirect_frag},distanceRGBA:{uniforms:lo([Ge.common,Ge.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:gn.distanceRGBA_vert,fragmentShader:gn.distanceRGBA_frag},shadow:{uniforms:lo([Ge.lights,Ge.fog,{color:{value:new Tt(0)},opacity:{value:1}}]),vertexShader:gn.shadow_vert,fragmentShader:gn.shadow_frag}};Ta.physical={uniforms:lo([Ta.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new hn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new hn},clearcoatNormalScale:{value:new tn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new hn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new hn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new hn},sheen:{value:0},sheenColor:{value:new Tt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new hn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new hn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new hn},transmissionSamplerSize:{value:new tn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new hn},attenuationDistance:{value:0},attenuationColor:{value:new Tt(0)},specularColor:{value:new Tt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new hn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new hn},anisotropyVector:{value:new tn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new hn}}]),vertexShader:gn.meshphysical_vert,fragmentShader:gn.meshphysical_frag};var J_={r:0,b:0,g:0},Ru=new zu,Pre=new Kt;function Dre(n,t,e,i,r,o,s){let a=new Tt(0),c=o===!0?0:1,d,f,h=null,v=0,_=null;function C(D){let S=D.isScene===!0?D.background:null;return S&&S.isTexture&&(S=(D.backgroundBlurriness>0?e:t).get(S)),S}function w(D){let S=!1,P=C(D);P===null?x(a,c):P&&P.isColor&&(x(P,1),S=!0);let W=n.xr.getEnvironmentBlendMode();W==="additive"?i.buffers.color.setClear(0,0,0,1,s):W==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function b(D,S){let P=C(S);P&&(P.isCubeTexture||P.mapping===zy)?(f===void 0&&(f=new Ci(new xm(1,1,1),new Aa({name:"BackgroundCubeMaterial",uniforms:eh(Ta.backgroundCube.uniforms),vertexShader:Ta.backgroundCube.vertexShader,fragmentShader:Ta.backgroundCube.fragmentShader,side:wo,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(W,V,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Ru.copy(S.backgroundRotation),Ru.x*=-1,Ru.y*=-1,Ru.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Ru.y*=-1,Ru.z*=-1),f.material.uniforms.envMap.value=P,f.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Pre.makeRotationFromEuler(Ru)),f.material.toneMapped=Rn.getTransfer(P.colorSpace)!==oi,(h!==P||v!==P.version||_!==n.toneMapping)&&(f.material.needsUpdate=!0,h=P,v=P.version,_=n.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null)):P&&P.isTexture&&(d===void 0&&(d=new Ci(new bs(2,2),new Aa({name:"BackgroundMaterial",uniforms:eh(Ta.background.uniforms),vertexShader:Ta.background.vertexShader,fragmentShader:Ta.background.fragmentShader,side:Da,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=P,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.toneMapped=Rn.getTransfer(P.colorSpace)!==oi,P.matrixAutoUpdate===!0&&P.updateMatrix(),d.material.uniforms.uvTransform.value.copy(P.matrix),(h!==P||v!==P.version||_!==n.toneMapping)&&(d.material.needsUpdate=!0,h=P,v=P.version,_=n.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null))}function x(D,S){D.getRGB(J_,WU(n)),i.buffers.color.setClear(J_.r,J_.g,J_.b,S,s)}return{getClearColor:function(){return a},setClearColor:function(D,S=1){a.set(D),c=S,x(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(D){c=D,x(a,c)},render:w,addToRenderList:b}}function Ore(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=v(null),o=r,s=!1;function a(I,U,q,ie,oe){let pe=!1,fe=h(ie,q,U);o!==fe&&(o=fe,d(o.object)),pe=_(I,ie,q,oe),pe&&C(I,ie,q,oe),oe!==null&&t.update(oe,n.ELEMENT_ARRAY_BUFFER),(pe||s)&&(s=!1,P(I,U,q,ie),oe!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(oe).buffer))}function c(){return n.createVertexArray()}function d(I){return n.bindVertexArray(I)}function f(I){return n.deleteVertexArray(I)}function h(I,U,q){let ie=q.wireframe===!0,oe=i[I.id];oe===void 0&&(oe={},i[I.id]=oe);let pe=oe[U.id];pe===void 0&&(pe={},oe[U.id]=pe);let fe=pe[ie];return fe===void 0&&(fe=v(c()),pe[ie]=fe),fe}function v(I){let U=[],q=[],ie=[];for(let oe=0;oe<e;oe++)U[oe]=0,q[oe]=0,ie[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:q,attributeDivisors:ie,object:I,attributes:{},index:null}}function _(I,U,q,ie){let oe=o.attributes,pe=U.attributes,fe=0,Te=q.getAttributes();for(let ce in Te)if(Te[ce].location>=0){let $e=oe[ce],Qe=pe[ce];if(Qe===void 0&&(ce==="instanceMatrix"&&I.instanceMatrix&&(Qe=I.instanceMatrix),ce==="instanceColor"&&I.instanceColor&&(Qe=I.instanceColor)),$e===void 0||$e.attribute!==Qe||Qe&&$e.data!==Qe.data)return!0;fe++}return o.attributesNum!==fe||o.index!==ie}function C(I,U,q,ie){let oe={},pe=U.attributes,fe=0,Te=q.getAttributes();for(let ce in Te)if(Te[ce].location>=0){let $e=pe[ce];$e===void 0&&(ce==="instanceMatrix"&&I.instanceMatrix&&($e=I.instanceMatrix),ce==="instanceColor"&&I.instanceColor&&($e=I.instanceColor));let Qe={};Qe.attribute=$e,$e&&$e.data&&(Qe.data=$e.data),oe[ce]=Qe,fe++}o.attributes=oe,o.attributesNum=fe,o.index=ie}function w(){let I=o.newAttributes;for(let U=0,q=I.length;U<q;U++)I[U]=0}function b(I){x(I,0)}function x(I,U){let q=o.newAttributes,ie=o.enabledAttributes,oe=o.attributeDivisors;q[I]=1,ie[I]===0&&(n.enableVertexAttribArray(I),ie[I]=1),oe[I]!==U&&(n.vertexAttribDivisor(I,U),oe[I]=U)}function D(){let I=o.newAttributes,U=o.enabledAttributes;for(let q=0,ie=U.length;q<ie;q++)U[q]!==I[q]&&(n.disableVertexAttribArray(q),U[q]=0)}function S(I,U,q,ie,oe,pe,fe){fe===!0?n.vertexAttribIPointer(I,U,q,oe,pe):n.vertexAttribPointer(I,U,q,ie,oe,pe)}function P(I,U,q,ie){w();let oe=ie.attributes,pe=q.getAttributes(),fe=U.defaultAttributeValues;for(let Te in pe){let ce=pe[Te];if(ce.location>=0){let De=oe[Te];if(De===void 0&&(Te==="instanceMatrix"&&I.instanceMatrix&&(De=I.instanceMatrix),Te==="instanceColor"&&I.instanceColor&&(De=I.instanceColor)),De!==void 0){let $e=De.normalized,Qe=De.itemSize,Jt=t.get(De);if(Jt===void 0)continue;let Dn=Jt.buffer,ve=Jt.type,Ne=Jt.bytesPerElement,rt=ve===n.INT||ve===n.UNSIGNED_INT||De.gpuType===jT;if(De.isInterleavedBufferAttribute){let ze=De.data,Nt=ze.stride,Vt=De.offset;if(ze.isInstancedInterleavedBuffer){for(let nn=0;nn<ce.locationSize;nn++)x(ce.location+nn,ze.meshPerAttribute);I.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let nn=0;nn<ce.locationSize;nn++)b(ce.location+nn);n.bindBuffer(n.ARRAY_BUFFER,Dn);for(let nn=0;nn<ce.locationSize;nn++)S(ce.location+nn,Qe/ce.locationSize,ve,$e,Nt*Ne,(Vt+Qe/ce.locationSize*nn)*Ne,rt)}else{if(De.isInstancedBufferAttribute){for(let ze=0;ze<ce.locationSize;ze++)x(ce.location+ze,De.meshPerAttribute);I.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let ze=0;ze<ce.locationSize;ze++)b(ce.location+ze);n.bindBuffer(n.ARRAY_BUFFER,Dn);for(let ze=0;ze<ce.locationSize;ze++)S(ce.location+ze,Qe/ce.locationSize,ve,$e,Qe*Ne,Qe/ce.locationSize*ze*Ne,rt)}}else if(fe!==void 0){let $e=fe[Te];if($e!==void 0)switch($e.length){case 2:n.vertexAttrib2fv(ce.location,$e);break;case 3:n.vertexAttrib3fv(ce.location,$e);break;case 4:n.vertexAttrib4fv(ce.location,$e);break;default:n.vertexAttrib1fv(ce.location,$e)}}}}D()}function W(){$();for(let I in i){let U=i[I];for(let q in U){let ie=U[q];for(let oe in ie)f(ie[oe].object),delete ie[oe];delete U[q]}delete i[I]}}function V(I){if(i[I.id]===void 0)return;let U=i[I.id];for(let q in U){let ie=U[q];for(let oe in ie)f(ie[oe].object),delete ie[oe];delete U[q]}delete i[I.id]}function H(I){for(let U in i){let q=i[U];if(q[I.id]===void 0)continue;let ie=q[I.id];for(let oe in ie)f(ie[oe].object),delete ie[oe];delete q[I.id]}}function $(){F(),s=!0,o!==r&&(o=r,d(o.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:$,resetDefaultState:F,dispose:W,releaseStatesOfGeometry:V,releaseStatesOfProgram:H,initAttributes:w,enableAttribute:b,disableUnusedAttributes:D}}function Are(n,t,e){let i;function r(d){i=d}function o(d,f){n.drawArrays(i,d,f),e.update(f,i,1)}function s(d,f,h){h!==0&&(n.drawArraysInstanced(i,d,f,h),e.update(f,i,h))}function a(d,f,h){if(h===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,d,0,f,0,h);let _=0;for(let C=0;C<h;C++)_+=f[C];e.update(_,i,1)}function c(d,f,h,v){if(h===0)return;let _=t.get("WEBGL_multi_draw");if(_===null)for(let C=0;C<d.length;C++)s(d[C],f[C],v[C]);else{_.multiDrawArraysInstancedWEBGL(i,d,0,f,0,v,0,h);let C=0;for(let w=0;w<h;w++)C+=f[w]*v[w];e.update(C,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function Ire(n,t,e,i){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let H=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(H){return!(H!==ys&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(H){let $=H===Pm&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(H!==Tl&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==ia&&!$)}function c(H){if(H==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=e.precision!==void 0?e.precision:"highp",f=c(d);f!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",f,"instead."),d=f);let h=e.logarithmicDepthBuffer===!0,v=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),_=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),C=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_TEXTURE_SIZE),b=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),D=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),P=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),W=C>0,V=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:d,logarithmicDepthBuffer:h,reverseDepthBuffer:v,maxTextures:_,maxVertexTextures:C,maxTextureSize:w,maxCubemapSize:b,maxAttributes:x,maxVertexUniforms:D,maxVaryings:S,maxFragmentUniforms:P,vertexTextures:W,maxSamples:V}}function Rre(n){let t=this,e=null,i=0,r=!1,o=!1,s=new Ml,a=new hn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(h,v){let _=h.length!==0||v||i!==0||r;return r=v,i=h.length,_},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,v){e=f(h,v,0)},this.setState=function(h,v,_){let C=h.clippingPlanes,w=h.clipIntersection,b=h.clipShadows,x=n.get(h);if(!r||C===null||C.length===0||o&&!b)o?f(null):d();else{let D=o?0:i,S=D*4,P=x.clippingState||null;c.value=P,P=f(C,v,S,_);for(let W=0;W!==S;++W)P[W]=e[W];x.clippingState=P,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=D}};function d(){c.value!==e&&(c.value=e,c.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function f(h,v,_,C){let w=h!==null?h.length:0,b=null;if(w!==0){if(b=c.value,C!==!0||b===null){let x=_+w*4,D=v.matrixWorldInverse;a.getNormalMatrix(D),(b===null||b.length<x)&&(b=new Float32Array(x));for(let S=0,P=_;S!==w;++S,P+=4)s.copy(h[S]).applyMatrix4(D,a),s.normal.toArray(b,P),b[P+3]=s.constant}c.value=b,c.needsUpdate=!0}return t.numPlanes=w,t.numIntersection=0,b}}function Nre(n){let t=new WeakMap;function e(s,a){return a===kS?s.mapping=qf:a===LS&&(s.mapping=Yf),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===kS||a===LS)if(t.has(s)){let c=t.get(s).texture;return e(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let d=new mT(c.height);return d.fromEquirectangularTexture(n,s),t.set(s,d),s.addEventListener("dispose",r),e(d.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=t.get(a);c!==void 0&&(t.delete(a),c.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}var Ia=class extends yy{constructor(t=-1,e=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-t,s=i+t,a=r+e,c=r-e;if(this.view!==null&&this.view.enabled){let d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,s=o+d*this.view.width,a-=f*this.view.offsetY,c=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},zf=4,kL=[.125,.215,.35,.446,.526,.582],Uu=20,gS=new Ia,LL=new Tt,vS=null,_S=0,yS=0,xS=!1,Fu=(1+Math.sqrt(5))/2,kf=1/Fu,UL=[new j(-Fu,kf,0),new j(Fu,kf,0),new j(-kf,0,Fu),new j(kf,0,Fu),new j(0,Fu,-kf),new j(0,Fu,kf),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)],by=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){vS=this._renderer.getRenderTarget(),_S=this._renderer.getActiveCubeFace(),yS=this._renderer.getActiveMipmapLevel(),xS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=zL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=BL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(vS,_S,yS),this._renderer.xr.enabled=xS,t.scissorTest=!1,Q_(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===qf||t.mapping===Yf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),vS=this._renderer.getRenderTarget(),_S=this._renderer.getActiveCubeFace(),yS=this._renderer.getActiveMipmapLevel(),xS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:wr,minFilter:wr,generateMipmaps:!1,type:Pm,format:ys,colorSpace:Gr,depthBuffer:!1},r=VL(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=VL(t,e,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Fre(o)),this._blurMaterial=kre(o,t,e)}return r}_compileMaterial(t){let e=new Ci(this._lodPlanes[0],t);this._renderer.compile(e,gS)}_sceneToCubeUV(t,e,i,r){let a=new fr(90,1,e,i),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,v=f.toneMapping;f.getClearColor(LL),f.toneMapping=Sc,f.autoClear=!1;let _=new Oa({name:"PMREM.Background",side:wo,depthWrite:!1,depthTest:!1}),C=new Ci(new xm,_),w=!1,b=t.background;b?b.isColor&&(_.color.copy(b),t.background=null,w=!0):(_.color.copy(LL),w=!0);for(let x=0;x<6;x++){let D=x%3;D===0?(a.up.set(0,c[x],0),a.lookAt(d[x],0,0)):D===1?(a.up.set(0,0,c[x]),a.lookAt(0,d[x],0)):(a.up.set(0,c[x],0),a.lookAt(0,0,d[x]));let S=this._cubeSize;Q_(r,D*S,x>2?S:0,S,S),f.setRenderTarget(r),w&&f.render(C,a),f.render(t,a)}C.geometry.dispose(),C.material.dispose(),f.toneMapping=v,f.autoClear=h,t.background=b}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===qf||t.mapping===Yf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=zL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=BL());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Ci(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;let c=this._cubeSize;Q_(e,0,0,3*c,2*c),i.setRenderTarget(e),i.render(s,gS)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=UL[(r-o-1)%UL.length];this._blur(t,o-1,o,s,a)}e.autoClear=i}_blur(t,e,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",o),this._halfBlur(s,t,i,i,r,"longitudinal",o)}_halfBlur(t,e,i,r,o,s,a){let c=this._renderer,d=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new Ci(this._lodPlanes[r],d),v=d.uniforms,_=this._sizeLods[i]-1,C=isFinite(o)?Math.PI/(2*_):2*Math.PI/(2*Uu-1),w=o/C,b=isFinite(o)?1+Math.floor(f*w):Uu;b>Uu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${b} samples when the maximum is set to ${Uu}`);let x=[],D=0;for(let H=0;H<Uu;++H){let $=H/w,F=Math.exp(-$*$/2);x.push(F),H===0?D+=F:H<b&&(D+=2*F)}for(let H=0;H<x.length;H++)x[H]=x[H]/D;v.envMap.value=t.texture,v.samples.value=b,v.weights.value=x,v.latitudinal.value=s==="latitudinal",a&&(v.poleAxis.value=a);let{_lodMax:S}=this;v.dTheta.value=C,v.mipInt.value=S-i;let P=this._sizeLods[r],W=3*P*(r>S-zf?r-S+zf:0),V=4*(this._cubeSize-P);Q_(e,W,V,3*P,2*P),c.setRenderTarget(e),c.render(h,gS)}};function Fre(n){let t=[],e=[],i=[],r=n,o=n-zf+1+kL.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);e.push(a);let c=1/a;s>n-zf?c=kL[s-n+zf-1]:s===0&&(c=0),i.push(c);let d=1/(a-2),f=-d,h=1+d,v=[f,f,h,f,h,h,f,f,h,h,f,h],_=6,C=6,w=3,b=2,x=1,D=new Float32Array(w*C*_),S=new Float32Array(b*C*_),P=new Float32Array(x*C*_);for(let V=0;V<_;V++){let H=V%3*2/3-1,$=V>2?0:-1,F=[H,$,0,H+2/3,$,0,H+2/3,$+1,0,H,$,0,H+2/3,$+1,0,H,$+1,0];D.set(F,w*C*V),S.set(v,b*C*V);let I=[V,V,V,V,V,V];P.set(I,x*C*V)}let W=new Eo;W.setAttribute("position",new Ei(D,w)),W.setAttribute("uv",new Ei(S,b)),W.setAttribute("faceIndex",new Ei(P,x)),t.push(W),r>zf&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function VL(n,t,e){let i=new Dl(n,t,e);return i.texture.mapping=zy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Q_(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function kre(n,t,e){let i=new Float32Array(Uu),r=new j(0,1,0);return new Aa({name:"SphericalGaussianBlur",defines:{n:Uu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:eP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ec,depthTest:!1,depthWrite:!1})}function BL(){return new Aa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:eP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ec,depthTest:!1,depthWrite:!1})}function zL(){return new Aa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:eP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ec,depthTest:!1,depthWrite:!1})}function eP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Lre(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let c=a.mapping,d=c===kS||c===LS,f=c===qf||c===Yf;if(d||f){let h=t.get(a),v=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==v)return e===null&&(e=new by(n)),h=d?e.fromEquirectangular(a,h):e.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(h!==void 0)return h.texture;{let _=a.image;return d&&_&&_.height>0||f&&_&&r(_)?(e===null&&(e=new by(n)),h=d?e.fromEquirectangular(a):e.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let c=0,d=6;for(let f=0;f<d;f++)a[f]!==void 0&&c++;return c===d}function o(a){let c=a.target;c.removeEventListener("dispose",o);let d=t.get(c);d!==void 0&&(t.delete(c),d.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function Ure(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&um("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Vre(n,t,e,i){let r={},o=new WeakMap;function s(h){let v=h.target;v.index!==null&&t.remove(v.index);for(let C in v.attributes)t.remove(v.attributes[C]);for(let C in v.morphAttributes){let w=v.morphAttributes[C];for(let b=0,x=w.length;b<x;b++)t.remove(w[b])}v.removeEventListener("dispose",s),delete r[v.id];let _=o.get(v);_&&(t.remove(_),o.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,e.memory.geometries--}function a(h,v){return r[v.id]===!0||(v.addEventListener("dispose",s),r[v.id]=!0,e.memory.geometries++),v}function c(h){let v=h.attributes;for(let C in v)t.update(v[C],n.ARRAY_BUFFER);let _=h.morphAttributes;for(let C in _){let w=_[C];for(let b=0,x=w.length;b<x;b++)t.update(w[b],n.ARRAY_BUFFER)}}function d(h){let v=[],_=h.index,C=h.attributes.position,w=0;if(_!==null){let D=_.array;w=_.version;for(let S=0,P=D.length;S<P;S+=3){let W=D[S+0],V=D[S+1],H=D[S+2];v.push(W,V,V,H,H,W)}}else if(C!==void 0){let D=C.array;w=C.version;for(let S=0,P=D.length/3-1;S<P;S+=3){let W=S+0,V=S+1,H=S+2;v.push(W,V,V,H,H,W)}}else return;let b=new(zU(v)?_y:vy)(v,1);b.version=w;let x=o.get(h);x&&t.remove(x),o.set(h,b)}function f(h){let v=o.get(h);if(v){let _=h.index;_!==null&&v.version<_.version&&d(h)}else d(h);return o.get(h)}return{get:a,update:c,getWireframeAttribute:f}}function Bre(n,t,e){let i;function r(v){i=v}let o,s;function a(v){o=v.type,s=v.bytesPerElement}function c(v,_){n.drawElements(i,_,o,v*s),e.update(_,i,1)}function d(v,_,C){C!==0&&(n.drawElementsInstanced(i,_,o,v*s,C),e.update(_,i,C))}function f(v,_,C){if(C===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,_,0,o,v,0,C);let b=0;for(let x=0;x<C;x++)b+=_[x];e.update(b,i,1)}function h(v,_,C,w){if(C===0)return;let b=t.get("WEBGL_multi_draw");if(b===null)for(let x=0;x<v.length;x++)d(v[x]/s,_[x],w[x]);else{b.multiDrawElementsInstancedWEBGL(i,_,0,o,v,0,w,0,C);let x=0;for(let D=0;D<C;D++)x+=_[D]*w[D];e.update(x,i,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=d,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function zre(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(e.calls++,s){case n.TRIANGLES:e.triangles+=a*(o/3);break;case n.LINES:e.lines+=a*(o/2);break;case n.LINE_STRIP:e.lines+=a*(o-1);break;case n.LINE_LOOP:e.lines+=a*o;break;case n.POINTS:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function Hre(n,t,e){let i=new WeakMap,r=new an;function o(s,a,c){let d=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,v=i.get(a);if(v===void 0||v.count!==h){let I=function(){$.dispose(),i.delete(a),a.removeEventListener("dispose",I)};var _=I;v!==void 0&&v.texture.dispose();let C=a.morphAttributes.position!==void 0,w=a.morphAttributes.normal!==void 0,b=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],D=a.morphAttributes.normal||[],S=a.morphAttributes.color||[],P=0;C===!0&&(P=1),w===!0&&(P=2),b===!0&&(P=3);let W=a.attributes.position.count*P,V=1;W>t.maxTextureSize&&(V=Math.ceil(W/t.maxTextureSize),W=t.maxTextureSize);let H=new Float32Array(W*V*4*h),$=new gy(H,W,V,h);$.type=ia,$.needsUpdate=!0;let F=P*4;for(let U=0;U<h;U++){let q=x[U],ie=D[U],oe=S[U],pe=W*V*4*U;for(let fe=0;fe<q.count;fe++){let Te=fe*F;C===!0&&(r.fromBufferAttribute(q,fe),H[pe+Te+0]=r.x,H[pe+Te+1]=r.y,H[pe+Te+2]=r.z,H[pe+Te+3]=0),w===!0&&(r.fromBufferAttribute(ie,fe),H[pe+Te+4]=r.x,H[pe+Te+5]=r.y,H[pe+Te+6]=r.z,H[pe+Te+7]=0),b===!0&&(r.fromBufferAttribute(oe,fe),H[pe+Te+8]=r.x,H[pe+Te+9]=r.y,H[pe+Te+10]=r.z,H[pe+Te+11]=oe.itemSize===4?r.w:1)}}v={count:h,texture:$,size:new tn(W,V)},i.set(a,v),a.addEventListener("dispose",I)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,e);else{let C=0;for(let b=0;b<d.length;b++)C+=d[b];let w=a.morphTargetsRelative?1:1-C;c.getUniforms().setValue(n,"morphTargetBaseInfluence",w),c.getUniforms().setValue(n,"morphTargetInfluences",d)}c.getUniforms().setValue(n,"morphTargetsTexture",v.texture,e),c.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}return{update:o}}function Wre(n,t,e,i){let r=new WeakMap;function o(c){let d=i.render.frame,f=c.geometry,h=t.get(c,f);if(r.get(h)!==d&&(t.update(h),r.set(h,d)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==d&&(e.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&e.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,d))),c.isSkinnedMesh){let v=c.skeleton;r.get(v)!==d&&(v.update(),r.set(v,d))}return h}function s(){r=new WeakMap}function a(c){let d=c.target;d.removeEventListener("dispose",a),e.remove(d.instanceMatrix),d.instanceColor!==null&&e.remove(d.instanceColor)}return{update:o,dispose:s}}var Cy=class extends Ms{constructor(t,e,i,r,o,s,a,c,d,f=Wf){if(f!==Wf&&f!==Zf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Wf&&(i=Vu),i===void 0&&f===Zf&&(i=Xf),super(null,r,o,s,a,c,f,i,d),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:zr,this.minFilter=c!==void 0?c:zr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},GU=new Ms,HL=new Cy(1,1),$U=new gy,qU=new hT,YU=new xy,WL=[],jL=[],GL=new Float32Array(16),$L=new Float32Array(9),qL=new Float32Array(4);function sh(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,o=WL[r];if(o===void 0&&(o=new Float32Array(r),WL[r]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,n[s].toArray(o,a)}return o}function pr(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function mr(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function jy(n,t){let e=jL[t];e===void 0&&(e=new Int32Array(t),jL[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function jre(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function Gre(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2fv(this.addr,t),mr(e,t)}}function $re(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(pr(e,t))return;n.uniform3fv(this.addr,t),mr(e,t)}}function qre(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4fv(this.addr,t),mr(e,t)}}function Yre(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;qL.set(i),n.uniformMatrix2fv(this.addr,!1,qL),mr(e,i)}}function Xre(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;$L.set(i),n.uniformMatrix3fv(this.addr,!1,$L),mr(e,i)}}function Zre(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;GL.set(i),n.uniformMatrix4fv(this.addr,!1,GL),mr(e,i)}}function Kre(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function Jre(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2iv(this.addr,t),mr(e,t)}}function Qre(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(pr(e,t))return;n.uniform3iv(this.addr,t),mr(e,t)}}function eoe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4iv(this.addr,t),mr(e,t)}}function toe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function noe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2uiv(this.addr,t),mr(e,t)}}function ioe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(pr(e,t))return;n.uniform3uiv(this.addr,t),mr(e,t)}}function roe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4uiv(this.addr,t),mr(e,t)}}function ooe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(HL.compareFunction=BU,o=HL):o=GU,e.setTexture2D(t||o,r)}function soe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||qU,r)}function aoe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||YU,r)}function loe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||$U,r)}function coe(n){switch(n){case 5126:return jre;case 35664:return Gre;case 35665:return $re;case 35666:return qre;case 35674:return Yre;case 35675:return Xre;case 35676:return Zre;case 5124:case 35670:return Kre;case 35667:case 35671:return Jre;case 35668:case 35672:return Qre;case 35669:case 35673:return eoe;case 5125:return toe;case 36294:return noe;case 36295:return ioe;case 36296:return roe;case 35678:case 36198:case 36298:case 36306:case 35682:return ooe;case 35679:case 36299:case 36307:return soe;case 35680:case 36300:case 36308:case 36293:return aoe;case 36289:case 36303:case 36311:case 36292:return loe}}function uoe(n,t){n.uniform1fv(this.addr,t)}function doe(n,t){let e=sh(t,this.size,2);n.uniform2fv(this.addr,e)}function foe(n,t){let e=sh(t,this.size,3);n.uniform3fv(this.addr,e)}function hoe(n,t){let e=sh(t,this.size,4);n.uniform4fv(this.addr,e)}function poe(n,t){let e=sh(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function moe(n,t){let e=sh(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function goe(n,t){let e=sh(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function voe(n,t){n.uniform1iv(this.addr,t)}function _oe(n,t){n.uniform2iv(this.addr,t)}function yoe(n,t){n.uniform3iv(this.addr,t)}function xoe(n,t){n.uniform4iv(this.addr,t)}function boe(n,t){n.uniform1uiv(this.addr,t)}function Coe(n,t){n.uniform2uiv(this.addr,t)}function Moe(n,t){n.uniform3uiv(this.addr,t)}function woe(n,t){n.uniform4uiv(this.addr,t)}function Eoe(n,t,e){let i=this.cache,r=t.length,o=jy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture2D(t[s]||GU,o[s])}function Soe(n,t,e){let i=this.cache,r=t.length,o=jy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||qU,o[s])}function Toe(n,t,e){let i=this.cache,r=t.length,o=jy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||YU,o[s])}function Poe(n,t,e){let i=this.cache,r=t.length,o=jy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||$U,o[s])}function Doe(n){switch(n){case 5126:return uoe;case 35664:return doe;case 35665:return foe;case 35666:return hoe;case 35674:return poe;case 35675:return moe;case 35676:return goe;case 5124:case 35670:return voe;case 35667:case 35671:return _oe;case 35668:case 35672:return yoe;case 35669:case 35673:return xoe;case 5125:return boe;case 36294:return Coe;case 36295:return Moe;case 36296:return woe;case 35678:case 36198:case 36298:case 36306:case 35682:return Eoe;case 35679:case 36299:case 36307:return Soe;case 35680:case 36300:case 36308:case 36293:return Toe;case 36289:case 36303:case 36311:case 36292:return Poe}}var gT=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=coe(e.type)}},vT=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=Doe(e.type)}},_T=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(t,e[a.id],i)}}},bS=/(\w+)(\])?(\[|\.)?/g;function YL(n,t){n.seq.push(t),n.map[t.id]=t}function Ooe(n,t,e){let i=n.name,r=i.length;for(bS.lastIndex=0;;){let o=bS.exec(i),s=bS.lastIndex,a=o[1],c=o[2]==="]",d=o[3];if(c&&(a=a|0),d===void 0||d==="["&&s+2===r){YL(e,d===void 0?new gT(a,n,t):new vT(a,n,t));break}else{let h=e.map[a];h===void 0&&(h=new _T(a),YL(e,h)),e=h}}}var Gf=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=t.getActiveUniform(e,r),s=t.getUniformLocation(e,o.name);Ooe(o,s,this)}}setValue(t,e,i,r){let o=this.map[e];o!==void 0&&o.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let o=0,s=e.length;o!==s;++o){let a=e[o],c=i[a.id];c.needsUpdate!==!1&&a.setValue(t,c.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&i.push(s)}return i}};function XL(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var Aoe=37297,Ioe=0;function Roe(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return i.join(`
`)}var ZL=new hn;function Noe(n){Rn._getMatrix(ZL,Rn.workingColorSpace,n);let t=`mat3( ${ZL.elements.map(e=>e.toFixed(4))} )`;switch(Rn.getTransfer(n)){case Wy:return[t,"LinearTransferOETF"];case oi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function KL(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return e.toUpperCase()+`

`+r+`

`+Roe(n.getShaderSource(t),s)}else return r}function Foe(n,t){let e=Noe(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function koe(n,t){let e;switch(t){case Wee:e="Linear";break;case jee:e="Reinhard";break;case Gee:e="Cineon";break;case $ee:e="ACESFilmic";break;case Yee:e="AgX";break;case Xee:e="Neutral";break;case qee:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var ey=new j;function Loe(){Rn.getLuminanceCoefficients(ey);let n=ey.x.toFixed(4),t=ey.y.toFixed(4),e=ey.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Uoe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(dm).join(`
`)}function Voe(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function Boe(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(t,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:n.getAttribLocation(t,s),locationSize:a}}return e}function dm(n){return n!==""}function JL(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function QL(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var zoe=/^[ \t]*#include +<([\w\d./]+)>/gm;function yT(n){return n.replace(zoe,Woe)}var Hoe=new Map;function Woe(n,t){let e=gn[t];if(e===void 0){let i=Hoe.get(t);if(i!==void 0)e=gn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return yT(e)}var joe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eU(n){return n.replace(joe,Goe)}function Goe(n,t,e,i){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function tU(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function $oe(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===TU?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===HT?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Cl&&(t="SHADOWMAP_TYPE_VSM"),t}function qoe(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case qf:case Yf:t="ENVMAP_TYPE_CUBE";break;case zy:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Yoe(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Yf:t="ENVMAP_MODE_REFRACTION";break}return t}function Xoe(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case PU:t="ENVMAP_BLENDING_MULTIPLY";break;case zee:t="ENVMAP_BLENDING_MIX";break;case Hee:t="ENVMAP_BLENDING_ADD";break}return t}function Zoe(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function Koe(n,t,e,i){let r=n.getContext(),o=e.defines,s=e.vertexShader,a=e.fragmentShader,c=$oe(e),d=qoe(e),f=Yoe(e),h=Xoe(e),v=Zoe(e),_=Uoe(e),C=Voe(o),w=r.createProgram(),b,x,D=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(b=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,C].filter(dm).join(`
`),b.length>0&&(b+=`
`),x=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,C].filter(dm).join(`
`),x.length>0&&(x+=`
`)):(b=[tU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,C,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(dm).join(`
`),x=[tU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,C,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+f:"",e.envMap?"#define "+h:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Sc?"#define TONE_MAPPING":"",e.toneMapping!==Sc?gn.tonemapping_pars_fragment:"",e.toneMapping!==Sc?koe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",gn.colorspace_pars_fragment,Foe("linearToOutputTexel",e.outputColorSpace),Loe(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(dm).join(`
`)),s=yT(s),s=JL(s,e),s=QL(s,e),a=yT(a),a=JL(a,e),a=QL(a,e),s=eU(s),a=eU(a),e.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,b=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+b,x=["#define varying in",e.glslVersion===pL?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===pL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);let S=D+b+s,P=D+x+a,W=XL(r,r.VERTEX_SHADER,S),V=XL(r,r.FRAGMENT_SHADER,P);r.attachShader(w,W),r.attachShader(w,V),e.index0AttributeName!==void 0?r.bindAttribLocation(w,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function H(U){if(n.debug.checkShaderErrors){let q=r.getProgramInfoLog(w).trim(),ie=r.getShaderInfoLog(W).trim(),oe=r.getShaderInfoLog(V).trim(),pe=!0,fe=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(pe=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,w,W,V);else{let Te=KL(r,W,"vertex"),ce=KL(r,V,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+q+`
`+Te+`
`+ce)}else q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",q):(ie===""||oe==="")&&(fe=!1);fe&&(U.diagnostics={runnable:pe,programLog:q,vertexShader:{log:ie,prefix:b},fragmentShader:{log:oe,prefix:x}})}r.deleteShader(W),r.deleteShader(V),$=new Gf(r,w),F=Boe(r,w)}let $;this.getUniforms=function(){return $===void 0&&H(this),$};let F;this.getAttributes=function(){return F===void 0&&H(this),F};let I=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=r.getProgramParameter(w,Aoe)),I},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Ioe++,this.cacheKey=t,this.usedTimes=1,this.program=w,this.vertexShader=W,this.fragmentShader=V,this}var Joe=0,xT=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new bT(t),e.set(t,i)),i}},bT=class{constructor(t){this.id=Joe++,this.code=t,this.usedTimes=0}};function Qoe(n,t,e,i,r,o,s){let a=new ym,c=new xT,d=new Set,f=[],h=r.logarithmicDepthBuffer,v=r.vertexTextures,_=r.precision,C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(F){return d.add(F),F===0?"uv":`uv${F}`}function b(F,I,U,q,ie){let oe=q.fog,pe=ie.geometry,fe=F.isMeshStandardMaterial?q.environment:null,Te=(F.isMeshStandardMaterial?e:t).get(F.envMap||fe),ce=Te&&Te.mapping===zy?Te.image.height:null,De=C[F.type];F.precision!==null&&(_=r.getMaxPrecision(F.precision),_!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",_,"instead."));let $e=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,Qe=$e!==void 0?$e.length:0,Jt=0;pe.morphAttributes.position!==void 0&&(Jt=1),pe.morphAttributes.normal!==void 0&&(Jt=2),pe.morphAttributes.color!==void 0&&(Jt=3);let Dn,ve,Ne,rt;if(De){let jn=Ta[De];Dn=jn.vertexShader,ve=jn.fragmentShader}else Dn=F.vertexShader,ve=F.fragmentShader,c.update(F),Ne=c.getVertexShaderID(F),rt=c.getFragmentShaderID(F);let ze=n.getRenderTarget(),Nt=n.state.buffers.depth.getReversed(),Vt=ie.isInstancedMesh===!0,nn=ie.isBatchedMesh===!0,gi=!!F.map,$t=!!F.matcap,si=!!Te,te=!!F.aoMap,Li=!!F.lightMap,bn=!!F.bumpMap,On=!!F.normalMap,xt=!!F.displacementMap,Cn=!!F.emissiveMap,_t=!!F.metalnessMap,L=!!F.roughnessMap,O=F.anisotropy>0,re=F.clearcoat>0,be=F.dispersion>0,Se=F.iridescence>0,_e=F.sheen>0,dt=F.transmission>0,He=O&&!!F.anisotropyMap,Je=re&&!!F.clearcoatMap,Mn=re&&!!F.clearcoatNormalMap,Re=re&&!!F.clearcoatRoughnessMap,et=Se&&!!F.iridescenceMap,wt=Se&&!!F.iridescenceThicknessMap,Ft=_e&&!!F.sheenColorMap,tt=_e&&!!F.sheenRoughnessMap,An=!!F.specularMap,rn=!!F.specularColorMap,ei=!!F.specularIntensityMap,Y=dt&&!!F.transmissionMap,We=dt&&!!F.thicknessMap,de=!!F.gradientMap,Ce=!!F.alphaMap,Ze=F.alphaTest>0,qe=!!F.alphaHash,qt=!!F.extensions,Si=Sc;F.toneMapped&&(ze===null||ze.isXRRenderTarget===!0)&&(Si=n.toneMapping);let gr={shaderID:De,shaderType:F.type,shaderName:F.name,vertexShader:Dn,fragmentShader:ve,defines:F.defines,customVertexShaderID:Ne,customFragmentShaderID:rt,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:_,batching:nn,batchingColor:nn&&ie._colorsTexture!==null,instancing:Vt,instancingColor:Vt&&ie.instanceColor!==null,instancingMorph:Vt&&ie.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:ze===null?n.outputColorSpace:ze.isXRRenderTarget===!0?ze.texture.colorSpace:Gr,alphaToCoverage:!!F.alphaToCoverage,map:gi,matcap:$t,envMap:si,envMapMode:si&&Te.mapping,envMapCubeUVHeight:ce,aoMap:te,lightMap:Li,bumpMap:bn,normalMap:On,displacementMap:v&&xt,emissiveMap:Cn,normalMapObjectSpace:On&&F.normalMapType===nte,normalMapTangentSpace:On&&F.normalMapType===VU,metalnessMap:_t,roughnessMap:L,anisotropy:O,anisotropyMap:He,clearcoat:re,clearcoatMap:Je,clearcoatNormalMap:Mn,clearcoatRoughnessMap:Re,dispersion:be,iridescence:Se,iridescenceMap:et,iridescenceThicknessMap:wt,sheen:_e,sheenColorMap:Ft,sheenRoughnessMap:tt,specularMap:An,specularColorMap:rn,specularIntensityMap:ei,transmission:dt,transmissionMap:Y,thicknessMap:We,gradientMap:de,opaque:F.transparent===!1&&F.blending===Hf&&F.alphaToCoverage===!1,alphaMap:Ce,alphaTest:Ze,alphaHash:qe,combine:F.combine,mapUv:gi&&w(F.map.channel),aoMapUv:te&&w(F.aoMap.channel),lightMapUv:Li&&w(F.lightMap.channel),bumpMapUv:bn&&w(F.bumpMap.channel),normalMapUv:On&&w(F.normalMap.channel),displacementMapUv:xt&&w(F.displacementMap.channel),emissiveMapUv:Cn&&w(F.emissiveMap.channel),metalnessMapUv:_t&&w(F.metalnessMap.channel),roughnessMapUv:L&&w(F.roughnessMap.channel),anisotropyMapUv:He&&w(F.anisotropyMap.channel),clearcoatMapUv:Je&&w(F.clearcoatMap.channel),clearcoatNormalMapUv:Mn&&w(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&w(F.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&w(F.iridescenceMap.channel),iridescenceThicknessMapUv:wt&&w(F.iridescenceThicknessMap.channel),sheenColorMapUv:Ft&&w(F.sheenColorMap.channel),sheenRoughnessMapUv:tt&&w(F.sheenRoughnessMap.channel),specularMapUv:An&&w(F.specularMap.channel),specularColorMapUv:rn&&w(F.specularColorMap.channel),specularIntensityMapUv:ei&&w(F.specularIntensityMap.channel),transmissionMapUv:Y&&w(F.transmissionMap.channel),thicknessMapUv:We&&w(F.thicknessMap.channel),alphaMapUv:Ce&&w(F.alphaMap.channel),vertexTangents:!!pe.attributes.tangent&&(On||O),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,pointsUvs:ie.isPoints===!0&&!!pe.attributes.uv&&(gi||Ce),fog:!!oe,useFog:F.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:Nt,skinning:ie.isSkinnedMesh===!0,morphTargets:pe.morphAttributes.position!==void 0,morphNormals:pe.morphAttributes.normal!==void 0,morphColors:pe.morphAttributes.color!==void 0,morphTargetsCount:Qe,morphTextureStride:Jt,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:F.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:Si,decodeVideoTexture:gi&&F.map.isVideoTexture===!0&&Rn.getTransfer(F.map.colorSpace)===oi,decodeVideoTextureEmissive:Cn&&F.emissiveMap.isVideoTexture===!0&&Rn.getTransfer(F.emissiveMap.colorSpace)===oi,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===qo,flipSided:F.side===wo,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:qt&&F.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qt&&F.extensions.multiDraw===!0||nn)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return gr.vertexUv1s=d.has(1),gr.vertexUv2s=d.has(2),gr.vertexUv3s=d.has(3),d.clear(),gr}function x(F){let I=[];if(F.shaderID?I.push(F.shaderID):(I.push(F.customVertexShaderID),I.push(F.customFragmentShaderID)),F.defines!==void 0)for(let U in F.defines)I.push(U),I.push(F.defines[U]);return F.isRawShaderMaterial===!1&&(D(I,F),S(I,F),I.push(n.outputColorSpace)),I.push(F.customProgramCacheKey),I.join()}function D(F,I){F.push(I.precision),F.push(I.outputColorSpace),F.push(I.envMapMode),F.push(I.envMapCubeUVHeight),F.push(I.mapUv),F.push(I.alphaMapUv),F.push(I.lightMapUv),F.push(I.aoMapUv),F.push(I.bumpMapUv),F.push(I.normalMapUv),F.push(I.displacementMapUv),F.push(I.emissiveMapUv),F.push(I.metalnessMapUv),F.push(I.roughnessMapUv),F.push(I.anisotropyMapUv),F.push(I.clearcoatMapUv),F.push(I.clearcoatNormalMapUv),F.push(I.clearcoatRoughnessMapUv),F.push(I.iridescenceMapUv),F.push(I.iridescenceThicknessMapUv),F.push(I.sheenColorMapUv),F.push(I.sheenRoughnessMapUv),F.push(I.specularMapUv),F.push(I.specularColorMapUv),F.push(I.specularIntensityMapUv),F.push(I.transmissionMapUv),F.push(I.thicknessMapUv),F.push(I.combine),F.push(I.fogExp2),F.push(I.sizeAttenuation),F.push(I.morphTargetsCount),F.push(I.morphAttributeCount),F.push(I.numDirLights),F.push(I.numPointLights),F.push(I.numSpotLights),F.push(I.numSpotLightMaps),F.push(I.numHemiLights),F.push(I.numRectAreaLights),F.push(I.numDirLightShadows),F.push(I.numPointLightShadows),F.push(I.numSpotLightShadows),F.push(I.numSpotLightShadowsWithMaps),F.push(I.numLightProbes),F.push(I.shadowMapType),F.push(I.toneMapping),F.push(I.numClippingPlanes),F.push(I.numClipIntersection),F.push(I.depthPacking)}function S(F,I){a.disableAll(),I.supportsVertexTextures&&a.enable(0),I.instancing&&a.enable(1),I.instancingColor&&a.enable(2),I.instancingMorph&&a.enable(3),I.matcap&&a.enable(4),I.envMap&&a.enable(5),I.normalMapObjectSpace&&a.enable(6),I.normalMapTangentSpace&&a.enable(7),I.clearcoat&&a.enable(8),I.iridescence&&a.enable(9),I.alphaTest&&a.enable(10),I.vertexColors&&a.enable(11),I.vertexAlphas&&a.enable(12),I.vertexUv1s&&a.enable(13),I.vertexUv2s&&a.enable(14),I.vertexUv3s&&a.enable(15),I.vertexTangents&&a.enable(16),I.anisotropy&&a.enable(17),I.alphaHash&&a.enable(18),I.batching&&a.enable(19),I.dispersion&&a.enable(20),I.batchingColor&&a.enable(21),F.push(a.mask),a.disableAll(),I.fog&&a.enable(0),I.useFog&&a.enable(1),I.flatShading&&a.enable(2),I.logarithmicDepthBuffer&&a.enable(3),I.reverseDepthBuffer&&a.enable(4),I.skinning&&a.enable(5),I.morphTargets&&a.enable(6),I.morphNormals&&a.enable(7),I.morphColors&&a.enable(8),I.premultipliedAlpha&&a.enable(9),I.shadowMapEnabled&&a.enable(10),I.doubleSided&&a.enable(11),I.flipSided&&a.enable(12),I.useDepthPacking&&a.enable(13),I.dithering&&a.enable(14),I.transmission&&a.enable(15),I.sheen&&a.enable(16),I.opaque&&a.enable(17),I.pointsUvs&&a.enable(18),I.decodeVideoTexture&&a.enable(19),I.decodeVideoTextureEmissive&&a.enable(20),I.alphaToCoverage&&a.enable(21),F.push(a.mask)}function P(F){let I=C[F.type],U;if(I){let q=Ta[I];U=Wte.clone(q.uniforms)}else U=F.uniforms;return U}function W(F,I){let U;for(let q=0,ie=f.length;q<ie;q++){let oe=f[q];if(oe.cacheKey===I){U=oe,++U.usedTimes;break}}return U===void 0&&(U=new Koe(n,I,F,o),f.push(U)),U}function V(F){if(--F.usedTimes===0){let I=f.indexOf(F);f[I]=f[f.length-1],f.pop(),F.destroy()}}function H(F){c.remove(F)}function $(){c.dispose()}return{getParameters:b,getProgramCacheKey:x,getUniforms:P,acquireProgram:W,releaseProgram:V,releaseShaderCache:H,programs:f,dispose:$}}function ese(){let n=new WeakMap;function t(s){return n.has(s)}function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,c){n.get(s)[a]=c}function o(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:o}}function tse(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function nU(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function iU(){let n=[],t=0,e=[],i=[],r=[];function o(){t=0,e.length=0,i.length=0,r.length=0}function s(h,v,_,C,w,b){let x=n[t];return x===void 0?(x={id:h.id,object:h,geometry:v,material:_,groupOrder:C,renderOrder:h.renderOrder,z:w,group:b},n[t]=x):(x.id=h.id,x.object=h,x.geometry=v,x.material=_,x.groupOrder=C,x.renderOrder=h.renderOrder,x.z=w,x.group=b),t++,x}function a(h,v,_,C,w,b){let x=s(h,v,_,C,w,b);_.transmission>0?i.push(x):_.transparent===!0?r.push(x):e.push(x)}function c(h,v,_,C,w,b){let x=s(h,v,_,C,w,b);_.transmission>0?i.unshift(x):_.transparent===!0?r.unshift(x):e.unshift(x)}function d(h,v){e.length>1&&e.sort(h||tse),i.length>1&&i.sort(v||nU),r.length>1&&r.sort(v||nU)}function f(){for(let h=t,v=n.length;h<v;h++){let _=n[h];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:e,transmissive:i,transparent:r,init:o,push:a,unshift:c,finish:f,sort:d}}function nse(){let n=new WeakMap;function t(i,r){let o=n.get(i),s;return o===void 0?(s=new iU,n.set(i,[s])):r>=o.length?(s=new iU,o.push(s)):s=o[r],s}function e(){n=new WeakMap}return{get:t,dispose:e}}function ise(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new j,color:new Tt};break;case"SpotLight":e={position:new j,direction:new j,color:new Tt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new j,color:new Tt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new j,skyColor:new Tt,groundColor:new Tt};break;case"RectAreaLight":e={color:new Tt,position:new j,halfWidth:new j,halfHeight:new j};break}return n[t.id]=e,e}}}function rse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tn};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tn};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var ose=0;function sse(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function ase(n){let t=new ise,e=rse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)i.probe.push(new j);let r=new j,o=new Kt,s=new Kt;function a(d){let f=0,h=0,v=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let _=0,C=0,w=0,b=0,x=0,D=0,S=0,P=0,W=0,V=0,H=0;d.sort(sse);for(let F=0,I=d.length;F<I;F++){let U=d[F],q=U.color,ie=U.intensity,oe=U.distance,pe=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)f+=q.r*ie,h+=q.g*ie,v+=q.b*ie;else if(U.isLightProbe){for(let fe=0;fe<9;fe++)i.probe[fe].addScaledVector(U.sh.coefficients[fe],ie);H++}else if(U.isDirectionalLight){let fe=t.get(U);if(fe.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){let Te=U.shadow,ce=e.get(U);ce.shadowIntensity=Te.intensity,ce.shadowBias=Te.bias,ce.shadowNormalBias=Te.normalBias,ce.shadowRadius=Te.radius,ce.shadowMapSize=Te.mapSize,i.directionalShadow[_]=ce,i.directionalShadowMap[_]=pe,i.directionalShadowMatrix[_]=U.shadow.matrix,D++}i.directional[_]=fe,_++}else if(U.isSpotLight){let fe=t.get(U);fe.position.setFromMatrixPosition(U.matrixWorld),fe.color.copy(q).multiplyScalar(ie),fe.distance=oe,fe.coneCos=Math.cos(U.angle),fe.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),fe.decay=U.decay,i.spot[w]=fe;let Te=U.shadow;if(U.map&&(i.spotLightMap[W]=U.map,W++,Te.updateMatrices(U),U.castShadow&&V++),i.spotLightMatrix[w]=Te.matrix,U.castShadow){let ce=e.get(U);ce.shadowIntensity=Te.intensity,ce.shadowBias=Te.bias,ce.shadowNormalBias=Te.normalBias,ce.shadowRadius=Te.radius,ce.shadowMapSize=Te.mapSize,i.spotShadow[w]=ce,i.spotShadowMap[w]=pe,P++}w++}else if(U.isRectAreaLight){let fe=t.get(U);fe.color.copy(q).multiplyScalar(ie),fe.halfWidth.set(U.width*.5,0,0),fe.halfHeight.set(0,U.height*.5,0),i.rectArea[b]=fe,b++}else if(U.isPointLight){let fe=t.get(U);if(fe.color.copy(U.color).multiplyScalar(U.intensity),fe.distance=U.distance,fe.decay=U.decay,U.castShadow){let Te=U.shadow,ce=e.get(U);ce.shadowIntensity=Te.intensity,ce.shadowBias=Te.bias,ce.shadowNormalBias=Te.normalBias,ce.shadowRadius=Te.radius,ce.shadowMapSize=Te.mapSize,ce.shadowCameraNear=Te.camera.near,ce.shadowCameraFar=Te.camera.far,i.pointShadow[C]=ce,i.pointShadowMap[C]=pe,i.pointShadowMatrix[C]=U.shadow.matrix,S++}i.point[C]=fe,C++}else if(U.isHemisphereLight){let fe=t.get(U);fe.skyColor.copy(U.color).multiplyScalar(ie),fe.groundColor.copy(U.groundColor).multiplyScalar(ie),i.hemi[x]=fe,x++}}b>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ge.LTC_FLOAT_1,i.rectAreaLTC2=Ge.LTC_FLOAT_2):(i.rectAreaLTC1=Ge.LTC_HALF_1,i.rectAreaLTC2=Ge.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=v;let $=i.hash;($.directionalLength!==_||$.pointLength!==C||$.spotLength!==w||$.rectAreaLength!==b||$.hemiLength!==x||$.numDirectionalShadows!==D||$.numPointShadows!==S||$.numSpotShadows!==P||$.numSpotMaps!==W||$.numLightProbes!==H)&&(i.directional.length=_,i.spot.length=w,i.rectArea.length=b,i.point.length=C,i.hemi.length=x,i.directionalShadow.length=D,i.directionalShadowMap.length=D,i.pointShadow.length=S,i.pointShadowMap.length=S,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=D,i.pointShadowMatrix.length=S,i.spotLightMatrix.length=P+W-V,i.spotLightMap.length=W,i.numSpotLightShadowsWithMaps=V,i.numLightProbes=H,$.directionalLength=_,$.pointLength=C,$.spotLength=w,$.rectAreaLength=b,$.hemiLength=x,$.numDirectionalShadows=D,$.numPointShadows=S,$.numSpotShadows=P,$.numSpotMaps=W,$.numLightProbes=H,i.version=ose++)}function c(d,f){let h=0,v=0,_=0,C=0,w=0,b=f.matrixWorldInverse;for(let x=0,D=d.length;x<D;x++){let S=d[x];if(S.isDirectionalLight){let P=i.directional[h];P.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(b),h++}else if(S.isSpotLight){let P=i.spot[_];P.position.setFromMatrixPosition(S.matrixWorld),P.position.applyMatrix4(b),P.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),P.direction.sub(r),P.direction.transformDirection(b),_++}else if(S.isRectAreaLight){let P=i.rectArea[C];P.position.setFromMatrixPosition(S.matrixWorld),P.position.applyMatrix4(b),s.identity(),o.copy(S.matrixWorld),o.premultiply(b),s.extractRotation(o),P.halfWidth.set(S.width*.5,0,0),P.halfHeight.set(0,S.height*.5,0),P.halfWidth.applyMatrix4(s),P.halfHeight.applyMatrix4(s),C++}else if(S.isPointLight){let P=i.point[v];P.position.setFromMatrixPosition(S.matrixWorld),P.position.applyMatrix4(b),v++}else if(S.isHemisphereLight){let P=i.hemi[w];P.direction.setFromMatrixPosition(S.matrixWorld),P.direction.transformDirection(b),w++}}}return{setup:a,setupView:c,state:i}}function rU(n){let t=new ase(n),e=[],i=[];function r(f){d.camera=f,e.length=0,i.length=0}function o(f){e.push(f)}function s(f){i.push(f)}function a(){t.setup(e)}function c(f){t.setupView(e,f)}let d={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:d,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function lse(n){let t=new WeakMap;function e(r,o=0){let s=t.get(r),a;return s===void 0?(a=new rU(n),t.set(r,[a])):o>=s.length?(a=new rU(n),s.push(a)):a=s[o],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var CT=class extends Wr{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=ete,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},MT=class extends Wr{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},cse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,use=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function dse(n,t,e){let i=new bm,r=new tn,o=new tn,s=new an,a=new CT({depthPacking:tte}),c=new MT,d={},f=e.maxTextureSize,h={[Da]:wo,[wo]:Da,[qo]:qo},v=new Aa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tn},radius:{value:4}},vertexShader:cse,fragmentShader:use}),_=v.clone();_.defines.HORIZONTAL_PASS=1;let C=new Eo;C.setAttribute("position",new Ei(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let w=new Ci(C,v),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=TU;let x=this.type;this.render=function(V,H,$){if(b.enabled===!1||b.autoUpdate===!1&&b.needsUpdate===!1||V.length===0)return;let F=n.getRenderTarget(),I=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),q=n.state;q.setBlending(Ec),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);let ie=x!==Cl&&this.type===Cl,oe=x===Cl&&this.type!==Cl;for(let pe=0,fe=V.length;pe<fe;pe++){let Te=V[pe],ce=Te.shadow;if(ce===void 0){console.warn("THREE.WebGLShadowMap:",Te,"has no shadow.");continue}if(ce.autoUpdate===!1&&ce.needsUpdate===!1)continue;r.copy(ce.mapSize);let De=ce.getFrameExtents();if(r.multiply(De),o.copy(ce.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/De.x),r.x=o.x*De.x,ce.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/De.y),r.y=o.y*De.y,ce.mapSize.y=o.y)),ce.map===null||ie===!0||oe===!0){let Qe=this.type!==Cl?{minFilter:zr,magFilter:zr}:{};ce.map!==null&&ce.map.dispose(),ce.map=new Dl(r.x,r.y,Qe),ce.map.texture.name=Te.name+".shadowMap",ce.camera.updateProjectionMatrix()}n.setRenderTarget(ce.map),n.clear();let $e=ce.getViewportCount();for(let Qe=0;Qe<$e;Qe++){let Jt=ce.getViewport(Qe);s.set(o.x*Jt.x,o.y*Jt.y,o.x*Jt.z,o.y*Jt.w),q.viewport(s),ce.updateMatrices(Te,Qe),i=ce.getFrustum(),P(H,$,ce.camera,Te,this.type)}ce.isPointLightShadow!==!0&&this.type===Cl&&D(ce,$),ce.needsUpdate=!1}x=this.type,b.needsUpdate=!1,n.setRenderTarget(F,I,U)};function D(V,H){let $=t.update(w);v.defines.VSM_SAMPLES!==V.blurSamples&&(v.defines.VSM_SAMPLES=V.blurSamples,_.defines.VSM_SAMPLES=V.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),V.mapPass===null&&(V.mapPass=new Dl(r.x,r.y)),v.uniforms.shadow_pass.value=V.map.texture,v.uniforms.resolution.value=V.mapSize,v.uniforms.radius.value=V.radius,n.setRenderTarget(V.mapPass),n.clear(),n.renderBufferDirect(H,null,$,v,w,null),_.uniforms.shadow_pass.value=V.mapPass.texture,_.uniforms.resolution.value=V.mapSize,_.uniforms.radius.value=V.radius,n.setRenderTarget(V.map),n.clear(),n.renderBufferDirect(H,null,$,_,w,null)}function S(V,H,$,F){let I=null,U=$.isPointLight===!0?V.customDistanceMaterial:V.customDepthMaterial;if(U!==void 0)I=U;else if(I=$.isPointLight===!0?c:a,n.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0){let q=I.uuid,ie=H.uuid,oe=d[q];oe===void 0&&(oe={},d[q]=oe);let pe=oe[ie];pe===void 0&&(pe=I.clone(),oe[ie]=pe,H.addEventListener("dispose",W)),I=pe}if(I.visible=H.visible,I.wireframe=H.wireframe,F===Cl?I.side=H.shadowSide!==null?H.shadowSide:H.side:I.side=H.shadowSide!==null?H.shadowSide:h[H.side],I.alphaMap=H.alphaMap,I.alphaTest=H.alphaTest,I.map=H.map,I.clipShadows=H.clipShadows,I.clippingPlanes=H.clippingPlanes,I.clipIntersection=H.clipIntersection,I.displacementMap=H.displacementMap,I.displacementScale=H.displacementScale,I.displacementBias=H.displacementBias,I.wireframeLinewidth=H.wireframeLinewidth,I.linewidth=H.linewidth,$.isPointLight===!0&&I.isMeshDistanceMaterial===!0){let q=n.properties.get(I);q.light=$}return I}function P(V,H,$,F,I){if(V.visible===!1)return;if(V.layers.test(H.layers)&&(V.isMesh||V.isLine||V.isPoints)&&(V.castShadow||V.receiveShadow&&I===Cl)&&(!V.frustumCulled||i.intersectsObject(V))){V.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,V.matrixWorld);let ie=t.update(V),oe=V.material;if(Array.isArray(oe)){let pe=ie.groups;for(let fe=0,Te=pe.length;fe<Te;fe++){let ce=pe[fe],De=oe[ce.materialIndex];if(De&&De.visible){let $e=S(V,De,F,I);V.onBeforeShadow(n,V,H,$,ie,$e,ce),n.renderBufferDirect($,null,ie,$e,V,ce),V.onAfterShadow(n,V,H,$,ie,$e,ce)}}}else if(oe.visible){let pe=S(V,oe,F,I);V.onBeforeShadow(n,V,H,$,ie,pe,null),n.renderBufferDirect($,null,ie,pe,V,null),V.onAfterShadow(n,V,H,$,ie,pe,null)}}let q=V.children;for(let ie=0,oe=q.length;ie<oe;ie++)P(q[ie],H,$,F,I)}function W(V){V.target.removeEventListener("dispose",W);for(let $ in d){let F=d[$],I=V.target.uuid;I in F&&(F[I].dispose(),delete F[I])}}}var fse={[DS]:OS,[AS]:NS,[IS]:FS,[$f]:RS,[OS]:DS,[NS]:AS,[FS]:IS,[RS]:$f};function hse(n,t){function e(){let Y=!1,We=new an,de=null,Ce=new an(0,0,0,0);return{setMask:function(Ze){de!==Ze&&!Y&&(n.colorMask(Ze,Ze,Ze,Ze),de=Ze)},setLocked:function(Ze){Y=Ze},setClear:function(Ze,qe,qt,Si,gr){gr===!0&&(Ze*=Si,qe*=Si,qt*=Si),We.set(Ze,qe,qt,Si),Ce.equals(We)===!1&&(n.clearColor(Ze,qe,qt,Si),Ce.copy(We))},reset:function(){Y=!1,de=null,Ce.set(-1,0,0,0)}}}function i(){let Y=!1,We=!1,de=null,Ce=null,Ze=null;return{setReversed:function(qe){if(We!==qe){let qt=t.get("EXT_clip_control");We?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT);let Si=Ze;Ze=null,this.setClear(Si)}We=qe},getReversed:function(){return We},setTest:function(qe){qe?ze(n.DEPTH_TEST):Nt(n.DEPTH_TEST)},setMask:function(qe){de!==qe&&!Y&&(n.depthMask(qe),de=qe)},setFunc:function(qe){if(We&&(qe=fse[qe]),Ce!==qe){switch(qe){case DS:n.depthFunc(n.NEVER);break;case OS:n.depthFunc(n.ALWAYS);break;case AS:n.depthFunc(n.LESS);break;case $f:n.depthFunc(n.LEQUAL);break;case IS:n.depthFunc(n.EQUAL);break;case RS:n.depthFunc(n.GEQUAL);break;case NS:n.depthFunc(n.GREATER);break;case FS:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ce=qe}},setLocked:function(qe){Y=qe},setClear:function(qe){Ze!==qe&&(We&&(qe=1-qe),n.clearDepth(qe),Ze=qe)},reset:function(){Y=!1,de=null,Ce=null,Ze=null,We=!1}}}function r(){let Y=!1,We=null,de=null,Ce=null,Ze=null,qe=null,qt=null,Si=null,gr=null;return{setTest:function(jn){Y||(jn?ze(n.STENCIL_TEST):Nt(n.STENCIL_TEST))},setMask:function(jn){We!==jn&&!Y&&(n.stencilMask(jn),We=jn)},setFunc:function(jn,Xr,Os){(de!==jn||Ce!==Xr||Ze!==Os)&&(n.stencilFunc(jn,Xr,Os),de=jn,Ce=Xr,Ze=Os)},setOp:function(jn,Xr,Os){(qe!==jn||qt!==Xr||Si!==Os)&&(n.stencilOp(jn,Xr,Os),qe=jn,qt=Xr,Si=Os)},setLocked:function(jn){Y=jn},setClear:function(jn){gr!==jn&&(n.clearStencil(jn),gr=jn)},reset:function(){Y=!1,We=null,de=null,Ce=null,Ze=null,qe=null,qt=null,Si=null,gr=null}}}let o=new e,s=new i,a=new r,c=new WeakMap,d=new WeakMap,f={},h={},v=new WeakMap,_=[],C=null,w=!1,b=null,x=null,D=null,S=null,P=null,W=null,V=null,H=new Tt(0,0,0),$=0,F=!1,I=null,U=null,q=null,ie=null,oe=null,pe=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),fe=!1,Te=0,ce=n.getParameter(n.VERSION);ce.indexOf("WebGL")!==-1?(Te=parseFloat(/^WebGL (\d)/.exec(ce)[1]),fe=Te>=1):ce.indexOf("OpenGL ES")!==-1&&(Te=parseFloat(/^OpenGL ES (\d)/.exec(ce)[1]),fe=Te>=2);let De=null,$e={},Qe=n.getParameter(n.SCISSOR_BOX),Jt=n.getParameter(n.VIEWPORT),Dn=new an().fromArray(Qe),ve=new an().fromArray(Jt);function Ne(Y,We,de,Ce){let Ze=new Uint8Array(4),qe=n.createTexture();n.bindTexture(Y,qe),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qt=0;qt<de;qt++)Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY?n.texImage3D(We,0,n.RGBA,1,1,Ce,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(We+qt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return qe}let rt={};rt[n.TEXTURE_2D]=Ne(n.TEXTURE_2D,n.TEXTURE_2D,1),rt[n.TEXTURE_CUBE_MAP]=Ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),rt[n.TEXTURE_2D_ARRAY]=Ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),rt[n.TEXTURE_3D]=Ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ze(n.DEPTH_TEST),s.setFunc($f),bn(!1),On(aL),ze(n.CULL_FACE),te(Ec);function ze(Y){f[Y]!==!0&&(n.enable(Y),f[Y]=!0)}function Nt(Y){f[Y]!==!1&&(n.disable(Y),f[Y]=!1)}function Vt(Y,We){return h[Y]!==We?(n.bindFramebuffer(Y,We),h[Y]=We,Y===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=We),Y===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=We),!0):!1}function nn(Y,We){let de=_,Ce=!1;if(Y){de=v.get(We),de===void 0&&(de=[],v.set(We,de));let Ze=Y.textures;if(de.length!==Ze.length||de[0]!==n.COLOR_ATTACHMENT0){for(let qe=0,qt=Ze.length;qe<qt;qe++)de[qe]=n.COLOR_ATTACHMENT0+qe;de.length=Ze.length,Ce=!0}}else de[0]!==n.BACK&&(de[0]=n.BACK,Ce=!0);Ce&&n.drawBuffers(de)}function gi(Y){return C!==Y?(n.useProgram(Y),C=Y,!0):!1}let $t={[ku]:n.FUNC_ADD,[wee]:n.FUNC_SUBTRACT,[Eee]:n.FUNC_REVERSE_SUBTRACT};$t[See]=n.MIN,$t[Tee]=n.MAX;let si={[Pee]:n.ZERO,[Dee]:n.ONE,[Oee]:n.SRC_COLOR,[TS]:n.SRC_ALPHA,[kee]:n.SRC_ALPHA_SATURATE,[Nee]:n.DST_COLOR,[Iee]:n.DST_ALPHA,[Aee]:n.ONE_MINUS_SRC_COLOR,[PS]:n.ONE_MINUS_SRC_ALPHA,[Fee]:n.ONE_MINUS_DST_COLOR,[Ree]:n.ONE_MINUS_DST_ALPHA,[Lee]:n.CONSTANT_COLOR,[Uee]:n.ONE_MINUS_CONSTANT_COLOR,[Vee]:n.CONSTANT_ALPHA,[Bee]:n.ONE_MINUS_CONSTANT_ALPHA};function te(Y,We,de,Ce,Ze,qe,qt,Si,gr,jn){if(Y===Ec){w===!0&&(Nt(n.BLEND),w=!1);return}if(w===!1&&(ze(n.BLEND),w=!0),Y!==Mee){if(Y!==b||jn!==F){if((x!==ku||P!==ku)&&(n.blendEquation(n.FUNC_ADD),x=ku,P=ku),jn)switch(Y){case Hf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case lL:n.blendFunc(n.ONE,n.ONE);break;case cL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case uL:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case Hf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case lL:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case cL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case uL:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}D=null,S=null,W=null,V=null,H.set(0,0,0),$=0,b=Y,F=jn}return}Ze=Ze||We,qe=qe||de,qt=qt||Ce,(We!==x||Ze!==P)&&(n.blendEquationSeparate($t[We],$t[Ze]),x=We,P=Ze),(de!==D||Ce!==S||qe!==W||qt!==V)&&(n.blendFuncSeparate(si[de],si[Ce],si[qe],si[qt]),D=de,S=Ce,W=qe,V=qt),(Si.equals(H)===!1||gr!==$)&&(n.blendColor(Si.r,Si.g,Si.b,gr),H.copy(Si),$=gr),b=Y,F=!1}function Li(Y,We){Y.side===qo?Nt(n.CULL_FACE):ze(n.CULL_FACE);let de=Y.side===wo;We&&(de=!de),bn(de),Y.blending===Hf&&Y.transparent===!1?te(Ec):te(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.blendColor,Y.blendAlpha,Y.premultipliedAlpha),s.setFunc(Y.depthFunc),s.setTest(Y.depthTest),s.setMask(Y.depthWrite),o.setMask(Y.colorWrite);let Ce=Y.stencilWrite;a.setTest(Ce),Ce&&(a.setMask(Y.stencilWriteMask),a.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),a.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),Cn(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?ze(n.SAMPLE_ALPHA_TO_COVERAGE):Nt(n.SAMPLE_ALPHA_TO_COVERAGE)}function bn(Y){I!==Y&&(Y?n.frontFace(n.CW):n.frontFace(n.CCW),I=Y)}function On(Y){Y!==bee?(ze(n.CULL_FACE),Y!==U&&(Y===aL?n.cullFace(n.BACK):Y===Cee?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Nt(n.CULL_FACE),U=Y}function xt(Y){Y!==q&&(fe&&n.lineWidth(Y),q=Y)}function Cn(Y,We,de){Y?(ze(n.POLYGON_OFFSET_FILL),(ie!==We||oe!==de)&&(n.polygonOffset(We,de),ie=We,oe=de)):Nt(n.POLYGON_OFFSET_FILL)}function _t(Y){Y?ze(n.SCISSOR_TEST):Nt(n.SCISSOR_TEST)}function L(Y){Y===void 0&&(Y=n.TEXTURE0+pe-1),De!==Y&&(n.activeTexture(Y),De=Y)}function O(Y,We,de){de===void 0&&(De===null?de=n.TEXTURE0+pe-1:de=De);let Ce=$e[de];Ce===void 0&&(Ce={type:void 0,texture:void 0},$e[de]=Ce),(Ce.type!==Y||Ce.texture!==We)&&(De!==de&&(n.activeTexture(de),De=de),n.bindTexture(Y,We||rt[Y]),Ce.type=Y,Ce.texture=We)}function re(){let Y=$e[De];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Se(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function dt(){try{n.texSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function He(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Je(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Mn(){try{n.texStorage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Re(){try{n.texStorage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function et(){try{n.texImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function wt(){try{n.texImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function Ft(Y){Dn.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),Dn.copy(Y))}function tt(Y){ve.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),ve.copy(Y))}function An(Y,We){let de=d.get(We);de===void 0&&(de=new WeakMap,d.set(We,de));let Ce=de.get(Y);Ce===void 0&&(Ce=n.getUniformBlockIndex(We,Y.name),de.set(Y,Ce))}function rn(Y,We){let Ce=d.get(We).get(Y);c.get(We)!==Ce&&(n.uniformBlockBinding(We,Ce,Y.__bindingPointIndex),c.set(We,Ce))}function ei(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},De=null,$e={},h={},v=new WeakMap,_=[],C=null,w=!1,b=null,x=null,D=null,S=null,P=null,W=null,V=null,H=new Tt(0,0,0),$=0,F=!1,I=null,U=null,q=null,ie=null,oe=null,Dn.set(0,0,n.canvas.width,n.canvas.height),ve.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:ze,disable:Nt,bindFramebuffer:Vt,drawBuffers:nn,useProgram:gi,setBlending:te,setMaterial:Li,setFlipSided:bn,setCullFace:On,setLineWidth:xt,setPolygonOffset:Cn,setScissorTest:_t,activeTexture:L,bindTexture:O,unbindTexture:re,compressedTexImage2D:be,compressedTexImage3D:Se,texImage2D:et,texImage3D:wt,updateUBOMapping:An,uniformBlockBinding:rn,texStorage2D:Mn,texStorage3D:Re,texSubImage2D:_e,texSubImage3D:dt,compressedTexSubImage2D:He,compressedTexSubImage3D:Je,scissor:Ft,viewport:tt,reset:ei}}function oU(n,t,e,i){let r=pse(i);switch(e){case IU:return n*t;case NU:return n*t;case FU:return n*t*2;case qT:return n*t/r.components*r.byteLength;case YT:return n*t/r.components*r.byteLength;case kU:return n*t*2/r.components*r.byteLength;case XT:return n*t*2/r.components*r.byteLength;case RU:return n*t*3/r.components*r.byteLength;case ys:return n*t*4/r.components*r.byteLength;case ZT:return n*t*4/r.components*r.byteLength;case ly:case cy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case uy:case dy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case VS:case zS:return Math.max(n,16)*Math.max(t,8)/4;case US:case BS:return Math.max(n,8)*Math.max(t,8)/2;case HS:case WS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case jS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case GS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case $S:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case qS:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case YS:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case XS:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case ZS:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case KS:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case JS:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case QS:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case eT:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case tT:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case nT:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case iT:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case rT:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case fy:case oT:case sT:return Math.ceil(n/4)*Math.ceil(t/4)*16;case LU:case aT:return Math.ceil(n/4)*Math.ceil(t/4)*8;case lT:case cT:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function pse(n){switch(n){case Tl:case DU:return{byteLength:1,components:1};case vm:case OU:case Pm:return{byteLength:2,components:1};case GT:case $T:return{byteLength:2,components:4};case Vu:case jT:case ia:return{byteLength:4,components:1};case AU:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function mse(n,t,e,i,r,o,s){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new tn,f=new WeakMap,h,v=new WeakMap,_=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(L,O){return _?new OffscreenCanvas(L,O):_m("canvas")}function w(L,O,re){let be=1,Se=_t(L);if((Se.width>re||Se.height>re)&&(be=re/Math.max(Se.width,Se.height)),be<1)if(typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&L instanceof ImageBitmap||typeof VideoFrame<"u"&&L instanceof VideoFrame){let _e=Math.floor(be*Se.width),dt=Math.floor(be*Se.height);h===void 0&&(h=C(_e,dt));let He=O?C(_e,dt):h;return He.width=_e,He.height=dt,He.getContext("2d").drawImage(L,0,0,_e,dt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+_e+"x"+dt+")."),He}else return"data"in L&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),L;return L}function b(L){return L.generateMipmaps}function x(L){n.generateMipmap(L)}function D(L){return L.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:L.isWebGL3DRenderTarget?n.TEXTURE_3D:L.isWebGLArrayRenderTarget||L.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(L,O,re,be,Se=!1){if(L!==null){if(n[L]!==void 0)return n[L];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+L+"'")}let _e=O;if(O===n.RED&&(re===n.FLOAT&&(_e=n.R32F),re===n.HALF_FLOAT&&(_e=n.R16F),re===n.UNSIGNED_BYTE&&(_e=n.R8)),O===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(_e=n.R8UI),re===n.UNSIGNED_SHORT&&(_e=n.R16UI),re===n.UNSIGNED_INT&&(_e=n.R32UI),re===n.BYTE&&(_e=n.R8I),re===n.SHORT&&(_e=n.R16I),re===n.INT&&(_e=n.R32I)),O===n.RG&&(re===n.FLOAT&&(_e=n.RG32F),re===n.HALF_FLOAT&&(_e=n.RG16F),re===n.UNSIGNED_BYTE&&(_e=n.RG8)),O===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(_e=n.RG8UI),re===n.UNSIGNED_SHORT&&(_e=n.RG16UI),re===n.UNSIGNED_INT&&(_e=n.RG32UI),re===n.BYTE&&(_e=n.RG8I),re===n.SHORT&&(_e=n.RG16I),re===n.INT&&(_e=n.RG32I)),O===n.RGB_INTEGER&&(re===n.UNSIGNED_BYTE&&(_e=n.RGB8UI),re===n.UNSIGNED_SHORT&&(_e=n.RGB16UI),re===n.UNSIGNED_INT&&(_e=n.RGB32UI),re===n.BYTE&&(_e=n.RGB8I),re===n.SHORT&&(_e=n.RGB16I),re===n.INT&&(_e=n.RGB32I)),O===n.RGBA_INTEGER&&(re===n.UNSIGNED_BYTE&&(_e=n.RGBA8UI),re===n.UNSIGNED_SHORT&&(_e=n.RGBA16UI),re===n.UNSIGNED_INT&&(_e=n.RGBA32UI),re===n.BYTE&&(_e=n.RGBA8I),re===n.SHORT&&(_e=n.RGBA16I),re===n.INT&&(_e=n.RGBA32I)),O===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(_e=n.RGB9_E5),O===n.RGBA){let dt=Se?Wy:Rn.getTransfer(be);re===n.FLOAT&&(_e=n.RGBA32F),re===n.HALF_FLOAT&&(_e=n.RGBA16F),re===n.UNSIGNED_BYTE&&(_e=dt===oi?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(_e=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(_e=n.RGB5_A1)}return(_e===n.R16F||_e===n.R32F||_e===n.RG16F||_e===n.RG32F||_e===n.RGBA16F||_e===n.RGBA32F)&&t.get("EXT_color_buffer_float"),_e}function P(L,O){let re;return L?O===null||O===Vu||O===Xf?re=n.DEPTH24_STENCIL8:O===ia?re=n.DEPTH32F_STENCIL8:O===vm&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):O===null||O===Vu||O===Xf?re=n.DEPTH_COMPONENT24:O===ia?re=n.DEPTH_COMPONENT32F:O===vm&&(re=n.DEPTH_COMPONENT16),re}function W(L,O){return b(L)===!0||L.isFramebufferTexture&&L.minFilter!==zr&&L.minFilter!==wr?Math.log2(Math.max(O.width,O.height))+1:L.mipmaps!==void 0&&L.mipmaps.length>0?L.mipmaps.length:L.isCompressedTexture&&Array.isArray(L.image)?O.mipmaps.length:1}function V(L){let O=L.target;O.removeEventListener("dispose",V),$(O),O.isVideoTexture&&f.delete(O)}function H(L){let O=L.target;O.removeEventListener("dispose",H),I(O)}function $(L){let O=i.get(L);if(O.__webglInit===void 0)return;let re=L.source,be=v.get(re);if(be){let Se=be[O.__cacheKey];Se.usedTimes--,Se.usedTimes===0&&F(L),Object.keys(be).length===0&&v.delete(re)}i.remove(L)}function F(L){let O=i.get(L);n.deleteTexture(O.__webglTexture);let re=L.source,be=v.get(re);delete be[O.__cacheKey],s.memory.textures--}function I(L){let O=i.get(L);if(L.depthTexture&&(L.depthTexture.dispose(),i.remove(L.depthTexture)),L.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(O.__webglFramebuffer[be]))for(let Se=0;Se<O.__webglFramebuffer[be].length;Se++)n.deleteFramebuffer(O.__webglFramebuffer[be][Se]);else n.deleteFramebuffer(O.__webglFramebuffer[be]);O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer[be])}else{if(Array.isArray(O.__webglFramebuffer))for(let be=0;be<O.__webglFramebuffer.length;be++)n.deleteFramebuffer(O.__webglFramebuffer[be]);else n.deleteFramebuffer(O.__webglFramebuffer);if(O.__webglDepthbuffer&&n.deleteRenderbuffer(O.__webglDepthbuffer),O.__webglMultisampledFramebuffer&&n.deleteFramebuffer(O.__webglMultisampledFramebuffer),O.__webglColorRenderbuffer)for(let be=0;be<O.__webglColorRenderbuffer.length;be++)O.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(O.__webglColorRenderbuffer[be]);O.__webglDepthRenderbuffer&&n.deleteRenderbuffer(O.__webglDepthRenderbuffer)}let re=L.textures;for(let be=0,Se=re.length;be<Se;be++){let _e=i.get(re[be]);_e.__webglTexture&&(n.deleteTexture(_e.__webglTexture),s.memory.textures--),i.remove(re[be])}i.remove(L)}let U=0;function q(){U=0}function ie(){let L=U;return L>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+L+" texture units while this GPU supports only "+r.maxTextures),U+=1,L}function oe(L){let O=[];return O.push(L.wrapS),O.push(L.wrapT),O.push(L.wrapR||0),O.push(L.magFilter),O.push(L.minFilter),O.push(L.anisotropy),O.push(L.internalFormat),O.push(L.format),O.push(L.type),O.push(L.generateMipmaps),O.push(L.premultiplyAlpha),O.push(L.flipY),O.push(L.unpackAlignment),O.push(L.colorSpace),O.join()}function pe(L,O){let re=i.get(L);if(L.isVideoTexture&&xt(L),L.isRenderTargetTexture===!1&&L.version>0&&re.__version!==L.version){let be=L.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve(re,L,O);return}}e.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+O)}function fe(L,O){let re=i.get(L);if(L.version>0&&re.__version!==L.version){ve(re,L,O);return}e.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+O)}function Te(L,O){let re=i.get(L);if(L.version>0&&re.__version!==L.version){ve(re,L,O);return}e.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+O)}function ce(L,O){let re=i.get(L);if(L.version>0&&re.__version!==L.version){Ne(re,L,O);return}e.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+O)}let De={[sr]:n.REPEAT,[wl]:n.CLAMP_TO_EDGE,[gm]:n.MIRRORED_REPEAT},$e={[zr]:n.NEAREST,[WT]:n.NEAREST_MIPMAP_NEAREST,[Uf]:n.NEAREST_MIPMAP_LINEAR,[wr]:n.LINEAR,[fm]:n.LINEAR_MIPMAP_NEAREST,[Mo]:n.LINEAR_MIPMAP_LINEAR},Qe={[ite]:n.NEVER,[cte]:n.ALWAYS,[rte]:n.LESS,[BU]:n.LEQUAL,[ote]:n.EQUAL,[lte]:n.GEQUAL,[ste]:n.GREATER,[ate]:n.NOTEQUAL};function Jt(L,O){if(O.type===ia&&t.has("OES_texture_float_linear")===!1&&(O.magFilter===wr||O.magFilter===fm||O.magFilter===Uf||O.magFilter===Mo||O.minFilter===wr||O.minFilter===fm||O.minFilter===Uf||O.minFilter===Mo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(L,n.TEXTURE_WRAP_S,De[O.wrapS]),n.texParameteri(L,n.TEXTURE_WRAP_T,De[O.wrapT]),(L===n.TEXTURE_3D||L===n.TEXTURE_2D_ARRAY)&&n.texParameteri(L,n.TEXTURE_WRAP_R,De[O.wrapR]),n.texParameteri(L,n.TEXTURE_MAG_FILTER,$e[O.magFilter]),n.texParameteri(L,n.TEXTURE_MIN_FILTER,$e[O.minFilter]),O.compareFunction&&(n.texParameteri(L,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(L,n.TEXTURE_COMPARE_FUNC,Qe[O.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(O.magFilter===zr||O.minFilter!==Uf&&O.minFilter!==Mo||O.type===ia&&t.has("OES_texture_float_linear")===!1)return;if(O.anisotropy>1||i.get(O).__currentAnisotropy){let re=t.get("EXT_texture_filter_anisotropic");n.texParameterf(L,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(O.anisotropy,r.getMaxAnisotropy())),i.get(O).__currentAnisotropy=O.anisotropy}}}function Dn(L,O){let re=!1;L.__webglInit===void 0&&(L.__webglInit=!0,O.addEventListener("dispose",V));let be=O.source,Se=v.get(be);Se===void 0&&(Se={},v.set(be,Se));let _e=oe(O);if(_e!==L.__cacheKey){Se[_e]===void 0&&(Se[_e]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,re=!0),Se[_e].usedTimes++;let dt=Se[L.__cacheKey];dt!==void 0&&(Se[L.__cacheKey].usedTimes--,dt.usedTimes===0&&F(O)),L.__cacheKey=_e,L.__webglTexture=Se[_e].texture}return re}function ve(L,O,re){let be=n.TEXTURE_2D;(O.isDataArrayTexture||O.isCompressedArrayTexture)&&(be=n.TEXTURE_2D_ARRAY),O.isData3DTexture&&(be=n.TEXTURE_3D);let Se=Dn(L,O),_e=O.source;e.bindTexture(be,L.__webglTexture,n.TEXTURE0+re);let dt=i.get(_e);if(_e.version!==dt.__version||Se===!0){e.activeTexture(n.TEXTURE0+re);let He=Rn.getPrimaries(Rn.workingColorSpace),Je=O.colorSpace===wc?null:Rn.getPrimaries(O.colorSpace),Mn=O.colorSpace===wc||He===Je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Mn);let Re=w(O.image,!1,r.maxTextureSize);Re=Cn(O,Re);let et=o.convert(O.format,O.colorSpace),wt=o.convert(O.type),Ft=S(O.internalFormat,et,wt,O.colorSpace,O.isVideoTexture);Jt(be,O);let tt,An=O.mipmaps,rn=O.isVideoTexture!==!0,ei=dt.__version===void 0||Se===!0,Y=_e.dataReady,We=W(O,Re);if(O.isDepthTexture)Ft=P(O.format===Zf,O.type),ei&&(rn?e.texStorage2D(n.TEXTURE_2D,1,Ft,Re.width,Re.height):e.texImage2D(n.TEXTURE_2D,0,Ft,Re.width,Re.height,0,et,wt,null));else if(O.isDataTexture)if(An.length>0){rn&&ei&&e.texStorage2D(n.TEXTURE_2D,We,Ft,An[0].width,An[0].height);for(let de=0,Ce=An.length;de<Ce;de++)tt=An[de],rn?Y&&e.texSubImage2D(n.TEXTURE_2D,de,0,0,tt.width,tt.height,et,wt,tt.data):e.texImage2D(n.TEXTURE_2D,de,Ft,tt.width,tt.height,0,et,wt,tt.data);O.generateMipmaps=!1}else rn?(ei&&e.texStorage2D(n.TEXTURE_2D,We,Ft,Re.width,Re.height),Y&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Re.width,Re.height,et,wt,Re.data)):e.texImage2D(n.TEXTURE_2D,0,Ft,Re.width,Re.height,0,et,wt,Re.data);else if(O.isCompressedTexture)if(O.isCompressedArrayTexture){rn&&ei&&e.texStorage3D(n.TEXTURE_2D_ARRAY,We,Ft,An[0].width,An[0].height,Re.depth);for(let de=0,Ce=An.length;de<Ce;de++)if(tt=An[de],O.format!==ys)if(et!==null)if(rn){if(Y)if(O.layerUpdates.size>0){let Ze=oU(tt.width,tt.height,O.format,O.type);for(let qe of O.layerUpdates){let qt=tt.data.subarray(qe*Ze/tt.data.BYTES_PER_ELEMENT,(qe+1)*Ze/tt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,qe,tt.width,tt.height,1,et,qt)}O.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,tt.width,tt.height,Re.depth,et,tt.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,de,Ft,tt.width,tt.height,Re.depth,0,tt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else rn?Y&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,tt.width,tt.height,Re.depth,et,wt,tt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,de,Ft,tt.width,tt.height,Re.depth,0,et,wt,tt.data)}else{rn&&ei&&e.texStorage2D(n.TEXTURE_2D,We,Ft,An[0].width,An[0].height);for(let de=0,Ce=An.length;de<Ce;de++)tt=An[de],O.format!==ys?et!==null?rn?Y&&e.compressedTexSubImage2D(n.TEXTURE_2D,de,0,0,tt.width,tt.height,et,tt.data):e.compressedTexImage2D(n.TEXTURE_2D,de,Ft,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):rn?Y&&e.texSubImage2D(n.TEXTURE_2D,de,0,0,tt.width,tt.height,et,wt,tt.data):e.texImage2D(n.TEXTURE_2D,de,Ft,tt.width,tt.height,0,et,wt,tt.data)}else if(O.isDataArrayTexture)if(rn){if(ei&&e.texStorage3D(n.TEXTURE_2D_ARRAY,We,Ft,Re.width,Re.height,Re.depth),Y)if(O.layerUpdates.size>0){let de=oU(Re.width,Re.height,O.format,O.type);for(let Ce of O.layerUpdates){let Ze=Re.data.subarray(Ce*de/Re.data.BYTES_PER_ELEMENT,(Ce+1)*de/Re.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ce,Re.width,Re.height,1,et,wt,Ze)}O.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,et,wt,Re.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Ft,Re.width,Re.height,Re.depth,0,et,wt,Re.data);else if(O.isData3DTexture)rn?(ei&&e.texStorage3D(n.TEXTURE_3D,We,Ft,Re.width,Re.height,Re.depth),Y&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,et,wt,Re.data)):e.texImage3D(n.TEXTURE_3D,0,Ft,Re.width,Re.height,Re.depth,0,et,wt,Re.data);else if(O.isFramebufferTexture){if(ei)if(rn)e.texStorage2D(n.TEXTURE_2D,We,Ft,Re.width,Re.height);else{let de=Re.width,Ce=Re.height;for(let Ze=0;Ze<We;Ze++)e.texImage2D(n.TEXTURE_2D,Ze,Ft,de,Ce,0,et,wt,null),de>>=1,Ce>>=1}}else if(An.length>0){if(rn&&ei){let de=_t(An[0]);e.texStorage2D(n.TEXTURE_2D,We,Ft,de.width,de.height)}for(let de=0,Ce=An.length;de<Ce;de++)tt=An[de],rn?Y&&e.texSubImage2D(n.TEXTURE_2D,de,0,0,et,wt,tt):e.texImage2D(n.TEXTURE_2D,de,Ft,et,wt,tt);O.generateMipmaps=!1}else if(rn){if(ei){let de=_t(Re);e.texStorage2D(n.TEXTURE_2D,We,Ft,de.width,de.height)}Y&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,et,wt,Re)}else e.texImage2D(n.TEXTURE_2D,0,Ft,et,wt,Re);b(O)&&x(be),dt.__version=_e.version,O.onUpdate&&O.onUpdate(O)}L.__version=O.version}function Ne(L,O,re){if(O.image.length!==6)return;let be=Dn(L,O),Se=O.source;e.bindTexture(n.TEXTURE_CUBE_MAP,L.__webglTexture,n.TEXTURE0+re);let _e=i.get(Se);if(Se.version!==_e.__version||be===!0){e.activeTexture(n.TEXTURE0+re);let dt=Rn.getPrimaries(Rn.workingColorSpace),He=O.colorSpace===wc?null:Rn.getPrimaries(O.colorSpace),Je=O.colorSpace===wc||dt===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,O.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,O.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,O.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let Mn=O.isCompressedTexture||O.image[0].isCompressedTexture,Re=O.image[0]&&O.image[0].isDataTexture,et=[];for(let Ce=0;Ce<6;Ce++)!Mn&&!Re?et[Ce]=w(O.image[Ce],!0,r.maxCubemapSize):et[Ce]=Re?O.image[Ce].image:O.image[Ce],et[Ce]=Cn(O,et[Ce]);let wt=et[0],Ft=o.convert(O.format,O.colorSpace),tt=o.convert(O.type),An=S(O.internalFormat,Ft,tt,O.colorSpace),rn=O.isVideoTexture!==!0,ei=_e.__version===void 0||be===!0,Y=Se.dataReady,We=W(O,wt);Jt(n.TEXTURE_CUBE_MAP,O);let de;if(Mn){rn&&ei&&e.texStorage2D(n.TEXTURE_CUBE_MAP,We,An,wt.width,wt.height);for(let Ce=0;Ce<6;Ce++){de=et[Ce].mipmaps;for(let Ze=0;Ze<de.length;Ze++){let qe=de[Ze];O.format!==ys?Ft!==null?rn?Y&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze,0,0,qe.width,qe.height,Ft,qe.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze,An,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rn?Y&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze,0,0,qe.width,qe.height,Ft,tt,qe.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze,An,qe.width,qe.height,0,Ft,tt,qe.data)}}}else{if(de=O.mipmaps,rn&&ei){de.length>0&&We++;let Ce=_t(et[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,We,An,Ce.width,Ce.height)}for(let Ce=0;Ce<6;Ce++)if(Re){rn?Y&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,et[Ce].width,et[Ce].height,Ft,tt,et[Ce].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,An,et[Ce].width,et[Ce].height,0,Ft,tt,et[Ce].data);for(let Ze=0;Ze<de.length;Ze++){let qt=de[Ze].image[Ce].image;rn?Y&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze+1,0,0,qt.width,qt.height,Ft,tt,qt.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze+1,An,qt.width,qt.height,0,Ft,tt,qt.data)}}else{rn?Y&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,Ft,tt,et[Ce]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,An,Ft,tt,et[Ce]);for(let Ze=0;Ze<de.length;Ze++){let qe=de[Ze];rn?Y&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze+1,0,0,Ft,tt,qe.image[Ce]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ze+1,An,Ft,tt,qe.image[Ce])}}}b(O)&&x(n.TEXTURE_CUBE_MAP),_e.__version=Se.version,O.onUpdate&&O.onUpdate(O)}L.__version=O.version}function rt(L,O,re,be,Se,_e){let dt=o.convert(re.format,re.colorSpace),He=o.convert(re.type),Je=S(re.internalFormat,dt,He,re.colorSpace),Mn=i.get(O),Re=i.get(re);if(Re.__renderTarget=O,!Mn.__hasExternalTextures){let et=Math.max(1,O.width>>_e),wt=Math.max(1,O.height>>_e);Se===n.TEXTURE_3D||Se===n.TEXTURE_2D_ARRAY?e.texImage3D(Se,_e,Je,et,wt,O.depth,0,dt,He,null):e.texImage2D(Se,_e,Je,et,wt,0,dt,He,null)}e.bindFramebuffer(n.FRAMEBUFFER,L),On(O)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,be,Se,Re.__webglTexture,0,bn(O)):(Se===n.TEXTURE_2D||Se>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Se<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,be,Se,Re.__webglTexture,_e),e.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(L,O,re){if(n.bindRenderbuffer(n.RENDERBUFFER,L),O.depthBuffer){let be=O.depthTexture,Se=be&&be.isDepthTexture?be.type:null,_e=P(O.stencilBuffer,Se),dt=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=bn(O);On(O)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,He,_e,O.width,O.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,He,_e,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,_e,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,dt,n.RENDERBUFFER,L)}else{let be=O.textures;for(let Se=0;Se<be.length;Se++){let _e=be[Se],dt=o.convert(_e.format,_e.colorSpace),He=o.convert(_e.type),Je=S(_e.internalFormat,dt,He,_e.colorSpace),Mn=bn(O);re&&On(O)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Mn,Je,O.width,O.height):On(O)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Mn,Je,O.width,O.height):n.renderbufferStorage(n.RENDERBUFFER,Je,O.width,O.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Nt(L,O){if(O&&O.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,L),!(O.depthTexture&&O.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let be=i.get(O.depthTexture);be.__renderTarget=O,(!be.__webglTexture||O.depthTexture.image.width!==O.width||O.depthTexture.image.height!==O.height)&&(O.depthTexture.image.width=O.width,O.depthTexture.image.height=O.height,O.depthTexture.needsUpdate=!0),pe(O.depthTexture,0);let Se=be.__webglTexture,_e=bn(O);if(O.depthTexture.format===Wf)On(O)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Se,0);else if(O.depthTexture.format===Zf)On(O)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Se,0);else throw new Error("Unknown depthTexture format")}function Vt(L){let O=i.get(L),re=L.isWebGLCubeRenderTarget===!0;if(O.__boundDepthTexture!==L.depthTexture){let be=L.depthTexture;if(O.__depthDisposeCallback&&O.__depthDisposeCallback(),be){let Se=()=>{delete O.__boundDepthTexture,delete O.__depthDisposeCallback,be.removeEventListener("dispose",Se)};be.addEventListener("dispose",Se),O.__depthDisposeCallback=Se}O.__boundDepthTexture=be}if(L.depthTexture&&!O.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");Nt(O.__webglFramebuffer,L)}else if(re){O.__webglDepthbuffer=[];for(let be=0;be<6;be++)if(e.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer[be]),O.__webglDepthbuffer[be]===void 0)O.__webglDepthbuffer[be]=n.createRenderbuffer(),ze(O.__webglDepthbuffer[be],L,!1);else{let Se=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_e=O.__webglDepthbuffer[be];n.bindRenderbuffer(n.RENDERBUFFER,_e),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,_e)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),O.__webglDepthbuffer===void 0)O.__webglDepthbuffer=n.createRenderbuffer(),ze(O.__webglDepthbuffer,L,!1);else{let be=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=O.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Se),n.framebufferRenderbuffer(n.FRAMEBUFFER,be,n.RENDERBUFFER,Se)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function nn(L,O,re){let be=i.get(L);O!==void 0&&rt(be.__webglFramebuffer,L,L.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&Vt(L)}function gi(L){let O=L.texture,re=i.get(L),be=i.get(O);L.addEventListener("dispose",H);let Se=L.textures,_e=L.isWebGLCubeRenderTarget===!0,dt=Se.length>1;if(dt||(be.__webglTexture===void 0&&(be.__webglTexture=n.createTexture()),be.__version=O.version,s.memory.textures++),_e){re.__webglFramebuffer=[];for(let He=0;He<6;He++)if(O.mipmaps&&O.mipmaps.length>0){re.__webglFramebuffer[He]=[];for(let Je=0;Je<O.mipmaps.length;Je++)re.__webglFramebuffer[He][Je]=n.createFramebuffer()}else re.__webglFramebuffer[He]=n.createFramebuffer()}else{if(O.mipmaps&&O.mipmaps.length>0){re.__webglFramebuffer=[];for(let He=0;He<O.mipmaps.length;He++)re.__webglFramebuffer[He]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(dt)for(let He=0,Je=Se.length;He<Je;He++){let Mn=i.get(Se[He]);Mn.__webglTexture===void 0&&(Mn.__webglTexture=n.createTexture(),s.memory.textures++)}if(L.samples>0&&On(L)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let He=0;He<Se.length;He++){let Je=Se[He];re.__webglColorRenderbuffer[He]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[He]);let Mn=o.convert(Je.format,Je.colorSpace),Re=o.convert(Je.type),et=S(Je.internalFormat,Mn,Re,Je.colorSpace,L.isXRRenderTarget===!0),wt=bn(L);n.renderbufferStorageMultisample(n.RENDERBUFFER,wt,et,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,re.__webglColorRenderbuffer[He])}n.bindRenderbuffer(n.RENDERBUFFER,null),L.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),ze(re.__webglDepthRenderbuffer,L,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(_e){e.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture),Jt(n.TEXTURE_CUBE_MAP,O);for(let He=0;He<6;He++)if(O.mipmaps&&O.mipmaps.length>0)for(let Je=0;Je<O.mipmaps.length;Je++)rt(re.__webglFramebuffer[He][Je],L,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,Je);else rt(re.__webglFramebuffer[He],L,O,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0);b(O)&&x(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(dt){for(let He=0,Je=Se.length;He<Je;He++){let Mn=Se[He],Re=i.get(Mn);e.bindTexture(n.TEXTURE_2D,Re.__webglTexture),Jt(n.TEXTURE_2D,Mn),rt(re.__webglFramebuffer,L,Mn,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,0),b(Mn)&&x(n.TEXTURE_2D)}e.unbindTexture()}else{let He=n.TEXTURE_2D;if((L.isWebGL3DRenderTarget||L.isWebGLArrayRenderTarget)&&(He=L.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(He,be.__webglTexture),Jt(He,O),O.mipmaps&&O.mipmaps.length>0)for(let Je=0;Je<O.mipmaps.length;Je++)rt(re.__webglFramebuffer[Je],L,O,n.COLOR_ATTACHMENT0,He,Je);else rt(re.__webglFramebuffer,L,O,n.COLOR_ATTACHMENT0,He,0);b(O)&&x(He),e.unbindTexture()}L.depthBuffer&&Vt(L)}function $t(L){let O=L.textures;for(let re=0,be=O.length;re<be;re++){let Se=O[re];if(b(Se)){let _e=D(L),dt=i.get(Se).__webglTexture;e.bindTexture(_e,dt),x(_e),e.unbindTexture()}}}let si=[],te=[];function Li(L){if(L.samples>0){if(On(L)===!1){let O=L.textures,re=L.width,be=L.height,Se=n.COLOR_BUFFER_BIT,_e=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,dt=i.get(L),He=O.length>1;if(He)for(let Je=0;Je<O.length;Je++)e.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,dt.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglFramebuffer);for(let Je=0;Je<O.length;Je++){if(L.resolveDepthBuffer&&(L.depthBuffer&&(Se|=n.DEPTH_BUFFER_BIT),L.stencilBuffer&&L.resolveStencilBuffer&&(Se|=n.STENCIL_BUFFER_BIT)),He){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,dt.__webglColorRenderbuffer[Je]);let Mn=i.get(O[Je]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Mn,0)}n.blitFramebuffer(0,0,re,be,0,0,re,be,Se,n.NEAREST),c===!0&&(si.length=0,te.length=0,si.push(n.COLOR_ATTACHMENT0+Je),L.depthBuffer&&L.resolveDepthBuffer===!1&&(si.push(_e),te.push(_e),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,te)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,si))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),He)for(let Je=0;Je<O.length;Je++){e.bindFramebuffer(n.FRAMEBUFFER,dt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,dt.__webglColorRenderbuffer[Je]);let Mn=i.get(O[Je]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,dt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,Mn,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,dt.__webglMultisampledFramebuffer)}else if(L.depthBuffer&&L.resolveDepthBuffer===!1&&c){let O=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[O])}}}function bn(L){return Math.min(r.maxSamples,L.samples)}function On(L){let O=i.get(L);return L.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&O.__useRenderToTexture!==!1}function xt(L){let O=s.render.frame;f.get(L)!==O&&(f.set(L,O),L.update())}function Cn(L,O){let re=L.colorSpace,be=L.format,Se=L.type;return L.isCompressedTexture===!0||L.isVideoTexture===!0||re!==Gr&&re!==wc&&(Rn.getTransfer(re)===oi?(be!==ys||Se!==Tl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),O}function _t(L){return typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement?(d.width=L.naturalWidth||L.width,d.height=L.naturalHeight||L.height):typeof VideoFrame<"u"&&L instanceof VideoFrame?(d.width=L.displayWidth,d.height=L.displayHeight):(d.width=L.width,d.height=L.height),d}this.allocateTextureUnit=ie,this.resetTextureUnits=q,this.setTexture2D=pe,this.setTexture2DArray=fe,this.setTexture3D=Te,this.setTextureCube=ce,this.rebindTextures=nn,this.setupRenderTarget=gi,this.updateRenderTargetMipmap=$t,this.updateMultisampleRenderTarget=Li,this.setupDepthRenderbuffer=Vt,this.setupFrameBufferTexture=rt,this.useMultisampledRTT=On}function gse(n,t){function e(i,r=wc){let o,s=Rn.getTransfer(r);if(i===Tl)return n.UNSIGNED_BYTE;if(i===GT)return n.UNSIGNED_SHORT_4_4_4_4;if(i===$T)return n.UNSIGNED_SHORT_5_5_5_1;if(i===AU)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===DU)return n.BYTE;if(i===OU)return n.SHORT;if(i===vm)return n.UNSIGNED_SHORT;if(i===jT)return n.INT;if(i===Vu)return n.UNSIGNED_INT;if(i===ia)return n.FLOAT;if(i===Pm)return n.HALF_FLOAT;if(i===IU)return n.ALPHA;if(i===RU)return n.RGB;if(i===ys)return n.RGBA;if(i===NU)return n.LUMINANCE;if(i===FU)return n.LUMINANCE_ALPHA;if(i===Wf)return n.DEPTH_COMPONENT;if(i===Zf)return n.DEPTH_STENCIL;if(i===qT)return n.RED;if(i===YT)return n.RED_INTEGER;if(i===kU)return n.RG;if(i===XT)return n.RG_INTEGER;if(i===ZT)return n.RGBA_INTEGER;if(i===ly||i===cy||i===uy||i===dy)if(s===oi)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===ly)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===cy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===uy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===dy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===ly)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===cy)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===uy)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===dy)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===US||i===VS||i===BS||i===zS)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===US)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===VS)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===BS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===zS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===HS||i===WS||i===jS)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===HS||i===WS)return s===oi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===jS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===GS||i===$S||i===qS||i===YS||i===XS||i===ZS||i===KS||i===JS||i===QS||i===eT||i===tT||i===nT||i===iT||i===rT)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===GS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$S)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===qS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===YS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===XS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===ZS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===KS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===JS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===QS)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===eT)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===tT)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===nT)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===iT)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===rT)return s===oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===fy||i===oT||i===sT)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===fy)return s===oi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===oT)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===sT)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===LU||i===aT||i===lT||i===cT)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===fy)return o.COMPRESSED_RED_RGTC1_EXT;if(i===aT)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===lT)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===cT)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Xf?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var wT=class extends fr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},Ri=class extends hr{constructor(){super(),this.isGroup=!0,this.type="Group"}},vse={type:"move"},mm=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ri,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ri,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ri,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,d=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(d&&t.hand){s=!0;for(let w of t.hand.values()){let b=e.getJointPose(w,i),x=this._getHandJoint(d,w);b!==null&&(x.matrix.fromArray(b.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=b.radius),x.visible=b!==null}let f=d.joints["index-finger-tip"],h=d.joints["thumb-tip"],v=f.position.distanceTo(h.position),_=.02,C=.005;d.inputState.pinching&&v>_+C?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&v<=_-C&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(vse)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),d!==null&&(d.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new Ri;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},_se=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,yse=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,ET=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new Ms,o=t.properties.get(r);o.__webglTexture=e.texture,(e.depthNear!=i.depthNear||e.depthFar!=i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new Aa({vertexShader:_se,fragmentShader:yse,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ci(new bs(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},ST=class extends Pl{constructor(t,e){super();let i=this,r=null,o=1,s=null,a="local-floor",c=1,d=null,f=null,h=null,v=null,_=null,C=null,w=new ET,b=e.getContextAttributes(),x=null,D=null,S=[],P=[],W=new tn,V=null,H=new fr;H.viewport=new an;let $=new fr;$.viewport=new an;let F=[H,$],I=new wT,U=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ve){let Ne=S[ve];return Ne===void 0&&(Ne=new mm,S[ve]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(ve){let Ne=S[ve];return Ne===void 0&&(Ne=new mm,S[ve]=Ne),Ne.getGripSpace()},this.getHand=function(ve){let Ne=S[ve];return Ne===void 0&&(Ne=new mm,S[ve]=Ne),Ne.getHandSpace()};function ie(ve){let Ne=P.indexOf(ve.inputSource);if(Ne===-1)return;let rt=S[Ne];rt!==void 0&&(rt.update(ve.inputSource,ve.frame,d||s),rt.dispatchEvent({type:ve.type,data:ve.inputSource}))}function oe(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",pe);for(let ve=0;ve<S.length;ve++){let Ne=P[ve];Ne!==null&&(P[ve]=null,S[ve].disconnect(Ne))}U=null,q=null,w.reset(),t.setRenderTarget(x),_=null,v=null,h=null,r=null,D=null,Dn.stop(),i.isPresenting=!1,t.setPixelRatio(V),t.setSize(W.width,W.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ve){o=ve,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ve){a=ve,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(ve){d=ve},this.getBaseLayer=function(){return v!==null?v:_},this.getBinding=function(){return h},this.getFrame=function(){return C},this.getSession=function(){return r},this.setSession=function(ve){return Xc(this,null,function*(){if(r=ve,r!==null){if(x=t.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",pe),b.xrCompatible!==!0&&(yield e.makeXRCompatible()),V=t.getPixelRatio(),t.getSize(W),r.renderState.layers===void 0){let Ne={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:o};_=new XRWebGLLayer(r,e,Ne),r.updateRenderState({baseLayer:_}),t.setPixelRatio(1),t.setSize(_.framebufferWidth,_.framebufferHeight,!1),D=new Dl(_.framebufferWidth,_.framebufferHeight,{format:ys,type:Tl,colorSpace:t.outputColorSpace,stencilBuffer:b.stencil})}else{let Ne=null,rt=null,ze=null;b.depth&&(ze=b.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ne=b.stencil?Zf:Wf,rt=b.stencil?Xf:Vu);let Nt={colorFormat:e.RGBA8,depthFormat:ze,scaleFactor:o};h=new XRWebGLBinding(r,e),v=h.createProjectionLayer(Nt),r.updateRenderState({layers:[v]}),t.setPixelRatio(1),t.setSize(v.textureWidth,v.textureHeight,!1),D=new Dl(v.textureWidth,v.textureHeight,{format:ys,type:Tl,depthTexture:new Cy(v.textureWidth,v.textureHeight,rt,void 0,void 0,void 0,void 0,void 0,void 0,Ne),stencilBuffer:b.stencil,colorSpace:t.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(c),d=null,s=yield r.requestReferenceSpace(a),Dn.setContext(r),Dn.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function pe(ve){for(let Ne=0;Ne<ve.removed.length;Ne++){let rt=ve.removed[Ne],ze=P.indexOf(rt);ze>=0&&(P[ze]=null,S[ze].disconnect(rt))}for(let Ne=0;Ne<ve.added.length;Ne++){let rt=ve.added[Ne],ze=P.indexOf(rt);if(ze===-1){for(let Vt=0;Vt<S.length;Vt++)if(Vt>=P.length){P.push(rt),ze=Vt;break}else if(P[Vt]===null){P[Vt]=rt,ze=Vt;break}if(ze===-1)break}let Nt=S[ze];Nt&&Nt.connect(rt)}}let fe=new j,Te=new j;function ce(ve,Ne,rt){fe.setFromMatrixPosition(Ne.matrixWorld),Te.setFromMatrixPosition(rt.matrixWorld);let ze=fe.distanceTo(Te),Nt=Ne.projectionMatrix.elements,Vt=rt.projectionMatrix.elements,nn=Nt[14]/(Nt[10]-1),gi=Nt[14]/(Nt[10]+1),$t=(Nt[9]+1)/Nt[5],si=(Nt[9]-1)/Nt[5],te=(Nt[8]-1)/Nt[0],Li=(Vt[8]+1)/Vt[0],bn=nn*te,On=nn*Li,xt=ze/(-te+Li),Cn=xt*-te;if(Ne.matrixWorld.decompose(ve.position,ve.quaternion,ve.scale),ve.translateX(Cn),ve.translateZ(xt),ve.matrixWorld.compose(ve.position,ve.quaternion,ve.scale),ve.matrixWorldInverse.copy(ve.matrixWorld).invert(),Nt[10]===-1)ve.projectionMatrix.copy(Ne.projectionMatrix),ve.projectionMatrixInverse.copy(Ne.projectionMatrixInverse);else{let _t=nn+xt,L=gi+xt,O=bn-Cn,re=On+(ze-Cn),be=$t*gi/L*_t,Se=si*gi/L*_t;ve.projectionMatrix.makePerspective(O,re,be,Se,_t,L),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert()}}function De(ve,Ne){Ne===null?ve.matrixWorld.copy(ve.matrix):ve.matrixWorld.multiplyMatrices(Ne.matrixWorld,ve.matrix),ve.matrixWorldInverse.copy(ve.matrixWorld).invert()}this.updateCamera=function(ve){if(r===null)return;let Ne=ve.near,rt=ve.far;w.texture!==null&&(w.depthNear>0&&(Ne=w.depthNear),w.depthFar>0&&(rt=w.depthFar)),I.near=$.near=H.near=Ne,I.far=$.far=H.far=rt,(U!==I.near||q!==I.far)&&(r.updateRenderState({depthNear:I.near,depthFar:I.far}),U=I.near,q=I.far),H.layers.mask=ve.layers.mask|2,$.layers.mask=ve.layers.mask|4,I.layers.mask=H.layers.mask|$.layers.mask;let ze=ve.parent,Nt=I.cameras;De(I,ze);for(let Vt=0;Vt<Nt.length;Vt++)De(Nt[Vt],ze);Nt.length===2?ce(I,H,$):I.projectionMatrix.copy(H.projectionMatrix),$e(ve,I,ze)};function $e(ve,Ne,rt){rt===null?ve.matrix.copy(Ne.matrixWorld):(ve.matrix.copy(rt.matrixWorld),ve.matrix.invert(),ve.matrix.multiply(Ne.matrixWorld)),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.updateMatrixWorld(!0),ve.projectionMatrix.copy(Ne.projectionMatrix),ve.projectionMatrixInverse.copy(Ne.projectionMatrixInverse),ve.isPerspectiveCamera&&(ve.fov=Qf*2*Math.atan(1/ve.projectionMatrix.elements[5]),ve.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(v===null&&_===null))return c},this.setFoveation=function(ve){c=ve,v!==null&&(v.fixedFoveation=ve),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=ve)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(I)};let Qe=null;function Jt(ve,Ne){if(f=Ne.getViewerPose(d||s),C=Ne,f!==null){let rt=f.views;_!==null&&(t.setRenderTargetFramebuffer(D,_.framebuffer),t.setRenderTarget(D));let ze=!1;rt.length!==I.cameras.length&&(I.cameras.length=0,ze=!0);for(let Vt=0;Vt<rt.length;Vt++){let nn=rt[Vt],gi=null;if(_!==null)gi=_.getViewport(nn);else{let si=h.getViewSubImage(v,nn);gi=si.viewport,Vt===0&&(t.setRenderTargetTextures(D,si.colorTexture,v.ignoreDepthValues?void 0:si.depthStencilTexture),t.setRenderTarget(D))}let $t=F[Vt];$t===void 0&&($t=new fr,$t.layers.enable(Vt),$t.viewport=new an,F[Vt]=$t),$t.matrix.fromArray(nn.transform.matrix),$t.matrix.decompose($t.position,$t.quaternion,$t.scale),$t.projectionMatrix.fromArray(nn.projectionMatrix),$t.projectionMatrixInverse.copy($t.projectionMatrix).invert(),$t.viewport.set(gi.x,gi.y,gi.width,gi.height),Vt===0&&(I.matrix.copy($t.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),ze===!0&&I.cameras.push($t)}let Nt=r.enabledFeatures;if(Nt&&Nt.includes("depth-sensing")){let Vt=h.getDepthInformation(rt[0]);Vt&&Vt.isValid&&Vt.texture&&w.init(t,Vt,r.renderState)}}for(let rt=0;rt<S.length;rt++){let ze=P[rt],Nt=S[rt];ze!==null&&Nt!==void 0&&Nt.update(ze,Ne,d||s)}Qe&&Qe(ve,Ne),Ne.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ne}),C=null}let Dn=new jU;Dn.setAnimationLoop(Jt),this.setAnimationLoop=function(ve){Qe=ve},this.dispose=function(){}}},Nu=new zu,xse=new Kt;function bse(n,t){function e(b,x){b.matrixAutoUpdate===!0&&b.updateMatrix(),x.value.copy(b.matrix)}function i(b,x){x.color.getRGB(b.fogColor.value,WU(n)),x.isFog?(b.fogNear.value=x.near,b.fogFar.value=x.far):x.isFogExp2&&(b.fogDensity.value=x.density)}function r(b,x,D,S,P){x.isMeshBasicMaterial||x.isMeshLambertMaterial?o(b,x):x.isMeshToonMaterial?(o(b,x),h(b,x)):x.isMeshPhongMaterial?(o(b,x),f(b,x)):x.isMeshStandardMaterial?(o(b,x),v(b,x),x.isMeshPhysicalMaterial&&_(b,x,P)):x.isMeshMatcapMaterial?(o(b,x),C(b,x)):x.isMeshDepthMaterial?o(b,x):x.isMeshDistanceMaterial?(o(b,x),w(b,x)):x.isMeshNormalMaterial?o(b,x):x.isLineBasicMaterial?(s(b,x),x.isLineDashedMaterial&&a(b,x)):x.isPointsMaterial?c(b,x,D,S):x.isSpriteMaterial?d(b,x):x.isShadowMaterial?(b.color.value.copy(x.color),b.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function o(b,x){b.opacity.value=x.opacity,x.color&&b.diffuse.value.copy(x.color),x.emissive&&b.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(b.map.value=x.map,e(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,e(x.alphaMap,b.alphaMapTransform)),x.bumpMap&&(b.bumpMap.value=x.bumpMap,e(x.bumpMap,b.bumpMapTransform),b.bumpScale.value=x.bumpScale,x.side===wo&&(b.bumpScale.value*=-1)),x.normalMap&&(b.normalMap.value=x.normalMap,e(x.normalMap,b.normalMapTransform),b.normalScale.value.copy(x.normalScale),x.side===wo&&b.normalScale.value.negate()),x.displacementMap&&(b.displacementMap.value=x.displacementMap,e(x.displacementMap,b.displacementMapTransform),b.displacementScale.value=x.displacementScale,b.displacementBias.value=x.displacementBias),x.emissiveMap&&(b.emissiveMap.value=x.emissiveMap,e(x.emissiveMap,b.emissiveMapTransform)),x.specularMap&&(b.specularMap.value=x.specularMap,e(x.specularMap,b.specularMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest);let D=t.get(x),S=D.envMap,P=D.envMapRotation;S&&(b.envMap.value=S,Nu.copy(P),Nu.x*=-1,Nu.y*=-1,Nu.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Nu.y*=-1,Nu.z*=-1),b.envMapRotation.value.setFromMatrix4(xse.makeRotationFromEuler(Nu)),b.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,b.reflectivity.value=x.reflectivity,b.ior.value=x.ior,b.refractionRatio.value=x.refractionRatio),x.lightMap&&(b.lightMap.value=x.lightMap,b.lightMapIntensity.value=x.lightMapIntensity,e(x.lightMap,b.lightMapTransform)),x.aoMap&&(b.aoMap.value=x.aoMap,b.aoMapIntensity.value=x.aoMapIntensity,e(x.aoMap,b.aoMapTransform))}function s(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,x.map&&(b.map.value=x.map,e(x.map,b.mapTransform))}function a(b,x){b.dashSize.value=x.dashSize,b.totalSize.value=x.dashSize+x.gapSize,b.scale.value=x.scale}function c(b,x,D,S){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.size.value=x.size*D,b.scale.value=S*.5,x.map&&(b.map.value=x.map,e(x.map,b.uvTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,e(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function d(b,x){b.diffuse.value.copy(x.color),b.opacity.value=x.opacity,b.rotation.value=x.rotation,x.map&&(b.map.value=x.map,e(x.map,b.mapTransform)),x.alphaMap&&(b.alphaMap.value=x.alphaMap,e(x.alphaMap,b.alphaMapTransform)),x.alphaTest>0&&(b.alphaTest.value=x.alphaTest)}function f(b,x){b.specular.value.copy(x.specular),b.shininess.value=Math.max(x.shininess,1e-4)}function h(b,x){x.gradientMap&&(b.gradientMap.value=x.gradientMap)}function v(b,x){b.metalness.value=x.metalness,x.metalnessMap&&(b.metalnessMap.value=x.metalnessMap,e(x.metalnessMap,b.metalnessMapTransform)),b.roughness.value=x.roughness,x.roughnessMap&&(b.roughnessMap.value=x.roughnessMap,e(x.roughnessMap,b.roughnessMapTransform)),x.envMap&&(b.envMapIntensity.value=x.envMapIntensity)}function _(b,x,D){b.ior.value=x.ior,x.sheen>0&&(b.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),b.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(b.sheenColorMap.value=x.sheenColorMap,e(x.sheenColorMap,b.sheenColorMapTransform)),x.sheenRoughnessMap&&(b.sheenRoughnessMap.value=x.sheenRoughnessMap,e(x.sheenRoughnessMap,b.sheenRoughnessMapTransform))),x.clearcoat>0&&(b.clearcoat.value=x.clearcoat,b.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(b.clearcoatMap.value=x.clearcoatMap,e(x.clearcoatMap,b.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,e(x.clearcoatRoughnessMap,b.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(b.clearcoatNormalMap.value=x.clearcoatNormalMap,e(x.clearcoatNormalMap,b.clearcoatNormalMapTransform),b.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===wo&&b.clearcoatNormalScale.value.negate())),x.dispersion>0&&(b.dispersion.value=x.dispersion),x.iridescence>0&&(b.iridescence.value=x.iridescence,b.iridescenceIOR.value=x.iridescenceIOR,b.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],b.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(b.iridescenceMap.value=x.iridescenceMap,e(x.iridescenceMap,b.iridescenceMapTransform)),x.iridescenceThicknessMap&&(b.iridescenceThicknessMap.value=x.iridescenceThicknessMap,e(x.iridescenceThicknessMap,b.iridescenceThicknessMapTransform))),x.transmission>0&&(b.transmission.value=x.transmission,b.transmissionSamplerMap.value=D.texture,b.transmissionSamplerSize.value.set(D.width,D.height),x.transmissionMap&&(b.transmissionMap.value=x.transmissionMap,e(x.transmissionMap,b.transmissionMapTransform)),b.thickness.value=x.thickness,x.thicknessMap&&(b.thicknessMap.value=x.thicknessMap,e(x.thicknessMap,b.thicknessMapTransform)),b.attenuationDistance.value=x.attenuationDistance,b.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(b.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(b.anisotropyMap.value=x.anisotropyMap,e(x.anisotropyMap,b.anisotropyMapTransform))),b.specularIntensity.value=x.specularIntensity,b.specularColor.value.copy(x.specularColor),x.specularColorMap&&(b.specularColorMap.value=x.specularColorMap,e(x.specularColorMap,b.specularColorMapTransform)),x.specularIntensityMap&&(b.specularIntensityMap.value=x.specularIntensityMap,e(x.specularIntensityMap,b.specularIntensityMapTransform))}function C(b,x){x.matcap&&(b.matcap.value=x.matcap)}function w(b,x){let D=t.get(x).light;b.referencePosition.value.setFromMatrixPosition(D.matrixWorld),b.nearDistance.value=D.shadow.camera.near,b.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Cse(n,t,e,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(D,S){let P=S.program;i.uniformBlockBinding(D,P)}function d(D,S){let P=r[D.id];P===void 0&&(C(D),P=f(D),r[D.id]=P,D.addEventListener("dispose",b));let W=S.program;i.updateUBOMapping(D,W);let V=t.render.frame;o[D.id]!==V&&(v(D),o[D.id]=V)}function f(D){let S=h();D.__bindingPointIndex=S;let P=n.createBuffer(),W=D.__size,V=D.usage;return n.bindBuffer(n.UNIFORM_BUFFER,P),n.bufferData(n.UNIFORM_BUFFER,W,V),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,P),P}function h(){for(let D=0;D<a;D++)if(s.indexOf(D)===-1)return s.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(D){let S=r[D.id],P=D.uniforms,W=D.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let V=0,H=P.length;V<H;V++){let $=Array.isArray(P[V])?P[V]:[P[V]];for(let F=0,I=$.length;F<I;F++){let U=$[F];if(_(U,V,F,W)===!0){let q=U.__offset,ie=Array.isArray(U.value)?U.value:[U.value],oe=0;for(let pe=0;pe<ie.length;pe++){let fe=ie[pe],Te=w(fe);typeof fe=="number"||typeof fe=="boolean"?(U.__data[0]=fe,n.bufferSubData(n.UNIFORM_BUFFER,q+oe,U.__data)):fe.isMatrix3?(U.__data[0]=fe.elements[0],U.__data[1]=fe.elements[1],U.__data[2]=fe.elements[2],U.__data[3]=0,U.__data[4]=fe.elements[3],U.__data[5]=fe.elements[4],U.__data[6]=fe.elements[5],U.__data[7]=0,U.__data[8]=fe.elements[6],U.__data[9]=fe.elements[7],U.__data[10]=fe.elements[8],U.__data[11]=0):(fe.toArray(U.__data,oe),oe+=Te.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,q,U.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function _(D,S,P,W){let V=D.value,H=S+"_"+P;if(W[H]===void 0)return typeof V=="number"||typeof V=="boolean"?W[H]=V:W[H]=V.clone(),!0;{let $=W[H];if(typeof V=="number"||typeof V=="boolean"){if($!==V)return W[H]=V,!0}else if($.equals(V)===!1)return $.copy(V),!0}return!1}function C(D){let S=D.uniforms,P=0,W=16;for(let H=0,$=S.length;H<$;H++){let F=Array.isArray(S[H])?S[H]:[S[H]];for(let I=0,U=F.length;I<U;I++){let q=F[I],ie=Array.isArray(q.value)?q.value:[q.value];for(let oe=0,pe=ie.length;oe<pe;oe++){let fe=ie[oe],Te=w(fe),ce=P%W,De=ce%Te.boundary,$e=ce+De;P+=De,$e!==0&&W-$e<Te.storage&&(P+=W-$e),q.__data=new Float32Array(Te.storage/Float32Array.BYTES_PER_ELEMENT),q.__offset=P,P+=Te.storage}}}let V=P%W;return V>0&&(P+=W-V),D.__size=P,D.__cache={},this}function w(D){let S={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(S.boundary=4,S.storage=4):D.isVector2?(S.boundary=8,S.storage=8):D.isVector3||D.isColor?(S.boundary=16,S.storage=12):D.isVector4?(S.boundary=16,S.storage=16):D.isMatrix3?(S.boundary=48,S.storage=48):D.isMatrix4?(S.boundary=64,S.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),S}function b(D){let S=D.target;S.removeEventListener("dispose",b);let P=s.indexOf(S.__bindingPointIndex);s.splice(P,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete o[S.id]}function x(){for(let D in r)n.deleteBuffer(r[D]);s=[],r={},o={}}return{bind:c,update:d,dispose:x}}var My=class{constructor(t={}){let{canvas:e=Ste(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:v=!1}=t;this.isWebGLRenderer=!0;let _;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=i.getContextAttributes().alpha}else _=s;let C=new Uint32Array(4),w=new Int32Array(4),b=null,x=null,D=[],S=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ki,this.toneMapping=Sc,this.toneMappingExposure=1;let P=this,W=!1,V=0,H=0,$=null,F=-1,I=null,U=new an,q=new an,ie=null,oe=new Tt(0),pe=0,fe=e.width,Te=e.height,ce=1,De=null,$e=null,Qe=new an(0,0,fe,Te),Jt=new an(0,0,fe,Te),Dn=!1,ve=new bm,Ne=!1,rt=!1,ze=new Kt,Nt=new Kt,Vt=new j,nn=new an,gi={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},$t=!1;function si(){return $===null?ce:1}let te=i;function Li(R,J){return e.getContext(R,J)}try{let R={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${zT}`),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",Ze,!1),e.addEventListener("webglcontextcreationerror",qe,!1),te===null){let J="webgl2";if(te=Li(J,R),te===null)throw Li(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}let bn,On,xt,Cn,_t,L,O,re,be,Se,_e,dt,He,Je,Mn,Re,et,wt,Ft,tt,An,rn,ei,Y;function We(){bn=new Ure(te),bn.init(),rn=new gse(te,bn),On=new Ire(te,bn,t,rn),xt=new hse(te,bn),On.reverseDepthBuffer&&v&&xt.buffers.depth.setReversed(!0),Cn=new zre(te),_t=new ese,L=new mse(te,bn,xt,_t,On,rn,Cn),O=new Nre(P),re=new Lre(P),be=new Yte(te),ei=new Ore(te,be),Se=new Vre(te,be,Cn,ei),_e=new Wre(te,Se,be,Cn),Ft=new Hre(te,On,L),Re=new Rre(_t),dt=new Qoe(P,O,re,bn,On,ei,Re),He=new bse(P,_t),Je=new nse,Mn=new lse(bn),wt=new Dre(P,O,re,xt,_e,_,c),et=new dse(P,_e,On),Y=new Cse(te,Cn,On,xt),tt=new Are(te,bn,Cn),An=new Bre(te,bn,Cn),Cn.programs=dt.programs,P.capabilities=On,P.extensions=bn,P.properties=_t,P.renderLists=Je,P.shadowMap=et,P.state=xt,P.info=Cn}We();let de=new ST(P,te);this.xr=de,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){let R=bn.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){let R=bn.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(R){R!==void 0&&(ce=R,this.setSize(fe,Te,!1))},this.getSize=function(R){return R.set(fe,Te)},this.setSize=function(R,J,se=!0){if(de.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}fe=R,Te=J,e.width=Math.floor(R*ce),e.height=Math.floor(J*ce),se===!0&&(e.style.width=R+"px",e.style.height=J+"px"),this.setViewport(0,0,R,J)},this.getDrawingBufferSize=function(R){return R.set(fe*ce,Te*ce).floor()},this.setDrawingBufferSize=function(R,J,se){fe=R,Te=J,ce=se,e.width=Math.floor(R*se),e.height=Math.floor(J*se),this.setViewport(0,0,R,J)},this.getCurrentViewport=function(R){return R.copy(U)},this.getViewport=function(R){return R.copy(Qe)},this.setViewport=function(R,J,se,ae){R.isVector4?Qe.set(R.x,R.y,R.z,R.w):Qe.set(R,J,se,ae),xt.viewport(U.copy(Qe).multiplyScalar(ce).round())},this.getScissor=function(R){return R.copy(Jt)},this.setScissor=function(R,J,se,ae){R.isVector4?Jt.set(R.x,R.y,R.z,R.w):Jt.set(R,J,se,ae),xt.scissor(q.copy(Jt).multiplyScalar(ce).round())},this.getScissorTest=function(){return Dn},this.setScissorTest=function(R){xt.setScissorTest(Dn=R)},this.setOpaqueSort=function(R){De=R},this.setTransparentSort=function(R){$e=R},this.getClearColor=function(R){return R.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor.apply(wt,arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha.apply(wt,arguments)},this.clear=function(R=!0,J=!0,se=!0){let ae=0;if(R){let K=!1;if($!==null){let ke=$.texture.format;K=ke===ZT||ke===XT||ke===YT}if(K){let ke=$.texture.type,Ye=ke===Tl||ke===Vu||ke===vm||ke===Xf||ke===GT||ke===$T,ft=wt.getClearColor(),ut=wt.getClearAlpha(),Bt=ft.r,Yt=ft.g,ht=ft.b;Ye?(C[0]=Bt,C[1]=Yt,C[2]=ht,C[3]=ut,te.clearBufferuiv(te.COLOR,0,C)):(w[0]=Bt,w[1]=Yt,w[2]=ht,w[3]=ut,te.clearBufferiv(te.COLOR,0,w))}else ae|=te.COLOR_BUFFER_BIT}J&&(ae|=te.DEPTH_BUFFER_BIT),se&&(ae|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",Ze,!1),e.removeEventListener("webglcontextcreationerror",qe,!1),Je.dispose(),Mn.dispose(),_t.dispose(),O.dispose(),re.dispose(),_e.dispose(),ei.dispose(),Y.dispose(),dt.dispose(),de.dispose(),de.removeEventListener("sessionstart",nd),de.removeEventListener("sessionend",Wm),La.stop()};function Ce(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Ze(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1;let R=Cn.autoReset,J=et.enabled,se=et.autoUpdate,ae=et.needsUpdate,K=et.type;We(),Cn.autoReset=R,et.enabled=J,et.autoUpdate=se,et.needsUpdate=ae,et.type=K}function qe(R){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",R.statusMessage)}function qt(R){let J=R.target;J.removeEventListener("dispose",qt),Si(J)}function Si(R){gr(R),_t.remove(R)}function gr(R){let J=_t.get(R).programs;J!==void 0&&(J.forEach(function(se){dt.releaseProgram(se)}),R.isShaderMaterial&&dt.releaseShaderCache(R))}this.renderBufferDirect=function(R,J,se,ae,K,ke){J===null&&(J=gi);let Ye=K.isMesh&&K.matrixWorld.determinant()<0,ft=_b(R,J,se,ae,K);xt.setMaterial(ae,Ye);let ut=se.index,Bt=1;if(ae.wireframe===!0){if(ut=Se.getWireframeAttribute(se),ut===void 0)return;Bt=2}let Yt=se.drawRange,ht=se.attributes.position,Ln=Yt.start*Bt,ti=(Yt.start+Yt.count)*Bt;ke!==null&&(Ln=Math.max(Ln,ke.start*Bt),ti=Math.min(ti,(ke.start+ke.count)*Bt)),ut!==null?(Ln=Math.max(Ln,0),ti=Math.min(ti,ut.count)):ht!=null&&(Ln=Math.max(Ln,0),ti=Math.min(ti,ht.count));let ai=ti-Ln;if(ai<0||ai===1/0)return;ei.setup(K,ae,ft,se,ut);let Er,Vn=tt;if(ut!==null&&(Er=be.get(ut),Vn=An,Vn.setIndex(Er)),K.isMesh)ae.wireframe===!0?(xt.setLineWidth(ae.wireframeLinewidth*si()),Vn.setMode(te.LINES)):Vn.setMode(te.TRIANGLES);else if(K.isLine){let gt=ae.linewidth;gt===void 0&&(gt=1),xt.setLineWidth(gt*si()),K.isLineSegments?Vn.setMode(te.LINES):K.isLineLoop?Vn.setMode(te.LINE_LOOP):Vn.setMode(te.LINE_STRIP)}else K.isPoints?Vn.setMode(te.POINTS):K.isSprite&&Vn.setMode(te.TRIANGLES);if(K.isBatchedMesh)if(K._multiDrawInstances!==null)Vn.renderMultiDrawInstances(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount,K._multiDrawInstances);else if(bn.get("WEBGL_multi_draw"))Vn.renderMultiDraw(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount);else{let gt=K._multiDrawStarts,Po=K._multiDrawCounts,Wn=K._multiDrawCount,uo=ut?be.get(ut).bytesPerElement:1,As=_t.get(ae).currentProgram.getUniforms();for(let Ar=0;Ar<Wn;Ar++)As.setValue(te,"_gl_DrawID",Ar),Vn.render(gt[Ar]/uo,Po[Ar])}else if(K.isInstancedMesh)Vn.renderInstances(Ln,ai,K.count);else if(se.isInstancedBufferGeometry){let gt=se._maxInstanceCount!==void 0?se._maxInstanceCount:1/0,Po=Math.min(se.instanceCount,gt);Vn.renderInstances(Ln,ai,Po)}else Vn.render(Ln,ai)};function jn(R,J,se){R.transparent===!0&&R.side===qo&&R.forceSinglePass===!1?(R.side=wo,R.needsUpdate=!0,rd(R,J,se),R.side=Da,R.needsUpdate=!0,rd(R,J,se),R.side=qo):rd(R,J,se)}this.compile=function(R,J,se=null){se===null&&(se=R),x=Mn.get(se),x.init(J),S.push(x),se.traverseVisible(function(K){K.isLight&&K.layers.test(J.layers)&&(x.pushLight(K),K.castShadow&&x.pushShadow(K))}),R!==se&&R.traverseVisible(function(K){K.isLight&&K.layers.test(J.layers)&&(x.pushLight(K),K.castShadow&&x.pushShadow(K))}),x.setupLights();let ae=new Set;return R.traverse(function(K){if(!(K.isMesh||K.isPoints||K.isLine||K.isSprite))return;let ke=K.material;if(ke)if(Array.isArray(ke))for(let Ye=0;Ye<ke.length;Ye++){let ft=ke[Ye];jn(ft,se,K),ae.add(ft)}else jn(ke,se,K),ae.add(ke)}),S.pop(),x=null,ae},this.compileAsync=function(R,J,se=null){let ae=this.compile(R,J,se);return new Promise(K=>{function ke(){if(ae.forEach(function(Ye){_t.get(Ye).currentProgram.isReady()&&ae.delete(Ye)}),ae.size===0){K(R);return}setTimeout(ke,10)}bn.get("KHR_parallel_shader_compile")!==null?ke():setTimeout(ke,10)})};let Xr=null;function Os(R){Xr&&Xr(R)}function nd(){La.stop()}function Wm(){La.start()}let La=new jU;La.setAnimationLoop(Os),typeof self<"u"&&La.setContext(self),this.setAnimationLoop=function(R){Xr=R,de.setAnimationLoop(R),R===null?La.stop():La.start()},de.addEventListener("sessionstart",nd),de.addEventListener("sessionend",Wm),this.render=function(R,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(W===!0)return;if(R.matrixWorldAutoUpdate===!0&&R.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),de.enabled===!0&&de.isPresenting===!0&&(de.cameraAutoUpdate===!0&&de.updateCamera(J),J=de.getCamera()),R.isScene===!0&&R.onBeforeRender(P,R,J,$),x=Mn.get(R,S.length),x.init(J),S.push(x),Nt.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ve.setFromProjectionMatrix(Nt),rt=this.localClippingEnabled,Ne=Re.init(this.clippingPlanes,rt),b=Je.get(R,D.length),b.init(),D.push(b),de.enabled===!0&&de.isPresenting===!0){let ke=P.xr.getDepthSensingMesh();ke!==null&&Sh(ke,J,-1/0,P.sortObjects)}Sh(R,J,0,P.sortObjects),b.finish(),P.sortObjects===!0&&b.sort(De,$e),$t=de.enabled===!1||de.isPresenting===!1||de.hasDepthSensing()===!1,$t&&wt.addToRenderList(b,R),this.info.render.frame++,Ne===!0&&Re.beginShadows();let se=x.state.shadowsArray;et.render(se,R,J),Ne===!0&&Re.endShadows(),this.info.autoReset===!0&&this.info.reset();let ae=b.opaque,K=b.transmissive;if(x.setupLights(),J.isArrayCamera){let ke=J.cameras;if(K.length>0)for(let Ye=0,ft=ke.length;Ye<ft;Ye++){let ut=ke[Ye];Gm(ae,K,R,ut)}$t&&wt.render(R);for(let Ye=0,ft=ke.length;Ye<ft;Ye++){let ut=ke[Ye];jm(b,R,ut,ut.viewport)}}else K.length>0&&Gm(ae,K,R,J),$t&&wt.render(R),jm(b,R,J);$!==null&&(L.updateMultisampleRenderTarget($),L.updateRenderTargetMipmap($)),R.isScene===!0&&R.onAfterRender(P,R,J),ei.resetDefaultState(),F=-1,I=null,S.pop(),S.length>0?(x=S[S.length-1],Ne===!0&&Re.setGlobalState(P.clippingPlanes,x.state.camera)):x=null,D.pop(),D.length>0?b=D[D.length-1]:b=null};function Sh(R,J,se,ae){if(R.visible===!1)return;if(R.layers.test(J.layers)){if(R.isGroup)se=R.renderOrder;else if(R.isLOD)R.autoUpdate===!0&&R.update(J);else if(R.isLight)x.pushLight(R),R.castShadow&&x.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||ve.intersectsSprite(R)){ae&&nn.setFromMatrixPosition(R.matrixWorld).applyMatrix4(Nt);let Ye=_e.update(R),ft=R.material;ft.visible&&b.push(R,Ye,ft,se,nn.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(!R.frustumCulled||ve.intersectsObject(R))){let Ye=_e.update(R),ft=R.material;if(ae&&(R.boundingSphere!==void 0?(R.boundingSphere===null&&R.computeBoundingSphere(),nn.copy(R.boundingSphere.center)):(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),nn.copy(Ye.boundingSphere.center)),nn.applyMatrix4(R.matrixWorld).applyMatrix4(Nt)),Array.isArray(ft)){let ut=Ye.groups;for(let Bt=0,Yt=ut.length;Bt<Yt;Bt++){let ht=ut[Bt],Ln=ft[ht.materialIndex];Ln&&Ln.visible&&b.push(R,Ye,Ln,se,nn.z,ht)}}else ft.visible&&b.push(R,Ye,ft,se,nn.z,null)}}let ke=R.children;for(let Ye=0,ft=ke.length;Ye<ft;Ye++)Sh(ke[Ye],J,se,ae)}function jm(R,J,se,ae){let K=R.opaque,ke=R.transmissive,Ye=R.transparent;x.setupLightsView(se),Ne===!0&&Re.setGlobalState(P.clippingPlanes,se),ae&&xt.viewport(U.copy(ae)),K.length>0&&id(K,J,se),ke.length>0&&id(ke,J,se),Ye.length>0&&id(Ye,J,se),xt.buffers.depth.setTest(!0),xt.buffers.depth.setMask(!0),xt.buffers.color.setMask(!0),xt.setPolygonOffset(!1)}function Gm(R,J,se,ae){if((se.isScene===!0?se.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[ae.id]===void 0&&(x.state.transmissionRenderTarget[ae.id]=new Dl(1,1,{generateMipmaps:!0,type:bn.has("EXT_color_buffer_half_float")||bn.has("EXT_color_buffer_float")?Pm:Tl,minFilter:Mo,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Rn.workingColorSpace}));let ke=x.state.transmissionRenderTarget[ae.id],Ye=ae.viewport||U;ke.setSize(Ye.z,Ye.w);let ft=P.getRenderTarget();P.setRenderTarget(ke),P.getClearColor(oe),pe=P.getClearAlpha(),pe<1&&P.setClearColor(16777215,.5),P.clear(),$t&&wt.render(se);let ut=P.toneMapping;P.toneMapping=Sc;let Bt=ae.viewport;if(ae.viewport!==void 0&&(ae.viewport=void 0),x.setupLightsView(ae),Ne===!0&&Re.setGlobalState(P.clippingPlanes,ae),id(R,se,ae),L.updateMultisampleRenderTarget(ke),L.updateRenderTargetMipmap(ke),bn.has("WEBGL_multisampled_render_to_texture")===!1){let Yt=!1;for(let ht=0,Ln=J.length;ht<Ln;ht++){let ti=J[ht],ai=ti.object,Er=ti.geometry,Vn=ti.material,gt=ti.group;if(Vn.side===qo&&ai.layers.test(ae.layers)){let Po=Vn.side;Vn.side=wo,Vn.needsUpdate=!0,$m(ai,se,ae,Er,Vn,gt),Vn.side=Po,Vn.needsUpdate=!0,Yt=!0}}Yt===!0&&(L.updateMultisampleRenderTarget(ke),L.updateRenderTargetMipmap(ke))}P.setRenderTarget(ft),P.setClearColor(oe,pe),Bt!==void 0&&(ae.viewport=Bt),P.toneMapping=ut}function id(R,J,se){let ae=J.isScene===!0?J.overrideMaterial:null;for(let K=0,ke=R.length;K<ke;K++){let Ye=R[K],ft=Ye.object,ut=Ye.geometry,Bt=ae===null?Ye.material:ae,Yt=Ye.group;ft.layers.test(se.layers)&&$m(ft,J,se,ut,Bt,Yt)}}function $m(R,J,se,ae,K,ke){R.onBeforeRender(P,J,se,ae,K,ke),R.modelViewMatrix.multiplyMatrices(se.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),K.onBeforeRender(P,J,se,ae,R,ke),K.transparent===!0&&K.side===qo&&K.forceSinglePass===!1?(K.side=wo,K.needsUpdate=!0,P.renderBufferDirect(se,J,ae,K,R,ke),K.side=Da,K.needsUpdate=!0,P.renderBufferDirect(se,J,ae,K,R,ke),K.side=qo):P.renderBufferDirect(se,J,ae,K,R,ke),R.onAfterRender(P,J,se,ae,K,ke)}function rd(R,J,se){J.isScene!==!0&&(J=gi);let ae=_t.get(R),K=x.state.lights,ke=x.state.shadowsArray,Ye=K.state.version,ft=dt.getParameters(R,K.state,ke,J,se),ut=dt.getProgramCacheKey(ft),Bt=ae.programs;ae.environment=R.isMeshStandardMaterial?J.environment:null,ae.fog=J.fog,ae.envMap=(R.isMeshStandardMaterial?re:O).get(R.envMap||ae.environment),ae.envMapRotation=ae.environment!==null&&R.envMap===null?J.environmentRotation:R.envMapRotation,Bt===void 0&&(R.addEventListener("dispose",qt),Bt=new Map,ae.programs=Bt);let Yt=Bt.get(ut);if(Yt!==void 0){if(ae.currentProgram===Yt&&ae.lightsStateVersion===Ye)return qm(R,ft),Yt}else ft.uniforms=dt.getUniforms(R),R.onBeforeCompile(ft,P),Yt=dt.acquireProgram(ft,ut),Bt.set(ut,Yt),ae.uniforms=ft.uniforms;let ht=ae.uniforms;return(!R.isShaderMaterial&&!R.isRawShaderMaterial||R.clipping===!0)&&(ht.clippingPlanes=Re.uniform),qm(R,ft),ae.needsLights=xb(R),ae.lightsStateVersion=Ye,ae.needsLights&&(ht.ambientLightColor.value=K.state.ambient,ht.lightProbe.value=K.state.probe,ht.directionalLights.value=K.state.directional,ht.directionalLightShadows.value=K.state.directionalShadow,ht.spotLights.value=K.state.spot,ht.spotLightShadows.value=K.state.spotShadow,ht.rectAreaLights.value=K.state.rectArea,ht.ltc_1.value=K.state.rectAreaLTC1,ht.ltc_2.value=K.state.rectAreaLTC2,ht.pointLights.value=K.state.point,ht.pointLightShadows.value=K.state.pointShadow,ht.hemisphereLights.value=K.state.hemi,ht.directionalShadowMap.value=K.state.directionalShadowMap,ht.directionalShadowMatrix.value=K.state.directionalShadowMatrix,ht.spotShadowMap.value=K.state.spotShadowMap,ht.spotLightMatrix.value=K.state.spotLightMatrix,ht.spotLightMap.value=K.state.spotLightMap,ht.pointShadowMap.value=K.state.pointShadowMap,ht.pointShadowMatrix.value=K.state.pointShadowMatrix),ae.currentProgram=Yt,ae.uniformsList=null,Yt}function Th(R){if(R.uniformsList===null){let J=R.currentProgram.getUniforms();R.uniformsList=Gf.seqWithValue(J.seq,R.uniforms)}return R.uniformsList}function qm(R,J){let se=_t.get(R);se.outputColorSpace=J.outputColorSpace,se.batching=J.batching,se.batchingColor=J.batchingColor,se.instancing=J.instancing,se.instancingColor=J.instancingColor,se.instancingMorph=J.instancingMorph,se.skinning=J.skinning,se.morphTargets=J.morphTargets,se.morphNormals=J.morphNormals,se.morphColors=J.morphColors,se.morphTargetsCount=J.morphTargetsCount,se.numClippingPlanes=J.numClippingPlanes,se.numIntersection=J.numClipIntersection,se.vertexAlphas=J.vertexAlphas,se.vertexTangents=J.vertexTangents,se.toneMapping=J.toneMapping}function _b(R,J,se,ae,K){J.isScene!==!0&&(J=gi),L.resetTextureUnits();let ke=J.fog,Ye=ae.isMeshStandardMaterial?J.environment:null,ft=$===null?P.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:Gr,ut=(ae.isMeshStandardMaterial?re:O).get(ae.envMap||Ye),Bt=ae.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,Yt=!!se.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),ht=!!se.morphAttributes.position,Ln=!!se.morphAttributes.normal,ti=!!se.morphAttributes.color,ai=Sc;ae.toneMapped&&($===null||$.isXRRenderTarget===!0)&&(ai=P.toneMapping);let Er=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,Vn=Er!==void 0?Er.length:0,gt=_t.get(ae),Po=x.state.lights;if(Ne===!0&&(rt===!0||R!==I)){let fo=R===I&&ae.id===F;Re.setState(ae,R,fo)}let Wn=!1;ae.version===gt.__version?(gt.needsLights&&gt.lightsStateVersion!==Po.state.version||gt.outputColorSpace!==ft||K.isBatchedMesh&&gt.batching===!1||!K.isBatchedMesh&&gt.batching===!0||K.isBatchedMesh&&gt.batchingColor===!0&&K.colorTexture===null||K.isBatchedMesh&&gt.batchingColor===!1&&K.colorTexture!==null||K.isInstancedMesh&&gt.instancing===!1||!K.isInstancedMesh&&gt.instancing===!0||K.isSkinnedMesh&&gt.skinning===!1||!K.isSkinnedMesh&&gt.skinning===!0||K.isInstancedMesh&&gt.instancingColor===!0&&K.instanceColor===null||K.isInstancedMesh&&gt.instancingColor===!1&&K.instanceColor!==null||K.isInstancedMesh&&gt.instancingMorph===!0&&K.morphTexture===null||K.isInstancedMesh&&gt.instancingMorph===!1&&K.morphTexture!==null||gt.envMap!==ut||ae.fog===!0&&gt.fog!==ke||gt.numClippingPlanes!==void 0&&(gt.numClippingPlanes!==Re.numPlanes||gt.numIntersection!==Re.numIntersection)||gt.vertexAlphas!==Bt||gt.vertexTangents!==Yt||gt.morphTargets!==ht||gt.morphNormals!==Ln||gt.morphColors!==ti||gt.toneMapping!==ai||gt.morphTargetsCount!==Vn)&&(Wn=!0):(Wn=!0,gt.__version=ae.version);let uo=gt.currentProgram;Wn===!0&&(uo=rd(ae,J,K));let As=!1,Ar=!1,Vc=!1,ni=uo.getUniforms(),Do=gt.uniforms;if(xt.useProgram(uo.program)&&(As=!0,Ar=!0,Vc=!0),ae.id!==F&&(F=ae.id,Ar=!0),As||I!==R){xt.buffers.depth.getReversed()?(ze.copy(R.projectionMatrix),Pte(ze),Dte(ze),ni.setValue(te,"projectionMatrix",ze)):ni.setValue(te,"projectionMatrix",R.projectionMatrix),ni.setValue(te,"viewMatrix",R.matrixWorldInverse);let Is=ni.map.cameraPosition;Is!==void 0&&Is.setValue(te,Vt.setFromMatrixPosition(R.matrixWorld)),On.logarithmicDepthBuffer&&ni.setValue(te,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&ni.setValue(te,"isOrthographic",R.isOrthographicCamera===!0),I!==R&&(I=R,Ar=!0,Vc=!0)}if(K.isSkinnedMesh){ni.setOptional(te,K,"bindMatrix"),ni.setOptional(te,K,"bindMatrixInverse");let fo=K.skeleton;fo&&(fo.boneTexture===null&&fo.computeBoneTexture(),ni.setValue(te,"boneTexture",fo.boneTexture,L))}K.isBatchedMesh&&(ni.setOptional(te,K,"batchingTexture"),ni.setValue(te,"batchingTexture",K._matricesTexture,L),ni.setOptional(te,K,"batchingIdTexture"),ni.setValue(te,"batchingIdTexture",K._indirectTexture,L),ni.setOptional(te,K,"batchingColorTexture"),K._colorsTexture!==null&&ni.setValue(te,"batchingColorTexture",K._colorsTexture,L));let Ua=se.morphAttributes;if((Ua.position!==void 0||Ua.normal!==void 0||Ua.color!==void 0)&&Ft.update(K,se,uo),(Ar||gt.receiveShadow!==K.receiveShadow)&&(gt.receiveShadow=K.receiveShadow,ni.setValue(te,"receiveShadow",K.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(Do.envMap.value=ut,Do.flipEnvMap.value=ut.isCubeTexture&&ut.isRenderTargetTexture===!1?-1:1),ae.isMeshStandardMaterial&&ae.envMap===null&&J.environment!==null&&(Do.envMapIntensity.value=J.environmentIntensity),Ar&&(ni.setValue(te,"toneMappingExposure",P.toneMappingExposure),gt.needsLights&&yb(Do,Vc),ke&&ae.fog===!0&&He.refreshFogUniforms(Do,ke),He.refreshMaterialUniforms(Do,ae,ce,Te,x.state.transmissionRenderTarget[R.id]),Gf.upload(te,Th(gt),Do,L)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(Gf.upload(te,Th(gt),Do,L),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&ni.setValue(te,"center",K.center),ni.setValue(te,"modelViewMatrix",K.modelViewMatrix),ni.setValue(te,"normalMatrix",K.normalMatrix),ni.setValue(te,"modelMatrix",K.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){let fo=ae.uniformsGroups;for(let Is=0,Zo=fo.length;Is<Zo;Is++){let od=fo[Is];Y.update(od,uo),Y.bind(od,uo)}}return uo}function yb(R,J){R.ambientLightColor.needsUpdate=J,R.lightProbe.needsUpdate=J,R.directionalLights.needsUpdate=J,R.directionalLightShadows.needsUpdate=J,R.pointLights.needsUpdate=J,R.pointLightShadows.needsUpdate=J,R.spotLights.needsUpdate=J,R.spotLightShadows.needsUpdate=J,R.rectAreaLights.needsUpdate=J,R.hemisphereLights.needsUpdate=J}function xb(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&R.lights===!0}this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(R,J,se){_t.get(R.texture).__webglTexture=J,_t.get(R.depthTexture).__webglTexture=se;let ae=_t.get(R);ae.__hasExternalTextures=!0,ae.__autoAllocateDepthBuffer=se===void 0,ae.__autoAllocateDepthBuffer||bn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(R,J){let se=_t.get(R);se.__webglFramebuffer=J,se.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(R,J=0,se=0){$=R,V=J,H=se;let ae=!0,K=null,ke=!1,Ye=!1;if(R){let ut=_t.get(R);if(ut.__useDefaultFramebuffer!==void 0)xt.bindFramebuffer(te.FRAMEBUFFER,null),ae=!1;else if(ut.__webglFramebuffer===void 0)L.setupRenderTarget(R);else if(ut.__hasExternalTextures)L.rebindTextures(R,_t.get(R.texture).__webglTexture,_t.get(R.depthTexture).__webglTexture);else if(R.depthBuffer){let ht=R.depthTexture;if(ut.__boundDepthTexture!==ht){if(ht!==null&&_t.has(ht)&&(R.width!==ht.image.width||R.height!==ht.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");L.setupDepthRenderbuffer(R)}}let Bt=R.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(Ye=!0);let Yt=_t.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(Array.isArray(Yt[J])?K=Yt[J][se]:K=Yt[J],ke=!0):R.samples>0&&L.useMultisampledRTT(R)===!1?K=_t.get(R).__webglMultisampledFramebuffer:Array.isArray(Yt)?K=Yt[se]:K=Yt,U.copy(R.viewport),q.copy(R.scissor),ie=R.scissorTest}else U.copy(Qe).multiplyScalar(ce).floor(),q.copy(Jt).multiplyScalar(ce).floor(),ie=Dn;if(xt.bindFramebuffer(te.FRAMEBUFFER,K)&&ae&&xt.drawBuffers(R,K),xt.viewport(U),xt.scissor(q),xt.setScissorTest(ie),ke){let ut=_t.get(R.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+J,ut.__webglTexture,se)}else if(Ye){let ut=_t.get(R.texture),Bt=J||0;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,ut.__webglTexture,se||0,Bt)}F=-1},this.readRenderTargetPixels=function(R,J,se,ae,K,ke,Ye){if(!(R&&R.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ft=_t.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&Ye!==void 0&&(ft=ft[Ye]),ft){xt.bindFramebuffer(te.FRAMEBUFFER,ft);try{let ut=R.texture,Bt=ut.format,Yt=ut.type;if(!On.textureFormatReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!On.textureTypeReadable(Yt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=R.width-ae&&se>=0&&se<=R.height-K&&te.readPixels(J,se,ae,K,rn.convert(Bt),rn.convert(Yt),ke)}finally{let ut=$!==null?_t.get($).__webglFramebuffer:null;xt.bindFramebuffer(te.FRAMEBUFFER,ut)}}},this.readRenderTargetPixelsAsync=function(R,J,se,ae,K,ke,Ye){return Xc(this,null,function*(){if(!(R&&R.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ft=_t.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&Ye!==void 0&&(ft=ft[Ye]),ft){let ut=R.texture,Bt=ut.format,Yt=ut.type;if(!On.textureFormatReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!On.textureTypeReadable(Yt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(J>=0&&J<=R.width-ae&&se>=0&&se<=R.height-K){xt.bindFramebuffer(te.FRAMEBUFFER,ft);let ht=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,ht),te.bufferData(te.PIXEL_PACK_BUFFER,ke.byteLength,te.STREAM_READ),te.readPixels(J,se,ae,K,rn.convert(Bt),rn.convert(Yt),0);let Ln=$!==null?_t.get($).__webglFramebuffer:null;xt.bindFramebuffer(te.FRAMEBUFFER,Ln);let ti=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),yield Tte(te,ti,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,ht),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,ke),te.deleteBuffer(ht),te.deleteSync(ti),ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(R,J=null,se=0){R.isTexture!==!0&&(um("WebGLRenderer: copyFramebufferToTexture function signature has changed."),J=arguments[0]||null,R=arguments[1]);let ae=Math.pow(2,-se),K=Math.floor(R.image.width*ae),ke=Math.floor(R.image.height*ae),Ye=J!==null?J.x:0,ft=J!==null?J.y:0;L.setTexture2D(R,0),te.copyTexSubImage2D(te.TEXTURE_2D,se,0,0,Ye,ft,K,ke),xt.unbindTexture()},this.copyTextureToTexture=function(R,J,se=null,ae=null,K=0){R.isTexture!==!0&&(um("WebGLRenderer: copyTextureToTexture function signature has changed."),ae=arguments[0]||null,R=arguments[1],J=arguments[2],K=arguments[3]||0,se=null);let ke,Ye,ft,ut,Bt,Yt,ht,Ln,ti,ai=R.isCompressedTexture?R.mipmaps[K]:R.image;se!==null?(ke=se.max.x-se.min.x,Ye=se.max.y-se.min.y,ft=se.isBox3?se.max.z-se.min.z:1,ut=se.min.x,Bt=se.min.y,Yt=se.isBox3?se.min.z:0):(ke=ai.width,Ye=ai.height,ft=ai.depth||1,ut=0,Bt=0,Yt=0),ae!==null?(ht=ae.x,Ln=ae.y,ti=ae.z):(ht=0,Ln=0,ti=0);let Er=rn.convert(J.format),Vn=rn.convert(J.type),gt;J.isData3DTexture?(L.setTexture3D(J,0),gt=te.TEXTURE_3D):J.isDataArrayTexture||J.isCompressedArrayTexture?(L.setTexture2DArray(J,0),gt=te.TEXTURE_2D_ARRAY):(L.setTexture2D(J,0),gt=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,J.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,J.unpackAlignment);let Po=te.getParameter(te.UNPACK_ROW_LENGTH),Wn=te.getParameter(te.UNPACK_IMAGE_HEIGHT),uo=te.getParameter(te.UNPACK_SKIP_PIXELS),As=te.getParameter(te.UNPACK_SKIP_ROWS),Ar=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,ai.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,ai.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,ut),te.pixelStorei(te.UNPACK_SKIP_ROWS,Bt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Yt);let Vc=R.isDataArrayTexture||R.isData3DTexture,ni=J.isDataArrayTexture||J.isData3DTexture;if(R.isRenderTargetTexture||R.isDepthTexture){let Do=_t.get(R),Ua=_t.get(J),fo=_t.get(Do.__renderTarget),Is=_t.get(Ua.__renderTarget);xt.bindFramebuffer(te.READ_FRAMEBUFFER,fo.__webglFramebuffer),xt.bindFramebuffer(te.DRAW_FRAMEBUFFER,Is.__webglFramebuffer);for(let Zo=0;Zo<ft;Zo++)Vc&&te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,_t.get(R).__webglTexture,K,Yt+Zo),R.isDepthTexture?(ni&&te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,_t.get(J).__webglTexture,K,ti+Zo),te.blitFramebuffer(ut,Bt,ke,Ye,ht,Ln,ke,Ye,te.DEPTH_BUFFER_BIT,te.NEAREST)):ni?te.copyTexSubImage3D(gt,K,ht,Ln,ti+Zo,ut,Bt,ke,Ye):te.copyTexSubImage2D(gt,K,ht,Ln,ti+Zo,ut,Bt,ke,Ye);xt.bindFramebuffer(te.READ_FRAMEBUFFER,null),xt.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else ni?R.isDataTexture||R.isData3DTexture?te.texSubImage3D(gt,K,ht,Ln,ti,ke,Ye,ft,Er,Vn,ai.data):J.isCompressedArrayTexture?te.compressedTexSubImage3D(gt,K,ht,Ln,ti,ke,Ye,ft,Er,ai.data):te.texSubImage3D(gt,K,ht,Ln,ti,ke,Ye,ft,Er,Vn,ai):R.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,K,ht,Ln,ke,Ye,Er,Vn,ai.data):R.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,K,ht,Ln,ai.width,ai.height,Er,ai.data):te.texSubImage2D(te.TEXTURE_2D,K,ht,Ln,ke,Ye,Er,Vn,ai);te.pixelStorei(te.UNPACK_ROW_LENGTH,Po),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Wn),te.pixelStorei(te.UNPACK_SKIP_PIXELS,uo),te.pixelStorei(te.UNPACK_SKIP_ROWS,As),te.pixelStorei(te.UNPACK_SKIP_IMAGES,Ar),K===0&&J.generateMipmaps&&te.generateMipmap(gt),xt.unbindTexture()},this.copyTextureToTexture3D=function(R,J,se=null,ae=null,K=0){return R.isTexture!==!0&&(um("WebGLRenderer: copyTextureToTexture3D function signature has changed."),se=arguments[0]||null,ae=arguments[1]||null,R=arguments[2],J=arguments[3],K=arguments[4]||0),um('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(R,J,se,ae,K)},this.initRenderTarget=function(R){_t.get(R).__webglFramebuffer===void 0&&L.setupRenderTarget(R)},this.initTexture=function(R){R.isCubeTexture?L.setTextureCube(R,0):R.isData3DTexture?L.setTexture3D(R,0):R.isDataArrayTexture||R.isCompressedArrayTexture?L.setTexture2DArray(R,0):L.setTexture2D(R,0),xt.unbindTexture()},this.resetState=function(){V=0,H=0,$=null,xt.reset(),ei.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return El}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorspace=Rn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Rn._getUnpackColorSpace()}};var wy=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new Tt(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Cm=class extends hr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new zu,this.environmentIntensity=1,this.environmentRotation=new zu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Mm=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=uT,this.updateRanges=[],this.version=0,this.uuid=ra()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ra()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ra()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},ao=new j,wm=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ao.fromBufferAttribute(this,e),ao.applyMatrix4(t),this.setXYZ(e,ao.x,ao.y,ao.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ao.fromBufferAttribute(this,e),ao.applyNormalMatrix(t),this.setXYZ(e,ao.x,ao.y,ao.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ao.fromBufferAttribute(this,e),ao.transformDirection(t),this.setXYZ(e,ao.x,ao.y,ao.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=na(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Jn(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=Jn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Jn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Jn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Jn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=na(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=na(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=na(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=na(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Jn(e,this.array),i=Jn(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Jn(e,this.array),i=Jn(i,this.array),r=Jn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=Jn(e,this.array),i=Jn(i,this.array),r=Jn(r,this.array),o=Jn(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return new Ei(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var sU=new j,aU=new an,lU=new an,Mse=new j,cU=new Kt,ty=new j,CS=new Yo,uU=new Kt,MS=new Bu,Ey=class extends Ci{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=dL,this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ki),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,ty),this.boundingBox.expandByPoint(ty)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Yo),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,ty),this.boundingSphere.expandByPoint(ty)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),CS.copy(this.boundingSphere),CS.applyMatrix4(r),t.ray.intersectsSphere(CS)!==!1&&(uU.copy(r).invert(),MS.copy(t.ray).applyMatrix4(uU),!(this.boundingBox!==null&&MS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,MS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new an,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===dL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Zee?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;aU.fromBufferAttribute(r.attributes.skinIndex,t),lU.fromBufferAttribute(r.attributes.skinWeight,t),sU.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){let s=lU.getComponent(o);if(s!==0){let a=aU.getComponent(o);cU.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(Mse.copy(sU).applyMatrix4(cU),s)}}return e.applyMatrix4(this.bindMatrixInverse)}},Em=class extends hr{constructor(){super(),this.isBone=!0,this.type="Bone"}},Sy=class extends Ms{constructor(t=null,e=1,i=1,r,o,s,a,c,d=zr,f=zr,h,v){super(null,s,a,c,d,f,r,o,h,v),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},dU=new Kt,wse=new Kt,Ty=class n{constructor(t=[],e=[]){this.uuid=ra(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Kt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new Kt;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=t.length;o<s;o++){let a=t[o]?t[o].matrixWorld:wse;dU.multiplyMatrices(a,e[o]),dU.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new Sy(e,t,t,ys,ia);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let o=t.bones[i],s=e[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Em),this.bones.push(s),this.boneInverses.push(new Kt().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,o=e.length;r<o;r++){let s=e[r];t.bones.push(s.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Hu=class extends Ei{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Lf=new Kt,fU=new Kt,ny=[],hU=new Ki,Ese=new Kt,sm=new Ci,am=new Yo,Py=class extends Ci{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Hu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Ese)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ki),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Lf),hU.copy(t.boundingBox).applyMatrix4(Lf),this.boundingBox.union(hU)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Yo),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Lf),am.copy(t.boundingSphere).applyMatrix4(Lf),this.boundingSphere.union(am)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=t*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(sm.geometry=this.geometry,sm.material=this.material,sm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),am.copy(this.boundingSphere),am.applyMatrix4(i),t.ray.intersectsSphere(am)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Lf),fU.multiplyMatrices(i,Lf),sm.matrixWorld=fU,sm.raycast(t,ny);for(let s=0,a=ny.length;s<a;s++){let c=ny[s];c.instanceId=o,c.object=this,e.push(c)}ny.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Hu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Sy(new Float32Array(r*this.count),r,this.count,qT,ia));let o=this.morphTexture.source.data.data,s=0;for(let d=0;d<i.length;d++)s+=i[d];let a=this.geometry.morphTargetsRelative?1:1-s,c=r*t;o[c]=a,o.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var Wu=class extends Wr{static get type(){return"LineBasicMaterial"}constructor(t){super(),this.isLineBasicMaterial=!0,this.color=new Tt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},Dy=new j,Oy=new j,pU=new Kt,lm=new Bu,iy=new Yo,wS=new j,mU=new j,th=class extends hr{constructor(t=new Eo,e=new Wu){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,o=e.count;r<o;r++)Dy.fromBufferAttribute(e,r-1),Oy.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Dy.distanceTo(Oy);t.setAttribute("lineDistance",new xs(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),iy.copy(i.boundingSphere),iy.applyMatrix4(r),iy.radius+=o,t.ray.intersectsSphere(iy)===!1)return;pU.copy(r).invert(),lm.copy(t.ray).applyMatrix4(pU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,d=this.isLineSegments?2:1,f=i.index,v=i.attributes.position;if(f!==null){let _=Math.max(0,s.start),C=Math.min(f.count,s.start+s.count);for(let w=_,b=C-1;w<b;w+=d){let x=f.getX(w),D=f.getX(w+1),S=ry(this,t,lm,c,x,D);S&&e.push(S)}if(this.isLineLoop){let w=f.getX(C-1),b=f.getX(_),x=ry(this,t,lm,c,w,b);x&&e.push(x)}}else{let _=Math.max(0,s.start),C=Math.min(v.count,s.start+s.count);for(let w=_,b=C-1;w<b;w+=d){let x=ry(this,t,lm,c,w,w+1);x&&e.push(x)}if(this.isLineLoop){let w=ry(this,t,lm,c,C-1,_);w&&e.push(w)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function ry(n,t,e,i,r,o){let s=n.geometry.attributes.position;if(Dy.fromBufferAttribute(s,r),Oy.fromBufferAttribute(s,o),e.distanceSqToSegment(Dy,Oy,wS,mU)>i)return;wS.applyMatrix4(n.matrixWorld);let c=t.ray.origin.distanceTo(wS);if(!(c<t.near||c>t.far))return{distance:c,point:mU.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}var gU=new j,vU=new j,Ay=class extends th{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,o=e.count;r<o;r+=2)gU.fromBufferAttribute(e,r),vU.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+gU.distanceTo(vU);t.setAttribute("lineDistance",new xs(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},nh=class extends th{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},Sm=class extends Wr{static get type(){return"PointsMaterial"}constructor(t){super(),this.isPointsMaterial=!0,this.color=new Tt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},_U=new Kt,TT=new Bu,oy=new Yo,sy=new j,Iy=class extends hr{constructor(t=new Eo,e=new Sm){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),oy.copy(i.boundingSphere),oy.applyMatrix4(r),oy.radius+=o,t.ray.intersectsSphere(oy)===!1)return;_U.copy(r).invert(),TT.copy(t.ray).applyMatrix4(_U);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,d=i.index,h=i.attributes.position;if(d!==null){let v=Math.max(0,s.start),_=Math.min(d.count,s.start+s.count);for(let C=v,w=_;C<w;C++){let b=d.getX(C);sy.fromBufferAttribute(h,b),yU(sy,b,c,r,t,e,this)}}else{let v=Math.max(0,s.start),_=Math.min(h.count,s.start+s.count);for(let C=v,w=_;C<w;C++)sy.fromBufferAttribute(h,C),yU(sy,C,c,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function yU(n,t,e,i,r,o,s){let a=TT.distanceSqToPoint(n);if(a<e){let c=new j;TT.closestPointToPoint(n,c),c.applyMatrix4(i);let d=r.ray.origin.distanceTo(c);if(d<r.near||d>r.far)return;o.push({distance:d,distanceToRay:Math.sqrt(a),point:c,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}var Ra=class extends Wr{static get type(){return"MeshStandardMaterial"}constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Tt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=VU,this.normalScale=new tn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Xo=class extends Ra{static get type(){return"MeshPhysicalMaterial"}constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Br(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}};function ay(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function Sse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tse(n){function t(r,o){return n[r]-n[o]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function xU(n,t,e){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=e[o]*t;for(let c=0;c!==t;++c)r[s++]=n[a+c]}return r}function XU(n,t,e,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),e.push.apply(e,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(e,e.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),e.push(s)),o=n[r++];while(o!==void 0)}var Tc=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],o=e[i-1];e:{t:{let s;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=e[++i],t<r)break t}s=e.length;break n}if(!(t>=o)){let a=e[1];t<a&&(i=2,o=a);for(let c=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=o,o=e[--i-1],t>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;t<e[a]?s=a:i=a+1}if(r=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=i[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},PT=class extends Tc{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Vf,endingEnd:Vf}}intervalChanged_(t,e,i){let r=this.parameterPositions,o=t-2,s=t+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Bf:o=t,a=2*e-i;break;case hy:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Bf:s=t,c=2*i-e;break;case hy:s=1,c=i+r[1]-r[0];break;default:s=t-1,c=e}let d=(i-e)*.5,f=this.valueSize;this._weightPrev=d/(e-a),this._weightNext=d/(c-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=t*a,d=c-a,f=this._offsetPrev,h=this._offsetNext,v=this._weightPrev,_=this._weightNext,C=(i-e)/(r-e),w=C*C,b=w*C,x=-v*b+2*v*w-v*C,D=(1+v)*b+(-1.5-2*v)*w+(-.5+v)*C+1,S=(-1-_)*b+(1.5+_)*w+.5*C,P=_*b-_*w;for(let W=0;W!==a;++W)o[W]=x*s[f+W]+D*s[d+W]+S*s[c+W]+P*s[h+W];return o}},Ry=class extends Tc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=t*a,d=c-a,f=(i-e)/(r-e),h=1-f;for(let v=0;v!==a;++v)o[v]=s[d+v]*h+s[c+v]*f;return o}},DT=class extends Tc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Cs=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ay(e,this.TimeBufferType),this.values=ay(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:ay(t.times,Array),values:ay(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new DT(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Ry(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new PT(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Kf:e=this.InterpolantFactoryMethodDiscrete;break;case Jf:e=this.InterpolantFactoryMethodLinear;break;case XE:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Kf;case this.InterpolantFactoryMethodLinear:return Jf;case this.InterpolantFactoryMethodSmooth:return XE}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<t;)++o;for(;s!==-1&&i[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),t=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),t=!1;break}s=c}if(r!==void 0&&Sse(r))for(let a=0,c=r.length;a!==c;++a){let d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===XE,o=t.length-1,s=1;for(let a=1;a<o;++a){let c=!1,d=t[a],f=t[a+1];if(d!==f&&(a!==1||d!==t[0]))if(r)c=!0;else{let h=a*i,v=h-i,_=h+i;for(let C=0;C!==i;++C){let w=e[h+C];if(w!==e[v+C]||w!==e[_+C]){c=!0;break}}}if(c){if(a!==s){t[s]=t[a];let h=a*i,v=s*i;for(let _=0;_!==i;++_)e[v+_]=e[h+_]}++s}}if(o>0){t[s]=t[o];for(let a=o*i,c=s*i,d=0;d!==i;++d)e[c+d]=e[a+d];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Cs.prototype.TimeBufferType=Float32Array;Cs.prototype.ValueBufferType=Float32Array;Cs.prototype.DefaultInterpolation=Jf;var Pc=class extends Cs{constructor(t,e,i){super(t,e,i)}};Pc.prototype.ValueTypeName="bool";Pc.prototype.ValueBufferType=Array;Pc.prototype.DefaultInterpolation=Kf;Pc.prototype.InterpolantFactoryMethodLinear=void 0;Pc.prototype.InterpolantFactoryMethodSmooth=void 0;var Ny=class extends Cs{};Ny.prototype.ValueTypeName="color";var Ol=class extends Cs{};Ol.prototype.ValueTypeName="number";var OT=class extends Tc{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(i-e)/(r-e),d=t*a;for(let f=d+a;d!==f;d+=4)Hr.slerpFlat(o,0,s,d-a,s,d,c);return o}},Al=class extends Cs{InterpolantFactoryMethodLinear(t){return new OT(this.times,this.values,this.getValueSize(),t)}};Al.prototype.ValueTypeName="quaternion";Al.prototype.InterpolantFactoryMethodSmooth=void 0;var Dc=class extends Cs{constructor(t,e,i){super(t,e,i)}};Dc.prototype.ValueTypeName="string";Dc.prototype.ValueBufferType=Array;Dc.prototype.DefaultInterpolation=Kf;Dc.prototype.InterpolantFactoryMethodLinear=void 0;Dc.prototype.InterpolantFactoryMethodSmooth=void 0;var Il=class extends Cs{};Il.prototype.ValueTypeName="vector";var ih=class{constructor(t="",e=-1,i=[],r=JT){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=ra(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let s=0,a=i.length;s!==a;++s)e.push(Dse(i[s]).scale(r));let o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=i.length;o!==s;++o)e.push(Cs.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let o=e.length,s=[];for(let a=0;a<o;a++){let c=[],d=[];c.push((a+o-1)%o,a,(a+1)%o),d.push(0,1,0);let f=Tse(c);c=xU(c,1,f),d=xU(d,1,f),!r&&c[0]===0&&(c.push(o),d.push(d[0])),s.push(new Ol(".morphTargetInfluences["+e[a].name+"]",c,d).scale(1/i))}return new this(t,-1,s)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=t.length;a<c;a++){let d=t[a],f=d.name.match(o);if(f&&f.length>1){let h=f[1],v=r[h];v||(r[h]=v=[]),v.push(d)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,v,_,C,w){if(_.length!==0){let b=[],x=[];XU(_,b,x,C),b.length!==0&&w.push(new h(v,b,x))}},r=[],o=t.name||"default",s=t.fps||30,a=t.blendMode,c=t.length||-1,d=t.hierarchy||[];for(let h=0;h<d.length;h++){let v=d[h].keys;if(!(!v||v.length===0))if(v[0].morphTargets){let _={},C;for(C=0;C<v.length;C++)if(v[C].morphTargets)for(let w=0;w<v[C].morphTargets.length;w++)_[v[C].morphTargets[w]]=-1;for(let w in _){let b=[],x=[];for(let D=0;D!==v[C].morphTargets.length;++D){let S=v[C];b.push(S.time),x.push(S.morphTarget===w?1:0)}r.push(new Ol(".morphTargetInfluence["+w+"]",b,x))}c=_.length*s}else{let _=".bones["+e[h].name+"]";i(Il,_+".position",v,"pos",r),i(Al,_+".quaternion",v,"rot",r),i(Il,_+".scale",v,"scl",r)}}return r.length===0?null:new this(o,c,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Pse(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ol;case"vector":case"vector2":case"vector3":case"vector4":return Il;case"color":return Ny;case"quaternion":return Al;case"bool":case"boolean":return Pc;case"string":return Dc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Dse(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Pse(n.type);if(n.times===void 0){let e=[],i=[];XU(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var Pa={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},AT=class{constructor(t,e,i){let r=this,o=!1,s=0,a=0,c,d=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,h){return d.push(f,h),this},this.removeHandler=function(f){let h=d.indexOf(f);return h!==-1&&d.splice(h,2),this},this.getHandler=function(f){for(let h=0,v=d.length;h<v;h+=2){let _=d[h],C=d[h+1];if(_.global&&(_.lastIndex=0),_.test(f))return C}return null}}},Ose=new AT,ah=(()=>{class n{constructor(e){this.manager=e!==void 0?e:Ose,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(o,s){r.load(e,o,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),bl={},IT=class extends Error{constructor(t,e){super(t),this.response=e}},ju=class extends ah{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=Pa.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(bl[t]!==void 0){bl[t].push({onLoad:e,onProgress:i,onError:r});return}bl[t]=[],bl[t].push({onLoad:e,onProgress:i,onError:r});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(s).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;let f=bl[t],h=d.body.getReader(),v=d.headers.get("X-File-Size")||d.headers.get("Content-Length"),_=v?parseInt(v):0,C=_!==0,w=0,b=new ReadableStream({start(x){D();function D(){h.read().then(({done:S,value:P})=>{if(S)x.close();else{w+=P.byteLength;let W=new ProgressEvent("progress",{lengthComputable:C,loaded:w,total:_});for(let V=0,H=f.length;V<H;V++){let $=f[V];$.onProgress&&$.onProgress(W)}x.enqueue(P),D()}},S=>{x.error(S)})}}});return new Response(b)}else throw new IT(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(c){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return d.json();default:if(a===void 0)return d.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),v=h&&h[1]?h[1].toLowerCase():void 0,_=new TextDecoder(v);return d.arrayBuffer().then(C=>_.decode(C))}}}).then(d=>{Pa.add(t,d);let f=bl[t];delete bl[t];for(let h=0,v=f.length;h<v;h++){let _=f[h];_.onLoad&&_.onLoad(d)}}).catch(d=>{let f=bl[t];if(f===void 0)throw this.manager.itemError(t),d;delete bl[t];for(let h=0,v=f.length;h<v;h++){let _=f[h];_.onError&&_.onError(d)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var RT=class extends ah{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Pa.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;let a=_m("img");function c(){f(),Pa.add(t,this),e&&e(this),o.manager.itemEnd(t)}function d(h){f(),r&&r(h),o.manager.itemError(t),o.manager.itemEnd(t)}function f(){a.removeEventListener("load",c,!1),a.removeEventListener("error",d,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",d,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}};var jr=class extends ah{constructor(t){super(t)}load(t,e,i,r){let o=new Ms,s=new RT(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,e!==void 0&&e(o)},i,r),o}},rh=class extends hr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Tt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};var ES=new Kt,bU=new j,CU=new j,Tm=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tn(512,512),this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bm,this._frameExtents=new tn(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;bU.setFromMatrixPosition(t.matrixWorld),e.position.copy(bU),CU.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(CU),e.updateMatrixWorld(),ES.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ES),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(ES)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},NT=class extends Tm{constructor(){super(new fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,i=Qf*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||r!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},Fy=class extends rh{constructor(t,e,i=0,r=Math.PI/3,o=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hr.DEFAULT_UP),this.updateMatrix(),this.target=new hr,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new NT}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},MU=new Kt,cm=new j,SS=new j,FT=class extends Tm{constructor(){super(new fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tn(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),cm.setFromMatrixPosition(t.matrixWorld),i.position.copy(cm),SS.copy(i.position),SS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(SS),i.updateMatrixWorld(),r.makeTranslation(-cm.x,-cm.y,-cm.z),MU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MU)}},Gu=class extends rh{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new FT}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},kT=class extends Tm{constructor(){super(new Ia(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},oh=class extends rh{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hr.DEFAULT_UP),this.updateMatrix(),this.target=new hr,this.shadow=new kT}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},ky=class extends rh{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var Oc=class{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}};var Ly=class extends ah{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Pa.get(t);if(s!==void 0){if(o.manager.itemStart(t),s.then){s.then(d=>{e&&e(d),o.manager.itemEnd(t)}).catch(d=>{r&&r(d)});return}return setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(t,a).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){return Pa.add(t,d),e&&e(d),o.manager.itemEnd(t),d}).catch(function(d){r&&r(d),Pa.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});Pa.add(t,c),o.manager.itemStart(t)}};var Uy=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=wU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=wU();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function wU(){return performance.now()}var LT=class{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,o,s;switch(e){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){let i=this.buffer,r=this.valueSize,o=t*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=e}else{s+=e;let a=e/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(t){let e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let e=this.valueSize,i=this.buffer,r=t*e+e,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let c=e*this._origIndex;this._mixBufferRegion(i,r,c,1-o,e)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let c=e,d=e+e;c!==d;++c)if(i[c]!==i[c+e]){a.setValue(i,r);break}}saveOriginalState(){let t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let o=i,s=r;o!==s;++o)e[o]=e[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)t[e+s]=t[i+s]}_slerp(t,e,i,r){Hr.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,o){let s=this._workIndex*o;Hr.multiplyQuaternionsFlat(t,s,t,e,t,i),Hr.slerpFlat(t,e,t,e,t,s,r)}_lerp(t,e,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let c=e+a;t[c]=t[c]*s+t[i+a]*r}}_lerpAdditive(t,e,i,r,o){for(let s=0;s!==o;++s){let a=e+s;t[a]=t[a]+t[i+s]*r}}},tP="\\[\\]\\.:\\/",Ase=new RegExp("["+tP+"]","g"),nP="[^"+tP+"]",Ise="[^"+tP.replace("\\.","")+"]",Rse=/((?:WC+[\/:])*)/.source.replace("WC",nP),Nse=/(WCOD+)?/.source.replace("WCOD",Ise),Fse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nP),kse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nP),Lse=new RegExp("^"+Rse+Nse+Fse+kse+"$"),Use=["material","materials","bones","map"],UT=class{constructor(t,e,i){let r=i||Ii.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ii=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ase,"")}static parseTrackName(e){let i=Lse.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Use.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===i||c.uuid===i)return c;let d=r(c.children);if(d)return d}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[i++]=r[o]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}let a=e[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=UT,n})();Ii.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ii.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ii.prototype.GetterByBindingType=[Ii.prototype._getValue_direct,Ii.prototype._getValue_array,Ii.prototype._getValue_arrayElement,Ii.prototype._getValue_toArray];Ii.prototype.SetterByBindingTypeAndVersioning=[[Ii.prototype._setValue_direct,Ii.prototype._setValue_direct_setNeedsUpdate,Ii.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ii.prototype._setValue_array,Ii.prototype._setValue_array_setNeedsUpdate,Ii.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ii.prototype._setValue_arrayElement,Ii.prototype._setValue_arrayElement_setNeedsUpdate,Ii.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ii.prototype._setValue_fromArray,Ii.prototype._setValue_fromArray_setNeedsUpdate,Ii.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var VT=class{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;let o=e.tracks,s=o.length,a=new Array(s),c={endingStart:Vf,endingEnd:Vf};for(let d=0;d!==s;++d){let f=o[d].createInterpolant(null);a[d]=f,f.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Kee,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){let r=this._clip.duration,o=t._clip.duration,s=o/r,a=r/o;t.warp(1,s,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){let t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let c=a.parameterPositions,d=a.sampleValues;return c[0]=o,c[1]=o+i,d[0]=t/s,d[1]=e/s,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}let o=this._startTime;if(o!==null){let c=(t-o)*i;c<0||i===0?e=0:(this._startTime=null,e=i*c)}e*=this._updateTimeScale(t);let s=this._updateTime(e),a=this._updateWeight(t);if(a>0){let c=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case Qee:for(let f=0,h=c.length;f!==h;++f)c[f].evaluate(s),d[f].accumulateAdditive(a);break;case JT:default:for(let f=0,h=c.length;f!==h;++f)c[f].evaluate(s),d[f].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){let e=this._clip.duration,i=this.loop,r=this.time+t,o=this._loopCount,s=i===Jee;if(t===0)return o===-1?r:s&&(o&1)===1?e-r:r;if(i===KT){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=e||r<0){let a=Math.floor(r/e);r-=e*a,o+=Math.abs(a);let c=this.repetitions-o;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(c===1){let d=t<0;this._setEndings(d,!d,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return e-r}return r}_setEndings(t,e,i){let r=this._interpolantSettings;i?(r.endingStart=Bf,r.endingEnd=Bf):(t?r.endingStart=this.zeroSlopeAtStart?Bf:Vf:r.endingStart=hy,e?r.endingEnd=this.zeroSlopeAtEnd?Bf:Vf:r.endingEnd=hy)}_scheduleFading(t,e,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,c=s.sampleValues;return a[0]=o,c[0]=e,a[1]=o+t,c[1]=i,this}},Vse=new Float32Array(1),Vy=class extends Pl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){let i=t._localRoot||this._root,r=t._clip.tracks,o=r.length,s=t._propertyBindings,a=t._interpolants,c=i.uuid,d=this._bindingsByRootAndName,f=d[c];f===void 0&&(f={},d[c]=f);for(let h=0;h!==o;++h){let v=r[h],_=v.name,C=f[_];if(C!==void 0)++C.referenceCount,s[h]=C;else{if(C=s[h],C!==void 0){C._cacheIndex===null&&(++C.referenceCount,this._addInactiveBinding(C,c,_));continue}let w=e&&e._propertyBindings[h].binding.parsedPath;C=new LT(Ii.create(i,_,w),v.ValueTypeName,v.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,c,_),s[h]=C}a[h].resultBuffer=C.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let i=(t._localRoot||this._root).uuid,r=t._clip.uuid,o=this._actionsByClip[r];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,r,i)}let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){let r=this._actions,o=this._actionsByClip,s=o[e];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=s;else{let a=s.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){let e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;let o=t._clip.uuid,s=this._actionsByClip,a=s[o],c=a.knownActions,d=c[c.length-1],f=t._byClipCacheIndex;d._byClipCacheIndex=f,c[f]=d,c.pop(),t._byClipCacheIndex=null;let h=a.actionByRoot,v=(t._localRoot||this._root).uuid;delete h[v],c.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){let e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackAction(t){let e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_addInactiveBinding(t,e,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[e];s===void 0&&(s={},r[e]=s),s[i]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){let e=this._bindings,i=t.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],c=e[e.length-1],d=t._cacheIndex;c._cacheIndex=d,e[d]=c,e.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(t){let e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackBinding(t){let e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_lendControlInterpolant(){let t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return i===void 0&&(i=new Ry(new Float32Array(2),new Float32Array(2),1,Vse),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){let e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=i,e[i]=o}clipAction(t,e,i){let r=e||this._root,o=r.uuid,s=typeof t=="string"?ih.findByName(r,t):t,a=s!==null?s.uuid:t,c=this._actionsByClip[a],d=null;if(i===void 0&&(s!==null?i=s.blendMode:i=JT),c!==void 0){let h=c.actionByRoot[o];if(h!==void 0&&h.blendMode===i)return h;d=c.knownActions[0],s===null&&(s=d._clip)}if(s===null)return null;let f=new VT(this,s,e,i);return this._bindAction(f,d),this._addInactiveAction(f,a,o),f}existingAction(t,e){let i=e||this._root,r=i.uuid,o=typeof t=="string"?ih.findByName(i,t):t,s=o?o.uuid:t,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let e=this._actions,i=this._nActiveActions,r=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1;for(let d=0;d!==i;++d)e[d]._update(r,t,o,s);let a=this._bindings,c=this._nActiveBindings;for(let d=0;d!==c;++d)a[d].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let e=this._actions,i=t.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,c=s.length;a!==c;++a){let d=s[a];this._deactivateAction(d);let f=d._cacheIndex,h=e[e.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,h._cacheIndex=f,e[f]=h,e.pop(),this._removeInactiveBindingsForAction(d)}delete r[i]}}uncacheRoot(t){let e=t.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,c=a[e];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}let r=this._bindingsByRootAndName,o=r[e];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){let i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}};var EU=new Kt,By=class{constructor(t,e,i=0,r=1/0){this.ray=new Bu(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new ym,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return EU.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(EU),this}intersectObject(t,e=!0,i=[]){return BT(t,this,i,e),i.sort(SU),i}intersectObjects(t,e=!0,i=[]){for(let r=0,o=t.length;r<o;r++)BT(t[r],this,i,e);return i.sort(SU),i}};function SU(n,t){return n.distance-t.distance}function BT(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)BT(o[s],t,e,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zT);var qr=class extends tn{constructor(t=0,e=0){super(),this.x=t,this.y=e}get h(){return this.x}set h(t){this.x=t}get v(){return this.y}set v(t){this.y=t}};var Om=function(){var n=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(f){f.preventDefault(),i(++n%t.children.length)},!1);function e(f){return t.appendChild(f.dom),f}function i(f){for(var h=0;h<t.children.length;h++)t.children[h].style.display=h===f?"block":"none";n=f}var r=(performance||Date).now(),o=r,s=0,a=e(new Om.Panel("FPS","#0ff","#002")),c=e(new Om.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=e(new Om.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var f=(performance||Date).now();if(c.update(f-r,200),f>=o+1e3&&(a.update(s*1e3/(f-o),100),o=f,s=0,d)){var h=performance.memory;d.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:t,setMode:i}};Om.Panel=function(n,t,e){var i=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,c=48*s,d=3*s,f=2*s,h=3*s,v=15*s,_=74*s,C=30*s,w=document.createElement("canvas");w.width=a,w.height=c,w.style.cssText="width:80px;height:48px";var b=w.getContext("2d");return b.font="bold "+9*s+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=e,b.fillRect(0,0,a,c),b.fillStyle=t,b.fillText(n,d,f),b.fillRect(h,v,_,C),b.fillStyle=e,b.globalAlpha=.9,b.fillRect(h,v,_,C),{dom:w,update:function(x,D){i=Math.min(i,x),r=Math.max(r,x),b.fillStyle=e,b.globalAlpha=1,b.fillRect(0,0,a,v),b.fillStyle=t,b.fillText(o(x)+" "+n+" ("+o(i)+"-"+o(r)+")",d,f),b.drawImage(w,h+s,v,_-s,C,h,v,_-s,C),b.fillRect(h+_-s,v,s,C),b.fillStyle=e,b.globalAlpha=.9,b.fillRect(h+_-s,v,s,o((1-x/D)*C))}}};var ZU=Om;var KU={setDevicePixelRatio:!1},JU={url:"/mazes/Loquitas.json",credits:"Maze designed by Cec\xEDlia Fernandes and Nikita.",scale:new j(1,1,1)},QU={url:"/models/gltf/RobotExpressive/RobotExpressive.glb",credits:"Model and related code snippets created by <a href='https://www.patreon.com/quaternius' target='_blank' rel='noopener'>Tom\xE1s Laulh\xE9</a>. CC0 1.0. Modified by <a href='https://donmccurdy.com/' target='_blank' rel='noopener'>Don McCurdy</a>.",eyeHeight:.8,scale:new j(.1,.1,.1),walkingSpeed:3,initialDirection:0,turningSpeed:250,runningFactor:2,keyCodes:{fixedView:"Digit1",firstPersonView:"Digit2",thirdPersonView:"Digit3",topView:"Digit4",viewMode:"KeyV",userInterface:"KeyU",miniMap:"KeyM",help:"KeyH",statistics:"KeyS",run:"KeyR",left:"ArrowLeft",right:"ArrowRight",backward:"ArrowDown",forward:"ArrowUp",jump:"KeyJ",yes:"KeyY",no:"KeyN",wave:"KeyW",punch:"KeyP",thumbsUp:"KeyT"}},eV={ambientLight:{color:16777215,intensity:1},pointLight1:{color:16777215,intensity:1,distance:0,position:new j(0,0,0)},pointLight2:{color:16777215,intensity:1,distance:0,position:new j(0,0,0)},directionalLight:{color:16777215,intensity:1,position:new j(0,0,0),target:new j(0,0,0)},spotLight:{color:16777215,intensity:1,distance:0,angle:Math.PI/3,penumbra:0,position:new j(0,0,0),direction:0}},tV={enabled:!1,color:14737632,near:.1,far:14},lh={view:"fixed",multipleViewsViewport:new an(0,0,1,1),target:new j(0,0,0),initialOrientation:new qr(135,-45),orientationMin:new qr(-180,-90),orientationMax:new qr(180,0),initialDistance:8,distanceMin:4,distanceMax:16,initialZoom:1,zoomMin:.5,zoomMax:2,initialFov:45,near:.01,far:100},nV={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new j(.42,.269,1)},iV={url:"/models/gltf/RobotExpressive/hospital_bed.glb",scale:new j(.5,1,.5),name:""},rV={url:"/models/gltf/RobotExpressive/patient.glb",scale:new j(.0045,.01,.0045)},oV={url:"/models/gltf/RobotExpressive/exit_doors.glb",scale:new j(1.35,1.4,1.35)};var Gy=V6(sV());function co(n,...t){return Gy.mergeWith(n,...t,(e,i,r,o,s)=>{if(Gy.isArray(e))return e.concat(i);{let a=Object.getOwnPropertyDescriptor(o,r);a!==void 0&&!a.writable&&(a.value=i,a.writable=!0,Object.defineProperty(o,r,a),a.writable=!1,Object.defineProperty(o,r,a))}})}var $y=class{constructor(t){for(let[a,c]of Object.entries(t))this[a]=c;let e=new jr().load(this.textureUrl);e.colorSpace=ki,e.wrapS=sr,e.wrapT=sr,e.repeat.set(this.size.width,this.size.height),e.magFilter=wr,e.minFilter=Mo;let i=null;this.normalMapUrl&&(i=new jr().load(this.normalMapUrl),i.wrapS=sr,i.wrapT=sr,i.repeat.set(this.size.width,this.size.height));let r=null;this.bumpMapUrl&&(r=new jr().load(this.bumpMapUrl),r.wrapS=sr,r.wrapT=sr,r.repeat.set(this.size.width,this.size.height));let o=new bs(this.size.width,this.size.height),s=new Ra({color:16777215,map:e,normalMap:i,bumpMap:r,bumpScale:this.bumpScale||.1,roughness:.8,metalness:.2});this.object=new Ci(o,s),this.object.rotation.x=-Math.PI/2,this.object.receiveShadow=this.shadow||!1,this.object.castShadow=this.shadow||!1,this.object.receiveShadow=!0}setShadow(t){this.object.castShadow=t}setTextureRepeat(t,e){this.object.material.map.repeat.set(t,e),this.object.material.normalMap&&this.object.material.normalMap.repeat.set(t,e),this.object.material.bumpMap&&this.object.material.bumpMap.repeat.set(t,e)}updateTexture(t){let e=new jr().load(t);e.colorSpace=ki,e.wrapS=sr,e.wrapT=sr,this.object.material.map=e}updateNormalMap(t){let e=new jr().load(t);e.wrapS=sr,e.wrapT=sr,this.object.material.normalMap=e}updateBumpMap(t,e=.1){let i=new jr().load(t);i.wrapS=sr,i.wrapT=sr,this.object.material.bumpMap=i,this.object.material.bumpScale=e}};var qy=class{constructor(t){let{textureUrl:e,bumpMapUrl:i,normalMapUrl:r,aoMapUrl:o,width:s=1,height:a=3,thickness:c=.05}=t,d=new jr().load(e);d.colorSpace=ki,d.magFilter=wr,d.minFilter=Mo;let f=i?new jr().load(i):null,h=r?new jr().load(r):null,v=o?new jr().load(o):null,_=new Ra({color:16777215,map:d,bumpMap:f,bumpScale:.1,normalMap:h,aoMap:v,side:qo});this.object=new Ri,this.addFrontBackFaces(s,a,c,_),this.addSideFaces(s,a,c,_),this.addTopFace(s,c,_),this.addBottomFace(s,c,_),this.addTopCover(s,c,_)}addFrontBackFaces(t,e,i,r){let o=new bs(t,e);o.setAttribute("uv2",new Ei(o.attributes.uv.array,2));let s=new Ci(o,r);s.position.set(0,0,i/2),s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new Ci(o,r);a.position.set(0,0,-i/2),a.rotation.y=Math.PI,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addSideFaces(t,e,i,r){let o=new bs(i,e);o.setAttribute("uv2",new Ei(o.attributes.uv.array,2));let s=new Ci(o,r);s.position.set(-t/2,0,0),s.rotation.y=Math.PI/2,s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new Ci(o,r);a.position.set(t/2,0,0),a.rotation.y=-Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addTopFace(t,e,i){let r=new bs(t,e);r.setAttribute("uv2",new Ei(r.attributes.uv.array,2));let o=new Ci(r,i);o.rotation.x=-Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addBottomFace(t,e,i){let r=new bs(t,e);r.setAttribute("uv2",new Ei(r.attributes.uv.array,2));let o=new Ci(r,i);o.rotation.x=Math.PI/2,o.position.set(0,-e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addTopCover(t,e,i){let r=new bs(t,e);r.setAttribute("uv2",new Ei(r.attributes.uv.array,2));let o=new Ci(r,i);o.rotation.x=Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}};function iP(n,t){if(t===UU)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===Dm||t===Hy){let e=n.getIndex();if(e===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);n.setIndex(s),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===Dm)for(let s=1;s<=i;s++)r.push(e.getX(0)),r.push(e.getX(s)),r.push(e.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(e.getX(s)),r.push(e.getX(s+1)),r.push(e.getX(s+2))):(r.push(e.getX(s+2)),r.push(e.getX(s+1)),r.push(e.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var Es=class extends ah{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new uP(e)}),this.register(function(e){return new dP(e)}),this.register(function(e){return new xP(e)}),this.register(function(e){return new bP(e)}),this.register(function(e){return new CP(e)}),this.register(function(e){return new hP(e)}),this.register(function(e){return new pP(e)}),this.register(function(e){return new mP(e)}),this.register(function(e){return new gP(e)}),this.register(function(e){return new cP(e)}),this.register(function(e){return new vP(e)}),this.register(function(e){return new fP(e)}),this.register(function(e){return new yP(e)}),this.register(function(e){return new _P(e)}),this.register(function(e){return new aP(e)}),this.register(function(e){return new MP(e)}),this.register(function(e){return new wP(e)})}load(t,e,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let d=Oc.extractUrlBase(t);s=Oc.resolveURL(d,this.path)}else s=Oc.extractUrlBase(t);this.manager.itemStart(t);let a=function(d){r?r(d):console.error(d),o.manager.itemError(t),o.manager.itemEnd(t)},c=new ju(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(d){try{o.parse(d,s,function(f){e(f),o.manager.itemEnd(t)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let o,s={},a={},c=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(c.decode(new Uint8Array(t,0,4))===dV){try{s[Pn.KHR_BINARY_GLTF]=new EP(t)}catch(h){r&&r(h);return}o=JSON.parse(s[Pn.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let d=new IP(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](d);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],v=o.extensionsRequired||[];switch(h){case Pn.KHR_MATERIALS_UNLIT:s[h]=new lP;break;case Pn.KHR_DRACO_MESH_COMPRESSION:s[h]=new SP(o,this.dracoLoader);break;case Pn.KHR_TEXTURE_TRANSFORM:s[h]=new TP;break;case Pn.KHR_MESH_QUANTIZATION:s[h]=new PP;break;default:v.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}d.setExtensions(s),d.setPlugins(a),d.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,o){i.parse(t,e,r,o)})}};function Bse(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var Pn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},aP=class{constructor(t){this.parser=t,this.name=Pn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let o=e[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let o=e.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t],d,f=new Tt(16777215);c.color!==void 0&&f.setRGB(c.color[0],c.color[1],c.color[2],Gr);let h=c.range!==void 0?c.range:0;switch(c.type){case"directional":d=new oh(f),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new Gu(f),d.distance=h;break;case"spot":d=new Fy(f),d.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,d.angle=c.spot.outerConeAngle,d.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return d.position.set(0,0,0),d.decay=2,Rl(d,c),c.intensity!==void 0&&(d.intensity=c.intensity),d.name=e.createUniqueName(c.name||"light_"+t),r=Promise.resolve(d),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,o=i.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return i._getNodeRef(e.cache,a,c)})}},lP=class{constructor(){this.name=Pn.KHR_MATERIALS_UNLIT}getMaterialType(){return Oa}extendParams(t,e,i){let r=[];t.color=new Tt(1,1,1),t.opacity=1;let o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],Gr),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",o.baseColorTexture,ki))}return Promise.all(r)}},cP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(e.emissiveIntensity=o),Promise.resolve()}},uP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(e.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new tn(a,a)}return Promise.all(o)}},dP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},fP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(e.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(e.iridescenceIOR=s.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},hP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];e.sheenColor=new Tt(0,0,0),e.sheenRoughness=0,e.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Gr)}return s.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(e,"sheenColorMap",s.sheenColorTexture,ki)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},pP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(e.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},mP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return e.attenuationColor=new Tt().setRGB(a[0],a[1],a[2],Gr),Promise.all(o)}},gP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},vP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return e.specularColor=new Tt().setRGB(a[0],a[1],a[2],Gr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,ki)),Promise.all(o)}},_P=class{constructor(t){this.parser=t,this.name=Pn.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return e.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(o)}},yP=class{constructor(t){this.parser=t,this.name=Pn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Xo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(e.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(e.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},xP=class{constructor(t){this.parser=t,this.name=Pn.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,s)}},bP=class{constructor(t){this.parser=t,this.name=Pn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],c=i.textureLoader;if(a.uri){let d=i.options.manager.getHandler(a.uri);d!==null&&(c=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(t,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},CP=class{constructor(t){this.parser=t,this.name=Pn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],c=i.textureLoader;if(a.uri){let d=i.options.manager.getHandler(a.uri);d!==null&&(c=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(t,s.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},MP=class{constructor(t){this.name=Pn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let c=r.byteOffset||0,d=r.byteLength||0,f=r.count,h=r.byteStride,v=new Uint8Array(a,c,d);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,v,r.mode,r.filter).then(function(_){return _.buffer}):s.ready.then(function(){let _=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(_),f,h,v,r.mode,r.filter),_})})}else return null}},wP=class{constructor(t){this.name=Pn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let d of r.primitives)if(d.mode!==ws.TRIANGLES&&d.mode!==ws.TRIANGLE_STRIP&&d.mode!==ws.TRIANGLE_FAN&&d.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],c={};for(let d in s)a.push(this.parser.getDependency("accessor",s[d]).then(f=>(c[d]=f,c[d])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(d=>{let f=d.pop(),h=f.isGroup?f.children:[f],v=d[0].count,_=[];for(let C of h){let w=new Kt,b=new j,x=new Hr,D=new j(1,1,1),S=new Py(C.geometry,C.material,v);for(let P=0;P<v;P++)c.TRANSLATION&&b.fromBufferAttribute(c.TRANSLATION,P),c.ROTATION&&x.fromBufferAttribute(c.ROTATION,P),c.SCALE&&D.fromBufferAttribute(c.SCALE,P),S.setMatrixAt(P,w.compose(b,x,D));for(let P in c)if(P==="_COLOR_0"){let W=c[P];S.instanceColor=new Hu(W.array,W.itemSize,W.normalized)}else P!=="TRANSLATION"&&P!=="ROTATION"&&P!=="SCALE"&&C.geometry.setAttribute(P,c[P]);hr.prototype.copy.call(S,C),this.parser.assignFinalMaterial(S),_.push(S)}return f.isGroup?(f.clear(),f.add(..._),f):_[0]}))}},dV="glTF",Im=12,aV={JSON:1313821514,BIN:5130562},EP=class{constructor(t){this.name=Pn.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,Im),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==dV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Im,o=new DataView(t,Im),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let c=o.getUint32(s,!0);if(s+=4,c===aV.JSON){let d=new Uint8Array(t,Im+s,a);this.content=i.decode(d)}else if(c===aV.BIN){let d=Im+s;this.body=t.slice(d,d+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},SP=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Pn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},c={},d={};for(let f in s){let h=OP[f]||f.toLowerCase();a[h]=s[f]}for(let f in t.attributes){let h=OP[f]||f.toLowerCase();if(s[f]!==void 0){let v=i.accessors[t.attributes[f]],_=uh[v.componentType];d[h]=_.name,c[h]=v.normalized===!0}}return e.getDependency("bufferView",o).then(function(f){return new Promise(function(h,v){r.decodeDracoFile(f,function(_){for(let C in _.attributes){let w=_.attributes[C],b=c[C];b!==void 0&&(w.normalized=b)}h(_)},a,d,Gr,v)})})}},TP=class{constructor(){this.name=Pn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},PP=class{constructor(){this.name=Pn.KHR_MESH_QUANTIZATION}},Yy=class extends Tc{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)e[s]=i[o+s];return e}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,d=a*3,f=r-e,h=(i-e)/f,v=h*h,_=v*h,C=t*d,w=C-d,b=-2*_+3*v,x=_-v,D=1-b,S=x-v+h;for(let P=0;P!==a;P++){let W=s[w+P+a],V=s[w+P+c]*f,H=s[C+P+a],$=s[C+P]*f;o[P]=D*W+S*V+b*H+x*$}return o}},zse=new Hr,DP=class extends Yy{interpolate_(t,e,i,r){let o=super.interpolate_(t,e,i,r);return zse.fromArray(o).normalize().toArray(o),o}},ws={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},uh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lV={9728:zr,9729:wr,9984:WT,9985:fm,9986:Uf,9987:Mo},cV={33071:wl,33648:gm,10497:sr},rP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},OP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ac={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Hse={CUBICSPLINE:void 0,LINEAR:Jf,STEP:Kf},oP={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Wse(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Ra({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Da})),n.DefaultMaterial}function $u(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Rl(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function jse(n,t,e){let i=!1,r=!1,o=!1;for(let d=0,f=t.length;d<f;d++){let h=t[d];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],c=[];for(let d=0,f=t.length;d<f;d++){let h=t[d];if(i){let v=h.POSITION!==void 0?e.getDependency("accessor",h.POSITION):n.attributes.position;s.push(v)}if(r){let v=h.NORMAL!==void 0?e.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(v)}if(o){let v=h.COLOR_0!==void 0?e.getDependency("accessor",h.COLOR_0):n.attributes.color;c.push(v)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(d){let f=d[0],h=d[1],v=d[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}function Gse(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $se(n){let t,e=n.extensions&&n.extensions[Pn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+sP(e.attributes):t=n.indices+":"+sP(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+sP(n.targets[i]);return t}function sP(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function AP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function qse(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var Yse=new Kt,IP=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Bse,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let c=a.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new jr(this.options.manager):this.textureLoader=new Ly(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ju(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return $u(o,a,r),Rl(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=e.length;r<o;r++){let s=e[r].joints;for(let a=0,c=s.length;a<c;a++)t[s[a]].isBone=!0}for(let r=0,o=t.length;r<o;r++){let s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),o=(s,a)=>{let c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(let[d,f]of s.children.entries())o(f,a.children[d])};return o(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let o=t(e[r]);o&&i.push(o)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(e)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Pn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(Oc.resolveURL(e.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,o=e.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let s=rP[r.type],a=uh[r.componentType],c=r.normalized===!0,d=new a(r.count*s);return Promise.resolve(new Ei(d,s,c))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],c=rP[r.type],d=uh[r.componentType],f=d.BYTES_PER_ELEMENT,h=f*c,v=r.byteOffset||0,_=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,C=r.normalized===!0,w,b;if(_&&_!==h){let x=Math.floor(v/_),D="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count,S=e.cache.get(D);S||(w=new d(a,x*_,r.count*_/f),S=new Mm(w,_/f),e.cache.add(D,S)),b=new wm(S,c,v%_/f,C)}else a===null?w=new d(r.count*c):w=new d(a,v,r.count*c),b=new Ei(w,c,C);if(r.sparse!==void 0){let x=rP.SCALAR,D=uh[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,P=r.sparse.values.byteOffset||0,W=new D(s[1],S,r.sparse.count*x),V=new d(s[2],P,r.sparse.count*c);a!==null&&(b=new Ei(b.array.slice(),b.itemSize,b.normalized)),b.normalized=!1;for(let H=0,$=W.length;H<$;H++){let F=W[H];if(b.setX(F,V[H*c]),c>=2&&b.setY(F,V[H*c+1]),c>=3&&b.setZ(F,V[H*c+2]),c>=4&&b.setW(F,V[H*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}b.normalized=C}return b})}loadTexture(t){let e=this.json,i=this.options,o=e.textures[t].source,s=e.images[o],a=this.textureLoader;if(s.uri){let c=i.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,e,i){let r=this,o=this.json,s=o.textures[t],a=o.images[e],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];let d=this.loadImageSource(e,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let v=(o.samplers||{})[s.sampler]||{};return f.magFilter=lV[v.magFilter]||wr,f.minFilter=lV[v.minFilter]||Mo,f.wrapS=cV[v.wrapS]||sr,f.wrapT=cV[v.wrapT]||sr,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==zr&&f.minFilter!==wr,r.associations.set(f,{textures:t}),f}).catch(function(){return null});return this.textureCache[c]=d,d}loadImageSource(t,e){let i=this,r=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(h=>h.clone());let s=r.images[t],a=self.URL||self.webkitURL,c=s.uri||"",d=!1;if(s.bufferView!==void 0)c=i.getDependency("bufferView",s.bufferView).then(function(h){d=!0;let v=new Blob([h],{type:s.mimeType});return c=a.createObjectURL(v),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let f=Promise.resolve(c).then(function(h){return new Promise(function(v,_){let C=v;e.isImageBitmapLoader===!0&&(C=function(w){let b=new Ms(w);b.needsUpdate=!0,v(b)}),e.load(Oc.resolveURL(h,o.path),C,void 0,_)})}).then(function(h){return d===!0&&a.revokeObjectURL(c),Rl(h,s),h.userData.mimeType=s.mimeType||qse(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),h});return this.sourceCache[t]=f,f}assignTexture(t,e,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[Pn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Pn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=o.associations.get(s);s=o.extensions[Pn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return r!==void 0&&(s.colorSpace=r),t[e]=s,s})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,o=e.attributes.color!==void 0,s=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new Sm,Wr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new Wu,Wr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}t.material=i}getMaterialType(){return Ra}loadMaterial(t){let e=this,i=this.json,r=this.extensions,o=i.materials[t],s,a={},c=o.extensions||{},d=[];if(c[Pn.KHR_MATERIALS_UNLIT]){let h=r[Pn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),d.push(h.extendParams(a,o,e))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new Tt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let v=h.baseColorFactor;a.color.setRGB(v[0],v[1],v[2],Gr),a.opacity=v[3]}h.baseColorTexture!==void 0&&d.push(e.assignTexture(a,"map",h.baseColorTexture,ki)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(d.push(e.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),d.push(e.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(t)}),d.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=qo);let f=o.alphaMode||oP.OPAQUE;if(f===oP.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===oP.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Oa&&(d.push(e.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new tn(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Oa&&(d.push(e.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Oa){let h=o.emissiveFactor;a.emissive=new Tt().setRGB(h[0],h[1],h[2],Gr)}return o.emissiveTexture!==void 0&&s!==Oa&&d.push(e.assignTexture(a,"emissiveMap",o.emissiveTexture,ki)),Promise.all(d).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Rl(h,o),e.associations.set(h,{materials:t}),o.extensions&&$u(r,h,o),h})}createUniqueName(t){let e=Ii.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Pn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(c){return uV(c,a,e)})}let s=[];for(let a=0,c=t.length;a<c;a++){let d=t[a],f=$se(d),h=r[f];if(h)s.push(h.promise);else{let v;d.extensions&&d.extensions[Pn.KHR_DRACO_MESH_COMPRESSION]?v=o(d):v=uV(new Eo,d,e),r[f]={primitive:d,promise:v},s.push(v)}}return Promise.all(s)}loadMesh(t){let e=this,i=this.json,r=this.extensions,o=i.meshes[t],s=o.primitives,a=[];for(let c=0,d=s.length;c<d;c++){let f=s[c].material===void 0?Wse(this.cache):this.getDependency("material",s[c].material);a.push(f)}return a.push(e.loadGeometries(s)),Promise.all(a).then(function(c){let d=c.slice(0,c.length-1),f=c[c.length-1],h=[];for(let _=0,C=f.length;_<C;_++){let w=f[_],b=s[_],x,D=d[_];if(b.mode===ws.TRIANGLES||b.mode===ws.TRIANGLE_STRIP||b.mode===ws.TRIANGLE_FAN||b.mode===void 0)x=o.isSkinnedMesh===!0?new Ey(w,D):new Ci(w,D),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),b.mode===ws.TRIANGLE_STRIP?x.geometry=iP(x.geometry,Hy):b.mode===ws.TRIANGLE_FAN&&(x.geometry=iP(x.geometry,Dm));else if(b.mode===ws.LINES)x=new Ay(w,D);else if(b.mode===ws.LINE_STRIP)x=new th(w,D);else if(b.mode===ws.LINE_LOOP)x=new nh(w,D);else if(b.mode===ws.POINTS)x=new Iy(w,D);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+b.mode);Object.keys(x.geometry.morphAttributes).length>0&&Gse(x,o),x.name=e.createUniqueName(o.name||"mesh_"+t),Rl(x,o),b.extensions&&$u(r,x,b),e.assignFinalMaterial(x),h.push(x)}for(let _=0,C=h.length;_<C;_++)e.associations.set(h[_],{meshes:t,primitives:_});if(h.length===1)return o.extensions&&$u(r,h[0],o),h[0];let v=new Ri;o.extensions&&$u(r,v,o),e.associations.set(v,{meshes:t});for(let _=0,C=h.length;_<C;_++)v.add(h[_]);return v})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new fr(Or.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new Ia(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Rl(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,o=e.joints.length;r<o;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],c=[];for(let d=0,f=s.length;d<f;d++){let h=s[d];if(h){a.push(h);let v=new Kt;o!==null&&v.fromArray(o.array,d*16),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[d])}return new Ty(a,c)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],o=r.name?r.name:"animation_"+t,s=[],a=[],c=[],d=[],f=[];for(let h=0,v=r.channels.length;h<v;h++){let _=r.channels[h],C=r.samplers[_.sampler],w=_.target,b=w.node,x=r.parameters!==void 0?r.parameters[C.input]:C.input,D=r.parameters!==void 0?r.parameters[C.output]:C.output;w.node!==void 0&&(s.push(this.getDependency("node",b)),a.push(this.getDependency("accessor",x)),c.push(this.getDependency("accessor",D)),d.push(C),f.push(w))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(d),Promise.all(f)]).then(function(h){let v=h[0],_=h[1],C=h[2],w=h[3],b=h[4],x=[];for(let D=0,S=v.length;D<S;D++){let P=v[D],W=_[D],V=C[D],H=w[D],$=b[D];if(P===void 0)continue;P.updateMatrix&&P.updateMatrix();let F=i._createAnimationTracks(P,W,V,H,$);if(F)for(let I=0;I<F.length;I++)x.push(F[I])}return new ih(o,void 0,x)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,d=r.weights.length;c<d;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],o=i._loadNodeShallow(t),s=[],a=r.children||[];for(let d=0,f=a.length;d<f;d++)s.push(i.getDependency("node",a[d]));let c=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(d){let f=d[0],h=d[1],v=d[2];v!==null&&f.traverse(function(_){_.isSkinnedMesh&&_.bind(v,Yse)});for(let _=0,C=h.length;_<C;_++)f.add(h[_]);return f})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let o=e.nodes[t],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(t)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(d){return r._getNodeRef(r.cameraCache,o.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(t)}).forEach(function(d){a.push(d)}),this.nodeCache[t]=Promise.all(a).then(function(d){let f;if(o.isBone===!0?f=new Em:d.length>1?f=new Ri:d.length===1?f=d[0]:f=new hr,f!==d[0])for(let h=0,v=d.length;h<v;h++)f.add(d[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Rl(f,o),o.extensions&&$u(i,f,o),o.matrix!==void 0){let h=new Kt;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=t,f}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,o=new Ri;i.name&&(o.name=r.createUniqueName(i.name)),Rl(o,i),i.extensions&&$u(e,o,i);let s=i.nodes||[],a=[];for(let c=0,d=s.length;c<d;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let f=0,h=c.length;f<h;f++)o.add(c[f]);let d=f=>{let h=new Map;for(let[v,_]of r.associations)(v instanceof Wr||v instanceof Ms)&&h.set(v,_);return f.traverse(v=>{let _=r.associations.get(v);_!=null&&h.set(v,_)}),h};return r.associations=d(o),o})}_createAnimationTracks(t,e,i,r,o){let s=[],a=t.name?t.name:t.uuid,c=[];Ac[o.path]===Ac.weights?t.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(a);let d;switch(Ac[o.path]){case Ac.weights:d=Ol;break;case Ac.rotation:d=Al;break;case Ac.position:case Ac.scale:d=Il;break;default:switch(i.itemSize){case 1:d=Ol;break;case 2:case 3:default:d=Il;break}break}let f=r.interpolation!==void 0?Hse[r.interpolation]:Jf,h=this._getArrayFromAccessor(i);for(let v=0,_=c.length;v<_;v++){let C=new d(c[v]+"."+Ac[o.path],e.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(C),s.push(C)}return s}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=AP(e.constructor),r=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o++)r[o]=e[o]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof Al?DP:Yy;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Xse(n,t,e){let i=t.attributes,r=new Ki;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],c=a.min,d=a.max;if(c!==void 0&&d!==void 0){if(r.set(new j(c[0],c[1],c[2]),new j(d[0],d[1],d[2])),a.normalized){let f=AP(uh[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=t.targets;if(o!==void 0){let a=new j,c=new j;for(let d=0,f=o.length;d<f;d++){let h=o[d];if(h.POSITION!==void 0){let v=e.json.accessors[h.POSITION],_=v.min,C=v.max;if(_!==void 0&&C!==void 0){if(c.setX(Math.max(Math.abs(_[0]),Math.abs(C[0]))),c.setY(Math.max(Math.abs(_[1]),Math.abs(C[1]))),c.setZ(Math.max(Math.abs(_[2]),Math.abs(C[2]))),v.normalized){let w=AP(uh[v.componentType]);c.multiplyScalar(w)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new Yo;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function uV(n,t,e){let i=t.attributes,r=[];function o(s,a){return e.getDependency("accessor",s).then(function(c){n.setAttribute(a,c)})}for(let s in i){let a=OP[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(t.indices!==void 0&&!n.index){let s=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(s)}return Rn.workingColorSpace!==Gr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Rn.workingColorSpace}" not supported.`),Rl(n,t),Xse(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?jse(n,t.targets,e):n})}var xxe={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new j(1,1,2)},qu=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new Ri,this.isLoaded=!1,new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ki().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}open(){this.isLoaded&&(this.object.rotation.y=Math.PI/2,this.boundingBox.setFromObject(this.object))}isTrespassing(t){if(this.isLoaded){let e=new Ki().setFromObject(t);return this.boundingBox.intersectsBox(e)}return!1}blockMovementIfTrespassing(t){this.isTrespassing(t)&&(console.log("Movement blocked: Door is in the way!"),t.position.copy(t.previousPosition))}};var Xy=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new Ri,this.tables=[],new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0,o.name=this.name||"Table",o.isTable=!0)}),r.scale.copy(this.scale),this.object.add(r),this.tables.push(this.object)},void 0,i=>{console.error("Error loading the table model:",i)})}addToScene(t){this.tables.forEach(e=>t.add(e))}handleRaycast(t,e){let r=t.intersectObjects(this.tables,!0).find(o=>o.object.isTable);r&&e&&e(r.object)}};var Exe={url:"/models/gltf/RobotExpressive/patient.glb",scale:new j(1,1,1)},Zy=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new Ri,new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var Ky=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new Ri,this.isLoaded=!1,new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ki().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}};var Jy=class{constructor(t,e,i,r,o,s){this.onLoad=function(c){this.map=c.map,this.doorMap=c.doorMap,this.tableMap=c.tableMap,this.size=c.size,this.doorParameters=e,this.tableParameters=i,this.humanParameters=r,this.exitDoorParameters=o,this.roomParameters=s,this.initialPosition=this.cellToCartesian(c.initialPosition),this.initialDirection=c.initialDirection,this.object=new Ri,this.ground=new $y({textureUrl:c.groundTextureUrl,size:c.size}),this.object.add(this.ground.object),this.wall=new qy({textureUrl:c.wallTextureUrl});for(let d=0;d<=c.size.height;d++)for(let f=0;f<=c.size.width;f++){let h,v=Math.floor(c.size.height/2),_=Math.floor(c.size.width/2);d<v&&f<_?h=0:d<v&&f>=_?h=1:d>=v&&f<_?h=2:h=3;let C=s[h];if(c.map[d][f]===2||c.map[d][f]===3){let w=this.wall.object.clone();w.position.set(f-c.size.width/2+.5,.5,d-c.size.height/2),this.object.add(w)}if(c.map[d][f]===1||c.map[d][f]===3){let w=this.wall.object.clone();w.rotateY(Math.PI/2),w.position.set(f-c.size.width/2,.5,d-c.size.height/2+.5),this.object.add(w)}if(c.map[d][f]===4&&!C.isOccupied){let w=new qu(this.doorParameters);w.object.position.set(f-c.size.width/2+.5,.5,d-c.size.height/2),w.object.scale.set(.0035,.00635,0),w.object.translateY(-.6),w.object.translateX(.5),c.doorMap[d][f]===1?w.object.rotateY(-Math.PI/2):c.doorMap[d][f]===2&&(w.object.translateZ(-.029),w.object.rotateY(Math.PI/2)),this.object.add(w.object)}if(c.map[d][f]===4&&C.isOccupied){let w=new qu(this.doorParameters);w.object.position.set(f-c.size.width/2+.5,.5,d-c.size.height/2),w.object.scale.set(.0035,.00635,0),w.object.translateY(-.6),w.object.translateX(.5),c.map[d][f]===1?w.object.translateZ(.3):c.map[d][f]===2&&w.object.translateZ(-.029),this.object.add(w.object)}if(this.map[d][f]===5){let w=new Xy({url:this.tableParameters.url,scale:new j(.5,1,.5),name:`Table_${d}_${f}`});if(console.log("Table added: "+w.name),w.object.position.set(f-c.size.width/2+.5,.5,d-c.size.height/2),w.object.scale.set(1,.68,1),w.object.translateX(-.6),w.object.translateY(-.2),this.object.add(w.object),C.isOccupied){console.log("Human added: "+C.isOccupied);let b=new Zy(this.humanParameters);b.object.position.set(f-c.size.width/2+.5,.5,d-c.size.height/2),b.object.scale.set(1.2,1,1),b.object.rotateY(Math.PI/2),b.object.translateY(.29),b.object.translateZ(-.67),this.object.add(b.object)}}if(this.map[d][f]===6){let w=new Ky(this.exitDoorParameters);w.object.position.set(f-c.size.width/2+.5,.5,d-c.size.height/2),w.object.translateX(-.34),w.object.translateY(-1),w.object.translateZ(-.05),this.object.add(w.object)}}this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(c,d){console.log("Resource '"+c+"' "+(100*d.loaded/d.total).toFixed(0)+"% loaded.")},this.onError=function(c,d){console.error("Error loading resource "+c+" ("+d+").")};for(let[c,d]of Object.entries(t))this[c]=d;this.loaded=!1,Pa.enabled=!0;let a=new ju;a.setResponseType("json"),a.load(this.url,c=>this.onLoad(c),c=>this.onProgress(this.url,c),c=>this.onError(this.url,c))}cellToCartesian(t){return new j((t[1]-this.size.width/2+.5)*this.scale.x,0,(t[0]-this.size.height/2+.5)*this.scale.z)}cartesianToCell(t){return[Math.floor(t.z/this.scale.z+this.size.height/2),Math.floor(t.x/this.scale.x+this.size.width/2)]}distanceToWestWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?t.x-this.cellToCartesian(e).x+this.scale.x/2:1/0}distanceToEastWall(t){let e=this.cartesianToCell(t);return e[1]++,this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).x-this.scale.x/2-t.x:1/0}distanceToNorthWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?t.z-this.cellToCartesian(e).z+this.scale.z/2:1/0}distanceToSouthWall(t){let e=this.cartesianToCell(t);return e[0]++,this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToDoor(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===4&&r.isOccupied?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}getRoomIndex(t){let e=Math.floor(this.size.height/2),i=Math.floor(this.size.width/2);return t[0]<e&&t[1]<i?0:t[0]<e&&t[1]>=i?1:t[0]>=e&&t[1]<i?2:3}};var Qy=class{constructor(t){this.onLoad=function(i){this.object=i.scene,this.animations=i.animations,this.setShadow(this.object);let r=new Ki;r.setFromObject(this.object);let o=new j;r.getSize(o),o.x=3,o.y=4.4,o.z=2.6,this.radius=o.x/2*this.scale.x,this.eyeHeight*=o.y*this.scale.y,this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(i,r){console.log("Resource '"+i+"' "+(100*r.loaded/r.total).toFixed(0)+"% loaded.")},this.onError=function(i,r){console.error("Error loading resource "+i+" ("+r+").")};for(let[i,r]of Object.entries(t))this[i]=r;this.initialDirection=Or.degToRad(this.initialDirection),this.keyStates={fixedView:!1,firstPersonView:!1,thirdPersonView:!1,topView:!1,viewMode:!1,miniMap:!1,statistics:!1,userInterface:!1,help:!1,run:!1,left:!1,right:!1,backward:!1,forward:!1,jump:!1,yes:!1,no:!1,wave:!1,punch:!1,thumbsUp:!1},this.loaded=!1,new Es().load(this.url,i=>this.onLoad(i),i=>this.onProgress(this.url,i),i=>this.onError(this.url,i))}setShadow(t){t.traverseVisible(function(e){e instanceof hr&&(e.castShadow=!0,e.receiveShadow=!1)})}};var ex=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new Ri,this.object.ambientLight=new ky(this.ambientLight.color,this.ambientLight.intensity),this.object.add(this.object.ambientLight),this.object.pointLight1=new Gu(this.pointLight1.color,this.pointLight1.intensity,this.pointLight1.distance),this.object.pointLight1.position.set(this.pointLight1.position.x,this.pointLight1.position.y,this.pointLight1.position.z),this.object.pointLight1.castShadow=!0,this.object.pointLight1.shadow.mapSize.width=512,this.object.pointLight1.shadow.mapSize.height=512,this.object.pointLight1.shadow.camera.near=5,this.object.pointLight1.shadow.camera.far=15,this.object.pointLight1.visible=!1,this.object.add(this.object.pointLight1),this.object.pointLight2=new Gu(this.pointLight2.color,this.pointLight2.intensity,this.pointLight2.distance),this.object.pointLight2.position.set(this.pointLight2.position.x,this.pointLight2.position.y,this.pointLight2.position.z),this.object.pointLight2.castShadow=!0,this.object.pointLight2.shadow.mapSize.width=512,this.object.pointLight2.shadow.mapSize.height=512,this.object.pointLight2.shadow.camera.near=5,this.object.pointLight2.shadow.camera.far=15,this.object.pointLight2.visible=!1,this.object.add(this.object.pointLight2),this.object.directionalLight=new oh(this.directionalLight.color,this.directionalLight.intensity),this.object.directionalLight.castShadow=!0,this.object.directionalLight.position.set(this.directionalLight.position.x,this.directionalLight.position.y,this.directionalLight.position.z),this.object.directionalLight.target.position.set(this.directionalLight.target.x,this.directionalLight.target.y,this.directionalLight.target.z),this.object.add(this.object.directionalLight),this.object.add(this.object.directionalLight.target)}};var tx=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new wy(this.color,this.near,this.far)}};var Ic=class{constructor(t,e,i){for(let[r,o]of Object.entries(t))this[r]=o;this.viewport=this.multipleViewsViewport.clone(),this.target=this.target.clone(),this.initialHalfSize=Math.tan(Or.degToRad(this.initialFov/2))*this.initialDistance,this.playerDirection=0,this.perspective=new fr,this.orthographic=new Ia,this.setWindowSize(e,i),this.initialize()}setViewingParameters(){let t=new qr(this.orientation.h+this.playerDirection,this.orientation.v),e=Math.cos(Or.degToRad(t.h)),i=Math.sin(Or.degToRad(t.h)),r=Math.cos(Or.degToRad(t.v)),o=Math.sin(Or.degToRad(t.v)),s=this.target.x,a=this.target.y,c=this.target.z;this.view!="first-person"&&(s-=this.distance*i*r,a-=this.distance*o,c-=this.distance*e*r),this.perspective.position.set(s,a,c),this.orthographic.position.set(s,a,c);let d=-i*o,f=r,h=-e*o;this.perspective.up.set(d,f,h),this.orthographic.up.set(d,f,h);let v=this.target.clone();this.view=="first-person"&&(v.x+=i*r,v.y+=o,v.z+=e*r),this.perspective.lookAt(v),this.orthographic.lookAt(v)}setProjectionParameters(){let t,e,i,r,o;this.aspectRatio<1?(t=2*Or.radToDeg(Math.atan(Math.tan(Or.degToRad(this.initialFov/2))/this.aspectRatio)),i=this.initialHalfSize,e=-i,r=i/this.aspectRatio,o=-r):(t=this.initialFov,r=this.initialHalfSize,o=-r,i=r*this.aspectRatio,e=-i),this.perspective.fov=t,this.perspective.aspect=this.aspectRatio,this.perspective.near=this.near,this.perspective.far=this.far,this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.left=e,this.orthographic.right=i,this.orthographic.top=r,this.orthographic.bottom=o,this.orthographic.near=this.near,this.orthographic.far=this.far,this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}setActiveProjection(t){this.projection=t,this.projection!="orthographic"?this.object=this.perspective:this.object=this.orthographic}initialize(){this.orientation=this.initialOrientation.clone(),this.distance=this.initialDistance,this.zoom=this.initialZoom,this.setViewingParameters(),this.setProjectionParameters(),this.view!="mini-map"?this.setActiveProjection("perspective"):this.setActiveProjection("orthographic")}getViewport(){let t=Math.min(this.windowWidth,this.windowHeight),e,i,r=this.viewport.width,o=this.viewport.height;return this.view!="mini-map"?(e=this.viewport.x*(1-this.viewport.width),i=this.viewport.y*(1-this.viewport.height),this.windowWidth<this.windowHeight?(e*=t,i*=this.windowHeight,r*=t,o*=this.windowHeight):(e*=this.windowWidth,i*=t,r*=this.windowWidth,o*=t)):(r*=t,o*=t,e=this.viewport.x*(this.windowWidth-r),i=this.viewport.y*(this.windowHeight-o)),new an(e,i,r,o)}setViewport(t){t?this.viewport=this.multipleViewsViewport.clone():this.viewport=new an(0,0,1,1);let e=this.getViewport();this.aspectRatio=e.width/e.height,this.setProjectionParameters()}setWindowSize(t,e){this.windowWidth=t,this.windowHeight=e;let i=this.getViewport();this.aspectRatio=i.width/i.height}updateWindowSize(t,e){this.setWindowSize(t,e),this.setProjectionParameters()}setTarget(t){this.target.copy(t),this.setViewingParameters()}updateTarget(t){this.setTarget(this.target.add(t))}setOrientation(t){this.orientation.copy(t).clamp(this.orientationMin,this.orientationMax),this.setViewingParameters()}updateOrientation(t){this.setOrientation(this.orientation.add(t))}setDistance(t){this.distance=Or.clamp(t,this.distanceMin,this.distanceMax),this.setViewingParameters()}updateDistance(t){this.setDistance(this.distance+t)}setZoom(t){this.zoom=Or.clamp(t,this.zoomMin,this.zoomMax),this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}updateZoom(t){this.setZoom(this.zoom+t)}};var nx=class{constructor(t,e){this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.mixer=new Vy(t),this.actionInProgress=!1,this.actions={};for(let i=0;i<e.length;i++){let r=e[i],o=this.mixer.clipAction(r);this.actions[r.name]=o,(this.states.indexOf(r.name)>=4||this.emotes.indexOf(r.name)>=0)&&(o.clampWhenFinished=!0,o.loop=KT)}this.activeName="Idle",this.actions[this.activeName].play()}fadeToAction(t,e){if(this.activeName!=t&&!this.actionInProgress){let i=this.activeName;this.activeName=t,this.actions[i].fadeOut(e),this.actions[this.activeName].reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(e).play(),this.activeName!="Idle"&&this.activeName!="Walking"&&this.activeName!="Running"&&(this.mixer.addEventListener("finished",r=>this.actionFinished(r)),this.actionInProgress=!0)}}actionFinished(){this.actionInProgress&&(this.actionInProgress=!1,this.mixer.removeEventListener("finished",this.actionInProgress))}update(t){this.mixer&&this.mixer.update(t)}};var Rc=class n{constructor(t,e,i,r,o="div"){this.parent=t,this.object=e,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id="lil-gui-name-"+ ++n.nextNameID,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){let e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},RP=class extends Rc{constructor(t,e,i){super(t,e,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function NP(n){let t,e;return(t=n.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!e&&"#"+e}var Zse={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:NP,toHexString:NP},Nm={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},Kse={isPrimitive:!1,match:Array.isArray,fromHexString(n,t,e=1){let i=Nm.fromHexString(n);t[0]=(i>>16&255)/255*e,t[1]=(i>>8&255)/255*e,t[2]=(255&i)/255*e},toHexString:([n,t,e],i=1)=>Nm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},Jse={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,t,e=1){let i=Nm.fromHexString(n);t.r=(i>>16&255)/255*e,t.g=(i>>8&255)/255*e,t.b=(255&i)/255*e},toHexString:({r:n,g:t,b:e},i=1)=>Nm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},Qse=[Zse,Nm,Kse,Jse],FP=class extends Rc{constructor(t,e,i,r){var o;super(t,e,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(o=this.initialValue,Qse.find(s=>s.match(o))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let s=NP(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){let e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Rm=class extends Rc{constructor(t,e,i){super(t,e,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},kP=class extends Rc{constructor(t,e,i,r,o,s){super(t,e,i,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){let t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;let t=f=>{let h=parseFloat(this.$input.value);isNaN(h)||(this._snapClampSetValue(h+f),this.$input.value=this.getValue())},e,i,r,o,s,a=!1,c=f=>{if(a){let h=f.clientX-e,v=f.clientY-i;Math.abs(v)>5?(f.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(h)>5&&d()}if(!a){let h=f.clientY-r;s-=h*this._step*this._arrowKeyMultiplier(f),o+s>this._max?s=this._max-o:o+s<this._min&&(s=this._min-o),this._snapClampSetValue(o+s)}r=f.clientY},d=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d)};this.$input.addEventListener("input",()=>{let f=parseFloat(this.$input.value);isNaN(f)||(this._stepExplicit&&(f=this._snap(f)),this.setValue(this._clamp(f)))}),this.$input.addEventListener("keydown",f=>{f.code==="Enter"&&this.$input.blur(),f.code==="ArrowUp"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f))),f.code==="ArrowDown"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f)*-1))}),this.$input.addEventListener("wheel",f=>{this._inputFocused&&(f.preventDefault(),t(this._step*this._normalizeMouseWheel(f)))},{passive:!1}),this.$input.addEventListener("mousedown",f=>{e=f.clientX,i=r=f.clientY,a=!0,o=this.getValue(),s=0,window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let t=v=>{let _=this.$slider.getBoundingClientRect(),C=(w=v,b=_.left,x=_.right,D=this._min,S=this._max,(w-b)/(x-b)*(S-D)+D);var w,b,x,D,S;this._snapClampSetValue(C)},e=v=>{t(v.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)},r,o,s=!1,a=v=>{v.preventDefault(),this._setDraggingStyle(!0),t(v.touches[0].clientX),s=!1},c=v=>{if(s){let _=v.touches[0].clientX-r,C=v.touches[0].clientY-o;Math.abs(_)>Math.abs(C)?a(v):(window.removeEventListener("touchmove",c),window.removeEventListener("touchend",d))}else v.preventDefault(),t(v.touches[0].clientX)},d=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",d)},f=this._callOnFinishChange.bind(this),h;this.$slider.addEventListener("mousedown",v=>{this._setDraggingStyle(!0),t(v.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",v=>{v.touches.length>1||(this._hasScrollBar?(r=v.touches[0].clientX,o=v.touches[0].clientY,s=!0):a(v),window.addEventListener("touchmove",c,{passive:!1}),window.addEventListener("touchend",d))},{passive:!1}),this.$slider.addEventListener("wheel",v=>{if(Math.abs(v.deltaX)<Math.abs(v.deltaY)&&this._hasScrollBar)return;v.preventDefault();let _=this._normalizeMouseWheel(v)*this._step;this._snapClampSetValue(this.getValue()+_),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(f,400)},{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle("lil-gui-"+e,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:i}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,i=-t.wheelDelta/120,i*=this._stepExplicit?1:10),e+-i}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){let e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){let t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},LP=class extends Rc{constructor(t,e,i,r){super(t,e,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?t:this._names[e],this}},UP=class extends Rc{constructor(t,e,i){super(t,e,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},fV=!1,ix=class n{constructor({parent:t,autoPlace:e=t===void 0,container:i,width:r,title:o="Controls",injectStyles:s=!0,touchStyles:a=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",c=>{c.code!=="Enter"&&c.code!=="Space"||(c.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!fV&&s&&(function(c){let d=document.createElement("style");d.innerHTML=c;let f=document.querySelector("head link[rel=stylesheet], head style");f?document.head.insertBefore(d,f):document.head.appendChild(d)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25BE";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25B8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),fV=!0),i?i.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",c=>c.stopPropagation()),this.domElement.addEventListener("keyup",c=>c.stopPropagation())}add(t,e,i,r,o){if(Object(i)===i)return new LP(this,t,e,i);let s=t[e];switch(typeof s){case"number":return new kP(this,t,e,i,r,o);case"boolean":return new RP(this,t,e);case"string":return new UP(this,t,e);case"function":return new Rm(this,t,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,t,`
	value:`,s)}addColor(t,e,i=1){return new FP(this,t,e,i)}addFolder(t){return new n({parent:this,title:t})}load(t,e=!0){return t.controllers&&this.controllers.forEach(i=>{i instanceof Rm||i._name in t.controllers&&i.load(t.controllers[i._name])}),e&&t.folders&&this.folders.forEach(i=>{i._title in t.folders&&i.load(t.folders[i._title])}),this}save(t=!0){let e={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Rm)){if(i._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);e.controllers[i._name]=i.save()}}),t&&this.folders.forEach(i=>{if(i._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);e.folders[i._title]=i.save()}),e}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");let i=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}};var rx=class{constructor(t,e,i,r,o,s){function a(oe,pe){oe.color.set(pe)}function c(oe){t.traverseVisible(function(pe){pe.material&&(pe.material instanceof Wr?pe.material.needsUpdate=!0:pe.material instanceof Array&&pe.material.forEach(fe=>{fe instanceof Wr&&(fe.needsUpdate=!0)}))})}function d(oe,pe){I[pe]=function(){oe.fadeToAction(pe,.2)},F.add(I,pe)}this.gui=new ix({hideable:!1});let f=this.gui.addFolder("Lights"),h=f.addFolder("Ambient light");h.add(i.object.ambientLight,"visible").listen();let v=i.object.ambientLight,_={color:"#"+new Tt(v.color).getHexString()};h.addColor(_,"color").onChange(oe=>a(v,oe)),h.add(i.object.ambientLight,"intensity",0,1,.01);let C=f.addFolder("Directional light");C.add(i.object.directionalLight,"visible").listen();let w=i.object.directionalLight,b={color:"#"+new Tt(w.color).getHexString()};C.addColor(b,"color").onChange(oe=>a(w,oe)),C.add(i.object.directionalLight,"intensity",0,1,.01),C.add(i.object.directionalLight.position,"x",-100,100,.01),C.add(i.object.directionalLight.position,"y",-100,100,.01),C.add(i.object.directionalLight.position,"z",-100,100,.01);let x=f.addFolder("Point light #1");x.close(),x.add(i.object.pointLight1,"visible").listen();let D=i.object.pointLight1,S={color:"#"+new Tt(D.color).getHexString()};x.addColor(S,"color").onChange(oe=>a(D,oe)),x.add(i.object.pointLight1,"intensity",0,100,1),x.add(i.object.pointLight1,"distance",0,20,.01),x.add(i.object.pointLight1.position,"x",-10,10,.01),x.add(i.object.pointLight1.position,"y",0,20,.01),x.add(i.object.pointLight1.position,"z",-10,10,.01);let P=f.addFolder("Point light #2");P.close(),P.add(i.object.pointLight2,"visible").listen();let W=i.object.pointLight2,V={color:"#"+new Tt(W.color).getHexString()};P.addColor(V,"color").onChange(oe=>a(W,oe)),P.add(i.object.pointLight2,"intensity",0,100,1),P.add(i.object.pointLight2,"distance",0,20,.01),P.add(i.object.pointLight2.position,"x",-10,10,.01),P.add(i.object.pointLight2.position,"y",0,20,.01),P.add(i.object.pointLight2.position,"z",-10,10,.01),this.gui.addFolder("Shadows").add(e.shadowMap,"enabled").onChange(oe=>c(oe));let $=this.gui.addFolder("Character"),F=$.addFolder("Emotes"),I=[];for(let oe=0;oe<s.emotes.length;oe++)d(s,s.emotes[oe]);let U=$.addFolder("Expressions"),q=o.getObjectByName("Head_4"),ie=Object.keys(q.morphTargetDictionary);for(let oe=0;oe<ie.length;oe++)U.add(q.morphTargetInfluences,oe,0,1,.01).name(ie[oe])}setVisibility(t){t?this.gui.show():this.gui.hide()}};var ox=class{constructor(t){this.selectedRoom=null,this.isInfoVisible=!1,this.initKeyboardListener(),this.roomParameters=t}getRoomFromTable(t){let e=t.name;console.log("getRoomFromTable:"+e);let r={Table_2_2:0,Table_2_8:1,Table_8_2:2,Table_8_8:3}[e];return r===void 0?(console.error(`Table name ${e} is not recognized`),null):this.roomParameters&&Array.isArray(this.roomParameters)&&this.roomParameters.length>r?this.roomParameters[r]:(console.error("roomParameters is not defined, not an array, or out of range"),null)}selectRoomFromTable(t){let e=this.getRoomFromTable(t);if(!e){console.error(`Room not found for table: ${t}`),this.selectedRoom=null,this.clearRoomInfo();return}this.selectedRoom=e,console.log(`Room selected: ${e.roomNumber}`),this.isInfoVisible&&this.updateRoomInfo()}clearRoomInfo(){let t=document.getElementById("room-info");t&&(t.innerHTML=`
                <h3>Room Information</h3>
                <p>No room selected.</p>
            `,this.isInfoVisible=!1)}toggleRoomInfo(){if(!this.selectedRoom){alert("No room selected!");return}let t=document.getElementById("room-info")||this.createInfoDiv();this.isInfoVisible?(t.style.display="none",this.isInfoVisible=!1):(this.updateRoomInfo(),t.style.display="block",this.isInfoVisible=!0)}updateRoomInfo(){let t=document.getElementById("room-info");if(t&&this.selectedRoom){let e=this.selectedRoom;t.innerHTML=`
                <h3>Room Information</h3>
                <p><strong>Number:</strong> ${e.roomNumber}</p>
                <p><strong>Capacity:</strong> ${e.capacity}</p>
                <p><strong>Occupied:</strong> ${e.isOccupied?"Yes":"No"}</p>
            `}}initKeyboardListener(){document.addEventListener("keydown",t=>{t.key.toLowerCase()==="i"&&this.toggleRoomInfo()})}createInfoDiv(){let t=document.createElement("div");return t.id="room-info",t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.padding="15px",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.borderRadius="5px",t.style.zIndex="1000",t.style.display="none",document.body.appendChild(t),t}};var sx=class{constructor(t,e,i,r,o,s,a,c,d,f,h,v,_,C,w){this.generalParameters=co({},KU,t),this.mazeParameters=co({},JU,e),this.playerParameters=co({},QU,i),this.lightsParameters=co({},eV,r),this.fogParameters=co({},tV,o),this.fixedViewCameraParameters=co({},lh,s),this.firstPersonViewCameraParameters=co({},lh,a),this.thirdPersonViewCameraParameters=co({},lh,c),this.topViewCameraParameters=co({},lh,d),this.miniMapCameraParameters=co({},lh,f),this.doorParameters=co({},nV,h),this.tableParameters=co({},iV,v),this.humanParameters=co({},rV,_),this.exitDoorParameters=co({},oV,C),this.roomParameters=w&&w.rooms?w.rooms:[],this.scene2D=new Cm;let b=[new j(0,0,0),new j(1,0,0),new j(1,1,0),new j(0,1,0)],x=new Eo().setFromPoints(b),D=new Wu({color:16777215});this.square=new nh(x,D),this.scene2D.add(this.square),this.camera2D=new Ia(0,1,1,0,0,1),this.scene3D=new Cm,this.maze=new Jy(this.mazeParameters,this.doorParameters,this.tableParameters,this.humanParameters,this.exitDoorParameters,this.roomParameters),this.player=new Qy(this.playerParameters),this.lights=new ex(this.lightsParameters),this.fog=new tx(this.fogParameters),this.door=new qu(this.doorParameters),this.fixedViewCamera=new Ic(this.fixedViewCameraParameters,window.innerWidth,window.innerHeight),this.firstPersonViewCamera=new Ic(this.firstPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.thirdPersonViewCamera=new Ic(this.thirdPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.topViewCamera=new Ic(this.topViewCameraParameters,window.innerWidth,window.innerHeight),this.miniMapCamera=new Ic(this.miniMapCameraParameters,window.innerWidth,window.innerHeight),this.statistics=new ZU,this.statistics.dom.style.visibility="hidden",document.body.appendChild(this.statistics.dom),this.renderer=new My({antialias:!0}),this.generalParameters.setDevicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=HT,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1,this.gameRunning=!1,this.viewsPanel=document.getElementById("views-panel"),this.view=document.getElementById("view"),this.projection=document.getElementById("projection"),this.horizontal=document.getElementById("horizontal"),this.horizontal.step=1,this.vertical=document.getElementById("vertical"),this.vertical.step=1,this.distance=document.getElementById("distance"),this.distance.step=.1,this.zoom=document.getElementById("zoom"),this.zoom.step=.1,this.reset=document.getElementById("reset"),this.resetAll=document.getElementById("reset-all"),this.helpPanel=document.getElementById("help-panel"),this.helpPanel.style.visibility="hidden",this.subwindowsPanel=document.getElementById("subwindows-panel"),this.multipleViewsCheckBox=document.getElementById("multiple-views"),this.multipleViewsCheckBox.checked=!1,this.userInterfaceCheckBox=document.getElementById("user-interface"),this.userInterfaceCheckBox.checked=!0,this.miniMapCheckBox=document.getElementById("mini-map"),this.miniMapCheckBox.checked=!0,this.helpCheckBox=document.getElementById("help"),this.helpCheckBox.checked=!1,this.statisticsCheckBox=document.getElementById("statistics"),this.statisticsCheckBox.checked=!1,this.sceneContainer=document.getElementById("scene-container"),this.renderer.domElement.id="scene-container",this.buildHelpPanel(),this.setActiveViewCamera(this.fixedViewCamera),this.arrangeViewports(this.multipleViewsCheckBox.checked),window.addEventListener("resize",S=>this.windowResize(S)),document.addEventListener("keydown",S=>this.keyChange(S,!0)),document.addEventListener("keyup",S=>this.keyChange(S,!1)),this.renderer.domElement.addEventListener("mousedown",S=>this.mouseDown(S)),this.renderer.domElement.addEventListener("mousemove",S=>this.mouseMove(S)),this.renderer.domElement.addEventListener("mouseup",S=>this.mouseUp(S)),this.renderer.domElement.addEventListener("wheel",S=>this.mouseWheel(S)),this.renderer.domElement.addEventListener("contextmenu",S=>this.contextMenu(S)),this.renderer.domElement.addEventListener("click",S=>this.mouseClick(S)),this.view.addEventListener("change",S=>this.elementChange(S)),this.projection.addEventListener("change",S=>this.elementChange(S)),this.horizontal.addEventListener("change",S=>this.elementChange(S)),this.vertical.addEventListener("change",S=>this.elementChange(S)),this.distance.addEventListener("change",S=>this.elementChange(S)),this.zoom.addEventListener("change",S=>this.elementChange(S)),this.multipleViewsCheckBox.addEventListener("change",S=>this.elementChange(S)),this.userInterfaceCheckBox.addEventListener("change",S=>this.elementChange(S)),this.helpCheckBox.addEventListener("change",S=>this.elementChange(S)),this.statisticsCheckBox.addEventListener("change",S=>this.elementChange(S)),this.reset.addEventListener("click",S=>this.buttonClick(S)),this.resetAll.addEventListener("click",S=>this.buttonClick(S)),this.activeElement=document.activeElement,this.roomInfoHandler=new ox(this.roomParameters)}mouseClick(t){if(t.target.id==="scene-container"){t.preventDefault();let e=new By,i=new tn(t.clientX/window.innerWidth*2-1,-(t.clientY/window.innerHeight)*2+1);e.setFromCamera(i,this.activeViewCamera.object);let r=e.intersectObjects(this.scene3D.children,!0);if(r.length>0){let o=r.find(s=>s.object.isTable);if(o){let s=o.object;console.log("Picked table:",s.name),this.roomInfoHandler.selectRoomFromTable(s),this.moveCameraToTable(s)}else console.log("No table found in the intersection")}}}moveCameraToTable(t){if(this.isCameraAnimating){console.log("Camera is already animating");return}this.isCameraAnimating=!0;let e=new Ki().setFromObject(t);console.log("Bounding Box:",e);let i=e.getCenter(new j);console.log("Target Position:",i);let r=this.activeViewCamera.object,o=new j(0,6,0),s=i.clone().add(o);console.log("Final Position:",s);let a=r.position.clone(),c=r.quaternion.clone(),d=new j(0,1,0),f=new Hr().setFromRotationMatrix(new Kt().lookAt(s,i,d)),h=r.zoom,v=1,_=1500,C=Date.now(),w=x=>x<.5?2*x*x:-1+(4-2*x)*x,b=()=>{let x=Date.now()-C,D=Math.min(x/_,1),S=w(D);if(r.position.lerpVectors(a,s,S),r.quaternion.slerpQuaternions(c,f,S),r.zoom=Or.lerp(h,v,S),r.updateProjectionMatrix(),this.spotlight){let P=new j(0,10,0),W=s.clone().add(P);this.spotlight.position.lerpVectors(a.clone().add(P),W,S),this.spotlight.target.position.copy(i),this.spotlight.target.updateMatrixWorld()}D<1?requestAnimationFrame(b):this.isCameraAnimating=!1};b()}buildHelpPanel(){let t=document.getElementById("help-table"),e=0;for(let i in this.player.keyCodes){for(;t.rows[e].cells.length<2;)e++;t.rows[e++].cells[0].innerHTML=this.player.keyCodes[i]}t.rows[e].cells[0].innerHTML=this.maze.credits+"<br>"+this.player.credits}displayPanel(){this.view.options.selectedIndex=["fixed","first-person","third-person","top"].indexOf(this.activeViewCamera.view),this.projection.options.selectedIndex=["perspective","orthographic"].indexOf(this.activeViewCamera.projection),this.horizontal.value=this.activeViewCamera.orientation.h.toFixed(0),this.vertical.value=this.activeViewCamera.orientation.v.toFixed(0),this.distance.value=this.activeViewCamera.distance.toFixed(1),this.zoom.value=this.activeViewCamera.zoom.toFixed(1)}setActiveViewCamera(t){this.activeViewCamera=t,this.horizontal.min=this.activeViewCamera.orientationMin.h.toFixed(0),this.horizontal.max=this.activeViewCamera.orientationMax.h.toFixed(0),this.vertical.min=this.activeViewCamera.orientationMin.v.toFixed(0),this.vertical.max=this.activeViewCamera.orientationMax.v.toFixed(0),this.distance.min=this.activeViewCamera.distanceMin.toFixed(1),this.distance.max=this.activeViewCamera.distanceMax.toFixed(1),this.zoom.min=this.activeViewCamera.zoomMin.toFixed(1),this.zoom.max=this.activeViewCamera.zoomMax.toFixed(1),this.displayPanel()}arrangeViewports(t){this.fixedViewCamera.setViewport(t),this.firstPersonViewCamera.setViewport(t),this.thirdPersonViewCamera.setViewport(t),this.topViewCamera.setViewport(t)}pointerIsOverViewport(t,e){return t.x>=e.x&&t.x<e.x+e.width&&t.y>=e.y&&t.y<e.y+e.height}getPointedViewport(t){let e;if(this.miniMapCheckBox.checked&&(e=this.miniMapCamera.getViewport(),this.pointerIsOverViewport(t,e)))return this.miniMapCamera.view;let i;this.multipleViewsCheckBox.checked?i=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:i=[this.activeViewCamera];for(let r of i)if(e=r.getViewport(),this.pointerIsOverViewport(t,e))return r.view;return"none"}setViewMode(t){this.multipleViewsCheckBox.checked=t,this.arrangeViewports(this.multipleViewsCheckBox.checked)}setUserInterfaceVisibility(t){this.userInterfaceCheckBox.checked=t,this.viewsPanel.style.visibility=t?"visible":"hidden",this.subwindowsPanel.style.visibility=t?"visible":"hidden",this.userInterface.setVisibility(t)}setMiniMapVisibility(t){this.miniMapCheckBox.checked=t}setHelpVisibility(t){this.helpCheckBox.checked=t,this.helpPanel.style.visibility=t?"visible":"hidden"}setStatisticsVisibility(t){this.statisticsCheckBox.checked=t,this.statistics.dom.style.visibility=t?"visible":"hidden"}windowResize(){this.fixedViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.firstPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.thirdPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.topViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.miniMapCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight)}keyChange(t,e){["horizontal","vertical","distance","zoom"].indexOf(t.target.id)<0&&t.target.blur(),document.activeElement==document.body&&((t.code=="Space"||t.code=="ArrowLeft"||t.code=="ArrowRight"||t.code=="ArrowDown"||t.code=="ArrowUp")&&t.preventDefault(),t.code==this.player.keyCodes.fixedView&&e?this.setActiveViewCamera(this.fixedViewCamera):t.code==this.player.keyCodes.firstPersonView&&e?this.setActiveViewCamera(this.firstPersonViewCamera):t.code==this.player.keyCodes.thirdPersonView&&e?this.setActiveViewCamera(this.thirdPersonViewCamera):t.code==this.player.keyCodes.topView&&e&&this.setActiveViewCamera(this.topViewCamera),t.code==this.player.keyCodes.viewMode&&e&&this.setViewMode(!this.multipleViewsCheckBox.checked),t.code==this.player.keyCodes.miniMap&&e&&this.setMiniMapVisibility(!this.miniMapCheckBox.checked),t.code==this.player.keyCodes.help&&e&&this.setHelpVisibility(!this.helpCheckBox.checked),t.code==this.player.keyCodes.statistics&&e&&this.setStatisticsVisibility(!this.statisticsCheckBox.checked),t.code==this.player.keyCodes.run&&(this.player.keyStates.run=e),t.code==this.player.keyCodes.left?this.player.keyStates.left=e:t.code==this.player.keyCodes.right&&(this.player.keyStates.right=e),t.code==this.player.keyCodes.backward?this.player.keyStates.backward=e:t.code==this.player.keyCodes.forward&&(this.player.keyStates.forward=e),t.code==this.player.keyCodes.jump?this.player.keyStates.jump=e:t.code==this.player.keyCodes.yes?this.player.keyStates.yes=e:t.code==this.player.keyCodes.no?this.player.keyStates.no=e:t.code==this.player.keyCodes.wave?this.player.keyStates.wave=e:t.code==this.player.keyCodes.punch?this.player.keyStates.punch=e:t.code==this.player.keyCodes.thumbsUp&&(this.player.keyStates.thumbsUp=e))}mouseDown(t){if(t.buttons==1||t.buttons==2){this.mousePosition=new tn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none")if(e=="mini-map")t.buttons==1&&(this.dragMiniMap=!0);else{let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i,this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i]),t.buttons==1?this.changeCameraDistance=!0:this.changeCameraOrientation=!0}}}mouseMove(t){if((t.buttons==1||t.buttons==2)&&(this.changeCameraDistance||this.changeCameraOrientation||this.dragMiniMap)){let e=new tn(t.clientX,window.innerHeight-t.clientY-1),i=e.clone().sub(this.mousePosition);if(this.mousePosition=e,t.buttons==1){if(this.changeCameraDistance)this.activeViewCamera.updateDistance(-.05*(i.x+i.y)),this.displayPanel();else if(this.dragMiniMap){let r=Math.min(window.innerWidth,window.innerHeight),o=this.miniMapCamera.viewport.width*r,s=this.miniMapCamera.viewport.height*r;this.miniMapCamera.viewport.x+=i.x/(window.innerWidth-o),this.miniMapCamera.viewport.y+=i.y/(window.innerHeight-s)}}else this.changeCameraOrientation&&(this.activeViewCamera.updateOrientation(i.multiply(new tn(-.5,.5))),this.displayPanel())}}mouseUp(t){this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1}mouseWheel(t){t.preventDefault(),this.mousePosition=new tn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none"&&e!="mini-map"){let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i;let r=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i];r.updateZoom(-.001*t.deltaY),this.setActiveViewCamera(r)}}contextMenu(t){t.preventDefault()}elementChange(t){switch(t.target.id){case"view":this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][this.view.options.selectedIndex]);break;case"projection":this.activeViewCamera.setActiveProjection(["perspective","orthographic"][this.projection.options.selectedIndex]),this.displayPanel();break;case"horizontal":case"vertical":case"distance":case"zoom":if(t.target.checkValidity())switch(t.target.id){case"horizontal":case"vertical":this.activeViewCamera.setOrientation(new qr(this.horizontal.value,this.vertical.value));break;case"distance":this.activeViewCamera.setDistance(this.distance.value);break;case"zoom":this.activeViewCamera.setZoom(this.zoom.value);break}break;case"multiple-views":this.setViewMode(t.target.checked);break;case"user-interface":this.setUserInterfaceVisibility(t.target.checked);break;case"help":this.setHelpVisibility(t.target.checked);break;case"statistics":this.setStatisticsVisibility(t.target.checked);break}}buttonClick(t){switch(t.target.id){case"reset":this.activeViewCamera.initialize();break;case"reset-all":this.fixedViewCamera.initialize(),this.firstPersonViewCamera.initialize(),this.thirdPersonViewCamera.initialize(),this.topViewCamera.initialize();break}this.displayPanel()}finalSequence(){this.fog.enabled=!1,this.thirdPersonViewCamera.setOrientation(new qr(-180,this.thirdPersonViewCamera.initialOrientation.v)),this.thirdPersonViewCamera.setDistance(this.thirdPersonViewCamera.initialDistance),this.thirdPersonViewCamera.setZoom(2),this.setActiveViewCamera(this.thirdPersonViewCamera),this.setViewMode(!1),this.animations.fadeToAction("Dance",.2)}collision(t){let e=this.maze.distanceToWestWall(t)<this.player.radius||this.maze.distanceToEastWall(t)<this.player.radius||this.maze.distanceToNorthWall(t)<this.player.radius||this.maze.distanceToSouthWall(t)<this.player.radius,i=this.maze.distanceToDoor(t)<this.player.radius;return e||i}openDoor(){let t=this.maze.getDoor();t&&t.position.distanceTo(this.player.position)<this.player.radius&&t.open()}update(){if(!this.gameRunning)this.maze.loaded&&this.player.loaded&&(this.scene3D.add(this.maze.object),this.scene3D.add(this.player.object),this.scene3D.add(this.lights.object),this.clock=new Uy,this.animations=new nx(this.player.object,this.player.animations),this.player.position=this.maze.initialPosition.clone(),this.player.direction=this.maze.initialDirection,this.userInterface=new rx(this.scene3D,this.renderer,this.lights,this.fog,this.player.object,this.animations),this.gameRunning=!0);else{let i=this.clock.getDelta();if(this.animations.update(i),!this.animations.actionInProgress){let r=this.player.walkingSpeed*i,o=this.player.turningSpeed*i;this.player.keyStates.run&&(r*=this.player.runningFactor,o*=this.player.runningFactor),this.player.keyStates.left?this.player.direction+=o:this.player.keyStates.right&&(this.player.direction-=o);let s=Or.degToRad(this.player.direction);if(this.player.keyStates.backward){let a=new j(-r*Math.sin(s)+this.player.position.x,this.player.position.y,-r*Math.cos(s)+this.player.position.z);this.collision(a)?this.animations.fadeToAction("Death",.2):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else if(this.player.keyStates.forward){let a=new j(r*Math.sin(s)+this.player.position.x,this.player.position.y,r*Math.cos(s)+this.player.position.z);this.collision(a)?this.animations.fadeToAction("Death",.2):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else this.player.keyStates.jump?this.animations.fadeToAction("Jump",.2):this.player.keyStates.yes?this.animations.fadeToAction("Yes",.2):this.player.keyStates.no?this.animations.fadeToAction("No",.2):this.player.keyStates.wave?this.animations.fadeToAction("Wave",.2):this.player.keyStates.punch?this.animations.fadeToAction("Punch",.2):this.player.keyStates.thumbsUp?this.animations.fadeToAction("ThumbsUp",.2):this.animations.fadeToAction("Idle",this.animations.previousAction=="Death"?.6:.2);this.player.object.position.copy(this.player.position),this.player.object.rotation.y=s-this.player.initialDirection}}this.firstPersonViewCamera.playerDirection=this.player.direction,this.thirdPersonViewCamera.playerDirection=this.player.direction,this.topViewCamera.playerDirection=this.player.direction;let t=new j(this.player.position.x,this.player.position.y+this.player.eyeHeight,this.player.position.z);this.firstPersonViewCamera.setTarget(t),this.thirdPersonViewCamera.setTarget(t),this.topViewCamera.setTarget(t),this.statistics.update(),this.renderer.clear(),this.fog.enabled?this.scene3D.fog=this.fog.object:this.scene3D.fog=null;let e;this.multipleViewsCheckBox.checked?e=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:e=[this.activeViewCamera];for(let i of e){this.player.object.visible=i!=this.firstPersonViewCamera;let r=i.getViewport();this.renderer.setViewport(r.x,r.y,r.width,r.height),this.renderer.render(this.scene3D,i.object),this.renderer.render(this.scene2D,this.camera2D),this.renderer.clearDepth()}if(this.miniMapCheckBox.checked){this.scene3D.fog=null,this.player.object.visible=!0;let i=this.miniMapCamera.getViewport();this.renderer.setViewport(i.x,i.y,i.width,i.height),this.renderer.render(this.scene3D,this.miniMapCamera.object),this.renderer.render(this.scene2D,this.camera2D)}}dispose(){this.renderer&&this.renderer.dispose(),this.scene&&this.scene.children.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(e=>e.dispose()):t.material.dispose()),this.scene.remove(t)})}};var ax=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/SurgeryRoom/"}getRoomsAvailabilityByDate(e){let r=new Date(e).toISOString().split("T")[0];console.log(r);let o=new ps().set("date",r);return this.http.get(this.apiUrl,{params:o})}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tae(n,t){if(n&1&&(p(0,"tr")(1,"td",35)(2,"p"),y(3),g()()()),n&2){let e=X();T(3),Ie(e.error)}}var hV=(()=>{class n{constructor(e,i){this.platformId=e,this.hospital3dService=i,this.animationFrameId=null,this.selectedDate=new Date,this.firstRooms=[{roomNumber:"101",type:"Conference",capacity:20,equipment:["Projector","Whiteboard"],isOccupied:!1},{roomNumber:"102",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0},{roomNumber:"103",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!1},{roomNumber:"104",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0}],this.rooms=[],this.loading=!1,this.error=null,this.animate=()=>{rf(this.platformId)&&(this.animationFrameId=requestAnimationFrame(this.animate),this.thumbRaiser.update())}}initialize(e=this.firstRooms){this.disposeThumbRaiser(),this.thumbRaiser=new sx({},{scale:new j(1,.5,1)},{},{ambientLight:{intensity:.5},pointLight1:{intensity:50,distance:20,position:new j(-3.5,10,2.5)},pointLight2:{intensity:50,distance:20,position:new j(3.5,10,-2.5)},directionalLight:{intensity:.5,position:new j(0,10,0)}},{},{view:"fixed",multipleViewsViewport:new an(0,1,.45,.5)},{view:"first-person",multipleViewsViewport:new an(1,1,.55,.5),initialOrientation:new qr(0,-10),initialDistance:2,distanceMin:1,distanceMax:4},{view:"third-person",multipleViewsViewport:new an(0,0,.55,.5),initialOrientation:new qr(0,-20),initialDistance:2,distanceMin:1,distanceMax:4},{view:"top",multipleViewsViewport:new an(1,0,.45,.5),initialOrientation:new qr(0,-90),initialDistance:4,distanceMin:1,distanceMax:16},{view:"mini-map",multipleViewsViewport:new an(.99,.02,.3,.3),initialOrientation:new qr(180,-90),initialZoom:.64},{},{},{},{},{rooms:e}),(!this.thumbRaiser.renderer||!this.thumbRaiser.update)&&console.error("ThumbRaiser properties are not properly initialized");let i=document.getElementById("scene-container");i&&(i.innerHTML="",i.appendChild(this.thumbRaiser.renderer.domElement))}ngOnInit(){rf(this.platformId)&&(this.initialize(),this.animate())}ngAfterViewInit(){}ngOnDestroy(){this.disposeThumbRaiser()}disposeThumbRaiser(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.thumbRaiser&&(this.thumbRaiser.dispose(),this.thumbRaiser=null)}checkOperations(){this.selectedDate?(this.loading=!0,this.error=null,this.hospital3dService.getRoomsAvailabilityByDate(this.selectedDate).subscribe(e=>{console.log("Rooms fetched:",e),this.rooms=e;let i=this.rooms;this.update3DVisualization(i),this.loading=!1},e=>{console.error("Error fetching rooms",e),this.error="Error fetching rooms",this.loading=!1})):this.error="No date selected"}onDateChange(e){console.log("Date changed:",this.selectedDate)}update3DVisualization(e){this.disposeThumbRaiser(),this.initialize(e),this.animate()}static{this.\u0275fac=function(i){return new(i||n)(k(kr),k(ax))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-hospital3d"]],standalone:!0,features:[zi([ax]),Fe],decls:186,vars:2,consts:[["id","parent"],["id","views-panel"],[1,"views"],["id","view"],["value","fixed"],["value","first"],["value","third"],["value","top"],["type","number","id","horizontal","required",""],["type","number","id","vertical","required",""],["type","button","id","reset","value","Reset view"],["id","projection"],["value","perspective"],["value","orthographic"],["type","number","id","distance","required",""],["type","number","id","zoom","required",""],["type","button","id","reset-all","value","Reset all views"],["colspan","4",2,"text-align","center"],["for","date-picker",2,"margin-right","10px"],["type","datetime-local","id","date-picker",2,"margin-right","10px",3,"ngModelChange","change","ngModel"],[2,"padding","5px 15px",3,"click"],[4,"ngIf"],["id","scene-container"],["id","help-panel"],["id","help-table",1,"help"],["colspan","2",2,"font-size","3.0vmin"],["colspan","2",2,"text-align","left"],["colspan","2",2,"text-align","right"],["id","subwindows-panel"],[1,"subwindows"],["type","checkbox","id","multiple-views"],["type","checkbox","id","user-interface"],["type","checkbox","id","mini-map"],["type","checkbox","id","help"],["type","checkbox","id","statistics"],["colspan","4",2,"text-align","center","color","red"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr")(5,"td")(6,"label"),y(7,"View:"),g(),p(8,"select",3)(9,"option",4),y(10,"Fixed"),g(),p(11,"option",5),y(12,"First-person"),g(),p(13,"option",6),y(14,"Third-person"),g(),p(15,"option",7),y(16,"Top"),g()()(),p(17,"td")(18,"label"),y(19,"Orientation (h):"),g(),ne(20,"input",8),g(),p(21,"td")(22,"label"),y(23,"Orientation (v):"),g(),ne(24,"input",9),g(),p(25,"td"),ne(26,"input",10),g()(),p(27,"tr")(28,"td")(29,"label"),y(30,"Projection:"),g(),p(31,"select",11)(32,"option",12),y(33,"Perspective"),g(),p(34,"option",13),y(35,"Orthographic"),g()()(),p(36,"td")(37,"label"),y(38,"Distance:"),g(),ne(39,"input",14),g(),p(40,"td")(41,"label"),y(42,"Zoom:"),g(),ne(43,"input",15),g(),p(44,"td"),ne(45,"input",16),g()(),p(46,"tr")(47,"td",17)(48,"label",18),y(49,"Select a Date:"),g(),p(50,"input",19),Ue("ngModelChange",function(s){return Ve(r.selectedDate,s)||(r.selectedDate=s),s}),ee("change",function(s){return r.onDateChange(s)}),g(),p(51,"button",20),ee("click",function(){return r.checkOperations()}),y(52,"Check Operations"),g()()(),ue(53,tae,4,1,"tr",21),g()()(),ne(54,"div",22),p(55,"div",23)(56,"table",24)(57,"tbody")(58,"tr")(59,"th",25),y(60," Help "),g()(),p(61,"tr")(62,"th",26),y(63,"Select active view"),g()(),p(64,"tr"),ne(65,"td"),p(66,"td"),y(67,"Fixed view"),g()(),p(68,"tr"),ne(69,"td"),p(70,"td"),y(71,"First-person view"),g()(),p(72,"tr"),ne(73,"td"),p(74,"td"),y(75,"Third-person view"),g()(),p(76,"tr"),ne(77,"td"),p(78,"td"),y(79,"Top view"),g()(),p(80,"tr")(81,"th",26),y(82,"Toggle view mode"),g()(),p(83,"tr"),ne(84,"td"),p(85,"td"),y(86,"Single-view mode / multiple-views mode"),g()(),p(87,"tr")(88,"th",26),y(89,"Display / hide subwindows"),g()(),p(90,"tr"),ne(91,"td"),p(92,"td"),y(93,"User interface"),g()(),p(94,"tr"),ne(95,"td"),p(96,"td"),y(97,"Mini-map"),g()(),p(98,"tr"),ne(99,"td"),p(100,"td"),y(101,"Help"),g()(),p(102,"tr"),ne(103,"td"),p(104,"td"),y(105,"Statistics"),g()(),p(106,"tr")(107,"th",26),y(108,"Move character"),g()(),p(109,"tr"),ne(110,"td"),p(111,"td"),y(112,"Walk / run (modifier key)"),g()(),p(113,"tr"),ne(114,"td"),p(115,"td"),y(116,"Turn left slowly / quickly"),g()(),p(117,"tr"),ne(118,"td"),p(119,"td"),y(120,"Turn right slowly / quickly"),g()(),p(121,"tr"),ne(122,"td"),p(123,"td"),y(124,"Walk / run backward"),g()(),p(125,"tr"),ne(126,"td"),p(127,"td"),y(128,"Walk / run forward"),g()(),p(129,"tr")(130,"th",26),y(131,"Emote character"),g()(),p(132,"tr"),ne(133,"td"),p(134,"td"),y(135,"Jump"),g()(),p(136,"tr"),ne(137,"td"),p(138,"td"),y(139,"Yes"),g()(),p(140,"tr"),ne(141,"td"),p(142,"td"),y(143,"No"),g()(),p(144,"tr"),ne(145,"td"),p(146,"td"),y(147,"Wave"),g()(),p(148,"tr"),ne(149,"td"),p(150,"td"),y(151,"Punch"),g()(),p(152,"tr"),ne(153,"td"),p(154,"td"),y(155,"Thumbs up"),g()(),p(156,"tr"),ne(157,"td",27),g()()()(),p(158,"div",28)(159,"table",29)(160,"tbody")(161,"tr")(162,"td")(163,"label"),y(164,"Multiple views:"),g(),ne(165,"input",30),g()(),p(166,"tr")(167,"td")(168,"label"),y(169,"User interface:"),g(),ne(170,"input",31),g()(),p(171,"tr")(172,"td")(173,"label"),y(174,"Mini-map:"),g(),ne(175,"input",32),g()(),p(176,"tr")(177,"td")(178,"label"),y(179,"Help:"),g(),ne(180,"input",33),g()(),p(181,"tr")(182,"td")(183,"label"),y(184,"Statistics:"),g(),ne(185,"input",34),g()()()()()()),i&2&&(T(50),Le("ngModel",r.selectedDate),T(3),z("ngIf",r.error))},dependencies:[vt,Oi,Ai,Ct,St,Tn,st,zt],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;background-color:#f0f0f0}canvas[_ngcontent-%COMP%]{display:block;height:100vh;width:100vw;pointer-events:auto}#scene-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;overflow:hidden;background-color:#000;pointer-events:auto}#parent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}#views-panel[_ngcontent-%COMP%]{position:absolute;top:1vh;left:50%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;text-align:center;font-size:1.5vmin;color:#fff;pointer-events:auto}#help-panel[_ngcontent-%COMP%]{position:absolute;right:1vw;top:1vh;z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}#subwindows-panel[_ngcontent-%COMP%]{position:absolute;bottom:1vh;left:5%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}.left-align[_ngcontent-%COMP%]{text-align:left}"]})}}return n})();var pV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}deleteAccount(e){return this.http.delete(`${this.apiUrl}/DeleteUser/${e}`,{observe:"response"}).pipe(un(i=>(console.error("Error deleting account:",i),En(i))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mV=(()=>{class n{constructor(e,i){this.deleteUserService=e,this.router=i}ngOnInit(){}onDelete(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.deleteUserService.deleteAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully deleted.")},r=>{console.error("Account deletion failed",r),alert("Account deletion failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account deletion failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account deletion cancelled.")}static{this.\u0275fac=function(i){return new(i||n)(k(pV),k(ct))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-delete-user"]],standalone:!0,features:[Fe],decls:8,vars:0,consts:[[1,"delete-user-container"],[1,"delete-user-box"],[1,"delete-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"p"),y(3,"Are you sure you want to delete your account? This action is irreversible."),g(),p(4,"button",2),ee("click",function(){return r.onDelete()}),y(5,"Delete"),g(),p(6,"button",3),ee("click",function(){return r.onCancel()}),y(7,"Cancel"),g()()())},styles:[".delete-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.delete-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.delete-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.delete-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function iae(n,t){if(n&1&&(p(0,"div",9),y(1),g()),n&2){let e=X();T(),Et(" ",e.errorMessage," ")}}var gV=(()=>{class n{constructor(e){this.staffService=e,this.close=new ot,this.username="",this.errorMessage=""}onModalClick(e){e.stopPropagation()}ngOnInit(){console.log("ActiveModalComponent initialized",this.profile)}closeModal(){this.close.emit(!1)}onSubmit(){if(this.username===""){this.errorMessage="Username is required";return}let e={email:this.profile.email,username:this.username,role:this.profile.staffType,staffId:this.profile.id};this.staffService.activateStaff(e).subscribe({next:i=>{console.log("User activated:",i),this.errorMessage="",this.username="",this.close.emit(!0)},error:i=>{if(console.error("Error Activating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Activing staff failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)(k(ir))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-active-modal"]],inputs:{profile:"profile"},outputs:{close:"close"},standalone:!0,features:[Fe],decls:13,vars:2,consts:[[1,"modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","username","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-submitUser"],[1,"error-message"]],template:function(i,r){i&1&&(p(0,"div",0),ee("click",function(){return r.closeModal()}),p(1,"div",1),ee("click",function(s){return r.onModalClick(s)}),p(2,"div",2)(3,"h2"),y(4,"Activate User"),g()(),p(5,"form",3),ee("ngSubmit",function(){return r.onSubmit()}),p(6,"div",4)(7,"label",5),y(8,"Username"),g(),p(9,"input",6),Ue("ngModelChange",function(s){return Ve(r.username,s)||(r.username=s),s}),g()(),ue(10,iae,2,1,"div",7),p(11,"button",8),y(12,"Submit"),g()()()()),i&2&&(T(9),Le("ngModel",r.username),T(),z("ngIf",r.errorMessage))},dependencies:[vt,Ut,Ct,St,Lt,sn,Tn,Hn,st,zt,nr,bt],styles:[".modal[_ngcontent-%COMP%]{display:block;position:fixed;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal-content[_ngcontent-%COMP%]{background-color:#fff;margin:15% auto;padding:20px;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px;align-items:center;font-family:Poppins,sans-serif}.modal-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin:0}.modal-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-top:.5rem;border-radius:4px}.modal-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;text-align:center;font-size:small;margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;transition:background-color .5s}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:focus{outline:none}"]})}}return n})();function rae(n,t){if(n&1){let e=Xe();p(0,"app-active-modal",25),ee("close",function(r){me(e);let o=X();return ge(o.closeModal(r))}),g()}if(n&2){let e=X();z("profile",e.modalProfile)}}function oae(n,t){if(n&1&&(p(0,"option",26),y(1),g()),n&2){let e=t.$implicit;z("value",e.specOption),T(),Et(" ",e.specOption," ")}}function sae(n,t){if(n&1&&(p(0,"div",27),y(1),g()),n&2){let e=X();T(),Et(" ",e.errorMessage," ")}}function aae(n,t){if(n&1){let e=Xe();p(0,"button",32),ee("click",function(){me(e);let r=X().$implicit,o=X();return ge(o.openModal(r))}),y(1,"Activate"),g()}}function lae(n,t){if(n&1){let e=Xe();p(0,"button",33),ee("click",function(){me(e);let r=X().$implicit,o=X();return ge(o.deactivateStaff(r.id))}),y(1,"Deactivate"),g()}}function cae(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td"),y(4),g(),p(5,"td")(6,"button",28),y(7,"Edit"),g(),ue(8,aae,2,0,"button",29)(9,lae,2,0,"button",30),p(10,"button",31),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.viewStaffDetails(r))}),y(11,"View"),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e.fullName),T(2),Ie(e.email),T(2),yu("routerLink","/update-staff/",e.id,""),T(2),z("ngIf",!e.isActive),T(),z("ngIf",e.isActive)}}function uae(n,t){if(n&1){let e=Xe();p(0,"div",34)(1,"div",35)(2,"h3"),y(3,"Staff Details"),g(),p(4,"button",36),ee("click",function(){me(e);let r=X();return ge(r.clearSelectedStaff())}),ne(5,"img",37),g(),p(6,"table",38)(7,"tbody")(8,"tr")(9,"th"),y(10,"License Number"),g(),p(11,"td"),y(12),g()(),p(13,"tr")(14,"th"),y(15,"First Name"),g(),p(16,"td"),y(17),g()(),p(18,"tr")(19,"th"),y(20,"Last Name"),g(),p(21,"td"),y(22),g()(),p(23,"tr")(24,"th"),y(25,"Full Name"),g(),p(26,"td"),y(27),g()(),p(28,"tr")(29,"th"),y(30,"Phone Number"),g(),p(31,"td"),y(32),g()(),p(33,"tr")(34,"th"),y(35,"Email"),g(),p(36,"td"),y(37),g()(),p(38,"tr")(39,"th"),y(40,"Specialization"),g(),p(41,"td"),y(42),g()(),p(43,"tr")(44,"th"),y(45,"Staff Type"),g(),p(46,"td"),y(47),g()(),p(48,"tr")(49,"th"),y(50,"Is Active"),g(),p(51,"td"),y(52),g()()()(),p(53,"button",39),y(54,"View Availability"),g()()()}if(n&2){let e=X();T(12),Ie(e.selectedStaff.licenseNumber),T(5),Ie(e.selectedStaff.firstName),T(5),Ie(e.selectedStaff.lastName),T(5),Ie(e.selectedStaff.fullName),T(5),Ie(e.selectedStaff.phoneNumber),T(5),Ie(e.selectedStaff.email),T(5),Ie(e.selectedStaff.specializationName),T(5),Ie(e.selectedStaff.staffType),T(5),Ie(e.selectedStaff.isActive?"Yes":"No"),T(),yu("routerLink","/view-availability/",e.selectedStaff.id,"")}}var vV=(()=>{class n{constructor(e,i){this.fb=e,this.staffService=i,this.isModalOpen=!1,this.staffProfiles=[],this.errorMessage="",this.specializations=[],this.selectedStaff=null,this.showAvailabilityModal=!1,this.availabilitySlots=[],this.username="",this.modalProfile=null,this.searchForm=this.fb.group({firstName:new Fn("",[It.required]),lastName:new Fn("",[It.required]),fullName:new Fn("",[It.required]),email:new Fn("",[It.required,It.email]),specializationName:new Fn("",[It.required])})}ngOnInit(){this.loadStaffProfiles(),this.loadSpecializations()}loadSpecializations(){this.staffService.getSpecialization().subscribe({next:e=>{console.log(`Data specialization:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}clearFilters(){this.searchForm.reset({firstName:"",lastName:"",fullName:"",email:"",specializationName:""}),this.loadStaffProfiles(),this.errorMessage=""}onSearch(){let e={firstName:this.searchForm.value.firstName?.trim()||"",lastName:this.searchForm.value.lastName?.trim()||"",fullName:this.searchForm.value.fullName?.trim()||"",email:this.searchForm.value.email?.trim()||"",specializationName:this.searchForm.value.specializationName?.trim()||""};if(Object.values(e).every(i=>!i)){this.errorMessage="At least one search parameter is required.";return}if(e.email!==""&&this.searchForm.get("email")?.invalid){this.errorMessage="Invalid email address";return}console.log("Search criteria",e),this.staffService.searchStaffProfiles(e).subscribe({next:i=>{this.errorMessage="",Array.isArray(i)?this.staffProfiles=i:this.staffProfiles=[]},error:i=>{if(console.error("Error search staff",i),this.staffProfiles=[],i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Search Staff - "+i.error)}})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}viewStaffDetails(e){e.specializationName=this.getSpecializationName(e.specializationId),this.selectedStaff=e}clearSelectedStaff(){this.selectedStaff=null}deactivateStaff(e){this.staffService.deactivateStaff(e).subscribe({next:()=>{console.log("Staff Deactivated Successfully"),this.errorMessage="",this.clearFilters()},error:i=>{if(console.error("Error deactivating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Deactive staff failed - "+i.error)}})}openModal(e){this.modalProfile=e,this.isModalOpen=!0}closeModal(e){e&&this.clearFilters(),this.modalProfile=null,this.isModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)(k(Ea),k(ir))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-search-staffs"]],inputs:{profile:"profile"},standalone:!0,features:[Fe],decls:45,vars:6,consts:[[1,"manage-container"],[3,"profile","close",4,"ngIf"],[1,"screens-container"],[1,"screen"],["type","button","routerLink","/panel-admin",1,"btn-back"],[1,"manage-title"],[1,"content-container"],[1,"filter-container"],[1,"filter-form",3,"ngSubmit","formGroup"],["type","text","name","firstName","placeholder","First Name","formControlName","firstName"],["type","text","name","lastName","placeholder","Last Name","formControlName","lastName"],["type","text","name","fullName","placeholder","Full Name","formControlName","fullName"],["type","email","name","email","placeholder","Email","formControlName","email"],["name","specialization","formControlName","specializationName","title","Specialization"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-filter"],["type","reset",1,"btn","btn-clear",3,"click"],[1,"operation"],["type","button","routerLink","/create-staff",1,"btn","btn-create"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[3,"close","profile"],[3,"value"],[1,"error-message"],["type","button",1,"btn","btn-update",3,"routerLink"],["type","button","class","btn btn-activate",3,"click",4,"ngIf"],["type","button","class","btn btn-deactive",3,"click",4,"ngIf"],["type","button",1,"btn","btn-view",3,"click"],["type","button",1,"btn","btn-activate",3,"click"],["type","button",1,"btn","btn-deactive",3,"click"],[1,"details-screen"],[1,"staff-details"],["type","button",3,"click"],["src","fechar.png","alt","Close"],[1,"table","table-bordered"],["type","button",1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(p(0,"div",0),ue(1,rae,1,1,"app-active-modal",1),ne(2,"app-sidebar"),p(3,"div",2)(4,"div",3)(5,"button",4),y(6," Back to DashBoard "),g(),p(7,"h2",5),y(8,"Search Staff Profiles"),g(),p(9,"div",6)(10,"div",7)(11,"form",8),ee("ngSubmit",function(){return r.onSearch()}),p(12,"p"),y(13," Filter Fields"),g(),ne(14,"input",9)(15,"input",10)(16,"input",11)(17,"input",12),p(18,"select",13)(19,"option",14),y(20,"Select Specialization"),g(),ue(21,oae,2,2,"option",15),g(),ue(22,sae,2,1,"div",16),p(23,"button",17),y(24,"Search"),g(),p(25,"button",18),ee("click",function(){return r.clearFilters()}),y(26," Clear Filters "),g()(),p(27,"div",19)(28,"p"),y(29," Others operations"),g(),p(30,"button",20),y(31," Create Staff "),g()()(),p(32,"div",21)(33,"table",22)(34,"thead")(35,"tr")(36,"th"),y(37,"Full Name"),g(),p(38,"th"),y(39,"Email"),g(),p(40,"th"),y(41,"Actions"),g()()(),p(42,"tbody"),ue(43,cae,12,6,"tr",23),g()()()()(),ue(44,uae,55,11,"div",24),g()()),i&2&&(T(),z("ngIf",r.isModalOpen),T(10),z("formGroup",r.searchForm),T(10),z("ngForOf",r.specializations),T(),z("ngIf",r.errorMessage),T(21),z("ngForOf",r.staffProfiles),T(),z("ngIf",r.selectedStaff))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,st,xn,zt,Rt,gV,nr,Cr,Dr,bt,At],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:40px;margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:10px;width:100%;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:250px;overflow:auto;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #ddd;border-radius:8px;padding:10px;background-color:#fff;box-shadow:0 0 10px #0000001a;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center;font-weight:700;margin:0;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{margin-right:5px;background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]{margin-right:5px;background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{margin-top:1rem;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]{margin-right:5px;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;word-wrap:break-word;vertical-align:middle;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 5px;word-wrap:break-word;vertical-align:middle}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:15px;right:10px;background:none;border:none;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]{position:relative;background-color:#6c757d;color:#fff;display:flex;justify-content:center;align-items:center;margin:0 auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();var VP=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Patient")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(Ae(mc),Ae(ct))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _V=(()=>{class n{constructor(e,i){this.panelService=e,this.settingsService=i}ngOnInit(){this.panelService.setPanelId("panel-admin")}static{this.\u0275fac=function(i){return new(i||n)(k(bi),k(vc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-panel-admin"]],standalone:!0,features:[Fe],decls:19,vars:0,consts:[[1,"dashboard-container"],[1,"dashboard-content"],[1,"header"],[1,"stats"],["routerLink","/operation-types","routerLinkActive","active",1,"box","box1"],["routerLink","/manage-patients","routerLinkActive","active",1,"box","box2"],["routerLink","/search-staffs","routerLinkActive","active",1,"box","box3"],["routerLink","/operation-rooms","routerLinkActive","active",1,"box","box4"],["routerLink","/specializations","routerLinkActive","active",1,"box","box5"],["routerLink","/manage-allergies-and-conditions","routerLinkActive","active",1,"box","box6"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h1"),y(5,"Admin Panel"),g()(),p(6,"div",3)(7,"button",4),y(8," Manage Operation Types "),g(),p(9,"button",5),y(10," Manage Patients "),g(),p(11,"button",6),y(12," Manage Staffs "),g(),p(13,"button",7),y(14," Manage Operation Rooms "),g(),p(15,"button",8),y(16," Manage Specializations "),g(),p(17,"button",9),y(18," Manage Allergies and Conditions "),g()()()())},dependencies:[Rt,bt,At,wa],styles:['@charset "UTF-8";.dashboard-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.dashboard-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4" "box5 box6";grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.4em;font-weight:700;box-shadow:0 4px 8px #0000001a;width:100%;height:100%}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%], .box5[_ngcontent-%COMP%], .box6[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}.box5[_ngcontent-%COMP%]{grid-area:box5}.box5[_ngcontent-%COMP%]:hover{border-color:#b8b528}.box6[_ngcontent-%COMP%]{grid-area:box6}.box6[_ngcontent-%COMP%]:hover{border-color:#92a8d1}a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;text-decoration:none;color:#fff}']})}}return n})();function dae(n,t){if(n&1&&(p(0,"option",19),y(1),g()),n&2){let e=t.$implicit;z("value",e.specOption),T(),Et(" ",e.specOption," ")}}function fae(n,t){if(n&1&&(p(0,"div",20),y(1),g()),n&2){let e=X();T(),Et(" ",e.errorMessage," ")}}var yV=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.errorMessage="",this.specializations=[],this.staffName="",this.updateStaffForm=this.fb.group({identifier:new Fn("",[It.required]),phoneNumber:new Fn("",[It.required]),email:new Fn("",[It.required,It.email]),addAvailabilitySlots:[""],removeAvailabilitySlots:[""],specializationName:new Fn("",[It.required])}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadSpecializations().then(()=>{this.loadStaffDetails()})}loadSpecializations(){return new Promise((e,i)=>{this.staffService.getSpecialization().subscribe({next:r=>{console.log(`Data specialization:
`,r),this.specializations=r,e()},error:r=>{console.error("Error loading specializations",r),r.status===401?alert("Unauthorized page access"):alert("Error loading specializations"),i(r)}})})}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.initFromUpdate(e),this.staffName=e.fullName,console.log(`Staff details:
`,e)},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}initFromUpdate(e){let i=e.phoneNumber,r=i.substring(0,4),o=i.substring(4);this.updateStaffForm.patchValue({identifier:r,phoneNumber:o,email:e.email,addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.getSpecializationName(e.specializationId.trim())})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}onSubmit(){if(this.updateStaffForm.invalid){this.errorMessage="",this.updateStaffForm.markAllAsTouched();return}let e={phoneNumber:(this.updateStaffForm.value.identifier?.trim()||"")+(this.updateStaffForm.value.phoneNumber?.trim()||""),email:this.updateStaffForm.value.email?.trim()||"",addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.updateStaffForm.value.specializationName?.trim()||""};console.log(`Update data:
`,e),this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:i=>{if(console.error("Error Updating staff",i),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)(k(ir),k(Ea),k(ct),k(tr))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-staff"]],standalone:!0,features:[Fe],decls:30,vars:4,consts:[[1,"update-staff-container"],[1,"update-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","specializationName"],["id","specializationName","formControlName","specializationName","title","Specialization","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(ne(0,"app-sidebar"),p(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),y(5," Go Back"),g(),p(6,"h2"),y(7,"Edit Staff "),g(),p(8,"h3"),y(9),g()(),p(10,"form",4),ee("ngSubmit",function(){return r.onSubmit()}),p(11,"label",5),y(12,"Phone Number"),g(),p(13,"div",6)(14,"div",7),ne(15,"input",8),g(),p(16,"div",9),ne(17,"input",10),g()(),p(18,"label",11),y(19,"Email"),g(),ne(20,"input",12),p(21,"label",13),y(22,"Specialization"),g(),p(23,"select",14)(24,"option",15),y(25,"Select Specialization"),g(),ue(26,dae,2,2,"option",16),g(),ue(27,fae,2,1,"div",17),p(28,"button",18),y(29,"Update"),g()()()()),i&2&&(T(9),Ie(r.staffName),T(),z("formGroup",r.updateStaffForm),T(16),z("ngForOf",r.specializations),T(),z("ngIf",r.errorMessage))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,sn,st,xn,zt,Rt,nr,Cr,Dr,bt,At],styles:[".update-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.update-staff-container[_ngcontent-%COMP%]   .update-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var xV=(()=>{class n{constructor(e,i,r){this.router=e,this.panelService=i,this.settingsService=r}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings")}static{this.\u0275fac=function(i){return new(i||n)(k(ct),k(bi),k(vc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-patient-panel"]],standalone:!0,features:[Fe],decls:11,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"header"],[1,"stats"],[1,"box","box1"],[1,"box","box2"],[1,"box","box3"],[1,"box","box4"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h1"),y(5,"Patient Panel"),g()(),p(6,"div",3),ne(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),g()()())},dependencies:[Rt],styles:['.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.5em;font-weight:700;box-shadow:0 4px 8px #0000001a}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}']})}}return n})();var Na=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}deletePatient(e){return this.http.delete(`${this.apiUrl}/Patient/${e}`,{observe:"response"}).pipe(un(i=>(console.error("Error deleting patient:",i),En(i))))}getPatientsWithAdvancedFilter(e,i,r,o,s,a,c,d){let f=new URLSearchParams({firstName:e||"",lastName:i||"",fullName:r||"",dateOfBirth:o||"",medicalRecordNumber:s||"",gender:a||"",email:c||"",phoneNumber:d||""});return this.http.get(`${this.apiUrl}/Patient?${f.toString()}`)}createPatient(e){return this.http.post(`${this.apiUrl}/Patient`,e).pipe(un(i=>(console.error("Error creating patient:",i),En(i))))}updatePatient(e,i){return this.http.put(`${this.apiUrl}/Patient/${e}`,i,{responseType:"json"}).pipe(un(r=>(console.error("Error updating patient:",r),En(r))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var So=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/allergies"}getAllergies(){return console.log("getAllergies called"),this.http.get(`${this.apiUrl}`).pipe(un(e=>(console.error("Error fetching allergies:",e),yt([]))))}createAllergy(e){return this.http.post(`${this.apiUrl}/create`,{allergyCode:e.allergyCode,allergyName:e.allergyName,allergyDescription:e.allergyDescription,allergySymptoms:e.allergySymptoms}).pipe(un(i=>(console.error("Error creating allergy:",i),En(()=>new Error("Failed to create Allergy. Please try again later.")))))}updateAllergy(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{allergyCode:i.allergyCode,allergyName:i.allergyName,allergyDescription:i.allergyDescription,allergySymptoms:i.allergySymptoms}).pipe(un(r=>(console.error("Error updating allergy:",r),En(()=>new Error("Failed to update allergy. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var To=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/medicalConditions"}getMedicalConditions(){return this.http.get(`${this.apiUrl}/`)}createMedicalConditions(e){return this.http.post(`${this.apiUrl}/create`,{medicalConditionCode:e.medicalConditionCode,medicalConditionName:e.medicalConditionName,medicalConditionDescription:e.medicalConditionDescription,medicalConditionSymptoms:e.medicalConditionSymptoms}).pipe(un(i=>(console.error("Error creating medical condition:",i),En(()=>new Error("Failed to create medical condition. Please try again later.")))))}updateCondition(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{medicalConditionCode:i.medicalConditionCode,medicalConditionName:i.medicalConditionName,medicalConditionDescription:i.medicalConditionDescription,medicalConditionSymptoms:i.medicalConditionSymptoms}).pipe(un(r=>(console.error("Error updating medical condition:",r),En(()=>new Error("Failed to update medical condition. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Nc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/patientsMedicalHistory"}getPatientMedicalHistory(e){return this.http.get(`${this.apiUrl}/get/${e}`).pipe(fi(i=>console.log("Medical history response:",i)),un(i=>(i.status===404&&console.error("Medical history not found:",i),En(()=>i))))}updatePatientMedicalHistory(e,i,r,o,s){let a=`${this.apiUrl}/update/${e}`,c={medicalConditions:r,allergies:i,familyHistory:o,freeText:s};return this.http.put(a,c).pipe(fi(d=>console.log("Update response:",d)),un(d=>(console.error("Error updating medical history:",d),En(()=>d))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var hae=n=>["/update-patient",n];function pae(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td"),y(4),g(),p(5,"td")(6,"a",24),y(7,"Edit"),g(),p(8,"a",25),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.deletePatient(r.medicalRecordNumber,r.fullName))}),y(9,"Delete"),g(),p(10,"a",26),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.viewPatientDetails(r.medicalRecordNumber))}),y(11,"View"),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e.medicalRecordNumber),T(2),Ie(e.fullName),T(2),z("routerLink",_i(3,hae,e.medicalRecordNumber))}}function mae(n,t){if(n&1&&(p(0,"li"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" ",e.allergyName," ")}}function gae(n,t){n&1&&(p(0,"li"),y(1,"No allergies"),g())}function vae(n,t){if(n&1&&(p(0,"li"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" ",e.medicalConditionName," ")}}function _ae(n,t){n&1&&(p(0,"li"),y(1,"No medical conditions"),g())}function yae(n,t){if(n&1){let e=Xe();p(0,"div",27)(1,"div",28)(2,"h3"),y(3,"Patient Details"),g(),p(4,"button",29),ee("click",function(){me(e);let r=X();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],ge(r.selectedMedicalHistory=void 0)}),g(),p(5,"table",30)(6,"tbody")(7,"tr")(8,"th"),y(9,"Medical Record Number"),g(),p(10,"td"),y(11),g()(),p(12,"tr")(13,"th"),y(14,"First Name"),g(),p(15,"td"),y(16),g()(),p(17,"tr")(18,"th"),y(19,"Last Name"),g(),p(20,"td"),y(21),g()(),p(22,"tr")(23,"th"),y(24,"Full Name"),g(),p(25,"td"),y(26),g()(),p(27,"tr")(28,"th"),y(29,"Date of Birth"),g(),p(30,"td"),y(31),g()(),p(32,"tr")(33,"th"),y(34,"Gender"),g(),p(35,"td"),y(36),g()(),p(37,"tr")(38,"th"),y(39,"Email"),g(),p(40,"td"),y(41),g()(),p(42,"tr")(43,"th"),y(44,"Phone Number"),g(),p(45,"td"),y(46),g()(),p(47,"tr")(48,"th"),y(49,"Emergency Contact"),g(),p(50,"td"),y(51),g()(),p(52,"tr")(53,"th"),y(54,"Allergies"),g(),p(55,"td")(56,"form",31),ee("submit",function(){me(e);let r=X();return ge(r.searchAllergies())}),p(57,"input",32),Ue("ngModelChange",function(r){me(e);let o=X();return Ve(o.allergySearch,r)||(o.allergySearch=r),ge(r)}),g(),p(58,"button",33),y(59,"Search"),g()(),p(60,"ul",34),ue(61,mae,2,1,"li",22)(62,gae,2,0,"li",35),g()()(),p(63,"tr")(64,"th"),y(65,"Medical Conditions"),g(),p(66,"td")(67,"form",31),ee("submit",function(){me(e);let r=X();return ge(r.searchMedicalConditions())}),p(68,"input",36),Ue("ngModelChange",function(r){me(e);let o=X();return Ve(o.medicalConditionSearch,r)||(o.medicalConditionSearch=r),ge(r)}),g(),p(69,"button",33),y(70,"Search"),g()(),p(71,"ul",37),ue(72,vae,2,1,"li",22)(73,_ae,2,0,"li",35),g()()(),p(74,"tr")(75,"th"),y(76,"Appointment History"),g(),p(77,"td"),y(78),g()(),p(79,"tr")(80,"th"),y(81,"Is Active"),g(),p(82,"td"),y(83),g()()()()()()}if(n&2){let e=X();T(11),Ie(e.selectedPatient.medicalRecordNumber),T(5),Ie(e.selectedPatient.firstName),T(5),Ie(e.selectedPatient.lastName),T(5),Ie(e.selectedPatient.fullName),T(5),Ie(e.selectedPatient.dateOfBirth),T(5),Ie(e.selectedPatient.gender===1?"Male":"Female"),T(5),Ie(e.selectedPatient.email),T(5),Ie(e.selectedPatient.phoneNumber),T(5),Ie(e.selectedPatient.emergencyContact),T(6),Le("ngModel",e.allergySearch),T(4),z("ngForOf",e.filteredAllergies),T(),z("ngIf",e.filteredAllergies.length===0),T(6),Le("ngModel",e.medicalConditionSearch),T(4),z("ngForOf",e.filteredMedicalConditions),T(),z("ngIf",e.filteredMedicalConditions.length===0),T(5),Et(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),T(5),Ie(e.selectedPatient.isActive?"Yes":"No")}}var bV=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[]}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[]},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}static{this.\u0275fac=function(i){return new(i||n)(k(Na),k(bi),k(So),k(To),k(Nc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-manage-patients"]],standalone:!0,features:[Fe],decls:41,vars:10,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-patient",1,"btn","btn-create"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[3,"submit"],["type","text","placeholder","Search Allergies","name","allergySearch",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-search"],[1,"allergies-list"],[4,"ngIf"],["type","text","placeholder","Search Medical Conditions","name","medicalConditionSearch",3,"ngModelChange","ngModel"],[1,"conditions-list"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),y(5," Create Patient "),g(),p(6,"h2",4),y(7,"Patients Manager"),g(),p(8,"div",5)(9,"form",6),ee("submit",function(s){return r.applyFilters(s)}),p(10,"input",7),Ue("ngModelChange",function(s){return Ve(r.filters.firstName,s)||(r.filters.firstName=s),s}),g(),p(11,"input",8),Ue("ngModelChange",function(s){return Ve(r.filters.lastName,s)||(r.filters.lastName=s),s}),g(),p(12,"input",9),Ue("ngModelChange",function(s){return Ve(r.filters.fullName,s)||(r.filters.fullName=s),s}),g(),p(13,"input",10),Ue("ngModelChange",function(s){return Ve(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),g(),p(14,"input",11),Ue("ngModelChange",function(s){return Ve(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),g(),p(15,"select",12),Ue("ngModelChange",function(s){return Ve(r.filters.gender,s)||(r.filters.gender=s),s}),p(16,"option",13),y(17,"Select Gender"),g(),p(18,"option",14),y(19,"Male"),g(),p(20,"option",15),y(21,"Female"),g()(),p(22,"input",16),Ue("ngModelChange",function(s){return Ve(r.filters.email,s)||(r.filters.email=s),s}),g(),p(23,"input",17),Ue("ngModelChange",function(s){return Ve(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),g(),p(24,"button",18),y(25,"Apply Filters"),g(),p(26,"button",19),ee("click",function(){return r.clearFilters()}),y(27," Clear Filters "),g()(),p(28,"div",20)(29,"table",21)(30,"thead")(31,"tr")(32,"th"),y(33,"Medical Record Number"),g(),p(34,"th"),y(35,"Name"),g(),p(36,"th"),y(37,"Actions"),g()()(),p(38,"tbody"),ue(39,pae,12,5,"tr",22),g()()()()(),ue(40,yae,84,17,"div",23),g()()),i&2&&(T(10),Le("ngModel",r.filters.firstName),T(),Le("ngModel",r.filters.lastName),T(),Le("ngModel",r.filters.fullName),T(),Le("ngModel",r.filters.dateOfBirth),T(),Le("ngModel",r.filters.medicalRecordNumber),T(),Le("ngModel",r.filters.gender),T(7),Le("ngModel",r.filters.email),T(),Le("ngModel",r.filters.phoneNumber),T(16),z("ngForOf",r.patients),T(),z("ngIf",r.selectedPatient))},dependencies:[Rt,st,xn,zt,vt,Ut,Oi,Ai,Ct,Wi,St,Lt,Tu,Tn,Hn,bt,At],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;height:900px;background-color:#f9f9f9;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:500px;height:900px;background-color:#fff;max-width:500px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{max-width:500px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]})}}return n})();var CV=(()=>{class n{constructor(e,i,r){this.patientService=e,this.router=i,this.panelService=r,this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.showMedicalHistoryModal=!1}ngOnInit(){console.log("CreatePatientComponent initialized"),this.panelService.setPanelId("panel-admin")}createPatient(e){e.preventDefault(),this.patientService.createPatient(this.newPatient).subscribe(i=>{console.log("Patient created:",i),this.clearForm(),alert("Patient created successfully"),this.router.navigate(["/patients"])},i=>{console.error("Error creating patient",i),alert("Error creating patient")})}clearForm(){this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""}}static{this.\u0275fac=function(i){return new(i||n)(k(Na),k(ct),k(bi))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-patient"]],standalone:!0,features:[Fe],decls:28,vars:8,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}","required","",3,"ngModelChange","ngModel"],["name","genderOptions","required","",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","0"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),y(5," Go Back "),g(),p(6,"h2",4),y(7,"Create Patient"),g(),p(8,"div",5)(9,"form",6),ee("submit",function(s){return r.createPatient(s)}),p(10,"input",7),Ue("ngModelChange",function(s){return Ve(r.newPatient.firstName,s)||(r.newPatient.firstName=s),s}),g(),p(11,"input",8),Ue("ngModelChange",function(s){return Ve(r.newPatient.lastName,s)||(r.newPatient.lastName=s),s}),g(),p(12,"input",9),Ue("ngModelChange",function(s){return Ve(r.newPatient.fullName,s)||(r.newPatient.fullName=s),s}),g(),p(13,"input",10),Ue("ngModelChange",function(s){return Ve(r.newPatient.dateOfBirth,s)||(r.newPatient.dateOfBirth=s),s}),g(),p(14,"select",11),Ue("ngModelChange",function(s){return Ve(r.newPatient.genderOptions,s)||(r.newPatient.genderOptions=s),s}),p(15,"option",12),y(16,"Select Gender"),g(),p(17,"option",13),y(18,"Male"),g(),p(19,"option",14),y(20,"Female"),g()(),p(21,"input",15),Ue("ngModelChange",function(s){return Ve(r.newPatient.email,s)||(r.newPatient.email=s),s}),g(),p(22,"input",16),Ue("ngModelChange",function(s){return Ve(r.newPatient.phoneNumber,s)||(r.newPatient.phoneNumber=s),s}),g(),p(23,"input",17),Ue("ngModelChange",function(s){return Ve(r.newPatient.emergencyContact,s)||(r.newPatient.emergencyContact=s),s}),g(),p(24,"button",18),y(25,"Create Patient"),g(),p(26,"button",19),ee("click",function(){return r.clearForm()}),y(27," Clear Form "),g()()()()()()),i&2&&(T(10),Le("ngModel",r.newPatient.firstName),T(),Le("ngModel",r.newPatient.lastName),T(),Le("ngModel",r.newPatient.fullName),T(),Le("ngModel",r.newPatient.dateOfBirth),T(),Le("ngModel",r.newPatient.genderOptions),T(7),Le("ngModel",r.newPatient.email),T(),Le("ngModel",r.newPatient.phoneNumber),T(),Le("ngModel",r.newPatient.emergencyContact))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,sn,Tu,Tn,Hn,Rt,bt,At,wa,st],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var MV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}activateAccount(e){return localStorage.removeItem("authToken"),this.http.post(`${this.apiUrl}/ActivatePatientUser?token=${e}`,{},{observe:"response"}).pipe(un(i=>(console.error("Error activating account:",i),En(i))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var wV=(()=>{class n{constructor(e,i){this.activateUserService=e,this.router=i}ngOnInit(){}onActivate(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.activateUserService.activateAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully activated.")},r=>{console.error("Account activation failed",r),alert("Account activation failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account activation failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account activation cancelled.")}static{this.\u0275fac=function(i){return new(i||n)(k(MV),k(ct))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-activate-patient-user"]],standalone:!0,features:[Fe],decls:8,vars:0,consts:[[1,"activate-user-container"],[1,"activate-user-box"],[1,"activate-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"p"),y(3,"Are you sure you want to activate your account?"),g(),p(4,"button",2),ee("click",function(){return r.onActivate()}),y(5,"Activate"),g(),p(6,"button",3),ee("click",function(){return r.onCancel()}),y(7,"Cancel"),g()()())},styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.activate-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.activate-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.activate-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.activate-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-button[_ngcontent-%COMP%]:hover{background-color:#218838}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function bae(n,t){if(n&1&&(p(0,"div")(1,"p")(2,"strong"),y(3,"New Phone Number:"),g(),y(4),g()()),n&2){let e=X(2);T(4),Et(" ",e.phoneNumber,"")}}function Cae(n,t){if(n&1&&(p(0,"div")(1,"p")(2,"strong"),y(3,"New Email:"),g(),y(4),g()()),n&2){let e=X(2);T(4),Et(" ",e.email,"")}}function Mae(n,t){if(n&1&&(p(0,"div",7),ue(1,bae,5,1,"div",8)(2,Cae,5,1,"div",8),g()),n&2){let e=X();T(),z("ngIf",e.phoneNumber),T(),z("ngIf",e.email)}}function wae(n,t){if(n&1&&(p(0,"div",9),y(1),g()),n&2){let e=X();T(),Et(" ",e.errorMessage," ")}}function Eae(n,t){if(n&1){let e=Xe();p(0,"button",10),ee("click",function(){me(e);let r=X();return ge(r.updateContactInfo())}),y(1,"Confirm"),g()}}function Sae(n,t){if(n&1){let e=Xe();p(0,"div",11),ne(1,"img",12),p(2,"p"),y(3,"Updates confirmed successfully!"),g(),p(4,"button",13),ee("click",function(){me(e);let r=X();return ge(r.goToHome())}),y(5,"Go to Home"),g()()}}var EV=(()=>{class n{constructor(e,i,r){this.route=e,this.router=i,this.staffService=r,this.errorMessage="",this.token="",this.phoneNumber="",this.email="",this.updateSuccessful=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.phoneNumber=e.phoneNumber||"",this.email=e.email||"",this.token=e.token||""})}updateContactInfo(){let e={token:this.token,phoneNumber:this.phoneNumber,email:this.email};this.staffService.confirmUpdates(e).subscribe({next:i=>{console.log("Updates confirmed",i),this.updateSuccessful=!0},error:i=>{this.updateSuccessful=!1,console.error("Error confirming updates",i),this.errorMessage="Failed to confirm updates"}})}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)(k(tr),k(ct),k(ir))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-confirm-updates-staff"]],standalone:!0,features:[Fe],decls:9,vars:4,consts:[[1,"confirm-updates-container"],[1,"confirm-updates-middle"],[1,"top"],["class","info-container",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit","class","btn btn-filter",3,"click",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container"],[4,"ngIf"],[1,"error-message"],["type","submit",1,"btn","btn-filter",3,"click"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),y(4,"Confirm Contact Information"),g()(),ue(5,Mae,3,2,"div",3)(6,wae,2,1,"div",4)(7,Eae,2,0,"button",5)(8,Sae,6,0,"div",6),g()()),i&2&&(T(5),z("ngIf",!r.updateSuccessful),T(),z("ngIf",r.errorMessage),T(),z("ngIf",!r.updateSuccessful),T(),z("ngIf",r.updateSuccessful))},dependencies:[st,zt],styles:[".confirm-updates-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.confirm-updates-container[_ngcontent-%COMP%]   .confirm-updates-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.confirm-updates-container[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:small}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.confirm-updates-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var SV=(()=>{class n{constructor(e,i,r,o,s,a){this.patientService=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.medicalHistoryService=a,this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.getPatient()}getPatient(){let e=this.extractMedicalRecordNumberFromUrl();this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.existingPatient=i[0],console.log("Patient fetched:",i)},i=>{console.error("Error fetching patient",i)})}updatePatientDetails(e){e.preventDefault();let i=this.extractMedicalRecordNumberFromUrl();this.patientService.updatePatient(i,this.existingPatient).subscribe(r=>{console.log("Patient updated successfully:",r),alert("Patient updated successfully!"),this.router.navigate(["/manage-patients"])},r=>{console.error("Error updating patient:",r),alert("Error updating patient"+r)})}extractMedicalRecordNumberFromUrl(){let e=window.location.href,i=/\/update-patient\/(\d+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Medical record number not found in URL.")}clearForm(){this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}static{this.\u0275fac=function(i){return new(i||n)(k(Na),k(ct),k(bi),k(So),k(To),k(Nc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-patient"]],standalone:!0,features:[Fe],decls:20,vars:6,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),y(5," Go Back "),g(),p(6,"h2",4),y(7,"Update Patient"),g(),p(8,"div",5)(9,"form",6),ee("submit",function(s){return r.updatePatientDetails(s)}),p(10,"input",7),Ue("ngModelChange",function(s){return Ve(r.existingPatient.firstName,s)||(r.existingPatient.firstName=s),s}),g(),p(11,"input",8),Ue("ngModelChange",function(s){return Ve(r.existingPatient.lastName,s)||(r.existingPatient.lastName=s),s}),g(),p(12,"input",9),Ue("ngModelChange",function(s){return Ve(r.existingPatient.fullName,s)||(r.existingPatient.fullName=s),s}),g(),p(13,"input",10),Ue("ngModelChange",function(s){return Ve(r.existingPatient.email,s)||(r.existingPatient.email=s),s}),g(),p(14,"input",11),Ue("ngModelChange",function(s){return Ve(r.existingPatient.phoneNumber,s)||(r.existingPatient.phoneNumber=s),s}),g(),p(15,"input",12),Ue("ngModelChange",function(s){return Ve(r.existingPatient.emergencyContact,s)||(r.existingPatient.emergencyContact=s),s}),g(),p(16,"button",13),y(17,"Update Patient"),g(),p(18,"button",14),ee("click",function(){return r.clearForm()}),y(19," Clear Form "),g()()()()()()),i&2&&(T(10),Le("ngModel",r.existingPatient.firstName),T(),Le("ngModel",r.existingPatient.lastName),T(),Le("ngModel",r.existingPatient.fullName),T(),Le("ngModel",r.existingPatient.email),T(),Le("ngModel",r.existingPatient.phoneNumber),T(),Le("ngModel",r.existingPatient.emergencyContact))},dependencies:[vt,Ut,Ct,St,Lt,sn,Tn,Hn,Rt,bt,At,st],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:90vh;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Tae=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return(this.getStyle(t,"position")||"static")==="static"},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){e===void 0&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if(this.getStyle(t,"position")==="fixed")i=t.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var o=this.offsetParent(t);i=this.offset(t,!1),o!==document.documentElement&&(r=this.offset(o,!1)),r.top+=o.clientTop,r.left+=o.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){e===void 0&&(e=!0);var i=t.getBoundingClientRect(),r={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft},o={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r.top,bottom:i.bottom+r.top,left:i.left+r.left,right:i.right+r.left};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o},n.prototype.positionElements=function(t,e,i,r){var o=i.split("-"),s=o[0],a=s===void 0?"top":s,c=o[1],d=c===void 0?"center":c,f=r?this.offset(t,!1):this.position(t,!1),h=this.getAllStyles(e),v=parseFloat(h.marginTop),_=parseFloat(h.marginBottom),C=parseFloat(h.marginLeft),w=parseFloat(h.marginRight),b=0,x=0;switch(a){case"top":b=f.top-(e.offsetHeight+v+_);break;case"bottom":b=f.top+f.height;break;case"left":x=f.left-(e.offsetWidth+C+w);break;case"right":x=f.left+f.width;break}switch(d){case"top":b=f.top;break;case"bottom":b=f.top+f.height-e.offsetHeight;break;case"left":x=f.left;break;case"right":x=f.left+f.width-e.offsetWidth;break;case"center":a==="top"||a==="bottom"?x=f.left+f.width/2-e.offsetWidth/2:b=f.top+f.height/2-e.offsetHeight/2;break}e.style.transform="translate("+Math.round(x)+"px, "+Math.round(b)+"px)";var D=e.getBoundingClientRect(),S=document.documentElement,P=window.innerHeight||S.clientHeight,W=window.innerWidth||S.clientWidth;return D.left>=0&&D.top>=0&&D.right<=W&&D.bottom<=P},n}();var Pae=/\s+/,TV=new Tae;function BP(n,t,e,i,r){var o=Array.isArray(e)?e:e.split(Pae),s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,c=function(b){var x=b.split("-"),D=x[0],S=x[1],P=[];return r&&(P.push(r+"-"+D),S&&P.push(r+"-"+D+"-"+S),P.forEach(function(W){a.add(W)})),P};r&&s.forEach(function(b){a.remove(r+"-"+b)});var d=o.findIndex(function(b){return b==="auto"});d>=0&&s.forEach(function(b){o.find(function(x){return x.search("^"+b)!==-1})==null&&o.splice(d++,1,b)});var f=t.style;f.position="absolute",f.top="0",f.left="0",f["will-change"]="transform";for(var h,v=!1,_=0,C=o;_<C.length;_++){h=C[_];var w=c(h);if(TV.positionElements(n,t,h,i)){v=!0;break}r&&w.forEach(function(b){a.remove(b)})}return v||(h=o[0],c(h),TV.positionElements(n,t,h,i)),h}var oa=function(){return oa=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oa.apply(this,arguments)},zP=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,o;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))},dx=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(dx||{}),Dae=[dx.SUNDAY,dx.SATURDAY],HP=7,WP=24,cx=60,Fc=60*60*24;function PV(n,t){var e=t.startDate,i=t.seconds,r=t.excluded,o=t.precision;if(r.length<1)return 0;for(var s=n.addSeconds,a=n.getDay,c=n.addDays,d=s(e,i-1),f=a(e),h=a(d),v=0,_=e,C=function(){var w=a(_);r.some(function(b){return b===w})&&(v+=Oae(n,{dayStart:f,dayEnd:h,day:w,precision:o,startDate:e,endDate:d})),_=c(_,1)};_<d;)C();return v}function Oae(n,t){var e=t.precision,i=t.day,r=t.dayStart,o=t.dayEnd,s=t.startDate,a=t.endDate,c=n.differenceInSeconds,d=n.endOfDay,f=n.startOfDay;if(e==="minutes"){if(i===r)return c(d(s),s)+1;if(i===o)return c(a,f(a))+1}return Fc}function Aae(n,t){var e=t.event,i=t.offset,r=t.startOfWeekDate,o=t.excluded,s=t.precision,a=t.totalDaysInView,c=n.max,d=n.differenceInSeconds,f=n.addDays,h=n.endOfDay,v=n.differenceInDays,_=Fc,C=c([e.start,r]);if(e.end)switch(s){case"minutes":_=d(e.end,C);break;default:_=v(f(h(e.end),1),C)*Fc;break}var w=i*Fc,b=w+_,x=a*Fc;return b>x&&(_=x-w),_-=PV(n,{startDate:C,seconds:_,excluded:o,precision:s}),_/Fc}function Iae(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,o=t.precision,s=n.differenceInDays,a=n.startOfDay,c=n.differenceInSeconds;if(e.start<i)return 0;var d=0;switch(o){case"days":d=s(a(e.start),i)*Fc;break;case"minutes":d=c(e.start,i);break}return d-=PV(n,{startDate:i,seconds:d,excluded:r,precision:o}),Math.abs(d/Fc)}function Rae(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,o=n.isSameSecond,s=e.start,a=e.end||e.start;return!!(s>i&&s<r||a>i&&a<r||s<i&&a>r||o(s,i)||o(s,r)||o(a,i)||o(a,r))}function km(n,t){var e=t.events,i=t.periodStart,r=t.periodEnd;return e.filter(function(o){return Rae(n,{event:o,periodStart:i,periodEnd:r})})}function DV(n,t){var e=t.date,i=t.weekendDays,r=i===void 0?Dae:i,o=n.startOfDay,s=n.isSameDay,a=n.getDay,c=o(new Date),d=a(e);return{date:e,day:d,isPast:e<c,isToday:s(e,c),isFuture:e>c,isWeekend:r.indexOf(d)>-1}}function px(n,t){for(var e=t.viewDate,i=t.weekStartsOn,r=t.excluded,o=r===void 0?[]:r,s=t.weekendDays,a=t.viewStart,c=a===void 0?n.startOfWeek(e,{weekStartsOn:i}):a,d=t.viewEnd,f=d===void 0?n.addDays(c,HP):d,h=n.addDays,v=n.getDay,_=[],C=c;C<f;)o.some(function(w){return v(C)===w})||_.push(DV(n,{date:C,weekendDays:s})),C=h(C,1);return _}function Nae(n,t){for(var e=t.date1,i=t.date2,r=t.excluded,o=e,s=0;o<i;)r.indexOf(n.getDay(o))===-1&&s++,o=n.addDays(o,1);return s}function Fae(n,t){var e=t.events,i=e===void 0?[]:e,r=t.excluded,o=r===void 0?[]:r,s=t.precision,a=s===void 0?"days":s,c=t.absolutePositionedEvents,d=c===void 0?!1:c,f=t.viewStart,h=t.viewEnd;f=n.startOfDay(f),h=n.endOfDay(h);var v=n.differenceInSeconds,_=n.differenceInDays,C=Nae(n,{date1:f,date2:h,excluded:o}),w=_(h,f)+1,b=i.filter(function(S){return S.allDay}).map(function(S){var P=Iae(n,{event:S,startOfWeek:f,excluded:o,precision:a}),W=Aae(n,{event:S,offset:P,startOfWeekDate:f,excluded:o,precision:a,totalDaysInView:w});return{event:S,offset:P,span:W}}).filter(function(S){return S.offset<C}).filter(function(S){return S.span>0}).map(function(S){return{event:S.event,offset:S.offset,span:S.span,startsBeforeWeek:S.event.start<f,endsAfterWeek:(S.event.end||S.event.start)>h}}).sort(function(S,P){var W=v(S.event.start,P.event.start);return W===0?v(P.event.end||P.event.start,S.event.end||S.event.start):W}),x=[],D=[];return b.forEach(function(S,P){if(D.indexOf(S)===-1){D.push(S);var W=S.span+S.offset,V=b.slice(P+1).filter(function(F){if(F.offset>=W&&W+F.span<=w&&D.indexOf(F)===-1){var I=F.offset-W;return d||(F.offset=I),W+=F.span+I,D.push(F),!0}}),H=zP([S],V,!0),$=H.filter(function(F){return F.event.id}).map(function(F){return F.event.id}).join("-");x.push(oa({row:H},$?{id:$}:{}))}}),x}function kae(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.hourDuration,s=t.dayStart,a=t.dayEnd,c=t.weekStartsOn,d=t.excluded,f=t.weekendDays,h=t.segmentHeight,v=t.viewStart,_=t.viewEnd,C=t.minimumEventHeight,w=Uae(n,{viewDate:i,hourSegments:r,hourDuration:o,dayStart:s,dayEnd:a}),b=px(n,{viewDate:i,weekStartsOn:c,excluded:d,weekendDays:f,viewStart:v,viewEnd:_}),x=n.setHours,D=n.setMinutes,S=n.getHours,P=n.getMinutes;return b.map(function(W){var V=Lae(n,{events:e,viewDate:W.date,hourSegments:r,dayStart:s,dayEnd:a,segmentHeight:h,eventWidth:1,hourDuration:o,minimumEventHeight:C}),H=w.map(function(I){var U=I.segments.map(function(q){var ie=D(x(W.date,S(q.date)),P(q.date));return oa(oa({},q),{date:ie})});return oa(oa({},I),{segments:U})});function $(I,U){var q=Math.max.apply(Math,U.map(function(oe){return oe.left+1})),ie=I.filter(function(oe){return oe.left>=q}).filter(function(oe){return ux(U,oe.top,oe.top+oe.height).length>0});return ie.length>0?$(I,ie):q}var F=V.events.map(function(I){var U=$(V.events,ux(V.events,I.top,I.top+I.height)),q=100/U;return oa(oa({},I),{left:I.left*q,width:q})});return{hours:H,date:W.date,events:F.map(function(I){var U=ux(F.filter(function(q){return q.left>I.left}),I.top,I.top+I.height);return U.length>0?oa(oa({},I),{width:Math.min.apply(Math,U.map(function(q){return q.left}))-I.left}):I})}})}function OV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,c=t.precision,d=c===void 0?"days":c,f=t.absolutePositionedEvents,h=f===void 0?!1:f,v=t.hourSegments,_=t.hourDuration,C=t.dayStart,w=t.dayEnd,b=t.weekendDays,x=t.segmentHeight,D=t.minimumEventHeight,S=t.viewStart,P=S===void 0?n.startOfWeek(r,{weekStartsOn:o}):S,W=t.viewEnd,V=W===void 0?n.endOfWeek(r,{weekStartsOn:o}):W;i||(i=[]);var H=n.startOfDay,$=n.endOfDay;P=H(P),V=$(V);var F=km(n,{events:i,periodStart:P,periodEnd:V}),I=px(n,{viewDate:r,weekStartsOn:o,excluded:a,weekendDays:b,viewStart:P,viewEnd:V});return{allDayEventRows:Fae(n,{events:F,excluded:a,precision:d,absolutePositionedEvents:h,viewStart:P,viewEnd:V}),period:{events:F,start:I[0].date,end:$(I[I.length-1].date)},hourColumns:kae(n,{events:i,viewDate:r,hourSegments:v,hourDuration:_,dayStart:C,dayEnd:w,weekStartsOn:o,excluded:a,weekendDays:b,segmentHeight:x,viewStart:P,viewEnd:V,minimumEventHeight:D})}}function AV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,c=t.viewStart,d=c===void 0?n.startOfMonth(r):c,f=t.viewEnd,h=f===void 0?n.endOfMonth(r):f,v=t.weekendDays;i||(i=[]);for(var _=n.startOfWeek,C=n.endOfWeek,w=n.differenceInDays,b=n.startOfDay,x=n.addHours,D=n.endOfDay,S=n.isSameMonth,P=n.getDay,W=_(d,{weekStartsOn:o}),V=C(h,{weekStartsOn:o}),H=km(n,{events:i,periodStart:W,periodEnd:V}),$=[],F,I=function(ce){var De;if(F?(De=b(x(F,WP)),F.getTime()===De.getTime()&&(De=b(x(F,WP+1))),F=De):De=F=W,!a.some(function(Jt){return P(De)===Jt})){var $e=DV(n,{date:De,weekendDays:v}),Qe=km(n,{events:H,periodStart:b(De),periodEnd:D(De)});$e.inMonth=S(De,r),$e.events=Qe,$e.badgeTotal=Qe.length,$.push($e)}},U=0;U<w(V,W)+1;U++)I(U);var q=[],ie=HP-a.length;if(ie<HP)for(var U=0;U<$.length;U+=ie){var oe=$.slice(U,U+ie),pe=oe.some(function(De){return d<=De.date&&De.date<h});pe&&(q=zP(zP([],q,!0),oe,!0))}else q=$;for(var fe=Math.floor(q.length/ie),Te=[],U=0;U<fe;U++)Te.push(U*ie);return{rowOffsets:Te,totalDaysVisibleInWeek:ie,days:q,period:{start:q[0].date,end:D(q[q.length-1].date),events:H}}}function ux(n,t,e){return n.filter(function(i){var r=i.top,o=i.top+i.height;return t<o&&o<e||t<r&&r<e?!0:r<=t&&e<=o})}function Lae(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.dayStart,s=t.dayEnd,a=t.eventWidth,c=t.segmentHeight,d=t.hourDuration,f=t.minimumEventHeight,h=n.setMinutes,v=n.setHours,_=n.startOfDay,C=n.startOfMinute,w=n.endOfDay,b=n.differenceInMinutes,x=h(v(_(i),fx(o.hour)),hx(o.minute)),D=h(v(C(w(i)),fx(s.hour)),hx(s.minute));D.setSeconds(59,999);var S=[],P=km(n,{events:e.filter(function($){return!$.allDay}),periodStart:x,periodEnd:D}),W=P.sort(function($,F){return $.start.valueOf()-F.start.valueOf()}).map(function($){var F=$.start,I=$.end||F,U=F<x,q=I>D,ie=r*c/(d||cx),oe=0;if(F>x){var pe=n.getTimezoneOffset(F),fe=n.getTimezoneOffset(x),Te=fe-pe;oe+=b(F,x)+Te}oe*=ie,oe=Math.floor(oe);var ce=U?x:F,De=q?D:I,$e=n.getTimezoneOffset(ce)-n.getTimezoneOffset(De),Qe=b(De,ce)+$e;$.end?Qe*=ie:Qe=c,f&&Qe<f&&(Qe=f),Qe=Math.floor(Qe);for(var Jt=oe+Qe,Dn=ux(S,oe,Jt),ve=0;Dn.some(function(rt){return rt.left===ve});)ve+=a;var Ne={event:$,height:Qe,width:a,top:oe,left:ve,startsBeforeDay:U,endsAfterDay:q};return S.push(Ne),Ne}),V=Math.max.apply(Math,W.map(function($){return $.left+$.width})),H=km(n,{events:e.filter(function($){return $.allDay}),periodStart:_(x),periodEnd:w(D)});return{events:W,width:V,allDayEvents:H,period:{events:P,start:x,end:D}}}function fx(n){return Math.max(Math.min(23,n),0)}function hx(n){return Math.max(Math.min(59,n),0)}function Uae(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,o=t.dayStart,s=t.dayEnd,a=n.setMinutes,c=n.setHours,d=n.startOfDay,f=n.startOfMinute,h=n.endOfDay,v=n.addMinutes,_=n.addDays,C=[],w=a(c(d(e),fx(o.hour)),hx(o.minute)),b=a(c(f(h(e)),fx(s.hour)),hx(s.minute)),x=(r||cx)/i,D=d(e),S=h(e),P=function(I){return I};n.getTimezoneOffset(D)!==n.getTimezoneOffset(S)&&(D=_(D,1),w=_(w,1),b=_(b,1),P=function(I){return _(I,-1)});for(var W=r?WP*60/r:cx,V=0;V<W;V++){for(var H=[],$=0;$<i;$++){var F=v(v(w,V*(r||cx)),$*x);F>=w&&F<b&&H.push({date:P(F),displayDate:F,isStart:$===0})}H.length>0&&C.push({segments:H})}return C}var dh=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(dh||{});function IV(n,t){var e=!0;function i(r,o){t(r,o),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(dh.StartPropertyNotDate,r):i(dh.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(dh.EndPropertyNotDate,r),r.start>r.end&&i(dh.EndsBeforeStart,r))}),e):(t(dh.NotArray,n),!1)}function Vae(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}function qP(n,t){return n=Vae(n,t),typeof n=="function"?function(){for(var i=arguments,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=i[s];return!!n.apply(this,o)}:n?function(){return!0}:function(){return!1}}var jP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol?"symbol":typeof n},NV=function(n){return n!=null&&(typeof n>"u"?"undefined":jP(n))==="object"&&n.nodeType===1&&jP(n.style)==="object"&&jP(n.ownerDocument)==="object"};function FV(n,t){if(t=ZP(t,!0),!NV(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function YP(n,t){return FV(n,t)!==-1}function Bae(n,t){for(var e=0;e<t.length;e++)YP(n,t[e])||n.push(t[e]);return t}function zae(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e=e.map(ZP),Bae(n,e)}function Hae(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(ZP).reduce(function(r,o){var s=FV(n,o);return s!==-1?r.concat(n.splice(s,1)):r},[])}function ZP(n,t){if(typeof n=="string")try{return document.querySelector(n)}catch(e){throw e}if(!NV(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function Wae(n,t){t=t||{};var e=qP(t.allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,!!e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(r.pageX===null&&r.clientX!==null){var o=r.target&&r.target.ownerDocument||document,s=o.documentElement,a=o.body;n.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}function jae(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}function kV(n){if(n===window)return jae();try{var t=n.getBoundingClientRect();return t.x===void 0&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}function Gae(n,t){var e=kV(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}var XP=void 0;typeof Object.create!="function"?XP=function(n){var t=function(){};return function(e,i){if(e!==Object(e)&&e!==null)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,i!==n&&Object.defineProperties(r,i),e===null&&(r.__proto__=null),r}}():XP=Object.create;var $ae=XP,Zu=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function qae(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};n!==void 0&&n.addEventListener("mousemove",e);function e(o){for(var s=0;s<Zu.length;s++)t[Zu[s]]=o[Zu[s]]}var i=function(){if(MouseEvent)return function(s,a,c){var d=new MouseEvent("mousemove",GP(t,a));return $P(d,c),s.dispatchEvent(d)};if(typeof document.createEvent=="function")return function(s,a,c){var d=GP(t,a),f=document.createEvent("MouseEvents");return f.initMouseEvent("mousemove",!0,!0,window,0,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget),$P(f,c),s.dispatchEvent(f)};if(typeof document.createEventObject=="function")return function(s,a,c){var d=document.createEventObject(),f=GP(t,a);for(var h in f)d[h]=f[h];return $P(d,c),s.dispatchEvent(d)}}();function r(){n&&n.removeEventListener("mousemove",e,!1),t=null}return{destroy:r,dispatch:i}}function GP(n,t){t=t||{};for(var e=$ae(n),i=0;i<Zu.length;i++)t[Zu[i]]!==void 0&&(e[Zu[i]]=t[Zu[i]]);return e}function $P(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var Um=["webkit","moz","ms","o"],Lm=function(){if(typeof window>"u")return function(){};for(var n=0,t=Um.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Um[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=new Date().getTime(),o=Math.max(0,16-r-e),s=window.setTimeout(function(){return i(r+o)},o);return e=r+o,s}}return window.requestAnimationFrame.bind(window)}(),fh=function(){if(typeof window>"u")return function(){};for(var n=0,t=Um.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Um[n]+"CancelAnimationFrame"]||window[Um[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function Yae(n,t){t===void 0&&(t={});var e=this,i=4,r=!1;if(typeof t.margin!="object"){var o=t.margin||-1;this.margin={left:o,right:o,top:o,bottom:o}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var s={},a=Wae(s),c=qae(),d=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),typeof i!="object"&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=qP(t.autoScroll),this.syncMove=qP(t.syncMove,!1),this.destroy=function(U){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",w,!1),window.removeEventListener("touchstart",w,!1),window.removeEventListener("mouseup",b,!1),window.removeEventListener("touchend",b,!1),window.removeEventListener("pointerup",b,!1),window.removeEventListener("mouseleave",D,!1),window.removeEventListener("mousemove",W,!1),window.removeEventListener("touchmove",W,!1),window.removeEventListener("scroll",C,!0),n=[],U&&x()},this.add=function(){for(var U=[],q=arguments.length;q--;)U[q]=arguments[q];return zae.apply(void 0,[n].concat(U)),this},this.remove=function(){for(var U=[],q=arguments.length;q--;)U[q]=arguments[q];return Hae.apply(void 0,[n].concat(U))};var f=null,h;Object.prototype.toString.call(n)!=="[object Array]"&&(n=[n]),function(U){n=[],U.forEach(function(q){q===window?f=window:e.add(q)})}(n),Object.defineProperties(this,{down:{get:function(){return d}},maxSpeed:{get:function(){return i}},point:{get:function(){return s}},scrolling:{get:function(){return r}}});var v=null,_;window.addEventListener("mousedown",w,!1),window.addEventListener("touchstart",w,!1),window.addEventListener("mouseup",b,!1),window.addEventListener("touchend",b,!1),window.addEventListener("pointerup",b,!1),window.addEventListener("mousemove",W,!1),window.addEventListener("touchmove",W,!1),window.addEventListener("mouseleave",D,!1),window.addEventListener("scroll",C,!0);function C(U){for(var q=0;q<n.length;q++)if(n[q]===U.target){r=!0;break}r&&Lm(function(){return r=!1})}function w(){d=!0}function b(){d=!1,x()}function x(){fh(_),fh(h)}function D(){d=!1}function S(U){if(!U)return null;if(v===U||YP(n,U))return U;for(;U=U.parentNode;)if(YP(n,U))return U;return null}function P(){for(var U=null,q=0;q<n.length;q++)RV(s,n[q])&&(U=n[q]);return U}function W(U){if(e.autoScroll()&&!U.dispatched){var q=U.target,ie=document.body;v&&!RV(s,v)&&(e.scrollWhenOutside||(v=null)),q&&q.parentNode===ie?q=P():(q=S(q),q||(q=P())),q&&q!==v&&(v=q),f&&(fh(h),h=Lm(V)),v&&(fh(_),_=Lm(H))}}function V(){$(f),fh(h),h=Lm(V)}function H(){v&&($(v),fh(_),_=Lm(H))}function $(U){var q=kV(U),ie,oe;s.x<q.left+e.margin.left?ie=Math.floor(Math.max(-1,(s.x-q.left)/e.margin.left-1)*e.maxSpeed.left):s.x>q.right-e.margin.right?ie=Math.ceil(Math.min(1,(s.x-q.right)/e.margin.right+1)*e.maxSpeed.right):ie=0,s.y<q.top+e.margin.top?oe=Math.floor(Math.max(-1,(s.y-q.top)/e.margin.top-1)*e.maxSpeed.top):s.y>q.bottom-e.margin.bottom?oe=Math.ceil(Math.min(1,(s.y-q.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):oe=0,e.syncMove()&&c.dispatch(U,{pageX:s.pageX+ie,pageY:s.pageY+oe,clientX:s.x+ie,clientY:s.y+oe}),setTimeout(function(){oe&&F(U,oe),ie&&I(U,ie)})}function F(U,q){U===window?window.scrollTo(U.pageXOffset,U.pageYOffset+q):U.scrollTop+=q}function I(U,q){U===window?window.scrollTo(U.pageXOffset+q,U.pageYOffset):U.scrollLeft+=q}}function Xae(n,t){return new Yae(n,t)}function RV(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:Gae(n,t)}var LV=Xae;function KP(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function mx(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}var VV=(()=>{class n{constructor(){this.currentDrag=new yn}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BV=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(k(ri))},n.\u0275dir=Gt({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),zV=(()=>{class n{constructor(e,i,r,o,s,a,c){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=o,this.vcr=s,this.scrollContainer=a,this.document=c,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new ot,this.dragStart=new ot,this.ghostElementCreated=new ot,this.dragging=new ot,this.dragEnd=new ot,this.pointerDown$=new yn,this.pointerMove$=new yn,this.pointerUp$=new yn,this.eventListenerSubscriptions={},this.destroy$=new yn,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();let e=this.pointerDown$.pipe(di(()=>this.canDrag()),ui(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();let r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText(`
          body * {
           -moz-user-select: none;
           -ms-user-select: none;
           -webkit-user-select: none;
           user-select: none;
          }
        `)),requestAnimationFrame(()=>{this.document.head.appendChild(r)});let o=this.getScrollPosition(),s=new Wt(_=>{let C=this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window";return this.renderer.listen(C,"scroll",w=>_.next(w))}).pipe(tu(o),mt(()=>this.getScrollPosition())),a=new yn,c=new qh;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});let d=os(this.pointerUp$,this.pointerDown$,c,this.destroy$).pipe(ss()),f=eu([this.pointerMove$,s]).pipe(mt(([_,C])=>({currentDrag$:a,transformX:_.clientX-i.clientX,transformY:_.clientY-i.clientY,clientX:_.clientX,clientY:_.clientY,scrollLeft:C.left,scrollTop:C.top,target:_.event.target})),mt(_=>(this.dragSnapGrid.x&&(_.transformX=Math.round(_.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(_.transformY=Math.round(_.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),_)),mt(_=>(this.dragAxis.x||(_.transformX=0),this.dragAxis.y||(_.transformY=0),_)),mt(_=>{let C=_.scrollLeft-o.left,w=_.scrollTop-o.top;return kt(Ee({},_),{x:_.transformX+C,y:_.transformY+w})}),di(({x:_,y:C,transformX:w,transformY:b})=>!this.validateDrag||this.validateDrag({x:_,y:C,transform:{x:w,y:b}})),_o(d),ss()),h=f.pipe(Nr(1),ss()),v=f.pipe(ql(1),ss());return h.subscribe(({clientX:_,clientY:C,x:w,y:b})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:c})}),this.scroller=LV([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],kt(Ee({},this.autoScroll),{autoScroll(){return!0}})),KP(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){let x=this.element.nativeElement.getBoundingClientRect(),D=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(D):this.element.nativeElement.parentNode.insertBefore(D,this.element.nativeElement.nextSibling),this.ghostElement=D,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(D,{position:"fixed",top:`${x.top}px`,left:`${x.left}px`,width:`${x.width}px`,height:`${x.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){let S=this.vcr.createEmbeddedView(this.ghostElementTemplate);D.innerHTML="",S.rootNodes.filter(P=>P instanceof Node).forEach(P=>{D.appendChild(P)}),v.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(S))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:_-w,clientY:C-b,element:D})}),v.subscribe(()=>{D.parentElement.removeChild(D),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),v.pipe(ui(_=>{let C=c.pipe(ZC(),Nr(1),mt(w=>kt(Ee({},_),{dragCancelled:w>0})));return c.complete(),C})).subscribe(({x:_,y:C,dragCancelled:w})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:_,y:C,dragCancelled:w})}),mx(this.renderer,this.element,this.dragActiveClass),a.complete()}),os(d,v).pipe(Nr(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),f}),ss());os(e.pipe(Nr(1),mt(i=>[,i])),e.pipe(Dd())).pipe(di(([i,r])=>i?i.x!==r.x||i.y!==r.y:!0),mt(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:o,clientX:s,clientY:a,transformX:c,transformY:d,target:f})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){let h=`translate3d(${c}px, ${d}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:h,"-webkit-transform":h,"-ms-transform":h,"-moz-transform":h,"-o-transform":h})}}),o.next({clientX:s,clientY:a,dropData:this.dropData,target:f})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){let e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){e.button===0&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){e.button===0&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,o;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,o=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){let s=jl(this.document,"contextmenu").subscribe(c=>{c.preventDefault()}),a=jl(this.document,"touchmove",{passive:!1}).subscribe(c=>{this.touchStartLongPress&&!r&&o&&(r=this.shouldBeginDrag(e,c,i)),(!this.touchStartLongPress||!o||r)&&(c.preventDefault(),this.pointerMove$.next({event:c,clientX:c.targetTouches[0].clientX,clientY:c.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{s.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){let o=this.getScrollPosition(),s={top:Math.abs(o.top-r.top),left:Math.abs(o.left-r.left)},a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-s.left,c=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-s.top,d=a+c,f=this.touchStartLongPress;return(d>f.delta||s.top>0||s.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=f.delay?(this.disableScroll(),!0):!1}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){let e=this.getScrollElement(),i=e.scrollWidth>e.clientWidth,r=e.scrollHeight>e.clientHeight;return i||r}}return n.\u0275fac=function(e){return new(e||n)(k(ri),k(Pi),k(VV),k(zn),k(Vo),k(BV,8),k(Zi))},n.\u0275dir=Gt({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[xr]}),n})();function UV(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}var JP=(()=>{class n{constructor(e,i,r,o,s){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=o,this.scrollContainer=s,this.dragEnter=new ot,this.dragLeave=new ot,this.dragOver=new ot,this.drop=new ot}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{KP(this.renderer,this.element,this.dragActiveClass);let i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0}),o,s=e.pipe(mt(({clientX:d,clientY:f,dropData:h,target:v})=>{o={clientX:d,clientY:f,dropData:h,target:v},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);let _=UV(d,f,i.rect),C=!this.validateDrop||this.validateDrop({clientX:d,clientY:f,target:v,dropData:h});return i.scrollContainerRect?_&&C&&UV(d,f,i.scrollContainerRect):_&&C})),a=s.pipe(JC()),c;a.pipe(di(d=>d)).subscribe(()=>{c=!0,KP(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(o)})}),s.pipe(di(d=>d)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(o)})}),a.pipe(Dd(),di(([d,f])=>d&&!f)).subscribe(()=>{c=!1,mx(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(o)})}),e.subscribe({complete:()=>{r(),mx(this.renderer,this.element,this.dragActiveClass),c&&(mx(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(o)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(k(ri),k(VV),k(zn),k(Pi),k(BV,8))},n.\u0275dir=Gt({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),Vm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({}),n})();var hh=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(hh||{});function HV(n,t){return{type:hh.Trigger,name:n,definitions:t,options:{}}}function QP(n,t=null){return{type:hh.Animate,styles:t,timings:n}}function eD(n){return{type:hh.Style,styles:n,offset:null}}function tD(n,t,e){return{type:hh.State,name:n,styles:t,options:e}}function nD(n,t,e=null){return{type:hh.Transition,expr:n,animation:t,options:e}}var Ku=typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function Kae(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),i==="canvas"?GV(n,t):(i==="input"||i==="select"||i==="textarea")&&jV(n,t),WV("canvas",n,t,GV),WV("input, textarea, select",n,t,jV),t}function WV(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var Jae=0;function jV(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Jae++}`)}function GV(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function $V(n,t,e,i){let r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}function Qae(n,t){let e=0,i=0,r=n.nativeElement.style,s=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(s&&s.includes("translate")&&(e=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),t==="absolute")return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{let a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}var qV=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function YV(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function gx({edges:n,initialRectangle:t,newRectangle:e}){let i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}var XV="resize-active",ele="resize-ghost-element",tle=50,rD=(()=>{class n{constructor(e,i,r,o){this.platformId=e,this.renderer=i,this.elm=r,this.zone=o,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=qV,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=tle,this.resizeStart=new ot,this.resizing=new ot,this.resizeEnd=new ot,this.mouseup=new yn,this.mousedown=new yn,this.mousemove=new yn,this.destroy$=new yn,this.pointerEventListeners=iD.getInstance(i,o)}ngOnInit(){let e=os(this.pointerEventListeners.pointerDown,this.mousedown),i=os(this.pointerEventListeners.pointerMove,this.mousemove).pipe(fi(({event:d})=>{o&&d.cancelable&&d.preventDefault()}),ss()),r=os(this.pointerEventListeners.pointerUp,this.mouseup),o,s=()=>{o&&o.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>Ee(Ee({},qV),this.resizeCursors);e.pipe(ui(d=>{function f(_){return{clientX:_.clientX-d.clientX,clientY:_.clientY-d.clientY}}let h=()=>{let _={x:1,y:1};return o&&(this.resizeSnapGrid.left&&o.edges.left?_.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&o.edges.right&&(_.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&o.edges.top?_.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&o.edges.bottom&&(_.y=+this.resizeSnapGrid.bottom)),_};function v(_,C){return{x:Math.ceil(_.clientX/C.x),y:Math.ceil(_.clientY/C.y)}}return os(i.pipe(Nr(1)).pipe(mt(_=>[,_])),i.pipe(Dd())).pipe(mt(([_,C])=>[_&&f(_),f(C)])).pipe(di(([_,C])=>{if(!_)return!0;let w=h(),b=v(_,w),x=v(C,w);return b.x!==x.x||b.y!==x.y})).pipe(mt(([,_])=>{let C=h();return{clientX:Math.round(_.clientX/C.x)*C.x,clientY:Math.round(_.clientY/C.y)*C.y}})).pipe(_o(os(r,e)))})).pipe(di(()=>!!o)).pipe(mt(({clientX:d,clientY:f})=>$V(o.startingRect,o.edges,d,f))).pipe(di(d=>this.allowNegativeResizes||!!(d.height&&d.width&&d.height>0&&d.width>0))).pipe(di(d=>this.validateResize?this.validateResize({rectangle:d,edges:gx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:d})}):!0),_o(this.destroy$)).subscribe(d=>{o&&o.clonedNode&&(this.renderer.setStyle(o.clonedNode,"height",`${d.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${d.width}px`),this.renderer.setStyle(o.clonedNode,"top",`${d.top}px`),this.renderer.setStyle(o.clonedNode,"left",`${d.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:gx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:d}),rectangle:d})}),o.currentRect=d}),e.pipe(mt(({edges:d})=>d||{}),di(d=>Object.keys(d).length>0),_o(this.destroy$)).subscribe(d=>{o&&s();let f=Qae(this.elm,this.ghostElementPositioning);o={edges:d,startingRect:f,currentRect:f};let h=a(),v=YV(o.edges,h);this.renderer.setStyle(document.body,"cursor",v),this.setElementClass(this.elm,XV,!0),this.enableGhostResize&&(o.clonedNode=Kae(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(o.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(o.clonedNode,"left",`${o.startingRect.left}px`),this.renderer.setStyle(o.clonedNode,"top",`${o.startingRect.top}px`),this.renderer.setStyle(o.clonedNode,"height",`${o.startingRect.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${o.startingRect.width}px`),this.renderer.setStyle(o.clonedNode,"cursor",YV(o.edges,h)),this.renderer.addClass(o.clonedNode,ele),o.clonedNode.scrollTop=o.startingRect.scrollTop,o.clonedNode.scrollLeft=o.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:gx({edges:d,initialRectangle:f,newRectangle:f}),rectangle:$V(f,{},0,0)})})}),r.pipe(_o(this.destroy$)).subscribe(()=>{o&&(this.renderer.removeClass(this.elm.nativeElement,XV),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:gx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:o.currentRect}),rectangle:o.currentRect})}),s(),o=null)})}ngOnDestroy(){rf(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)(k(kr),k(Pi),k(ri),k(zn))},n.\u0275dir=Gt({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})(),iD=class n{constructor(t,e){this.pointerDown=new Wt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ku&&(o=t.listen("document","touchstart",s=>{i.next({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,event:s})}))}),()=>{r(),Ku&&o()}}).pipe(ss()),this.pointerMove=new Wt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ku&&(o=t.listen("document","touchmove",s=>{i.next({clientX:s.targetTouches[0].clientX,clientY:s.targetTouches[0].clientY,event:s})}))}),()=>{r(),Ku&&o()}}).pipe(ss()),this.pointerUp=new Wt(i=>{let r,o,s;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),Ku&&(o=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),s=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),Ku&&(o(),s())}}).pipe(ss())}static getInstance(t,e){return n.instance||(n.instance=new n(t,e)),n.instance}},ZV=(()=>{class n{constructor(e,i,r,o){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=o,this.resizeEdges={},this.eventListeners={},this.destroy$=new yn}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Ku&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),os(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",o=>{this.onMousemove(o,o.targetTouches[0].clientX,o.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",o=>{this.onMousemove(o,o.clientX,o.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return jl(this.element.nativeElement,e).pipe(_o(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)(k(Pi),k(ri),k(zn),k(rD,8))},n.\u0275dir=Gt({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),oD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({}),n})();var ile=(n,t)=>({event:n,trackByActionId:t}),rle=n=>({action:n});function ole(n,t){if(n&1){let e=Xe();p(0,"a",5),Lr(1,"calendarA11y"),ee("mwlClick",function(r){let o=me(e).$implicit,s=X(2).event;return ge(o.onClick({event:s,sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=me(e).$implicit,s=X(2).event;return ge(o.onClick({event:s,sourceEvent:r}))}),g()}if(n&2){let e=t.$implicit;z("ngClass",e.cssClass)("innerHtml",e.label,yv),Xi("aria-label",al(1,3,_i(6,rle,e),"actionButtonLabel"))}}function sle(n,t){if(n&1&&(p(0,"span",3),ue(1,ole,2,8,"a",4),g()),n&2){let e=X(),i=e.event,r=e.trackByActionId;T(),z("ngForOf",i.actions)("ngForTrackBy",r)}}function ale(n,t){if(n&1&&ue(0,sle,2,2,"span",2),n&2){let e=t.event;z("ngIf",e.actions)}}function lle(n,t){}var cle=(n,t)=>({event:n,view:t}),vx=()=>({});function ule(n,t){if(n&1&&(ne(0,"span",2),Lr(1,"calendarEventTitle"),Lr(2,"calendarA11y")),n&2){let e=t.event,i=t.view;z("innerHTML",Jd(1,2,e.title,i,e),yv),Xi("aria-hidden",al(2,6,Hi(9,vx),"hideEventTitle"))}}function dle(n,t){}var fle=(n,t,e)=>({contents:n,placement:t,event:e});function hle(n,t){if(n&1&&(p(0,"div",2),ne(1,"div",3)(2,"div",4),g()),n&2){let e=t.contents,i=t.placement;z("ngClass","cal-tooltip-"+i),T(2),z("innerHtml",e,yv)}}function ple(n,t){}var aD=(n,t)=>({x:n,y:t}),eB=()=>({delay:300,delta:30});var mle=(n,t)=>({event:n,locale:t});var gle=(n,t,e,i,r,o)=>({days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:o});function vle(n,t){if(n&1){let e=Xe();p(0,"div",4),ee("mwlClick",function(r){let o=me(e).$implicit,s=X().dayHeaderClicked;return ge(s.emit({day:o,sourceEvent:r}))})("drop",function(r){let o=me(e).$implicit,s=X().eventDropped;return ge(s.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){let r=me(e).$implicit,o=X().dragEnter;return ge(o.emit({date:r.date}))}),p(1,"b"),y(2),Lr(3,"calendarDate"),g(),ne(4,"br"),p(5,"span"),y(6),Lr(7,"calendarDate"),g()()}if(n&2){let e=t.$implicit,i=X().locale;Co("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),z("ngClass",e.cssClass),T(2),Ie(Jd(3,11,e.date,"weekViewColumnHeader",i)),T(4),Ie(Jd(7,15,e.date,"weekViewColumnSubHeader",i))}}function _le(n,t){if(n&1&&(p(0,"div",2),ue(1,vle,8,19,"div",3),g()),n&2){let e=t.days,i=t.trackByWeekDayHeaderDate;T(),z("ngForOf",e)("ngForTrackBy",i)}}function yle(n,t){}var xle=(n,t,e,i,r,o,s,a,c)=>({weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:o,tooltipDelay:s,column:a,daysInWeek:c}),ble=(n,t,e)=>({color:n,backgroundColor:t,borderColor:e});function Cle(n,t){if(n&1){let e=Xe();p(0,"div",2),Lr(1,"calendarEventTitle"),Lr(2,"calendarA11y"),ee("mwlClick",function(r){let o=me(e).eventClicked;return ge(o.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=me(e).eventClicked;return ge(o.emit({sourceEvent:r}))}),ne(3,"mwl-calendar-event-actions",3),y(4," "),ne(5,"mwl-calendar-event-title",4),g()}if(n&2){let e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,o=t.tooltipAppendToBody,s=t.tooltipDisabled,a=t.tooltipDelay,c=t.daysInWeek,d=X();z("ngStyle",h1(20,ble,e.event.color==null?null:e.event.color.secondaryText,e.event.color==null?null:e.event.color.secondary,e.event.color==null?null:e.event.color.primary))("mwlCalendarTooltip",s?"":Jd(1,13,e.event.title,c===1?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",o)("tooltipDelay",a),Xi("aria-label",al(2,17,ya(24,mle,e.tempEvent||e.event,d.locale),"eventDescription")),T(3),z("event",e.tempEvent||e.event)("customTemplate",d.eventActionsTemplate),T(2),z("event",e.tempEvent||e.event)("customTemplate",d.eventTitleTemplate)("view",c===1?"day":"week")}}function Mle(n,t){}var wle=(n,t,e,i,r)=>({segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r});function Ele(n,t){if(n&1&&(p(0,"div",4),y(1),Lr(2,"calendarDate"),g()),n&2){let e=X(),i=e.segment,r=e.locale,o=e.daysInWeek;T(),Et(" ",Jd(2,1,i.displayDate,o===1?"dayViewHour":"weekViewHour",r)," ")}}function Sle(n,t){if(n&1&&(p(0,"div",2),Lr(1,"calendarA11y"),ue(2,Ele,3,5,"div",3),g()),n&2){let e=t.segment,i=t.segmentHeight,r=t.isTimeLabel,o=t.daysInWeek;sl("height",i,"px"),Co("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),z("ngClass",e.cssClass),Xi("aria-hidden",al(1,9,Hi(12,vx),o===1?"hideDayHourSegment":"hideWeekHourSegment")),T(2),z("ngIf",r)}}function Tle(n,t){}var Ple=(n,t,e,i,r,o,s)=>({columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:o,topPx:s});function Dle(n,t){if(n&1&&ne(0,"div",3),n&2){let e=X().topPx;sl("top",e,"px")}}function Ole(n,t){if(n&1&&ue(0,Dle,1,2,"div",2),n&2){let e=t.isVisible;z("ngIf",e)}}function Ale(n,t){}var Ile=(n,t)=>({left:n,right:t}),tB=(n,t)=>({event:n,calendarId:t}),Rle=n=>({x:n}),Nle=()=>({left:!0}),Fle=()=>({right:!0}),kle=(n,t,e,i)=>({left:n,right:t,top:e,bottom:i}),Lle=()=>({left:!0,top:!0}),Ule=()=>({right:!0,bottom:!0});function Vle(n,t){n&1&&d1(0)}function Ble(n,t){if(n&1){let e=Xe();p(0,"div",17),ee("drop",function(r){let o=me(e).$implicit,s=X(2);return ge(s.eventDropped(r,o.date,!0))})("dragEnter",function(){let r=me(e).$implicit,o=X(2);return ge(o.dateDragEnter(r.date))}),g()}}function zle(n,t){n&1&&ne(0,"div",24),n&2&&z("resizeEdges",Hi(1,Nle))}function Hle(n,t){n&1&&ne(0,"div",25),n&2&&z("resizeEdges",Hi(1,Fle))}function Wle(n,t){if(n&1){let e=Xe();p(0,"div",20,3),ee("resizeStart",function(r){let o=me(e).$implicit;X();let s=Di(1),a=X(2);return ge(a.allDayEventResizeStarted(s,o,r))})("resizing",function(r){let o=me(e).$implicit,s=X(3);return ge(s.allDayEventResizing(o,r,s.dayColumnWidth))})("resizeEnd",function(){let r=me(e).$implicit,o=X(3);return ge(o.allDayEventResizeEnded(r))})("dragStart",function(){let r=me(e).$implicit,o=Di(1);X();let s=Di(1),a=X(2);return ge(a.dragStarted(s,o,r,!1))})("dragging",function(){me(e);let r=X(3);return ge(r.allDayEventDragMove())})("dragEnd",function(r){let o=me(e).$implicit,s=X(3);return ge(s.dragEnded(o,r,s.dayColumnWidth))}),ue(2,zle,1,2,"div",21),p(3,"mwl-calendar-week-view-event",22),ee("eventClicked",function(r){let o=me(e).$implicit,s=X(3);return ge(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),g(),ue(4,Hle,1,2,"div",23),g()}if(n&2){let e=t.$implicit,i=X(3);sl("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),Co("cal-draggable",e.event.draggable&&i.allDayEventResizes.size===0)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),z("ngClass",e.event==null?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",ya(33,Ile,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",ya(36,tB,e.event,i.calendarId))("dragAxis",ya(39,aD,e.event.draggable&&i.allDayEventResizes.size===0,!i.snapDraggedEvents&&e.event.draggable&&i.allDayEventResizes.size===0))("dragSnapGrid",i.snapDraggedEvents?_i(42,Rle,i.dayColumnWidth):Hi(44,vx))("validateDrag",i.validateDrag)("touchStartLongPress",Hi(45,eB)),T(2),z("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),T(),z("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),T(),z("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function jle(n,t){if(n&1&&(p(0,"div",18,2),ue(2,Wle,5,46,"div",19),g()),n&2){let e=t.$implicit,i=X(2);T(2),z("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function Gle(n,t){if(n&1){let e=Xe();p(0,"div",12,1),ee("dragEnter",function(){me(e);let r=X();return ge(r.dragEnter("allDay"))})("dragLeave",function(){me(e);let r=X();return ge(r.dragLeave("allDay"))}),p(2,"div",10)(3,"div",13),ue(4,Vle,1,0,"ng-container",14),g(),ue(5,Ble,1,0,"div",15),g(),ue(6,jle,3,2,"div",16),g()}if(n&2){let e=X();T(4),z("ngTemplateOutlet",e.allDayEventsLabelTemplate),T(),z("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),T(),z("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function $le(n,t){if(n&1&&ne(0,"mwl-calendar-week-view-hour-segment",29),n&2){let e=t.$implicit,i=X(3);sl("height",i.hourSegmentHeight,"px"),z("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function qle(n,t){if(n&1&&(p(0,"div",27),ue(1,$le,1,8,"mwl-calendar-week-view-hour-segment",28),g()),n&2){let e=t.$implicit,i=t.odd,r=X(2);Co("cal-hour-odd",i),T(),z("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function Yle(n,t){if(n&1&&(p(0,"div",13),ue(1,qle,2,4,"div",26),g()),n&2){let e=X();T(),z("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}function Xle(n,t){n&1&&ne(0,"div",24),n&2&&z("resizeEdges",Hi(1,Lle))}function Zle(n,t){}function Kle(n,t){if(n&1){let e=Xe();p(0,"mwl-calendar-week-view-event",36),ee("eventClicked",function(r){me(e);let o=X().$implicit,s=X(2);return ge(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),g()}if(n&2){let e=X().$implicit,i=X().$implicit,r=X();z("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}function Jle(n,t){n&1&&ne(0,"div",25),n&2&&z("resizeEdges",Hi(1,Ule))}function Qle(n,t){if(n&1){let e=Xe();p(0,"div",34,3),ee("resizeStart",function(r){let o=me(e).$implicit,s=X(2),a=Di(6);return ge(s.timeEventResizeStarted(a,o,r))})("resizing",function(r){let o=me(e).$implicit,s=X(2);return ge(s.timeEventResizing(o,r))})("resizeEnd",function(){let r=me(e).$implicit,o=X(2);return ge(o.timeEventResizeEnded(r))})("dragStart",function(){let r=me(e).$implicit,o=Di(1),s=X(2),a=Di(6);return ge(s.dragStarted(a,o,r,!0))})("dragging",function(r){let o=me(e).$implicit,s=X(2);return ge(s.dragMove(o,r))})("dragEnd",function(r){let o=me(e).$implicit,s=X(2);return ge(s.dragEnded(o,r,s.dayColumnWidth,!0))}),ue(2,Xle,1,2,"div",21)(3,Zle,0,0,"ng-template",35)(4,Kle,1,12,"ng-template",null,4,qs)(6,Jle,1,2,"div",23),g()}if(n&2){let e=t.$implicit,i=Di(5),r=X(2);sl("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),Co("cal-draggable",e.event.draggable&&r.timeEventResizes.size===0)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),z("ngClass",e.event.cssClass)("hidden",e.height===0&&e.width===0)("resizeCursors",r.resizeCursors)("resizeSnapGrid",iF(30,kle,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",ya(35,tB,e.event,r.calendarId))("dragAxis",ya(38,aD,e.event.draggable&&r.timeEventResizes.size===0,e.event.draggable&&r.timeEventResizes.size===0))("dragSnapGrid",r.snapDraggedEvents?ya(41,aD,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):Hi(44,vx))("touchStartLongPress",Hi(45,eB))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),T(2),z("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),T(),z("ngTemplateOutlet",i),T(3),z("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function ece(n,t){if(n&1){let e=Xe();p(0,"mwl-calendar-week-view-hour-segment",38),ee("mwlClick",function(r){let o=me(e).$implicit,s=X(3);return ge(s.hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){let o=me(e).$implicit,s=X(3);return ge(s.eventDropped(r,o.date,!1))})("dragEnter",function(){let r=me(e).$implicit,o=X(3);return ge(o.dateDragEnter(r.date))}),g()}if(n&2){let e=t.$implicit,i=X(3);sl("height",i.hourSegmentHeight,"px"),z("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",i.hourSegmentClicked.observers.length===0)("dragOverClass",!i.dragActive||!i.snapDraggedEvents?"cal-drag-over":null)("isTimeLabel",i.daysInWeek===1)}}function tce(n,t){if(n&1&&(p(0,"div",27),ue(1,ece,1,10,"mwl-calendar-week-view-hour-segment",37),g()),n&2){let e=t.$implicit,i=t.odd,r=X(2);Co("cal-hour-odd",i),T(),z("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function nce(n,t){if(n&1&&(p(0,"div",30),ne(1,"mwl-calendar-week-view-current-time-marker",31),p(2,"div",32),ue(3,Qle,7,46,"div",33),g(),ue(4,tce,2,4,"div",26),g()),n&2){let e=t.$implicit,i=X();T(),z("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),T(2),z("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),T(),z("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}var _x=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new ot,this.destroy$=new yn}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(_o(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new Wt(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)(k(Pi),k(ri),k(Zi))},n.\u0275dir=Gt({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),nB=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new ot,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(e.keyCode===13||e.which===13||e.key==="Enter")&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){this.keydownListener!==null&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)(k(ri),k(zn),k(Pi))},n.\u0275dir=Gt({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),ph=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`
        ${er(e.date,"EEEE MMMM d",i)},
        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},
         click to expand
      `:`${er(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`
      Beginning of expanded view for ${er(e,"EEEE MMMM dd",i)}
    `}openDayEventsAlert({date:e,locale:i}){return`${er(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(e.allDay===!0)return this.allDayEventDescription({event:e,locale:i});let r=`
      ${er(e.start,"EEEE MMMM dd",i)},
      ${e.title}, from ${er(e.start,"hh:mm a",i)}
    `;return e.end?r+` to ${er(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){let r=`
      ${e.title}, event spans multiple days:
      start time ${er(e.start,"MMMM dd hh:mm a",i)}
    `;return e.end?r+`, stop time ${er(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(Ae(qv))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),yx=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){let r=Object.getOwnPropertyNames(Object.getPrototypeOf(ph.prototype)).filter(o=>o!=="constructor");throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)(k(ph,16),k(ba,16))},n.\u0275pipe=nc({name:"calendarA11y",type:n,pure:!0}),n})(),ice=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"mwlClick","mwlKeydownEnter","ngClass","innerHtml"]],template:function(e,i){if(e&1&&ue(0,ale,1,1,"ng-template",null,0,qs)(2,lle,0,0,"ng-template",1),e&2){let r=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",ya(2,ile,i.event,i.trackByActionId))}},dependencies:[hs,xn,zt,hl,_x,nB,yx],encapsulation:2}),n})(),ed=class{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}},iB=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)(k(ed,16))},n.\u0275pipe=nc({name:"calendarEventTitle",type:n,pure:!0}),n})(),rce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(e&1&&ue(0,ule,3,10,"ng-template",null,0,qs)(2,dle,0,0,"ng-template",1),e&2){let r=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",ya(2,cle,i.event,i.view))}},dependencies:[hl,iB,yx],encapsulation:2}),n})(),oce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(e&1&&ue(0,hle,3,2,"ng-template",null,0,qs)(2,ple,0,0,"ng-template",1),e&2){let r=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",h1(2,fle,i.contents,i.placement,i.event))}},dependencies:[hs,hl],encapsulation:2}),n})(),sce=(()=>{class n{constructor(e,i,r,o,s,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=s,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new yn,this.tooltipFactory=o.resolveComponentFactory(oce)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(this.delay===null?yt("now"):Zh(this.delay)).pipe(_o(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=BP(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),e.indexOf(this.tooltipRef.instance.placement)===-1&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)(k(ri),k(bo),k(Pi),k(ec),k(Vo),k(Zi))},n.\u0275dir=Gt({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){e&1&&ee("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:[0,"mwlCalendarTooltip","contents"],placement:[0,"tooltipPlacement","placement"],customTemplate:[0,"tooltipTemplate","customTemplate"],event:[0,"tooltipEvent","event"],appendToBody:[0,"tooltipAppendToBody","appendToBody"],delay:[0,"tooltipDelay","delay"]},features:[xr]}),n})(),fD=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(fD||{}),ace=n=>IV(n,(...e)=>console.warn("angular-calendar",...e));function rB(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function lce(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}function cce(n,t){return rB(n,t)&&lce(n,t)}function oB(n,t){return Math.round(n/t)*t}var sB=(n,t)=>t.date.toISOString(),uce=(n,t)=>t.date.toISOString(),dce=(n,t)=>t.segments[0].date.toISOString(),fce=(n,t)=>t.event.id?t.event.id:t.event,hce=(n,t)=>t.event.id?t.event.id:t.event,pce=60;function mce(n,t,e){return(e||pce)/(n*t)}function sD(n,t,e,i,r){let o=oB(n,i||e),s=mce(t,e,r);return o*s}function KV(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Ju(n,t,e,i){let r=0,o=0,s=e<0?n.subDays:n.addDays,a=t;for(;o<=Math.abs(e);){a=s(t,r);let c=n.getDay(a);i.indexOf(c)===-1&&o++,r++}return a}function gce(n,t,e){let i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}function vce(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)}function lD(n,t,e,i=[],r){let o=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e}),s=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(o))>-1&&o<s;)o=n.addDays(o,1);if(r){let a=n.endOfDay(Ju(n,o,r-1,i));return{viewStart:o,viewEnd:a}}else{let a=s;for(;i.indexOf(n.getDay(a))>-1&&a>o;)a=n.subDays(a,1);return{viewStart:o,viewEnd:a}}}function _ce({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}var kc=class{};var yce=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return er(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return er(e,"d",i)}monthViewTitle({date:e,locale:i}){return er(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return er(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return er(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:o,daysInWeek:s}){let{viewStart:a,viewEnd:c}=lD(this.dateAdapter,e,r,o,s),d=(f,h)=>er(f,"MMM d"+(h?", yyyy":""),i);return`${d(a,a.getUTCFullYear()!==c.getUTCFullYear())} - ${d(c,!0)}`}weekViewHour({date:e,locale:i}){return er(e,"h a",i)}dayViewHour({date:e,locale:i}){return er(e,"h a",i)}dayViewTitle({date:e,locale:i}){return er(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(Ae(kc))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),mh=(()=>{class n extends yce{}return n.\u0275fac=(()=>{let t;return function(i){return(t||(t=Fr(n)))(i||n)}})(),n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),aB=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,o=0,s=[],a){if(typeof this.dateFormatter[i]>"u"){let c=Object.getOwnPropertyNames(Object.getPrototypeOf(mh.prototype)).filter(d=>d!=="constructor");throw new Error(`${i} is not a valid date formatter. Can only be one of ${c.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:o,excludeDays:s,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)(k(mh,16),k(ba,16))},n.\u0275pipe=nc({name:"calendarDate",type:n,pure:!0}),n})(),zm=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return AV(this.dateAdapter,e)}getWeekViewHeader(e){return px(this.dateAdapter,e)}getWeekView(e){return OV(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(Ae(kc))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),pMe=new it("Moment");var Qu=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(Qu||{}),Bm=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||ed,i.dateFormatter||mh,i.utils||zm,i.a11y||ph]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({providers:[qv],imports:[st]}),n})();var mMe=HV("collapse",[tD("void",eD({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),tD("*",eD({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),nD("* => void",QP("150ms ease-out")),nD("void => *",QP("150ms ease-in"))]);var JV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[st,Vm,Bm,Vm]}),n})(),cD=class{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:o}){let s=_ce({x:t,y:e})||r;if(i){let a=Object.assign({},this.startPosition,{left:this.startPosition.left+o.x,right:this.startPosition.right+o.x,top:this.startPosition.top+o.y,bottom:this.startPosition.bottom+o.y});if(s){let c=this.dragContainerElement.getBoundingClientRect(),d=c.top<a.top&&a.top<c.bottom,f=c.top<a.bottom&&a.bottom<c.bottom;return rB(c,a)&&(d||f)}return!1}else return s}},uD=class{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth)?!1:cce(this.resizeContainerElement.getBoundingClientRect(),t)}},xce=(()=>{class n{constructor(){this.dayHeaderClicked=new ot,this.eventDropped=new ot,this.dragEnter=new ot,this.trackByWeekDayHeaderDate=sB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"mwlClick","drop","dragEnter","ngClass"]],template:function(e,i){if(e&1&&ue(0,_le,2,2,"ng-template",null,0,qs)(2,yle,0,0,"ng-template",1),e&2){let r=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",oF(2,gle,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[hs,xn,hl,JP,_x,aB],encapsulation:2}),n})(),bce=(()=>{class n{constructor(){this.eventClicked=new ot}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"mwlClick","mwlKeydownEnter","ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(e&1&&ue(0,Cle,6,27,"ng-template",null,0,qs)(2,Mle,0,0,"ng-template",1),e&2){let r=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",aF(2,xle,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[hl,NF,ice,rce,sce,_x,nB,iB,yx],encapsulation:2}),n})(),Cce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(e&1&&ue(0,Sle,3,13,"ng-template",null,0,qs)(2,Tle,0,0,"ng-template",1),e&2){let r=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",rF(2,wle,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[hs,zt,hl,aB,yx],encapsulation:2}),n})(),Mce=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new Fi(void 0),this.marker$=this.zone.onStable.pipe(ur(()=>XC(60*1e3)),tu(0),nM(this.columnDate$),mt(r=>{let o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),c=new Date;return{isVisible:this.dateAdapter.isSameDay(r,c)&&c>=o&&c<=s,top:this.dateAdapter.differenceInMinutes(c,o)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)(k(kc),k(zn))},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[xr],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(e&1&&(ue(0,Ole,1,1,"ng-template",null,0,qs)(2,Ale,0,0,"ng-template",1),Lr(3,"async"),Lr(4,"async")),e&2){let r,o=Di(1);T(2),z("ngTemplateOutlet",i.customTemplate||o)("ngTemplateOutletContext",sF(6,Ple,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,(r=p1(3,2,i.marker$))==null?null:r.isVisible,(r=p1(4,4,i.marker$))==null?null:r.top))}},dependencies:[zt,hl,FF],encapsulation:2}),n})(),lB=(()=>{class n{constructor(e,i,r,o,s){this.cdr=e,this.utils=i,this.dateAdapter=o,this.element=s,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new ot,this.eventClicked=new ot,this.eventTimesChanged=new ot,this.beforeViewRender=new ot,this.hourSegmentClicked=new ot,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=sB,this.trackByHourSegment=uce,this.trackByHour=dce,this.trackByWeekAllDayEvent=fce,this.trackByWeekTimeEvent=hce,this.trackByHourColumn=(a,c)=>c.hours[0]?c.hours[0].segments[0].date.toISOString():c,this.trackById=(a,c)=>c.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){let i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&ace(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&getComputedStyle(this.element.nativeElement).direction==="rtl",this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);let r=new Map,o=[...this.events];this.timeEventResizes.forEach((s,a)=>{let c=this.getTimeEventResizedDates(a,s),d=Ee(Ee({},a),c);r.set(d,a);let f=o.indexOf(a);o[f]=d}),this.restoreOriginalEvents(o,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);let i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);let r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:Qu.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){let o=this.allDayEventResizes.get(e),s=this.rtl?-1:1;if(typeof i.edges.left<"u"){let a=Math.round(+i.edges.left/r)*s;e.offset=o.originalOffset+a,e.span=o.originalSpan-a}else if(typeof i.edges.right<"u"){let a=Math.round(+i.edges.right/r)*s;e.span=o.originalSpan+a}}allDayEventResizeEnded(e){let i=this.allDayEventResizes.get(e);if(i){let r=i.edge==="left",o;r?o=e.offset-i.originalOffset:o=e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;let s=this.getAllDayEventResizedDates(e.event,o,r);this.eventTimesChanged.emit({newStart:s.start,newEnd:s.end,event:e.event,type:Qu.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){vce(e,i,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:Qu.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,o){this.dayColumnWidth=this.getDayColumnWidth(e);let s=new cD(e,i);this.validateDrag=({x:a,y:c,transform:d})=>{let f=this.allDayEventResizes.size===0&&this.timeEventResizes.size===0&&s.validateDrag({x:a,y:c,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:d});if(f&&this.validateEventTimesChanged){let h=this.getDragMovedEventTimes(r,{x:a,y:c},this.dayColumnWidth,o);return this.validateEventTimesChanged({type:Qu.Drag,event:r.event,newStart:h.start,newEnd:h.end})}return f},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&o&&this.view.hourColumns.forEach(a=>{let c=a.events.find(d=>d.event===r.event&&d!==r);c&&(c.width=0,c.height=0)}),this.cdr.markForCheck()}dragMove(e,i){let r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),o=e.event,s=Ee(Ee({},o),r),a=this.events.map(c=>c===o?s:c);this.restoreOriginalEvents(a,new Map([[s,o]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,o=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;let{start:s,end:a}=this.getDragMovedEventTimes(e,i,r,o);(this.snapDraggedEvents||this.eventDragEnterByType[o?"time":"allDay"]>0)&&gce(s,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:s,newEnd:a,event:e.event,type:Qu.Drag,allDay:!o}))}refreshHeader(){this.days=this.utils.getWeekViewHeader(Ee({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays},lD(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit(Ee({header:this.days},this.view))}getWeekView(e){return this.utils.getWeekView(Ee({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight},lD(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}getDragMovedEventTimes(e,i,r,o){let s=oB(i.x,r)/r*(this.rtl?-1:1),a=o?sD(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,c=this.dateAdapter.addMinutes(Ju(this.dateAdapter,e.event.start,s,this.excludeDays),a),d;return e.event.end&&(d=this.dateAdapter.addMinutes(Ju(this.dateAdapter,e.event.end,s,this.excludeDays),a)),{start:c,end:d}}restoreOriginalEvents(e,i,r=!0){let o=this.view;r&&(this.view=this.getWeekView(e));let s=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,c)=>{o.hourColumns[c].hours.forEach((d,f)=>{d.segments.forEach((h,v)=>{a.hours[f].segments[v].cssClass=h.cssClass})}),s.forEach(d=>{let f=i.get(d),h=a.events.find(v=>v.event===(r?d:f));if(h)h.event=f,h.tempEvent=d,r||(h.height=0,h.width=0);else{let v={event:f,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:d};a.events.push(v)}})}),i.clear()}getTimeEventResizedDates(e,i){let r={start:e.start,end:KV(this.dateAdapter,e,this.minimumEventHeight)},d=e,{end:o}=d,s=Ng(d,["end"]),a={start:this.dateAdapter.addMinutes(r.end,this.minimumEventHeight*-1),end:KV(this.dateAdapter,s,this.minimumEventHeight)},c=this.rtl?-1:1;if(typeof i.edges.left<"u"){let f=Math.round(+i.edges.left/this.dayColumnWidth)*c,h=Ju(this.dateAdapter,r.start,f,this.excludeDays);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.right<"u"){let f=Math.round(+i.edges.right/this.dayColumnWidth)*c,h=Ju(this.dateAdapter,r.end,f,this.excludeDays);h>a.end?r.end=h:r.end=a.end}if(typeof i.edges.top<"u"){let f=sD(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.start,f);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.bottom<"u"){let f=sD(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.end,f);h>a.end?r.end=h:r.end=a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);let o=new uD(e,r,this.rtl);this.validateResize=({rectangle:s,edges:a})=>{let c=o.validateResize({rectangle:Ee({},s),edges:a});if(c&&this.validateEventTimesChanged){let d;if(!r)d=this.getTimeEventResizedDates(i.event,{rectangle:s,edges:a});else{let f=this.rtl?-1:1;if(typeof a.left<"u"){let h=Math.round(+a.left/r)*f;d=this.getAllDayEventResizedDates(i.event,h,!this.rtl)}else{let h=Math.round(+a.right/r)*f;d=this.getAllDayEventResizedDates(i.event,h,this.rtl)}}return this.validateEventTimesChanged({type:Qu.Resize,event:i.event,newStart:d.start,newEnd:d.end})}return c},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let o=e.start,s=e.end||e.start;return r?o=Ju(this.dateAdapter,o,i,this.excludeDays):s=Ju(this.dateAdapter,s,i,this.excludeDays),{start:o,end:s}}}return n.\u0275fac=function(e){return new(e||n)(k(Ys),k(zm),k(ba),k(kc),k(ri))},n.\u0275cmp=Oe({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[xr],decls:8,vars:9,consts:[["dayColumns",""],["allDayEventsContainer",""],["eventRowContainer",""],["event",""],["weekEventTemplate",""],["role","grid",1,"cal-week-view"],[3,"dayHeaderClicked","eventDropped","dragEnter","days","locale","customTemplate"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress"],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag"],[3,"ngTemplateOutlet"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"mwlClick","drop","dragEnter","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel"]],template:function(e,i){if(e&1){let r=Xe();p(0,"div",5)(1,"mwl-calendar-week-view-header",6),ee("dayHeaderClicked",function(s){return me(r),ge(i.dayHeaderClicked.emit(s))})("eventDropped",function(s){return me(r),ge(i.eventDropped({dropData:s},s.newStart,!0))})("dragEnter",function(s){return me(r),ge(i.dateDragEnter(s.date))}),g(),ue(2,Gle,7,5,"div",7),p(3,"div",8),ee("dragEnter",function(){return me(r),ge(i.dragEnter("time"))})("dragLeave",function(){return me(r),ge(i.dragLeave("time"))}),ue(4,Yle,2,2,"div",9),p(5,"div",10,0),ue(7,nce,5,13,"div",11),g()()()}e&2&&(T(),z("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),T(),z("ngIf",i.view.allDayEventRows.length>0),T(2),z("ngIf",i.view.hourColumns.length>0&&i.daysInWeek!==1),T(),Co("cal-resize-active",i.timeEventResizes.size>0),T(2),z("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[hs,xn,zt,hl,rD,ZV,zV,JP,_x,xce,bce,Cce,Mce],encapsulation:2}),n})(),dD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[st,oD,Vm,Bm,oD,Vm]}),n})();var QV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[st,Bm,dD]}),n})(),cB=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||ed,i.dateFormatter||mh,i.utils||zm,i.a11y||ph]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[Bm,JV,dD,QV,Bm,JV,dD,QV]}),n})();var Ece=Math.pow(10,8)*24*60*60*1e3,_Me=-Ece,xx=6048e5,uB=864e5,gh=6e4,bx=36e5,dB=1e3;var Sce=3600;var fB=Sce*24,yMe=fB*7,Tce=fB*365.2425,Pce=Tce/12,xMe=Pce*3,hD=Symbol.for("constructDateFrom");function Ht(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&hD in n?n[hD](t):n instanceof Date?new n.constructor(t):new Date(t)}function Be(n,t){return Ht(t||n,n)}function Fa(n,t,e){let i=Be(n,e?.in);return isNaN(t)?Ht(e?.in||n,NaN):(t&&i.setDate(i.getDate()+t),i)}function Cx(n,t,e){let i=Be(n,e?.in);if(isNaN(t))return Ht(e?.in||n,NaN);if(!t)return i;let r=i.getDate(),o=Ht(e?.in||n,i.getTime());o.setMonth(i.getMonth()+t+1,0);let s=o.getDate();return r>=s?o:(i.setFullYear(o.getFullYear(),o.getMonth(),r),i)}function Mx(n,t,e){return Ht(e?.in||n,+Be(n)+t)}function wx(n,t,e){return Mx(n,t*bx,e)}var Dce={};function Ss(){return Dce}function Yr(n,t){let e=Ss(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Be(n,t?.in),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function sa(n,t){return Yr(n,kt(Ee({},t),{weekStartsOn:1}))}function hB(n,t){let e=Be(n,t?.in),i=e.getFullYear(),r=Ht(e,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);let o=sa(r),s=Ht(e,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);let a=sa(s);return e.getTime()>=o.getTime()?i+1:e.getTime()>=a.getTime()?i:i-1}function td(n){let t=Be(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Lc(n,...t){let e=Ht.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function Uc(n,t){let e=Be(n,t?.in);return e.setHours(0,0,0,0),e}function pB(n,t,e){let[i,r]=Lc(e?.in,n,t),o=Uc(i),s=Uc(r),a=+o-td(o),c=+s-td(s);return Math.round((a-c)/uB)}function mB(n,t){let e=hB(n,t),i=Ht(t?.in||n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),sa(i)}function gB(n,t,e){let i=Be(n,e?.in);return i.setTime(i.getTime()+t*gh),i}function vB(n,t,e){return Mx(n,t*1e3,e)}function vh(n,t,e){return Fa(n,t*7,e)}function _B(n,t){let e,i=t?.in;return n.forEach(r=>{!i&&typeof r=="object"&&(i=Ht.bind(null,r));let o=Be(r,i);(!e||e<o||isNaN(+o))&&(e=o)}),Ht(i,e||NaN)}function yB(n,t,e){let[i,r]=Lc(e?.in,n,t);return+Uc(i)==+Uc(r)}function xB(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function bB(n){return!(!xB(n)&&typeof n!="number"||isNaN(+Be(n)))}function MB(n,t,e){let[i,r]=Lc(e?.in,n,t),o=CB(i,r),s=Math.abs(pB(i,r));i.setDate(i.getDate()-o*s);let a=+(CB(i,r)===-o),c=o*(s-a);return c===0?0:c}function CB(n,t){let e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Ex(n){return t=>{let i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function Sx(n,t){return+Be(n)-+Be(t)}function wB(n,t,e){let i=Sx(n,t)/gh;return Ex(e?.roundingMethod)(i)}function EB(n,t){let e=Be(n,t?.in);return e.setHours(23,59,59,999),e}function SB(n,t){let e=Be(n,t?.in),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function TB(n,t,e){let i=Sx(n,t)/1e3;return Ex(e?.roundingMethod)(i)}function PB(n,t){let e=Be(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function DB(n,t){let e=Ss(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=Be(n,t?.in),o=r.getDay(),s=(o<i?-7:0)+6-(o-i);return r.setDate(r.getDate()+s),r.setHours(23,59,59,999),r}var Oce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},OB=(n,t,e)=>{let i,r=Oce[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Tx(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Ace={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ice={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},AB={date:Tx({formats:Ace,defaultWidth:"full"}),time:Tx({formats:Ice,defaultWidth:"full"}),dateTime:Tx({formats:Rce,defaultWidth:"full"})};var Nce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IB=(n,t,e,i)=>Nce[n];function _h(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;r=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}var Fce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Uce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Vce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zce=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},RB={ordinalNumber:zce,era:_h({values:Fce,defaultWidth:"wide"}),quarter:_h({values:kce,defaultWidth:"wide",argumentCallback:n=>n-1}),month:_h({values:Lce,defaultWidth:"wide"}),day:_h({values:Uce,defaultWidth:"wide"}),dayPeriod:_h({values:Vce,defaultWidth:"wide",formattingValues:Bce,defaultFormattingWidth:"wide"})};function yh(n){return(t,e={})=>{let i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;let s=o[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?Wce(a,h=>h.test(s)):Hce(a,h=>h.test(s)),d;d=n.valueCallback?n.valueCallback(c):c,d=e.valueCallback?e.valueCallback(d):d;let f=t.slice(s.length);return{value:d,rest:f}}}function Hce(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function Wce(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function NB(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let r=i[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(r.length);return{value:s,rest:a}}}var jce=/^(\d+)(th|st|nd|rd)?/i,Gce=/\d+/i,$ce={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qce={any:[/^b/i,/^(a|c)/i]},Yce={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xce={any:[/1/i,/2/i,/3/i,/4/i]},Zce={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jce={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qce={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eue={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tue={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FB={ordinalNumber:NB({matchPattern:jce,parsePattern:Gce,valueCallback:n=>parseInt(n,10)}),era:yh({matchPatterns:$ce,defaultMatchWidth:"wide",parsePatterns:qce,defaultParseWidth:"any"}),quarter:yh({matchPatterns:Yce,defaultMatchWidth:"wide",parsePatterns:Xce,defaultParseWidth:"any",valueCallback:n=>n+1}),month:yh({matchPatterns:Zce,defaultMatchWidth:"wide",parsePatterns:Kce,defaultParseWidth:"any"}),day:yh({matchPatterns:Jce,defaultMatchWidth:"wide",parsePatterns:Qce,defaultParseWidth:"any"}),dayPeriod:yh({matchPatterns:eue,defaultMatchWidth:"any",parsePatterns:tue,defaultParseWidth:"any"})};var pD={code:"en-US",formatDistance:OB,formatLong:AB,formatRelative:IB,localize:RB,match:FB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Px(n,t){let e=Be(n,t?.in),i=+sa(e)-+mB(e);return Math.round(i/xx)+1}function Dx(n,t){let e=Be(n,t?.in),i=e.getFullYear(),r=Ss(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Ht(t?.in||n,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=Yr(s,t),c=Ht(t?.in||n,0);c.setFullYear(i,0,o),c.setHours(0,0,0,0);let d=Yr(c,t);return+e>=+a?i+1:+e>=+d?i:i-1}function kB(n,t){let e=Ss(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=Dx(n,t),o=Ht(t?.in||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),Yr(o,t)}function LB(n,t){let e=Be(n,t?.in),i=+Yr(e,t)-+kB(e,t);return Math.round(i/xx)+1}var UB=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},VB=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},nue=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return UB(n,t);let o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",UB(i,t)).replace("{{time}}",VB(r,t))},mD={p:VB,P:nue};var iue=/^D+$/,rue=/^Y+$/,oue=["D","DD","YY","YYYY"];function BB(n){return iue.test(n)}function zB(n){return rue.test(n)}function gD(n,t,e){let i=sue(n,t,e);if(console.warn(i),oue.includes(n))throw new RangeError(i)}function sue(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function HB(n,t){return Be(n,t?.in).getDate()}function WB(n,t){return Be(n,t?.in).getDay()}function jB(n,t){let e=Be(n,t?.in),i=e.getFullYear(),r=e.getMonth(),o=Ht(e,0);return o.setFullYear(i,r+1,0),o.setHours(0,0,0,0),o.getDate()}function GB(){return Object.assign({},Ss())}function $B(n,t){return Be(n,t?.in).getHours()}function qB(n,t){let e=Be(n,t?.in).getDay();return e===0?7:e}function YB(n,t){return Be(n,t?.in).getMinutes()}function XB(n,t){return Be(n,t?.in).getMonth()}function ZB(n,t){return Be(n,t?.in).getFullYear()}function KB(n,t){let e=aue(t)?new t(0):Ht(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function aue(n){return typeof n=="function"&&n.prototype?.constructor===n}var lue=10,Ox=class{subPriority=0;validate(t,e){return!0}},Ax=class extends Ox{constructor(t,e,i,r,o){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=r,o&&(this.subPriority=o)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}},Ix=class extends Ox{priority=lue;subPriority=-1;constructor(t,e){super(),this.context=t||(i=>Ht(e,i))}set(t,e){return e.timestampIsSet?t:Ht(t,KB(t,this.context))}};var at=class{run(t,e,i,r){let o=this.parse(t,e,i,r);return o?{setter:new Ax(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,e,i){return!0}};var Rx=class extends at{priority=140;parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]};var Un={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ts={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Qn(n,t){return n&&{value:t(n.value),rest:n.rest}}function kn(n,t){let e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Ps(n,t){let e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};let i=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,s=e[5]?parseInt(e[5],10):0;return{value:i*(r*bx+o*gh+s*dB),rest:t.slice(e[0].length)}}function Nx(n){return kn(Un.anyDigitsSigned,n)}function ln(n,t){switch(n){case 1:return kn(Un.singleDigit,t);case 2:return kn(Un.twoDigits,t);case 3:return kn(Un.threeDigits,t);case 4:return kn(Un.fourDigits,t);default:return kn(new RegExp("^\\d{1,"+n+"}"),t)}}function xh(n,t){switch(n){case 1:return kn(Un.singleDigitSigned,t);case 2:return kn(Un.twoDigitsSigned,t);case 3:return kn(Un.threeDigitsSigned,t);case 4:return kn(Un.fourDigitsSigned,t);default:return kn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function bh(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Fx(n,t){let e=t>0,i=e?t:1-t,r;if(i<=50)r=n||100;else{let o=i+50,s=Math.trunc(o/100)*100,a=n>=o%100;r=n+s-(a?100:0)}return e?r:1-r}function kx(n){return n%400===0||n%4===0&&n%100!==0}var Lx=class extends at{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="yy"});switch(e){case"y":return Qn(ln(4,t),r);case"yo":return Qn(i.ordinalNumber(t,{unit:"year"}),r);default:return Qn(ln(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let r=t.getFullYear();if(i.isTwoDigitYear){let s=Fx(i.year,r);return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}let o=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}};var Ux=class extends at{priority=130;parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="YY"});switch(e){case"Y":return Qn(ln(4,t),r);case"Yo":return Qn(i.ordinalNumber(t,{unit:"year"}),r);default:return Qn(ln(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,r){let o=Dx(t,r);if(i.isTwoDigitYear){let a=Fx(i.year,o);return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),Yr(t,r)}let s=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(s,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),Yr(t,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]};var Vx=class extends at{priority=130;parse(t,e){return e==="R"?xh(4,t):xh(e.length,t)}set(t,e,i){let r=Ht(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),sa(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]};var Bx=class extends at{priority=130;parse(t,e){return e==="u"?xh(4,t):xh(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]};var zx=class extends at{priority=120;parse(t,e,i){switch(e){case"Q":case"QQ":return ln(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]};var Hx=class extends at{priority=120;parse(t,e,i){switch(e){case"q":case"qq":return ln(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]};var Wx=class extends at{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"M":return Qn(kn(Un.month,t),r);case"MM":return Qn(ln(2,t),r);case"Mo":return Qn(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}};var jx=class extends at{priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"L":return Qn(kn(Un.month,t),r);case"LL":return Qn(ln(2,t),r);case"Lo":return Qn(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]};function JB(n,t,e){let i=Be(n,e?.in),r=LB(i,e)-t;return i.setDate(i.getDate()-r*7),Be(i,e?.in)}var Gx=class extends at{priority=100;parse(t,e,i){switch(e){case"w":return kn(Un.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return ln(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,r){return Yr(JB(t,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]};function QB(n,t,e){let i=Be(n,e?.in),r=Px(i,e)-t;return i.setDate(i.getDate()-r*7),i}var $x=class extends at{priority=100;parse(t,e,i){switch(e){case"I":return kn(Un.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return ln(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return sa(QB(t,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]};var cue=[31,28,31,30,31,30,31,31,30,31,30,31],uue=[31,29,31,30,31,30,31,31,30,31,30,31],qx=class extends at{priority=90;subPriority=1;parse(t,e,i){switch(e){case"d":return kn(Un.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return ln(e.length,t)}}validate(t,e){let i=t.getFullYear(),r=kx(i),o=t.getMonth();return r?e>=1&&e<=uue[o]:e>=1&&e<=cue[o]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]};var Yx=class extends at{priority=90;subpriority=1;parse(t,e,i){switch(e){case"D":case"DD":return kn(Un.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return ln(e.length,t)}}validate(t,e){let i=t.getFullYear();return kx(i)?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]};function Ch(n,t,e){let i=Ss(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=Be(n,e?.in),s=o.getDay(),c=(t%7+7)%7,d=7-r,f=t<0||t>6?t-(s+d)%7:(c+d)%7-(s+d)%7;return Fa(o,f,e)}var Xx=class extends at{priority=90;parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Ch(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]};var Zx=class extends at{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return Qn(ln(e.length,t),o);case"eo":return Qn(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Ch(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]};var Kx=class extends at{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return Qn(ln(e.length,t),o);case"co":return Qn(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Ch(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]};function ez(n,t,e){let i=Be(n,e?.in),r=qB(i,e),o=t-r;return Fa(i,o,e)}var Jx=class extends at{priority=90;parse(t,e,i){let r=o=>o===0?7:o;switch(e){case"i":case"ii":return ln(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return Qn(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return Qn(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Qn(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Qn(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return t=ez(t,i),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]};var Qx=class extends at{priority=80;parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(bh(i),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]};var eb=class extends at{priority=80;parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(bh(i),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]};var tb=class extends at{priority=80;parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(bh(i),0,0,0),t}incompatibleTokens=["a","b","t","T"]};var nb=class extends at{priority=70;parse(t,e,i){switch(e){case"h":return kn(Un.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return ln(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]};var ib=class extends at{priority=70;parse(t,e,i){switch(e){case"H":return kn(Un.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return ln(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]};var rb=class extends at{priority=70;parse(t,e,i){switch(e){case"K":return kn(Un.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return ln(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]};var ob=class extends at{priority=70;parse(t,e,i){switch(e){case"k":return kn(Un.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return ln(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){let r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]};var sb=class extends at{priority=60;parse(t,e,i){switch(e){case"m":return kn(Un.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return ln(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}incompatibleTokens=["t","T"]};var ab=class extends at{priority=50;parse(t,e,i){switch(e){case"s":return kn(Un.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return ln(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}incompatibleTokens=["t","T"]};var lb=class extends at{priority=30;parse(t,e){let i=r=>Math.trunc(r*Math.pow(10,-e.length+3));return Qn(ln(e.length,t),i)}set(t,e,i){return t.setMilliseconds(i),t}incompatibleTokens=["t","T"]};var cb=class extends at{priority=10;parse(t,e){switch(e){case"X":return Ps(Ts.basicOptionalMinutes,t);case"XX":return Ps(Ts.basic,t);case"XXXX":return Ps(Ts.basicOptionalSeconds,t);case"XXXXX":return Ps(Ts.extendedOptionalSeconds,t);case"XXX":default:return Ps(Ts.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Ht(t,t.getTime()-td(t)-i)}incompatibleTokens=["t","T","x"]};var ub=class extends at{priority=10;parse(t,e){switch(e){case"x":return Ps(Ts.basicOptionalMinutes,t);case"xx":return Ps(Ts.basic,t);case"xxxx":return Ps(Ts.basicOptionalSeconds,t);case"xxxxx":return Ps(Ts.extendedOptionalSeconds,t);case"xxx":default:return Ps(Ts.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Ht(t,t.getTime()-td(t)-i)}incompatibleTokens=["t","T","X"]};var db=class extends at{priority=40;parse(t){return Nx(t)}set(t,e,i){return[Ht(t,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"};var fb=class extends at{priority=20;parse(t){return Nx(t)}set(t,e,i){return[Ht(t,i),{timestampIsSet:!0}]}incompatibleTokens="*"};var tz={G:new Rx,y:new Lx,Y:new Ux,R:new Vx,u:new Bx,Q:new zx,q:new Hx,M:new Wx,L:new jx,w:new Gx,I:new $x,d:new qx,D:new Yx,E:new Xx,e:new Zx,c:new Kx,i:new Jx,a:new Qx,b:new eb,B:new tb,h:new nb,H:new ib,K:new rb,k:new ob,m:new sb,s:new ab,S:new lb,X:new cb,x:new ub,t:new db,T:new fb};var due=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hue=/^'([^]*?)'?$/,pue=/''/g,mue=/\S/,gue=/[a-zA-Z]/;function nz(n,t,e,i){let r=()=>Ht(i?.in||e,NaN),o=GB(),s=i?.locale??o.locale??pD,a=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,c=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return n?r():Be(e,i?.in);let d={firstWeekContainsDate:a,weekStartsOn:c,locale:s},f=[new Ix(i?.in,e)],h=t.match(fue).map(b=>{let x=b[0];if(x in mD){let D=mD[x];return D(b,s.formatLong)}return b}).join("").match(due),v=[];for(let b of h){!i?.useAdditionalWeekYearTokens&&zB(b)&&gD(b,t,n),!i?.useAdditionalDayOfYearTokens&&BB(b)&&gD(b,t,n);let x=b[0],D=tz[x];if(D){let{incompatibleTokens:S}=D;if(Array.isArray(S)){let W=v.find(V=>S.includes(V.token)||V.token===x);if(W)throw new RangeError(`The format string mustn't contain \`${W.fullToken}\` and \`${b}\` at the same time`)}else if(D.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);v.push({token:x,fullToken:b});let P=D.run(n,b,s.match,d);if(!P)return r();f.push(P.setter),n=P.rest}else{if(x.match(gue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if(b==="''"?b="'":x==="'"&&(b=vue(b)),n.indexOf(b)===0)n=n.slice(b.length);else return r()}}if(n.length>0&&mue.test(n))return r();let _=f.map(b=>b.priority).sort((b,x)=>x-b).filter((b,x,D)=>D.indexOf(b)===x).map(b=>f.filter(x=>x.priority===b).sort((x,D)=>D.subPriority-x.subPriority)).map(b=>b[0]),C=Be(e,i?.in);if(isNaN(+C))return r();let w={};for(let b of _){if(!b.validate(C,d))return r();let x=b.set(C,w,d);Array.isArray(x)?(C=x[0],Object.assign(w,x[1])):C=x}return C}function vue(n){return n.match(hue)[1].replace(pue,"'")}function iz(n,t){let e=Be(n,t?.in);return e.setSeconds(0,0),e}function rz(n,t,e){let[i,r]=Lc(e?.in,n,t);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}function vD(n,t){let e=Be(n,t?.in);return e.setMilliseconds(0),e}function oz(n,t){return+vD(n)==+vD(t)}function sz(n,t,e){return Fa(n,-t,e)}function az(n,t,e){let i=Be(n,e?.in),r=i.getFullYear(),o=i.getDate(),s=Ht(e?.in||n,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);let a=jB(s);return i.setMonth(t,Math.min(o,a)),i}function lz(n,t,e){let i=Be(n,e?.in);return i.setDate(t),i}function cz(n,t,e){let i=Be(n,e?.in);return i.setHours(t),i}function uz(n,t,e){let i=Be(n,e?.in);return i.setMinutes(t),i}function dz(n,t,e){let i=Be(n,e?.in);return isNaN(+i)?Ht(e?.in||n,NaN):(i.setFullYear(t),i)}function fz(n,t,e){return Cx(n,-t,e)}function hb(n,t,e){return vh(n,-t,e)}function _ue(n){return new Date(n).getTimezoneOffset()}function hz(){return{addDays:Fa,addHours:wx,addMinutes:gB,addSeconds:vB,differenceInDays:MB,differenceInMinutes:wB,differenceInSeconds:TB,endOfDay:EB,endOfMonth:SB,endOfWeek:DB,getDay:WB,getMonth:XB,isSameDay:yB,isSameMonth:rz,isSameSecond:oz,max:_B,setHours:cz,setMinutes:uz,startOfDay:Uc,startOfMinute:iz,startOfMonth:PB,startOfWeek:Yr,getHours:$B,getMinutes:YB,getTimezoneOffset:_ue}}function pz(){return Xh(Xh({},hz()),{addWeeks:vh,addMonths:Cx,subDays:sz,subWeeks:hb,subMonths:fz,getISOWeek:Px,setDate:lz,setMonth:az,setYear:dz,getDate:HB,getYear:ZB})}function yue(n,t){if(n&1&&(p(0,"div"),ne(1,"input",25),y(2),g()),n&2){let e=t.$implicit,i=t.index;T(),z("formControlName",i),T(),Et(" ",e," ")}}function xue(n,t){if(n&1&&(p(0,"div",26),y(1),g()),n&2){let e=X(2);T(),Et(" ",e.errorMessage," ")}}function bue(n,t){if(n&1){let e=Xe();p(0,"div",14)(1,"div",15)(2,"h3"),y(3,"Edit Availability Slots"),g(),p(4,"button",9),ee("click",function(){me(e);let r=X();return ge(r.toggleEditAvailability())}),ne(5,"img",16),g(),p(6,"form",17),ee("ngSubmit",function(){me(e);let r=X();return ge(r.onSubmit())}),p(7,"label",18),y(8,"Date"),g(),p(9,"input",19),ee("change",function(r){me(e);let o=X();return ge(o.onUpdateDateChange(r))}),g(),p(10,"label",20),y(11,"Select Hours"),g(),p(12,"div",21),ue(13,yue,3,2,"div",22),g(),ue(14,xue,2,1,"div",23),p(15,"button",24),y(16,"Confirm"),g()()()()}if(n&2){let e=X();T(6),z("formGroup",e.availabilityForm),T(3),z("value",e.today),T(4),z("ngForOf",e.hours),T(),z("ngIf",e.errorMessage)}}var mz=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.staffId="",this.staffName="",this.availabilitySlots=[],this.viewDate=new Date,this.today="",this.view=fD.Week,this.events=[],this.showEditAvailability=!1,this.availabilityType="",this.errorMessage="",this.hours=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],this.addAvailabilitySlots="",this.removeAvailabilitySlots="",this.availabilityForm=this.fb.group({date:[""],selectedHours:this.fb.array(this.hours.map(()=>this.fb.control(!1)))}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadStaffDetails()}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.staffName=e.fullName,this.availabilitySlots=e.availabilitySlots,this.populateEvents()},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}populateEvents(){this.events=this.availabilitySlots.map(e=>{let i=nz(e,"dd/MM/yyyy HH:mm:ss",new Date);return bB(i)?{start:i,end:wx(i,1),title:"Available",color:{primary:"#1e90ff",secondary:"#D1E8FF"}}:null}).filter(e=>e!==null)}initFromUpdate(){let e=new Date;this.today=e.toISOString().split("T")[0],this.availabilityForm.patchValue({date:this.today}),this.onUpdateDateChange({target:{value:this.today}})}previousWeek(){this.viewDate=hb(this.viewDate,1)}nextWeek(){this.viewDate=vh(this.viewDate,1)}onDateChange(e){this.viewDate=new Date(e.target.value)}toggleEditAvailability(){this.showEditAvailability=!this.showEditAvailability,this.initFromUpdate()}formatDateString(e){let i=new Date(e),r=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),s=i.getFullYear();return`${r}/${o}/${s}`}onUpdateDateChange(e){let i=this.formatDateString(e.target.value);this.availabilityForm.setControl("selectedHours",this.fb.array(this.hours.map(()=>this.fb.control(!1)))),this.availabilitySlots.forEach(r=>{let[o,s]=r.split(" ");if(o===i){let a=this.hours.indexOf(s.slice(0,5));a!==-1&&this.availabilityForm.get("selectedHours").at(a).setValue(!0)}})}onSubmit(){if(this.availabilityForm.value.date===""){this.errorMessage="Please select a date";return}let e=this.availabilityForm.value.date,i=this.availabilityForm.value.selectedHours.map((a,c)=>a?this.hours[c]:null).filter(a=>a!==null),r=this.availabilityForm.value.selectedHours.map((a,c)=>a?null:this.hours[c]).filter(a=>a!==null),o=i.map(a=>`${e} ${a}`).join(","),s=r.map(a=>`${e} ${a}`).join(",");if(o===this.addAvailabilitySlots&&s===this.removeAvailabilitySlots){this.errorMessage="No changes detected in availability slots";return}this.addAvailabilitySlots=o,this.removeAvailabilitySlots=s,this.SubmitAvailabilitySlots()}SubmitAvailabilitySlots(){let e={phoneNumber:"",email:"",addAvailabilitySlots:this.addAvailabilitySlots,removeAvailabilitySlots:this.removeAvailabilitySlots,specializationName:""};this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.loadStaffDetails()},error:i=>{if(console.error("Error Updating staff",i),console.error("Error status",i.status),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)(k(ir),k(Ea),k(ct),k(tr))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-view-availability"]],standalone:!0,features:[zi([zm,ph,mh,ed,{provide:kc,useFactory:pz}]),Fe],decls:25,vars:11,consts:[[1,"view-availability-staff-container"],[1,"screens-container"],[1,"view-availability-staff-screen"],[1,"top"],["type","button",1,"btn-availability",3,"click"],["type","button","routerLink","/search-staffs",1,"btn-back"],[1,"page-body"],[1,"calendar-body"],[1,"calendar-navigation"],["type","button",3,"click"],["type","date","title","Select date","placeholder","Select date",3,"change","value"],[1,"calendar-container"],[3,"viewDate","events","hourSegments","dayStartHour","dayEndHour"],["class","edit-screen",4,"ngIf"],[1,"edit-screen"],[1,"staff-edit"],["src","fechar.png","alt","Close"],[3,"ngSubmit","formGroup"],["for","date"],["type","date","id","date","formControlName","date","required","",3,"change","value"],["for","hours"],["formArrayName","selectedHours"],[4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],["type","checkbox","title","Select hour",3,"formControlName"],[1,"error-message"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),ee("click",function(){return r.toggleEditAvailability()}),y(6,"Edit Availability Slots"),g(),p(7,"button",5),y(8," Go Back"),g(),p(9,"h2"),y(10,"Availability for Staff"),g(),p(11,"h3"),y(12),g()(),p(13,"div",6)(14,"div",7)(15,"div",8)(16,"button",9),ee("click",function(){return r.previousWeek()}),y(17,"Previous Week"),g(),p(18,"input",10),Lr(19,"date"),ee("change",function(s){return r.onDateChange(s)}),g(),p(20,"button",9),ee("click",function(){return r.nextWeek()}),y(21,"Next Week"),g()(),p(22,"div",11),ne(23,"mwl-calendar-week-view",12),g()()()(),ue(24,bue,17,4,"div",13),g()()),i&2&&(T(12),Ie(r.staffName),T(6),z("value",al(19,8,r.viewDate,"yyyy-MM-dd")),T(5),z("viewDate",r.viewDate)("events",r.events)("hourSegments",1)("dayStartHour",0)("dayEndHour",24),T(),z("ngIf",r.showEditAvailability))},dependencies:[vt,Ut,Ct,Qp,St,Lt,sn,st,xn,zt,bu,Rt,cB,lB,nr,Cr,Dr,bf,bt,At],styles:[".view-availability-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;font-family:Poppins,sans-serif}.view-availability-staff-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.view-availability-staff-container[_ngcontent-%COMP%]   .view-availability-staff-screen[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:1000px;height:90vh;display:flex;flex-direction:column;align-items:center;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#28a745;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex:1;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff;margin-bottom:10px;display:flex;flex-direction:column;overflow:hidden;flex:1}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:16px;cursor:pointer;transition:border-color .3s,box-shadow .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:hover{color:#1e90ff}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#1e90ff;box-shadow:0 0 5px #1e90ff80;outline:none}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::placeholder{color:#aaa}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#1e90ff;color:#fff;border:none;border-radius:3px;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1c86ee}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]     .cal-event-title{display:flex;justify-content:center;align-items:center;height:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-day-column[_ngcontent-%COMP%]{min-height:100px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-hour-segment[_ngcontent-%COMP%]{height:50px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]{padding:20px;width:300px;height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]{width:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;font-weight:700}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:4px;margin-bottom:1rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#28a745;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem}"]})}}return n})();var gz=n=>({error:n});function Cue(n,t){if(n&1&&(p(0,"div",13),y(1),g()),n&2){let e=X(2);T(),Et(" ",e.errorMessage," ")}}function Mue(n,t){if(n&1){let e=Xe();p(0,"form",5),ee("ngSubmit",function(){me(e);let r=X();return ge(r.activateUser())}),p(1,"div",6)(2,"label",7),y(3,"New Password"),g(),p(4,"input",8),Ue("ngModelChange",function(r){me(e);let o=X();return Ve(o.newPassword,r)||(o.newPassword=r),ge(r)}),g(),p(5,"label",9),y(6,"Confirm Password"),g(),p(7,"input",10),Ue("ngModelChange",function(r){me(e);let o=X();return Ve(o.confirmPassword,r)||(o.confirmPassword=r),ge(r)}),g()(),ue(8,Cue,2,1,"div",11),p(9,"button",12),y(10,"Activate"),g()()}if(n&2){let e=X();T(4),Le("ngModel",e.newPassword),z("ngClass",_i(5,gz,e.newPasswordError)),T(3),Le("ngModel",e.confirmPassword),z("ngClass",_i(7,gz,e.confirmPasswordError)),T(),z("ngIf",e.errorMessage)}}function wue(n,t){if(n&1){let e=Xe();p(0,"div",14),ne(1,"img",15),p(2,"p"),y(3,"User activated successfully!"),g(),p(4,"button",16),ee("click",function(){me(e);let r=X();return ge(r.goToHome())}),y(5,"Go to Home"),g()()}}var vz=(()=>{class n{constructor(e,i,r){this.staffService=e,this.router=i,this.route=r,this.token="",this.newPassword="",this.confirmPassword="",this.errorMessage="",this.activationSuccessful=!1,this.newPasswordError=!1,this.confirmPasswordError=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.token=e.token||""})}activateUser(){if(this.newPasswordError=!this.newPassword.trim(),this.confirmPasswordError=!this.confirmPassword.trim(),!(this.newPasswordError||this.confirmPasswordError)){if(this.token=this.token.trim(),this.newPassword=this.newPassword.trim(),this.confirmPassword=this.confirmPassword.trim(),this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match.";return}this.staffService.activateUser(this.token,this.newPassword).subscribe({next:e=>{console.log("User activated",e),this.errorMessage="",this.activationSuccessful=!0},error:e=>{if(console.error("Error activating user",e),e.status===400){let i=e.error;this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Activation failed - "+e.error)}})}}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)(k(ir),k(ct),k(tr))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-active-staff"]],standalone:!0,features:[Fe],decls:7,vars:2,consts:[[1,"activate-user-container"],[1,"activate-user-middle"],[1,"top"],["class","info-container",3,"ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container",3,"ngSubmit"],[1,"form-group"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","placeholder","Enter new password","required","",3,"ngModelChange","ngModel","ngClass"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm password","required","",3,"ngModelChange","ngModel","ngClass"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-submit"],[1,"error-message"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),y(4,"Activate User"),g()(),ue(5,Mue,11,9,"form",3)(6,wue,6,0,"div",4),g()()),i&2&&(T(5),z("ngIf",!r.activationSuccessful),T(),z("ngIf",r.activationSuccessful))},dependencies:[st,hs,zt,vt,Ut,Ct,St,Lt,sn,Tn,Hn],styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.activate-user-container[_ngcontent-%COMP%]   .activate-user-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:500px;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border:2px solid red}.activate-user-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.activate-user-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var ka=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Doctor")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(Ae(mc),Ae(ct))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _z=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-doctor-panel"]],standalone:!0,features:[Fe],decls:15,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"header"],[1,"stats"],["routerLink","/medical-history-manager","routerLinkActive","active",1,"box","box1"],["routerLink","/patient-manager","routerLinkActive","active",1,"box","box2"],["routerLink","/appointment-manager","routerLinkActive","active",1,"box","box3"],["routerLink","/operation-requests","routerLinkActive","active",1,"box","box4"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h1"),y(5,"Doctor Panel"),g()(),p(6,"div",3)(7,"button",4),y(8," Manage Medical Histories "),g(),p(9,"button",5),y(10," Manage Patients "),g(),p(11,"button",6),y(12," Manage Appointments "),g(),p(13,"button",7),y(14," Manage Operation Requests "),g()()()())},dependencies:[Rt,bt,At,wa],styles:['.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.5em;font-weight:700;box-shadow:0 4px 8px #0000001a}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}']})}}return n})();var Ds=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}createOperationRequest(e){return console.log(e),this.http.post(`${this.apiUrl}/OperationRequest`,e).pipe(un(i=>(console.error("Error creating operation request:",i),En(i))))}editOperationRequest(e,i){return console.log(e),this.http.put(`${this.apiUrl}/OperationRequest/${e}`,i,{responseType:"json"}).pipe(un(r=>(console.error("Error editing operation request:",r),En(r))))}getOperationRequests(){return this.http.get(`${this.apiUrl}/operationRequest`).pipe(un(e=>(console.error("Error fetching operation requests:",e),En(()=>new Error("Failed to fetch operation requests")))))}deleteOperationRequest(e,i){return this.http.delete(`${this.apiUrl}/OperationRequest/${e}?doctorLicenseNumber=${i}`,{observe:"response"}).pipe(un(r=>(console.error("Error deleting operation request:",r),En(r))))}getOperationRequestsWithAdvancedFilter(e,i,r,o,s,a){let c=new URLSearchParams({operationRequest:e||"",doctorLicenseNumber:i||"",operationType:r||"",deadlineDate:o||"",patientMedicalRecordNumber:s||"",priority:a||""});return this.http.get(`${this.apiUrl}/OperationRequest?${c.toString()}`)}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Eue=n=>["/update-operation-request",n],Sue=n=>["/create-appointment",n],Tue=n=>["/view-appointment-details",n];function Pue(n,t){if(n&1){let e=Xe();vu(0),p(1,"a",12),y(2,"Edit"),g(),p(3,"a",13),ee("click",function(){me(e);let r=X().$implicit,o=X();return ge(o.deleteOperationRequest(r.id,r.doctorLicenseNumber))}),y(4,"Delete"),g(),p(5,"a",14),y(6,"Create Appointment"),g(),_u()}if(n&2){let e=X().$implicit;T(),z("routerLink",_i(2,Eue,e.id)),T(4),z("routerLink",_i(4,Sue,e.id))}}function Due(n,t){if(n&1&&(p(0,"a",14),y(1,"View Appointment Details"),g()),n&2){let e=X().$implicit;z("routerLink",_i(1,Tue,e.id))}}function Oue(n,t){if(n&1&&(p(0,"tr")(1,"td"),y(2),g(),p(3,"td"),y(4),g(),p(5,"td"),y(6),g(),p(7,"td"),y(8),g(),p(9,"td"),y(10),g(),p(11,"td"),y(12),g(),p(13,"td"),ue(14,Pue,7,6,"ng-container",11)(15,Due,2,3,"ng-template",null,0,qs),g()()),n&2){let e=t.$implicit,i=t.index,r=Di(16),o=X();T(2),Ie(i+1),T(2),Ie(e.patientName),T(2),Ie(e.doctorLicenseNumber),T(2),Ie(e.operationType),T(2),Ie(e.deadlineDate),T(2),Ie(e.priority),T(2),z("ngIf",o.currentView==="Pending")("ngIfElse",r)}}var yz=(()=>{class n{constructor(e,i,r){this.staffService=e,this.panelService=i,this.operationRequestService=r,this.operationRequests=[],this.operationTypes=[],this.searchTerm="",this.patients=[],this.email="",this.doctors=[],this.staffProfiles=[],this.doctorLicenseNumber="",this.currentView="Pending"}ngOnInit(){this.loadStaffProfiles(),this.panelService.setPanelId("panel-admin"),this.fetchOperationRequests()}toggleView(){this.currentView=this.currentView==="Pending"?"Accepted":"Pending",this.fetchOperationRequests()}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.doctorLicenseNumber===this.doctorLicenseNumber&&i.status===this.currentView),console.log("Filtered operation requests:",this.operationRequests)},e=>{console.error("Error fetching operation requests",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=gc(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&(this.doctorLicenseNumber=this.doctors[0].licenseNumber,console.log("Doctor license number:",this.doctorLicenseNumber),this.fetchOperationRequests())}console.log("Doctors:",this.doctors)},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}deleteOperationRequest(e,i){window.confirm(`Are you sure you want to delete the operation request: ${e}?`)&&this.operationRequestService.deleteOperationRequest(e,i).subscribe(()=>{alert("Operation request deleted successfully")},o=>{console.error("Error deleting operation Request:",o)})}viewOperationRequestDetails(e){console.log(`Viewing details for operationRequest ${e}`),this.operationRequestService.getOperationRequestsWithAdvancedFilter().subscribe(i=>{this.selectedOperationRequest=e[0],console.log("Operation request fetched:",i)},i=>{console.error("Error fetching operation request",i)})}searchOperationRequests(){this.searchTerm?this.operationRequests=this.operationRequests.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.fetchOperationRequests()}static{this.\u0275fac=function(i){return new(i||n)(k(ir),k(bi),k(Ds))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-operation-requests"]],standalone:!0,features:[Fe],decls:31,vars:2,consts:[["scheduledActions",""],[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-operation-request",1,"btn","btn-create"],[1,"btn","btn-toggle",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],[1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(p(0,"div",1),ne(1,"app-sidebar"),p(2,"div",2)(3,"div",3)(4,"button",4),y(5," Create Operation Request "),g(),p(6,"button",5),ee("click",function(){return r.toggleView()}),y(7),g(),p(8,"h2",6),y(9,"Operation Request Manager"),g(),p(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),y(16,"Operation Request"),g(),p(17,"th"),y(18,"Patient"),g(),p(19,"th"),y(20,"Doctor"),g(),p(21,"th"),y(22,"Operation Type"),g(),p(23,"th"),y(24,"Deadline"),g(),p(25,"th"),y(26,"Priority"),g(),p(27,"th"),y(28,"Actions"),g()()(),p(29,"tbody"),ue(30,Oue,17,8,"tr",10),g()()()()()()()),i&2&&(T(7),Et(" ",r.currentView==="Pending"?"Show Accepted Requests":"Show Pending Requests"," "),T(23),z("ngForOf",r.operationRequests))},dependencies:[st,xn,zt,bt,At,Rt,vt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;height:90vh;background-color:#f9f9f9;width:1500px;max-width:2000px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#ffc107;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:150%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var Aue=()=>["/operation-requests"];function Iue(n,t){n&1&&(p(0,"div")(1,"small",23),y(2,"Deadline date is required."),g()())}function Rue(n,t){n&1&&(p(0,"div")(1,"small",23),y(2,"Priority is required."),g()())}function Nue(n,t){if(n&1&&(p(0,"option",24),y(1),g()),n&2){let e=t.$implicit;z("value",e.medicalRecordNumber),T(),f1(" ",e.medicalRecordNumber," - ",e.fullName," ")}}function Fue(n,t){n&1&&(p(0,"div")(1,"small",23),y(2,"Patient selection is required."),g()())}function kue(n,t){if(n&1&&(p(0,"option"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" ",e.name," ")}}function Lue(n,t){n&1&&(p(0,"div")(1,"small",23),y(2,"Operation type selection is required."),g()())}var xz=(()=>{class n{constructor(e,i,r,o,s,a){this.fb=e,this.operationRequestService=i,this.router=r,this.patientService=o,this.operationTypeService=s,this.staffService=a,this.patients=[],this.operationTypes=[],this.doctors=[],this.staffProfiles=[],this.email="",this.operationRequestForm=this.fb.group({deadlineDate:["",It.required],priority:["",It.required],patientMedicalRecordNumber:["",It.required],doctorLicenseNumber:[""],operationType:["",It.required]})}ngOnInit(){this.operationRequestForm=this.fb.group({deadlineDate:["",It.required],priority:["",It.required],patientMedicalRecordNumber:["",It.required],doctorLicenseNumber:[""],operationType:["",It.required]}),this.fetchPatients(),this.loadStaffProfiles()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{let i=this.doctors.length>0?this.doctors[0].specializationId:null;i?(e.forEach(r=>{r.specializations.forEach(o=>{console.log("Operation type specialization ID:",o.id.value)})}),this.operationTypes=e.filter(r=>r.specializations.some(o=>o.id.value===i))):this.operationTypes=e,console.log("Filtered operation types:",this.operationTypes)},e=>{console.error("Error fetching operation types",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=gc(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&this.operationRequestForm.patchValue({doctorLicenseNumber:this.doctors[0].licenseNumber})}console.log("Doctors:",this.doctors),this.fetchOperationTypes()},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}onSubmit(){this.operationRequestForm.valid?this.operationRequestService.createOperationRequest(this.operationRequestForm.value).subscribe(e=>{alert("Operation requested successfully"),this.router.navigate(["/operation-requests"])},e=>{console.error("Error requesting operation",e),alert("There was an error requesting the operation. Please try again.")}):alert("Please fill in all required fields.")}static{this.\u0275fac=function(i){return new(i||n)(k(Ea),k(Ds),k(ct),k(Na),k(vs),k(ir))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-operation-request"]],standalone:!0,features:[Fe],decls:45,vars:10,consts:[[1,"operationRequest-container"],[1,"form-and-table-container"],[1,"form-container"],[1,"operation-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","deadlineDate"],["type","date","id","deadlineDate","formControlName","deadlineDate","placeholder","YYYY-MM-DD"],[4,"ngIf"],["for","priority"],["id","priority","formControlName","priority"],["value","","disabled","","selected",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["for","patientMedicalRecordNumber"],["id","patientMedicalRecordNumber","formControlName","patientMedicalRecordNumber"],[3,"value",4,"ngFor","ngForOf"],["for","operationType"],["id","operationType","formControlName","operationType"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"error"],[3,"value"]],template:function(i,r){if(i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h2",3),y(5,"Create Operation Request"),g(),p(6,"form",4),ee("ngSubmit",function(){return r.onSubmit()}),p(7,"div",5)(8,"label",6),y(9,"Deadline Date:"),g(),ne(10,"input",7),ue(11,Iue,3,0,"div",8),g(),p(12,"div",5)(13,"label",9),y(14,"Priority:"),g(),p(15,"select",10)(16,"option",11),y(17,"Select priority"),g(),p(18,"option",12),y(19,"Elective Surgery"),g(),p(20,"option",13),y(21,"Urgent Surgery"),g(),p(22,"option",14),y(23,"Emergency Surgery"),g()(),ue(24,Rue,3,0,"div",8),g(),p(25,"div",5)(26,"label",15),y(27,"Select Patient:"),g(),p(28,"select",16)(29,"option",11),y(30,"Select patient"),g(),ue(31,Nue,2,3,"option",17),g(),ue(32,Fue,3,0,"div",8),g(),p(33,"div",5)(34,"label",18),y(35,"Select Operation Type:"),g(),p(36,"select",19)(37,"option",11),y(38,"Select operation type"),g(),ue(39,kue,2,1,"option",20),g(),ue(40,Lue,3,0,"div",8),g(),p(41,"button",21),y(42," Create Request "),g(),p(43,"a",22),y(44,"Back"),g()()()()()),i&2){let o,s,a,c;T(6),z("formGroup",r.operationRequestForm),T(5),z("ngIf",((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.invalid)&&((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.touched)),T(13),z("ngIf",((s=r.operationRequestForm.get("priority"))==null?null:s.invalid)&&((s=r.operationRequestForm.get("priority"))==null?null:s.touched)),T(7),z("ngForOf",r.patients),T(),z("ngIf",((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.invalid)&&((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.touched)),T(7),z("ngForOf",r.operationTypes),T(),z("ngIf",((c=r.operationRequestForm.get("operationType"))==null?null:c.invalid)&&((c=r.operationRequestForm.get("operationType"))==null?null:c.touched)),T(),z("disabled",r.operationRequestForm.invalid),T(2),z("routerLink",Hi(9,Aue))}},dependencies:[st,xn,zt,nr,Ut,Oi,Ai,Ct,Wi,St,Lt,Cr,Dr,bt,At,Rt],styles:[".operationRequest-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box;padding:20px}.operationRequest-container[_ngcontent-%COMP%]   .form-and-table-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:30px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:600px;background-color:#fff;border:1px solid #e0e0e0;border-radius:12px;box-shadow:0 4px 20px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .operation-title[_ngcontent-%COMP%]{margin-bottom:25px;font-size:24px;font-weight:600;color:#333;text-align:center}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#555;font-size:14px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #cccccc;border-radius:6px;padding:12px;font-size:16px;color:#555;box-sizing:border-box;transition:border-color .3s,box-shadow .3s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80;outline:none}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:13px;margin-top:5px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px;padding:12px 24px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-left:135px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;position:absolute;top:10px;right:10px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var wh=(()=>{class n{constructor(e){this.http=e,this.url="http://localhost:4000/api/specializations"}getSpecializations(){return this.http.get(this.url)}createSpecialization(e){return this.http.post(`${this.url}/create`,e)}updateSpecialization(e,i){return this.http.put(`${this.url}/update/${e}`,i)}deleteSpecialization(e){return this.http.delete(`${this.url}/delete/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uue(n,t){n&1&&(p(0,"small",8),y(1," Specialization Type is required and must be between 3 and 50 characters. "),g())}var Hm=(()=>{class n{constructor(e){this.specializationService=e,this.specialization={specializationType:""},this.specializationCreated=new ot}onSubmit(){this.specializationService.createSpecialization(this.specialization).subscribe({next:()=>{alert("Specialization created successfully!"),this.specializationCreated.emit()},error:e=>{console.error("Error creating specialization:",e),alert("Failed to create specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)(k(wh))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-specialization"]],outputs:{specializationCreated:"specializationCreated"},standalone:!0,features:[Fe],decls:15,vars:3,consts:[["specializationForm","ngForm"],[1,"create-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","3","maxlength","50","aria-label","Specialization Type",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"]],template:function(i,r){if(i&1){let o=Xe();p(0,"div",1)(1,"h2"),y(2,"Create Specialization"),g(),p(3,"form",2,0),ee("ngSubmit",function(){return me(o),ge(r.onSubmit())}),p(5,"fieldset")(6,"legend"),y(7,"Specialization Details"),g(),p(8,"div",3)(9,"label",4),y(10,"Specialization Type"),g(),p(11,"input",5),Ue("ngModelChange",function(a){return me(o),Ve(r.specialization.specializationType,a)||(r.specialization.specializationType=a),ge(a)}),g(),ue(12,Uue,2,0,"small",6),g(),p(13,"button",7),y(14," Submit "),g()()()()}if(i&2){let o=Di(4);T(11),Le("ngModel",r.specialization.specializationType),T(),z("ngIf",(o.form.controls.specializationType==null?null:o.form.controls.specializationType.invalid)&&(o.form.controls.specializationType==null?null:o.form.controls.specializationType.touched)),T(),z("disabled",!o.form.valid)}},dependencies:[vt,Ut,Ct,St,Lt,sn,tm,qE,Tn,Hn,st,zt],styles:[".create-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.create-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff80}"]})}}return n})();function Vue(n,t){n&1&&(p(0,"p",10),y(1," Specialization Type is required. "),g())}function Bue(n,t){n&1&&(p(0,"p",10),y(1," Specialization Type must be at least 1 character long. "),g())}function zue(n,t){if(n&1&&(p(0,"div"),ue(1,Vue,2,0,"p",9)(2,Bue,2,0,"p",9),g()),n&2){let e,i;X();let r=Di(4);T(),z("ngIf",(e=r.form.get("specializationType"))==null||e.errors==null?null:e.errors.required),T(),z("ngIf",(i=r.form.get("specializationType"))==null||i.errors==null?null:i.errors.minlength)}}var bz=(()=>{class n{constructor(e,i){this.route=e,this.specializationService=i,this.specializationId="",this.specializationUpdated=new ot,this.specialization={specializationType:""}}ngOnInit(){console.log("Specialization ID:",this.specializationId)}onSubmit(){this.specializationService.updateSpecialization(this.specializationId,this.specialization).subscribe({next:()=>{alert("Specialization updated successfully!"),this.specializationUpdated.emit()},error:e=>{console.error("Error updating specialization:",e),alert("Failed to update specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)(k(ct),k(wh))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-specialization"]],inputs:{specializationId:"specializationId"},outputs:{specializationUpdated:"specializationUpdated"},standalone:!0,features:[Fe],decls:17,vars:3,consts:[["specializationForm","ngForm"],[1,"update-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","1","aria-label","Specialization Type","aria-describedby","specializationTypeHelp specializationTypeError",1,"form-control",3,"ngModelChange","ngModel"],["id","specializationTypeHelp",1,"form-text","text-muted"],[4,"ngIf"],["type","submit","aria-disabled","!specializationForm.form.valid",1,"btn","btn-primary",3,"disabled"],["id","specializationTypeError","class","error-text",4,"ngIf"],["id","specializationTypeError",1,"error-text"]],template:function(i,r){if(i&1){let o=Xe();p(0,"div",1)(1,"h2"),y(2,"Update Specialization"),g(),p(3,"form",2,0),ee("ngSubmit",function(){return me(o),ge(r.onSubmit())}),p(5,"fieldset")(6,"legend"),y(7,"Specialization Details"),g(),p(8,"div",3)(9,"label",4),y(10,"Specialization Type"),g(),p(11,"input",5),Ue("ngModelChange",function(a){return me(o),Ve(r.specialization.specializationType,a)||(r.specialization.specializationType=a),ge(a)}),g(),p(12,"small",6),y(13," Enter the type of specialization (e.g., Doctor, Nurse). "),g(),ue(14,zue,3,2,"div",7),g(),p(15,"button",8),y(16," Update "),g()()()()}if(i&2){let o,s=Di(4);T(11),Le("ngModel",r.specialization.specializationType),T(3),z("ngIf",s.submitted||((o=s.form.get("specializationType"))==null?null:o.touched)),T(),z("disabled",!s.form.valid)}},dependencies:[vt,Ut,Ct,St,Lt,sn,tm,Tn,Hn,st,zt],styles:[".update-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 6px #0000001a}.update-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:14px;border:1px solid #ced4da;border-radius:4px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:none}.form-text[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#dc3545}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:none;border-radius:4px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[aria-disabled=true][_ngcontent-%COMP%]{background-color:silver;cursor:not-allowed}"]})}}return n})();function Hue(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td")(4,"button",10),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.openUpdateSpecialization(r.id))}),y(5," Edit "),g(),p(6,"button",11),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.deleteSpecialization(r.id,r.specializationType))}),y(7," Delete "),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e.specializationType),T(2),Xi("aria-label","Edit "+e.specializationType),T(2),Xi("aria-label","Delete "+e.specializationType)}}function Wue(n,t){if(n&1){let e=Xe();p(0,"div",12),ee("click",function(r){me(e);let o=X();return ge(o.closeModal(r))}),p(1,"div",13),ee("click",function(r){return me(e),ge(r.stopPropagation())}),p(2,"button",14),ee("click",function(){me(e);let r=X();return ge(r.closeModal())}),y(3,"X"),g(),p(4,"app-create-specialization",15),ee("specializationCreated",function(){me(e);let r=X();return ge(r.refreshSpecializations())}),g()()()}}function jue(n,t){if(n&1){let e=Xe();p(0,"div",12),ee("click",function(r){me(e);let o=X();return ge(o.closeUpdateModal(r))}),p(1,"div",13),ee("click",function(r){return me(e),ge(r.stopPropagation())}),p(2,"button",14),ee("click",function(){me(e);let r=X();return ge(r.closeUpdateModal())}),y(3,"X"),g(),p(4,"app-update-specialization",16),ee("specializationUpdated",function(){me(e);let r=X();return ge(r.refreshSpecializations())}),g()()()}if(n&2){let e=X();T(4),z("specializationId",e.selectedSpecializationId)}}var Cz=(()=>{class n{constructor(e,i){this.specializationService=e,this.router=i,this.specializations=[],this.isModalOpen=!1,this.isUpdateModalOpen=!1}ngOnInit(){this.fetchSpecializations()}fetchSpecializations(){this.specializationService.getSpecializations().subscribe({next:e=>{console.log("API Response:",e),e.isSuccess&&Array.isArray(e._value)?(this.specializations=e._value,console.log("Specializations:",this.specializations)):(this.specializations=[],console.error("Unexpected API response format:",e))},error:e=>{console.error("Error fetching specializations:",e)}})}openCreateSpecialization(){this.isModalOpen=!0,this.router.navigate(["specializations/create-specialization"])}closeModal(e){e&&e.stopPropagation(),this.isModalOpen=!1,this.router.navigate(["specializations"])}openUpdateSpecialization(e){this.selectedSpecializationId=e,this.isUpdateModalOpen=!0,this.router.navigate(["specializations/update-specialization",e])}closeUpdateModal(e){e&&e.stopPropagation(),this.isUpdateModalOpen=!1,this.router.navigate(["specializations"])}refreshSpecializations(){this.fetchSpecializations(),this.closeModal(),this.closeUpdateModal()}deleteSpecialization(e,i){confirm(`Are you sure you want to delete the specialization "${i}"?`)&&this.specializationService.deleteSpecialization(e).subscribe({next:()=>{alert("Specialization deleted successfully!"),this.refreshSpecializations()},error:r=>{console.error("Error deleting specialization:",r),alert("Failed to delete specialization.")}})}viewSpecializationDetails(e){console.log(`Viewing specialization details for ID: ${e}`)}static{this.\u0275fac=function(i){return new(i||n)(k(wh),k(ct))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-specialization"]],standalone:!0,features:[Fe],decls:21,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["type","button",1,"btn","btn-create",3,"click"],[1,"manage-title","text-center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal-container",3,"click",4,"ngIf"],["type","button",1,"btn","btn-update",3,"click"],["type","button",1,"btn","btn-delete",3,"click"],[1,"modal-container",3,"click"],[1,"modal-content",3,"click"],["type","button","aria-label","Close modal",1,"btn","btn-close",3,"click"],[3,"specializationCreated"],[3,"specializationUpdated","specializationId"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),ee("click",function(){return r.openCreateSpecialization()}),y(5," Create Specialization "),g(),p(6,"h2",4),y(7," Specializations Manager "),g(),p(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th"),y(14,"Specialization"),g(),p(15,"th"),y(16,"Actions"),g()()(),p(17,"tbody"),ue(18,Hue,8,3,"tr",8),g()()()()()(),ue(19,Wue,5,0,"div",9)(20,jue,5,1,"div",9),g()),i&2&&(T(18),z("ngForOf",r.specializations),T(),z("ngIf",r.isModalOpen),T(),z("ngIf",r.isUpdateModalOpen))},dependencies:[st,xn,zt,bt,Rt,Hm,bz],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;margin:0;padding:0;box-sizing:border-box}.manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;padding:20px}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:100%;max-width:1100px;height:auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 10px #0000001a;position:relative}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:15px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{font-size:12px;padding:8px 16px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:1.5rem;text-align:center}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:1.25rem}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;flex-direction:column}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:90%;margin:0 auto;border-collapse:collapse;font-size:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:6px;text-align:left}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;padding:4px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 10px}}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{padding:10px}}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;max-width:600px;width:100%;box-shadow:0 4px 6px #0000001a;position:relative;transition:transform .3s ease,opacity .3s ease}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{padding:15px;max-width:90%}}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#dc3545;border:none;color:#fff;padding:5px 10px;border-radius:50%;cursor:pointer;font-size:16px;transition:background-color .3s}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#c82333}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{font-size:14px;padding:4px 8px}}"]})}}return n})();var pb=(()=>{class n{constructor(e){this.allergyService=e,this.allergy={allergyCode:"",allergyName:"",allergyDescription:"",allergySymptoms:""},this.allergyCreated=new ot}onSubmit(){this.allergyService.createAllergy(this.allergy).subscribe({next:()=>{alert("Allergy created successfully!"),this.allergyCreated.emit()},error:e=>{console.error("Error creating allergy:",e),alert("Failed to create allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)(k(So))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-allergies"]],outputs:{allergyCreated:"allergyCreated"},standalone:!0,features:[Fe],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(p(0,"h2"),y(1,"Create Allergy"),g(),p(2,"form",0),ee("submit",function(){return r.onSubmit()}),p(3,"label",1),y(4,"Code:"),g(),p(5,"input",2),Ue("ngModelChange",function(s){return Ve(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),g(),p(6,"label",3),y(7,"Name:"),g(),p(8,"input",4),Ue("ngModelChange",function(s){return Ve(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),g(),p(9,"label",5),y(10,"Description:"),g(),p(11,"input",6),Ue("ngModelChange",function(s){return Ve(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),g(),p(12,"label",7),y(13,"Symptoms:"),g(),p(14,"input",8),Ue("ngModelChange",function(s){return Ve(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),g(),p(15,"button",9),y(16,"Submit"),g()()),i&2&&(T(5),Le("ngModel",r.allergy.allergyCode),T(3),Le("ngModel",r.allergy.allergyName),T(3),Le("ngModel",r.allergy.allergyDescription),T(3),Le("ngModel",r.allergy.allergySymptoms))},dependencies:[vt,Ut,Ct,St,Lt,sn,Tn,Hn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var mb=(()=>{class n{constructor(e){this.conditionService=e,this.medicalCondition={medicalConditionCode:"",medicalConditionName:"",medicalConditionDescription:"",medicalConditionSymptoms:""},this.conditionCreated=new ot}onSubmit(){this.conditionService.createMedicalConditions(this.medicalCondition).subscribe({next:()=>{alert("Medical Condition created successfully!"),this.conditionCreated.emit()},error:e=>{console.error("Error creating condition:",e),alert("Failed to create condition.")}})}static{this.\u0275fac=function(i){return new(i||n)(k(To))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-conditions"]],outputs:{conditionCreated:"conditionCreated"},standalone:!0,features:[Fe],decls:17,vars:4,consts:[[3,"submit"],["for","condition-code"],["type","text","id","condition-code","name","condition-code","required","",3,"ngModelChange","ngModel"],["for","condition-name"],["type","text","id","condition-name","name","condition-name","required","",3,"ngModelChange","ngModel"],["for","condition-description"],["type","text","id","condition-description","name","condition-description","required","",3,"ngModelChange","ngModel"],["for","condition-sypmtoms"],["type","text","id","condition-symptoms","name","condition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(p(0,"h2"),y(1,"Create Medical Condition"),g(),p(2,"form",0),ee("submit",function(){return r.onSubmit()}),p(3,"label",1),y(4,"Code:"),g(),p(5,"input",2),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),g(),p(6,"label",3),y(7,"Name:"),g(),p(8,"input",4),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),g(),p(9,"label",5),y(10,"Description:"),g(),p(11,"input",6),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),g(),p(12,"label",7),y(13,"Symptoms:"),g(),p(14,"input",8),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),g(),p(15,"button",9),y(16,"Submit"),g()()),i&2&&(T(5),Le("ngModel",r.medicalCondition.medicalConditionCode),T(3),Le("ngModel",r.medicalCondition.medicalConditionName),T(3),Le("ngModel",r.medicalCondition.medicalConditionDescription),T(3),Le("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[vt,Ut,Ct,St,Lt,sn,Tn,Hn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var gb=(()=>{class n{constructor(e){this.allergyService=e,this.allergyUpdated=new ot}onSubmit(){let e=this.allergy.id;console.log("Allergy:",this.allergy),console.log("Allergy ID:",e),this.allergyService.updateAllergy(e,this.allergy).subscribe({next:()=>{alert("Allergy updated successfully!"),this.allergyUpdated.emit()},error:i=>{console.error("Error updating allergy:",i),alert("Failed to update allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)(k(So))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-allergies"]],inputs:{allergy:"allergy"},outputs:{allergyUpdated:"allergyUpdated"},standalone:!0,features:[Fe],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(p(0,"h2"),y(1,"Update Allergy"),g(),p(2,"form",0),ee("submit",function(){return r.onSubmit()}),p(3,"label",1),y(4,"Code:"),g(),p(5,"input",2),Ue("ngModelChange",function(s){return Ve(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),g(),p(6,"label",3),y(7,"Name:"),g(),p(8,"input",4),Ue("ngModelChange",function(s){return Ve(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),g(),p(9,"label",5),y(10,"Description:"),g(),p(11,"input",6),Ue("ngModelChange",function(s){return Ve(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),g(),p(12,"label",7),y(13,"Symptoms:"),g(),p(14,"input",8),Ue("ngModelChange",function(s){return Ve(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),g(),p(15,"button",9),y(16,"Submit"),g()()),i&2&&(T(5),Le("ngModel",r.allergy.allergyCode),T(3),Le("ngModel",r.allergy.allergyName),T(3),Le("ngModel",r.allergy.allergyDescription),T(3),Le("ngModel",r.allergy.allergySymptoms))},dependencies:[vt,Ut,Ct,St,Lt,sn,Tn,Hn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var vb=(()=>{class n{constructor(e){this.medicalConditionService=e,this.conditionUpdated=new ot}onSubmit(){let e=this.medicalCondition.id;this.medicalConditionService.updateCondition(e,this.medicalCondition).subscribe({next:()=>{alert("Condition updated successfully!"),this.conditionUpdated.emit()},error:i=>{console.error("Error creating condition:",i),alert("Failed to update condition.")}})}static{this.\u0275fac=function(i){return new(i||n)(k(To))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-conditions"]],inputs:{medicalCondition:"medicalCondition"},outputs:{conditionUpdated:"conditionUpdated"},standalone:!0,features:[Fe],decls:17,vars:4,consts:[[3,"submit"],["for","medicalCondition-code"],["type","text","id","medicalCondition-code","name","medicalCondition-code","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-name"],["type","text","id","medicalCondition-name","name","medicalCondition-name","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-description"],["type","text","id","medicalCondition-description","name","medicalCondition-description","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-symptoms"],["type","text","id","medicalCondition-symptoms","name","medicalCondition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(p(0,"h2"),y(1,"Update Condition"),g(),p(2,"form",0),ee("submit",function(){return r.onSubmit()}),p(3,"label",1),y(4,"Code:"),g(),p(5,"input",2),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),g(),p(6,"label",3),y(7,"Name:"),g(),p(8,"input",4),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),g(),p(9,"label",5),y(10,"Description:"),g(),p(11,"input",6),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),g(),p(12,"label",7),y(13,"Symptoms:"),g(),p(14,"input",8),Ue("ngModelChange",function(s){return Ve(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),g(),p(15,"button",9),y(16,"Submit"),g()()),i&2&&(T(5),Le("ngModel",r.medicalCondition.medicalConditionCode),T(3),Le("ngModel",r.medicalCondition.medicalConditionName),T(3),Le("ngModel",r.medicalCondition.medicalConditionDescription),T(3),Le("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[vt,Ut,Ct,St,Lt,sn,Tn,Hn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();function Gue(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td")(4,"button",9),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.openDetailsModal(r,"allergy"))}),y(5,"View Details"),g(),p(6,"button",9),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.openUpdateModal(r,"allergy"))}),y(7,"Update"),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e.allergyName)}}function $ue(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td")(4,"button",9),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.openDetailsModal(r,"condition"))}),y(5,"View Details"),g(),p(6,"button",9),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.openUpdateModal(r,"condition"))}),y(7,"Update"),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e.medicalConditionName)}}function que(n,t){if(n&1){let e=Xe();p(0,"app-create-allergies",18),ee("allergyCreated",function(){me(e);let r=X(2);return ge(r.handleAllergyCreated())}),g()}}function Yue(n,t){if(n&1){let e=Xe();p(0,"app-create-conditions",19),ee("conditionCreated",function(){me(e);let r=X(2);return ge(r.handleConditionCreated())}),g()}}function Xue(n,t){if(n&1){let e=Xe();p(0,"app-update-allergies",20),ee("allergyUpdated",function(){me(e);let r=X(2);return ge(r.handleAllergyUpdated())}),g()}if(n&2){let e=X(2);z("allergy",e.selectedItem)}}function Zue(n,t){if(n&1){let e=Xe();p(0,"app-update-conditions",21),ee("conditionUpdated",function(){me(e);let r=X(2);return ge(r.handleConditionUpdated())}),g()}if(n&2){let e=X(2);z("medicalCondition",e.selectedItem)}}function Kue(n,t){if(n&1&&(p(0,"div")(1,"h2"),y(2),g(),p(3,"p")(4,"strong"),y(5,"Code:"),g(),y(6),g(),p(7,"p")(8,"strong"),y(9,"Description:"),g(),y(10),g(),p(11,"p")(12,"strong"),y(13,"Symptoms:"),g(),y(14),g()()),n&2){let e=X(2);T(2),Et("",e.selectedItemType==="allergy"?e.selectedItem.allergyName:e.selectedItem.medicalConditionName," Details"),T(4),Et(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyCode:e.selectedItem.medicalConditionCode,""),T(4),Et(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyDescription:e.selectedItem.medicalConditionDescription,""),T(4),Et(" ",e.selectedItemType==="allergy"?e.selectedItem.allergySymptoms:e.selectedItem.medicalConditionSymptoms,"")}}function Jue(n,t){if(n&1){let e=Xe();p(0,"div",10)(1,"div",11)(2,"span",12),ee("click",function(){me(e);let r=X();return ge(r.closeModal())}),y(3,"\xD7"),g(),ue(4,que,1,0,"app-create-allergies",13)(5,Yue,1,0,"app-create-conditions",14)(6,Xue,1,1,"app-update-allergies",15)(7,Zue,1,1,"app-update-conditions",16)(8,Kue,15,4,"div",17),g()()}if(n&2){let e=X();T(4),z("ngIf",e.modalType==="create-allergies"),T(),z("ngIf",e.modalType==="create-conditions"),T(),z("ngIf",e.modalType==="update-allergies"),T(),z("ngIf",e.modalType==="update-conditions"),T(),z("ngIf",e.modalType==="details")}}var Mz=(()=>{class n{constructor(e,i,r,o,s){this.renderer=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.modalType=null,this.allergies=[],this.medicalConditions=[],this.selectedItem=null,this.selectedItemType=null}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.fetchAllergies(),this.fetchMedicalConditions()}openModal(e){this.modalType=e,this.renderer.addClass(document.body,"modal-active"),this.router.navigate([`/manage-allergies-and-conditions/${e}`])}closeModal(){this.modalType=null,this.selectedItem=null,this.selectedItemType=null,this.renderer.removeClass(document.body,"modal-active"),this.router.navigate(["/manage-allergies-and-conditions"]),this.refreshPage()}openDetailsModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType="details",this.renderer.addClass(document.body,"modal-active")}openUpdateModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType=i==="allergy"?"update-allergies":"update-conditions",this.renderer.addClass(document.body,"modal-active"),i==="allergy"?this.router.navigate([`/manage-allergies-and-conditions/update-allergies/${e.id}`]):this.router.navigate([`/manage-allergies-and-conditions/update-conditions/${e.id}`])}handleAllergyCreated(){this.closeModal()}handleConditionCreated(){this.closeModal()}handleAllergyUpdated(){this.closeModal()}handleConditionUpdated(){this.closeModal()}refreshPage(){this.fetchAllergies(),this.fetchMedicalConditions()}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}static{this.\u0275fac=function(i){return new(i||n)(k(Pi),k(ct),k(bi),k(So),k(To))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-manage-allergies-and-conditions"]],standalone:!0,features:[Fe],decls:34,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"btn","btn-create",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[3,"allergyCreated",4,"ngIf"],[3,"conditionCreated",4,"ngIf"],[3,"allergy","allergyUpdated",4,"ngIf"],[3,"medicalCondition","conditionUpdated",4,"ngIf"],[4,"ngIf"],[3,"allergyCreated"],[3,"conditionCreated"],[3,"allergyUpdated","allergy"],[3,"conditionUpdated","medicalCondition"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),ee("click",function(){return r.openModal("create-allergies")}),y(5,"Create"),g(),p(6,"h2",4),y(7,"Allergies"),g(),p(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),y(13,"Allergies"),g(),p(14,"th"),y(15,"Actions"),g()()(),p(16,"tbody"),ue(17,Gue,8,1,"tr",7),g()()()(),p(18,"div",2)(19,"button",3),ee("click",function(){return r.openModal("create-conditions")}),y(20,"Create"),g(),p(21,"h2",4),y(22,"Medical Conditions"),g(),p(23,"div",5)(24,"table",6)(25,"thead")(26,"tr")(27,"th"),y(28,"Conditions"),g(),p(29,"th"),y(30,"Actions"),g()()(),p(31,"tbody"),ue(32,$ue,8,1,"tr",7),g()()()()(),ue(33,Jue,9,5,"div",8),g()),i&2&&(T(17),z("ngForOf",r.allergies),T(15),z("ngForOf",r.medicalConditions),T(),z("ngIf",r.modalType))},dependencies:[st,xn,zt,vt,bt,Rt,pb,mb,gb,vb],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:800px;height:600px;background-color:#f9f9f9;max-width:800px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:12px;width:80%;max-width:500px;position:relative;box-shadow:0 4px 8px #0000001a}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:24px;cursor:pointer;color:#333;transition:color .3s}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#007bff}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:24px;color:#333}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;margin:10px 0}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}"]})}}return n})();function Que(n,t){if(n&1){let e=Xe();p(0,"div",17)(1,"span"),y(2),g(),p(3,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.onAllergyChange(r,o.id))}),g()()}if(n&2){let e=t.$implicit,i=X();T(2),Ie(e.allergyName),T(),z("value",e.id)("checked",i.medicalHistory.allergies.includes(e.id))}}function ede(n,t){if(n&1){let e=Xe();p(0,"div",17)(1,"span"),y(2),g(),p(3,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.onMedicalConditionChange(r,o.id))}),g()()}if(n&2){let e=t.$implicit,i=X();T(2),Ie(e.medicalConditionName),T(),z("value",e.id)("checked",i.medicalHistory.medicalConditions.includes(e.id))}}function tde(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td")(4,"button",9),ee("click",function(){let r=me(e).index,o=X();return ge(o.editFamilyHistory(r))}),y(5,"Edit"),g(),p(6,"button",9),ee("click",function(){let r=me(e).index,o=X();return ge(o.removeFamilyHistory(r))}),y(7," Remove "),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e)}}function nde(n,t){if(n&1){let e=Xe();p(0,"div",24)(1,"span"),y(2),g(),p(3,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X(2);return ge(s.onFamilyHistoryConditionChange(r,o.medicalConditionName))}),g()()}if(n&2){let e=t.$implicit,i=X(2);T(2),Ie(e.medicalConditionName),T(),z("value",e.medicalConditionName)("checked",i.newFamilyHistory.conditions.includes(e.medicalConditionName))}}function ide(n,t){if(n&1){let e=Xe();p(0,"div",19)(1,"div",20)(2,"span",21),ee("click",function(){me(e);let r=X();return ge(r.closeFamilyConditionsModal())}),y(3,"\xD7"),g(),p(4,"h2"),y(5,"Select Family Conditions"),g(),p(6,"div",22),ue(7,nde,4,3,"div",23),g(),p(8,"button",15),ee("click",function(){me(e);let r=X();return ge(r.closeFamilyConditionsModal())}),y(9," Save "),g()()()}if(n&2){let e=X();T(7),z("ngForOf",e.medicalConditions)}}function rde(n,t){if(n&1){let e=Xe();p(0,"div",19)(1,"div",25)(2,"span",26),ee("click",function(){me(e);let r=X();return ge(r.closeUpdateFamilyHistoryModal())}),y(3,"\xD7"),g(),p(4,"h2"),y(5,"Edit Family History"),g(),p(6,"div",7)(7,"input",27),Ue("ngModelChange",function(r){me(e);let o=X();return Ve(o.newFamilyHistory.relationship,r)||(o.newFamilyHistory.relationship=r),ge(r)}),g(),p(8,"button",9),ee("click",function(){me(e);let r=X();return ge(r.openFamilyConditionsModal())}),y(9," Select Conditions "),g()(),p(10,"button",28),ee("click",function(){me(e);let r=X();return ge(r.updateFamilyHistory())}),y(11," Save "),g()()()}if(n&2){let e=X();T(7),Le("ngModel",e.newFamilyHistory.relationship),T(3),z("disabled",!e.newFamilyHistory.relationship||e.newFamilyHistory.conditions.length===0)}}var wz=(()=>{class n{constructor(e,i,r,o){this.allergyService=e,this.panelService=i,this.medicalHistoryService=r,this.medicalConditionService=o,this.medicalHistory={id:"",patientMedicalRecordNumber:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.newFamilyHistory={relationship:"",conditions:[]},this.selectedFamilyHistory=null,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen=!1}ngOnInit(){console.log("ngOnInit called"),this.panelService.setPanelId("panel-admin"),this.fetchAllergies(),this.fetchMedicalConditions();let e=this.extractMedicalRecordNumberFromUrl();this.fetchMedicalHistory(e)}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(console.log("Family History:",i.familyHistory),this.medicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:i.familyHistory===""?[]:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.medicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){console.log("filterSelectedAllergies called"),this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){console.log("filterSelectedMedicalConditions called"),this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){console.log("searchAllergies called with allergySearch:",this.allergySearch),this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase())),console.log("Filtered allergies after search:",this.filteredAllergies)}searchMedicalConditions(){console.log("searchMedicalConditions called with medicalConditionSearch:",this.medicalConditionSearch),this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase())),console.log("Filtered medical conditions after search:",this.filteredMedicalConditions)}extractMedicalRecordNumberFromUrl(){console.log("extractMedicalRecordNumberFromUrl called");let e=window.location.href,i=/\/update-medical-history\/(\d+)/,r=e.match(i);if(r&&r[1])return console.log("Medical record number extracted from URL:",r[1]),r[1];throw new Error("Medical record number not found in URL.")}fetchAllergies(){console.log("fetchAllergies called"),this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){console.log("fetchMedicalConditions called"),this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}onAllergyChange(e,i){if(console.log("onAllergyChange called with event:",e,"and allergyId:",i),e.target.checked)this.medicalHistory.allergies.push(i);else{let r=this.medicalHistory.allergies.indexOf(i);r>-1&&this.medicalHistory.allergies.splice(r,1)}console.log("Updated allergies:",this.medicalHistory.allergies)}onMedicalConditionChange(e,i){if(console.log("onMedicalConditionChange called with event:",e,"and medicalConditionId:",i),e.target.checked)this.medicalHistory.medicalConditions.push(i);else{let r=this.medicalHistory.medicalConditions.indexOf(i);r>-1&&this.medicalHistory.medicalConditions.splice(r,1)}console.log("Updated medical conditions:",this.medicalHistory.medicalConditions)}openFamilyConditionsModal(){console.log("openFamilyConditionsModal called"),this.wasUpdateFamilyHistoryModalOpen=this.showUpdateFamilyHistoryModal,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!0,console.log("Family conditions modal opened")}closeFamilyConditionsModal(){console.log("closeFamilyConditionsModal called"),this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen&&(this.showUpdateFamilyHistoryModal=!0),console.log("Family conditions modal closed")}addFamilyHistory(){console.log("addFamilyHistory called with newFamilyHistory:",this.newFamilyHistory);let e=this.newFamilyHistory.conditions.join("; "),i=`${this.newFamilyHistory.relationship}: ${e}`;this.medicalHistory.familyHistory.includes(i)||this.medicalHistory.familyHistory.push(i),this.newFamilyHistory={relationship:"",conditions:[]},console.log("Updated family history:",this.medicalHistory.familyHistory)}removeFamilyHistory(e){console.log("removeFamilyHistory called with index:",e),this.medicalHistory.familyHistory.splice(e,1),this.selectedFamilyHistory=null,console.log("Updated family history:",this.medicalHistory.familyHistory)}onFamilyHistoryConditionChange(e,i){if(console.log("onFamilyHistoryConditionChange called with event:",e,"and condition:",i),e.target.checked)this.newFamilyHistory.conditions.includes(i)||this.newFamilyHistory.conditions.push(i);else{let r=this.newFamilyHistory.conditions.indexOf(i);r>-1&&this.newFamilyHistory.conditions.splice(r,1)}console.log("Updated new family history conditions:",this.newFamilyHistory.conditions)}editFamilyHistory(e){console.log("editFamilyHistory called with index:",e),this.selectedFamilyHistory=e;let i=this.parseFamilyHistory([this.medicalHistory.familyHistory[e]])[0];this.newFamilyHistory={relationship:i.relationship,conditions:i.conditions},this.showUpdateFamilyHistoryModal=!0,console.log("Editing family history:",this.newFamilyHistory)}closeUpdateFamilyHistoryModal(){console.log("closeUpdateFamilyHistoryModal called"),this.showUpdateFamilyHistoryModal=!1,this.newFamilyHistory={relationship:"",conditions:[]},console.log("Update family history modal closed")}updateFamilyHistory(){if(console.log("updateFamilyHistory called"),this.selectedFamilyHistory!==null){let e=`${this.newFamilyHistory.relationship}: ${this.newFamilyHistory.conditions.join("; ")}`;this.medicalHistory.familyHistory.includes(e)||(this.medicalHistory.familyHistory[this.selectedFamilyHistory]=e),this.closeUpdateFamilyHistoryModal(),console.log("Updated family history:",this.medicalHistory.familyHistory)}}submitMedicalHistory(){console.log("submitMedicalHistory called with medicalHistory:",this.medicalHistory),this.medicalHistoryService.updatePatientMedicalHistory(this.medicalHistory.patientMedicalRecordNumber,this.medicalHistory.allergies,this.medicalHistory.medicalConditions,this.medicalHistory.familyHistory,this.medicalHistory.freeText).subscribe(e=>{console.log("Medical history updated:",e),alert("Medical history updated successfully")},e=>{console.error("Error updating medical history:",e),alert("Error updating medical history")})}static{this.\u0275fac=function(i){return new(i||n)(k(So),k(bi),k(Nc),k(To))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-medical-history"]],standalone:!0,features:[Fe],decls:42,vars:8,consts:[[1,"content"],[1,"medical-history-container"],[1,"top-section"],[1,"box"],[1,"multi-select-list"],["class","multi-select-item",4,"ngFor","ngForOf"],[1,"middle-section"],[1,"family-history-input"],["type","text","placeholder","Relationship","name","newRelationship","required","",3,"ngModelChange","ngModel"],["type","button",3,"click"],["type","button",3,"click","disabled"],[1,"family-history-table"],[4,"ngFor","ngForOf"],[1,"bottom-section"],["placeholder","Free Text Field","name","freeTextField",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click"],["class","modal",4,"ngIf"],[1,"multi-select-item"],["type","checkbox",3,"change","value","checked"],[1,"modal"],[1,"family-conditions-modal-content"],[1,"family-conditions-close",3,"click"],[1,"family-conditions-multi-select-list"],["class","family-conditions-multi-select-item",4,"ngFor","ngForOf"],[1,"family-conditions-multi-select-item"],[1,"update-family-history-modal-content"],[1,"update-family-history-close",3,"click"],["type","text","placeholder","Relationship","name","editRelationship","required","",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click","disabled"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"h2"),y(4,"Medical History"),g(),p(5,"div",2)(6,"div",3)(7,"h3"),y(8,"Allergies"),g(),p(9,"div",4),ue(10,Que,4,3,"div",5),g()(),p(11,"div",3)(12,"h3"),y(13,"Medical Conditions"),g(),p(14,"div",4),ue(15,ede,4,3,"div",5),g()()(),p(16,"div",6)(17,"h3"),y(18,"Family History"),g(),p(19,"div",7)(20,"input",8),Ue("ngModelChange",function(s){return Ve(r.newFamilyHistory.relationship,s)||(r.newFamilyHistory.relationship=s),s}),g(),p(21,"button",9),ee("click",function(){return r.openFamilyConditionsModal()}),y(22," Select Conditions "),g(),p(23,"button",10),ee("click",function(){return r.addFamilyHistory()}),y(24," Add Family History "),g()(),p(25,"table",11)(26,"thead")(27,"tr")(28,"th"),y(29,"Family History"),g(),p(30,"th"),y(31,"Actions"),g()()(),p(32,"tbody"),ue(33,tde,8,1,"tr",12),g()()(),p(34,"div",13)(35,"h3"),y(36,"Free Text Field"),g(),p(37,"textarea",14),Ue("ngModelChange",function(s){return Ve(r.medicalHistory.freeText,s)||(r.medicalHistory.freeText=s),s}),g()(),p(38,"button",15),ee("click",function(){return r.submitMedicalHistory()}),y(39,"Save"),g()(),ue(40,ide,10,1,"div",16)(41,rde,12,2,"div",16),g()),i&2&&(T(10),z("ngForOf",r.allergies),T(5),z("ngForOf",r.medicalConditions),T(5),Le("ngModel",r.newFamilyHistory.relationship),T(3),z("disabled",!r.newFamilyHistory.relationship||r.newFamilyHistory.conditions.length===0),T(10),z("ngForOf",r.medicalHistory.familyHistory),T(4),Le("ngModel",r.medicalHistory.freeText),T(3),z("ngIf",r.showFamilyConditionsModal),T(),z("ngIf",r.showUpdateFamilyHistoryModal))},dependencies:[vt,Ct,St,sn,Tn,st,xn,zt,Rt],styles:[".content[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100vh;overflow-y:auto;box-sizing:border-box;align-items:center}.medical-history-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;height:fit-content;margin:0 auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.medical-history-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:0}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 1px 3px #0000001a}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;position:relative}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:calc(100% - 16px);table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;max-height:150px;overflow-y:scroll;width:100%}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left;font-size:14px;box-sizing:border-box}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar{width:16px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:8px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b3b3b3}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:14px;cursor:pointer;transition:background-color .3s;margin-right:5px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c82333}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px;resize:none;overflow-y:auto}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]{display:block;margin:10px auto;background-color:#17a2b8;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;inset:0;width:100%;height:100%;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-family-history-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:2}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:hover, .update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.update-family-history-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.family-conditions-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:100}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:hover, .family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.family-conditions-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var ode=n=>["/update-medical-history",n];function sde(n,t){if(n&1){let e=Xe();p(0,"tr")(1,"td"),y(2),g(),p(3,"td"),y(4),g(),p(5,"td")(6,"a",24),y(7,"Edit"),g(),p(8,"a",25),ee("click",function(){let r=me(e).$implicit,o=X();return ge(o.viewPatientDetails(r.medicalRecordNumber))}),y(9,"View"),g()()()}if(n&2){let e=t.$implicit;T(2),Ie(e.medicalRecordNumber),T(2),Ie(e.fullName),T(2),z("routerLink",_i(3,ode,e.medicalRecordNumber))}}function ade(n,t){if(n&1){let e=Xe();p(0,"div",26)(1,"div",27)(2,"h3"),y(3,"Patient Details"),g(),p(4,"button",28),ee("click",function(){me(e);let r=X();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],ge(r.selectedMedicalHistory=void 0)}),g(),p(5,"table",29)(6,"tbody")(7,"tr")(8,"th"),y(9,"Medical Record Number"),g(),p(10,"td"),y(11),g()(),p(12,"tr")(13,"th"),y(14,"First Name"),g(),p(15,"td"),y(16),g()(),p(17,"tr")(18,"th"),y(19,"Last Name"),g(),p(20,"td"),y(21),g()(),p(22,"tr")(23,"th"),y(24,"Full Name"),g(),p(25,"td"),y(26),g()(),p(27,"tr")(28,"th"),y(29,"Date of Birth"),g(),p(30,"td"),y(31),g()(),p(32,"tr")(33,"th"),y(34,"Gender"),g(),p(35,"td"),y(36),g()(),p(37,"tr")(38,"th"),y(39,"Email"),g(),p(40,"td"),y(41),g()(),p(42,"tr")(43,"th"),y(44,"Phone Number"),g(),p(45,"td"),y(46),g()(),p(47,"tr")(48,"th"),y(49,"Emergency Contact"),g(),p(50,"td"),y(51),g()(),p(52,"tr")(53,"th"),y(54,"Appointment History"),g(),p(55,"td"),y(56),g()(),p(57,"tr")(58,"th"),y(59,"Is Active"),g(),p(60,"td"),y(61),g()(),p(62,"tr")(63,"th"),y(64,"Medical History"),g(),p(65,"td")(66,"button",30),ee("click",function(){me(e);let r=X();return ge(r.openMedicalHistoryModal())}),y(67," View Medical History "),g()()()()()()()}if(n&2){let e=X();T(11),Ie(e.selectedPatient.medicalRecordNumber),T(5),Ie(e.selectedPatient.firstName),T(5),Ie(e.selectedPatient.lastName),T(5),Ie(e.selectedPatient.fullName),T(5),Ie(e.selectedPatient.dateOfBirth),T(5),Ie(e.selectedPatient.gender===1?"Male":"Female"),T(5),Ie(e.selectedPatient.email),T(5),Ie(e.selectedPatient.phoneNumber),T(5),Ie(e.selectedPatient.emergencyContact),T(5),Et(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),T(5),Ie(e.selectedPatient.isActive?"Yes":"No")}}function lde(n,t){if(n&1&&(p(0,"li"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" ",e," ")}}function cde(n,t){if(n&1&&(p(0,"li"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" ",e.allergyName," ")}}function ude(n,t){n&1&&(p(0,"li"),y(1,"No allergies"),g())}function dde(n,t){if(n&1&&(p(0,"li"),y(1),g()),n&2){let e=t.$implicit;T(),Et(" ",e.medicalConditionName," ")}}function fde(n,t){n&1&&(p(0,"li"),y(1," No medical conditions "),g())}function hde(n,t){if(n&1){let e=Xe();p(0,"div",31)(1,"div",32)(2,"span",33),ee("click",function(){me(e);let r=X();return ge(r.closeMedicalHistoryModal())}),y(3,"\xD7"),g(),p(4,"h3"),y(5,"Medical History"),g(),p(6,"table",29)(7,"tbody")(8,"tr")(9,"th"),y(10,"Free Text"),g(),p(11,"td"),y(12),g()(),p(13,"tr")(14,"th"),y(15,"Family History"),g(),p(16,"td")(17,"ul"),ue(18,lde,2,1,"li",21),g()()(),p(19,"tr")(20,"th"),y(21,"Allergies"),g(),p(22,"td")(23,"ul",34),ue(24,cde,2,1,"li",21)(25,ude,2,0,"li",35),g()()(),p(26,"tr")(27,"th"),y(28,"Medical Conditions"),g(),p(29,"td")(30,"ul",36),ue(31,dde,2,1,"li",21)(32,fde,2,0,"li",35),g()()()()()()()}if(n&2){let e=X();T(12),Ie(e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.freeText),T(6),z("ngForOf",e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.familyHistory),T(6),z("ngForOf",e.selectedAllergies),T(),z("ngIf",e.selectedAllergies.length===0),T(6),z("ngForOf",e.selectedMedicalConditions),T(),z("ngIf",e.selectedMedicalConditions.length===0)}}var Ez=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}openMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!0}closeMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)(k(Na),k(bi),k(So),k(To),k(Nc))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-medical-history-manager"]],standalone:!0,features:[Fe],decls:40,vars:11,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],["class","modal",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[1,"allergies-list"],[4,"ngIf"],[1,"conditions-list"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h2",3),y(5,"Patients Manager"),g(),p(6,"div",4)(7,"form",5),ee("submit",function(s){return r.applyFilters(s)}),p(8,"input",6),Ue("ngModelChange",function(s){return Ve(r.filters.firstName,s)||(r.filters.firstName=s),s}),g(),p(9,"input",7),Ue("ngModelChange",function(s){return Ve(r.filters.lastName,s)||(r.filters.lastName=s),s}),g(),p(10,"input",8),Ue("ngModelChange",function(s){return Ve(r.filters.fullName,s)||(r.filters.fullName=s),s}),g(),p(11,"input",9),Ue("ngModelChange",function(s){return Ve(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),g(),p(12,"input",10),Ue("ngModelChange",function(s){return Ve(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),g(),p(13,"select",11),Ue("ngModelChange",function(s){return Ve(r.filters.gender,s)||(r.filters.gender=s),s}),p(14,"option",12),y(15,"Select Gender"),g(),p(16,"option",13),y(17,"Male"),g(),p(18,"option",14),y(19,"Female"),g()(),p(20,"input",15),Ue("ngModelChange",function(s){return Ve(r.filters.email,s)||(r.filters.email=s),s}),g(),p(21,"input",16),Ue("ngModelChange",function(s){return Ve(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),g(),p(22,"button",17),y(23,"Apply Filters"),g(),p(24,"button",18),ee("click",function(){return r.clearFilters()}),y(25," Clear Filters "),g()(),p(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th"),y(31,"Medical Record Number"),g(),p(32,"th"),y(33,"Name"),g(),p(34,"th"),y(35,"Actions"),g()()(),p(36,"tbody"),ue(37,sde,10,5,"tr",21),g()()()()(),ue(38,ade,68,11,"div",22),g(),ue(39,hde,33,6,"div",23),g()),i&2&&(T(8),Le("ngModel",r.filters.firstName),T(),Le("ngModel",r.filters.lastName),T(),Le("ngModel",r.filters.fullName),T(),Le("ngModel",r.filters.dateOfBirth),T(),Le("ngModel",r.filters.medicalRecordNumber),T(),Le("ngModel",r.filters.gender),T(7),Le("ngModel",r.filters.email),T(),Le("ngModel",r.filters.phoneNumber),T(16),z("ngForOf",r.patients),T(),z("ngIf",r.selectedPatient),T(),z("ngIf",r.isMedicalHistoryModalOpen))},dependencies:[Rt,st,xn,zt,vt,Ut,Oi,Ai,Ct,Wi,St,Lt,Tu,Tn,Hn,bt,At],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;height:900px;background-color:#f9f9f9;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:500px;height:900px;background-color:#fff;max-width:500px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{max-width:500px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{background-color:#3588d1;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0;margin-top:5px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover{background-color:#70b1e2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #888;width:600px;height:fit-content;max-height:600px;border-radius:10px;box-shadow:0 0 20px #0003;position:relative}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var Sz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-patient-policy"]],standalone:!0,features:[Fe],decls:156,vars:0,consts:[[1,"policy-container"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"h1"),y(3,"Privacy Policy"),g(),p(4,"p"),y(5,"Last updated: 11 de Dezembro de 2024"),g(),p(6,"section")(7,"h2"),y(8,"Introdu\xE7\xE3o"),g(),p(9,"p"),y(10," No mundo da sa\xFAde, a confidencialidade \xE9 fundamental. A prote\xE7\xE3o de dados de sa\xFAde \xE9 um direito fundamental de cada paciente, consagrado no Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD) (Artigo 4\xBA, n\xBA Artigo 32\xBA). A gest\xE3o manual ou sistemas desatualizados podem levar \xE0 perda de dados, acesso n\xE3o autorizado e incumprimento do RGPD. As consequ\xEAncias podem ser graves: multas elevadas, processos judiciais e danos \xE0 reputa\xE7\xE3o. A nossa equipa \xE9 composta pelos especialistas em seguran\xE7a inform\xE1tica e gest\xE3o de dados, Vasco Sousa, Jo\xE3o Pereira e Tiago Sousa e pela advogada especializada em prote\xE7\xE3o de dados, Maria Medina e hoje estamos aqui com o objetivo de apresentar o Hospital Management App, um sistema inovador que garante a gest\xE3o eficiente e segura de recursos e a marca\xE7\xE3o de consultas cir\xFArgicas, com total respeito pela privacidade dos seus pacientes (Artigo 13 e 14\xBA). O Hospital Management App foi concebido com base nos princ\xEDpios de prote\xE7\xE3o de dados desde a conce\xE7\xE3o e por defeito (Artigo 25\xBA) Este minimiza a recolha e o tratamento de dados, utilizando a pseudonimiza\xE7\xE3o para proteger a identidade dos pacientes, encripta todos os dados, garantindo a sua confidencialidade e integridade, controla o acesso aos dados, permitindo apenas a utilizadores autorizados aceder \xE0 informa\xE7\xE3o necess\xE1ria para o desempenho das suas fun\xE7\xF5es e mant\xE9m registos detalhados de todas as opera\xE7\xF5es de tratamento, permitindo auditorias e a demonstra\xE7\xE3o de conformidade com o RGPD (Artigo 24\xBA e 28\xBA) Com o Hospital Management App, pode ter a certeza de que est\xE1 a otimizar os seus processos, reduzindo custos e protegendo os dados sens\xEDveis dos seus pacientes, em total conformidade com o RGPD "),g()(),p(11,"section")(12,"h2"),y(13,"Respons\xE1vel pelo Tratamento de Dados"),g(),p(14,"p")(15,"strong"),y(16,"Nome da Empresa/Organiza\xE7\xE3o:"),g(),y(17," Hospital Management App"),ne(18,"br"),p(19,"strong"),y(20,"Contato:"),g(),y(21," 1211503@isep.ipp.pt"),ne(22,"br"),p(23,"strong"),y(24,"Encarregado de Prote\xE7\xE3o de Dados:"),g(),y(25," Jo\xE3o Pereira "),g()(),p(26,"section")(27,"h2"),y(28,"Dados Pessoais Coletados"),g(),p(29,"ul")(30,"li"),y(31,"Identifica\xE7\xE3o (nome, email, NIF)"),g(),p(32,"li"),y(33,"Dados de contato (n\xFAmero de telem\xF3vel pessoal e de emerg\xEAncia, e-mail)"),g(),p(34,"li"),y(35,"Dados m\xE9dicos (hist\xF3rico de sa\xFAde, alergias)"),g()()(),p(36,"section")(37,"h2"),y(38,"Processamento dos Dados pessoais"),g(),p(39,"p"),y(40,"Os dados passam por diversos tipos de processamento, incluindo:"),g(),p(41,"ul")(42,"li"),y(43,"Recolha: Os dados s\xE3o obtidos atrav\xE9s de diferentes meios, como formul\xE1rios de registo, prontu\xE1rios m\xE9dicos ou sistemas de agendamento."),g(),p(44,"li"),y(45,"Registo: Os dados recolhidos s\xE3o inseridos no Hospital Management App, nos campos apropriados de cada funcionalidade."),g(),p(46,"li"),y(47,"Organiza\xE7\xE3o: Os dados s\xE3o estruturados e categorizados dentro do sistema, de forma l\xF3gica e eficiente, facilitando a sua consulta e utiliza\xE7\xE3o. "),g(),p(48,"li"),y(49,"Consulta: Os dados s\xE3o acedidos e visualizados pelos utilizadores autorizados do Hospital Management App, de acordo com as suas fun\xE7\xF5es e permiss\xF5es. "),g(),p(50,"li"),y(51,"Utiliza\xE7\xE3o: Os dados s\xE3o utilizados para as finalidades espec\xEDficas para as quais foram recolhidos, como a gest\xE3o de informa\xE7\xF5es, o planeamento e agendamento cir\xFArgico, a visualiza\xE7\xE3o do hospital, a garantia da continuidade das opera\xE7\xF5es e a conformidade com o RGPD."),g(),p(52,"li"),y(53,"Quando aplic\xE1vel, apagamento: Os dados s\xE3o eliminados do sistema quando deixam de ser necess\xE1rios para as finalidades para as quais foram recolhidos, ou quando o titular dos dados exerce o seu direito de apagamento (direito a ser esquecido)"),g(),p(54,"p"),y(55,"Todas estas opera\xE7\xF5es respeitam os princ\xEDpios do RGPD, como a limita\xE7\xE3o das finalidades e a integridade e confidencialidade dos dados (Artigo 5.\xBA)"),g()()(),p(56,"section")(57,"h2"),y(58,"Finalidades do Tratamento"),g(),p(59,"p"),y(60,"Utilizamos os seus dados pessoais para:"),g(),p(61,"ul")(62,"li"),y(63,"Gest\xE3o de Informa\xE7\xF5es Essenciais"),g(),p(64,"li"),y(65,"Planeamento e Agendamento Cir\xFArgico"),g()()(),p(66,"section")(67,"h2"),y(68,"Base Legal para o Tratamento"),g(),p(69,"p"),y(70,"O tratamento de dados pessoais pode ser baseado nas seguintes bases legais:"),g(),p(71,"ul")(72,"li"),y(73,"Execu\xE7\xE3o de um contrato"),g(),p(74,"li"),y(75,"Cumprimento de uma obriga\xE7\xE3o legal"),g(),p(76,"li"),y(77,"Consentimento expl\xEDcito (para finalidades espec\xEDficas, como marketing)"),g(),p(78,"li"),y(79,"Interesses leg\xEDtimos da aplica\xE7\xE3o"),g()()(),p(80,"section")(81,"h2"),y(82,"Compartilhamento de Dados"),g(),p(83,"p"),y(84,"Os seus dados podem ser compartilhados com:"),g(),p(85,"ul")(86,"li"),y(87,"Parceiros e prestadores de servi\xE7os que auxiliam na execu\xE7\xE3o das nossas atividades"),g(),p(88,"li"),y(89,"Autoridades legais, quando exigido por lei"),g(),p(90,"li"),y(91,"Familiares quando se encontrar com limita\xE7\xF5es f\xEDsicas e ps\xEDcol\xF3gicas"),g()()(),p(92,"section")(93,"h2"),y(94,"Reten\xE7\xE3o de Dados"),g(),p(95,"p"),y(96," Os seus dados pessoais ser\xE3o armazenados apenas pelo tempo necess\xE1rio para cumprir as finalidades descritas nesta Pol\xEDtica ou conforme exigido por lei. Ap\xF3s o per\xEDodo de reten\xE7\xE3o, os dados ser\xE3o apagados ou anonimizados. "),g()(),p(97,"section")(98,"h2"),y(99,"Direitos do Titular dos Dados"),g(),p(100,"p"),y(101,"Voc\xEA possui os seguintes direitos em rela\xE7\xE3o aos seus dados pessoais:"),g(),p(102,"ul")(103,"li"),y(104,"Acesso aos dados tratados"),g(),p(105,"li"),y(106,"Retifica\xE7\xE3o de dados incorretos ou desatualizados"),g(),p(107,"li"),y(108,"Exclus\xE3o dos dados (direito ao esquecimento)"),g(),p(109,"li"),y(110,"Restri\xE7\xE3o do tratamento"),g(),p(111,"li"),y(112,"Portabilidade dos dados"),g(),p(113,"li"),y(114,"Oposi\xE7\xE3o ao tratamento em determinadas circunst\xE2ncias"),g(),p(115,"li"),y(116,"Retirada do consentimento, quando aplic\xE1vel"),g()(),p(117,"p"),y(118,"Para exercer os seus direitos, entre em contato connosco pelo e-mail "),p(119,"strong"),y(120,"1211503@isep.ipp.pt"),g(),y(121,". "),g()(),p(122,"section")(123,"h2"),y(124,"Transfer\xEAncia Internacional de Dados"),g(),p(125,"p"),y(126," Se houver necessidade de transfer\xEAncia de dados para fora do Espa\xE7o Econ\xF4mico Europeu (EEE), garantiremos que os seus dados estar\xE3o protegidos com medidas adequadas, como cl\xE1usulas contratuais padr\xE3o ou outras bases legais reconhecidas pelo RGPD. "),g()(),p(127,"section")(128,"h2"),y(129,"Seguran\xE7a dos Dados"),g(),p(130,"p"),y(131," Implementamos medidas t\xE9cnicas e organizacionais para proteger os seus dados pessoais contra acessos n\xE3o autorizados, perda, altera\xE7\xE3o ou destrui\xE7\xE3o. "),g()(),p(132,"section")(133,"h2"),y(134,"Altera\xE7\xF5es \xE0 Pol\xEDtica de Privacidade"),g(),p(135,"p"),y(136," Podemos atualizar esta Pol\xEDtica de Privacidade periodicamente. Notificaremos sobre mudan\xE7as significativas, caso necess\xE1rio. "),g()(),p(137,"section")(138,"h2"),y(139,"Reclama\xE7\xF5es"),g(),p(140,"p"),y(141," Se acreditar que os seus direitos foram violados, pode entrar em contato connosco para esclarecimentos. Al\xE9m disso, voc\xEA tem o direito de apresentar uma reclama\xE7\xE3o junto \xE0 autoridade supervisora do seu pa\xEDs. "),g()(),p(142,"section")(143,"h2"),y(144,"Contato"),g(),p(145,"p"),y(146," Para quaisquer d\xFAvidas, entre em contato conosco: "),g(),p(147,"ul")(148,"li")(149,"strong"),y(150,"E-mail:"),g(),y(151," 1211503@isep.ipp.pt"),g(),p(152,"li")(153,"strong"),y(154,"Telefone:"),g(),y(155," +351912345678"),g()()()())},dependencies:[Rt],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;font-family:Poppins,sans-serif,Arial,sans-serif;background-color:#f9f9f9;overflow:hidden}.policy-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;height:100vh;padding:20px;overflow-y:auto;background-color:#fff;color:#333;border-radius:8px;box-shadow:0 4px 10px #0000001a;max-width:900px;margin:auto;border:1px solid rgba(0,0,0,.1)}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;color:#007bff;text-align:center;font-weight:700}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:25px;padding:10px 15px;background-color:#f9f9f9;border-radius:8px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:10px;color:#004085;font-weight:600}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;margin-bottom:15px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;margin-left:20px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 1024px){.policy-container[_ngcontent-%COMP%]{max-width:100%;padding:15px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.policy-container[_ngcontent-%COMP%]{padding:10px;margin:10px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.policy-container[_ngcontent-%COMP%]{padding:8px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem}}"]})}}return n})();var Tz=(()=>{class n{constructor(e,i,r){this.operationRequestService=e,this.router=i,this.panelService=r,this.existingOperationRequest={priority:"",deadlineDate:""}}ngOnInit(){this.panelService.setPanelId("panel-admin");let e=this.extractOperationRequestFromUrl();this.getOperationRequest(e)}getOperationRequest(e){this.operationRequestService.getOperationRequests().subscribe(i=>{console.log("Operation requests fetched:",i);let r=i.find(o=>o.id===e);r?(this.existingOperationRequest=kt(Ee({},r),{deadlineDate:this.formatDate(r.deadlineDate)}),console.log("Operation request fetched:",r)):console.error("Operation request not found with id:",e)},i=>{console.error("Error fetching operation request",i)})}updateOperationRequest(e){e.preventDefault();let i=new Date;if(new Date(this.existingOperationRequest.deadlineDate)<=i){alert("The deadline date must be higher than today.");return}let o=this.extractOperationRequestFromUrl();console.log("Updating operation request:",o),this.operationRequestService.editOperationRequest(o,this.existingOperationRequest).subscribe(s=>{console.log("Operation request updated successfully:",s),alert("Operation request updated successfully!"),this.router.navigate(["/manage-patients"])},s=>{console.error("Error updating operation request:",s),alert("Error updating operation request: "+JSON.stringify(s))})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/update-operation-request\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Operation Request not found in URL.")}formatDate(e){let[i,r,o]=e.split("/");return`${o}-${r}-${i}`}clearForm(){this.existingOperationRequest={priority:"",deadlineDate:""}}static{this.\u0275fac=function(i){return new(i||n)(k(Ds),k(ct),k(bi))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-operation-request"]],standalone:!0,features:[Fe],decls:24,vars:2,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","type","button",1,"btn","btn-back"],[1,"update-title"],[1,"content-container"],[1,"update-form",3,"submit"],["name","priority","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["type","date","placeholder","Deadline Date","name","deadlineDate","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),y(5," Go Back "),g(),p(6,"h2",4),y(7," Update OperationRequest "),g(),p(8,"div",5)(9,"form",6),ee("submit",function(s){return r.updateOperationRequest(s)}),p(10,"select",7),Ue("ngModelChange",function(s){return Ve(r.existingOperationRequest.priority,s)||(r.existingOperationRequest.priority=s),s}),p(11,"option",8),y(12,"Select Priority"),g(),p(13,"option",9),y(14,"Elective Surgery"),g(),p(15,"option",10),y(16,"Urgent Surgery"),g(),p(17,"option",11),y(18,"Emergency Surgery"),g()(),p(19,"input",12),Ue("ngModelChange",function(s){return Ve(r.existingOperationRequest.deadlineDate,s)||(r.existingOperationRequest.deadlineDate=s),s}),g(),p(20,"button",13),y(21," Update OperationRequest "),g(),p(22,"button",14),ee("click",function(){return r.clearForm()}),y(23," Clear Form "),g()()()()()()),i&2&&(T(10),Le("ngModel",r.existingOperationRequest.priority),T(9),Le("ngModel",r.existingOperationRequest.deadlineDate))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,sn,Tn,Hn,Rt,bt,At,st],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:35;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Eh=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/appointments"}createAppointment(e){return console.log("Creating appointment:",e),this.http.post(`${this.apiUrl}/create`,e).pipe(un(i=>(console.error("Error creating appointment:",i),En(()=>new Error("Failed to create appointment. Please try again later.")))))}getAppointments(){return console.log("getAppointments called"),this.http.get(`${this.apiUrl}`).pipe(un(e=>(console.error("Error fetching appointments:",e),En(()=>new Error("Failed to fetch appointments. Please try again later.")))))}getAppointmentById(e){return console.log("getAppointmentById called"),this.http.get(`${this.apiUrl}/${e}`).pipe(un(i=>(console.error("Error fetching appointment:",i),En(()=>new Error("Failed to fetch appointment. Please try again later.")))))}updateAppointment(e,i){return console.log("Updating appointment:",i),this.http.put(`${this.apiUrl}/update/${e}`,i).pipe(un(r=>(console.error("Error updating appointment:",r),En(()=>new Error("Failed to update appointment. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(Ae(Yn))}}static{this.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pde(n,t){if(n&1&&(p(0,"option",16),y(1),g()),n&2){let e=t.$implicit;z("value",e.id),T(),Ie(e.name)}}function mde(n,t){if(n&1){let e=Xe();p(0,"div",17),y(1),p(2,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.updateTeam(r,o.id))}),g()()}if(n&2){let e=t.$implicit;T(),Et(" ",e.licenseNumber+" - "+e.fullName," "),T(),z("value",e.id)}}function gde(n,t){if(n&1){let e=Xe();p(0,"div",17),y(1),p(2,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.updateTeam(r,o.id))}),g()()}if(n&2){let e=t.$implicit;T(),Et(" ",e.licenseNumber+" - "+e.fullName," "),T(),z("value",e.id)}}var Pz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.operationRequests=[],this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.fetchOperationRequests()}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{console.log(this.selectedOperationRequest.operationType),this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],console.log("Filtered operation types:",this.selectedOperationType),this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)}),console.log("Fetched doctors list:",this.doctors),console.log("Fetched nurses list:",this.nurses)):console.error("No staff list found for the selected operation type")}createAppointment(e){e.preventDefault(),console.log("Creating appointment with data:",this.newAppointment),this.appointmentService.createAppointment(this.newAppointment).subscribe(i=>{console.log("Appointment created:",i),this.clearForm(),alert("Appointment created successfully"),this.router.navigate(["/appointment-manager"])},i=>{console.error("Error creating appointment",i),alert("Error creating appointment")})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/create-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Appointment not found in URL.")}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.id===this.extractOperationRequestFromUrl()),console.log("Filtered operation requests:",this.operationRequests),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.newAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.newAppointment.team.push(i);else{let o=this.newAppointment.team.indexOf(i);o>-1&&this.newAppointment.team.splice(o,1)}console.log("Updated team:",this.newAppointment.team)}static{this.\u0275fac=function(i){return new(i||n)(k(Eh),k(ct),k(vs),k(Ds))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-create-appointment"]],standalone:!0,features:[Fe],decls:28,vars:5,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),y(5," Go Back "),g(),p(6,"h2",4),y(7,"Create Appointment"),g(),p(8,"div",5)(9,"form",6),ee("submit",function(s){return r.createAppointment(s)}),p(10,"select",7),Ue("ngModelChange",function(s){return Ve(r.newAppointment.roomId,s)||(r.newAppointment.roomId=s),s}),p(11,"option",8),y(12,"Select Room"),g(),ue(13,pde,2,2,"option",9),g(),p(14,"input",10),Ue("ngModelChange",function(s){return Ve(r.newAppointment.dateTime,s)||(r.newAppointment.dateTime=s),s}),g(),p(15,"div",11)(16,"div",12)(17,"label"),y(18,"Doctors:"),g(),ue(19,mde,3,2,"div",13),g(),p(20,"div",12)(21,"label"),y(22,"Nurses:"),g(),ue(23,gde,3,2,"div",13),g()(),p(24,"button",14),y(25,"Create Appointment"),g(),p(26,"button",15),ee("click",function(){return r.clearForm()}),y(27," Clear Form "),g()()()()()()),i&2&&(T(10),Le("ngModel",r.newAppointment.roomId),T(3),z("ngForOf",r.rooms),T(),Le("ngModel",r.newAppointment.dateTime),T(5),z("ngForOf",r.doctors),T(4),z("ngForOf",r.nurses))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,sn,Tn,Hn,Rt,bt,At,wa,st,xn],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var vde=n=>["/update-appointment",n];function _de(n,t){if(n&1&&(p(0,"tr")(1,"td"),y(2),g(),p(3,"td"),y(4),g(),p(5,"td"),y(6),g(),p(7,"td"),y(8),g(),p(9,"td"),y(10),Lr(11,"date"),g(),p(12,"td"),y(13),g(),p(14,"td"),y(15),g(),p(16,"td"),y(17),g(),p(18,"td"),y(19),g(),p(20,"td")(21,"a",8),y(22,"Edit"),g()()()),n&2){let e=t.$implicit,i=X();T(2),Ie(e.operationRequest==null?null:e.operationRequest.patientName),T(2),Ie(e.operationRequest==null?null:e.operationRequest.doctorLicenseNumber),T(2),Ie(e.operationRequest==null?null:e.operationRequest.priority),T(2),Ie(e.roomId),T(2),Ie(al(11,10,e.dateTime,"dd/MM/yyyy - HH:mm")),T(3),Ie(e.status),T(2),Ie(i.getDoctorNames(e.teamDetails)),T(2),Ie(i.getNurseNames(e.teamDetails)),T(2),Ie(e.operationRequest==null?null:e.operationRequest.operationType),T(2),z("routerLink",_i(13,vde,e.id))}}var Dz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.operationRequestService=i,this.staffService=r,this.datePipe=o,this.filters={},this.appointments=[],this.operationRequests=[],this.staffList=[],this.statusTypes=["Pending","Confirmed","Cancelled"]}ngOnInit(){this.fetchAppointments()}fetchAppointments(){this.appointmentService.getAppointments().subscribe(e=>{e.isSuccess&&e._value?(this.appointments=e._value,console.log("Appointments fetched:",this.appointments),this.fetchOperationRequests()):console.error("Failed to fetch appointments:",e.error)},e=>{console.error("Error fetching appointments",e)})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e,this.mergeAppointmentWithOperationRequests()},e=>{console.error("Error fetching operation requests",e)})}mergeAppointmentWithOperationRequests(){this.appointments=this.appointments.map(e=>{let i=this.operationRequests.find(r=>r.id===e.requestId);return kt(Ee({},e),{operationRequest:i})}),console.log("Merged appointments:",this.appointments),this.fetchStaffList()}fetchStaffList(){let e=this.appointments.flatMap(r=>r.team),i=[...new Set(e)];Promise.all(i.map(r=>this.staffService.getStaffById(r).toPromise())).then(r=>{this.staffList=r,this.mergeAppointmentWithStaffList()}).catch(r=>{console.error("Error fetching staff list",r)})}mergeAppointmentWithStaffList(){this.appointments=this.appointments.map(e=>{let i=e.team.map(r=>this.staffList.find(o=>o.id===r)).filter(r=>r!==void 0);return kt(Ee({},e),{teamDetails:i})}),console.log("Merged appointments with staff list:",this.appointments)}getTeamNames(e,i){return e?e.filter(r=>r.staffType===i).map(r=>`${r.fullName} (${r.licenseNumber})`).join(", "):""}getDoctorNames(e){return this.getTeamNames(e,"Doctor")}getNurseNames(e){return this.getTeamNames(e,"Nurse")}static{this.\u0275fac=function(i){return new(i||n)(k(Eh),k(Ds),k(ir),k(bu))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-appointment-manager"]],standalone:!0,features:[zi([bu]),Fe],decls:33,vars:1,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-update",3,"routerLink"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"h2",3),y(5,"Appointments Manager"),g(),p(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),y(12,"Patient Name"),g(),p(13,"th"),y(14,"Doctor License Number"),g(),p(15,"th"),y(16,"Priority"),g(),p(17,"th"),y(18,"Room ID"),g(),p(19,"th"),y(20,"Date and Time"),g(),p(21,"th"),y(22,"Status"),g(),p(23,"th"),y(24,"Doctors"),g(),p(25,"th"),y(26,"Nurses"),g(),p(27,"th"),y(28,"Operation Type"),g(),p(29,"th"),y(30,"Actions"),g()()(),p(31,"tbody"),ue(32,_de,23,15,"tr",7),g()()()()()()()),i&2&&(T(32),z("ngForOf",r.appointments))},dependencies:[vt,nr,st,xn,bu,bt,At,Rt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:100%;max-width:1400px;height:auto;background-color:#f9f9f9;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;max-width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;max-width:600px;margin-top:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}"]})}}return n})();function yde(n,t){if(n&1&&(p(0,"option",16),y(1),g()),n&2){let e=t.$implicit;z("value",e.id),T(),Ie(e.name)}}function xde(n,t){if(n&1){let e=Xe();p(0,"div",17),y(1),p(2,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.updateTeam(r,o.id))}),g()()}if(n&2){let e=t.$implicit,i=X();T(),Et(" ",e.licenseNumber+" - "+e.fullName," "),T(),z("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}function bde(n,t){if(n&1){let e=Xe();p(0,"div",17),y(1),p(2,"input",18),ee("change",function(r){let o=me(e).$implicit,s=X();return ge(s.updateTeam(r,o.id))}),g()()}if(n&2){let e=t.$implicit,i=X();T(),Et(" ",e.licenseNumber+" - "+e.fullName," "),T(),z("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}var Oz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.operationRequests=[],this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.loadAppointment()}loadAppointment(){let e=this.getAppointmentIdFromRoute();this.appointmentService.getAppointmentById(e).subscribe(i=>{i.isSuccess?(console.log("Appointment loaded:",i._value),this.existingAppointment=i._value,this.existingAppointment.dateTime=new Date(this.existingAppointment.dateTime).toISOString().slice(0,16),this.fetchOperationRequests()):console.error("Error loading appointment",i.error)},i=>{console.error("Error loading appointment",i)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)})):console.error("No staff list found for the selected operation type")}updateAppointment(e){e.preventDefault();let i={roomId:this.existingAppointment.roomId,dateTime:this.existingAppointment.dateTime,team:this.existingAppointment.team},r=this.getAppointmentIdFromRoute();this.appointmentService.updateAppointment(r,i).subscribe(o=>{this.clearForm(),alert("Appointment updated successfully"),this.router.navigate(["/appointment-manager"])},o=>{console.error("Error updating appointment",o),alert("Error updating appointment")})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests:",e),console.log("Existing appointment:",this.existingAppointment),console.log("Existing appointment request ID:",this.existingAppointment.requestId),this.existingAppointment.requestId?(this.operationRequests=e.filter(i=>i.id===this.existingAppointment.requestId),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.existingAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")):console.error("Existing appointment request ID is undefined")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.existingAppointment.team.push(i);else{let o=this.existingAppointment.team.indexOf(i);o>-1&&this.existingAppointment.team.splice(o,1)}}getAppointmentIdFromRoute(){let e=window.location.href,i=/\/update-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return console.log("Appointment ID:",r[1]),r[1];throw new Error("Appointment not found in URL.")}static{this.\u0275fac=function(i){return new(i||n)(k(Eh),k(ct),k(vs),k(Ds))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-update-appointment"]],standalone:!0,features:[Fe],decls:28,vars:5,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/appointment-manager","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value","checked"]],template:function(i,r){i&1&&(p(0,"div",0),ne(1,"app-sidebar"),p(2,"div",1)(3,"div",2)(4,"button",3),y(5," Go Back "),g(),p(6,"h2",4),y(7,"Update Appointment"),g(),p(8,"div",5)(9,"form",6),ee("submit",function(s){return r.updateAppointment(s)}),p(10,"select",7),Ue("ngModelChange",function(s){return Ve(r.existingAppointment.roomId,s)||(r.existingAppointment.roomId=s),s}),p(11,"option",8),y(12,"Select Room"),g(),ue(13,yde,2,2,"option",9),g(),p(14,"input",10),Ue("ngModelChange",function(s){return Ve(r.existingAppointment.dateTime,s)||(r.existingAppointment.dateTime=s),s}),g(),p(15,"div",11)(16,"div",12)(17,"label"),y(18,"Doctors:"),g(),ue(19,xde,3,3,"div",13),g(),p(20,"div",12)(21,"label"),y(22,"Nurses:"),g(),ue(23,bde,3,3,"div",13),g()(),p(24,"button",14),y(25,"Update Appointment"),g(),p(26,"button",15),ee("click",function(){return r.clearForm()}),y(27," Clear Form "),g()()()()()()),i&2&&(T(10),Le("ngModel",r.existingAppointment.roomId),T(3),z("ngForOf",r.rooms),T(),Le("ngModel",r.existingAppointment.dateTime),T(5),z("ngForOf",r.doctors),T(4),z("ngForOf",r.nurses))},dependencies:[vt,Ut,Oi,Ai,Ct,Wi,St,Lt,sn,Tn,Hn,Rt,bt,At,wa,st,xn],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var Az=[{path:"register",component:J3},{path:"login",component:Z3},{path:"update-staff/ConfirmUpdates",component:EV},{path:"activate",component:vz},{path:"panel-admin",component:_V,canActivate:[rr]},{path:"panel-doctor",component:_z,canActivate:[ka]},{path:"create-staff",component:rL,canActivate:[rr]},{path:"search-staffs",component:vV,canActivate:[rr]},{path:"update-staff/:id",component:yV,canActivate:[rr]},{path:"view-availability/:id",component:mz,canActivate:[rr]},{path:"operation-types",component:nL,canActivate:[rr]},{path:"specializations",component:Cz,canActivate:[rr],children:[{path:"create-specialization",component:Hm,canActivate:[rr]},{path:"update-specialization/:id",component:Hm,canActivate:[rr]}]},{path:"update-operation-type/:name",component:sL,canActivate:[rr]},{path:"create-operation-type",component:iL,canActivate:[rr]},{path:"patient-panel",component:xV,canActivate:[VP]},{path:"patient-settings",component:oL,canActivate:[VP]},{path:"patient-policy",component:Sz},{path:"hospital3d",component:hV},{path:"delete-user",component:mV},{path:"manage-patients",component:bV,canActivate:[rr]},{path:"create-patient",component:CV,canActivate:[rr]},{path:"activate-patient-user",component:wV},{path:"update-patient/:medicalRecordNumber",component:SV,canActivate:[rr]},{path:"operation-requests",component:yz,canActivate:[ka]},{path:"create-operation-request",component:xz,canActivate:[ka]},{path:"update-operation-request/:id",component:Tz,canActivate:[ka]},{path:"manage-allergies-and-conditions",component:Mz,canActivate:[rr],children:[{path:"create-allergies",component:pb,canActivate:[rr]},{path:"create-conditions",component:mb,canActivate:[rr]},{path:"update-allergies/:id",component:gb,canActivate:[rr]},{path:"update-conditions/:id",component:vb,canActivate:[rr]}]},{path:"update-medical-history/:medicalRecordNumber",component:wz,canActivate:[ka]},{path:"medical-history-manager",component:Ez,canActivate:[ka]},{path:"create-appointment/:id",component:Pz,canActivate:[ka]},{path:"appointment-manager",component:Dz,canActivate:[ka]},{path:"update-appointment/:id",component:Oz,canActivate:[ka]},{path:"",component:Q3},{path:"**",component:eL}];var Cde={provide:z1,useClass:vk,multi:!0},Iz={providers:[pF({eventCoalescing:!0}),s3(Az),gk(),j1(rk()),Ew(ok),Cde]};var Rz=(()=>{class n{constructor(e){this.router=e,this.title="Angular-View"}static{this.\u0275fac=function(i){return new(i||n)(k(ct))}}static{this.\u0275cmp=Oe({type:n,selectors:[["app-root"]],standalone:!0,features:[Fe],decls:2,vars:0,consts:[[1,"main-content"]],template:function(i,r){i&1&&(p(0,"main",0),ne(1,"router-outlet"),g())},dependencies:[st,OE,vt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-content-with-sidebar[_ngcontent-%COMP%]{margin-left:85px;width:calc(100% - 85px);transition:margin-left .4s ease,width .4s ease;height:100vh;overflow:hidden}.main-content-with-sidebar[_ngcontent-%COMP%] ~ .sidebar[_ngcontent-%COMP%]{transition:all .4s ease}.main-content[_ngcontent-%COMP%]{width:100%;height:100%}']})}}return n})();pk(Rz,Iz).catch(n=>console.error(n));

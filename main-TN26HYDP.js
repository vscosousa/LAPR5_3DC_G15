var JW=Object.create;var NC=Object.defineProperty,QW=Object.defineProperties,eG=Object.getOwnPropertyDescriptor,tG=Object.getOwnPropertyDescriptors,nG=Object.getOwnPropertyNames,Bg=Object.getOwnPropertySymbols,iG=Object.getPrototypeOf,FC=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable;var $A=(n,t,e)=>t in n?NC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,je=(n,t)=>{for(var e in t||={})FC.call(t,e)&&$A(n,e,t[e]);if(Bg)for(var e of Bg(t))qA.call(t,e)&&$A(n,e,t[e]);return n},$t=(n,t)=>QW(n,tG(t));var $h=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var zg=(n,t)=>{var e={};for(var i in n)FC.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Bg)for(var i of Bg(n))t.indexOf(i)<0&&qA.call(n,i)&&(e[i]=n[i]);return e};var LC=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var rG=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of nG(t))!FC.call(n,r)&&r!==e&&NC(n,r,{get:()=>t[r],enumerable:!(i=eG(t,r))||i.enumerable});return n};var UC=(n,t,e)=>(e=n!=null?JW(iG(n)):{},rG(t||!n||!n.__esModule?NC(e,"default",{value:n,enumerable:!0}):e,n));var Ka=(n,t,e)=>new Promise((i,r)=>{var o=l=>{try{a(e.next(l))}catch(u){r(u)}},s=l=>{try{a(e.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(n,t)).next())});var bV=LC((uh,Lm)=>{"use strict";(function(){var n,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,m=1,p=2,y=1,C=2,x=4,b=8,P=16,E=32,D=64,L=128,B=256,k=512,G=30,F="...",T=800,N=16,S=1,q=2,oe=3,ee=1/0,ge=9007199254740991,se=17976931348623157e292,de=NaN,J=4294967295,Q=J-1,Ie=J>>>1,Le=[["ary",L],["bind",y],["bindKey",C],["curry",b],["curryRight",P],["flip",k],["partial",E],["partialRight",D],["rearg",B]],ke="[object Arguments]",Ce="[object Array]",He="[object AsyncFunction]",Ge="[object Boolean]",Ve="[object Date]",mt="[object DOMException]",pt="[object Error]",Lt="[object Function]",Pn="[object GeneratorFunction]",O="[object Map]",Me="[object Number]",j="[object Null]",Y="[object Object]",W="[object Promise]",ne="[object Proxy]",ve="[object RegExp]",Ee="[object Set]",ie="[object String]",U="[object Symbol]",R="[object Undefined]",K="[object WeakMap]",_e="[object WeakSet]",Pe="[object ArrayBuffer]",ye="[object DataView]",st="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",ln="[object Int16Array]",Fe="[object Int32Array]",lt="[object Uint8Array]",It="[object Uint8ClampedArray]",Ot="[object Uint16Array]",ht="[object Uint32Array]",Dn=/\b__p \+= '';/g,tn=/\b(__p \+=) '' \+/g,Qn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ae=/&(?:amp|lt|gt|quot|#39);/g,tt=/[&<>"']/g,Se=RegExp(ae.source),Be=RegExp(tt.source),ft=/<%-([\s\S]+?)%>/g,ct=/<%([\s\S]+?)%>/g,nn=/<%=([\s\S]+?)%>/g,Di=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vr=/^\w*$/,Xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,to=/[\\^$.*+?()[\]{}|]/g,As=RegExp(to.source),id=/^\s+/,Zm=/\s/,Ba=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dh=/\{\n\/\* \[wrapped with (.+)\] \*/,Km=/,? & /,Jm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rd=/[()=,{}\[\]\/\s]/,Qm=/\\(\\)?/g,od=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oh=/\w*$/,eg=/^[-+]0x[0-9a-f]+$/i,Sb=/^0b[01]+$/i,Tb=/^\[object .+?Constructor\]$/,Pb=/^0o[0-7]+$/i,z=/^(?:0|[1-9]\d*)$/,he=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,be=/['\n\r\u2028\u2029\\]/g,fe="\\ud800-\\udfff",Qe="\\u0300-\\u036f",ut="\\ufe20-\\ufe2f",Et="\\u20d0-\\u20ff",wt=Qe+ut+Et,Xt="\\u2700-\\u27bf",rn="a-z\\xdf-\\xf6\\xf8-\\xff",St="\\xac\\xb1\\xd7\\xf7",zn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ai="\\u2000-\\u206f",hi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dr="A-Z\\xc0-\\xd6\\xd8-\\xde",jn="\\ufe0e\\ufe0f",At=St+zn+ai+hi,Ao="['\u2019]",Yn="["+fe+"]",mo="["+At+"]",Is="["+wt+"]",Nr="\\d+",Wc="["+Xt+"]",li="["+rn+"]",Io="[^"+fe+At+Nr+Xt+rn+Dr+"]",za="\\ud83c[\\udffb-\\udfff]",go="(?:"+Is+"|"+za+")",Rs="[^"+fe+"]",Jo="(?:\\ud83c[\\udde6-\\uddff]){2}",sd="[\\ud800-\\udbff][\\udc00-\\udfff]",ad="["+Dr+"]",ID="\\u200d",RD="(?:"+li+"|"+Io+")",t4="(?:"+ad+"|"+Io+")",kD="(?:"+Ao+"(?:d|ll|m|re|s|t|ve))?",ND="(?:"+Ao+"(?:D|LL|M|RE|S|T|VE))?",FD=go+"?",LD="["+jn+"]?",n4="(?:"+ID+"(?:"+[Rs,Jo,sd].join("|")+")"+LD+FD+")*",i4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",r4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",UD=LD+FD+n4,o4="(?:"+[Wc,Jo,sd].join("|")+")"+UD,s4="(?:"+[Rs+Is+"?",Is,Jo,sd,Yn].join("|")+")",a4=RegExp(Ao,"g"),l4=RegExp(Is,"g"),Db=RegExp(za+"(?="+za+")|"+s4+UD,"g"),c4=RegExp([ad+"?"+li+"+"+kD+"(?="+[mo,ad,"$"].join("|")+")",t4+"+"+ND+"(?="+[mo,ad+RD,"$"].join("|")+")",ad+"?"+RD+"+"+kD,ad+"+"+ND,r4,i4,Nr,o4].join("|"),"g"),u4=RegExp("["+ID+fe+wt+jn+"]"),d4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,f4=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],h4=-1,Ei={};Ei[st]=Ei[et]=Ei[nt]=Ei[ln]=Ei[Fe]=Ei[lt]=Ei[It]=Ei[Ot]=Ei[ht]=!0,Ei[ke]=Ei[Ce]=Ei[Pe]=Ei[Ge]=Ei[ye]=Ei[Ve]=Ei[pt]=Ei[Lt]=Ei[O]=Ei[Me]=Ei[Y]=Ei[ve]=Ei[Ee]=Ei[ie]=Ei[K]=!1;var Ci={};Ci[ke]=Ci[Ce]=Ci[Pe]=Ci[ye]=Ci[Ge]=Ci[Ve]=Ci[st]=Ci[et]=Ci[nt]=Ci[ln]=Ci[Fe]=Ci[O]=Ci[Me]=Ci[Y]=Ci[ve]=Ci[Ee]=Ci[ie]=Ci[U]=Ci[lt]=Ci[It]=Ci[Ot]=Ci[ht]=!0,Ci[pt]=Ci[Lt]=Ci[K]=!1;var p4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},m4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},v4=parseFloat,y4=parseInt,VD=typeof global=="object"&&global&&global.Object===Object&&global,x4=typeof self=="object"&&self&&self.Object===Object&&self,yr=VD||x4||Function("return this")(),Ob=typeof uh=="object"&&uh&&!uh.nodeType&&uh,Gc=Ob&&typeof Lm=="object"&&Lm&&!Lm.nodeType&&Lm,BD=Gc&&Gc.exports===Ob,Ab=BD&&VD.process,Qo=function(){try{var ue=Gc&&Gc.require&&Gc.require("util").types;return ue||Ab&&Ab.binding&&Ab.binding("util")}catch{}}(),zD=Qo&&Qo.isArrayBuffer,HD=Qo&&Qo.isDate,jD=Qo&&Qo.isMap,WD=Qo&&Qo.isRegExp,GD=Qo&&Qo.isSet,$D=Qo&&Qo.isTypedArray;function Ro(ue,De,we){switch(we.length){case 0:return ue.call(De);case 1:return ue.call(De,we[0]);case 2:return ue.call(De,we[0],we[1]);case 3:return ue.call(De,we[0],we[1],we[2])}return ue.apply(De,we)}function b4(ue,De,we,gt){for(var on=-1,Zn=ue==null?0:ue.length;++on<Zn;){var ar=ue[on];De(gt,ar,we(ar),ue)}return gt}function es(ue,De){for(var we=-1,gt=ue==null?0:ue.length;++we<gt&&De(ue[we],we,ue)!==!1;);return ue}function C4(ue,De){for(var we=ue==null?0:ue.length;we--&&De(ue[we],we,ue)!==!1;);return ue}function qD(ue,De){for(var we=-1,gt=ue==null?0:ue.length;++we<gt;)if(!De(ue[we],we,ue))return!1;return!0}function Vl(ue,De){for(var we=-1,gt=ue==null?0:ue.length,on=0,Zn=[];++we<gt;){var ar=ue[we];De(ar,we,ue)&&(Zn[on++]=ar)}return Zn}function tg(ue,De){var we=ue==null?0:ue.length;return!!we&&ld(ue,De,0)>-1}function Ib(ue,De,we){for(var gt=-1,on=ue==null?0:ue.length;++gt<on;)if(we(De,ue[gt]))return!0;return!1}function Oi(ue,De){for(var we=-1,gt=ue==null?0:ue.length,on=Array(gt);++we<gt;)on[we]=De(ue[we],we,ue);return on}function Bl(ue,De){for(var we=-1,gt=De.length,on=ue.length;++we<gt;)ue[on+we]=De[we];return ue}function Rb(ue,De,we,gt){var on=-1,Zn=ue==null?0:ue.length;for(gt&&Zn&&(we=ue[++on]);++on<Zn;)we=De(we,ue[on],on,ue);return we}function M4(ue,De,we,gt){var on=ue==null?0:ue.length;for(gt&&on&&(we=ue[--on]);on--;)we=De(we,ue[on],on,ue);return we}function kb(ue,De){for(var we=-1,gt=ue==null?0:ue.length;++we<gt;)if(De(ue[we],we,ue))return!0;return!1}var w4=Nb("length");function E4(ue){return ue.split("")}function S4(ue){return ue.match(Jm)||[]}function YD(ue,De,we){var gt;return we(ue,function(on,Zn,ar){if(De(on,Zn,ar))return gt=Zn,!1}),gt}function ng(ue,De,we,gt){for(var on=ue.length,Zn=we+(gt?1:-1);gt?Zn--:++Zn<on;)if(De(ue[Zn],Zn,ue))return Zn;return-1}function ld(ue,De,we){return De===De?U4(ue,De,we):ng(ue,XD,we)}function T4(ue,De,we,gt){for(var on=we-1,Zn=ue.length;++on<Zn;)if(gt(ue[on],De))return on;return-1}function XD(ue){return ue!==ue}function ZD(ue,De){var we=ue==null?0:ue.length;return we?Lb(ue,De)/we:de}function Nb(ue){return function(De){return De==null?n:De[ue]}}function Fb(ue){return function(De){return ue==null?n:ue[De]}}function KD(ue,De,we,gt,on){return on(ue,function(Zn,ar,pi){we=gt?(gt=!1,Zn):De(we,Zn,ar,pi)}),we}function P4(ue,De){var we=ue.length;for(ue.sort(De);we--;)ue[we]=ue[we].value;return ue}function Lb(ue,De){for(var we,gt=-1,on=ue.length;++gt<on;){var Zn=De(ue[gt]);Zn!==n&&(we=we===n?Zn:we+Zn)}return we}function Ub(ue,De){for(var we=-1,gt=Array(ue);++we<ue;)gt[we]=De(we);return gt}function D4(ue,De){return Oi(De,function(we){return[we,ue[we]]})}function JD(ue){return ue&&ue.slice(0,nO(ue)+1).replace(id,"")}function ko(ue){return function(De){return ue(De)}}function Vb(ue,De){return Oi(De,function(we){return ue[we]})}function Ah(ue,De){return ue.has(De)}function QD(ue,De){for(var we=-1,gt=ue.length;++we<gt&&ld(De,ue[we],0)>-1;);return we}function eO(ue,De){for(var we=ue.length;we--&&ld(De,ue[we],0)>-1;);return we}function O4(ue,De){for(var we=ue.length,gt=0;we--;)ue[we]===De&&++gt;return gt}var A4=Fb(p4),I4=Fb(m4);function R4(ue){return"\\"+_4[ue]}function k4(ue,De){return ue==null?n:ue[De]}function cd(ue){return u4.test(ue)}function N4(ue){return d4.test(ue)}function F4(ue){for(var De,we=[];!(De=ue.next()).done;)we.push(De.value);return we}function Bb(ue){var De=-1,we=Array(ue.size);return ue.forEach(function(gt,on){we[++De]=[on,gt]}),we}function tO(ue,De){return function(we){return ue(De(we))}}function zl(ue,De){for(var we=-1,gt=ue.length,on=0,Zn=[];++we<gt;){var ar=ue[we];(ar===De||ar===l)&&(ue[we]=l,Zn[on++]=we)}return Zn}function ig(ue){var De=-1,we=Array(ue.size);return ue.forEach(function(gt){we[++De]=gt}),we}function L4(ue){var De=-1,we=Array(ue.size);return ue.forEach(function(gt){we[++De]=[gt,gt]}),we}function U4(ue,De,we){for(var gt=we-1,on=ue.length;++gt<on;)if(ue[gt]===De)return gt;return-1}function V4(ue,De,we){for(var gt=we+1;gt--;)if(ue[gt]===De)return gt;return gt}function ud(ue){return cd(ue)?z4(ue):w4(ue)}function ks(ue){return cd(ue)?H4(ue):E4(ue)}function nO(ue){for(var De=ue.length;De--&&Zm.test(ue.charAt(De)););return De}var B4=Fb(g4);function z4(ue){for(var De=Db.lastIndex=0;Db.test(ue);)++De;return De}function H4(ue){return ue.match(Db)||[]}function j4(ue){return ue.match(c4)||[]}var W4=function ue(De){De=De==null?yr:Hl.defaults(yr.Object(),De,Hl.pick(yr,f4));var we=De.Array,gt=De.Date,on=De.Error,Zn=De.Function,ar=De.Math,pi=De.Object,zb=De.RegExp,G4=De.String,ts=De.TypeError,rg=we.prototype,$4=Zn.prototype,dd=pi.prototype,og=De["__core-js_shared__"],sg=$4.toString,ii=dd.hasOwnProperty,q4=0,iO=function(){var c=/[^.]+$/.exec(og&&og.keys&&og.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),ag=dd.toString,Y4=sg.call(pi),X4=yr._,Z4=zb("^"+sg.call(ii).replace(to,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lg=BD?De.Buffer:n,jl=De.Symbol,cg=De.Uint8Array,rO=lg?lg.allocUnsafe:n,ug=tO(pi.getPrototypeOf,pi),oO=pi.create,sO=dd.propertyIsEnumerable,dg=rg.splice,aO=jl?jl.isConcatSpreadable:n,Ih=jl?jl.iterator:n,$c=jl?jl.toStringTag:n,fg=function(){try{var c=Kc(pi,"defineProperty");return c({},"",{}),c}catch{}}(),K4=De.clearTimeout!==yr.clearTimeout&&De.clearTimeout,J4=gt&&gt.now!==yr.Date.now&&gt.now,Q4=De.setTimeout!==yr.setTimeout&&De.setTimeout,hg=ar.ceil,pg=ar.floor,Hb=pi.getOwnPropertySymbols,e5=lg?lg.isBuffer:n,lO=De.isFinite,t5=rg.join,n5=tO(pi.keys,pi),lr=ar.max,Fr=ar.min,i5=gt.now,r5=De.parseInt,cO=ar.random,o5=rg.reverse,jb=Kc(De,"DataView"),Rh=Kc(De,"Map"),Wb=Kc(De,"Promise"),fd=Kc(De,"Set"),kh=Kc(De,"WeakMap"),Nh=Kc(pi,"create"),mg=kh&&new kh,hd={},s5=Jc(jb),a5=Jc(Rh),l5=Jc(Wb),c5=Jc(fd),u5=Jc(kh),gg=jl?jl.prototype:n,Fh=gg?gg.valueOf:n,uO=gg?gg.toString:n;function V(c){if(Ui(c)&&!cn(c)&&!(c instanceof Nn)){if(c instanceof ns)return c;if(ii.call(c,"__wrapped__"))return dA(c)}return new ns(c)}var pd=function(){function c(){}return function(d){if(!Fi(d))return{};if(oO)return oO(d);c.prototype=d;var v=new c;return c.prototype=n,v}}();function _g(){}function ns(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}V.templateSettings={escape:ft,evaluate:ct,interpolate:nn,variable:"",imports:{_:V}},V.prototype=_g.prototype,V.prototype.constructor=V,ns.prototype=pd(_g.prototype),ns.prototype.constructor=ns;function Nn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function d5(){var c=new Nn(this.__wrapped__);return c.__actions__=_o(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=_o(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=_o(this.__views__),c}function f5(){if(this.__filtered__){var c=new Nn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function h5(){var c=this.__wrapped__.value(),d=this.__dir__,v=cn(c),w=d<0,I=v?c.length:0,H=EH(0,I,this.__views__),Z=H.start,re=H.end,pe=re-Z,Re=w?re:Z-1,Ne=this.__iteratees__,We=Ne.length,rt=0,Tt=Fr(pe,this.__takeCount__);if(!v||!w&&I==pe&&Tt==pe)return kO(c,this.__actions__);var Ht=[];e:for(;pe--&&rt<Tt;){Re+=d;for(var bn=-1,jt=c[Re];++bn<We;){var An=Ne[bn],Un=An.iteratee,Lo=An.type,ro=Un(jt);if(Lo==q)jt=ro;else if(!ro){if(Lo==S)continue e;break e}}Ht[rt++]=jt}return Ht}Nn.prototype=pd(_g.prototype),Nn.prototype.constructor=Nn;function qc(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function p5(){this.__data__=Nh?Nh(null):{},this.size=0}function m5(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function g5(c){var d=this.__data__;if(Nh){var v=d[c];return v===s?n:v}return ii.call(d,c)?d[c]:n}function _5(c){var d=this.__data__;return Nh?d[c]!==n:ii.call(d,c)}function v5(c,d){var v=this.__data__;return this.size+=this.has(c)?0:1,v[c]=Nh&&d===n?s:d,this}qc.prototype.clear=p5,qc.prototype.delete=m5,qc.prototype.get=g5,qc.prototype.has=_5,qc.prototype.set=v5;function Ha(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function y5(){this.__data__=[],this.size=0}function x5(c){var d=this.__data__,v=vg(d,c);if(v<0)return!1;var w=d.length-1;return v==w?d.pop():dg.call(d,v,1),--this.size,!0}function b5(c){var d=this.__data__,v=vg(d,c);return v<0?n:d[v][1]}function C5(c){return vg(this.__data__,c)>-1}function M5(c,d){var v=this.__data__,w=vg(v,c);return w<0?(++this.size,v.push([c,d])):v[w][1]=d,this}Ha.prototype.clear=y5,Ha.prototype.delete=x5,Ha.prototype.get=b5,Ha.prototype.has=C5,Ha.prototype.set=M5;function ja(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function w5(){this.size=0,this.__data__={hash:new qc,map:new(Rh||Ha),string:new qc}}function E5(c){var d=Og(this,c).delete(c);return this.size-=d?1:0,d}function S5(c){return Og(this,c).get(c)}function T5(c){return Og(this,c).has(c)}function P5(c,d){var v=Og(this,c),w=v.size;return v.set(c,d),this.size+=v.size==w?0:1,this}ja.prototype.clear=w5,ja.prototype.delete=E5,ja.prototype.get=S5,ja.prototype.has=T5,ja.prototype.set=P5;function Yc(c){var d=-1,v=c==null?0:c.length;for(this.__data__=new ja;++d<v;)this.add(c[d])}function D5(c){return this.__data__.set(c,s),this}function O5(c){return this.__data__.has(c)}Yc.prototype.add=Yc.prototype.push=D5,Yc.prototype.has=O5;function Ns(c){var d=this.__data__=new Ha(c);this.size=d.size}function A5(){this.__data__=new Ha,this.size=0}function I5(c){var d=this.__data__,v=d.delete(c);return this.size=d.size,v}function R5(c){return this.__data__.get(c)}function k5(c){return this.__data__.has(c)}function N5(c,d){var v=this.__data__;if(v instanceof Ha){var w=v.__data__;if(!Rh||w.length<e-1)return w.push([c,d]),this.size=++v.size,this;v=this.__data__=new ja(w)}return v.set(c,d),this.size=v.size,this}Ns.prototype.clear=A5,Ns.prototype.delete=I5,Ns.prototype.get=R5,Ns.prototype.has=k5,Ns.prototype.set=N5;function dO(c,d){var v=cn(c),w=!v&&Qc(c),I=!v&&!w&&Yl(c),H=!v&&!w&&!I&&vd(c),Z=v||w||I||H,re=Z?Ub(c.length,G4):[],pe=re.length;for(var Re in c)(d||ii.call(c,Re))&&!(Z&&(Re=="length"||I&&(Re=="offset"||Re=="parent")||H&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||qa(Re,pe)))&&re.push(Re);return re}function fO(c){var d=c.length;return d?c[tC(0,d-1)]:n}function F5(c,d){return Ag(_o(c),Xc(d,0,c.length))}function L5(c){return Ag(_o(c))}function Gb(c,d,v){(v!==n&&!Fs(c[d],v)||v===n&&!(d in c))&&Wa(c,d,v)}function Lh(c,d,v){var w=c[d];(!(ii.call(c,d)&&Fs(w,v))||v===n&&!(d in c))&&Wa(c,d,v)}function vg(c,d){for(var v=c.length;v--;)if(Fs(c[v][0],d))return v;return-1}function U5(c,d,v,w){return Wl(c,function(I,H,Z){d(w,I,v(I),Z)}),w}function hO(c,d){return c&&ca(d,xr(d),c)}function V5(c,d){return c&&ca(d,yo(d),c)}function Wa(c,d,v){d=="__proto__"&&fg?fg(c,d,{configurable:!0,enumerable:!0,value:v,writable:!0}):c[d]=v}function $b(c,d){for(var v=-1,w=d.length,I=we(w),H=c==null;++v<w;)I[v]=H?n:SC(c,d[v]);return I}function Xc(c,d,v){return c===c&&(v!==n&&(c=c<=v?c:v),d!==n&&(c=c>=d?c:d)),c}function is(c,d,v,w,I,H){var Z,re=d&u,pe=d&f,Re=d&h;if(v&&(Z=I?v(c,w,I,H):v(c)),Z!==n)return Z;if(!Fi(c))return c;var Ne=cn(c);if(Ne){if(Z=TH(c),!re)return _o(c,Z)}else{var We=Lr(c),rt=We==Lt||We==Pn;if(Yl(c))return LO(c,re);if(We==Y||We==ke||rt&&!I){if(Z=pe||rt?{}:nA(c),!re)return pe?gH(c,V5(Z,c)):mH(c,hO(Z,c))}else{if(!Ci[We])return I?c:{};Z=PH(c,We,re)}}H||(H=new Ns);var Tt=H.get(c);if(Tt)return Tt;H.set(c,Z),AA(c)?c.forEach(function(jt){Z.add(is(jt,d,v,jt,c,H))}):DA(c)&&c.forEach(function(jt,An){Z.set(An,is(jt,d,v,An,c,H))});var Ht=Re?pe?fC:dC:pe?yo:xr,bn=Ne?n:Ht(c);return es(bn||c,function(jt,An){bn&&(An=jt,jt=c[An]),Lh(Z,An,is(jt,d,v,An,c,H))}),Z}function B5(c){var d=xr(c);return function(v){return pO(v,c,d)}}function pO(c,d,v){var w=v.length;if(c==null)return!w;for(c=pi(c);w--;){var I=v[w],H=d[I],Z=c[I];if(Z===n&&!(I in c)||!H(Z))return!1}return!0}function mO(c,d,v){if(typeof c!="function")throw new ts(r);return Wh(function(){c.apply(n,v)},d)}function Uh(c,d,v,w){var I=-1,H=tg,Z=!0,re=c.length,pe=[],Re=d.length;if(!re)return pe;v&&(d=Oi(d,ko(v))),w?(H=Ib,Z=!1):d.length>=e&&(H=Ah,Z=!1,d=new Yc(d));e:for(;++I<re;){var Ne=c[I],We=v==null?Ne:v(Ne);if(Ne=w||Ne!==0?Ne:0,Z&&We===We){for(var rt=Re;rt--;)if(d[rt]===We)continue e;pe.push(Ne)}else H(d,We,w)||pe.push(Ne)}return pe}var Wl=HO(la),gO=HO(Yb,!0);function z5(c,d){var v=!0;return Wl(c,function(w,I,H){return v=!!d(w,I,H),v}),v}function yg(c,d,v){for(var w=-1,I=c.length;++w<I;){var H=c[w],Z=d(H);if(Z!=null&&(re===n?Z===Z&&!Fo(Z):v(Z,re)))var re=Z,pe=H}return pe}function H5(c,d,v,w){var I=c.length;for(v=gn(v),v<0&&(v=-v>I?0:I+v),w=w===n||w>I?I:gn(w),w<0&&(w+=I),w=v>w?0:RA(w);v<w;)c[v++]=d;return c}function _O(c,d){var v=[];return Wl(c,function(w,I,H){d(w,I,H)&&v.push(w)}),v}function Or(c,d,v,w,I){var H=-1,Z=c.length;for(v||(v=OH),I||(I=[]);++H<Z;){var re=c[H];d>0&&v(re)?d>1?Or(re,d-1,v,w,I):Bl(I,re):w||(I[I.length]=re)}return I}var qb=jO(),vO=jO(!0);function la(c,d){return c&&qb(c,d,xr)}function Yb(c,d){return c&&vO(c,d,xr)}function xg(c,d){return Vl(d,function(v){return Ya(c[v])})}function Zc(c,d){d=$l(d,c);for(var v=0,w=d.length;c!=null&&v<w;)c=c[ua(d[v++])];return v&&v==w?c:n}function yO(c,d,v){var w=d(c);return cn(c)?w:Bl(w,v(c))}function no(c){return c==null?c===n?R:j:$c&&$c in pi(c)?wH(c):LH(c)}function Xb(c,d){return c>d}function j5(c,d){return c!=null&&ii.call(c,d)}function W5(c,d){return c!=null&&d in pi(c)}function G5(c,d,v){return c>=Fr(d,v)&&c<lr(d,v)}function Zb(c,d,v){for(var w=v?Ib:tg,I=c[0].length,H=c.length,Z=H,re=we(H),pe=1/0,Re=[];Z--;){var Ne=c[Z];Z&&d&&(Ne=Oi(Ne,ko(d))),pe=Fr(Ne.length,pe),re[Z]=!v&&(d||I>=120&&Ne.length>=120)?new Yc(Z&&Ne):n}Ne=c[0];var We=-1,rt=re[0];e:for(;++We<I&&Re.length<pe;){var Tt=Ne[We],Ht=d?d(Tt):Tt;if(Tt=v||Tt!==0?Tt:0,!(rt?Ah(rt,Ht):w(Re,Ht,v))){for(Z=H;--Z;){var bn=re[Z];if(!(bn?Ah(bn,Ht):w(c[Z],Ht,v)))continue e}rt&&rt.push(Ht),Re.push(Tt)}}return Re}function $5(c,d,v,w){return la(c,function(I,H,Z){d(w,v(I),H,Z)}),w}function Vh(c,d,v){d=$l(d,c),c=sA(c,d);var w=c==null?c:c[ua(os(d))];return w==null?n:Ro(w,c,v)}function xO(c){return Ui(c)&&no(c)==ke}function q5(c){return Ui(c)&&no(c)==Pe}function Y5(c){return Ui(c)&&no(c)==Ve}function Bh(c,d,v,w,I){return c===d?!0:c==null||d==null||!Ui(c)&&!Ui(d)?c!==c&&d!==d:X5(c,d,v,w,Bh,I)}function X5(c,d,v,w,I,H){var Z=cn(c),re=cn(d),pe=Z?Ce:Lr(c),Re=re?Ce:Lr(d);pe=pe==ke?Y:pe,Re=Re==ke?Y:Re;var Ne=pe==Y,We=Re==Y,rt=pe==Re;if(rt&&Yl(c)){if(!Yl(d))return!1;Z=!0,Ne=!1}if(rt&&!Ne)return H||(H=new Ns),Z||vd(c)?QO(c,d,v,w,I,H):CH(c,d,pe,v,w,I,H);if(!(v&m)){var Tt=Ne&&ii.call(c,"__wrapped__"),Ht=We&&ii.call(d,"__wrapped__");if(Tt||Ht){var bn=Tt?c.value():c,jt=Ht?d.value():d;return H||(H=new Ns),I(bn,jt,v,w,H)}}return rt?(H||(H=new Ns),MH(c,d,v,w,I,H)):!1}function Z5(c){return Ui(c)&&Lr(c)==O}function Kb(c,d,v,w){var I=v.length,H=I,Z=!w;if(c==null)return!H;for(c=pi(c);I--;){var re=v[I];if(Z&&re[2]?re[1]!==c[re[0]]:!(re[0]in c))return!1}for(;++I<H;){re=v[I];var pe=re[0],Re=c[pe],Ne=re[1];if(Z&&re[2]){if(Re===n&&!(pe in c))return!1}else{var We=new Ns;if(w)var rt=w(Re,Ne,pe,c,d,We);if(!(rt===n?Bh(Ne,Re,m|p,w,We):rt))return!1}}return!0}function bO(c){if(!Fi(c)||IH(c))return!1;var d=Ya(c)?Z4:Tb;return d.test(Jc(c))}function K5(c){return Ui(c)&&no(c)==ve}function J5(c){return Ui(c)&&Lr(c)==Ee}function Q5(c){return Ui(c)&&Lg(c.length)&&!!Ei[no(c)]}function CO(c){return typeof c=="function"?c:c==null?xo:typeof c=="object"?cn(c)?EO(c[0],c[1]):wO(c):WA(c)}function Jb(c){if(!jh(c))return n5(c);var d=[];for(var v in pi(c))ii.call(c,v)&&v!="constructor"&&d.push(v);return d}function eH(c){if(!Fi(c))return FH(c);var d=jh(c),v=[];for(var w in c)w=="constructor"&&(d||!ii.call(c,w))||v.push(w);return v}function Qb(c,d){return c<d}function MO(c,d){var v=-1,w=vo(c)?we(c.length):[];return Wl(c,function(I,H,Z){w[++v]=d(I,H,Z)}),w}function wO(c){var d=pC(c);return d.length==1&&d[0][2]?rA(d[0][0],d[0][1]):function(v){return v===c||Kb(v,c,d)}}function EO(c,d){return gC(c)&&iA(d)?rA(ua(c),d):function(v){var w=SC(v,c);return w===n&&w===d?TC(v,c):Bh(d,w,m|p)}}function bg(c,d,v,w,I){c!==d&&qb(d,function(H,Z){if(I||(I=new Ns),Fi(H))tH(c,d,Z,v,bg,w,I);else{var re=w?w(vC(c,Z),H,Z+"",c,d,I):n;re===n&&(re=H),Gb(c,Z,re)}},yo)}function tH(c,d,v,w,I,H,Z){var re=vC(c,v),pe=vC(d,v),Re=Z.get(pe);if(Re){Gb(c,v,Re);return}var Ne=H?H(re,pe,v+"",c,d,Z):n,We=Ne===n;if(We){var rt=cn(pe),Tt=!rt&&Yl(pe),Ht=!rt&&!Tt&&vd(pe);Ne=pe,rt||Tt||Ht?cn(re)?Ne=re:Wi(re)?Ne=_o(re):Tt?(We=!1,Ne=LO(pe,!0)):Ht?(We=!1,Ne=UO(pe,!0)):Ne=[]:Gh(pe)||Qc(pe)?(Ne=re,Qc(re)?Ne=kA(re):(!Fi(re)||Ya(re))&&(Ne=nA(pe))):We=!1}We&&(Z.set(pe,Ne),I(Ne,pe,w,H,Z),Z.delete(pe)),Gb(c,v,Ne)}function SO(c,d){var v=c.length;if(v)return d+=d<0?v:0,qa(d,v)?c[d]:n}function TO(c,d,v){d.length?d=Oi(d,function(H){return cn(H)?function(Z){return Zc(Z,H.length===1?H[0]:H)}:H}):d=[xo];var w=-1;d=Oi(d,ko(zt()));var I=MO(c,function(H,Z,re){var pe=Oi(d,function(Re){return Re(H)});return{criteria:pe,index:++w,value:H}});return P4(I,function(H,Z){return pH(H,Z,v)})}function nH(c,d){return PO(c,d,function(v,w){return TC(c,w)})}function PO(c,d,v){for(var w=-1,I=d.length,H={};++w<I;){var Z=d[w],re=Zc(c,Z);v(re,Z)&&zh(H,$l(Z,c),re)}return H}function iH(c){return function(d){return Zc(d,c)}}function eC(c,d,v,w){var I=w?T4:ld,H=-1,Z=d.length,re=c;for(c===d&&(d=_o(d)),v&&(re=Oi(c,ko(v)));++H<Z;)for(var pe=0,Re=d[H],Ne=v?v(Re):Re;(pe=I(re,Ne,pe,w))>-1;)re!==c&&dg.call(re,pe,1),dg.call(c,pe,1);return c}function DO(c,d){for(var v=c?d.length:0,w=v-1;v--;){var I=d[v];if(v==w||I!==H){var H=I;qa(I)?dg.call(c,I,1):rC(c,I)}}return c}function tC(c,d){return c+pg(cO()*(d-c+1))}function rH(c,d,v,w){for(var I=-1,H=lr(hg((d-c)/(v||1)),0),Z=we(H);H--;)Z[w?H:++I]=c,c+=v;return Z}function nC(c,d){var v="";if(!c||d<1||d>ge)return v;do d%2&&(v+=c),d=pg(d/2),d&&(c+=c);while(d);return v}function En(c,d){return yC(oA(c,d,xo),c+"")}function oH(c){return fO(yd(c))}function sH(c,d){var v=yd(c);return Ag(v,Xc(d,0,v.length))}function zh(c,d,v,w){if(!Fi(c))return c;d=$l(d,c);for(var I=-1,H=d.length,Z=H-1,re=c;re!=null&&++I<H;){var pe=ua(d[I]),Re=v;if(pe==="__proto__"||pe==="constructor"||pe==="prototype")return c;if(I!=Z){var Ne=re[pe];Re=w?w(Ne,pe,re):n,Re===n&&(Re=Fi(Ne)?Ne:qa(d[I+1])?[]:{})}Lh(re,pe,Re),re=re[pe]}return c}var OO=mg?function(c,d){return mg.set(c,d),c}:xo,aH=fg?function(c,d){return fg(c,"toString",{configurable:!0,enumerable:!1,value:DC(d),writable:!0})}:xo;function lH(c){return Ag(yd(c))}function rs(c,d,v){var w=-1,I=c.length;d<0&&(d=-d>I?0:I+d),v=v>I?I:v,v<0&&(v+=I),I=d>v?0:v-d>>>0,d>>>=0;for(var H=we(I);++w<I;)H[w]=c[w+d];return H}function cH(c,d){var v;return Wl(c,function(w,I,H){return v=d(w,I,H),!v}),!!v}function Cg(c,d,v){var w=0,I=c==null?w:c.length;if(typeof d=="number"&&d===d&&I<=Ie){for(;w<I;){var H=w+I>>>1,Z=c[H];Z!==null&&!Fo(Z)&&(v?Z<=d:Z<d)?w=H+1:I=H}return I}return iC(c,d,xo,v)}function iC(c,d,v,w){var I=0,H=c==null?0:c.length;if(H===0)return 0;d=v(d);for(var Z=d!==d,re=d===null,pe=Fo(d),Re=d===n;I<H;){var Ne=pg((I+H)/2),We=v(c[Ne]),rt=We!==n,Tt=We===null,Ht=We===We,bn=Fo(We);if(Z)var jt=w||Ht;else Re?jt=Ht&&(w||rt):re?jt=Ht&&rt&&(w||!Tt):pe?jt=Ht&&rt&&!Tt&&(w||!bn):Tt||bn?jt=!1:jt=w?We<=d:We<d;jt?I=Ne+1:H=Ne}return Fr(H,Q)}function AO(c,d){for(var v=-1,w=c.length,I=0,H=[];++v<w;){var Z=c[v],re=d?d(Z):Z;if(!v||!Fs(re,pe)){var pe=re;H[I++]=Z===0?0:Z}}return H}function IO(c){return typeof c=="number"?c:Fo(c)?de:+c}function No(c){if(typeof c=="string")return c;if(cn(c))return Oi(c,No)+"";if(Fo(c))return uO?uO.call(c):"";var d=c+"";return d=="0"&&1/c==-ee?"-0":d}function Gl(c,d,v){var w=-1,I=tg,H=c.length,Z=!0,re=[],pe=re;if(v)Z=!1,I=Ib;else if(H>=e){var Re=d?null:xH(c);if(Re)return ig(Re);Z=!1,I=Ah,pe=new Yc}else pe=d?[]:re;e:for(;++w<H;){var Ne=c[w],We=d?d(Ne):Ne;if(Ne=v||Ne!==0?Ne:0,Z&&We===We){for(var rt=pe.length;rt--;)if(pe[rt]===We)continue e;d&&pe.push(We),re.push(Ne)}else I(pe,We,v)||(pe!==re&&pe.push(We),re.push(Ne))}return re}function rC(c,d){return d=$l(d,c),c=sA(c,d),c==null||delete c[ua(os(d))]}function RO(c,d,v,w){return zh(c,d,v(Zc(c,d)),w)}function Mg(c,d,v,w){for(var I=c.length,H=w?I:-1;(w?H--:++H<I)&&d(c[H],H,c););return v?rs(c,w?0:H,w?H+1:I):rs(c,w?H+1:0,w?I:H)}function kO(c,d){var v=c;return v instanceof Nn&&(v=v.value()),Rb(d,function(w,I){return I.func.apply(I.thisArg,Bl([w],I.args))},v)}function oC(c,d,v){var w=c.length;if(w<2)return w?Gl(c[0]):[];for(var I=-1,H=we(w);++I<w;)for(var Z=c[I],re=-1;++re<w;)re!=I&&(H[I]=Uh(H[I]||Z,c[re],d,v));return Gl(Or(H,1),d,v)}function NO(c,d,v){for(var w=-1,I=c.length,H=d.length,Z={};++w<I;){var re=w<H?d[w]:n;v(Z,c[w],re)}return Z}function sC(c){return Wi(c)?c:[]}function aC(c){return typeof c=="function"?c:xo}function $l(c,d){return cn(c)?c:gC(c,d)?[c]:uA(ei(c))}var uH=En;function ql(c,d,v){var w=c.length;return v=v===n?w:v,!d&&v>=w?c:rs(c,d,v)}var FO=K4||function(c){return yr.clearTimeout(c)};function LO(c,d){if(d)return c.slice();var v=c.length,w=rO?rO(v):new c.constructor(v);return c.copy(w),w}function lC(c){var d=new c.constructor(c.byteLength);return new cg(d).set(new cg(c)),d}function dH(c,d){var v=d?lC(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.byteLength)}function fH(c){var d=new c.constructor(c.source,Oh.exec(c));return d.lastIndex=c.lastIndex,d}function hH(c){return Fh?pi(Fh.call(c)):{}}function UO(c,d){var v=d?lC(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.length)}function VO(c,d){if(c!==d){var v=c!==n,w=c===null,I=c===c,H=Fo(c),Z=d!==n,re=d===null,pe=d===d,Re=Fo(d);if(!re&&!Re&&!H&&c>d||H&&Z&&pe&&!re&&!Re||w&&Z&&pe||!v&&pe||!I)return 1;if(!w&&!H&&!Re&&c<d||Re&&v&&I&&!w&&!H||re&&v&&I||!Z&&I||!pe)return-1}return 0}function pH(c,d,v){for(var w=-1,I=c.criteria,H=d.criteria,Z=I.length,re=v.length;++w<Z;){var pe=VO(I[w],H[w]);if(pe){if(w>=re)return pe;var Re=v[w];return pe*(Re=="desc"?-1:1)}}return c.index-d.index}function BO(c,d,v,w){for(var I=-1,H=c.length,Z=v.length,re=-1,pe=d.length,Re=lr(H-Z,0),Ne=we(pe+Re),We=!w;++re<pe;)Ne[re]=d[re];for(;++I<Z;)(We||I<H)&&(Ne[v[I]]=c[I]);for(;Re--;)Ne[re++]=c[I++];return Ne}function zO(c,d,v,w){for(var I=-1,H=c.length,Z=-1,re=v.length,pe=-1,Re=d.length,Ne=lr(H-re,0),We=we(Ne+Re),rt=!w;++I<Ne;)We[I]=c[I];for(var Tt=I;++pe<Re;)We[Tt+pe]=d[pe];for(;++Z<re;)(rt||I<H)&&(We[Tt+v[Z]]=c[I++]);return We}function _o(c,d){var v=-1,w=c.length;for(d||(d=we(w));++v<w;)d[v]=c[v];return d}function ca(c,d,v,w){var I=!v;v||(v={});for(var H=-1,Z=d.length;++H<Z;){var re=d[H],pe=w?w(v[re],c[re],re,v,c):n;pe===n&&(pe=c[re]),I?Wa(v,re,pe):Lh(v,re,pe)}return v}function mH(c,d){return ca(c,mC(c),d)}function gH(c,d){return ca(c,eA(c),d)}function wg(c,d){return function(v,w){var I=cn(v)?b4:U5,H=d?d():{};return I(v,c,zt(w,2),H)}}function md(c){return En(function(d,v){var w=-1,I=v.length,H=I>1?v[I-1]:n,Z=I>2?v[2]:n;for(H=c.length>3&&typeof H=="function"?(I--,H):n,Z&&io(v[0],v[1],Z)&&(H=I<3?n:H,I=1),d=pi(d);++w<I;){var re=v[w];re&&c(d,re,w,H)}return d})}function HO(c,d){return function(v,w){if(v==null)return v;if(!vo(v))return c(v,w);for(var I=v.length,H=d?I:-1,Z=pi(v);(d?H--:++H<I)&&w(Z[H],H,Z)!==!1;);return v}}function jO(c){return function(d,v,w){for(var I=-1,H=pi(d),Z=w(d),re=Z.length;re--;){var pe=Z[c?re:++I];if(v(H[pe],pe,H)===!1)break}return d}}function _H(c,d,v){var w=d&y,I=Hh(c);function H(){var Z=this&&this!==yr&&this instanceof H?I:c;return Z.apply(w?v:this,arguments)}return H}function WO(c){return function(d){d=ei(d);var v=cd(d)?ks(d):n,w=v?v[0]:d.charAt(0),I=v?ql(v,1).join(""):d.slice(1);return w[c]()+I}}function gd(c){return function(d){return Rb(HA(zA(d).replace(a4,"")),c,"")}}function Hh(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var v=pd(c.prototype),w=c.apply(v,d);return Fi(w)?w:v}}function vH(c,d,v){var w=Hh(c);function I(){for(var H=arguments.length,Z=we(H),re=H,pe=_d(I);re--;)Z[re]=arguments[re];var Re=H<3&&Z[0]!==pe&&Z[H-1]!==pe?[]:zl(Z,pe);if(H-=Re.length,H<v)return XO(c,d,Eg,I.placeholder,n,Z,Re,n,n,v-H);var Ne=this&&this!==yr&&this instanceof I?w:c;return Ro(Ne,this,Z)}return I}function GO(c){return function(d,v,w){var I=pi(d);if(!vo(d)){var H=zt(v,3);d=xr(d),v=function(re){return H(I[re],re,I)}}var Z=c(d,v,w);return Z>-1?I[H?d[Z]:Z]:n}}function $O(c){return $a(function(d){var v=d.length,w=v,I=ns.prototype.thru;for(c&&d.reverse();w--;){var H=d[w];if(typeof H!="function")throw new ts(r);if(I&&!Z&&Dg(H)=="wrapper")var Z=new ns([],!0)}for(w=Z?w:v;++w<v;){H=d[w];var re=Dg(H),pe=re=="wrapper"?hC(H):n;pe&&_C(pe[0])&&pe[1]==(L|b|E|B)&&!pe[4].length&&pe[9]==1?Z=Z[Dg(pe[0])].apply(Z,pe[3]):Z=H.length==1&&_C(H)?Z[re]():Z.thru(H)}return function(){var Re=arguments,Ne=Re[0];if(Z&&Re.length==1&&cn(Ne))return Z.plant(Ne).value();for(var We=0,rt=v?d[We].apply(this,Re):Ne;++We<v;)rt=d[We].call(this,rt);return rt}})}function Eg(c,d,v,w,I,H,Z,re,pe,Re){var Ne=d&L,We=d&y,rt=d&C,Tt=d&(b|P),Ht=d&k,bn=rt?n:Hh(c);function jt(){for(var An=arguments.length,Un=we(An),Lo=An;Lo--;)Un[Lo]=arguments[Lo];if(Tt)var ro=_d(jt),Uo=O4(Un,ro);if(w&&(Un=BO(Un,w,I,Tt)),H&&(Un=zO(Un,H,Z,Tt)),An-=Uo,Tt&&An<Re){var Gi=zl(Un,ro);return XO(c,d,Eg,jt.placeholder,v,Un,Gi,re,pe,Re-An)}var Ls=We?v:this,Za=rt?Ls[c]:c;return An=Un.length,re?Un=UH(Un,re):Ht&&An>1&&Un.reverse(),Ne&&pe<An&&(Un.length=pe),this&&this!==yr&&this instanceof jt&&(Za=bn||Hh(Za)),Za.apply(Ls,Un)}return jt}function qO(c,d){return function(v,w){return $5(v,c,d(w),{})}}function Sg(c,d){return function(v,w){var I;if(v===n&&w===n)return d;if(v!==n&&(I=v),w!==n){if(I===n)return w;typeof v=="string"||typeof w=="string"?(v=No(v),w=No(w)):(v=IO(v),w=IO(w)),I=c(v,w)}return I}}function cC(c){return $a(function(d){return d=Oi(d,ko(zt())),En(function(v){var w=this;return c(d,function(I){return Ro(I,w,v)})})})}function Tg(c,d){d=d===n?" ":No(d);var v=d.length;if(v<2)return v?nC(d,c):d;var w=nC(d,hg(c/ud(d)));return cd(d)?ql(ks(w),0,c).join(""):w.slice(0,c)}function yH(c,d,v,w){var I=d&y,H=Hh(c);function Z(){for(var re=-1,pe=arguments.length,Re=-1,Ne=w.length,We=we(Ne+pe),rt=this&&this!==yr&&this instanceof Z?H:c;++Re<Ne;)We[Re]=w[Re];for(;pe--;)We[Re++]=arguments[++re];return Ro(rt,I?v:this,We)}return Z}function YO(c){return function(d,v,w){return w&&typeof w!="number"&&io(d,v,w)&&(v=w=n),d=Xa(d),v===n?(v=d,d=0):v=Xa(v),w=w===n?d<v?1:-1:Xa(w),rH(d,v,w,c)}}function Pg(c){return function(d,v){return typeof d=="string"&&typeof v=="string"||(d=ss(d),v=ss(v)),c(d,v)}}function XO(c,d,v,w,I,H,Z,re,pe,Re){var Ne=d&b,We=Ne?Z:n,rt=Ne?n:Z,Tt=Ne?H:n,Ht=Ne?n:H;d|=Ne?E:D,d&=~(Ne?D:E),d&x||(d&=~(y|C));var bn=[c,d,I,Tt,We,Ht,rt,re,pe,Re],jt=v.apply(n,bn);return _C(c)&&aA(jt,bn),jt.placeholder=w,lA(jt,c,d)}function uC(c){var d=ar[c];return function(v,w){if(v=ss(v),w=w==null?0:Fr(gn(w),292),w&&lO(v)){var I=(ei(v)+"e").split("e"),H=d(I[0]+"e"+(+I[1]+w));return I=(ei(H)+"e").split("e"),+(I[0]+"e"+(+I[1]-w))}return d(v)}}var xH=fd&&1/ig(new fd([,-0]))[1]==ee?function(c){return new fd(c)}:IC;function ZO(c){return function(d){var v=Lr(d);return v==O?Bb(d):v==Ee?L4(d):D4(d,c(d))}}function Ga(c,d,v,w,I,H,Z,re){var pe=d&C;if(!pe&&typeof c!="function")throw new ts(r);var Re=w?w.length:0;if(Re||(d&=~(E|D),w=I=n),Z=Z===n?Z:lr(gn(Z),0),re=re===n?re:gn(re),Re-=I?I.length:0,d&D){var Ne=w,We=I;w=I=n}var rt=pe?n:hC(c),Tt=[c,d,v,w,I,Ne,We,H,Z,re];if(rt&&NH(Tt,rt),c=Tt[0],d=Tt[1],v=Tt[2],w=Tt[3],I=Tt[4],re=Tt[9]=Tt[9]===n?pe?0:c.length:lr(Tt[9]-Re,0),!re&&d&(b|P)&&(d&=~(b|P)),!d||d==y)var Ht=_H(c,d,v);else d==b||d==P?Ht=vH(c,d,re):(d==E||d==(y|E))&&!I.length?Ht=yH(c,d,v,w):Ht=Eg.apply(n,Tt);var bn=rt?OO:aA;return lA(bn(Ht,Tt),c,d)}function KO(c,d,v,w){return c===n||Fs(c,dd[v])&&!ii.call(w,v)?d:c}function JO(c,d,v,w,I,H){return Fi(c)&&Fi(d)&&(H.set(d,c),bg(c,d,n,JO,H),H.delete(d)),c}function bH(c){return Gh(c)?n:c}function QO(c,d,v,w,I,H){var Z=v&m,re=c.length,pe=d.length;if(re!=pe&&!(Z&&pe>re))return!1;var Re=H.get(c),Ne=H.get(d);if(Re&&Ne)return Re==d&&Ne==c;var We=-1,rt=!0,Tt=v&p?new Yc:n;for(H.set(c,d),H.set(d,c);++We<re;){var Ht=c[We],bn=d[We];if(w)var jt=Z?w(bn,Ht,We,d,c,H):w(Ht,bn,We,c,d,H);if(jt!==n){if(jt)continue;rt=!1;break}if(Tt){if(!kb(d,function(An,Un){if(!Ah(Tt,Un)&&(Ht===An||I(Ht,An,v,w,H)))return Tt.push(Un)})){rt=!1;break}}else if(!(Ht===bn||I(Ht,bn,v,w,H))){rt=!1;break}}return H.delete(c),H.delete(d),rt}function CH(c,d,v,w,I,H,Z){switch(v){case ye:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Pe:return!(c.byteLength!=d.byteLength||!H(new cg(c),new cg(d)));case Ge:case Ve:case Me:return Fs(+c,+d);case pt:return c.name==d.name&&c.message==d.message;case ve:case ie:return c==d+"";case O:var re=Bb;case Ee:var pe=w&m;if(re||(re=ig),c.size!=d.size&&!pe)return!1;var Re=Z.get(c);if(Re)return Re==d;w|=p,Z.set(c,d);var Ne=QO(re(c),re(d),w,I,H,Z);return Z.delete(c),Ne;case U:if(Fh)return Fh.call(c)==Fh.call(d)}return!1}function MH(c,d,v,w,I,H){var Z=v&m,re=dC(c),pe=re.length,Re=dC(d),Ne=Re.length;if(pe!=Ne&&!Z)return!1;for(var We=pe;We--;){var rt=re[We];if(!(Z?rt in d:ii.call(d,rt)))return!1}var Tt=H.get(c),Ht=H.get(d);if(Tt&&Ht)return Tt==d&&Ht==c;var bn=!0;H.set(c,d),H.set(d,c);for(var jt=Z;++We<pe;){rt=re[We];var An=c[rt],Un=d[rt];if(w)var Lo=Z?w(Un,An,rt,d,c,H):w(An,Un,rt,c,d,H);if(!(Lo===n?An===Un||I(An,Un,v,w,H):Lo)){bn=!1;break}jt||(jt=rt=="constructor")}if(bn&&!jt){var ro=c.constructor,Uo=d.constructor;ro!=Uo&&"constructor"in c&&"constructor"in d&&!(typeof ro=="function"&&ro instanceof ro&&typeof Uo=="function"&&Uo instanceof Uo)&&(bn=!1)}return H.delete(c),H.delete(d),bn}function $a(c){return yC(oA(c,n,pA),c+"")}function dC(c){return yO(c,xr,mC)}function fC(c){return yO(c,yo,eA)}var hC=mg?function(c){return mg.get(c)}:IC;function Dg(c){for(var d=c.name+"",v=hd[d],w=ii.call(hd,d)?v.length:0;w--;){var I=v[w],H=I.func;if(H==null||H==c)return I.name}return d}function _d(c){var d=ii.call(V,"placeholder")?V:c;return d.placeholder}function zt(){var c=V.iteratee||OC;return c=c===OC?CO:c,arguments.length?c(arguments[0],arguments[1]):c}function Og(c,d){var v=c.__data__;return AH(d)?v[typeof d=="string"?"string":"hash"]:v.map}function pC(c){for(var d=xr(c),v=d.length;v--;){var w=d[v],I=c[w];d[v]=[w,I,iA(I)]}return d}function Kc(c,d){var v=k4(c,d);return bO(v)?v:n}function wH(c){var d=ii.call(c,$c),v=c[$c];try{c[$c]=n;var w=!0}catch{}var I=ag.call(c);return w&&(d?c[$c]=v:delete c[$c]),I}var mC=Hb?function(c){return c==null?[]:(c=pi(c),Vl(Hb(c),function(d){return sO.call(c,d)}))}:RC,eA=Hb?function(c){for(var d=[];c;)Bl(d,mC(c)),c=ug(c);return d}:RC,Lr=no;(jb&&Lr(new jb(new ArrayBuffer(1)))!=ye||Rh&&Lr(new Rh)!=O||Wb&&Lr(Wb.resolve())!=W||fd&&Lr(new fd)!=Ee||kh&&Lr(new kh)!=K)&&(Lr=function(c){var d=no(c),v=d==Y?c.constructor:n,w=v?Jc(v):"";if(w)switch(w){case s5:return ye;case a5:return O;case l5:return W;case c5:return Ee;case u5:return K}return d});function EH(c,d,v){for(var w=-1,I=v.length;++w<I;){var H=v[w],Z=H.size;switch(H.type){case"drop":c+=Z;break;case"dropRight":d-=Z;break;case"take":d=Fr(d,c+Z);break;case"takeRight":c=lr(c,d-Z);break}}return{start:c,end:d}}function SH(c){var d=c.match(Dh);return d?d[1].split(Km):[]}function tA(c,d,v){d=$l(d,c);for(var w=-1,I=d.length,H=!1;++w<I;){var Z=ua(d[w]);if(!(H=c!=null&&v(c,Z)))break;c=c[Z]}return H||++w!=I?H:(I=c==null?0:c.length,!!I&&Lg(I)&&qa(Z,I)&&(cn(c)||Qc(c)))}function TH(c){var d=c.length,v=new c.constructor(d);return d&&typeof c[0]=="string"&&ii.call(c,"index")&&(v.index=c.index,v.input=c.input),v}function nA(c){return typeof c.constructor=="function"&&!jh(c)?pd(ug(c)):{}}function PH(c,d,v){var w=c.constructor;switch(d){case Pe:return lC(c);case Ge:case Ve:return new w(+c);case ye:return dH(c,v);case st:case et:case nt:case ln:case Fe:case lt:case It:case Ot:case ht:return UO(c,v);case O:return new w;case Me:case ie:return new w(c);case ve:return fH(c);case Ee:return new w;case U:return hH(c)}}function DH(c,d){var v=d.length;if(!v)return c;var w=v-1;return d[w]=(v>1?"& ":"")+d[w],d=d.join(v>2?", ":" "),c.replace(Ba,`{
/* [wrapped with `+d+`] */
`)}function OH(c){return cn(c)||Qc(c)||!!(aO&&c&&c[aO])}function qa(c,d){var v=typeof c;return d=d??ge,!!d&&(v=="number"||v!="symbol"&&z.test(c))&&c>-1&&c%1==0&&c<d}function io(c,d,v){if(!Fi(v))return!1;var w=typeof d;return(w=="number"?vo(v)&&qa(d,v.length):w=="string"&&d in v)?Fs(v[d],c):!1}function gC(c,d){if(cn(c))return!1;var v=typeof c;return v=="number"||v=="symbol"||v=="boolean"||c==null||Fo(c)?!0:vr.test(c)||!Di.test(c)||d!=null&&c in pi(d)}function AH(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function _C(c){var d=Dg(c),v=V[d];if(typeof v!="function"||!(d in Nn.prototype))return!1;if(c===v)return!0;var w=hC(v);return!!w&&c===w[0]}function IH(c){return!!iO&&iO in c}var RH=og?Ya:kC;function jh(c){var d=c&&c.constructor,v=typeof d=="function"&&d.prototype||dd;return c===v}function iA(c){return c===c&&!Fi(c)}function rA(c,d){return function(v){return v==null?!1:v[c]===d&&(d!==n||c in pi(v))}}function kH(c){var d=Ng(c,function(w){return v.size===a&&v.clear(),w}),v=d.cache;return d}function NH(c,d){var v=c[1],w=d[1],I=v|w,H=I<(y|C|L),Z=w==L&&v==b||w==L&&v==B&&c[7].length<=d[8]||w==(L|B)&&d[7].length<=d[8]&&v==b;if(!(H||Z))return c;w&y&&(c[2]=d[2],I|=v&y?0:x);var re=d[3];if(re){var pe=c[3];c[3]=pe?BO(pe,re,d[4]):re,c[4]=pe?zl(c[3],l):d[4]}return re=d[5],re&&(pe=c[5],c[5]=pe?zO(pe,re,d[6]):re,c[6]=pe?zl(c[5],l):d[6]),re=d[7],re&&(c[7]=re),w&L&&(c[8]=c[8]==null?d[8]:Fr(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=I,c}function FH(c){var d=[];if(c!=null)for(var v in pi(c))d.push(v);return d}function LH(c){return ag.call(c)}function oA(c,d,v){return d=lr(d===n?c.length-1:d,0),function(){for(var w=arguments,I=-1,H=lr(w.length-d,0),Z=we(H);++I<H;)Z[I]=w[d+I];I=-1;for(var re=we(d+1);++I<d;)re[I]=w[I];return re[d]=v(Z),Ro(c,this,re)}}function sA(c,d){return d.length<2?c:Zc(c,rs(d,0,-1))}function UH(c,d){for(var v=c.length,w=Fr(d.length,v),I=_o(c);w--;){var H=d[w];c[w]=qa(H,v)?I[H]:n}return c}function vC(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var aA=cA(OO),Wh=Q4||function(c,d){return yr.setTimeout(c,d)},yC=cA(aH);function lA(c,d,v){var w=d+"";return yC(c,DH(w,VH(SH(w),v)))}function cA(c){var d=0,v=0;return function(){var w=i5(),I=N-(w-v);if(v=w,I>0){if(++d>=T)return arguments[0]}else d=0;return c.apply(n,arguments)}}function Ag(c,d){var v=-1,w=c.length,I=w-1;for(d=d===n?w:d;++v<d;){var H=tC(v,I),Z=c[H];c[H]=c[v],c[v]=Z}return c.length=d,c}var uA=kH(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(Xn,function(v,w,I,H){d.push(I?H.replace(Qm,"$1"):w||v)}),d});function ua(c){if(typeof c=="string"||Fo(c))return c;var d=c+"";return d=="0"&&1/c==-ee?"-0":d}function Jc(c){if(c!=null){try{return sg.call(c)}catch{}try{return c+""}catch{}}return""}function VH(c,d){return es(Le,function(v){var w="_."+v[0];d&v[1]&&!tg(c,w)&&c.push(w)}),c.sort()}function dA(c){if(c instanceof Nn)return c.clone();var d=new ns(c.__wrapped__,c.__chain__);return d.__actions__=_o(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function BH(c,d,v){(v?io(c,d,v):d===n)?d=1:d=lr(gn(d),0);var w=c==null?0:c.length;if(!w||d<1)return[];for(var I=0,H=0,Z=we(hg(w/d));I<w;)Z[H++]=rs(c,I,I+=d);return Z}function zH(c){for(var d=-1,v=c==null?0:c.length,w=0,I=[];++d<v;){var H=c[d];H&&(I[w++]=H)}return I}function HH(){var c=arguments.length;if(!c)return[];for(var d=we(c-1),v=arguments[0],w=c;w--;)d[w-1]=arguments[w];return Bl(cn(v)?_o(v):[v],Or(d,1))}var jH=En(function(c,d){return Wi(c)?Uh(c,Or(d,1,Wi,!0)):[]}),WH=En(function(c,d){var v=os(d);return Wi(v)&&(v=n),Wi(c)?Uh(c,Or(d,1,Wi,!0),zt(v,2)):[]}),GH=En(function(c,d){var v=os(d);return Wi(v)&&(v=n),Wi(c)?Uh(c,Or(d,1,Wi,!0),n,v):[]});function $H(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:gn(d),rs(c,d<0?0:d,w)):[]}function qH(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:gn(d),d=w-d,rs(c,0,d<0?0:d)):[]}function YH(c,d){return c&&c.length?Mg(c,zt(d,3),!0,!0):[]}function XH(c,d){return c&&c.length?Mg(c,zt(d,3),!0):[]}function ZH(c,d,v,w){var I=c==null?0:c.length;return I?(v&&typeof v!="number"&&io(c,d,v)&&(v=0,w=I),H5(c,d,v,w)):[]}function fA(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=v==null?0:gn(v);return I<0&&(I=lr(w+I,0)),ng(c,zt(d,3),I)}function hA(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=w-1;return v!==n&&(I=gn(v),I=v<0?lr(w+I,0):Fr(I,w-1)),ng(c,zt(d,3),I,!0)}function pA(c){var d=c==null?0:c.length;return d?Or(c,1):[]}function KH(c){var d=c==null?0:c.length;return d?Or(c,ee):[]}function JH(c,d){var v=c==null?0:c.length;return v?(d=d===n?1:gn(d),Or(c,d)):[]}function QH(c){for(var d=-1,v=c==null?0:c.length,w={};++d<v;){var I=c[d];w[I[0]]=I[1]}return w}function mA(c){return c&&c.length?c[0]:n}function e8(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=v==null?0:gn(v);return I<0&&(I=lr(w+I,0)),ld(c,d,I)}function t8(c){var d=c==null?0:c.length;return d?rs(c,0,-1):[]}var n8=En(function(c){var d=Oi(c,sC);return d.length&&d[0]===c[0]?Zb(d):[]}),i8=En(function(c){var d=os(c),v=Oi(c,sC);return d===os(v)?d=n:v.pop(),v.length&&v[0]===c[0]?Zb(v,zt(d,2)):[]}),r8=En(function(c){var d=os(c),v=Oi(c,sC);return d=typeof d=="function"?d:n,d&&v.pop(),v.length&&v[0]===c[0]?Zb(v,n,d):[]});function o8(c,d){return c==null?"":t5.call(c,d)}function os(c){var d=c==null?0:c.length;return d?c[d-1]:n}function s8(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=w;return v!==n&&(I=gn(v),I=I<0?lr(w+I,0):Fr(I,w-1)),d===d?V4(c,d,I):ng(c,XD,I,!0)}function a8(c,d){return c&&c.length?SO(c,gn(d)):n}var l8=En(gA);function gA(c,d){return c&&c.length&&d&&d.length?eC(c,d):c}function c8(c,d,v){return c&&c.length&&d&&d.length?eC(c,d,zt(v,2)):c}function u8(c,d,v){return c&&c.length&&d&&d.length?eC(c,d,n,v):c}var d8=$a(function(c,d){var v=c==null?0:c.length,w=$b(c,d);return DO(c,Oi(d,function(I){return qa(I,v)?+I:I}).sort(VO)),w});function f8(c,d){var v=[];if(!(c&&c.length))return v;var w=-1,I=[],H=c.length;for(d=zt(d,3);++w<H;){var Z=c[w];d(Z,w,c)&&(v.push(Z),I.push(w))}return DO(c,I),v}function xC(c){return c==null?c:o5.call(c)}function h8(c,d,v){var w=c==null?0:c.length;return w?(v&&typeof v!="number"&&io(c,d,v)?(d=0,v=w):(d=d==null?0:gn(d),v=v===n?w:gn(v)),rs(c,d,v)):[]}function p8(c,d){return Cg(c,d)}function m8(c,d,v){return iC(c,d,zt(v,2))}function g8(c,d){var v=c==null?0:c.length;if(v){var w=Cg(c,d);if(w<v&&Fs(c[w],d))return w}return-1}function _8(c,d){return Cg(c,d,!0)}function v8(c,d,v){return iC(c,d,zt(v,2),!0)}function y8(c,d){var v=c==null?0:c.length;if(v){var w=Cg(c,d,!0)-1;if(Fs(c[w],d))return w}return-1}function x8(c){return c&&c.length?AO(c):[]}function b8(c,d){return c&&c.length?AO(c,zt(d,2)):[]}function C8(c){var d=c==null?0:c.length;return d?rs(c,1,d):[]}function M8(c,d,v){return c&&c.length?(d=v||d===n?1:gn(d),rs(c,0,d<0?0:d)):[]}function w8(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:gn(d),d=w-d,rs(c,d<0?0:d,w)):[]}function E8(c,d){return c&&c.length?Mg(c,zt(d,3),!1,!0):[]}function S8(c,d){return c&&c.length?Mg(c,zt(d,3)):[]}var T8=En(function(c){return Gl(Or(c,1,Wi,!0))}),P8=En(function(c){var d=os(c);return Wi(d)&&(d=n),Gl(Or(c,1,Wi,!0),zt(d,2))}),D8=En(function(c){var d=os(c);return d=typeof d=="function"?d:n,Gl(Or(c,1,Wi,!0),n,d)});function O8(c){return c&&c.length?Gl(c):[]}function A8(c,d){return c&&c.length?Gl(c,zt(d,2)):[]}function I8(c,d){return d=typeof d=="function"?d:n,c&&c.length?Gl(c,n,d):[]}function bC(c){if(!(c&&c.length))return[];var d=0;return c=Vl(c,function(v){if(Wi(v))return d=lr(v.length,d),!0}),Ub(d,function(v){return Oi(c,Nb(v))})}function _A(c,d){if(!(c&&c.length))return[];var v=bC(c);return d==null?v:Oi(v,function(w){return Ro(d,n,w)})}var R8=En(function(c,d){return Wi(c)?Uh(c,d):[]}),k8=En(function(c){return oC(Vl(c,Wi))}),N8=En(function(c){var d=os(c);return Wi(d)&&(d=n),oC(Vl(c,Wi),zt(d,2))}),F8=En(function(c){var d=os(c);return d=typeof d=="function"?d:n,oC(Vl(c,Wi),n,d)}),L8=En(bC);function U8(c,d){return NO(c||[],d||[],Lh)}function V8(c,d){return NO(c||[],d||[],zh)}var B8=En(function(c){var d=c.length,v=d>1?c[d-1]:n;return v=typeof v=="function"?(c.pop(),v):n,_A(c,v)});function vA(c){var d=V(c);return d.__chain__=!0,d}function z8(c,d){return d(c),c}function Ig(c,d){return d(c)}var H8=$a(function(c){var d=c.length,v=d?c[0]:0,w=this.__wrapped__,I=function(H){return $b(H,c)};return d>1||this.__actions__.length||!(w instanceof Nn)||!qa(v)?this.thru(I):(w=w.slice(v,+v+(d?1:0)),w.__actions__.push({func:Ig,args:[I],thisArg:n}),new ns(w,this.__chain__).thru(function(H){return d&&!H.length&&H.push(n),H}))});function j8(){return vA(this)}function W8(){return new ns(this.value(),this.__chain__)}function G8(){this.__values__===n&&(this.__values__=IA(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function $8(){return this}function q8(c){for(var d,v=this;v instanceof _g;){var w=dA(v);w.__index__=0,w.__values__=n,d?I.__wrapped__=w:d=w;var I=w;v=v.__wrapped__}return I.__wrapped__=c,d}function Y8(){var c=this.__wrapped__;if(c instanceof Nn){var d=c;return this.__actions__.length&&(d=new Nn(this)),d=d.reverse(),d.__actions__.push({func:Ig,args:[xC],thisArg:n}),new ns(d,this.__chain__)}return this.thru(xC)}function X8(){return kO(this.__wrapped__,this.__actions__)}var Z8=wg(function(c,d,v){ii.call(c,v)?++c[v]:Wa(c,v,1)});function K8(c,d,v){var w=cn(c)?qD:z5;return v&&io(c,d,v)&&(d=n),w(c,zt(d,3))}function J8(c,d){var v=cn(c)?Vl:_O;return v(c,zt(d,3))}var Q8=GO(fA),e6=GO(hA);function t6(c,d){return Or(Rg(c,d),1)}function n6(c,d){return Or(Rg(c,d),ee)}function i6(c,d,v){return v=v===n?1:gn(v),Or(Rg(c,d),v)}function yA(c,d){var v=cn(c)?es:Wl;return v(c,zt(d,3))}function xA(c,d){var v=cn(c)?C4:gO;return v(c,zt(d,3))}var r6=wg(function(c,d,v){ii.call(c,v)?c[v].push(d):Wa(c,v,[d])});function o6(c,d,v,w){c=vo(c)?c:yd(c),v=v&&!w?gn(v):0;var I=c.length;return v<0&&(v=lr(I+v,0)),Ug(c)?v<=I&&c.indexOf(d,v)>-1:!!I&&ld(c,d,v)>-1}var s6=En(function(c,d,v){var w=-1,I=typeof d=="function",H=vo(c)?we(c.length):[];return Wl(c,function(Z){H[++w]=I?Ro(d,Z,v):Vh(Z,d,v)}),H}),a6=wg(function(c,d,v){Wa(c,v,d)});function Rg(c,d){var v=cn(c)?Oi:MO;return v(c,zt(d,3))}function l6(c,d,v,w){return c==null?[]:(cn(d)||(d=d==null?[]:[d]),v=w?n:v,cn(v)||(v=v==null?[]:[v]),TO(c,d,v))}var c6=wg(function(c,d,v){c[v?0:1].push(d)},function(){return[[],[]]});function u6(c,d,v){var w=cn(c)?Rb:KD,I=arguments.length<3;return w(c,zt(d,4),v,I,Wl)}function d6(c,d,v){var w=cn(c)?M4:KD,I=arguments.length<3;return w(c,zt(d,4),v,I,gO)}function f6(c,d){var v=cn(c)?Vl:_O;return v(c,Fg(zt(d,3)))}function h6(c){var d=cn(c)?fO:oH;return d(c)}function p6(c,d,v){(v?io(c,d,v):d===n)?d=1:d=gn(d);var w=cn(c)?F5:sH;return w(c,d)}function m6(c){var d=cn(c)?L5:lH;return d(c)}function g6(c){if(c==null)return 0;if(vo(c))return Ug(c)?ud(c):c.length;var d=Lr(c);return d==O||d==Ee?c.size:Jb(c).length}function _6(c,d,v){var w=cn(c)?kb:cH;return v&&io(c,d,v)&&(d=n),w(c,zt(d,3))}var v6=En(function(c,d){if(c==null)return[];var v=d.length;return v>1&&io(c,d[0],d[1])?d=[]:v>2&&io(d[0],d[1],d[2])&&(d=[d[0]]),TO(c,Or(d,1),[])}),kg=J4||function(){return yr.Date.now()};function y6(c,d){if(typeof d!="function")throw new ts(r);return c=gn(c),function(){if(--c<1)return d.apply(this,arguments)}}function bA(c,d,v){return d=v?n:d,d=c&&d==null?c.length:d,Ga(c,L,n,n,n,n,d)}function CA(c,d){var v;if(typeof d!="function")throw new ts(r);return c=gn(c),function(){return--c>0&&(v=d.apply(this,arguments)),c<=1&&(d=n),v}}var CC=En(function(c,d,v){var w=y;if(v.length){var I=zl(v,_d(CC));w|=E}return Ga(c,w,d,v,I)}),MA=En(function(c,d,v){var w=y|C;if(v.length){var I=zl(v,_d(MA));w|=E}return Ga(d,w,c,v,I)});function wA(c,d,v){d=v?n:d;var w=Ga(c,b,n,n,n,n,n,d);return w.placeholder=wA.placeholder,w}function EA(c,d,v){d=v?n:d;var w=Ga(c,P,n,n,n,n,n,d);return w.placeholder=EA.placeholder,w}function SA(c,d,v){var w,I,H,Z,re,pe,Re=0,Ne=!1,We=!1,rt=!0;if(typeof c!="function")throw new ts(r);d=ss(d)||0,Fi(v)&&(Ne=!!v.leading,We="maxWait"in v,H=We?lr(ss(v.maxWait)||0,d):H,rt="trailing"in v?!!v.trailing:rt);function Tt(Gi){var Ls=w,Za=I;return w=I=n,Re=Gi,Z=c.apply(Za,Ls),Z}function Ht(Gi){return Re=Gi,re=Wh(An,d),Ne?Tt(Gi):Z}function bn(Gi){var Ls=Gi-pe,Za=Gi-Re,GA=d-Ls;return We?Fr(GA,H-Za):GA}function jt(Gi){var Ls=Gi-pe,Za=Gi-Re;return pe===n||Ls>=d||Ls<0||We&&Za>=H}function An(){var Gi=kg();if(jt(Gi))return Un(Gi);re=Wh(An,bn(Gi))}function Un(Gi){return re=n,rt&&w?Tt(Gi):(w=I=n,Z)}function Lo(){re!==n&&FO(re),Re=0,w=pe=I=re=n}function ro(){return re===n?Z:Un(kg())}function Uo(){var Gi=kg(),Ls=jt(Gi);if(w=arguments,I=this,pe=Gi,Ls){if(re===n)return Ht(pe);if(We)return FO(re),re=Wh(An,d),Tt(pe)}return re===n&&(re=Wh(An,d)),Z}return Uo.cancel=Lo,Uo.flush=ro,Uo}var x6=En(function(c,d){return mO(c,1,d)}),b6=En(function(c,d,v){return mO(c,ss(d)||0,v)});function C6(c){return Ga(c,k)}function Ng(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new ts(r);var v=function(){var w=arguments,I=d?d.apply(this,w):w[0],H=v.cache;if(H.has(I))return H.get(I);var Z=c.apply(this,w);return v.cache=H.set(I,Z)||H,Z};return v.cache=new(Ng.Cache||ja),v}Ng.Cache=ja;function Fg(c){if(typeof c!="function")throw new ts(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function M6(c){return CA(2,c)}var w6=uH(function(c,d){d=d.length==1&&cn(d[0])?Oi(d[0],ko(zt())):Oi(Or(d,1),ko(zt()));var v=d.length;return En(function(w){for(var I=-1,H=Fr(w.length,v);++I<H;)w[I]=d[I].call(this,w[I]);return Ro(c,this,w)})}),MC=En(function(c,d){var v=zl(d,_d(MC));return Ga(c,E,n,d,v)}),TA=En(function(c,d){var v=zl(d,_d(TA));return Ga(c,D,n,d,v)}),E6=$a(function(c,d){return Ga(c,B,n,n,n,d)});function S6(c,d){if(typeof c!="function")throw new ts(r);return d=d===n?d:gn(d),En(c,d)}function T6(c,d){if(typeof c!="function")throw new ts(r);return d=d==null?0:lr(gn(d),0),En(function(v){var w=v[d],I=ql(v,0,d);return w&&Bl(I,w),Ro(c,this,I)})}function P6(c,d,v){var w=!0,I=!0;if(typeof c!="function")throw new ts(r);return Fi(v)&&(w="leading"in v?!!v.leading:w,I="trailing"in v?!!v.trailing:I),SA(c,d,{leading:w,maxWait:d,trailing:I})}function D6(c){return bA(c,1)}function O6(c,d){return MC(aC(d),c)}function A6(){if(!arguments.length)return[];var c=arguments[0];return cn(c)?c:[c]}function I6(c){return is(c,h)}function R6(c,d){return d=typeof d=="function"?d:n,is(c,h,d)}function k6(c){return is(c,u|h)}function N6(c,d){return d=typeof d=="function"?d:n,is(c,u|h,d)}function F6(c,d){return d==null||pO(c,d,xr(d))}function Fs(c,d){return c===d||c!==c&&d!==d}var L6=Pg(Xb),U6=Pg(function(c,d){return c>=d}),Qc=xO(function(){return arguments}())?xO:function(c){return Ui(c)&&ii.call(c,"callee")&&!sO.call(c,"callee")},cn=we.isArray,V6=zD?ko(zD):q5;function vo(c){return c!=null&&Lg(c.length)&&!Ya(c)}function Wi(c){return Ui(c)&&vo(c)}function B6(c){return c===!0||c===!1||Ui(c)&&no(c)==Ge}var Yl=e5||kC,z6=HD?ko(HD):Y5;function H6(c){return Ui(c)&&c.nodeType===1&&!Gh(c)}function j6(c){if(c==null)return!0;if(vo(c)&&(cn(c)||typeof c=="string"||typeof c.splice=="function"||Yl(c)||vd(c)||Qc(c)))return!c.length;var d=Lr(c);if(d==O||d==Ee)return!c.size;if(jh(c))return!Jb(c).length;for(var v in c)if(ii.call(c,v))return!1;return!0}function W6(c,d){return Bh(c,d)}function G6(c,d,v){v=typeof v=="function"?v:n;var w=v?v(c,d):n;return w===n?Bh(c,d,n,v):!!w}function wC(c){if(!Ui(c))return!1;var d=no(c);return d==pt||d==mt||typeof c.message=="string"&&typeof c.name=="string"&&!Gh(c)}function $6(c){return typeof c=="number"&&lO(c)}function Ya(c){if(!Fi(c))return!1;var d=no(c);return d==Lt||d==Pn||d==He||d==ne}function PA(c){return typeof c=="number"&&c==gn(c)}function Lg(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ge}function Fi(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function Ui(c){return c!=null&&typeof c=="object"}var DA=jD?ko(jD):Z5;function q6(c,d){return c===d||Kb(c,d,pC(d))}function Y6(c,d,v){return v=typeof v=="function"?v:n,Kb(c,d,pC(d),v)}function X6(c){return OA(c)&&c!=+c}function Z6(c){if(RH(c))throw new on(i);return bO(c)}function K6(c){return c===null}function J6(c){return c==null}function OA(c){return typeof c=="number"||Ui(c)&&no(c)==Me}function Gh(c){if(!Ui(c)||no(c)!=Y)return!1;var d=ug(c);if(d===null)return!0;var v=ii.call(d,"constructor")&&d.constructor;return typeof v=="function"&&v instanceof v&&sg.call(v)==Y4}var EC=WD?ko(WD):K5;function Q6(c){return PA(c)&&c>=-ge&&c<=ge}var AA=GD?ko(GD):J5;function Ug(c){return typeof c=="string"||!cn(c)&&Ui(c)&&no(c)==ie}function Fo(c){return typeof c=="symbol"||Ui(c)&&no(c)==U}var vd=$D?ko($D):Q5;function ej(c){return c===n}function tj(c){return Ui(c)&&Lr(c)==K}function nj(c){return Ui(c)&&no(c)==_e}var ij=Pg(Qb),rj=Pg(function(c,d){return c<=d});function IA(c){if(!c)return[];if(vo(c))return Ug(c)?ks(c):_o(c);if(Ih&&c[Ih])return F4(c[Ih]());var d=Lr(c),v=d==O?Bb:d==Ee?ig:yd;return v(c)}function Xa(c){if(!c)return c===0?c:0;if(c=ss(c),c===ee||c===-ee){var d=c<0?-1:1;return d*se}return c===c?c:0}function gn(c){var d=Xa(c),v=d%1;return d===d?v?d-v:d:0}function RA(c){return c?Xc(gn(c),0,J):0}function ss(c){if(typeof c=="number")return c;if(Fo(c))return de;if(Fi(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=Fi(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=JD(c);var v=Sb.test(c);return v||Pb.test(c)?y4(c.slice(2),v?2:8):eg.test(c)?de:+c}function kA(c){return ca(c,yo(c))}function oj(c){return c?Xc(gn(c),-ge,ge):c===0?c:0}function ei(c){return c==null?"":No(c)}var sj=md(function(c,d){if(jh(d)||vo(d)){ca(d,xr(d),c);return}for(var v in d)ii.call(d,v)&&Lh(c,v,d[v])}),NA=md(function(c,d){ca(d,yo(d),c)}),Vg=md(function(c,d,v,w){ca(d,yo(d),c,w)}),aj=md(function(c,d,v,w){ca(d,xr(d),c,w)}),lj=$a($b);function cj(c,d){var v=pd(c);return d==null?v:hO(v,d)}var uj=En(function(c,d){c=pi(c);var v=-1,w=d.length,I=w>2?d[2]:n;for(I&&io(d[0],d[1],I)&&(w=1);++v<w;)for(var H=d[v],Z=yo(H),re=-1,pe=Z.length;++re<pe;){var Re=Z[re],Ne=c[Re];(Ne===n||Fs(Ne,dd[Re])&&!ii.call(c,Re))&&(c[Re]=H[Re])}return c}),dj=En(function(c){return c.push(n,JO),Ro(FA,n,c)});function fj(c,d){return YD(c,zt(d,3),la)}function hj(c,d){return YD(c,zt(d,3),Yb)}function pj(c,d){return c==null?c:qb(c,zt(d,3),yo)}function mj(c,d){return c==null?c:vO(c,zt(d,3),yo)}function gj(c,d){return c&&la(c,zt(d,3))}function _j(c,d){return c&&Yb(c,zt(d,3))}function vj(c){return c==null?[]:xg(c,xr(c))}function yj(c){return c==null?[]:xg(c,yo(c))}function SC(c,d,v){var w=c==null?n:Zc(c,d);return w===n?v:w}function xj(c,d){return c!=null&&tA(c,d,j5)}function TC(c,d){return c!=null&&tA(c,d,W5)}var bj=qO(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=ag.call(d)),c[d]=v},DC(xo)),Cj=qO(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=ag.call(d)),ii.call(c,d)?c[d].push(v):c[d]=[v]},zt),Mj=En(Vh);function xr(c){return vo(c)?dO(c):Jb(c)}function yo(c){return vo(c)?dO(c,!0):eH(c)}function wj(c,d){var v={};return d=zt(d,3),la(c,function(w,I,H){Wa(v,d(w,I,H),w)}),v}function Ej(c,d){var v={};return d=zt(d,3),la(c,function(w,I,H){Wa(v,I,d(w,I,H))}),v}var Sj=md(function(c,d,v){bg(c,d,v)}),FA=md(function(c,d,v,w){bg(c,d,v,w)}),Tj=$a(function(c,d){var v={};if(c==null)return v;var w=!1;d=Oi(d,function(H){return H=$l(H,c),w||(w=H.length>1),H}),ca(c,fC(c),v),w&&(v=is(v,u|f|h,bH));for(var I=d.length;I--;)rC(v,d[I]);return v});function Pj(c,d){return LA(c,Fg(zt(d)))}var Dj=$a(function(c,d){return c==null?{}:nH(c,d)});function LA(c,d){if(c==null)return{};var v=Oi(fC(c),function(w){return[w]});return d=zt(d),PO(c,v,function(w,I){return d(w,I[0])})}function Oj(c,d,v){d=$l(d,c);var w=-1,I=d.length;for(I||(I=1,c=n);++w<I;){var H=c==null?n:c[ua(d[w])];H===n&&(w=I,H=v),c=Ya(H)?H.call(c):H}return c}function Aj(c,d,v){return c==null?c:zh(c,d,v)}function Ij(c,d,v,w){return w=typeof w=="function"?w:n,c==null?c:zh(c,d,v,w)}var UA=ZO(xr),VA=ZO(yo);function Rj(c,d,v){var w=cn(c),I=w||Yl(c)||vd(c);if(d=zt(d,4),v==null){var H=c&&c.constructor;I?v=w?new H:[]:Fi(c)?v=Ya(H)?pd(ug(c)):{}:v={}}return(I?es:la)(c,function(Z,re,pe){return d(v,Z,re,pe)}),v}function kj(c,d){return c==null?!0:rC(c,d)}function Nj(c,d,v){return c==null?c:RO(c,d,aC(v))}function Fj(c,d,v,w){return w=typeof w=="function"?w:n,c==null?c:RO(c,d,aC(v),w)}function yd(c){return c==null?[]:Vb(c,xr(c))}function Lj(c){return c==null?[]:Vb(c,yo(c))}function Uj(c,d,v){return v===n&&(v=d,d=n),v!==n&&(v=ss(v),v=v===v?v:0),d!==n&&(d=ss(d),d=d===d?d:0),Xc(ss(c),d,v)}function Vj(c,d,v){return d=Xa(d),v===n?(v=d,d=0):v=Xa(v),c=ss(c),G5(c,d,v)}function Bj(c,d,v){if(v&&typeof v!="boolean"&&io(c,d,v)&&(d=v=n),v===n&&(typeof d=="boolean"?(v=d,d=n):typeof c=="boolean"&&(v=c,c=n)),c===n&&d===n?(c=0,d=1):(c=Xa(c),d===n?(d=c,c=0):d=Xa(d)),c>d){var w=c;c=d,d=w}if(v||c%1||d%1){var I=cO();return Fr(c+I*(d-c+v4("1e-"+((I+"").length-1))),d)}return tC(c,d)}var zj=gd(function(c,d,v){return d=d.toLowerCase(),c+(v?BA(d):d)});function BA(c){return PC(ei(c).toLowerCase())}function zA(c){return c=ei(c),c&&c.replace(he,A4).replace(l4,"")}function Hj(c,d,v){c=ei(c),d=No(d);var w=c.length;v=v===n?w:Xc(gn(v),0,w);var I=v;return v-=d.length,v>=0&&c.slice(v,I)==d}function jj(c){return c=ei(c),c&&Be.test(c)?c.replace(tt,I4):c}function Wj(c){return c=ei(c),c&&As.test(c)?c.replace(to,"\\$&"):c}var Gj=gd(function(c,d,v){return c+(v?"-":"")+d.toLowerCase()}),$j=gd(function(c,d,v){return c+(v?" ":"")+d.toLowerCase()}),qj=WO("toLowerCase");function Yj(c,d,v){c=ei(c),d=gn(d);var w=d?ud(c):0;if(!d||w>=d)return c;var I=(d-w)/2;return Tg(pg(I),v)+c+Tg(hg(I),v)}function Xj(c,d,v){c=ei(c),d=gn(d);var w=d?ud(c):0;return d&&w<d?c+Tg(d-w,v):c}function Zj(c,d,v){c=ei(c),d=gn(d);var w=d?ud(c):0;return d&&w<d?Tg(d-w,v)+c:c}function Kj(c,d,v){return v||d==null?d=0:d&&(d=+d),r5(ei(c).replace(id,""),d||0)}function Jj(c,d,v){return(v?io(c,d,v):d===n)?d=1:d=gn(d),nC(ei(c),d)}function Qj(){var c=arguments,d=ei(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var eW=gd(function(c,d,v){return c+(v?"_":"")+d.toLowerCase()});function tW(c,d,v){return v&&typeof v!="number"&&io(c,d,v)&&(d=v=n),v=v===n?J:v>>>0,v?(c=ei(c),c&&(typeof d=="string"||d!=null&&!EC(d))&&(d=No(d),!d&&cd(c))?ql(ks(c),0,v):c.split(d,v)):[]}var nW=gd(function(c,d,v){return c+(v?" ":"")+PC(d)});function iW(c,d,v){return c=ei(c),v=v==null?0:Xc(gn(v),0,c.length),d=No(d),c.slice(v,v+d.length)==d}function rW(c,d,v){var w=V.templateSettings;v&&io(c,d,v)&&(d=n),c=ei(c),d=Vg({},d,w,KO);var I=Vg({},d.imports,w.imports,KO),H=xr(I),Z=Vb(I,H),re,pe,Re=0,Ne=d.interpolate||xe,We="__p += '",rt=zb((d.escape||xe).source+"|"+Ne.source+"|"+(Ne===nn?od:xe).source+"|"+(d.evaluate||xe).source+"|$","g"),Tt="//# sourceURL="+(ii.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++h4+"]")+`
`;c.replace(rt,function(jt,An,Un,Lo,ro,Uo){return Un||(Un=Lo),We+=c.slice(Re,Uo).replace(be,R4),An&&(re=!0,We+=`' +
__e(`+An+`) +
'`),ro&&(pe=!0,We+=`';
`+ro+`;
__p += '`),Un&&(We+=`' +
((__t = (`+Un+`)) == null ? '' : __t) +
'`),Re=Uo+jt.length,jt}),We+=`';
`;var Ht=ii.call(d,"variable")&&d.variable;if(!Ht)We=`with (obj) {
`+We+`
}
`;else if(rd.test(Ht))throw new on(o);We=(pe?We.replace(Dn,""):We).replace(tn,"$1").replace(Qn,"$1;"),We="function("+(Ht||"obj")+`) {
`+(Ht?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+We+`return __p
}`;var bn=jA(function(){return Zn(H,Tt+"return "+We).apply(n,Z)});if(bn.source=We,wC(bn))throw bn;return bn}function oW(c){return ei(c).toLowerCase()}function sW(c){return ei(c).toUpperCase()}function aW(c,d,v){if(c=ei(c),c&&(v||d===n))return JD(c);if(!c||!(d=No(d)))return c;var w=ks(c),I=ks(d),H=QD(w,I),Z=eO(w,I)+1;return ql(w,H,Z).join("")}function lW(c,d,v){if(c=ei(c),c&&(v||d===n))return c.slice(0,nO(c)+1);if(!c||!(d=No(d)))return c;var w=ks(c),I=eO(w,ks(d))+1;return ql(w,0,I).join("")}function cW(c,d,v){if(c=ei(c),c&&(v||d===n))return c.replace(id,"");if(!c||!(d=No(d)))return c;var w=ks(c),I=QD(w,ks(d));return ql(w,I).join("")}function uW(c,d){var v=G,w=F;if(Fi(d)){var I="separator"in d?d.separator:I;v="length"in d?gn(d.length):v,w="omission"in d?No(d.omission):w}c=ei(c);var H=c.length;if(cd(c)){var Z=ks(c);H=Z.length}if(v>=H)return c;var re=v-ud(w);if(re<1)return w;var pe=Z?ql(Z,0,re).join(""):c.slice(0,re);if(I===n)return pe+w;if(Z&&(re+=pe.length-re),EC(I)){if(c.slice(re).search(I)){var Re,Ne=pe;for(I.global||(I=zb(I.source,ei(Oh.exec(I))+"g")),I.lastIndex=0;Re=I.exec(Ne);)var We=Re.index;pe=pe.slice(0,We===n?re:We)}}else if(c.indexOf(No(I),re)!=re){var rt=pe.lastIndexOf(I);rt>-1&&(pe=pe.slice(0,rt))}return pe+w}function dW(c){return c=ei(c),c&&Se.test(c)?c.replace(ae,B4):c}var fW=gd(function(c,d,v){return c+(v?" ":"")+d.toUpperCase()}),PC=WO("toUpperCase");function HA(c,d,v){return c=ei(c),d=v?n:d,d===n?N4(c)?j4(c):S4(c):c.match(d)||[]}var jA=En(function(c,d){try{return Ro(c,n,d)}catch(v){return wC(v)?v:new on(v)}}),hW=$a(function(c,d){return es(d,function(v){v=ua(v),Wa(c,v,CC(c[v],c))}),c});function pW(c){var d=c==null?0:c.length,v=zt();return c=d?Oi(c,function(w){if(typeof w[1]!="function")throw new ts(r);return[v(w[0]),w[1]]}):[],En(function(w){for(var I=-1;++I<d;){var H=c[I];if(Ro(H[0],this,w))return Ro(H[1],this,w)}})}function mW(c){return B5(is(c,u))}function DC(c){return function(){return c}}function gW(c,d){return c==null||c!==c?d:c}var _W=$O(),vW=$O(!0);function xo(c){return c}function OC(c){return CO(typeof c=="function"?c:is(c,u))}function yW(c){return wO(is(c,u))}function xW(c,d){return EO(c,is(d,u))}var bW=En(function(c,d){return function(v){return Vh(v,c,d)}}),CW=En(function(c,d){return function(v){return Vh(c,v,d)}});function AC(c,d,v){var w=xr(d),I=xg(d,w);v==null&&!(Fi(d)&&(I.length||!w.length))&&(v=d,d=c,c=this,I=xg(d,xr(d)));var H=!(Fi(v)&&"chain"in v)||!!v.chain,Z=Ya(c);return es(I,function(re){var pe=d[re];c[re]=pe,Z&&(c.prototype[re]=function(){var Re=this.__chain__;if(H||Re){var Ne=c(this.__wrapped__),We=Ne.__actions__=_o(this.__actions__);return We.push({func:pe,args:arguments,thisArg:c}),Ne.__chain__=Re,Ne}return pe.apply(c,Bl([this.value()],arguments))})}),c}function MW(){return yr._===this&&(yr._=X4),this}function IC(){}function wW(c){return c=gn(c),En(function(d){return SO(d,c)})}var EW=cC(Oi),SW=cC(qD),TW=cC(kb);function WA(c){return gC(c)?Nb(ua(c)):iH(c)}function PW(c){return function(d){return c==null?n:Zc(c,d)}}var DW=YO(),OW=YO(!0);function RC(){return[]}function kC(){return!1}function AW(){return{}}function IW(){return""}function RW(){return!0}function kW(c,d){if(c=gn(c),c<1||c>ge)return[];var v=J,w=Fr(c,J);d=zt(d),c-=J;for(var I=Ub(w,d);++v<c;)d(v);return I}function NW(c){return cn(c)?Oi(c,ua):Fo(c)?[c]:_o(uA(ei(c)))}function FW(c){var d=++q4;return ei(c)+d}var LW=Sg(function(c,d){return c+d},0),UW=uC("ceil"),VW=Sg(function(c,d){return c/d},1),BW=uC("floor");function zW(c){return c&&c.length?yg(c,xo,Xb):n}function HW(c,d){return c&&c.length?yg(c,zt(d,2),Xb):n}function jW(c){return ZD(c,xo)}function WW(c,d){return ZD(c,zt(d,2))}function GW(c){return c&&c.length?yg(c,xo,Qb):n}function $W(c,d){return c&&c.length?yg(c,zt(d,2),Qb):n}var qW=Sg(function(c,d){return c*d},1),YW=uC("round"),XW=Sg(function(c,d){return c-d},0);function ZW(c){return c&&c.length?Lb(c,xo):0}function KW(c,d){return c&&c.length?Lb(c,zt(d,2)):0}return V.after=y6,V.ary=bA,V.assign=sj,V.assignIn=NA,V.assignInWith=Vg,V.assignWith=aj,V.at=lj,V.before=CA,V.bind=CC,V.bindAll=hW,V.bindKey=MA,V.castArray=A6,V.chain=vA,V.chunk=BH,V.compact=zH,V.concat=HH,V.cond=pW,V.conforms=mW,V.constant=DC,V.countBy=Z8,V.create=cj,V.curry=wA,V.curryRight=EA,V.debounce=SA,V.defaults=uj,V.defaultsDeep=dj,V.defer=x6,V.delay=b6,V.difference=jH,V.differenceBy=WH,V.differenceWith=GH,V.drop=$H,V.dropRight=qH,V.dropRightWhile=YH,V.dropWhile=XH,V.fill=ZH,V.filter=J8,V.flatMap=t6,V.flatMapDeep=n6,V.flatMapDepth=i6,V.flatten=pA,V.flattenDeep=KH,V.flattenDepth=JH,V.flip=C6,V.flow=_W,V.flowRight=vW,V.fromPairs=QH,V.functions=vj,V.functionsIn=yj,V.groupBy=r6,V.initial=t8,V.intersection=n8,V.intersectionBy=i8,V.intersectionWith=r8,V.invert=bj,V.invertBy=Cj,V.invokeMap=s6,V.iteratee=OC,V.keyBy=a6,V.keys=xr,V.keysIn=yo,V.map=Rg,V.mapKeys=wj,V.mapValues=Ej,V.matches=yW,V.matchesProperty=xW,V.memoize=Ng,V.merge=Sj,V.mergeWith=FA,V.method=bW,V.methodOf=CW,V.mixin=AC,V.negate=Fg,V.nthArg=wW,V.omit=Tj,V.omitBy=Pj,V.once=M6,V.orderBy=l6,V.over=EW,V.overArgs=w6,V.overEvery=SW,V.overSome=TW,V.partial=MC,V.partialRight=TA,V.partition=c6,V.pick=Dj,V.pickBy=LA,V.property=WA,V.propertyOf=PW,V.pull=l8,V.pullAll=gA,V.pullAllBy=c8,V.pullAllWith=u8,V.pullAt=d8,V.range=DW,V.rangeRight=OW,V.rearg=E6,V.reject=f6,V.remove=f8,V.rest=S6,V.reverse=xC,V.sampleSize=p6,V.set=Aj,V.setWith=Ij,V.shuffle=m6,V.slice=h8,V.sortBy=v6,V.sortedUniq=x8,V.sortedUniqBy=b8,V.split=tW,V.spread=T6,V.tail=C8,V.take=M8,V.takeRight=w8,V.takeRightWhile=E8,V.takeWhile=S8,V.tap=z8,V.throttle=P6,V.thru=Ig,V.toArray=IA,V.toPairs=UA,V.toPairsIn=VA,V.toPath=NW,V.toPlainObject=kA,V.transform=Rj,V.unary=D6,V.union=T8,V.unionBy=P8,V.unionWith=D8,V.uniq=O8,V.uniqBy=A8,V.uniqWith=I8,V.unset=kj,V.unzip=bC,V.unzipWith=_A,V.update=Nj,V.updateWith=Fj,V.values=yd,V.valuesIn=Lj,V.without=R8,V.words=HA,V.wrap=O6,V.xor=k8,V.xorBy=N8,V.xorWith=F8,V.zip=L8,V.zipObject=U8,V.zipObjectDeep=V8,V.zipWith=B8,V.entries=UA,V.entriesIn=VA,V.extend=NA,V.extendWith=Vg,AC(V,V),V.add=LW,V.attempt=jA,V.camelCase=zj,V.capitalize=BA,V.ceil=UW,V.clamp=Uj,V.clone=I6,V.cloneDeep=k6,V.cloneDeepWith=N6,V.cloneWith=R6,V.conformsTo=F6,V.deburr=zA,V.defaultTo=gW,V.divide=VW,V.endsWith=Hj,V.eq=Fs,V.escape=jj,V.escapeRegExp=Wj,V.every=K8,V.find=Q8,V.findIndex=fA,V.findKey=fj,V.findLast=e6,V.findLastIndex=hA,V.findLastKey=hj,V.floor=BW,V.forEach=yA,V.forEachRight=xA,V.forIn=pj,V.forInRight=mj,V.forOwn=gj,V.forOwnRight=_j,V.get=SC,V.gt=L6,V.gte=U6,V.has=xj,V.hasIn=TC,V.head=mA,V.identity=xo,V.includes=o6,V.indexOf=e8,V.inRange=Vj,V.invoke=Mj,V.isArguments=Qc,V.isArray=cn,V.isArrayBuffer=V6,V.isArrayLike=vo,V.isArrayLikeObject=Wi,V.isBoolean=B6,V.isBuffer=Yl,V.isDate=z6,V.isElement=H6,V.isEmpty=j6,V.isEqual=W6,V.isEqualWith=G6,V.isError=wC,V.isFinite=$6,V.isFunction=Ya,V.isInteger=PA,V.isLength=Lg,V.isMap=DA,V.isMatch=q6,V.isMatchWith=Y6,V.isNaN=X6,V.isNative=Z6,V.isNil=J6,V.isNull=K6,V.isNumber=OA,V.isObject=Fi,V.isObjectLike=Ui,V.isPlainObject=Gh,V.isRegExp=EC,V.isSafeInteger=Q6,V.isSet=AA,V.isString=Ug,V.isSymbol=Fo,V.isTypedArray=vd,V.isUndefined=ej,V.isWeakMap=tj,V.isWeakSet=nj,V.join=o8,V.kebabCase=Gj,V.last=os,V.lastIndexOf=s8,V.lowerCase=$j,V.lowerFirst=qj,V.lt=ij,V.lte=rj,V.max=zW,V.maxBy=HW,V.mean=jW,V.meanBy=WW,V.min=GW,V.minBy=$W,V.stubArray=RC,V.stubFalse=kC,V.stubObject=AW,V.stubString=IW,V.stubTrue=RW,V.multiply=qW,V.nth=a8,V.noConflict=MW,V.noop=IC,V.now=kg,V.pad=Yj,V.padEnd=Xj,V.padStart=Zj,V.parseInt=Kj,V.random=Bj,V.reduce=u6,V.reduceRight=d6,V.repeat=Jj,V.replace=Qj,V.result=Oj,V.round=YW,V.runInContext=ue,V.sample=h6,V.size=g6,V.snakeCase=eW,V.some=_6,V.sortedIndex=p8,V.sortedIndexBy=m8,V.sortedIndexOf=g8,V.sortedLastIndex=_8,V.sortedLastIndexBy=v8,V.sortedLastIndexOf=y8,V.startCase=nW,V.startsWith=iW,V.subtract=XW,V.sum=ZW,V.sumBy=KW,V.template=rW,V.times=kW,V.toFinite=Xa,V.toInteger=gn,V.toLength=RA,V.toLower=oW,V.toNumber=ss,V.toSafeInteger=oj,V.toString=ei,V.toUpper=sW,V.trim=aW,V.trimEnd=lW,V.trimStart=cW,V.truncate=uW,V.unescape=dW,V.uniqueId=FW,V.upperCase=fW,V.upperFirst=PC,V.each=yA,V.eachRight=xA,V.first=mA,AC(V,function(){var c={};return la(V,function(d,v){ii.call(V.prototype,v)||(c[v]=d)}),c}(),{chain:!1}),V.VERSION=t,es(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){V[c].placeholder=V}),es(["drop","take"],function(c,d){Nn.prototype[c]=function(v){v=v===n?1:lr(gn(v),0);var w=this.__filtered__&&!d?new Nn(this):this.clone();return w.__filtered__?w.__takeCount__=Fr(v,w.__takeCount__):w.__views__.push({size:Fr(v,J),type:c+(w.__dir__<0?"Right":"")}),w},Nn.prototype[c+"Right"]=function(v){return this.reverse()[c](v).reverse()}}),es(["filter","map","takeWhile"],function(c,d){var v=d+1,w=v==S||v==oe;Nn.prototype[c]=function(I){var H=this.clone();return H.__iteratees__.push({iteratee:zt(I,3),type:v}),H.__filtered__=H.__filtered__||w,H}}),es(["head","last"],function(c,d){var v="take"+(d?"Right":"");Nn.prototype[c]=function(){return this[v](1).value()[0]}}),es(["initial","tail"],function(c,d){var v="drop"+(d?"":"Right");Nn.prototype[c]=function(){return this.__filtered__?new Nn(this):this[v](1)}}),Nn.prototype.compact=function(){return this.filter(xo)},Nn.prototype.find=function(c){return this.filter(c).head()},Nn.prototype.findLast=function(c){return this.reverse().find(c)},Nn.prototype.invokeMap=En(function(c,d){return typeof c=="function"?new Nn(this):this.map(function(v){return Vh(v,c,d)})}),Nn.prototype.reject=function(c){return this.filter(Fg(zt(c)))},Nn.prototype.slice=function(c,d){c=gn(c);var v=this;return v.__filtered__&&(c>0||d<0)?new Nn(v):(c<0?v=v.takeRight(-c):c&&(v=v.drop(c)),d!==n&&(d=gn(d),v=d<0?v.dropRight(-d):v.take(d-c)),v)},Nn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Nn.prototype.toArray=function(){return this.take(J)},la(Nn.prototype,function(c,d){var v=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),I=V[w?"take"+(d=="last"?"Right":""):d],H=w||/^find/.test(d);I&&(V.prototype[d]=function(){var Z=this.__wrapped__,re=w?[1]:arguments,pe=Z instanceof Nn,Re=re[0],Ne=pe||cn(Z),We=function(An){var Un=I.apply(V,Bl([An],re));return w&&rt?Un[0]:Un};Ne&&v&&typeof Re=="function"&&Re.length!=1&&(pe=Ne=!1);var rt=this.__chain__,Tt=!!this.__actions__.length,Ht=H&&!rt,bn=pe&&!Tt;if(!H&&Ne){Z=bn?Z:new Nn(this);var jt=c.apply(Z,re);return jt.__actions__.push({func:Ig,args:[We],thisArg:n}),new ns(jt,rt)}return Ht&&bn?c.apply(this,re):(jt=this.thru(We),Ht?w?jt.value()[0]:jt.value():jt)})}),es(["pop","push","shift","sort","splice","unshift"],function(c){var d=rg[c],v=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",w=/^(?:pop|shift)$/.test(c);V.prototype[c]=function(){var I=arguments;if(w&&!this.__chain__){var H=this.value();return d.apply(cn(H)?H:[],I)}return this[v](function(Z){return d.apply(cn(Z)?Z:[],I)})}}),la(Nn.prototype,function(c,d){var v=V[d];if(v){var w=v.name+"";ii.call(hd,w)||(hd[w]=[]),hd[w].push({name:d,func:v})}}),hd[Eg(n,C).name]=[{name:"wrapper",func:n}],Nn.prototype.clone=d5,Nn.prototype.reverse=f5,Nn.prototype.value=h5,V.prototype.at=H8,V.prototype.chain=j8,V.prototype.commit=W8,V.prototype.next=G8,V.prototype.plant=q8,V.prototype.reverse=Y8,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=X8,V.prototype.first=V.prototype.head,Ih&&(V.prototype[Ih]=$8),V},Hl=W4();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(yr._=Hl,define(function(){return Hl})):Gc?((Gc.exports=Hl)._=Hl,Ob._=Hl):yr._=Hl}).call(uh)});var qz=LC(($z,DD)=>{"use strict";(function(n){typeof $z=="object"&&typeof DD<"u"?DD.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return function n(t,e,i){function r(a,l){if(!e[a]){if(!t[a]){var u=typeof $h=="function"&&$h;if(!l&&u)return u(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=e[a]={exports:{}};t[a][0].call(h.exports,function(m){var p=t[a][1][m];return r(p||m)},h,h.exports,n,t,e,i)}return e[a].exports}for(var o=typeof $h=="function"&&$h,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var a,l,u,f,h,m,p,y=[],C=0,x=s.length,b=x,P=i.getTypeOf(s)!=="string";C<s.length;)b=x-C,u=P?(a=s[C++],l=C<x?s[C++]:0,C<x?s[C++]:0):(a=s.charCodeAt(C++),l=C<x?s.charCodeAt(C++):0,C<x?s.charCodeAt(C++):0),f=a>>2,h=(3&a)<<4|l>>4,m=1<b?(15&l)<<2|u>>6:64,p=2<b?63&u:64,y.push(o.charAt(f)+o.charAt(h)+o.charAt(m)+o.charAt(p));return y.join("")},e.decode=function(s){var a,l,u,f,h,m,p=0,y=0,C="data:";if(s.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var x,b=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===o.charAt(64)&&b--,s.charAt(s.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=r.uint8array?new Uint8Array(0|b):new Array(0|b);p<s.length;)a=o.indexOf(s.charAt(p++))<<2|(f=o.indexOf(s.charAt(p++)))>>4,l=(15&f)<<4|(h=o.indexOf(s.charAt(p++)))>>2,u=(3&h)<<6|(m=o.indexOf(s.charAt(p++))),x[y++]=a,h!==64&&(x[y++]=l),m!==64&&(x[y++]=u);return x}},{"./support":30,"./utils":32}],2:[function(n,t,e){"use strict";var i=n("./external"),r=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function a(l,u,f,h,m){this.compressedSize=l,this.uncompressedSize=u,this.crc32=f,this.compression=h,this.compressedContent=m}a.prototype={getContentWorker:function(){var l=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),u=this;return l.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,u,f){return l.pipe(new o).pipe(new s("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",u)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,t,e){"use strict";var i=n("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},e.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,t,e){"use strict";var i=n("./utils"),r=function(){for(var o,s=[],a=0;a<256;a++){o=a;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[a]=o}return s}();t.exports=function(o,s){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(a,l,u,f){var h=r,m=f+u;a^=-1;for(var p=f;p<m;p++)a=a>>>8^h[255&(a^l[p])];return-1^a}(0|s,o,o.length,0):function(a,l,u,f){var h=r,m=f+u;a^=-1;for(var p=f;p<m;p++)a=a>>>8^h[255&(a^l.charCodeAt(p))];return-1^a}(0|s,o,o.length,0):0}},{"./utils":32}],5:[function(n,t,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(n,t,e){"use strict";var i=null;i=typeof Promise<"u"?Promise:n("lie"),t.exports={Promise:i}},{lie:37}],7:[function(n,t,e){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=n("pako"),o=n("./utils"),s=n("./stream/GenericWorker"),a=i?"uint8array":"array";function l(u,f){s.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}e.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(a,u.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},e.compressWorker=function(u){return new l("Deflate",u)},e.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,t,e){"use strict";function i(h,m){var p,y="";for(p=0;p<m;p++)y+=String.fromCharCode(255&h),h>>>=8;return y}function r(h,m,p,y,C,x){var b,P,E=h.file,D=h.compression,L=x!==a.utf8encode,B=o.transformTo("string",x(E.name)),k=o.transformTo("string",a.utf8encode(E.name)),G=E.comment,F=o.transformTo("string",x(G)),T=o.transformTo("string",a.utf8encode(G)),N=k.length!==E.name.length,S=T.length!==G.length,q="",oe="",ee="",ge=E.dir,se=E.date,de={crc32:0,compressedSize:0,uncompressedSize:0};m&&!p||(de.crc32=h.crc32,de.compressedSize=h.compressedSize,de.uncompressedSize=h.uncompressedSize);var J=0;m&&(J|=8),L||!N&&!S||(J|=2048);var Q=0,Ie=0;ge&&(Q|=16),C==="UNIX"?(Ie=798,Q|=function(ke,Ce){var He=ke;return ke||(He=Ce?16893:33204),(65535&He)<<16}(E.unixPermissions,ge)):(Ie=20,Q|=function(ke){return 63&(ke||0)}(E.dosPermissions)),b=se.getUTCHours(),b<<=6,b|=se.getUTCMinutes(),b<<=5,b|=se.getUTCSeconds()/2,P=se.getUTCFullYear()-1980,P<<=4,P|=se.getUTCMonth()+1,P<<=5,P|=se.getUTCDate(),N&&(oe=i(1,1)+i(l(B),4)+k,q+="up"+i(oe.length,2)+oe),S&&(ee=i(1,1)+i(l(F),4)+T,q+="uc"+i(ee.length,2)+ee);var Le="";return Le+=`
\0`,Le+=i(J,2),Le+=D.magic,Le+=i(b,2),Le+=i(P,2),Le+=i(de.crc32,4),Le+=i(de.compressedSize,4),Le+=i(de.uncompressedSize,4),Le+=i(B.length,2),Le+=i(q.length,2),{fileRecord:u.LOCAL_FILE_HEADER+Le+B+q,dirRecord:u.CENTRAL_FILE_HEADER+i(Ie,2)+Le+i(F.length,2)+"\0\0\0\0"+i(Q,4)+i(y,4)+B+q+F}}var o=n("../utils"),s=n("../stream/GenericWorker"),a=n("../utf8"),l=n("../crc32"),u=n("../signature");function f(h,m,p,y){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=p,this.encodeFileName=y,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,s),f.prototype.push=function(h){var m=h.meta.percent||0,p=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,s.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:p?(m+100*(p-y-1))/p:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var m=this.streamFiles&&!h.file.dir;if(m){var p=r(h,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var m=this.streamFiles&&!h.file.dir,p=r(h,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),m)this.push({data:function(y){return u.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var p=this.bytesWritten-h,y=function(C,x,b,P,E){var D=o.transformTo("string",E(P));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(C,2)+i(C,2)+i(x,4)+i(b,4)+i(D.length,2)+D}(this.dirRecords.length,p,h,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var m=this;return h.on("data",function(p){m.processChunk(p)}),h.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),h.on("error",function(p){m.error(p)}),this},f.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var m=this._sources;if(!s.prototype.error.call(this,h))return!1;for(var p=0;p<m.length;p++)try{m[p].error(h)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var h=this._sources,m=0;m<h.length;m++)h[m].lock()},t.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,t,e){"use strict";var i=n("../compressions"),r=n("./ZipFileWorker");e.generateWorker=function(o,s,a){var l=new r(s.streamFiles,a,s.platform,s.encodeFileName),u=0;try{o.forEach(function(f,h){u++;var m=function(x,b){var P=x||b,E=i[P];if(!E)throw new Error(P+" is not a valid compression method !");return E}(h.options.compression,s.compression),p=h.options.compressionOptions||s.compressionOptions||{},y=h.dir,C=h.date;h._compressWorker(m,p).withStreamInfo("file",{name:f,dir:y,date:C,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(l)}),l.entriesCount=u}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,t,e){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new i;for(var o in this)typeof this[o]!="function"&&(r[o]=this[o]);return r}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(r,o){return new i().loadAsync(r,o)},i.external=n("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./external"),o=n("./utf8"),s=n("./zipEntries"),a=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function u(f){return new r.Promise(function(h,m){var p=f.decompressed.getContentWorker().pipe(new a);p.on("error",function(y){m(y)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}t.exports=function(f,h){var m=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(f)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(p){var y=new s(h);return y.load(p),y}).then(function(p){var y=[r.Promise.resolve(p)],C=p.files;if(h.checkCRC32)for(var x=0;x<C.length;x++)y.push(u(C[x]));return r.Promise.all(y)}).then(function(p){for(var y=p.shift(),C=y.files,x=0;x<C.length;x++){var b=C[x],P=b.fileNameStr,E=i.resolve(b.fileNameStr);m.file(E,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:h.createFolders}),b.dir||(m.file(E).unsafeOriginalName=P)}return y.zipComment.length&&(m.comment=y.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../stream/GenericWorker");function o(s,a){r.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}i.inherits(o,r),o.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,t,e){"use strict";var i=n("readable-stream").Readable;function r(o,s,a){i.call(this,s),this._helper=o;var l=this;o.on("data",function(u,f){l.push(u)||l._helper.pause(),a&&a(f)}).on("error",function(u){l.emit("error",u)}).on("end",function(){l.push(null)})}n("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(n,t,e){"use strict";t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,r);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,r)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var r=new Buffer(i);return r.fill(0),r},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,t,e){"use strict";function i(E,D,L){var B,k=o.getTypeOf(D),G=o.extend(L||{},l);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(E=C(E)),G.createFolders&&(B=y(E))&&x.call(this,B,!0);var F=k==="string"&&G.binary===!1&&G.base64===!1;L&&L.binary!==void 0||(G.binary=!F),(D instanceof u&&D.uncompressedSize===0||G.dir||!D||D.length===0)&&(G.base64=!1,G.binary=!0,D="",G.compression="STORE",k="string");var T=null;T=D instanceof u||D instanceof s?D:m.isNode&&m.isStream(D)?new p(E,D):o.prepareContent(E,D,G.binary,G.optimizedBinaryString,G.base64);var N=new f(E,T,G);this.files[E]=N}var r=n("./utf8"),o=n("./utils"),s=n("./stream/GenericWorker"),a=n("./stream/StreamHelper"),l=n("./defaults"),u=n("./compressedObject"),f=n("./zipObject"),h=n("./generate"),m=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),y=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var D=E.lastIndexOf("/");return 0<D?E.substring(0,D):""},C=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},x=function(E,D){return D=D!==void 0?D:l.createFolders,E=C(E),this.files[E]||i.call(this,E,null,{dir:!0,createFolders:D}),this.files[E]};function b(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var D,L,B;for(D in this.files)B=this.files[D],(L=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&E(L,B)},filter:function(E){var D=[];return this.forEach(function(L,B){E(L,B)&&D.push(B)}),D},file:function(E,D,L){if(arguments.length!==1)return E=this.root+E,i.call(this,E,D,L),this;if(b(E)){var B=E;return this.filter(function(G,F){return!F.dir&&B.test(G)})}var k=this.files[this.root+E];return k&&!k.dir?k:null},folder:function(E){if(!E)return this;if(b(E))return this.filter(function(k,G){return G.dir&&E.test(k)});var D=this.root+E,L=x.call(this,D),B=this.clone();return B.root=L.name,B},remove:function(E){E=this.root+E;var D=this.files[E];if(D||(E.slice(-1)!=="/"&&(E+="/"),D=this.files[E]),D&&!D.dir)delete this.files[E];else for(var L=this.filter(function(k,G){return G.name.slice(0,E.length)===E}),B=0;B<L.length;B++)delete this.files[L[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var D,L={};try{if((L=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");o.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var B=L.comment||this.comment||"";D=h.generateWorker(this,L,B)}catch(k){(D=new s("error")).error(k)}return new a(D,L.type||"string",L.mimeType)},generateAsync:function(E,D){return this.generateInternalStream(E).accumulate(D)},generateNodeStream:function(E,D){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(D)}};t.exports=P},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,t,e){"use strict";t.exports=n("stream")},{stream:void 0}],17:[function(n,t,e){"use strict";var i=n("./DataReader");function r(o){i.call(this,o);for(var s=0;s<this.data.length;s++)o[s]=255&o[s]}n("../utils").inherits(r,i),r.prototype.byteAt=function(o){return this.data[this.zero+o]},r.prototype.lastIndexOfSignature=function(o){for(var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===s&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===u)return f-this.zero;return-1},r.prototype.readAndCheckSignature=function(o){var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.readData(4);return s===f[0]&&a===f[1]&&l===f[2]&&u===f[3]},r.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(n,t,e){"use strict";var i=n("../utils");function r(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var s,a=0;for(this.checkOffset(o),s=this.index+o-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=o,a},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},t.exports=r},{"../utils":32}],19:[function(n,t,e){"use strict";var i=n("./Uint8ArrayReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,t,e){"use strict";var i=n("./DataReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},r.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},r.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},r.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(n,t,e){"use strict";var i=n("./ArrayReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../support"),o=n("./ArrayReader"),s=n("./StringReader"),a=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");t.exports=function(u){var f=i.getTypeOf(u);return i.checkSupport(f),f!=="string"||r.uint8array?f==="nodebuffer"?new a(u):r.uint8array?new l(i.transformTo("uint8array",u)):new o(i.transformTo("array",u)):new s(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,t,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,t,e){"use strict";var i=n("./GenericWorker"),r=n("../utils");function o(s){i.call(this,"ConvertWorker to "+s),this.destType=s}r.inherits(o,i),o.prototype.processChunk=function(s){this.push({data:r.transformTo(this.destType,s.data),meta:s.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,t,e){"use strict";var i=n("./GenericWorker"),r=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(s){this.streamInfo.crc32=r(s.data,this.streamInfo.crc32||0),this.push(s)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./GenericWorker");function o(s){r.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}i.inherits(o,r),o.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}r.prototype.processChunk.call(this,s)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./GenericWorker");function o(s){r.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=i.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,t,e){"use strict";function i(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,o){return this._listeners[r].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,o){if(this._listeners[r])for(var s=0;s<this._listeners[r].length;s++)this._listeners[r][s].call(this,o)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var o=this;return r.on("data",function(s){o.processChunk(s)}),r.on("end",function(){o.end()}),r.on("error",function(s){o.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,o){return this.extraStreamInfo[r]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},t.exports=i},{}],29:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./ConvertWorker"),o=n("./GenericWorker"),s=n("../base64"),a=n("../support"),l=n("../external"),u=null;if(a.nodestream)try{u=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(m,p){return new l.Promise(function(y,C){var x=[],b=m._internalType,P=m._outputType,E=m._mimeType;m.on("data",function(D,L){x.push(D),p&&p(L)}).on("error",function(D){x=[],C(D)}).on("end",function(){try{var D=function(L,B,k){switch(L){case"blob":return i.newBlob(i.transformTo("arraybuffer",B),k);case"base64":return s.encode(B);default:return i.transformTo(L,B)}}(P,function(L,B){var k,G=0,F=null,T=0;for(k=0;k<B.length;k++)T+=B[k].length;switch(L){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(F=new Uint8Array(T),k=0;k<B.length;k++)F.set(B[k],G),G+=B[k].length;return F;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+L+"'")}}(b,x),E);y(D)}catch(L){C(L)}x=[]}).resume()})}function h(m,p,y){var C=p;switch(p){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=p,this._mimeType=y,i.checkSupport(C),this._worker=m.pipe(new r(C)),m.lock()}catch(x){this._worker=new o("error"),this._worker.error(x)}}h.prototype={accumulate:function(m){return f(this,m)},on:function(m,p){var y=this;return m==="data"?this._worker.on(m,function(C){p.call(y,C.data,C.meta)}):this._worker.on(m,function(){i.delay(p,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},m)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,t,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var i=new ArrayBuffer(0);try{e.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),e.blob=r.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!n("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(n,t,e){"use strict";for(var i=n("./utils"),r=n("./support"),o=n("./nodejsUtils"),s=n("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}e.utf8encode=function(h){return r.nodebuffer?o.newBufferFrom(h,"utf-8"):function(m){var p,y,C,x,b,P=m.length,E=0;for(x=0;x<P;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<P&&(64512&(C=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(C-56320),x++),E+=y<128?1:y<2048?2:y<65536?3:4;for(p=r.uint8array?new Uint8Array(E):new Array(E),x=b=0;b<E;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<P&&(64512&(C=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(C-56320),x++),y<128?p[b++]=y:(y<2048?p[b++]=192|y>>>6:(y<65536?p[b++]=224|y>>>12:(p[b++]=240|y>>>18,p[b++]=128|y>>>12&63),p[b++]=128|y>>>6&63),p[b++]=128|63&y);return p}(h)},e.utf8decode=function(h){return r.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(m){var p,y,C,x,b=m.length,P=new Array(2*b);for(p=y=0;p<b;)if((C=m[p++])<128)P[y++]=C;else if(4<(x=a[C]))P[y++]=65533,p+=x-1;else{for(C&=x===2?31:x===3?15:7;1<x&&p<b;)C=C<<6|63&m[p++],x--;1<x?P[y++]=65533:C<65536?P[y++]=C:(C-=65536,P[y++]=55296|C>>10&1023,P[y++]=56320|1023&C)}return P.length!==y&&(P.subarray?P=P.subarray(0,y):P.length=y),i.applyFromCharCode(P)}(h=i.transformTo(r.uint8array?"uint8array":"array",h))},i.inherits(u,s),u.prototype.processChunk=function(h){var m=i.transformTo(r.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var p=m;(m=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),m.set(p,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var y=function(x,b){var P;for((b=b||x.length)>x.length&&(b=x.length),P=b-1;0<=P&&(192&x[P])==128;)P--;return P<0||P===0?b:P+a[x[P]]>b?P:b}(m),C=m;y!==m.length&&(r.uint8array?(C=m.subarray(0,y),this.leftOver=m.subarray(y,m.length)):(C=m.slice(0,y),this.leftOver=m.slice(y,m.length))),this.push({data:e.utf8decode(C),meta:h.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=u,i.inherits(f,s),f.prototype.processChunk=function(h){this.push({data:e.utf8encode(h.data),meta:h.meta})},e.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,t,e){"use strict";var i=n("./support"),r=n("./base64"),o=n("./nodejsUtils"),s=n("./external");function a(p){return p}function l(p,y){for(var C=0;C<p.length;++C)y[C]=255&p.charCodeAt(C);return y}n("setimmediate"),e.newBlob=function(p,y){e.checkSupport("blob");try{return new Blob([p],{type:y})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(p),C.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(p,y,C){var x=[],b=0,P=p.length;if(P<=C)return String.fromCharCode.apply(null,p);for(;b<P;)y==="array"||y==="nodebuffer"?x.push(String.fromCharCode.apply(null,p.slice(b,Math.min(b+C,P)))):x.push(String.fromCharCode.apply(null,p.subarray(b,Math.min(b+C,P)))),b+=C;return x.join("")},stringifyByChar:function(p){for(var y="",C=0;C<p.length;C++)y+=String.fromCharCode(p[C]);return y},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(p){var y=65536,C=e.getTypeOf(p),x=!0;if(C==="uint8array"?x=u.applyCanBeUsed.uint8array:C==="nodebuffer"&&(x=u.applyCanBeUsed.nodebuffer),x)for(;1<y;)try{return u.stringifyByChunk(p,C,y)}catch{y=Math.floor(y/2)}return u.stringifyByChar(p)}function h(p,y){for(var C=0;C<p.length;C++)y[C]=p[C];return y}e.applyFromCharCode=f;var m={};m.string={string:a,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,o.allocBuffer(p.length))}},m.array={string:f,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},m.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return h(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:f,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return o.newBufferFrom(p)}},m.nodebuffer={string:f,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:a},e.transformTo=function(p,y){if(y=y||"",!p)return y;e.checkSupport(p);var C=e.getTypeOf(y);return m[C][p](y)},e.resolve=function(p){for(var y=p.split("/"),C=[],x=0;x<y.length;x++){var b=y[x];b==="."||b===""&&x!==0&&x!==y.length-1||(b===".."?C.pop():C.push(b))}return C.join("/")},e.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(p)?"nodebuffer":i.uint8array&&p instanceof Uint8Array?"uint8array":i.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(p){if(!i[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(p){var y,C,x="";for(C=0;C<(p||"").length;C++)x+="\\x"+((y=p.charCodeAt(C))<16?"0":"")+y.toString(16).toUpperCase();return x},e.delay=function(p,y,C){setImmediate(function(){p.apply(C||null,y||[])})},e.inherits=function(p,y){function C(){}C.prototype=y.prototype,p.prototype=new C},e.extend=function(){var p,y,C={};for(p=0;p<arguments.length;p++)for(y in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],y)&&C[y]===void 0&&(C[y]=arguments[p][y]);return C},e.prepareContent=function(p,y,C,x,b){return s.Promise.resolve(y).then(function(P){return i.blob&&(P instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(P))!==-1)&&typeof FileReader<"u"?new s.Promise(function(E,D){var L=new FileReader;L.onload=function(B){E(B.target.result)},L.onerror=function(B){D(B.target.error)},L.readAsArrayBuffer(P)}):P}).then(function(P){var E=e.getTypeOf(P);return E?(E==="arraybuffer"?P=e.transformTo("uint8array",P):E==="string"&&(b?P=r.decode(P):C&&x!==!0&&(P=function(D){return l(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))}(P))),P):s.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,t,e){"use strict";var i=n("./reader/readerFor"),r=n("./utils"),o=n("./signature"),s=n("./zipEntry"),a=n("./support");function l(u){this.files=[],this.loadOptions=u}l.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(f)+", expected "+r.pretty(u)+")")}},isSignature:function(u,f){var h=this.reader.index;this.reader.setIndex(u);var m=this.reader.readString(4)===f;return this.reader.setIndex(h),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",h=r.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,h,m=this.zip64EndOfCentralSize-44;0<m;)u=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var m=f-h;if(0<m)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(u){this.reader=i(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,t,e){"use strict";var i=n("./reader/readerFor"),r=n("./utils"),o=n("./compressedObject"),s=n("./crc32"),a=n("./utf8"),l=n("./compressions"),u=n("./support");function f(h,m){this.options=h,this.loadOptions=m}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var m,p;if(h.skip(22),this.fileNameLength=h.readInt(2),p=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(y){for(var C in l)if(Object.prototype.hasOwnProperty.call(l,C)&&l[C].magic===y)return l[C];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var m=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(m),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var m,p,y,C=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<C;)m=h.readInt(2),p=h.readInt(2),y=h.readData(p),this.extraFields[m]={id:m,length:p,value:y};h.setIndex(C)},handleUTF8:function(){var h=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var p=r.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var C=r.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var m=i(h.value);return m.readInt(1)!==1||s(this.fileName)!==m.readInt(4)?null:a.utf8decode(m.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var m=i(h.value);return m.readInt(1)!==1||s(this.fileComment)!==m.readInt(4)?null:a.utf8decode(m.readData(h.length-5))}return null}},t.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,t,e){"use strict";function i(m,p,y){this.name=m,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=p,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var r=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),s=n("./utf8"),a=n("./compressedObject"),l=n("./stream/GenericWorker");i.prototype={internalStream:function(m){var p=null,y="string";try{if(!m)throw new Error("No output type specified.");var C=(y=m.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),p=this._decompressWorker();var x=!this._dataBinary;x&&!C&&(p=p.pipe(new s.Utf8EncodeWorker)),!x&&C&&(p=p.pipe(new s.Utf8DecodeWorker))}catch(b){(p=new l("error")).error(b)}return new r(p,y,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof a&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(y,m,p)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)i.prototype[u[h]]=f;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,t,e){(function(i){"use strict";var r,o,s=i.MutationObserver||i.WebKitMutationObserver;if(s){var a=0,l=new s(m),u=i.document.createTextNode("");l.observe(u,{characterData:!0}),r=function(){u.data=a=++a%2}}else if(i.setImmediate||i.MessageChannel===void 0)r="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var p=i.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:function(){setTimeout(m,0)};else{var f=new i.MessageChannel;f.port1.onmessage=m,r=function(){f.port2.postMessage(0)}}var h=[];function m(){var p,y;o=!0;for(var C=h.length;C;){for(y=h,h=[],p=-1;++p<C;)y[p]();C=h.length}o=!1}t.exports=function(p){h.push(p)!==1||o||r()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,t,e){"use strict";var i=n("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,C!==r&&p(this,C)}function f(C,x,b){this.promise=C,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function h(C,x,b){i(function(){var P;try{P=x(b)}catch(E){return o.reject(C,E)}P===C?o.reject(C,new TypeError("Cannot resolve promise with itself")):o.resolve(C,P)})}function m(C){var x=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof x=="function")return function(){x.apply(C,arguments)}}function p(C,x){var b=!1;function P(L){b||(b=!0,o.reject(C,L))}function E(L){b||(b=!0,o.resolve(C,L))}var D=y(function(){x(E,P)});D.status==="error"&&P(D.value)}function y(C,x){var b={};try{b.value=C(x),b.status="success"}catch(P){b.status="error",b.value=P}return b}(t.exports=u).prototype.finally=function(C){if(typeof C!="function")return this;var x=this.constructor;return this.then(function(b){return x.resolve(C()).then(function(){return b})},function(b){return x.resolve(C()).then(function(){throw b})})},u.prototype.catch=function(C){return this.then(null,C)},u.prototype.then=function(C,x){if(typeof C!="function"&&this.state===a||typeof x!="function"&&this.state===s)return this;var b=new this.constructor(r);return this.state!==l?h(b,this.state===a?C:x,this.outcome):this.queue.push(new f(b,C,x)),b},f.prototype.callFulfilled=function(C){o.resolve(this.promise,C)},f.prototype.otherCallFulfilled=function(C){h(this.promise,this.onFulfilled,C)},f.prototype.callRejected=function(C){o.reject(this.promise,C)},f.prototype.otherCallRejected=function(C){h(this.promise,this.onRejected,C)},o.resolve=function(C,x){var b=y(m,x);if(b.status==="error")return o.reject(C,b.value);var P=b.value;if(P)p(C,P);else{C.state=a,C.outcome=x;for(var E=-1,D=C.queue.length;++E<D;)C.queue[E].callFulfilled(x)}return C},o.reject=function(C,x){C.state=s,C.outcome=x;for(var b=-1,P=C.queue.length;++b<P;)C.queue[b].callRejected(x);return C},u.resolve=function(C){return C instanceof this?C:o.resolve(new this(r),C)},u.reject=function(C){var x=new this(r);return o.reject(x,C)},u.all=function(C){var x=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=C.length,P=!1;if(!b)return this.resolve([]);for(var E=new Array(b),D=0,L=-1,B=new this(r);++L<b;)k(C[L],L);return B;function k(G,F){x.resolve(G).then(function(T){E[F]=T,++D!==b||P||(P=!0,o.resolve(B,E))},function(T){P||(P=!0,o.reject(B,T))})}},u.race=function(C){var x=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=C.length,P=!1;if(!b)return this.resolve([]);for(var E=-1,D=new this(r);++E<b;)L=C[E],x.resolve(L).then(function(B){P||(P=!0,o.resolve(D,B))},function(B){P||(P=!0,o.reject(D,B))});var L;return D}},{immediate:36}],38:[function(n,t,e){"use strict";var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,t,e){"use strict";var i=n("./zlib/deflate"),r=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/messages"),a=n("./zlib/zstream"),l=Object.prototype.toString,u=0,f=-1,h=0,m=8;function p(C){if(!(this instanceof p))return new p(C);this.options=r.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},C||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(b!==u)throw new Error(s[b]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var P;if(P=typeof x.dictionary=="string"?o.string2buf(x.dictionary):l.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(b=i.deflateSetDictionary(this.strm,P))!==u)throw new Error(s[b]);this._dict_set=!0}}function y(C,x){var b=new p(x);if(b.push(C,!0),b.err)throw b.msg||s[b.err];return b.result}p.prototype.push=function(C,x){var b,P,E=this.strm,D=this.options.chunkSize;if(this.ended)return!1;P=x===~~x?x:x===!0?4:0,typeof C=="string"?E.input=o.string2buf(C):l.call(C)==="[object ArrayBuffer]"?E.input=new Uint8Array(C):E.input=C,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new r.Buf8(D),E.next_out=0,E.avail_out=D),(b=i.deflate(E,P))!==1&&b!==u)return this.onEnd(b),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||P!==4&&P!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(r.shrinkBuf(E.output,E.next_out))):this.onData(r.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&b!==1);return P===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===u):P!==2||(this.onEnd(u),!(E.avail_out=0))},p.prototype.onData=function(C){this.chunks.push(C)},p.prototype.onEnd=function(C){C===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},e.Deflate=p,e.deflate=y,e.deflateRaw=function(C,x){return(x=x||{}).raw=!0,y(C,x)},e.gzip=function(C,x){return(x=x||{}).gzip=!0,y(C,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,t,e){"use strict";var i=n("./zlib/inflate"),r=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/constants"),a=n("./zlib/messages"),l=n("./zlib/zstream"),u=n("./zlib/gzheader"),f=Object.prototype.toString;function h(p){if(!(this instanceof h))return new h(p);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},p||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||p&&p.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var C=i.inflateInit2(this.strm,y.windowBits);if(C!==s.Z_OK)throw new Error(a[C]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function m(p,y){var C=new h(y);if(C.push(p,!0),C.err)throw C.msg||a[C.err];return C.result}h.prototype.push=function(p,y){var C,x,b,P,E,D,L=this.strm,B=this.options.chunkSize,k=this.options.dictionary,G=!1;if(this.ended)return!1;x=y===~~y?y:y===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof p=="string"?L.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?L.input=new Uint8Array(p):L.input=p,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new r.Buf8(B),L.next_out=0,L.avail_out=B),(C=i.inflate(L,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&k&&(D=typeof k=="string"?o.string2buf(k):f.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,C=i.inflateSetDictionary(this.strm,D)),C===s.Z_BUF_ERROR&&G===!0&&(C=s.Z_OK,G=!1),C!==s.Z_STREAM_END&&C!==s.Z_OK)return this.onEnd(C),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&C!==s.Z_STREAM_END&&(L.avail_in!==0||x!==s.Z_FINISH&&x!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(L.output,L.next_out),P=L.next_out-b,E=o.buf2string(L.output,b),L.next_out=P,L.avail_out=B-P,P&&r.arraySet(L.output,L.output,b,P,0),this.onData(E)):this.onData(r.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(G=!0)}while((0<L.avail_in||L.avail_out===0)&&C!==s.Z_STREAM_END);return C===s.Z_STREAM_END&&(x=s.Z_FINISH),x===s.Z_FINISH?(C=i.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===s.Z_OK):x!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(L.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},e.Inflate=h,e.inflate=m,e.inflateRaw=function(p,y){return(y=y||{}).raw=!0,m(p,y)},e.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,t,e){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var u in l)l.hasOwnProperty(u)&&(s[u]=l[u])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var r={arraySet:function(s,a,l,u,f){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+u),f);else for(var h=0;h<u;h++)s[f+h]=a[l+h]},flattenChunks:function(s){var a,l,u,f,h,m;for(a=u=0,l=s.length;a<l;a++)u+=s[a].length;for(m=new Uint8Array(u),a=f=0,l=s.length;a<l;a++)h=s[a],m.set(h,f),f+=h.length;return m}},o={arraySet:function(s,a,l,u,f){for(var h=0;h<u;h++)s[f+h]=a[l+h]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},{}],42:[function(n,t,e){"use strict";var i=n("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(u,f){if(f<65537&&(u.subarray&&o||!u.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(u,f));for(var h="",m=0;m<f;m++)h+=String.fromCharCode(u[m]);return h}s[254]=s[254]=1,e.string2buf=function(u){var f,h,m,p,y,C=u.length,x=0;for(p=0;p<C;p++)(64512&(h=u.charCodeAt(p)))==55296&&p+1<C&&(64512&(m=u.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),x+=h<128?1:h<2048?2:h<65536?3:4;for(f=new i.Buf8(x),p=y=0;y<x;p++)(64512&(h=u.charCodeAt(p)))==55296&&p+1<C&&(64512&(m=u.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),h<128?f[y++]=h:(h<2048?f[y++]=192|h>>>6:(h<65536?f[y++]=224|h>>>12:(f[y++]=240|h>>>18,f[y++]=128|h>>>12&63),f[y++]=128|h>>>6&63),f[y++]=128|63&h);return f},e.buf2binstring=function(u){return l(u,u.length)},e.binstring2buf=function(u){for(var f=new i.Buf8(u.length),h=0,m=f.length;h<m;h++)f[h]=u.charCodeAt(h);return f},e.buf2string=function(u,f){var h,m,p,y,C=f||u.length,x=new Array(2*C);for(h=m=0;h<C;)if((p=u[h++])<128)x[m++]=p;else if(4<(y=s[p]))x[m++]=65533,h+=y-1;else{for(p&=y===2?31:y===3?15:7;1<y&&h<C;)p=p<<6|63&u[h++],y--;1<y?x[m++]=65533:p<65536?x[m++]=p:(p-=65536,x[m++]=55296|p>>10&1023,x[m++]=56320|1023&p)}return l(x,m)},e.utf8border=function(u,f){var h;for((f=f||u.length)>u.length&&(f=u.length),h=f-1;0<=h&&(192&u[h])==128;)h--;return h<0||h===0?f:h+s[u[h]]>f?h:f}},{"./common":41}],43:[function(n,t,e){"use strict";t.exports=function(i,r,o,s){for(var a=65535&i|0,l=i>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;l=l+(a=a+r[s++]|0)|0,--u;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(n,t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,t,e){"use strict";var i=function(){for(var r,o=[],s=0;s<256;s++){r=s;for(var a=0;a<8;a++)r=1&r?3988292384^r>>>1:r>>>1;o[s]=r}return o}();t.exports=function(r,o,s,a){var l=i,u=a+s;r^=-1;for(var f=a;f<u;f++)r=r>>>8^l[255&(r^o[f])];return-1^r}},{}],46:[function(n,t,e){"use strict";var i,r=n("../utils/common"),o=n("./trees"),s=n("./adler32"),a=n("./crc32"),l=n("./messages"),u=0,f=4,h=0,m=-2,p=-1,y=4,C=2,x=8,b=9,P=286,E=30,D=19,L=2*P+1,B=15,k=3,G=258,F=G+k+1,T=42,N=113,S=1,q=2,oe=3,ee=4;function ge(O,Me){return O.msg=l[Me],Me}function se(O){return(O<<1)-(4<O?9:0)}function de(O){for(var Me=O.length;0<=--Me;)O[Me]=0}function J(O){var Me=O.state,j=Me.pending;j>O.avail_out&&(j=O.avail_out),j!==0&&(r.arraySet(O.output,Me.pending_buf,Me.pending_out,j,O.next_out),O.next_out+=j,Me.pending_out+=j,O.total_out+=j,O.avail_out-=j,Me.pending-=j,Me.pending===0&&(Me.pending_out=0))}function Q(O,Me){o._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,Me),O.block_start=O.strstart,J(O.strm)}function Ie(O,Me){O.pending_buf[O.pending++]=Me}function Le(O,Me){O.pending_buf[O.pending++]=Me>>>8&255,O.pending_buf[O.pending++]=255&Me}function ke(O,Me){var j,Y,W=O.max_chain_length,ne=O.strstart,ve=O.prev_length,Ee=O.nice_match,ie=O.strstart>O.w_size-F?O.strstart-(O.w_size-F):0,U=O.window,R=O.w_mask,K=O.prev,_e=O.strstart+G,Pe=U[ne+ve-1],ye=U[ne+ve];O.prev_length>=O.good_match&&(W>>=2),Ee>O.lookahead&&(Ee=O.lookahead);do if(U[(j=Me)+ve]===ye&&U[j+ve-1]===Pe&&U[j]===U[ne]&&U[++j]===U[ne+1]){ne+=2,j++;do;while(U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&ne<_e);if(Y=G-(_e-ne),ne=_e-G,ve<Y){if(O.match_start=Me,Ee<=(ve=Y))break;Pe=U[ne+ve-1],ye=U[ne+ve]}}while((Me=K[Me&R])>ie&&--W!=0);return ve<=O.lookahead?ve:O.lookahead}function Ce(O){var Me,j,Y,W,ne,ve,Ee,ie,U,R,K=O.w_size;do{if(W=O.window_size-O.lookahead-O.strstart,O.strstart>=K+(K-F)){for(r.arraySet(O.window,O.window,K,K,0),O.match_start-=K,O.strstart-=K,O.block_start-=K,Me=j=O.hash_size;Y=O.head[--Me],O.head[Me]=K<=Y?Y-K:0,--j;);for(Me=j=K;Y=O.prev[--Me],O.prev[Me]=K<=Y?Y-K:0,--j;);W+=K}if(O.strm.avail_in===0)break;if(ve=O.strm,Ee=O.window,ie=O.strstart+O.lookahead,U=W,R=void 0,R=ve.avail_in,U<R&&(R=U),j=R===0?0:(ve.avail_in-=R,r.arraySet(Ee,ve.input,ve.next_in,R,ie),ve.state.wrap===1?ve.adler=s(ve.adler,Ee,R,ie):ve.state.wrap===2&&(ve.adler=a(ve.adler,Ee,R,ie)),ve.next_in+=R,ve.total_in+=R,R),O.lookahead+=j,O.lookahead+O.insert>=k)for(ne=O.strstart-O.insert,O.ins_h=O.window[ne],O.ins_h=(O.ins_h<<O.hash_shift^O.window[ne+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[ne+k-1])&O.hash_mask,O.prev[ne&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=ne,ne++,O.insert--,!(O.lookahead+O.insert<k)););}while(O.lookahead<F&&O.strm.avail_in!==0)}function He(O,Me){for(var j,Y;;){if(O.lookahead<F){if(Ce(O),O.lookahead<F&&Me===u)return S;if(O.lookahead===0)break}if(j=0,O.lookahead>=k&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),j!==0&&O.strstart-j<=O.w_size-F&&(O.match_length=ke(O,j)),O.match_length>=k)if(Y=o._tr_tally(O,O.strstart-O.match_start,O.match_length-k),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=k){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else Y=o._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(Y&&(Q(O,!1),O.strm.avail_out===0))return S}return O.insert=O.strstart<k-1?O.strstart:k-1,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):O.last_lit&&(Q(O,!1),O.strm.avail_out===0)?S:q}function Ge(O,Me){for(var j,Y,W;;){if(O.lookahead<F){if(Ce(O),O.lookahead<F&&Me===u)return S;if(O.lookahead===0)break}if(j=0,O.lookahead>=k&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=k-1,j!==0&&O.prev_length<O.max_lazy_match&&O.strstart-j<=O.w_size-F&&(O.match_length=ke(O,j),O.match_length<=5&&(O.strategy===1||O.match_length===k&&4096<O.strstart-O.match_start)&&(O.match_length=k-1)),O.prev_length>=k&&O.match_length<=O.prev_length){for(W=O.strstart+O.lookahead-k,Y=o._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-k),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=W&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=k-1,O.strstart++,Y&&(Q(O,!1),O.strm.avail_out===0))return S}else if(O.match_available){if((Y=o._tr_tally(O,0,O.window[O.strstart-1]))&&Q(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return S}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(Y=o._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<k-1?O.strstart:k-1,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):O.last_lit&&(Q(O,!1),O.strm.avail_out===0)?S:q}function Ve(O,Me,j,Y,W){this.good_length=O,this.max_lazy=Me,this.nice_length=j,this.max_chain=Y,this.func=W}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*L),this.dyn_dtree=new r.Buf16(2*(2*E+1)),this.bl_tree=new r.Buf16(2*(2*D+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(B+1),this.heap=new r.Buf16(2*P+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*P+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pt(O){var Me;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=C,(Me=O.state).pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?T:N,O.adler=Me.wrap===2?0:1,Me.last_flush=u,o._tr_init(Me),h):ge(O,m)}function Lt(O){var Me=pt(O);return Me===h&&function(j){j.window_size=2*j.w_size,de(j.head),j.max_lazy_match=i[j.level].max_lazy,j.good_match=i[j.level].good_length,j.nice_match=i[j.level].nice_length,j.max_chain_length=i[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=k-1,j.match_available=0,j.ins_h=0}(O.state),Me}function Pn(O,Me,j,Y,W,ne){if(!O)return m;var ve=1;if(Me===p&&(Me=6),Y<0?(ve=0,Y=-Y):15<Y&&(ve=2,Y-=16),W<1||b<W||j!==x||Y<8||15<Y||Me<0||9<Me||ne<0||y<ne)return ge(O,m);Y===8&&(Y=9);var Ee=new mt;return(O.state=Ee).strm=O,Ee.wrap=ve,Ee.gzhead=null,Ee.w_bits=Y,Ee.w_size=1<<Ee.w_bits,Ee.w_mask=Ee.w_size-1,Ee.hash_bits=W+7,Ee.hash_size=1<<Ee.hash_bits,Ee.hash_mask=Ee.hash_size-1,Ee.hash_shift=~~((Ee.hash_bits+k-1)/k),Ee.window=new r.Buf8(2*Ee.w_size),Ee.head=new r.Buf16(Ee.hash_size),Ee.prev=new r.Buf16(Ee.w_size),Ee.lit_bufsize=1<<W+6,Ee.pending_buf_size=4*Ee.lit_bufsize,Ee.pending_buf=new r.Buf8(Ee.pending_buf_size),Ee.d_buf=1*Ee.lit_bufsize,Ee.l_buf=3*Ee.lit_bufsize,Ee.level=Me,Ee.strategy=ne,Ee.method=j,Lt(O)}i=[new Ve(0,0,0,0,function(O,Me){var j=65535;for(j>O.pending_buf_size-5&&(j=O.pending_buf_size-5);;){if(O.lookahead<=1){if(Ce(O),O.lookahead===0&&Me===u)return S;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var Y=O.block_start+j;if((O.strstart===0||O.strstart>=Y)&&(O.lookahead=O.strstart-Y,O.strstart=Y,Q(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-F&&(Q(O,!1),O.strm.avail_out===0))return S}return O.insert=0,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):(O.strstart>O.block_start&&(Q(O,!1),O.strm.avail_out),S)}),new Ve(4,4,8,4,He),new Ve(4,5,16,8,He),new Ve(4,6,32,32,He),new Ve(4,4,16,16,Ge),new Ve(8,16,32,32,Ge),new Ve(8,16,128,128,Ge),new Ve(8,32,128,256,Ge),new Ve(32,128,258,1024,Ge),new Ve(32,258,258,4096,Ge)],e.deflateInit=function(O,Me){return Pn(O,Me,x,15,8,0)},e.deflateInit2=Pn,e.deflateReset=Lt,e.deflateResetKeep=pt,e.deflateSetHeader=function(O,Me){return O&&O.state?O.state.wrap!==2?m:(O.state.gzhead=Me,h):m},e.deflate=function(O,Me){var j,Y,W,ne;if(!O||!O.state||5<Me||Me<0)return O?ge(O,m):m;if(Y=O.state,!O.output||!O.input&&O.avail_in!==0||Y.status===666&&Me!==f)return ge(O,O.avail_out===0?-5:m);if(Y.strm=O,j=Y.last_flush,Y.last_flush=Me,Y.status===T)if(Y.wrap===2)O.adler=0,Ie(Y,31),Ie(Y,139),Ie(Y,8),Y.gzhead?(Ie(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),Ie(Y,255&Y.gzhead.time),Ie(Y,Y.gzhead.time>>8&255),Ie(Y,Y.gzhead.time>>16&255),Ie(Y,Y.gzhead.time>>24&255),Ie(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),Ie(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(Ie(Y,255&Y.gzhead.extra.length),Ie(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(O.adler=a(O.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),Ie(Y,3),Y.status=N);else{var ve=x+(Y.w_bits-8<<4)<<8;ve|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(ve|=32),ve+=31-ve%31,Y.status=N,Le(Y,ve),Y.strstart!==0&&(Le(Y,O.adler>>>16),Le(Y,65535&O.adler)),O.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(W=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),J(O),W=Y.pending,Y.pending!==Y.pending_buf_size));)Ie(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){W=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),J(O),W=Y.pending,Y.pending===Y.pending_buf_size)){ne=1;break}ne=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,Ie(Y,ne)}while(ne!==0);Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),ne===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){W=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),J(O),W=Y.pending,Y.pending===Y.pending_buf_size)){ne=1;break}ne=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,Ie(Y,ne)}while(ne!==0);Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),ne===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&J(O),Y.pending+2<=Y.pending_buf_size&&(Ie(Y,255&O.adler),Ie(Y,O.adler>>8&255),O.adler=0,Y.status=N)):Y.status=N),Y.pending!==0){if(J(O),O.avail_out===0)return Y.last_flush=-1,h}else if(O.avail_in===0&&se(Me)<=se(j)&&Me!==f)return ge(O,-5);if(Y.status===666&&O.avail_in!==0)return ge(O,-5);if(O.avail_in!==0||Y.lookahead!==0||Me!==u&&Y.status!==666){var Ee=Y.strategy===2?function(ie,U){for(var R;;){if(ie.lookahead===0&&(Ce(ie),ie.lookahead===0)){if(U===u)return S;break}if(ie.match_length=0,R=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,R&&(Q(ie,!1),ie.strm.avail_out===0))return S}return ie.insert=0,U===f?(Q(ie,!0),ie.strm.avail_out===0?oe:ee):ie.last_lit&&(Q(ie,!1),ie.strm.avail_out===0)?S:q}(Y,Me):Y.strategy===3?function(ie,U){for(var R,K,_e,Pe,ye=ie.window;;){if(ie.lookahead<=G){if(Ce(ie),ie.lookahead<=G&&U===u)return S;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=k&&0<ie.strstart&&(K=ye[_e=ie.strstart-1])===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]){Pe=ie.strstart+G;do;while(K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&_e<Pe);ie.match_length=G-(Pe-_e),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=k?(R=o._tr_tally(ie,1,ie.match_length-k),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(R=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),R&&(Q(ie,!1),ie.strm.avail_out===0))return S}return ie.insert=0,U===f?(Q(ie,!0),ie.strm.avail_out===0?oe:ee):ie.last_lit&&(Q(ie,!1),ie.strm.avail_out===0)?S:q}(Y,Me):i[Y.level].func(Y,Me);if(Ee!==oe&&Ee!==ee||(Y.status=666),Ee===S||Ee===oe)return O.avail_out===0&&(Y.last_flush=-1),h;if(Ee===q&&(Me===1?o._tr_align(Y):Me!==5&&(o._tr_stored_block(Y,0,0,!1),Me===3&&(de(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),J(O),O.avail_out===0))return Y.last_flush=-1,h}return Me!==f?h:Y.wrap<=0?1:(Y.wrap===2?(Ie(Y,255&O.adler),Ie(Y,O.adler>>8&255),Ie(Y,O.adler>>16&255),Ie(Y,O.adler>>24&255),Ie(Y,255&O.total_in),Ie(Y,O.total_in>>8&255),Ie(Y,O.total_in>>16&255),Ie(Y,O.total_in>>24&255)):(Le(Y,O.adler>>>16),Le(Y,65535&O.adler)),J(O),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?h:1)},e.deflateEnd=function(O){var Me;return O&&O.state?(Me=O.state.status)!==T&&Me!==69&&Me!==73&&Me!==91&&Me!==103&&Me!==N&&Me!==666?ge(O,m):(O.state=null,Me===N?ge(O,-3):h):m},e.deflateSetDictionary=function(O,Me){var j,Y,W,ne,ve,Ee,ie,U,R=Me.length;if(!O||!O.state||(ne=(j=O.state).wrap)===2||ne===1&&j.status!==T||j.lookahead)return m;for(ne===1&&(O.adler=s(O.adler,Me,R,0)),j.wrap=0,R>=j.w_size&&(ne===0&&(de(j.head),j.strstart=0,j.block_start=0,j.insert=0),U=new r.Buf8(j.w_size),r.arraySet(U,Me,R-j.w_size,j.w_size,0),Me=U,R=j.w_size),ve=O.avail_in,Ee=O.next_in,ie=O.input,O.avail_in=R,O.next_in=0,O.input=Me,Ce(j);j.lookahead>=k;){for(Y=j.strstart,W=j.lookahead-(k-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[Y+k-1])&j.hash_mask,j.prev[Y&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=Y,Y++,--W;);j.strstart=Y,j.lookahead=k-1,Ce(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=k-1,j.match_available=0,O.next_in=Ee,O.input=ie,O.avail_in=ve,j.wrap=ne,h},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,t,e){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,t,e){"use strict";t.exports=function(i,r){var o,s,a,l,u,f,h,m,p,y,C,x,b,P,E,D,L,B,k,G,F,T,N,S,q;o=i.state,s=i.next_in,S=i.input,a=s+(i.avail_in-5),l=i.next_out,q=i.output,u=l-(r-i.avail_out),f=l+(i.avail_out-257),h=o.dmax,m=o.wsize,p=o.whave,y=o.wnext,C=o.window,x=o.hold,b=o.bits,P=o.lencode,E=o.distcode,D=(1<<o.lenbits)-1,L=(1<<o.distbits)-1;e:do{b<15&&(x+=S[s++]<<b,b+=8,x+=S[s++]<<b,b+=8),B=P[x&D];t:for(;;){if(x>>>=k=B>>>24,b-=k,(k=B>>>16&255)===0)q[l++]=65535&B;else{if(!(16&k)){if(!(64&k)){B=P[(65535&B)+(x&(1<<k)-1)];continue t}if(32&k){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}G=65535&B,(k&=15)&&(b<k&&(x+=S[s++]<<b,b+=8),G+=x&(1<<k)-1,x>>>=k,b-=k),b<15&&(x+=S[s++]<<b,b+=8,x+=S[s++]<<b,b+=8),B=E[x&L];n:for(;;){if(x>>>=k=B>>>24,b-=k,!(16&(k=B>>>16&255))){if(!(64&k)){B=E[(65535&B)+(x&(1<<k)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(F=65535&B,b<(k&=15)&&(x+=S[s++]<<b,(b+=8)<k&&(x+=S[s++]<<b,b+=8)),h<(F+=x&(1<<k)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(x>>>=k,b-=k,(k=l-u)<F){if(p<(k=F-k)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(N=C,(T=0)===y){if(T+=m-k,k<G){for(G-=k;q[l++]=C[T++],--k;);T=l-F,N=q}}else if(y<k){if(T+=m+y-k,(k-=y)<G){for(G-=k;q[l++]=C[T++],--k;);if(T=0,y<G){for(G-=k=y;q[l++]=C[T++],--k;);T=l-F,N=q}}}else if(T+=y-k,k<G){for(G-=k;q[l++]=C[T++],--k;);T=l-F,N=q}for(;2<G;)q[l++]=N[T++],q[l++]=N[T++],q[l++]=N[T++],G-=3;G&&(q[l++]=N[T++],1<G&&(q[l++]=N[T++]))}else{for(T=l-F;q[l++]=q[T++],q[l++]=q[T++],q[l++]=q[T++],2<(G-=3););G&&(q[l++]=q[T++],1<G&&(q[l++]=q[T++]))}break}}break}}while(s<a&&l<f);s-=G=b>>3,x&=(1<<(b-=G<<3))-1,i.next_in=s,i.next_out=l,i.avail_in=s<a?a-s+5:5-(s-a),i.avail_out=l<f?f-l+257:257-(l-f),o.hold=x,o.bits=b}},{}],49:[function(n,t,e){"use strict";var i=n("../utils/common"),r=n("./adler32"),o=n("./crc32"),s=n("./inffast"),a=n("./inftrees"),l=1,u=2,f=0,h=-2,m=1,p=852,y=592;function C(T){return(T>>>24&255)+(T>>>8&65280)+((65280&T)<<8)+((255&T)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(T){var N;return T&&T.state?(N=T.state,T.total_in=T.total_out=N.total=0,T.msg="",N.wrap&&(T.adler=1&N.wrap),N.mode=m,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new i.Buf32(p),N.distcode=N.distdyn=new i.Buf32(y),N.sane=1,N.back=-1,f):h}function P(T){var N;return T&&T.state?((N=T.state).wsize=0,N.whave=0,N.wnext=0,b(T)):h}function E(T,N){var S,q;return T&&T.state?(q=T.state,N<0?(S=0,N=-N):(S=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?h:(q.window!==null&&q.wbits!==N&&(q.window=null),q.wrap=S,q.wbits=N,P(T))):h}function D(T,N){var S,q;return T?(q=new x,(T.state=q).window=null,(S=E(T,N))!==f&&(T.state=null),S):h}var L,B,k=!0;function G(T){if(k){var N;for(L=new i.Buf32(512),B=new i.Buf32(32),N=0;N<144;)T.lens[N++]=8;for(;N<256;)T.lens[N++]=9;for(;N<280;)T.lens[N++]=7;for(;N<288;)T.lens[N++]=8;for(a(l,T.lens,0,288,L,0,T.work,{bits:9}),N=0;N<32;)T.lens[N++]=5;a(u,T.lens,0,32,B,0,T.work,{bits:5}),k=!1}T.lencode=L,T.lenbits=9,T.distcode=B,T.distbits=5}function F(T,N,S,q){var oe,ee=T.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new i.Buf8(ee.wsize)),q>=ee.wsize?(i.arraySet(ee.window,N,S-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(q<(oe=ee.wsize-ee.wnext)&&(oe=q),i.arraySet(ee.window,N,S-q,oe,ee.wnext),(q-=oe)?(i.arraySet(ee.window,N,S-q,q,0),ee.wnext=q,ee.whave=ee.wsize):(ee.wnext+=oe,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=oe))),0}e.inflateReset=P,e.inflateReset2=E,e.inflateResetKeep=b,e.inflateInit=function(T){return D(T,15)},e.inflateInit2=D,e.inflate=function(T,N){var S,q,oe,ee,ge,se,de,J,Q,Ie,Le,ke,Ce,He,Ge,Ve,mt,pt,Lt,Pn,O,Me,j,Y,W=0,ne=new i.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!T||!T.state||!T.output||!T.input&&T.avail_in!==0)return h;(S=T.state).mode===12&&(S.mode=13),ge=T.next_out,oe=T.output,de=T.avail_out,ee=T.next_in,q=T.input,se=T.avail_in,J=S.hold,Q=S.bits,Ie=se,Le=de,Me=f;e:for(;;)switch(S.mode){case m:if(S.wrap===0){S.mode=13;break}for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(2&S.wrap&&J===35615){ne[S.check=0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0),Q=J=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&J)<<8)+(J>>8))%31){T.msg="incorrect header check",S.mode=30;break}if((15&J)!=8){T.msg="unknown compression method",S.mode=30;break}if(Q-=4,O=8+(15&(J>>>=4)),S.wbits===0)S.wbits=O;else if(O>S.wbits){T.msg="invalid window size",S.mode=30;break}S.dmax=1<<O,T.adler=S.check=1,S.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(S.flags=J,(255&S.flags)!=8){T.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){T.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=J>>8&1),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0)),Q=J=0,S.mode=3;case 3:for(;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.head&&(S.head.time=J),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,ne[2]=J>>>16&255,ne[3]=J>>>24&255,S.check=o(S.check,ne,4,0)),Q=J=0,S.mode=4;case 4:for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.head&&(S.head.xflags=255&J,S.head.os=J>>8),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0)),Q=J=0,S.mode=5;case 5:if(1024&S.flags){for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.length=J,S.head&&(S.head.extra_len=J),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0)),Q=J=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(se<(ke=S.length)&&(ke=se),ke&&(S.head&&(O=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),i.arraySet(S.head.extra,q,ee,ke,O)),512&S.flags&&(S.check=o(S.check,q,ke,ee)),se-=ke,ee+=ke,S.length-=ke),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(se===0)break e;for(ke=0;O=q[ee+ke++],S.head&&O&&S.length<65536&&(S.head.name+=String.fromCharCode(O)),O&&ke<se;);if(512&S.flags&&(S.check=o(S.check,q,ke,ee)),se-=ke,ee+=ke,O)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(se===0)break e;for(ke=0;O=q[ee+ke++],S.head&&O&&S.length<65536&&(S.head.comment+=String.fromCharCode(O)),O&&ke<se;);if(512&S.flags&&(S.check=o(S.check,q,ke,ee)),se-=ke,ee+=ke,O)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(J!==(65535&S.check)){T.msg="header crc mismatch",S.mode=30;break}Q=J=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),T.adler=S.check=0,S.mode=12;break;case 10:for(;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}T.adler=S.check=C(J),Q=J=0,S.mode=11;case 11:if(S.havedict===0)return T.next_out=ge,T.avail_out=de,T.next_in=ee,T.avail_in=se,S.hold=J,S.bits=Q,2;T.adler=S.check=1,S.mode=12;case 12:if(N===5||N===6)break e;case 13:if(S.last){J>>>=7&Q,Q-=7&Q,S.mode=27;break}for(;Q<3;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}switch(S.last=1&J,Q-=1,3&(J>>>=1)){case 0:S.mode=14;break;case 1:if(G(S),S.mode=20,N!==6)break;J>>>=2,Q-=2;break e;case 2:S.mode=17;break;case 3:T.msg="invalid block type",S.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){T.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&J,Q=J=0,S.mode=15,N===6)break e;case 15:S.mode=16;case 16:if(ke=S.length){if(se<ke&&(ke=se),de<ke&&(ke=de),ke===0)break e;i.arraySet(oe,q,ee,ke,ge),se-=ke,ee+=ke,de-=ke,ge+=ke,S.length-=ke;break}S.mode=12;break;case 17:for(;Q<14;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(S.nlen=257+(31&J),J>>>=5,Q-=5,S.ndist=1+(31&J),J>>>=5,Q-=5,S.ncode=4+(15&J),J>>>=4,Q-=4,286<S.nlen||30<S.ndist){T.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;Q<3;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.lens[ve[S.have++]]=7&J,J>>>=3,Q-=3}for(;S.have<19;)S.lens[ve[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,j={bits:S.lenbits},Me=a(0,S.lens,0,19,S.lencode,0,S.work,j),S.lenbits=j.bits,Me){T.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Ve=(W=S.lencode[J&(1<<S.lenbits)-1])>>>16&255,mt=65535&W,!((Ge=W>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(mt<16)J>>>=Ge,Q-=Ge,S.lens[S.have++]=mt;else{if(mt===16){for(Y=Ge+2;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(J>>>=Ge,Q-=Ge,S.have===0){T.msg="invalid bit length repeat",S.mode=30;break}O=S.lens[S.have-1],ke=3+(3&J),J>>>=2,Q-=2}else if(mt===17){for(Y=Ge+3;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}Q-=Ge,O=0,ke=3+(7&(J>>>=Ge)),J>>>=3,Q-=3}else{for(Y=Ge+7;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}Q-=Ge,O=0,ke=11+(127&(J>>>=Ge)),J>>>=7,Q-=7}if(S.have+ke>S.nlen+S.ndist){T.msg="invalid bit length repeat",S.mode=30;break}for(;ke--;)S.lens[S.have++]=O}}if(S.mode===30)break;if(S.lens[256]===0){T.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,j={bits:S.lenbits},Me=a(l,S.lens,0,S.nlen,S.lencode,0,S.work,j),S.lenbits=j.bits,Me){T.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,j={bits:S.distbits},Me=a(u,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,j),S.distbits=j.bits,Me){T.msg="invalid distances set",S.mode=30;break}if(S.mode=20,N===6)break e;case 20:S.mode=21;case 21:if(6<=se&&258<=de){T.next_out=ge,T.avail_out=de,T.next_in=ee,T.avail_in=se,S.hold=J,S.bits=Q,s(T,Le),ge=T.next_out,oe=T.output,de=T.avail_out,ee=T.next_in,q=T.input,se=T.avail_in,J=S.hold,Q=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Ve=(W=S.lencode[J&(1<<S.lenbits)-1])>>>16&255,mt=65535&W,!((Ge=W>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(Ve&&!(240&Ve)){for(pt=Ge,Lt=Ve,Pn=mt;Ve=(W=S.lencode[Pn+((J&(1<<pt+Lt)-1)>>pt)])>>>16&255,mt=65535&W,!(pt+(Ge=W>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}J>>>=pt,Q-=pt,S.back+=pt}if(J>>>=Ge,Q-=Ge,S.back+=Ge,S.length=mt,Ve===0){S.mode=26;break}if(32&Ve){S.back=-1,S.mode=12;break}if(64&Ve){T.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Ve,S.mode=22;case 22:if(S.extra){for(Y=S.extra;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.length+=J&(1<<S.extra)-1,J>>>=S.extra,Q-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Ve=(W=S.distcode[J&(1<<S.distbits)-1])>>>16&255,mt=65535&W,!((Ge=W>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(!(240&Ve)){for(pt=Ge,Lt=Ve,Pn=mt;Ve=(W=S.distcode[Pn+((J&(1<<pt+Lt)-1)>>pt)])>>>16&255,mt=65535&W,!(pt+(Ge=W>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}J>>>=pt,Q-=pt,S.back+=pt}if(J>>>=Ge,Q-=Ge,S.back+=Ge,64&Ve){T.msg="invalid distance code",S.mode=30;break}S.offset=mt,S.extra=15&Ve,S.mode=24;case 24:if(S.extra){for(Y=S.extra;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.offset+=J&(1<<S.extra)-1,J>>>=S.extra,Q-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){T.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(de===0)break e;if(ke=Le-de,S.offset>ke){if((ke=S.offset-ke)>S.whave&&S.sane){T.msg="invalid distance too far back",S.mode=30;break}Ce=ke>S.wnext?(ke-=S.wnext,S.wsize-ke):S.wnext-ke,ke>S.length&&(ke=S.length),He=S.window}else He=oe,Ce=ge-S.offset,ke=S.length;for(de<ke&&(ke=de),de-=ke,S.length-=ke;oe[ge++]=He[Ce++],--ke;);S.length===0&&(S.mode=21);break;case 26:if(de===0)break e;oe[ge++]=S.length,de--,S.mode=21;break;case 27:if(S.wrap){for(;Q<32;){if(se===0)break e;se--,J|=q[ee++]<<Q,Q+=8}if(Le-=de,T.total_out+=Le,S.total+=Le,Le&&(T.adler=S.check=S.flags?o(S.check,oe,Le,ge-Le):r(S.check,oe,Le,ge-Le)),Le=de,(S.flags?J:C(J))!==S.check){T.msg="incorrect data check",S.mode=30;break}Q=J=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(J!==(4294967295&S.total)){T.msg="incorrect length check",S.mode=30;break}Q=J=0}S.mode=29;case 29:Me=1;break e;case 30:Me=-3;break e;case 31:return-4;case 32:default:return h}return T.next_out=ge,T.avail_out=de,T.next_in=ee,T.avail_in=se,S.hold=J,S.bits=Q,(S.wsize||Le!==T.avail_out&&S.mode<30&&(S.mode<27||N!==4))&&F(T,T.output,T.next_out,Le-T.avail_out)?(S.mode=31,-4):(Ie-=T.avail_in,Le-=T.avail_out,T.total_in+=Ie,T.total_out+=Le,S.total+=Le,S.wrap&&Le&&(T.adler=S.check=S.flags?o(S.check,oe,Le,T.next_out-Le):r(S.check,oe,Le,T.next_out-Le)),T.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(Ie==0&&Le===0||N===4)&&Me===f&&(Me=-5),Me)},e.inflateEnd=function(T){if(!T||!T.state)return h;var N=T.state;return N.window&&(N.window=null),T.state=null,f},e.inflateGetHeader=function(T,N){var S;return T&&T.state&&2&(S=T.state).wrap?((S.head=N).done=!1,f):h},e.inflateSetDictionary=function(T,N){var S,q=N.length;return T&&T.state?(S=T.state).wrap!==0&&S.mode!==11?h:S.mode===11&&r(1,N,q,0)!==S.check?-3:F(T,N,q,q)?(S.mode=31,-4):(S.havedict=1,f):h},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,t,e){"use strict";var i=n("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(l,u,f,h,m,p,y,C){var x,b,P,E,D,L,B,k,G,F=C.bits,T=0,N=0,S=0,q=0,oe=0,ee=0,ge=0,se=0,de=0,J=0,Q=null,Ie=0,Le=new i.Buf16(16),ke=new i.Buf16(16),Ce=null,He=0;for(T=0;T<=15;T++)Le[T]=0;for(N=0;N<h;N++)Le[u[f+N]]++;for(oe=F,q=15;1<=q&&Le[q]===0;q--);if(q<oe&&(oe=q),q===0)return m[p++]=20971520,m[p++]=20971520,C.bits=1,0;for(S=1;S<q&&Le[S]===0;S++);for(oe<S&&(oe=S),T=se=1;T<=15;T++)if(se<<=1,(se-=Le[T])<0)return-1;if(0<se&&(l===0||q!==1))return-1;for(ke[1]=0,T=1;T<15;T++)ke[T+1]=ke[T]+Le[T];for(N=0;N<h;N++)u[f+N]!==0&&(y[ke[u[f+N]]++]=N);if(L=l===0?(Q=Ce=y,19):l===1?(Q=r,Ie-=257,Ce=o,He-=257,256):(Q=s,Ce=a,-1),T=S,D=p,ge=N=J=0,P=-1,E=(de=1<<(ee=oe))-1,l===1&&852<de||l===2&&592<de)return 1;for(;;){for(B=T-ge,G=y[N]<L?(k=0,y[N]):y[N]>L?(k=Ce[He+y[N]],Q[Ie+y[N]]):(k=96,0),x=1<<T-ge,S=b=1<<ee;m[D+(J>>ge)+(b-=x)]=B<<24|k<<16|G|0,b!==0;);for(x=1<<T-1;J&x;)x>>=1;if(x!==0?(J&=x-1,J+=x):J=0,N++,--Le[T]==0){if(T===q)break;T=u[f+y[N]]}if(oe<T&&(J&E)!==P){for(ge===0&&(ge=oe),D+=S,se=1<<(ee=T-ge);ee+ge<q&&!((se-=Le[ee+ge])<=0);)ee++,se<<=1;if(de+=1<<ee,l===1&&852<de||l===2&&592<de)return 1;m[P=J&E]=oe<<24|ee<<16|D-p|0}}return J!==0&&(m[D+J]=T-ge<<24|64<<16|0),C.bits=oe,0}},{"../utils/common":41}],51:[function(n,t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,t,e){"use strict";var i=n("../utils/common"),r=0,o=1;function s(W){for(var ne=W.length;0<=--ne;)W[ne]=0}var a=0,l=29,u=256,f=u+1+l,h=30,m=19,p=2*f+1,y=15,C=16,x=7,b=256,P=16,E=17,D=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(f+2));s(F);var T=new Array(2*h);s(T);var N=new Array(512);s(N);var S=new Array(256);s(S);var q=new Array(l);s(q);var oe,ee,ge,se=new Array(h);function de(W,ne,ve,Ee,ie){this.static_tree=W,this.extra_bits=ne,this.extra_base=ve,this.elems=Ee,this.max_length=ie,this.has_stree=W&&W.length}function J(W,ne){this.dyn_tree=W,this.max_code=0,this.stat_desc=ne}function Q(W){return W<256?N[W]:N[256+(W>>>7)]}function Ie(W,ne){W.pending_buf[W.pending++]=255&ne,W.pending_buf[W.pending++]=ne>>>8&255}function Le(W,ne,ve){W.bi_valid>C-ve?(W.bi_buf|=ne<<W.bi_valid&65535,Ie(W,W.bi_buf),W.bi_buf=ne>>C-W.bi_valid,W.bi_valid+=ve-C):(W.bi_buf|=ne<<W.bi_valid&65535,W.bi_valid+=ve)}function ke(W,ne,ve){Le(W,ve[2*ne],ve[2*ne+1])}function Ce(W,ne){for(var ve=0;ve|=1&W,W>>>=1,ve<<=1,0<--ne;);return ve>>>1}function He(W,ne,ve){var Ee,ie,U=new Array(y+1),R=0;for(Ee=1;Ee<=y;Ee++)U[Ee]=R=R+ve[Ee-1]<<1;for(ie=0;ie<=ne;ie++){var K=W[2*ie+1];K!==0&&(W[2*ie]=Ce(U[K]++,K))}}function Ge(W){var ne;for(ne=0;ne<f;ne++)W.dyn_ltree[2*ne]=0;for(ne=0;ne<h;ne++)W.dyn_dtree[2*ne]=0;for(ne=0;ne<m;ne++)W.bl_tree[2*ne]=0;W.dyn_ltree[2*b]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function Ve(W){8<W.bi_valid?Ie(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function mt(W,ne,ve,Ee){var ie=2*ne,U=2*ve;return W[ie]<W[U]||W[ie]===W[U]&&Ee[ne]<=Ee[ve]}function pt(W,ne,ve){for(var Ee=W.heap[ve],ie=ve<<1;ie<=W.heap_len&&(ie<W.heap_len&&mt(ne,W.heap[ie+1],W.heap[ie],W.depth)&&ie++,!mt(ne,Ee,W.heap[ie],W.depth));)W.heap[ve]=W.heap[ie],ve=ie,ie<<=1;W.heap[ve]=Ee}function Lt(W,ne,ve){var Ee,ie,U,R,K=0;if(W.last_lit!==0)for(;Ee=W.pending_buf[W.d_buf+2*K]<<8|W.pending_buf[W.d_buf+2*K+1],ie=W.pending_buf[W.l_buf+K],K++,Ee===0?ke(W,ie,ne):(ke(W,(U=S[ie])+u+1,ne),(R=L[U])!==0&&Le(W,ie-=q[U],R),ke(W,U=Q(--Ee),ve),(R=B[U])!==0&&Le(W,Ee-=se[U],R)),K<W.last_lit;);ke(W,b,ne)}function Pn(W,ne){var ve,Ee,ie,U=ne.dyn_tree,R=ne.stat_desc.static_tree,K=ne.stat_desc.has_stree,_e=ne.stat_desc.elems,Pe=-1;for(W.heap_len=0,W.heap_max=p,ve=0;ve<_e;ve++)U[2*ve]!==0?(W.heap[++W.heap_len]=Pe=ve,W.depth[ve]=0):U[2*ve+1]=0;for(;W.heap_len<2;)U[2*(ie=W.heap[++W.heap_len]=Pe<2?++Pe:0)]=1,W.depth[ie]=0,W.opt_len--,K&&(W.static_len-=R[2*ie+1]);for(ne.max_code=Pe,ve=W.heap_len>>1;1<=ve;ve--)pt(W,U,ve);for(ie=_e;ve=W.heap[1],W.heap[1]=W.heap[W.heap_len--],pt(W,U,1),Ee=W.heap[1],W.heap[--W.heap_max]=ve,W.heap[--W.heap_max]=Ee,U[2*ie]=U[2*ve]+U[2*Ee],W.depth[ie]=(W.depth[ve]>=W.depth[Ee]?W.depth[ve]:W.depth[Ee])+1,U[2*ve+1]=U[2*Ee+1]=ie,W.heap[1]=ie++,pt(W,U,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],function(ye,st){var et,nt,ln,Fe,lt,It,Ot=st.dyn_tree,ht=st.max_code,Dn=st.stat_desc.static_tree,tn=st.stat_desc.has_stree,Qn=st.stat_desc.extra_bits,ae=st.stat_desc.extra_base,tt=st.stat_desc.max_length,Se=0;for(Fe=0;Fe<=y;Fe++)ye.bl_count[Fe]=0;for(Ot[2*ye.heap[ye.heap_max]+1]=0,et=ye.heap_max+1;et<p;et++)tt<(Fe=Ot[2*Ot[2*(nt=ye.heap[et])+1]+1]+1)&&(Fe=tt,Se++),Ot[2*nt+1]=Fe,ht<nt||(ye.bl_count[Fe]++,lt=0,ae<=nt&&(lt=Qn[nt-ae]),It=Ot[2*nt],ye.opt_len+=It*(Fe+lt),tn&&(ye.static_len+=It*(Dn[2*nt+1]+lt)));if(Se!==0){do{for(Fe=tt-1;ye.bl_count[Fe]===0;)Fe--;ye.bl_count[Fe]--,ye.bl_count[Fe+1]+=2,ye.bl_count[tt]--,Se-=2}while(0<Se);for(Fe=tt;Fe!==0;Fe--)for(nt=ye.bl_count[Fe];nt!==0;)ht<(ln=ye.heap[--et])||(Ot[2*ln+1]!==Fe&&(ye.opt_len+=(Fe-Ot[2*ln+1])*Ot[2*ln],Ot[2*ln+1]=Fe),nt--)}}(W,ne),He(U,Pe,W.bl_count)}function O(W,ne,ve){var Ee,ie,U=-1,R=ne[1],K=0,_e=7,Pe=4;for(R===0&&(_e=138,Pe=3),ne[2*(ve+1)+1]=65535,Ee=0;Ee<=ve;Ee++)ie=R,R=ne[2*(Ee+1)+1],++K<_e&&ie===R||(K<Pe?W.bl_tree[2*ie]+=K:ie!==0?(ie!==U&&W.bl_tree[2*ie]++,W.bl_tree[2*P]++):K<=10?W.bl_tree[2*E]++:W.bl_tree[2*D]++,U=ie,Pe=(K=0)===R?(_e=138,3):ie===R?(_e=6,3):(_e=7,4))}function Me(W,ne,ve){var Ee,ie,U=-1,R=ne[1],K=0,_e=7,Pe=4;for(R===0&&(_e=138,Pe=3),Ee=0;Ee<=ve;Ee++)if(ie=R,R=ne[2*(Ee+1)+1],!(++K<_e&&ie===R)){if(K<Pe)for(;ke(W,ie,W.bl_tree),--K!=0;);else ie!==0?(ie!==U&&(ke(W,ie,W.bl_tree),K--),ke(W,P,W.bl_tree),Le(W,K-3,2)):K<=10?(ke(W,E,W.bl_tree),Le(W,K-3,3)):(ke(W,D,W.bl_tree),Le(W,K-11,7));U=ie,Pe=(K=0)===R?(_e=138,3):ie===R?(_e=6,3):(_e=7,4)}}s(se);var j=!1;function Y(W,ne,ve,Ee){Le(W,(a<<1)+(Ee?1:0),3),function(ie,U,R,K){Ve(ie),K&&(Ie(ie,R),Ie(ie,~R)),i.arraySet(ie.pending_buf,ie.window,U,R,ie.pending),ie.pending+=R}(W,ne,ve,!0)}e._tr_init=function(W){j||(function(){var ne,ve,Ee,ie,U,R=new Array(y+1);for(ie=Ee=0;ie<l-1;ie++)for(q[ie]=Ee,ne=0;ne<1<<L[ie];ne++)S[Ee++]=ie;for(S[Ee-1]=ie,ie=U=0;ie<16;ie++)for(se[ie]=U,ne=0;ne<1<<B[ie];ne++)N[U++]=ie;for(U>>=7;ie<h;ie++)for(se[ie]=U<<7,ne=0;ne<1<<B[ie]-7;ne++)N[256+U++]=ie;for(ve=0;ve<=y;ve++)R[ve]=0;for(ne=0;ne<=143;)F[2*ne+1]=8,ne++,R[8]++;for(;ne<=255;)F[2*ne+1]=9,ne++,R[9]++;for(;ne<=279;)F[2*ne+1]=7,ne++,R[7]++;for(;ne<=287;)F[2*ne+1]=8,ne++,R[8]++;for(He(F,f+1,R),ne=0;ne<h;ne++)T[2*ne+1]=5,T[2*ne]=Ce(ne,5);oe=new de(F,L,u+1,f,y),ee=new de(T,B,0,h,y),ge=new de(new Array(0),k,0,m,x)}(),j=!0),W.l_desc=new J(W.dyn_ltree,oe),W.d_desc=new J(W.dyn_dtree,ee),W.bl_desc=new J(W.bl_tree,ge),W.bi_buf=0,W.bi_valid=0,Ge(W)},e._tr_stored_block=Y,e._tr_flush_block=function(W,ne,ve,Ee){var ie,U,R=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=function(K){var _e,Pe=4093624447;for(_e=0;_e<=31;_e++,Pe>>>=1)if(1&Pe&&K.dyn_ltree[2*_e]!==0)return r;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return o;for(_e=32;_e<u;_e++)if(K.dyn_ltree[2*_e]!==0)return o;return r}(W)),Pn(W,W.l_desc),Pn(W,W.d_desc),R=function(K){var _e;for(O(K,K.dyn_ltree,K.l_desc.max_code),O(K,K.dyn_dtree,K.d_desc.max_code),Pn(K,K.bl_desc),_e=m-1;3<=_e&&K.bl_tree[2*G[_e]+1]===0;_e--);return K.opt_len+=3*(_e+1)+5+5+4,_e}(W),ie=W.opt_len+3+7>>>3,(U=W.static_len+3+7>>>3)<=ie&&(ie=U)):ie=U=ve+5,ve+4<=ie&&ne!==-1?Y(W,ne,ve,Ee):W.strategy===4||U===ie?(Le(W,2+(Ee?1:0),3),Lt(W,F,T)):(Le(W,4+(Ee?1:0),3),function(K,_e,Pe,ye){var st;for(Le(K,_e-257,5),Le(K,Pe-1,5),Le(K,ye-4,4),st=0;st<ye;st++)Le(K,K.bl_tree[2*G[st]+1],3);Me(K,K.dyn_ltree,_e-1),Me(K,K.dyn_dtree,Pe-1)}(W,W.l_desc.max_code+1,W.d_desc.max_code+1,R+1),Lt(W,W.dyn_ltree,W.dyn_dtree)),Ge(W),Ee&&Ve(W)},e._tr_tally=function(W,ne,ve){return W.pending_buf[W.d_buf+2*W.last_lit]=ne>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&ne,W.pending_buf[W.l_buf+W.last_lit]=255&ve,W.last_lit++,ne===0?W.dyn_ltree[2*ve]++:(W.matches++,ne--,W.dyn_ltree[2*(S[ve]+u+1)]++,W.dyn_dtree[2*Q(ne)]++),W.last_lit===W.lit_bufsize-1},e._tr_align=function(W){Le(W,2,3),ke(W,b,F),function(ne){ne.bi_valid===16?(Ie(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(W)}},{"../utils/common":41}],53:[function(n,t,e){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,t,e){(function(i){(function(r,o){"use strict";if(!r.setImmediate){var s,a,l,u,f=1,h={},m=!1,p=r.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(r);y=y&&y.setTimeout?y:r,s={}.toString.call(r.process)==="[object process]"?function(P){process.nextTick(function(){x(P)})}:function(){if(r.postMessage&&!r.importScripts){var P=!0,E=r.onmessage;return r.onmessage=function(){P=!1},r.postMessage("","*"),r.onmessage=E,P}}()?(u="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",b,!1):r.attachEvent("onmessage",b),function(P){r.postMessage(u+P,"*")}):r.MessageChannel?((l=new MessageChannel).port1.onmessage=function(P){x(P.data)},function(P){l.port2.postMessage(P)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,function(P){var E=p.createElement("script");E.onreadystatechange=function(){x(P),E.onreadystatechange=null,a.removeChild(E),E=null},a.appendChild(E)}):function(P){setTimeout(x,0,P)},y.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var E=new Array(arguments.length-1),D=0;D<E.length;D++)E[D]=arguments[D+1];var L={callback:P,args:E};return h[f]=L,s(f),f++},y.clearImmediate=C}function C(P){delete h[P]}function x(P){if(m)setTimeout(x,0,P);else{var E=h[P];if(E){m=!0;try{(function(D){var L=D.callback,B=D.args;switch(B.length){case 0:L();break;case 1:L(B[0]);break;case 2:L(B[0],B[1]);break;case 3:L(B[0],B[1],B[2]);break;default:L.apply(o,B)}})(E)}finally{C(P),m=!1}}}}function b(P){P.source===r&&typeof P.data=="string"&&P.data.indexOf(u)===0&&x(+P.data.slice(u.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var Yz=LC((OD,AD)=>{"use strict";(function(n,t){typeof define=="function"&&define.amd?define([],t):typeof OD<"u"?t():(t(),n.FileSaver={})})(OD,function(){"use strict";function n(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,l,u){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){s(f.response,l,u)},f.onerror=function(){console.error("could not download file")},f.send()}function e(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,u){var f=r.URL||r.webkitURL,h=document.createElement("a");l=l||a.name||"download",h.download=l,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?i(h):e(h.href)?t(a,l,u):i(h,h.target="_blank")):(h.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,u){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,u),l);else if(e(a))t(a,l,u);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){i(f)})}}:function(a,l,u,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return t(a,l,u);var h=a.type==="application/octet-stream",m=/constructor/i.test(r.HTMLElement)||r.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&m||o)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=p?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=b:location=b,f=null},y.readAsDataURL(a)}else{var C=r.URL||r.webkitURL,x=C.createObjectURL(a);f?f.location=x:location.href=x,f=null,setTimeout(function(){C.revokeObjectURL(x)},4e4)}});r.saveAs=s.saveAs=s,typeof AD<"u"&&(AD.exports=s)})});function YA(n,t){return Object.is(n,t)}var cr=null,Hg=!1,jg=1,Ja=Symbol("SIGNAL");function Wn(n){let t=cr;return cr=n,t}function XA(){return cr}var Yh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zC(n){if(Hg)throw new Error("");if(cr===null)return;cr.consumerOnSignalRead(n);let t=cr.nextProducerIndex++;if(qg(cr),t<cr.producerNode.length&&cr.producerNode[t]!==n&&qh(cr)){let e=cr.producerNode[t];$g(e,cr.producerIndexOfThis[t])}cr.producerNode[t]!==n&&(cr.producerNode[t]=n,cr.producerIndexOfThis[t]=qh(cr)?QA(n,cr,t):0),cr.producerLastReadVersion[t]=n.version}function oG(){jg++}function ZA(n){if(!(qh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===jg)){if(!n.producerMustRecompute(n)&&!jC(n)){n.dirty=!1,n.lastCleanEpoch=jg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=jg}}function KA(n){if(n.liveConsumerNode===void 0)return;let t=Hg;Hg=!0;try{for(let e of n.liveConsumerNode)e.dirty||sG(e)}finally{Hg=t}}function JA(){return cr?.consumerAllowSignalWrites!==!1}function sG(n){n.dirty=!0,KA(n),n.consumerMarkedDirty?.(n)}function Gg(n){return n&&(n.nextProducerIndex=0),Wn(n)}function HC(n,t){if(Wn(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(qh(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)$g(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function jC(n){qg(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(ZA(e),i!==e.version))return!0}return!1}function WC(n){if(qg(n),qh(n))for(let t=0;t<n.producerNode.length;t++)$g(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function QA(n,t,e){if(eI(n),n.liveConsumerNode.length===0&&tI(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=QA(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function $g(n,t){if(eI(n),n.liveConsumerNode.length===1&&tI(n))for(let i=0;i<n.producerNode.length;i++)$g(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];qg(r),r.producerIndexOfThis[i]=t}}function qh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function qg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function eI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function tI(n){return n.producerNode!==void 0}function nI(n){let t=Object.create(aG);t.computation=n;let e=()=>{if(ZA(t),zC(t),t.value===Wg)throw t.error;return t.value};return e[Ja]=t,e}var VC=Symbol("UNSET"),BC=Symbol("COMPUTING"),Wg=Symbol("ERRORED"),aG=$t(je({},Yh),{value:VC,dirty:!0,error:null,equal:YA,producerMustRecompute(n){return n.value===VC||n.value===BC},producerRecomputeValue(n){if(n.value===BC)throw new Error("Detected cycle in computations.");let t=n.value;n.value=BC;let e=Gg(n),i;try{i=n.computation()}catch(r){i=Wg,n.error=r}finally{HC(n,e)}if(t!==VC&&t!==Wg&&i!==Wg&&n.equal(t,i)){n.value=t;return}n.value=i,n.version++}});function lG(){throw new Error}var iI=lG;function rI(){iI()}function oI(n){iI=n}var cG=null;function sI(n){let t=Object.create(lI);t.value=n;let e=()=>(zC(t),t.value);return e[Ja]=t,e}function GC(n,t){JA()||rI(),n.equal(n.value,t)||(n.value=t,uG(n))}function aI(n,t){JA()||rI(),GC(n,t(n.value))}var lI=$t(je({},Yh),{equal:YA,value:void 0});function uG(n){n.version++,oG(),KA(n),cG?.()}function Ut(n){return typeof n=="function"}function xd(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Yg=xd(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function eu(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Vi=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Ut(i))try{i()}catch(o){t=o instanceof Yg?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{cI(o)}catch(s){t=t??[],s instanceof Yg?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Yg(t)}}add(t){var e;if(t&&t!==this)if(this.closed)cI(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&eu(e,t)}remove(t){let{_finalizers:e}=this;e&&eu(e,t),t instanceof n&&t._removeParent(this)}};Vi.EMPTY=(()=>{let n=new Vi;return n.closed=!0,n})();var $C=Vi.EMPTY;function Xg(n){return n instanceof Vi||n&&"closed"in n&&Ut(n.remove)&&Ut(n.add)&&Ut(n.unsubscribe)}function cI(n){Ut(n)?n():n.unsubscribe()}var Us={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bd={setTimeout(n,t,...e){let{delegate:i}=bd;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=bd;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zg(n){bd.setTimeout(()=>{let{onUnhandledError:t}=Us;if(t)t(n);else throw n})}function Xh(){}var uI=qC("C",void 0,void 0);function dI(n){return qC("E",void 0,n)}function fI(n){return qC("N",n,void 0)}function qC(n,t,e){return{kind:n,value:t,error:e}}var tu=null;function Cd(n){if(Us.useDeprecatedSynchronousErrorHandling){let t=!tu;if(t&&(tu={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=tu;if(tu=null,e)throw i}}else n()}function hI(n){Us.useDeprecatedSynchronousErrorHandling&&tu&&(tu.errorThrown=!0,tu.error=n)}var nu=class extends Vi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Xg(t)&&t.add(this)):this.destination=hG}static create(t,e,i){return new Qa(t,e,i)}next(t){this.isStopped?XC(fI(t),this):this._next(t)}error(t){this.isStopped?XC(dI(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?XC(uI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dG=Function.prototype.bind;function YC(n,t){return dG.call(n,t)}var ZC=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Kg(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Kg(i)}else Kg(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Kg(e)}}},Qa=class extends nu{constructor(t,e,i){super();let r;if(Ut(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Us.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&YC(t.next,o),error:t.error&&YC(t.error,o),complete:t.complete&&YC(t.complete,o)}):r=t}this.destination=new ZC(r)}};function Kg(n){Us.useDeprecatedSynchronousErrorHandling?hI(n):Zg(n)}function fG(n){throw n}function XC(n,t){let{onStoppedNotification:e}=Us;e&&bd.setTimeout(()=>e(n,t))}var hG={closed:!0,next:Xh,error:fG,complete:Xh};var Md=typeof Symbol=="function"&&Symbol.observable||"@@observable";function oo(n){return n}function KC(...n){return JC(n)}function JC(n){return n.length===0?oo:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Jt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=mG(e)?e:new Qa(e,i,r);return Cd(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=pI(i),new i((r,o)=>{let s=new Qa({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Md](){return this}pipe(...e){return JC(e)(this)}toPromise(e){return e=pI(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function pI(n){var t;return(t=n??Us.Promise)!==null&&t!==void 0?t:Promise}function pG(n){return n&&Ut(n.next)&&Ut(n.error)&&Ut(n.complete)}function mG(n){return n&&n instanceof nu||pG(n)&&Xg(n)}function QC(n){return Ut(n?.lift)}function fn(n){return t=>{if(QC(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Cn(n,t,e,i,r){return new eM(n,t,e,i,r)}var eM=class extends nu{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function wd(){return fn((n,t)=>{let e=null;n._refCount++;let i=Cn(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Ed=class extends Jt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,QC(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Vi;let e=this.getSubject();t.add(this.source.subscribe(Cn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Vi.EMPTY)}return t}refCount(){return wd()(this)}};var mI=xd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var On=(()=>{class n extends Jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Jg(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new mI}next(e){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?$C:(this.currentObservers=null,o.push(e),new Vi(()=>{this.currentObservers=null,eu(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new Jt;return e.source=this,e}}return n.create=(t,e)=>new Jg(t,e),n})(),Jg=class extends On{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:$C}};var Si=class extends On{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Zh={now(){return(Zh.delegate||Date).now()},delegate:void 0};var Kh=class extends On{constructor(t=1/0,e=1/0,i=Zh){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Qg=class extends Vi{constructor(t,e){super()}schedule(t,e=0){return this}};var Jh={setInterval(n,t,...e){let{delegate:i}=Jh;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Jh;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var e0=class extends Qg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return Jh.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Jh.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,eu(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Sd=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Sd.now=Zh.now;var t0=class extends Sd{constructor(t,e=Sd.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var tM=new t0(e0),gI=tM;var so=new Jt(n=>n.complete());function n0(n){return n&&Ut(n.schedule)}function nM(n){return n[n.length-1]}function i0(n){return Ut(nM(n))?n.pop():void 0}function da(n){return n0(nM(n))?n.pop():void 0}function _I(n,t){return typeof nM(n)=="number"?n.pop():t}var Qh=function(){return Qh=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Qh.apply(this,arguments)};function yI(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,t||[])).next())})}function vI(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function iu(n){return this instanceof iu?(this.v=n,this):new iu(n)}function xI(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){i[p]&&(r[p]=function(C){return new Promise(function(x,b){o.push([p,C,x,b])>1||l(p,C)})},y&&(r[p]=y(r[p])))}function l(p,y){try{u(i[p](y))}catch(C){m(o[0][3],C)}}function u(p){p.value instanceof iu?Promise.resolve(p.value.v).then(f,h):m(o[0][2],p)}function f(p){l("next",p)}function h(p){l("throw",p)}function m(p,y){p(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function bI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof vI=="function"?vI(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Td=n=>n&&typeof n.length=="number"&&typeof n!="function";function r0(n){return Ut(n?.then)}function o0(n){return Ut(n[Md])}function s0(n){return Symbol.asyncIterator&&Ut(n?.[Symbol.asyncIterator])}function a0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function gG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var l0=gG();function c0(n){return Ut(n?.[l0])}function u0(n){return xI(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield iu(e.read());if(r)return yield iu(void 0);yield yield iu(i)}}finally{e.releaseLock()}})}function d0(n){return Ut(n?.getReader)}function mi(n){if(n instanceof Jt)return n;if(n!=null){if(o0(n))return _G(n);if(Td(n))return vG(n);if(r0(n))return yG(n);if(s0(n))return CI(n);if(c0(n))return xG(n);if(d0(n))return bG(n)}throw a0(n)}function _G(n){return new Jt(t=>{let e=n[Md]();if(Ut(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vG(n){return new Jt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function yG(n){return new Jt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Zg)})}function xG(n){return new Jt(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function CI(n){return new Jt(t=>{CG(n,t).catch(e=>t.error(e))})}function bG(n){return CI(u0(n))}function CG(n,t){var e,i,r,o;return yI(this,void 0,void 0,function*(){try{for(e=bI(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function bo(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function f0(n,t=0){return fn((e,i)=>{e.subscribe(Cn(i,r=>bo(i,n,()=>i.next(r),t),()=>bo(i,n,()=>i.complete(),t),r=>bo(i,n,()=>i.error(r),t)))})}function h0(n,t=0){return fn((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function MI(n,t){return mi(n).pipe(h0(t),f0(t))}function wI(n,t){return mi(n).pipe(h0(t),f0(t))}function EI(n,t){return new Jt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function SI(n,t){return new Jt(e=>{let i;return bo(e,t,()=>{i=n[l0](),bo(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Ut(i?.return)&&i.return()})}function p0(n,t){if(!n)throw new Error("Iterable cannot be null");return new Jt(e=>{bo(e,t,()=>{let i=n[Symbol.asyncIterator]();bo(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function TI(n,t){return p0(u0(n),t)}function PI(n,t){if(n!=null){if(o0(n))return MI(n,t);if(Td(n))return EI(n,t);if(r0(n))return wI(n,t);if(s0(n))return p0(n,t);if(c0(n))return SI(n,t);if(d0(n))return TI(n,t)}throw a0(n)}function ci(n,t){return t?PI(n,t):mi(n)}function Rt(...n){let t=da(n);return ci(n,t)}function In(n,t){let e=Ut(n)?n:()=>n,i=r=>r.error(e());return new Jt(t?r=>t.schedule(i,0,r):i)}function iM(n){return!!n&&(n instanceof Jt||Ut(n.lift)&&Ut(n.subscribe))}var el=xd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function DI(n){return n instanceof Date&&!isNaN(n)}function Pt(n,t){return fn((e,i)=>{let r=0;e.subscribe(Cn(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:MG}=Array;function wG(n,t){return MG(t)?n(...t):n(t)}function Pd(n){return Pt(t=>wG(n,t))}var{isArray:EG}=Array,{getPrototypeOf:SG,prototype:TG,keys:PG}=Object;function m0(n){if(n.length===1){let t=n[0];if(EG(t))return{args:t,keys:null};if(DG(t)){let e=PG(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function DG(n){return n&&typeof n=="object"&&SG(n)===TG}function g0(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function ru(...n){let t=da(n),e=i0(n),{args:i,keys:r}=m0(n);if(i.length===0)return ci([],t);let o=new Jt(OG(i,t,r?s=>g0(r,s):oo));return e?o.pipe(Pd(e)):o}function OG(n,t,e=oo){return i=>{OI(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)OI(t,()=>{let u=ci(n[l],t),f=!1;u.subscribe(Cn(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function OI(n,t,e){n?bo(e,n,t):t()}function AI(n,t,e,i,r,o,s,a){let l=[],u=0,f=0,h=!1,m=()=>{h&&!l.length&&!u&&t.complete()},p=C=>u<i?y(C):l.push(C),y=C=>{o&&t.next(C),u++;let x=!1;mi(e(C,f++)).subscribe(Cn(t,b=>{r?.(b),o?p(b):t.next(b)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;l.length&&u<i;){let b=l.shift();s?bo(t,s,()=>y(b)):y(b)}m()}catch(b){t.error(b)}}))};return n.subscribe(Cn(t,p,()=>{h=!0,m()})),()=>{a?.()}}function gi(n,t,e=1/0){return Ut(t)?gi((i,r)=>Pt((o,s)=>t(i,o,r,s))(mi(n(i,r))),e):(typeof t=="number"&&(e=t),fn((i,r)=>AI(i,r,n,e)))}function fa(n=1/0){return gi(oo,n)}function II(){return fa(1)}function Dd(...n){return II()(ci(n,da(n)))}function _0(n){return new Jt(t=>{mi(n()).subscribe(t)})}function rM(...n){let t=i0(n),{args:e,keys:i}=m0(n),r=new Jt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;mi(e[f]).subscribe(Cn(o,m=>{h||(h=!0,u--),a[f]=m},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?g0(i,a):a),o.complete())}))}});return t?r.pipe(Pd(t)):r}var AG=["addListener","removeListener"],IG=["addEventListener","removeEventListener"],RG=["on","off"];function Xl(n,t,e,i){if(Ut(e)&&(i=e,e=void 0),i)return Xl(n,t,e).pipe(Pd(i));let[r,o]=FG(n)?IG.map(s=>a=>n[s](t,a,e)):kG(n)?AG.map(RI(n,t)):NG(n)?RG.map(RI(n,t)):[];if(!r&&Td(n))return gi(s=>Xl(s,t,e))(mi(n));if(!r)throw new TypeError("Invalid event target");return new Jt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function RI(n,t){return e=>i=>n[e](t,i)}function kG(n){return Ut(n.addListener)&&Ut(n.removeListener)}function NG(n){return Ut(n.on)&&Ut(n.off)}function FG(n){return Ut(n.addEventListener)&&Ut(n.removeEventListener)}function ep(n=0,t,e=gI){let i=-1;return t!=null&&(n0(t)?e=t:i=t),new Jt(r=>{let o=DI(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function oM(n=0,t=tM){return n<0&&(n=0),ep(n,n,t)}function as(...n){let t=da(n),e=_I(n,1/0),i=n;return i.length?i.length===1?mi(i[0]):fa(e)(ci(i,t)):so}function _i(n,t){return fn((e,i)=>{let r=0;e.subscribe(Cn(i,o=>n.call(t,o,r++)&&i.next(o)))})}function _n(n){return fn((t,e)=>{let i=null,r=!1,o;i=t.subscribe(Cn(e,void 0,void 0,s=>{o=mi(n(s,_n(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function v0(n,t,e,i,r){return(o,s)=>{let a=e,l=t,u=0;o.subscribe(Cn(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function kI(n,t){return fn(v0(n,t,arguments.length>=2,!1,!0))}function tl(n,t){return Ut(t)?gi(n,t,1):gi(n,1)}function sM(n){return kI((t,e,i)=>!n||n(e,i)?t+1:t,0)}function Zl(n){return fn((t,e)=>{let i=!1;t.subscribe(Cn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Ur(n){return n<=0?()=>so:fn((t,e)=>{let i=0;t.subscribe(Cn(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function aM(n){return Pt(()=>n)}function lM(n,t=oo){return n=n??LG,fn((e,i)=>{let r,o=!0;e.subscribe(Cn(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function LG(n,t){return n===t}function y0(n=UG){return fn((t,e)=>{let i=!1;t.subscribe(Cn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function UG(){return new el}function Kl(n){return fn((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Vs(n,t){let e=arguments.length>=2;return i=>i.pipe(n?_i((r,o)=>n(r,o,i)):oo,Ur(1),e?Zl(t):y0(()=>new el))}function Jl(n){return n<=0?()=>so:fn((t,e)=>{let i=[];t.subscribe(Cn(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function cM(n,t){let e=arguments.length>=2;return i=>i.pipe(n?_i((r,o)=>n(r,o,i)):oo,Jl(1),e?Zl(t):y0(()=>new el))}function Od(){return fn((n,t)=>{let e,i=!1;n.subscribe(Cn(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function uM(n,t){return fn(v0(n,t,arguments.length>=2,!0))}function ls(n={}){let{connector:t=()=>new On,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},p=()=>{m(),s=l=void 0,f=h=!1},y=()=>{let C=s;p(),C?.unsubscribe()};return fn((C,x)=>{u++,!h&&!f&&m();let b=l=l??t();x.add(()=>{u--,u===0&&!h&&!f&&(a=dM(y,r))}),b.subscribe(x),!s&&u>0&&(s=new Qa({next:P=>b.next(P),error:P=>{h=!0,m(),a=dM(p,e,P),b.error(P)},complete:()=>{f=!0,m(),a=dM(p,i),b.complete()}}),mi(C).subscribe(s))})(o)}}function dM(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Qa({next:()=>{i.unsubscribe(),n()}});return mi(t(...e)).subscribe(i)}function ou(...n){let t=da(n);return fn((e,i)=>{(t?Dd(n,e,t):Dd(n,e)).subscribe(i)})}function ur(n,t){return fn((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(Cn(i,l=>{r?.unsubscribe();let u=0,f=o++;mi(n(l,f)).subscribe(r=Cn(i,h=>i.next(t?t(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function fM(n,t){return Ut(t)?ur(()=>n,t):ur(()=>n)}function Co(n){return fn((t,e)=>{mi(n).subscribe(Cn(e,()=>e.complete(),Xh)),!e.closed&&t.subscribe(e)})}function vi(n,t,e){let i=Ut(n)||t||e?{next:n,error:t,complete:e}:n;return i?fn((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Cn(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):oo}var T2="https://g.co/ng/security#xss",Ct=class extends Error{constructor(t,e){super(l_(t,e)),this.code=t}};function l_(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}function dp(n){return{toString:n}.toString()}var x0="__parameters__";function VG(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function P2(n,t,e){return dp(()=>{let i=VG(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(x0)?l[x0]:Object.defineProperty(l,x0,{value:[]})[x0];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var nl=globalThis;function yi(n){for(let t in n)if(n[t]===yi)return t;throw Error("Could not find renamed property on target object.")}function BG(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function lo(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(lo).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function NI(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var zG=yi({__forward_ref__:yi});function br(n){return n.__forward_ref__=br,n.toString=function(){return lo(this())},n}function ao(n){return D2(n)?n():n}function D2(n){return typeof n=="function"&&n.hasOwnProperty(zG)&&n.__forward_ref__===br}function Ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $i(n){return{providers:n.providers||[],imports:n.imports||[]}}function c_(n){return FI(n,A2)||FI(n,I2)}function O2(n){return c_(n)!==null}function FI(n,t){return n.hasOwnProperty(t)?n[t]:null}function HG(n){let t=n&&(n[A2]||n[I2]);return t||null}function LI(n){return n&&(n.hasOwnProperty(UI)||n.hasOwnProperty(jG))?n[UI]:null}var A2=yi({\u0275prov:yi}),UI=yi({\u0275inj:yi}),I2=yi({ngInjectableDef:yi}),jG=yi({ngInjectorDef:yi}),_t=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Ue({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function R2(n){return n&&!!n.\u0275providers}var WG=yi({\u0275cmp:yi}),GG=yi({\u0275dir:yi}),$G=yi({\u0275pipe:yi}),qG=yi({\u0275mod:yi}),N0=yi({\u0275fac:yi}),ip=yi({__NG_ELEMENT_ID__:yi}),VI=yi({__NG_ENV_ID__:yi});function lu(n){return typeof n=="string"?n:n==null?"":String(n)}function YG(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():lu(n)}function XG(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Ct(-200,n)}function Iw(n,t){throw new Ct(-201,!1)}var Sn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Sn||{}),DM;function k2(){return DM}function Mo(n){let t=DM;return DM=n,t}function N2(n,t,e){let i=c_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Sn.Optional)return null;if(t!==void 0)return t;Iw(n,"Injector")}var ZG={},rp=ZG,OM="__NG_DI_FLAG__",F0="ngTempTokenPath",KG="ngTokenPath",JG=/\n/gm,QG="\u0275",BI="__source",Nd;function e7(){return Nd}function Ql(n){let t=Nd;return Nd=n,t}function t7(n,t=Sn.Default){if(Nd===void 0)throw new Ct(-203,!1);return Nd===null?N2(n,void 0,t):Nd.get(n,t&Sn.Optional?null:void 0,t)}function qe(n,t=Sn.Default){return(k2()||t7)(ao(n),t)}function ze(n,t=Sn.Default){return qe(n,u_(t))}function u_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function AM(n){let t=[];for(let e=0;e<n.length;e++){let i=ao(n[e]);if(Array.isArray(i)){if(i.length===0)throw new Ct(900,!1);let r,o=Sn.Default;for(let s=0;s<i.length;s++){let a=i[s],l=n7(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(qe(r,o))}else t.push(qe(i))}return t}function F2(n,t){return n[OM]=t,n.prototype[OM]=t,n}function n7(n){return n[OM]}function i7(n,t,e,i){let r=n[F0];throw t[BI]&&r.unshift(t[BI]),n.message=r7(`
`+n.message,r,e,i),n[KG]=r,n[F0]=null,n}function r7(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==QG?n.slice(2):n;let r=lo(t);if(Array.isArray(t))r=t.map(lo).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):lo(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(JG,`
  `)}`}var fp=F2(P2("Optional"),8);var d_=F2(P2("SkipSelf"),4);function cu(n,t){let e=n.hasOwnProperty(N0);return e?n[N0]:null}function o7(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function s7(n){return n.flat(Number.POSITIVE_INFINITY)}function Rw(n,t){n.forEach(e=>Array.isArray(e)?Rw(e,t):t(e))}function L2(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function L0(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function a7(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function l7(n,t,e){let i=hp(n,t);return i>=0?n[i|1]=e:(i=~i,a7(n,i,t,e)),i}function hM(n,t){let e=hp(n,t);if(e>=0)return n[e|1]}function hp(n,t){return c7(n,t,1)}function c7(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Ld={},Vo=[],uu=new _t(""),U2=new _t("",-1),V2=new _t(""),U0=class{get(t,e=rp){if(e===rp){let i=new Error(`NullInjectorError: No provider for ${lo(t)}!`);throw i.name="NullInjectorError",i}return e}},B2=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(B2||{}),ma=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ma||{}),tc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(tc||{});function u7(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function IM(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];d7(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function z2(n){return n===3||n===4||n===6}function d7(n){return n.charCodeAt(0)===64}function op(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?zI(n,e,r,null,t[++i]):zI(n,e,r,null,null))}}return n}function zI(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var H2="ng-template";function f7(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&u7(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(kw(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function kw(n){return n.type===4&&n.value!==H2}function h7(n,t,e){let i=n.type===4&&!e?H2:n.value;return t===i}function p7(n,t,e){let i=4,r=n.attrs,o=r!==null?_7(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Bs(i)&&!Bs(l))return!1;if(s&&Bs(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!h7(n,l,e)||l===""&&t.length===1){if(Bs(i))return!1;s=!0}}else if(i&8){if(r===null||!f7(n,r,l,e)){if(Bs(i))return!1;s=!0}}else{let u=t[++a],f=m7(l,r,kw(n),e);if(f===-1){if(Bs(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(Bs(i))return!1;s=!0}}}}return Bs(i)||s}function Bs(n){return(n&1)===0}function m7(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return v7(t,n)}function g7(n,t,e=!1){for(let i=0;i<t.length;i++)if(p7(n,t[i],e))return!0;return!1}function _7(n){for(let t=0;t<n.length;t++){let e=n[t];if(z2(e))return t}return n.length}function v7(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function HI(n,t){return n?":not("+t.trim()+")":t}function y7(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Bs(s)&&(t+=HI(o,r),r=""),i=s,o=o||!Bs(i);e++}return r!==""&&(t+=HI(o,r)),t}function x7(n){return n.map(y7).join(",")}function b7(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!Bs(r))break;r=o}i++}return{attrs:t,classes:e}}function $e(n){return dp(()=>{let t=q2(n),e=$t(je({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===B2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ma.Emulated,styles:n.styles||Vo,_:null,schemas:n.schemas||null,tView:null,id:""});Y2(e);let i=n.dependencies;return e.directiveDefs=WI(i,!1),e.pipeDefs=WI(i,!0),e.id=w7(e),e})}function C7(n){return nc(n)||j2(n)}function M7(n){return n!==null}function qi(n){return dp(()=>({type:n.type,bootstrap:n.bootstrap||Vo,declarations:n.declarations||Vo,imports:n.imports||Vo,exports:n.exports||Vo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jI(n,t){if(n==null)return Ld;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=tc.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==tc.None?[i,a]:i,t[o]=s):e[o]=i}return e}function en(n){return dp(()=>{let t=q2(n);return Y2(t),t})}function ac(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function nc(n){return n[WG]||null}function j2(n){return n[GG]||null}function W2(n){return n[$G]||null}function G2(n){let t=nc(n)||j2(n)||W2(n);return t!==null?t.standalone:!1}function $2(n,t){let e=n[qG]||null;if(!e&&t===!0)throw new Error(`Type ${lo(n)} does not have '\u0275mod' property.`);return e}function q2(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Ld,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Vo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jI(n.inputs,t),outputs:jI(n.outputs),debugInfo:null}}function Y2(n){n.features?.forEach(t=>t(n))}function WI(n,t){if(!n)return null;let e=t?W2:C7;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(M7)}function w7(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function lc(n){return{\u0275providers:n}}function Nw(...n){return{\u0275providers:X2(!0,n),\u0275fromNgModule:!0}}function X2(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return Rw(t,s=>{let a=s;RM(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Z2(r,o),e}function Z2(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Fw(r,o=>{t(o,i)})}}function RM(n,t,e,i){if(n=ao(n),!n)return!1;let r=null,o=LI(n),s=!o&&nc(n);if(!o&&!s){let l=n.ngModule;if(o=LI(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)RM(u,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Rw(o.imports,f=>{RM(f,t,e,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&Z2(u,t)}if(!a){let u=cu(r)||(()=>new r);t({provide:r,useFactory:u,deps:Vo},r),t({provide:V2,useValue:r,multi:!0},r),t({provide:uu,useValue:()=>qe(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;Fw(l,f=>{t(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function Fw(n,t){for(let e of n)R2(e)&&(e=e.\u0275providers),Array.isArray(e)?Fw(e,t):t(e)}var E7=yi({provide:String,useValue:yi});function K2(n){return n!==null&&typeof n=="object"&&E7 in n}function S7(n){return!!(n&&n.useExisting)}function T7(n){return!!(n&&n.useFactory)}function Ud(n){return typeof n=="function"}function P7(n){return!!n.useClass}var f_=new _t(""),D0={},D7={},pM;function Lw(){return pM===void 0&&(pM=new U0),pM}var co=class{},sp=class extends co{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,NM(t,s=>this.processProvider(s)),this.records.set(U2,Ad(void 0,this)),r.has("environment")&&this.records.set(co,Ad(void 0,this));let o=this.records.get(f_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(V2,Vo,Sn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Wn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Wn(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Ql(this),i=Mo(void 0),r;try{return t()}finally{Ql(e),Mo(i)}}get(t,e=rp,i=Sn.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(VI))return t[VI](this);i=u_(i);let r,o=Ql(this),s=Mo(void 0);try{if(!(i&Sn.SkipSelf)){let l=this.records.get(t);if(l===void 0){let u=k7(t)&&c_(t);u&&this.injectableDefInScope(u)?l=Ad(kM(t),D0):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Sn.Self?Lw():this.parent;return e=i&Sn.Optional&&e===rp?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[F0]=a[F0]||[]).unshift(lo(t)),o)throw a;return i7(a,t,"R3InjectorError",this.source)}else throw a}finally{Mo(s),Ql(o)}}resolveInjectorInitializers(){let t=Wn(null),e=Ql(this),i=Mo(void 0),r;try{let o=this.get(uu,Vo,Sn.Self);for(let s of o)s()}finally{Ql(e),Mo(i),Wn(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(lo(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ct(205,!1)}processProvider(t){t=ao(t);let e=Ud(t)?t:ao(t&&t.provide),i=A7(t);if(!Ud(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Ad(void 0,D0,!0),r.factory=()=>AM(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=Wn(null);try{return e.value===D0&&(e.value=D7,e.value=e.factory()),typeof e.value=="object"&&e.value&&R7(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Wn(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=ao(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function kM(n){let t=c_(n),e=t!==null?t.factory:cu(n);if(e!==null)return e;if(n instanceof _t)throw new Ct(204,!1);if(n instanceof Function)return O7(n);throw new Ct(204,!1)}function O7(n){if(n.length>0)throw new Ct(204,!1);let e=HG(n);return e!==null?()=>e.factory(n):()=>new n}function A7(n){if(K2(n))return Ad(void 0,n.useValue);{let t=J2(n);return Ad(t,D0)}}function J2(n,t,e){let i;if(Ud(n)){let r=ao(n);return cu(r)||kM(r)}else if(K2(n))i=()=>ao(n.useValue);else if(T7(n))i=()=>n.useFactory(...AM(n.deps||[]));else if(S7(n))i=()=>qe(ao(n.useExisting));else{let r=ao(n&&(n.useClass||n.provide));if(I7(n))i=()=>new r(...AM(n.deps));else return cu(r)||kM(r)}return i}function Ad(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function I7(n){return!!n.deps}function R7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function k7(n){return typeof n=="function"||typeof n=="object"&&n instanceof _t}function NM(n,t){for(let e of n)Array.isArray(e)?NM(e,t):e&&R2(e)?NM(e.\u0275providers,t):t(e)}function ds(n,t){n instanceof sp&&n.assertNotDestroyed();let e,i=Ql(n),r=Mo(void 0);try{return t()}finally{Ql(i),Mo(r)}}function Q2(){return k2()!==void 0||e7()!=null}function N7(n){if(!Q2())throw new Ct(-203,!1)}function F7(n){return typeof n=="function"}var Bo=0,un=1,Qt=2,Ar=3,zs=4,$s=5,ga=6,V0=7,js=8,Vd=9,_a=10,Ti=11,ap=12,GI=13,qd=14,us=15,du=16,Id=17,il=18,h_=19,eR=20,ec=21,mM=22,cs=23,Ji=25,tR=1,lp=6,rl=7,B0=8,Bd=9,wo=10,z0=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(z0||{});function Hs(n){return Array.isArray(n)&&typeof n[tR]=="object"}function ya(n){return Array.isArray(n)&&n[tR]===!0}function Uw(n){return(n.flags&4)!==0}function pp(n){return n.componentOffset>-1}function p_(n){return(n.flags&1)===1}function ic(n){return!!n.template}function H0(n){return(n[Qt]&512)!==0}var FM=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function nR(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function Cr(){return iR}function iR(n){return n.type.prototype.ngOnChanges&&(n.setInput=U7),L7}Cr.ngInherit=!0;function L7(){let n=oR(this),t=n?.current;if(t){let e=n.previous;if(e===Ld)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function U7(n,t,e,i,r){let o=this.declaredInputs[i],s=oR(n)||V7(n,{previous:Ld,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new FM(u&&u.currentValue,e,l===Ld),nR(n,t,r,e)}var rR="__ngSimpleChanges__";function oR(n){return n[rR]||null}function V7(n,t){return n[rR]=t}var $I=null;var ha=function(n,t,e){$I?.(n,t,e)},B7="svg",z7="math";function Ws(n){for(;Array.isArray(n);)n=n[Bo];return n}function sR(n,t){return Ws(t[n])}function zo(n,t){return Ws(t[n.index])}function aR(n,t){return n.data[t]}function m_(n,t){return n[t]}function cc(n,t){let e=t[n];return Hs(e)?e:e[Bo]}function H7(n){return(n[Qt]&4)===4}function Vw(n){return(n[Qt]&128)===128}function j7(n){return ya(n[Ar])}function zd(n,t){return t==null?null:n[t]}function lR(n){n[Id]=0}function cR(n){n[Qt]&1024||(n[Qt]|=1024,Vw(n)&&__(n))}function W7(n,t){for(;n>0;)t=t[qd],n--;return t}function g_(n){return!!(n[Qt]&9216||n[cs]?.dirty)}function LM(n){n[_a].changeDetectionScheduler?.notify(8),n[Qt]&64&&(n[Qt]|=1024),g_(n)&&__(n)}function __(n){n[_a].changeDetectionScheduler?.notify(0);let t=fu(n);for(;t!==null&&!(t[Qt]&8192||(t[Qt]|=8192,!Vw(t)));)t=fu(t)}function uR(n,t){if((n[Qt]&256)===256)throw new Ct(911,!1);n[ec]===null&&(n[ec]=[]),n[ec].push(t)}function G7(n,t){if(n[ec]===null)return;let e=n[ec].indexOf(t);e!==-1&&n[ec].splice(e,1)}function fu(n){let t=n[Ar];return ya(t)?t[Ar]:t}var vn={lFrame:xR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dR=!1;function $7(){return vn.lFrame.elementDepthCount}function q7(){vn.lFrame.elementDepthCount++}function Y7(){vn.lFrame.elementDepthCount--}function fR(){return vn.bindingsEnabled}function mp(){return vn.skipHydrationRootTNode!==null}function X7(n){return vn.skipHydrationRootTNode===n}function Z7(n){vn.skipHydrationRootTNode=n}function K7(){vn.skipHydrationRootTNode=null}function sn(){return vn.lFrame.lView}function dr(){return vn.lFrame.tView}function Oe(n){return vn.lFrame.contextLView=n,n[js]}function Ae(n){return vn.lFrame.contextLView=null,n}function Ir(){let n=hR();for(;n!==null&&n.type===64;)n=n.parent;return n}function hR(){return vn.lFrame.currentTNode}function J7(){let n=vn.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function yu(n,t){let e=vn.lFrame;e.currentTNode=n,e.isParent=t}function Bw(){return vn.lFrame.isParent}function pR(){vn.lFrame.isParent=!1}function Q7(){return vn.lFrame.contextLView}function mR(){return dR}function qI(n){dR=n}function fs(){let n=vn.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function e9(){return vn.lFrame.bindingIndex}function t9(n){return vn.lFrame.bindingIndex=n}function v_(){return vn.lFrame.bindingIndex++}function gR(n){let t=vn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function n9(){return vn.lFrame.inI18n}function i9(n,t){let e=vn.lFrame;e.bindingIndex=e.bindingRootIndex=n,UM(t)}function r9(){return vn.lFrame.currentDirectiveIndex}function UM(n){vn.lFrame.currentDirectiveIndex=n}function o9(n){let t=vn.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function _R(){return vn.lFrame.currentQueryIndex}function zw(n){vn.lFrame.currentQueryIndex=n}function s9(n){let t=n[un];return t.type===2?t.declTNode:t.type===1?n[$s]:null}function vR(n,t,e){if(e&Sn.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&Sn.Host);)if(r=s9(o),r===null||(o=o[qd],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=vn.lFrame=yR();return i.currentTNode=t,i.lView=n,!0}function Hw(n){let t=yR(),e=n[un];vn.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function yR(){let n=vn.lFrame,t=n===null?null:n.child;return t===null?xR(n):t}function xR(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function bR(){let n=vn.lFrame;return vn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var CR=bR;function jw(){let n=bR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function a9(n){return(vn.lFrame.contextLView=W7(n,vn.lFrame.contextLView))[js]}function xu(){return vn.lFrame.selectedIndex}function hu(n){vn.lFrame.selectedIndex=n}function y_(){let n=vn.lFrame;return aR(n.tView,n.selectedIndex)}function MR(){return vn.lFrame.currentNamespace}var wR=!0;function x_(){return wR}function uc(n){wR=n}function l9(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=iR(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function b_(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),u&&((n.viewHooks??=[]).push(e,u),(n.viewCheckHooks??=[]).push(e,u)),f!=null&&(n.destroyHooks??=[]).push(e,f)}}function O0(n,t,e){ER(n,t,3,e)}function A0(n,t,e,i){(n[Qt]&3)===e&&ER(n,t,e,i)}function gM(n,t){let e=n[Qt];(e&3)===t&&(e&=16383,e+=1,n[Qt]=e)}function ER(n,t,e,i){let r=i!==void 0?n[Id]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Id]+=65536),(a<o||o==-1)&&(c9(n,e,t,l),n[Id]=(n[Id]&4294901760)+l+2),l++}function YI(n,t){ha(4,n,t);let e=Wn(null);try{t.call(n)}finally{Wn(e),ha(5,n,t)}}function c9(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[Qt]>>14<n[Id]>>16&&(n[Qt]&3)===t&&(n[Qt]+=16384,YI(a,o)):YI(a,o)}var Fd=-1,pu=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function u9(n){return n instanceof pu}function d9(n){return(n.flags&8)!==0}function f9(n){return(n.flags&16)!==0}var _M={},VM=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=u_(i);let r=this.injector.get(t,_M,i);return r!==_M||e===_M?r:this.parentInjector.get(t,e,i)}};function SR(n){return n!==Fd}function j0(n){return n&32767}function h9(n){return n>>16}function W0(n,t){let e=h9(n),i=t;for(;e>0;)i=i[qd],e--;return i}var BM=!0;function G0(n){let t=BM;return BM=n,t}var p9=256,TR=p9-1,PR=5,m9=0,pa={};function g9(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(ip)&&(i=e[ip]),i==null&&(i=e[ip]=m9++);let r=i&TR,o=1<<r;t.data[n+(r>>PR)]|=o}function $0(n,t){let e=DR(n,t);if(e!==-1)return e;let i=t[un];i.firstCreatePass&&(n.injectorIndex=t.length,vM(i.data,n),vM(t,null),vM(i.blueprint,null));let r=Ww(n,t),o=n.injectorIndex;if(SR(r)){let s=j0(r),a=W0(r,t),l=a[un].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function vM(n,t){n.push(0,0,0,0,0,0,0,0,t)}function DR(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ww(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=kR(r),i===null)return Fd;if(e++,r=r[qd],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Fd}function zM(n,t,e){g9(n,t,e)}function _9(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(z2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function OR(n,t,e){if(e&Sn.Optional||n!==void 0)return n;Iw(t,"NodeInjector")}function AR(n,t,e,i){if(e&Sn.Optional&&i===void 0&&(i=null),!(e&(Sn.Self|Sn.Host))){let r=n[Vd],o=Mo(void 0);try{return r?r.get(t,i,e&Sn.Optional):N2(t,i,e&Sn.Optional)}finally{Mo(o)}}return OR(i,t,e)}function IR(n,t,e,i=Sn.Default,r){if(n!==null){if(t[Qt]&2048&&!(i&Sn.Self)){let s=b9(n,t,e,i,pa);if(s!==pa)return s}let o=RR(n,t,e,i,pa);if(o!==pa)return o}return AR(t,e,i,r)}function RR(n,t,e,i,r){let o=y9(e);if(typeof o=="function"){if(!vR(t,n,i))return i&Sn.Host?OR(r,e,i):AR(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Sn.Optional))Iw(e);else return s}finally{CR()}}else if(typeof o=="number"){let s=null,a=DR(n,t),l=Fd,u=i&Sn.Host?t[us][$s]:null;for((a===-1||i&Sn.SkipSelf)&&(l=a===-1?Ww(n,t):t[a+8],l===Fd||!ZI(i,!1)?a=-1:(s=t[un],a=j0(l),t=W0(l,t)));a!==-1;){let f=t[un];if(XI(o,a,f.data)){let h=v9(a,t,e,s,i,u);if(h!==pa)return h}l=t[a+8],l!==Fd&&ZI(i,t[un].data[a+8]===u)&&XI(o,a,t)?(s=f,a=j0(l),t=W0(l,t)):a=-1}}return r}function v9(n,t,e,i,r,o){let s=t[un],a=s.data[n+8],l=i==null?pp(a)&&BM:i!=s&&(a.type&3)!==0,u=r&Sn.Host&&o===a,f=I0(a,s,e,l,u);return f!==null?mu(t,s,f,a):pa}function I0(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,m=r?a+f:u;for(let p=h;p<m;p++){let y=s[p];if(p<l&&e===y||p>=l&&y.type===e)return p}if(r){let p=s[l];if(p&&ic(p)&&p.type===e)return l}return null}function mu(n,t,e,i){let r=n[e],o=t.data;if(u9(r)){let s=r;s.resolving&&XG(YG(o[e]));let a=G0(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Mo(s.injectImpl):null,f=vR(n,i,Sn.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&l9(e,o[e],t)}finally{u!==null&&Mo(u),G0(a),s.resolving=!1,CR()}}return r}function y9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(ip)?n[ip]:void 0;return typeof t=="number"?t>=0?t&TR:x9:t}function XI(n,t,e){let i=1<<n;return!!(e[t+(n>>PR)]&i)}function ZI(n,t){return!(n&Sn.Self)&&!(n&Sn.Host&&t)}var au=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return IR(this._tNode,this._lView,t,u_(i),e)}};function x9(){return new au(Ir(),sn())}function Vr(n){return dp(()=>{let t=n.prototype.constructor,e=t[N0]||HM(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[N0]||HM(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function HM(n){return D2(n)?()=>{let t=HM(ao(n));return t&&t()}:cu(n)}function b9(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Qt]&2048&&!(s[Qt]&512);){let a=RR(o,s,e,i|Sn.Self,pa);if(a!==pa)return a;let l=o.parent;if(!l){let u=s[eR];if(u){let f=u.get(e,pa,i);if(f!==pa)return f}l=kR(s),s=s[qd]}o=l}return r}function kR(n){let t=n[un],e=t.type;return e===2?t.declTNode:e===1?n[$s]:null}function Gw(n){return _9(Ir(),n)}function KI(n,t=null,e=null,i){let r=NR(n,t,e,i);return r.resolveInjectorInitializers(),r}function NR(n,t=null,e=null,i,r=new Set){let o=[e||Vo,Nw(n)];return i=i||(typeof n=="object"?void 0:lo(n)),new sp(o,t||Lw(),i||null,r)}var Eo=class n{static{this.THROW_IF_NOT_FOUND=rp}static{this.NULL=new U0}static create(t,e){if(Array.isArray(t))return KI({name:""},e,t,"");{let i=t.name??"";return KI({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ue({token:n,providedIn:"any",factory:()=>qe(U2)})}static{this.__NG_ELEMENT_ID__=-1}};var C9=new _t("");C9.__NG_ELEMENT_ID__=n=>{let t=Ir();if(t===null)throw new Ct(204,!1);if(t.type&2)return t.value;if(n&Sn.Optional)return null;throw new Ct(204,!1)};var M9="ngOriginalError";function yM(n){return n[M9]}var FR=!0,$w=(()=>{class n{static{this.__NG_ELEMENT_ID__=w9}static{this.__NG_ENV_ID__=e=>e}}return n})(),jM=class extends $w{constructor(t){super(),this._lView=t}onDestroy(t){return uR(this._lView,t),()=>G7(this._lView,t)}};function w9(){return new jM(sn())}var sl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Si(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();var WM=class extends On{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,Q2()&&(this.destroyRef=ze($w,{optional:!0})??void 0,this.pendingTasks=ze(sl,{optional:!0})??void 0)}emit(t){let e=Wn(null);try{super.next(t)}finally{Wn(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof Vi&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(e),i!==void 0&&this.pendingTasks?.remove(i)})}}},yt=WM;function q0(...n){}function LR(n){let t,e;function i(){n=q0;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function JI(n){return queueMicrotask(()=>n()),()=>{n=q0}}var qw="isAngularZone",Y0=qw+"_ID",E9=0,Gn=class n{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=FR}=t;if(typeof Zone>"u")throw new Ct(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,P9(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ct(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ct(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,S9,q0,q0);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},S9={};function Yw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function T9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){LR(()=>{n.callbackScheduled=!1,GM(n),n.isCheckStableRunning=!0,Yw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),GM(n)}function P9(n){let t=()=>{T9(n)},e=E9++;n._inner=n._inner.fork({name:"angular",properties:{[qw]:!0,[Y0]:e,[Y0+e]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(D9(l))return i.invokeTask(o,s,a,l);try{return QI(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),e2(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return QI(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!O9(l)&&t(),e2(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,GM(n),Yw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function GM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function QI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function e2(n){n._nesting--,Yw(n)}var $M=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function D9(n){return UR(n,"__ignore_ng_zone__")}function O9(n){return UR(n,"__scheduler_tick__")}function UR(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var ol=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&yM(t);for(;e&&yM(e);)e=yM(e);return e||null}},A9=new _t("",{providedIn:"root",factory:()=>{let n=ze(Gn),t=ze(ol);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function I9(){return Yd(Ir(),sn())}function Yd(n,t){return new ui(zo(n,t))}var ui=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=I9}}return n})();function R9(n){return n instanceof ui?n.nativeElement:n}function k9(){return this._results[Symbol.iterator]()}var qM=class n{get changes(){return this._changes??=new yt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=k9)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=s7(t);(this._changesDetected=!o7(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},N9="ngSkipHydration",F9="ngskiphydration";function VR(n){let t=n.mergedAttrs;if(t===null)return!1;for(let e=0;e<t.length;e+=2){let i=t[e];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===F9)return!0}return!1}function BR(n){return n.hasAttribute(N9)}function X0(n){return(n.flags&128)===128}function L9(n){if(X0(n))return!0;let t=n.parent;for(;t;){if(X0(n)||VR(t))return!0;t=t.parent}return!1}var zR=new Map,U9=0;function V9(){return U9++}function B9(n){zR.set(n[h_],n)}function YM(n){zR.delete(n[h_])}var t2="__ngContext__";function rc(n,t){Hs(t)?(n[t2]=t[h_],B9(t)):n[t2]=t}function HR(n){return WR(n[ap])}function jR(n){return WR(n[zs])}function WR(n){for(;n!==null&&!ya(n);)n=n[zs];return n}var XM;function GR(n){XM=n}function gp(){if(XM!==void 0)return XM;if(typeof document<"u")return document;throw new Ct(210,!1)}var C_=new _t("",{providedIn:"root",factory:()=>z9}),z9="ng",Xw=new _t(""),Br=new _t("",{providedIn:"platform",factory:()=>"unknown"});var Zw=new _t("",{providedIn:"root",factory:()=>gp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function H9(){let n=new Xd;return ze(Br)==="browser"&&(n.store=j9(gp(),ze(C_))),n}var Xd=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:H9})}get(e,i){return this.store[e]!==void 0?this.store[e]:i}set(e,i){this.store[e]=i}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(e,i){this.onSerializeCallbacks[e]=i}toJson(){for(let e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function j9(n,t){let e=n.getElementById(t+"-state");if(e?.textContent)try{return JSON.parse(e.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var $R="h",qR="b",ZM=function(n){return n.FirstChild="f",n.NextSibling="n",n}(ZM||{}),W9="e",G9="t",Kw="c",YR="x",Z0="r",$9="i",q9="n",XR="d";var Y9="__nghData__",ZR=Y9,xM="ngh",X9="nghm",KR=()=>null;function Z9(n,t,e=!1){let i=n.getAttribute(xM);if(i==null)return null;let[r,o]=i.split("|");if(i=e?o:r,!i)return null;let s=o?`|${o}`:"",a=e?r:s,l={};if(i!==""){let f=t.get(Xd,null,{optional:!0});f!==null&&(l=f.get(ZR,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return e&&(u.firstChild=n,M_(u,0,n.nextSibling)),a?n.setAttribute(xM,a):n.removeAttribute(xM),u}function K9(){KR=Z9}function Jw(n,t,e=!1){return KR(n,t,e)}function J9(n){let t=n._lView;return t[un].type===2?null:(H0(t)&&(t=t[Ji]),t)}function Q9(n){return n.textContent?.replace(/\s/gm,"")}function e$(n){let t=gp(),e=t.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Q9(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=e.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function M_(n,t,e){n.segmentHeads??={},n.segmentHeads[t]=e}function KM(n,t){return n.segmentHeads?.[t]??null}function t$(n,t){let e=n.data,i=e[W9]?.[t]??null;return i===null&&e[Kw]?.[t]&&(i=Qw(n,t)),i}function JR(n,t){return n.data[Kw]?.[t]??null}function Qw(n,t){let e=JR(n,t)??[],i=0;for(let r of e)i+=r[Z0]*(r[YR]??1);return i}function n$(n){if(typeof n.disconnectedNodes>"u"){let t=n.data[XR];n.disconnectedNodes=t?new Set(t):null}return n.disconnectedNodes}function _p(n,t){if(typeof n.disconnectedNodes>"u"){let e=n.data[XR];n.disconnectedNodes=e?new Set(e):null}return!!n$(n)?.has(t)}var b0=new _t(""),QR=!1,ek=new _t("",{providedIn:"root",factory:()=>QR});var C0;function i$(){if(C0===void 0&&(C0=null,nl.trustedTypes))try{C0=nl.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return C0}function w_(n){return i$()?.createHTML(n)||n}var M0;function tk(){if(M0===void 0&&(M0=null,nl.trustedTypes))try{M0=nl.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return M0}function n2(n){return tk()?.createHTML(n)||n}function i2(n){return tk()?.createScriptURL(n)||n}var K0=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${T2})`}};function Zd(n){return n instanceof K0?n.changingThisBreaksApplicationSecurity:n}function E_(n,t){let e=r$(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${T2})`)}return e===t}function r$(n){return n instanceof K0&&n.getTypeName()||null}function o$(n){let t=new QM(n);return s$()?new JM(t):t}var JM=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(w_(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},QM=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=w_(t),e}};function s$(){try{return!!new window.DOMParser().parseFromString(w_(""),"text/html")}catch{return!1}}var a$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function e1(n){return n=String(n),n.match(a$)?n:"unsafe:"+n}function al(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function vp(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var nk=al("area,br,col,hr,img,wbr"),ik=al("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rk=al("rp,rt"),l$=vp(rk,ik),c$=vp(ik,al("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),u$=vp(rk,al("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),r2=vp(nk,c$,u$,l$),ok=al("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),d$=al("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),f$=al("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),h$=vp(ok,d$,f$),p$=al("script,style,template"),ew=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=_$(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=g$(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=o2(t).toLowerCase();if(!r2.hasOwnProperty(e))return this.sanitizedSomething=!0,!p$.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!h$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;ok[a]&&(l=e1(l)),this.buf.push(" ",s,'="',s2(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=o2(t).toLowerCase();r2.hasOwnProperty(e)&&!nk.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(s2(t))}};function m$(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function g$(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw sk(t);return t}function _$(n){let t=n.firstChild;if(t&&m$(n,t))throw sk(t);return t}function o2(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function sk(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var v$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,y$=/([^\#-~ |!])/g;function s2(n){return n.replace(/&/g,"&amp;").replace(v$,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(y$,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var w0;function ak(n,t){let e=null;try{w0=w0||o$(n);let i=t?String(t):"";e=w0.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=w0.getInertBodyElement(i)}while(i!==o);let a=new ew().sanitizeChildren(a2(e)||e);return w_(a)}finally{if(e){let i=a2(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function a2(n){return"content"in n&&x$(n)?n.content:null}function x$(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var yp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(yp||{});function S_(n){let t=t1();return t?n2(t.sanitize(yp.HTML,n)||""):E_(n,"HTML")?n2(Zd(n)):ak(gp(),lu(n))}function Kd(n){let t=t1();return t?t.sanitize(yp.URL,n)||"":E_(n,"URL")?Zd(n):e1(lu(n))}function b$(n){let t=t1();if(t)return i2(t.sanitize(yp.RESOURCE_URL,n)||"");if(E_(n,"ResourceURL"))return i2(Zd(n));throw new Ct(904,!1)}function C$(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?b$:Kd}function lk(n,t,e){return C$(t,e)(n)}function t1(){let n=sn();return n&&n[_a].sanitizer}var M$=/^>|^->|<!--|-->|--!>|<!-$/g,w$=/(<|>)/g,E$="\u200B$1\u200B";function S$(n){return n.replace(M$,t=>t.replace(w$,E$))}function T$(n){return n.ownerDocument.body}function ck(n){return n instanceof Function?n():n}function tp(n){return(n??ze(Eo)).get(Br)==="browser"}var va=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(va||{}),P$;function n1(n,t){return P$(n,t)}function Rd(n,t,e,i,r){if(i!=null){let o,s=!1;ya(i)?o=i:Hs(i)&&(s=!0,i=i[Bo]);let a=Ws(i);n===0&&e!==null?r==null?mk(t,e,a):J0(t,e,a,r||null,!0):n===1&&e!==null?J0(t,e,a,r||null,!0):n===2?o1(t,a,s):n===3&&t.destroyNode(a),o!=null&&j$(t,n,o,e,r)}}function uk(n,t){return n.createText(t)}function D$(n,t,e){n.setValue(t,e)}function dk(n,t){return n.createComment(S$(t))}function i1(n,t,e){return n.createElement(t,e)}function O$(n,t){fk(n,t),t[Bo]=null,t[$s]=null}function A$(n,t,e,i,r,o){i[Bo]=r,i[$s]=t,P_(n,i,e,1,r,o)}function fk(n,t){t[_a].changeDetectionScheduler?.notify(9),P_(n,t,t[Ti],2,null,null)}function I$(n){let t=n[ap];if(!t)return bM(n[un],n);for(;t;){let e=null;if(Hs(t))e=t[ap];else{let i=t[wo];i&&(e=i)}if(!e){for(;t&&!t[zs]&&t!==n;)Hs(t)&&bM(t[un],t),t=t[Ar];t===null&&(t=n),Hs(t)&&bM(t[un],t),e=t&&t[zs]}t=e}}function R$(n,t,e,i){let r=wo+i,o=e.length;i>0&&(e[r-1][zs]=t),i<o-wo?(t[zs]=e[r],L2(e,wo+i,t)):(e.push(t),t[zs]=null),t[Ar]=e;let s=t[du];s!==null&&e!==s&&hk(s,t);let a=t[il];a!==null&&a.insertView(n),LM(t),t[Qt]|=128}function hk(n,t){let e=n[Bd],i=t[Ar];if(Hs(i))n[Qt]|=z0.HasTransplantedViews;else{let r=i[Ar][us];t[us]!==r&&(n[Qt]|=z0.HasTransplantedViews)}e===null?n[Bd]=[t]:e.push(t)}function r1(n,t){let e=n[Bd],i=e.indexOf(t);e.splice(i,1)}function tw(n,t){if(n.length<=wo)return;let e=wo+t,i=n[e];if(i){let r=i[du];r!==null&&r!==n&&r1(r,i),t>0&&(n[e-1][zs]=i[zs]);let o=L0(n,wo+t);O$(i[un],i);let s=o[il];s!==null&&s.detachView(o[un]),i[Ar]=null,i[zs]=null,i[Qt]&=-129}return i}function pk(n,t){if(!(t[Qt]&256)){let e=t[Ti];e.destroyNode&&P_(n,t,e,3,null,null),I$(t)}}function bM(n,t){if(t[Qt]&256)return;let e=Wn(null);try{t[Qt]&=-129,t[Qt]|=256,t[cs]&&WC(t[cs]),N$(n,t),k$(n,t),t[un].type===1&&t[Ti].destroy();let i=t[du];if(i!==null&&ya(t[Ar])){i!==t[Ar]&&r1(i,t);let r=t[il];r!==null&&r.detachView(n)}YM(t)}finally{Wn(e)}}function k$(n,t){let e=n.cleanup,i=t[V0];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[V0]=null);let r=t[ec];if(r!==null){t[ec]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function N$(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof pu)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];ha(4,a,l);try{l.call(a)}finally{ha(5,a,l)}}else{ha(4,r,o);try{o.call(r)}finally{ha(5,r,o)}}}}}function F$(n,t,e){return L$(n,t.parent,e)}function L$(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Bo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===ma.None||o===ma.Emulated)return null}return zo(i,e)}}function J0(n,t,e,i,r){n.insertBefore(t,e,i,r)}function mk(n,t,e){n.appendChild(t,e)}function l2(n,t,e,i,r){i!==null?J0(n,t,e,i,r):mk(n,t,e)}function gk(n,t){return n.parentNode(t)}function U$(n,t){return n.nextSibling(t)}function V$(n,t,e){return z$(n,t,e)}function B$(n,t,e){return n.type&40?zo(n,e):null}var z$=B$,c2;function T_(n,t,e,i){let r=F$(n,i,t),o=t[Ti],s=i.parent||t[$s],a=V$(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)l2(o,r,e[l],a,!1);else l2(o,r,e,a,!1);c2!==void 0&&c2(o,i,t,e,r)}function np(n,t){if(t!==null){let e=t.type;if(e&3)return zo(t,n);if(e&4)return nw(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return np(n,i);{let r=n[t.index];return ya(r)?nw(-1,r):Ws(r)}}else{if(e&128)return np(n,t.next);if(e&32)return n1(t,n)()||Ws(n[t.index]);{let i=_k(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=fu(n[us]);return np(r,i)}else return np(n,t.next)}}}return null}function _k(n,t){if(t!==null){let i=n[us][$s],r=t.projection;return i.projection[r]}return null}function nw(n,t){let e=wo+n+1;if(e<t.length){let i=t[e],r=i[un].firstChild;if(r!==null)return np(i,r)}return t[rl]}function o1(n,t,e){n.removeChild(null,t,e)}function vk(n){n.textContent=""}function s1(n,t,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(s&&t===0&&(a&&rc(Ws(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)s1(n,t,e.child,i,r,o,!1),Rd(t,n,r,a,o);else if(l&32){let u=n1(e,i),f;for(;f=u();)Rd(t,n,r,f,o);Rd(t,n,r,a,o)}else l&16?H$(n,t,i,e,r,o):Rd(t,n,r,a,o);e=s?e.projectionNext:e.next}}function P_(n,t,e,i,r,o){s1(e,i,n.firstChild,t,r,o,!1)}function H$(n,t,e,i,r,o){let s=e[us],l=s[$s].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Rd(t,n,r,f,o)}else{let u=l,f=s[Ar];X0(i)&&(u.flags|=128),s1(n,t,u,f,r,o,!0)}}function j$(n,t,e,i,r){let o=e[rl],s=Ws(e);o!==s&&Rd(t,n,i,o,r);for(let a=wo;a<e.length;a++){let l=e[a];P_(l[un],l,n,t,i,o)}}function W$(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:va.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=va.Important),n.setStyle(e,i,r,o))}}function G$(n,t,e){n.setAttribute(t,"style",e)}function yk(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function xk(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&IM(n,t,i),r!==null&&yk(n,t,r),o!==null&&G$(n,t,o)}var qs={};function A(n=1){bk(dr(),sn(),xu()+n,!1)}function bk(n,t,e,i){if(!i)if((t[Qt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&O0(t,o,e)}else{let o=n.preOrderHooks;o!==null&&A0(t,o,0,e)}hu(e)}function $(n,t=Sn.Default){let e=sn();if(e===null)return qe(n,t);let i=Ir();return IR(i,e,ao(n),t)}function Ck(){let n="invalid";throw new Error(n)}function Mk(n,t,e,i,r,o){let s=Wn(null);try{let a=null;r&tc.SignalBased&&(a=t[i][Ja]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&tc.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):nR(t,a,i,o)}finally{Wn(s)}}function $$(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)hu(~r);else{let o=r,s=e[++i],a=e[++i];i9(s,o);let l=t[o];a(2,l)}}}finally{hu(-1)}}function D_(n,t,e,i,r,o,s,a,l,u,f){let h=t.blueprint.slice();return h[Bo]=r,h[Qt]=i|4|128|8|64,(u!==null||n&&n[Qt]&2048)&&(h[Qt]|=2048),lR(h),h[Ar]=h[qd]=n,h[js]=e,h[_a]=s||n&&n[_a],h[Ti]=a||n&&n[Ti],h[Vd]=l||n&&n[Vd]||null,h[$s]=o,h[h_]=V9(),h[ga]=f,h[eR]=u,h[us]=t.type==2?n[us]:h,h}function xp(n,t,e,i,r){let o=n.data[t];if(o===null)o=q$(n,t,e,i,r),n9()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=J7();o.injectorIndex=s===null?-1:s.injectorIndex}return yu(o,!0),o}function q$(n,t,e,i,r){let o=hR(),s=Bw(),a=s?o:o&&o.parent,l=n.data[t]=eq(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function wk(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ek(n,t,e,i,r){let o=xu(),s=i&2;try{hu(-1),s&&t.length>Ji&&bk(n,t,Ji,!1),ha(s?2:0,r),e(i,r)}finally{hu(o),ha(s?3:1,r)}}function a1(n,t,e){if(Uw(t)){let i=Wn(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Wn(i)}}}function l1(n,t,e){fR()&&(sq(n,t,e,zo(e,t)),(e.flags&64)===64&&Dk(n,t,e))}function c1(n,t,e=zo){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function Sk(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=u1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function u1(n,t,e,i,r,o,s,a,l,u,f){let h=Ji+i,m=h+r,p=Y$(h,m),y=typeof u=="function"?u():u;return p[un]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:f}}function Y$(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:qs);return e}function X$(n,t,e,i){let o=i.get(ek,QR)||e===ma.ShadowDom,s=n.selectRootElement(t,o);return Z$(s),s}function Z$(n){Tk(n)}var Tk=()=>null;function K$(n){BR(n)?vk(n):e$(n)}function J$(){Tk=K$}function Q$(n,t,e,i){let r=Ik(t);r.push(e),n.firstCreatePass&&Rk(n).push(i,r.length-1)}function eq(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return mp()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function u2(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=tc.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}n===0?d2(i,e,u,a,l):d2(i,e,u,a)}return i}function d2(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function tq(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,u=null;for(let f=i;f<r;f++){let h=o[f],m=e?e.get(h):null,p=m?m.inputs:null,y=m?m.outputs:null;l=u2(0,h.inputs,f,l,p),u=u2(1,h.outputs,f,u,y);let C=l!==null&&s!==null&&!kw(t)?_q(l,f,s):null;a.push(C)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}function nq(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function d1(n,t,e,i,r,o,s,a){let l=zo(t,e),u=t.inputs,f;!a&&u!=null&&(f=u[i])?(h1(n,e,f,i,r),pp(t)&&iq(e,t.index)):t.type&3?(i=nq(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function iq(n,t){let e=cc(t,n);e[Qt]&16||(e[Qt]|=64)}function f1(n,t,e,i){if(fR()){let r=i===null?null:{"":-1},o=lq(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Pk(n,t,e,s,r,a),r&&cq(e,i,r)}e.mergedAttrs=op(e.mergedAttrs,e.attrs)}function Pk(n,t,e,i,r,o){for(let u=0;u<i.length;u++)zM($0(e,t),n,i[u].type);dq(e,n.data.length,i.length);for(let u=0;u<i.length;u++){let f=i[u];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,l=wk(n,t,i.length,null);for(let u=0;u<i.length;u++){let f=i[u];e.mergedAttrs=op(e.mergedAttrs,f.hostAttrs),fq(n,e,t,l,f),uq(l,f,r),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let h=f.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}tq(n,e,o)}function rq(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;oq(s)!=a&&s.push(a),s.push(e,i,o)}}function oq(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function sq(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;pp(e)&&hq(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||$0(e,t),rc(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let l=n.data[a],u=mu(t,n,a,e);if(rc(u,t),s!==null&&gq(t,a-r,u,l,e,s),ic(l)){let f=cc(e.index,t);f[js]=mu(t,n,a,e)}}}function Dk(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=r9();try{hu(o);for(let a=i;a<r;a++){let l=n.data[a],u=t[a];UM(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&aq(l,u)}}finally{hu(-1),UM(s)}}function aq(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function lq(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(g7(t,s.selectors,!1))if(i||(i=[]),ic(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;iw(n,t,l)}else i.unshift(s),iw(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function iw(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function cq(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new Ct(-301,!1);i.push(t[r],o)}}}function uq(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;ic(t)&&(e[""]=n)}}function dq(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function fq(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=cu(r.type,!0)),s=new pu(o,ic(r),$);n.blueprint[i]=s,e[i]=s,rq(n,t,i,wk(n,e,r.hostVars,qs),r)}function hq(n,t,e){let i=zo(t,n),r=Sk(e),o=n[_a].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=O_(n,D_(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function pq(n,t,e,i,r,o){let s=zo(n,t);mq(t[Ti],s,o,n.value,e,i,r)}function mq(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?lu(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function gq(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],f=s[a++],h=s[a++];Mk(i,e,l,u,f,h)}}function _q(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function Ok(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function Ak(n,t){let e=n.contentQueries;if(e!==null){let i=Wn(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];zw(o),a.contentQueries(2,t[s],s)}}}finally{Wn(i)}}}function O_(n,t){return n[ap]?n[GI][zs]=t:n[ap]=t,n[GI]=t,t}function rw(n,t,e){zw(0);let i=Wn(null);try{t(n,e)}finally{Wn(i)}}function Ik(n){return n[V0]??=[]}function Rk(n){return n.cleanup??=[]}function kk(n,t){let e=n[Vd],i=e?e.get(ol,null):null;i&&i.handleError(t)}function h1(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],u=t[s],f=n.data[s];Mk(f,u,i,a,l,r)}}function Nk(n,t,e){let i=sR(t,n);D$(n[Ti],i,e)}function vq(n,t){let e=cc(t,n),i=e[un];yq(i,e);let r=e[Bo];r!==null&&e[ga]===null&&(e[ga]=Jw(r,e[Vd])),p1(i,e,e[js])}function yq(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function p1(n,t,e){Hw(t);try{let i=n.viewQuery;i!==null&&rw(1,i,e);let r=n.template;r!==null&&Ek(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[il]?.finishViewCreation(n),n.staticContentQueries&&Ak(n,t),n.staticViewQueries&&rw(2,n.viewQuery,e);let o=n.components;o!==null&&xq(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Qt]&=-5,jw()}}function xq(n,t){for(let e=0;e<t.length;e++)vq(n,t[e])}function bq(n,t,e,i){let r=Wn(null);try{let o=t.tView,a=n[Qt]&4096?4096:16,l=D_(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[t.index];l[du]=u;let f=n[il];return f!==null&&(l[il]=f.createEmbeddedView(o)),p1(o,l,e),l}finally{Wn(r)}}function f2(n,t){return!t||t.firstChild===null||X0(n)}function Cq(n,t,e,i=!0){let r=t[un];if(R$(r,t,n,e),i){let s=nw(e,n),a=t[Ti],l=gk(a,n[rl]);l!==null&&A$(r,n[$s],a,t,l,s)}let o=t[ga];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Q0(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(Ws(o)),ya(o)&&Mq(o,i);let s=e.type;if(s&8)Q0(n,t,e.child,i);else if(s&32){let a=n1(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=_k(t,e);if(Array.isArray(a))i.push(...a);else{let l=fu(t[us]);Q0(l[un],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function Mq(n,t){for(let e=wo;e<n.length;e++){let i=n[e],r=i[un].firstChild;r!==null&&Q0(i[un],i,r,t)}n[rl]!==n[Bo]&&t.push(n[rl])}var Fk=[];function wq(n){return n[cs]??Eq(n)}function Eq(n){let t=Fk.pop()??Object.create(Tq);return t.lView=n,t}function Sq(n){n.lView[cs]!==n&&(n.lView=null,Fk.push(n))}var Tq=$t(je({},Yh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{__(n.lView)},consumerOnSignalRead(){this.lView[cs]=this}});function Pq(n){let t=n[cs]??Object.create(Dq);return t.lView=n,t}var Dq=$t(je({},Yh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let t=fu(n.lView);for(;t&&!Lk(t[un]);)t=fu(t);t&&cR(t)},consumerOnSignalRead(){this.lView[cs]=this}});function Lk(n){return n.type!==2}var Oq=100;function Uk(n,t=!0,e=0){let i=n[_a],r=i.rendererFactory,o=!1;o||r.begin?.();try{Aq(n,e)}catch(s){throw t&&kk(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function Aq(n,t){let e=mR();try{qI(!0),ow(n,t);let i=0;for(;g_(n);){if(i===Oq)throw new Ct(103,!1);i++,ow(n,1)}}finally{qI(e)}}function Iq(n,t,e,i){let r=t[Qt];if((r&256)===256)return;let o=!1,s=!1;!o&&t[_a].inlineEffectRunner?.flush(),Hw(t);let a=!0,l=null,u=null;o||(Lk(n)?(u=wq(t),l=Gg(u)):XA()===null?(a=!1,u=Pq(t),l=Gg(u)):t[cs]&&(WC(t[cs]),t[cs]=null));try{lR(t),t9(n.bindingStartIndex),e!==null&&Ek(n,t,e,2,i);let f=(r&3)===3;if(!o)if(f){let p=n.preOrderCheckHooks;p!==null&&O0(t,p,null)}else{let p=n.preOrderHooks;p!==null&&A0(t,p,0,null),gM(t,0)}if(s||Rq(t),Vk(t,0),n.contentQueries!==null&&Ak(n,t),!o)if(f){let p=n.contentCheckHooks;p!==null&&O0(t,p)}else{let p=n.contentHooks;p!==null&&A0(t,p,1),gM(t,1)}$$(n,t);let h=n.components;h!==null&&zk(t,h,0);let m=n.viewQuery;if(m!==null&&rw(2,m,i),!o)if(f){let p=n.viewCheckHooks;p!==null&&O0(t,p)}else{let p=n.viewHooks;p!==null&&A0(t,p,2),gM(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[mM]){for(let p of t[mM])p();t[mM]=null}o||(t[Qt]&=-73)}catch(f){throw o||__(t),f}finally{u!==null&&(HC(u,l),a&&Sq(u)),jw()}}function Vk(n,t){for(let e=HR(n);e!==null;e=jR(e))for(let i=wo;i<e.length;i++){let r=e[i];Bk(r,t)}}function Rq(n){for(let t=HR(n);t!==null;t=jR(t)){if(!(t[Qt]&z0.HasTransplantedViews))continue;let e=t[Bd];for(let i=0;i<e.length;i++){let r=e[i];cR(r)}}}function kq(n,t,e){let i=cc(t,n);Bk(i,e)}function Bk(n,t){Vw(n)&&ow(n,t)}function ow(n,t){let i=n[un],r=n[Qt],o=n[cs],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&jC(o)),s||=!1,o&&(o.dirty=!1),n[Qt]&=-9217,s)Iq(i,n,i.template,n[js]);else if(r&8192){Vk(n,1);let a=i.components;a!==null&&zk(n,a,1)}}function zk(n,t,e){for(let i=0;i<t.length;i++)kq(n,t[i],e)}function m1(n,t){let e=mR()?64:1088;for(n[_a].changeDetectionScheduler?.notify(t);n;){n[Qt]|=e;let i=fu(n);if(H0(n)&&!i)return n;n=i}return null}var gu=class{get rootNodes(){let t=this._lView,e=t[un];return Q0(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[js]}set context(t){this._lView[js]=t}get destroyed(){return(this._lView[Qt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ar];if(ya(t)){let e=t[B0],i=e?e.indexOf(this):-1;i>-1&&(tw(t,i),L0(e,i))}this._attachedToViewContainer=!1}pk(this._lView[un],this._lView)}onDestroy(t){uR(this._lView,t)}markForCheck(){m1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Qt]&=-129}reattach(){LM(this._lView),this._lView[Qt]|=128}detectChanges(){this._lView[Qt]|=1024,Uk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=H0(this._lView),e=this._lView[du];e!==null&&!t&&r1(e,this._lView),fk(this._lView[un],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ct(902,!1);this._appRef=t;let e=H0(this._lView),i=this._lView[du];i!==null&&!e&&hk(i,this._lView),LM(this._lView)}},_u=(()=>{class n{static{this.__NG_ELEMENT_ID__=Lq}}return n})(),Nq=_u,Fq=class extends Nq{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=bq(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new gu(r)}};function Lq(){return A_(Ir(),sn())}function A_(n,t){return n.type&4?new Fq(t,n,Yd(n,t)):null}var Uq=new RegExp(`^(\\d+)*(${qR}|${$R})*(.*)`);function Vq(n){let t=n.match(Uq),[e,i,r,o]=t,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function Bq(n){return!n.prev&&n.parent?.type===8}function CM(n){return n.index-Ji}function zq(n,t){let e=n.i18nNodes;if(e)return e.get(t)}function I_(n,t,e,i){let r=CM(i),o=zq(n,r);if(o===void 0){let s=n.data[q9];if(s?.[r])o=jq(s[r],e);else if(t.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(Bq(i)){let u=CM(i.parent);o=KM(n,u)}else{let u=zo(l,e);if(a)o=u.firstChild;else{let f=CM(l),h=KM(n,f);if(l.type===2&&h){let p=Qw(n,f)+1;o=R_(p,h)}else o=u.nextSibling}}}}return o}function R_(n,t){let e=t;for(let i=0;i<n;i++)e=e.nextSibling;return e}function Hq(n,t){let e=n;for(let i=0;i<t.length;i+=2){let r=t[i],o=t[i+1];for(let s=0;s<o;s++)switch(r){case ZM.FirstChild:e=e.firstChild;break;case ZM.NextSibling:e=e.nextSibling;break}}return e}function jq(n,t){let[e,...i]=Vq(n),r;if(e===$R)r=t[us][Bo];else if(e===qR)r=T$(t[us][Bo]);else{let o=Number(e);r=Ws(t[o+Ji])}return Hq(r,i)}var Wq=!1;function Gq(n){Wq=n}function $q(n){let t=n[ga];if(t){let{i18nNodes:e,dehydratedIcuData:i}=t;if(e&&i){let r=n[Ti];for(let o of i.values())qq(r,e,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function qq(n,t,e){for(let i of e.node.cases[e.case]){let r=t.get(i.index-Ji);r&&o1(n,r,!1)}}function Hk(n){let t=n[lp]??[],i=n[Ar][Ti];for(let r of t)Yq(r,i);n[lp]=Vo}function Yq(n,t){let e=0,i=n.firstChild;if(i){let r=n.data[Z0];for(;e<r;){let o=i.nextSibling;o1(t,i,!1),i=o,e++}}}function jk(n){Hk(n);let t=n[Bo];Hs(t)&&e_(t);for(let e=wo;e<n.length;e++)e_(n[e])}function e_(n){$q(n);let t=n[un];for(let e=Ji;e<t.bindingStartIndex;e++)if(ya(n[e])){let i=n[e];jk(i)}else Hs(n[e])&&e_(n[e])}function Xq(n){let t=n._views;for(let e of t){let i=J9(e);i!==null&&i[Bo]!==null&&(Hs(i)?e_(i):jk(i))}}function Zq(n,t){let e=[];for(let i of t)for(let r=0;r<(i[YR]??1);r++){let o={data:i,firstChild:null};i[Z0]>0&&(o.firstChild=n,n=R_(i[Z0],n)),e.push(o)}return[n,e]}var Wk=()=>null;function Kq(n,t){let e=n[lp];return!t||e===null||e.length===0?null:e[0].data[$9]===t?e.shift():(Hk(n),null)}function Jq(){Wk=Kq}function h2(n,t){return Wk(n,t)}var Hd=class{},k_=new _t("",{providedIn:"root",factory:()=>!1});var Gk=new _t(""),$k=new _t(""),sw=class{},t_=class{};function Qq(n){let t=Error(`No component factory found for ${lo(n)}.`);return t[eY]=n,t}var eY="ngComponent";var aw=class{resolveComponentFactory(t){throw Qq(t)}},oc=class{static{this.NULL=new aw}},jd=class{},Ai=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>tY()}}return n})();function tY(){let n=sn(),t=Ir(),e=cc(t.index,n);return(Hs(e)?e:n)[Ti]}var nY=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>null})}}return n})();function n_(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=NI(r,a);else if(o==2){let l=a,u=t[++s];i=NI(i,l+": "+u+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var i_=class extends oc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=nc(t);return new Wd(e,this.ngModule)}};function p2(n,t){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:tc.None;t?e.push({propName:s,templateName:i,isSignal:(a&tc.SignalBased)!==0}):e.push({propName:s,templateName:i})}return e}function iY(n){let t=n.toLowerCase();return t==="svg"?B7:t==="math"?z7:null}var Wd=class extends t_{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=p2(t.inputs,!0);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return p2(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=x7(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=Wn(null);try{r=r||this.ngModule;let s=r instanceof co?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new VM(t,s):t,l=a.get(jd,null);if(l===null)throw new Ct(407,!1);let u=a.get(nY,null),f=a.get(Hd,null),h={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:f},m=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=i?X$(m,i,this.componentDef.encapsulation,a):i1(m,p,iY(p)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let x=null;y!==null&&(x=Jw(y,a,!0));let b=u1(0,null,null,1,0,null,null,null,null,null,null),P=D_(null,b,null,C,null,null,h,m,a,null,x);Hw(P);let E,D,L=null;try{let B=this.componentDef,k,G=null;B.findHostDirectiveDefs?(k=[],G=new Map,B.findHostDirectiveDefs(B,k,G),k.push(B)):k=[B];let F=rY(P,y);L=oY(F,y,B,k,P,h,m),D=aR(b,Ji),y&&lY(m,B,y,i),e!==void 0&&cY(D,this.ngContentSelectors,e),E=aY(L,B,k,G,P,[uY]),p1(b,P,null)}catch(B){throw L!==null&&YM(L),YM(P),B}finally{jw()}return new lw(this.componentType,E,Yd(D,P),P,D)}finally{Wn(o)}}},lw=class extends sw{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new gu(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;h1(o[un],o,r,t,e),this.previousInputValues.set(t,e);let s=cc(this._tNode.index,o);m1(s,1)}}get injector(){return new au(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function rY(n,t){let e=n[un],i=Ji;return n[i]=t,xp(e,i,2,"#host",null)}function oY(n,t,e,i,r,o,s){let a=r[un];sY(i,n,t,s);let l=null;t!==null&&(l=Jw(t,r[Vd]));let u=o.rendererFactory.createRenderer(t,e),f=16;e.signals?f=4096:e.onPush&&(f=64);let h=D_(r,Sk(e),null,f,r[n.index],n,o,u,null,null,l);return a.firstCreatePass&&iw(a,n,i.length-1),O_(r,h),r[n.index]=h}function sY(n,t,e,i){for(let r of n)t.mergedAttrs=op(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(n_(t,t.mergedAttrs,!0),e!==null&&xk(i,e,t))}function aY(n,t,e,i,r,o){let s=Ir(),a=r[un],l=zo(s,r);Pk(a,r,s,e,null,i);for(let f=0;f<e.length;f++){let h=s.directiveStart+f,m=mu(r,a,h,s);rc(m,r)}Dk(a,r,s),l&&rc(l,r);let u=mu(r,a,s.directiveStart+s.componentOffset,s);if(n[js]=r[js]=u,o!==null)for(let f of o)f(u,t);return a1(a,s,r),u}function lY(n,t,e,i){if(i)IM(n,e,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=b7(t.selectors[0]);r&&IM(n,e,r),o&&o.length>0&&yk(n,e,o.join(" "))}}function cY(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function uY(){let n=Ir();b_(sn()[un],n)}var Ho=(()=>{class n{static{this.__NG_ELEMENT_ID__=dY}}return n})();function dY(){let n=Ir();return Yk(n,sn())}var fY=Ho,qk=class extends fY{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new au(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ww(this._hostTNode,this._hostLView);if(SR(t)){let e=W0(t,this._hostLView),i=j0(t),r=e[un].data[i+8];return new au(r,e)}else return new au(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=m2(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-wo}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=h2(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,f2(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!F7(t),a;if(s)a=e;else{let y=e||{};a=y.index,i=y.injector,r=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let l=s?t:new Wd(nc(t)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let C=(s?u:this.parentInjector).get(co,null);C&&(o=C)}let f=nc(l.componentType??{}),h=h2(this._lContainer,f?.id??null),m=h?.firstChild??null,p=l.create(u,r,m,o);return this.insertImpl(p.hostView,a,f2(this._hostTNode,h)),p}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(j7(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[Ar],u=new qk(l,l[$s],l[Ar]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Cq(s,r,o,i),t.attachToViewContainerRef(),L2(MM(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=m2(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=tw(this._lContainer,e);i&&(L0(MM(this._lContainer),e),pk(i[un],i))}detach(t){let e=this._adjustIndex(t,-1),i=tw(this._lContainer,e);return i&&L0(MM(this._lContainer),e)!=null?new gu(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function m2(n){return n[B0]}function MM(n){return n[B0]||(n[B0]=[])}function Yk(n,t){let e,i=t[n.index];return ya(i)?e=i:(e=Ok(i,t,null,n),t[n.index]=e,O_(t,e)),Xk(e,t,n,i),new qk(e,n,t)}function hY(n,t){let e=n[Ti],i=e.createComment(""),r=zo(t,n),o=gk(e,r);return J0(e,o,i,U$(e,r),!1),i}var Xk=Zk,g1=()=>!1;function pY(n,t,e){return g1(n,t,e)}function Zk(n,t,e,i){if(n[rl])return;let r;e.type&8?r=Ws(i):r=hY(t,e),n[rl]=r}function mY(n,t,e){if(n[rl]&&n[lp])return!0;let i=e[ga],r=t.index-Ji;if(!i||L9(t)||_p(i,r))return!1;let s=KM(i,r),a=i.data[Kw]?.[r],[l,u]=Zq(s,a);return n[rl]=l,n[lp]=u,!0}function gY(n,t,e,i){g1(n,e,t)||Zk(n,t,e,i)}function _Y(){Xk=gY,g1=mY}var cw=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},uw=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)_1(t,e).matches!==null&&this.queries[e].setDirty()}},dw=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=EY(t):this.predicate=t}},fw=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},hw=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,vY(e,o)),this.matchTNodeWithReadOption(t,e,I0(e,t,o,!1,!1))}else i===_u?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,I0(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ui||r===Ho||r===_u&&e.type&4)this.addMatch(e.index,-2);else{let o=I0(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function vY(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function yY(n,t){return n.type&11?Yd(n,t):n.type&4?A_(n,t):null}function xY(n,t,e,i){return e===-1?yY(t,n):e===-2?bY(n,t,i):mu(n,n[un],e,t)}function bY(n,t,e){if(e===ui)return Yd(t,n);if(e===_u)return A_(t,n);if(e===Ho)return Yk(t,n)}function Kk(n,t,e,i){let r=t[il].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(xY(t,f,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function pw(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=Kk(n,t,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=t[-l];for(let h=wo;h<f.length;h++){let m=f[h];m[du]===m[Ar]&&pw(m[un],m,u,i)}if(f[Bd]!==null){let h=f[Bd];for(let m=0;m<h.length;m++){let p=h[m];pw(p[un],p,u,i)}}}}}return i}function CY(n,t){return n[il].queries[t].queryList}function MY(n,t,e){let i=new qM((e&4)===4);return Q$(n,t,i,i.destroy),(t[il]??=new uw).queries.push(new cw(i))-1}function wY(n,t,e,i){let r=dr();if(r.firstCreatePass){let o=Ir();SY(r,new dw(t,e,i),o.index),TY(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return MY(r,sn(),e)}function EY(n){return n.split(",").map(t=>t.trim())}function SY(n,t,e){n.queries===null&&(n.queries=new fw),n.queries.track(new hw(t,e))}function TY(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function _1(n,t){return n.queries.getByIndex(t)}function PY(n,t){let e=n[un],i=_1(e,t);return i.crossesNgTemplate?pw(e,n,t,[]):Kk(e,n,i,t)}var g2=new Set;function ll(n){g2.has(n)||(g2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function DY(n){return typeof n=="function"&&n[Ja]!==void 0}function Jd(n,t){ll("NgSignals");let e=sI(n),i=e[Ja];return t?.equal&&(i.equal=t.equal),e.set=r=>GC(i,r),e.update=r=>aI(i,r),e.asReadonly=OY.bind(e),e}function OY(){let n=this[Ja];if(n.readonlyFn===void 0){let t=()=>this();t[Ja]=n,n.readonlyFn=t}return n.readonlyFn}function Jk(n){return DY(n)&&typeof n.set=="function"}function AY(n){return Object.getPrototypeOf(n.prototype).constructor}function Yi(n){let t=AY(n.type),e=!0,i=[n];for(;t;){let r;if(ic(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ct(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=E0(n.inputs),s.inputTransforms=E0(n.inputTransforms),s.declaredInputs=E0(n.declaredInputs),s.outputs=E0(n.outputs);let a=r.hostBindings;a&&FY(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&kY(n,l),u&&NY(n,u),IY(n,r),BG(n.outputs,r.outputs),ic(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Yi&&(e=!1)}}t=Object.getPrototypeOf(t)}RY(i)}function IY(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function RY(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=op(r.hostAttrs,e=op(e,r.hostAttrs))}}function E0(n){return n===Ld?{}:n===Vo?[]:n}function kY(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function NY(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function FY(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function v1(n){let t=n.inputConfig,e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];Array.isArray(r)&&r[3]&&(e[i]=r[3])}n.inputTransforms=e}var sc=class{},cp=class{};var mw=class extends sc{constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new i_(this);let o=$2(t);this._bootstrapComponents=ck(o.bootstrap),this._r3Injector=NR(t,e,[{provide:sc,useValue:this},{provide:oc,useValue:this.componentFactoryResolver},...i],lo(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},gw=class extends cp{constructor(t){super(),this.moduleType=t}create(t){return new mw(this.moduleType,t,[])}};var r_=class extends sc{constructor(t){super(),this.componentFactoryResolver=new i_(this),this.instance=null;let e=new sp([...t.providers,{provide:sc,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],t.parent||Lw(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function N_(n,t,e=null){return new r_({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}function Qk(n){return y1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function LY(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function y1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function cl(n,t,e){return n[t]=e}function F_(n,t){return n[t]}function Gs(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Gd(n,t,e,i){let r=Gs(n,t,e);return Gs(n,t+1,i)||r}function eN(n,t,e,i,r){let o=Gd(n,t,e,i);return Gs(n,t+2,r)||o}function L_(n,t,e,i,r,o){let s=Gd(n,t,e,i);return Gd(n,t+2,r,o)||s}function bp(n){return(n.flags&32)===32}function UY(n,t,e,i,r,o,s,a,l){let u=t.consts,f=xp(t,n,4,s||null,a||null);f1(t,e,f,zd(u,l)),b_(t,f);let h=f.tView=u1(2,f,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,f),h.queries=t.queries.embeddedTView(f)),f}function VY(n,t,e,i,r,o,s,a,l,u){let f=e+Ji,h=t.firstCreatePass?UY(f,t,n,i,r,o,s,a,l):t.data[f];yu(h,!1);let m=tN(t,n,h,e);x_()&&T_(t,n,m,h),rc(m,n);let p=Ok(m,n,m,h);return n[f]=p,O_(n,p),pY(p,h,n),p_(h)&&l1(t,n,h),l!=null&&c1(n,h,u),h}function Te(n,t,e,i,r,o,s,a){let l=sn(),u=dr(),f=zd(u.consts,o);return VY(l,u,n,t,e,i,r,f,s,a),Te}var tN=nN;function nN(n,t,e,i){return uc(!0),t[Ti].createComment("")}function BY(n,t,e,i){let r=t[ga],o=!r||mp()||bp(e)||_p(r,i);if(uc(o),o)return nN(n,t,e,i);let s=r.data[G9]?.[i]??null;s!==null&&e.tView!==null&&e.tView.ssrId===null&&(e.tView.ssrId=s);let a=I_(r,n,t,e);M_(r,i,a);let l=Qw(r,i);return R_(l,a)}function zY(){tN=BY}var kd=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(kd||{}),iN=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})(),_w=class n{constructor(){this.ngZone=ze(Gn),this.scheduler=ze(Hd),this.errorHandler=ze(ol,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[kd.EarlyRead,kd.Write,kd.MixedReadWrite,kd.Read]}execute(){this.executing=!0;for(let t of n.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[t]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(i){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}},vw=class{constructor(t,e,i,r){this.impl=t,this.hooks=e,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function x1(n,t){!t?.injector&&N7(x1);let e=t?.injector??ze(Eo);return tp(e)?(ll("NgAfterNextRender"),jY(n,e,t,!0)):WY}function HY(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function jY(n,t,e,i){let r=t.get(iN);r.impl??=t.get(_w);let o=e?.phase??kd.MixedReadWrite,s=e?.manualCleanup!==!0?t.get($w):null,a=new vw(r.impl,HY(n,o),i,s);return r.impl.register(a),a}var WY={destroy(){}};function Xi(n,t,e,i){let r=sn(),o=v_();if(Gs(r,o,t)){let s=dr(),a=y_();pq(a,r,n,t,e,i)}return Xi}function rN(n,t,e,i){return Gs(n,v_(),e)?t+lu(e)+i:qs}function GY(n,t,e,i,r,o){let s=e9(),a=Gd(n,s,e,r);return gR(2),a?t+lu(e)+i+lu(r)+o:qs}function S0(n,t){return n<<17|t<<2}function vu(n){return n>>17&32767}function $Y(n){return(n&2)==2}function qY(n,t){return n&131071|t<<17}function yw(n){return n|2}function $d(n){return(n&131068)>>2}function wM(n,t){return n&-131069|t<<2}function YY(n){return(n&1)===1}function xw(n){return n|1}function XY(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=vu(s),l=$d(s);n[i]=e;let u=!1,f;if(Array.isArray(e)){let h=e;f=h[1],(f===null||hp(h,f)>0)&&(u=!0)}else f=e;if(r)if(l!==0){let m=vu(n[a+1]);n[i+1]=S0(m,a),m!==0&&(n[m+1]=wM(n[m+1],i)),n[a+1]=qY(n[a+1],i)}else n[i+1]=S0(a,0),a!==0&&(n[a+1]=wM(n[a+1],i)),a=i;else n[i+1]=S0(l,0),a===0?a=i:n[l+1]=wM(n[l+1],i),l=i;u&&(n[i+1]=yw(n[i+1])),_2(n,f,i,!0),_2(n,f,i,!1),ZY(t,f,n,i,o),s=S0(a,l),o?t.classBindings=s:t.styleBindings=s}function ZY(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&hp(o,t)>=0&&(e[i+1]=xw(e[i+1]))}function _2(n,t,e,i){let r=n[e+1],o=t===null,s=i?vu(r):$d(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];KY(l,t)&&(a=!0,n[s+1]=i?xw(u):yw(u)),s=i?vu(u):$d(u)}a&&(n[e+1]=i?yw(r):xw(r))}function KY(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?hp(n,t)>=0:!1}function X(n,t,e){let i=sn(),r=v_();if(Gs(i,r,t)){let o=dr(),s=y_();d1(o,s,i,n,t,i[Ti],e,!1)}return X}function v2(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";h1(n,e,o[s],s,i)}function ul(n,t,e){return oN(n,t,e,!1),ul}function So(n,t){return oN(n,t,null,!0),So}function oN(n,t,e,i){let r=sn(),o=dr(),s=gR(2);if(o.firstUpdatePass&&QY(o,n,s,i),t!==qs&&Gs(r,s,t)){let a=o.data[xu()];rX(o,a,r,r[Ti],n,r[s+1]=oX(t,e),i,s)}}function JY(n,t){return t>=n.expandoStartIndex}function QY(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[xu()],s=JY(n,e);sX(o,i)&&t===null&&!s&&(t=!1),t=eX(r,o,t,i),XY(r,o,t,e,s,i)}}function eX(n,t,e,i){let r=o9(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=EM(null,n,t,e,i),e=up(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=EM(r,n,t,e,i),o===null){let l=tX(n,t,i);l!==void 0&&Array.isArray(l)&&(l=EM(null,n,t,l[1],i),l=up(l,t.attrs,i),nX(n,t,i,l))}else o=iX(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function tX(n,t,e){let i=e?t.classBindings:t.styleBindings;if($d(i)!==0)return n[vu(i)]}function nX(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[vu(r)]=i}function iX(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=up(i,s,e)}return up(i,t.attrs,e)}function EM(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=up(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function up(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),l7(n,s,e?!0:t[++o]))}return n===void 0?null:n}function rX(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let l=n.data,u=l[a+1],f=YY(u)?y2(l,t,e,r,$d(u),s):void 0;if(!o_(f)){o_(o)||$Y(u)&&(o=y2(l,null,e,r,a,s));let h=sR(xu(),e);W$(i,s,h,r,o)}}function y2(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,m=e[r+1];m===qs&&(m=h?Vo:void 0);let p=h?hM(m,i):f===i?m:void 0;if(u&&!o_(p)&&(p=hM(l,i)),o_(p)&&(a=p,s))return a;let y=n[r+1];r=s?vu(y):$d(y)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=hM(l,i))}return a}function o_(n){return n!==void 0}function oX(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=lo(Zd(n)))),n}function sX(n,t){return(n.flags&(t?8:16))!==0}function aX(n,t,e,i,r,o){let s=t.consts,a=zd(s,r),l=xp(t,n,2,i,a);return f1(t,e,l,zd(s,o)),l.attrs!==null&&n_(l,l.attrs,!1),l.mergedAttrs!==null&&n_(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function g(n,t,e,i){let r=sn(),o=dr(),s=Ji+n,a=r[Ti],l=o.firstCreatePass?aX(s,o,r,t,e,i):o.data[s],u=sN(o,r,l,a,t,n);r[s]=u;let f=p_(l);return yu(l,!0),xk(a,u,l),!bp(l)&&x_()&&T_(o,r,u,l),$7()===0&&rc(u,r),q7(),f&&(l1(o,r,l),a1(o,l,r)),i!==null&&c1(r,l),g}function _(){let n=Ir();Bw()?pR():(n=n.parent,yu(n,!1));let t=n;X7(t)&&K7(),Y7();let e=dr();return e.firstCreatePass&&(b_(e,n),Uw(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&d9(t)&&v2(e,t,sn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&f9(t)&&v2(e,t,sn(),t.stylesWithoutHost,!1),_}function me(n,t,e,i){return g(n,t,e,i),_(),me}var sN=(n,t,e,i,r,o)=>(uc(!0),i1(i,r,MR()));function lX(n,t,e,i,r,o){let s=t[ga],a=!s||mp()||bp(e)||_p(s,o);if(uc(a),a)return i1(i,r,MR());let l=I_(s,n,t,e);return JR(s,o)&&M_(s,o,l.nextSibling),s&&(VR(e)||BR(l))&&pp(e)&&(Z7(e),vk(l)),l}function cX(){sN=lX}function uX(n,t,e,i,r){let o=t.consts,s=zd(o,i),a=xp(t,n,8,"ng-container",s);s!==null&&n_(a,s,!0);let l=zd(o,r);return f1(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function bu(n,t,e){let i=sn(),r=dr(),o=n+Ji,s=r.firstCreatePass?uX(o,r,i,t,e):r.data[o];yu(s,!0);let a=aN(r,i,s,n);return i[o]=a,x_()&&T_(r,i,a,s),rc(a,i),p_(s)&&(l1(r,i,s),a1(r,s,i)),e!=null&&c1(i,s),bu}function Cu(){let n=Ir(),t=dr();return Bw()?pR():(n=n.parent,yu(n,!1)),t.firstCreatePass&&(b_(t,n),Uw(n)&&t.queries.elementEnd(n)),Cu}function b1(n,t,e){return bu(n,t,e),Cu(),b1}var aN=(n,t,e,i)=>(uc(!0),dk(t[Ti],""));function dX(n,t,e,i){let r,o=t[ga],s=!o||mp()||_p(o,i)||bp(e);if(uc(s),s)return dk(t[Ti],"");let a=I_(o,n,t,e),l=t$(o,i);return M_(o,i,a),r=R_(l,a),r}function fX(){aN=dX}function dt(){return sn()}var su=void 0;function hX(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&i===0?1:5}var pX=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",hX],SM={};function jo(n){let t=mX(n),e=x2(t);if(e)return e;let i=t.split("-")[0];if(e=x2(i),e)return e;if(i==="en")return pX;throw new Ct(701,!1)}function lN(n){return jo(n)[Bi.PluralCase]}function x2(n){return n in SM||(SM[n]=nl.ng&&nl.ng.common&&nl.ng.common.locales&&nl.ng.common.locales[n]),SM[n]}var Bi=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bi||{});function mX(n){return n.toLowerCase().replace(/_/g,"-")}var s_="en-US";var gX=s_;function _X(n){typeof n=="string"&&(gX=n.toLowerCase().replace(/_/g,"-"))}var vX=(n,t,e)=>{};function le(n,t,e,i){let r=sn(),o=dr(),s=Ir();return cN(o,r,r[Ti],s,n,t,i),le}function yX(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[V0],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function cN(n,t,e,i,r,o,s){let a=p_(i),u=n.firstCreatePass&&Rk(n),f=t[js],h=Ik(t),m=!0;if(i.type&3||s){let C=zo(i,t),x=s?s(C):C,b=h.length,P=s?D=>s(Ws(D[i.index])):i.index,E=null;if(!s&&a&&(E=yX(n,t,r,i.index)),E!==null){let D=E.__ngLastListenerFn__||E;D.__ngNextListenerFn__=o,E.__ngLastListenerFn__=o,m=!1}else{o=C2(i,t,f,o),vX(C,r,o);let D=e.listen(x,r,o);h.push(o,D),u&&u.push(r,P,b,b+1)}}else o=C2(i,t,f,o);let p=i.outputs,y;if(m&&p!==null&&(y=p[r])){let C=y.length;if(C)for(let x=0;x<C;x+=2){let b=y[x],P=y[x+1],L=t[b][P].subscribe(o),B=h.length;h.push(o,L),u&&u.push(r,i.index,B,-(B+1))}}}function b2(n,t,e,i){let r=Wn(null);try{return ha(6,t,e),e(i)!==!1}catch(o){return kk(n,o),!1}finally{ha(7,t,e),Wn(r)}}function C2(n,t,e,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?cc(n.index,t):t;m1(s,5);let a=b2(t,e,i,o),l=r.__ngNextListenerFn__;for(;l;)a=b2(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function ce(n=1){return a9(n)}function Mu(n,t,e,i,r){let o=sn(),s=rN(o,t,e,i);if(s!==qs){let a=dr(),l=y_();d1(a,l,o,n,s,o[Ti],r,!1)}return Mu}function uN(n,t,e,i){wY(n,t,e,i)}function dN(n){let t=sn(),e=dr(),i=_R();zw(i+1);let r=_1(e,i);if(n.dirty&&H7(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=PY(t,i);n.reset(o,R9),n.notifyOnChanges()}return!0}return!1}function fN(){return CY(sn(),_R())}function xX(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Ii(n){let t=Q7();return m_(t,Ji+n)}function M(n,t=""){let e=sn(),i=dr(),r=n+Ji,o=i.firstCreatePass?xp(i,r,1,t,null):i.data[r],s=hN(i,e,o,t,n);e[r]=s,x_()&&T_(i,e,s,o),yu(o,!1)}var hN=(n,t,e,i,r)=>(uc(!0),uk(t[Ti],i));function bX(n,t,e,i,r){let o=t[ga],s=!o||mp()||bp(e)||_p(o,r);return uc(s),s?uk(t[Ti],i):I_(o,n,t,e)}function CX(){hN=bX}function Ye(n){return xt("",n,""),Ye}function xt(n,t,e){let i=sn(),r=rN(i,n,t,e);return r!==qs&&Nk(i,xu(),r),xt}function C1(n,t,e,i,r){let o=sn(),s=GY(o,n,t,e,i,r);return s!==qs&&Nk(o,xu(),s),C1}function Xe(n,t,e){Jk(t)&&(t=t());let i=sn(),r=v_();if(Gs(i,r,t)){let o=dr(),s=y_();d1(o,s,i,n,t,i[Ti],e,!1)}return Xe}function Ke(n,t){let e=Jk(n);return e&&n.set(t),e}function Ze(n,t){let e=sn(),i=dr(),r=Ir();return cN(i,e,e[Ti],r,n,t),Ze}function MX(n,t,e){let i=dr();if(i.firstCreatePass){let r=ic(n);bw(e,i.data,i.blueprint,r,!0),bw(t,i.data,i.blueprint,r,!1)}}function bw(n,t,e,i,r){if(n=ao(n),Array.isArray(n))for(let o=0;o<n.length;o++)bw(n[o],t,e,i,r);else{let o=dr(),s=sn(),a=Ir(),l=Ud(n)?n:ao(n.provide),u=J2(n),f=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(Ud(n)||!n.multi){let p=new pu(u,r,$),y=PM(l,t,r?f:f+m,h);y===-1?(zM($0(a,s),o,l),TM(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(p),s.push(p)):(e[y]=p,s[y]=p)}else{let p=PM(l,t,f+m,h),y=PM(l,t,f,f+m),C=p>=0&&e[p],x=y>=0&&e[y];if(r&&!x||!r&&!C){zM($0(a,s),o,l);let b=SX(r?EX:wX,e.length,r,i,u);!r&&x&&(e[y].providerFactory=b),TM(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(b),s.push(b)}else{let b=pN(e[r?y:p],u,!r&&i);TM(o,n,p>-1?p:y,b)}!r&&i&&x&&e[y].componentProviders++}}}function TM(n,t,e,i){let r=Ud(t),o=P7(t);if(r||o){let l=(o?ao(t.useClass):t).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let f=u.indexOf(e);f===-1?u.push(e,[i,l]):u[f+1].push(i,l)}else u.push(e,l)}}}function pN(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function PM(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function wX(n,t,e,i){return Cw(this.multi,[])}function EX(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=mu(e,e[un],this.providerFactory.index,i);o=a.slice(0,s),Cw(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Cw(r,o);return o}function Cw(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function SX(n,t,e,i,r){let o=new pu(n,e,$);return o.multi=[],o.index=t,o.componentProviders=0,pN(o,r,i&&!e),o}function zi(n,t=[]){return e=>{e.providersResolver=(i,r)=>MX(i,r?r(n):n,t)}}var TX=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=X2(!1,e.type),r=i.length>0?N_([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ue({token:n,providedIn:"environment",factory:()=>new n(qe(co))})}}return n})();function Je(n){ll("NgStandalone"),n.getStandaloneInjector=t=>t.get(TX).getOrCreateStandaloneInjector(n)}function Hi(n,t,e){let i=fs()+n,r=sn();return r[i]===qs?cl(r,i,e?t.call(e):t()):F_(r,i)}function ri(n,t,e,i){return xN(sn(),fs(),n,t,e,i)}function xa(n,t,e,i,r){return bN(sn(),fs(),n,t,e,i,r)}function M1(n,t,e,i,r,o){return CN(sn(),fs(),n,t,e,i,r,o)}function mN(n,t,e,i,r,o,s){return PX(sn(),fs(),n,t,e,i,r,o,s)}function gN(n,t,e,i,r,o,s,a){let l=fs()+n,u=sn(),f=L_(u,l,e,i,r,o);return Gs(u,l+4,s)||f?cl(u,l+5,a?t.call(a,e,i,r,o,s):t(e,i,r,o,s)):F_(u,l+5)}function _N(n,t,e,i,r,o,s,a,l){let u=fs()+n,f=sn(),h=L_(f,u,e,i,r,o);return Gd(f,u+4,s,a)||h?cl(f,u+6,l?t.call(l,e,i,r,o,s,a):t(e,i,r,o,s,a)):F_(f,u+6)}function vN(n,t,e,i,r,o,s,a,l,u){let f=fs()+n,h=sn(),m=L_(h,f,e,i,r,o);return eN(h,f+4,s,a,l)||m?cl(h,f+7,u?t.call(u,e,i,r,o,s,a,l):t(e,i,r,o,s,a,l)):F_(h,f+7)}function yN(n,t,e,i){return DX(sn(),fs(),n,t,e,i)}function Cp(n,t){let e=n[t];return e===qs?void 0:e}function xN(n,t,e,i,r,o){let s=t+e;return Gs(n,s,r)?cl(n,s+1,o?i.call(o,r):i(r)):Cp(n,s+1)}function bN(n,t,e,i,r,o,s){let a=t+e;return Gd(n,a,r,o)?cl(n,a+2,s?i.call(s,r,o):i(r,o)):Cp(n,a+2)}function CN(n,t,e,i,r,o,s,a){let l=t+e;return eN(n,l,r,o,s)?cl(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):Cp(n,l+3)}function PX(n,t,e,i,r,o,s,a,l){let u=t+e;return L_(n,u,r,o,s,a)?cl(n,u+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):Cp(n,u+4)}function DX(n,t,e,i,r,o){let s=t+e,a=!1;for(let l=0;l<r.length;l++)Gs(n,s++,r[l])&&(a=!0);return a?cl(n,s,i.apply(o,r)):Cp(n,s)}function zr(n,t){let e=dr(),i,r=n+Ji;e.firstCreatePass?(i=OX(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=cu(i.type,!0)),s,a=Mo($);try{let l=G0(!1),u=o();return G0(l),xX(e,sn(),r,u),u}finally{Mo(a)}}function OX(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function w1(n,t,e){let i=n+Ji,r=sn(),o=m_(r,i);return E1(r,i)?xN(r,fs(),t,o.transform,e,o):o.transform(e)}function dl(n,t,e,i){let r=n+Ji,o=sn(),s=m_(o,r);return E1(o,r)?bN(o,fs(),t,s.transform,e,i,s):s.transform(e,i)}function Qd(n,t,e,i,r){let o=n+Ji,s=sn(),a=m_(s,o);return E1(s,o)?CN(s,fs(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function E1(n,t){return n[un].data[t].pure}function Ys(n,t){return A_(n,t)}var U_=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var MN=new _t("");function dc(n){return!!n&&typeof n.then=="function"}function S1(n){return!!n&&typeof n.subscribe=="function"}var V_=new _t(""),wN=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=ze(V_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(dc(o))e.push(o);else if(S1(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wu=new _t("");function AX(){oI(()=>{throw new Ct(600,!1)})}function IX(n){return n.isBoundToModule}var RX=10;function kX(n,t,e){try{let i=e();return dc(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var ba=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ze(A9),this.afterRenderManager=ze(iN),this.zonelessEnabled=ze(k_),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new On,this.afterTick=new On,this.componentTypes=[],this.components=[],this.isStable=ze(sl).hasPendingTasks.pipe(Pt(e=>!e)),this._injector=ze(co)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof t_;if(!this._injector.get(wN).done){let m=!r&&G2(e),p=!1;throw new Ct(405,p)}let s;r?s=e:s=this._injector.get(oc).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=IX(s)?void 0:this._injector.get(sc),l=i||s.selector,u=s.create(Eo.NULL,[],l,a),f=u.location.nativeElement,h=u.injector.get(MN,null);return h?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),R0(this.components,u),h?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Ct(101,!1);let e=Wn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Wn(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(jd,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<RX;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)NX(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>g_(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;R0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(wu,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>R0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ct(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R0(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var T0;function B_(n){T0??=new WeakMap;let t=T0.get(n);if(t)return t;let e=n.isStable.pipe(Vs(i=>i)).toPromise().then(()=>{});return T0.set(n,e),n.onDestroy(()=>T0?.delete(n)),e}function NX(n,t,e,i){if(!e&&!g_(n))return;Uk(n,t,e&&!i?0:1)}var Mw=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},z_=(()=>{class n{compileModuleSync(e){return new gw(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=$2(e),o=ck(r.declarations).reduce((s,a)=>{let l=nc(a);return l&&s.push(new Wd(l)),s},[]);return new Mw(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var FX=(()=>{class n{constructor(){this.zone=ze(Gn),this.changeDetectionScheduler=ze(Hd),this.applicationRef=ze(ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LX=new _t("",{factory:()=>!1});function EN({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new Gn($t(je({},TN()),{scheduleInRootZone:e})),[{provide:Gn,useFactory:n},{provide:uu,multi:!0,useFactory:()=>{let i=ze(FX,{optional:!0});return()=>i.initialize()}},{provide:uu,multi:!0,useFactory:()=>{let i=ze(UX);return()=>{i.initialize()}}},t===!0?{provide:Gk,useValue:!0}:[],{provide:$k,useValue:e??FR}]}function SN(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=EN({ngZoneFactory:()=>{let r=TN(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&ll("NgZone_CoalesceEvent"),new Gn(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return lc([{provide:LX,useValue:!0},{provide:k_,useValue:!1},i])}function TN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var UX=(()=>{class n{constructor(){this.subscription=new Vi,this.initialized=!1,this.zone=ze(Gn),this.pendingTasks=ze(sl)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Gn.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Gn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var VX=(()=>{class n{constructor(){this.appRef=ze(ba),this.taskService=ze(sl),this.ngZone=ze(Gn),this.zonelessEnabled=ze(k_),this.disableScheduling=ze(Gk,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Vi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Y0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ze($k,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $M||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?JI:LR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Y0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BX(){return typeof $localize<"u"&&$localize.locale||s_}var Ca=new _t("",{providedIn:"root",factory:()=>ze(Ca,Sn.Optional|Sn.SkipSelf)||BX()});var ww=new _t("");function P0(n){return!n.moduleRef}function zX(n){let t=P0(n)?n.r3Injector:n.moduleRef.injector,e=t.get(Gn);return e.run(()=>{P0(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(ol,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),P0(n)){let o=()=>t.destroy(),s=n.platformInjector.get(ww);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(ww);s.add(o),n.moduleRef.onDestroy(()=>{R0(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return kX(i,e,()=>{let o=t.get(wN);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Ca,s_);if(_X(s||s_),P0(n)){let a=t.get(ba);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return HX(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function HX(n,t){let e=n.injector.get(ba);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new Ct(-403,!1);t.push(n)}var k0=null;function jX(n=[],t){return Eo.create({name:t,providers:[{provide:f_,useValue:"platform"},{provide:ww,useValue:new Set([()=>k0=null])},...n]})}function WX(n=[]){if(k0)return k0;let t=jX(n);return k0=t,AX(),GX(t),t}function GX(n){n.get(Xw,null)?.forEach(e=>e())}var Xs=(()=>{class n{static{this.__NG_ELEMENT_ID__=$X}}return n})();function $X(n){return qX(Ir(),sn(),(n&16)===16)}function qX(n,t,e){if(pp(n)&&!e){let i=cc(n.index,t);return new gu(i,i)}else if(n.type&175){let i=t[us];return new gu(i,t)}return null}var Ew=class{constructor(){}supports(t){return Qk(t)}create(t){return new Sw(t)}},YX=(n,t)=>t,Sw=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||YX}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<M2(i,r,o)?e:i,a=M2(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let m=0;m<u;m++){let p=m<o.length?o[m]:o[m]=0,y=p+m;f<=y&&y<u&&(o[m]=p+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!Qk(t))throw new Ct(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,LY(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new Tw(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new a_),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new a_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Tw=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Pw=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},a_=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Pw,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function M2(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var Dw=class{constructor(){}supports(t){return t instanceof Map||y1(t)}create(){return new Ow}},Ow=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||y1(t)))throw new Ct(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new Aw(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},Aw=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function w2(){return new T1([new Ew])}var T1=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:w2})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||w2()),deps:[[n,new d_,new fp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new Ct(901,!1)}}return n})();function E2(){return new P1([new Dw])}var P1=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:E2})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||E2()),deps:[[n,new d_,new fp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new Ct(901,!1)}}return n})();function PN(n){try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=WX(i),o=[EN({}),{provide:Hd,useExisting:VX},...e||[]],s=new r_({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return zX({r3Injector:s.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}}var S2=!1;function XX(){S2||(S2=!0,K9(),cX(),CX(),fX(),zY(),_Y(),Jq(),J$())}function ZX(n,t){return B_(n)}function DN(){return lc([{provide:b0,useFactory:()=>{let n=!0;return tp()&&(n=!!ze(Xd,{optional:!0})?.get(ZR,null)),n&&ll("NgHydration"),n}},{provide:uu,useValue:()=>{Gq(!1),tp()&&ze(b0)&&(KX(),XX())},multi:!0},{provide:ek,useFactory:()=>tp()&&ze(b0)},{provide:wu,useFactory:()=>{if(tp()&&ze(b0)){let n=ze(ba),t=ze(Eo);return()=>{ZX(n,t).then(()=>{Xq(n)})}}return()=>{}},multi:!0}])}function KX(){let n=gp(),t;for(let e of n.body.childNodes)if(e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===X9){t=e;break}if(!t)throw new Ct(-507,!1)}function fc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ef(n,t){ll("NgSignals");let e=nI(n);return t?.equal&&(e[Ja].equal=t.equal),e}function hs(n){let t=Wn(null);try{return n()}finally{Wn(t)}}function ON(n){let t=nc(n);if(!t)return null;let e=new Wd(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var LN=null;function ml(){return LN}function UN(n){LN??=n}var Z_=class{};var Zi=new _t(""),B1=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(JX),providedIn:"platform"})}}return n})(),VN=new _t(""),JX=(()=>{class n extends B1{constructor(){super(),this._doc=ze(Zi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ml().getBaseHref(this._doc)}onPopState(e){let i=ml().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=ml().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function z1(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function AN(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function hl(n){return n&&n[0]!=="?"?"?"+n:n}var gl=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(H1),providedIn:"root"})}}return n})(),BN=new _t(""),H1=(()=>{class n extends gl{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ze(Zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return z1(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+hl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(qe(B1),qe(BN,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zN=(()=>{class n extends gl{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=z1(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(qe(B1),qe(BN,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),rf=(()=>{class n{constructor(e){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=tZ(AN(IN(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+hl(i))}normalize(e){return n.stripTrailingSlash(eZ(this._basePath,IN(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=hl}static{this.joinWithSlash=z1}static{this.stripTrailingSlash=AN}static{this.\u0275fac=function(i){return new(i||n)(qe(gl))}}static{this.\u0275prov=Ue({token:n,factory:()=>QX(),providedIn:"root"})}}return n})();function QX(){return new rf(qe(gl))}function eZ(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function IN(n){return n.replace(/\/index.html$/,"")}function tZ(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var tf=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(tf||{}),uo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(uo||{}),xi=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(xi||{}),Wo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Wo||{}),hc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function nZ(n){return jo(n)[Bi.LocaleId]}function iZ(n,t,e){let i=jo(n),r=[i[Bi.DayPeriodsFormat],i[Bi.DayPeriodsStandalone]],o=ps(r,t);return ps(o,e)}function rZ(n,t,e){let i=jo(n),r=[i[Bi.DaysFormat],i[Bi.DaysStandalone]],o=ps(r,t);return ps(o,e)}function oZ(n,t,e){let i=jo(n),r=[i[Bi.MonthsFormat],i[Bi.MonthsStandalone]],o=ps(r,t);return ps(o,e)}function sZ(n,t){let i=jo(n)[Bi.Eras];return ps(i,t)}function H_(n,t){let e=jo(n);return ps(e[Bi.DateFormat],t)}function j_(n,t){let e=jo(n);return ps(e[Bi.TimeFormat],t)}function W_(n,t){let i=jo(n)[Bi.DateTimeFormat];return ps(i,t)}function J_(n,t){let e=jo(n),i=e[Bi.NumberSymbols][t];if(typeof i>"u"){if(t===hc.CurrencyDecimal)return e[Bi.NumberSymbols][hc.Decimal];if(t===hc.CurrencyGroup)return e[Bi.NumberSymbols][hc.Group]}return i}var aZ=lN;function HN(n){if(!n[Bi.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Bi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function lZ(n){let t=jo(n);return HN(t),(t[Bi.ExtraData][2]||[]).map(i=>typeof i=="string"?D1(i):[D1(i[0]),D1(i[1])])}function cZ(n,t,e){let i=jo(n);HN(i);let r=[i[Bi.ExtraData][0],i[Bi.ExtraData][1]],o=ps(r,t)||[];return ps(o,e)||[]}function ps(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function D1(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var uZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,G_={},dZ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,pl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(pl||{}),Jn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Jn||{}),Kn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Kn||{});function er(n,t,e,i){let r=xZ(n);t=fl(e,t)||t;let s=[],a;for(;t;)if(a=dZ.exec(t),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;t=f}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=WN(i,l),r=yZ(r,i,!0));let u="";return s.forEach(f=>{let h=_Z(f);u+=h?h(r,e,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function K_(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function fl(n,t){let e=nZ(n);if(G_[e]??={},G_[e][t])return G_[e][t];let i="";switch(t){case"shortDate":i=H_(n,Wo.Short);break;case"mediumDate":i=H_(n,Wo.Medium);break;case"longDate":i=H_(n,Wo.Long);break;case"fullDate":i=H_(n,Wo.Full);break;case"shortTime":i=j_(n,Wo.Short);break;case"mediumTime":i=j_(n,Wo.Medium);break;case"longTime":i=j_(n,Wo.Long);break;case"fullTime":i=j_(n,Wo.Full);break;case"short":let r=fl(n,"shortTime"),o=fl(n,"shortDate");i=$_(W_(n,Wo.Short),[r,o]);break;case"medium":let s=fl(n,"mediumTime"),a=fl(n,"mediumDate");i=$_(W_(n,Wo.Medium),[s,a]);break;case"long":let l=fl(n,"longTime"),u=fl(n,"longDate");i=$_(W_(n,Wo.Long),[l,u]);break;case"full":let f=fl(n,"fullTime"),h=fl(n,"fullDate");i=$_(W_(n,Wo.Full),[f,h]);break}return i&&(G_[e][t]=i),i}function $_(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Zs(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function fZ(n,t){return Zs(n,3).substring(0,t)}function Qi(n,t,e=0,i=!1,r=!1){return function(o,s){let a=hZ(n,o);if((e>0||a>-e)&&(a+=e),n===Jn.Hours)a===0&&e===-12&&(a=12);else if(n===Jn.FractionalSeconds)return fZ(a,t);let l=J_(s,hc.MinusSign);return Zs(a,t,l,i,r)}}function hZ(n,t){switch(n){case Jn.FullYear:return t.getFullYear();case Jn.Month:return t.getMonth();case Jn.Date:return t.getDate();case Jn.Hours:return t.getHours();case Jn.Minutes:return t.getMinutes();case Jn.Seconds:return t.getSeconds();case Jn.FractionalSeconds:return t.getMilliseconds();case Jn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Mi(n,t,e=uo.Format,i=!1){return function(r,o){return pZ(r,o,n,t,e,i)}}function pZ(n,t,e,i,r,o){switch(e){case Kn.Months:return oZ(t,r,i)[n.getMonth()];case Kn.Days:return rZ(t,r,i)[n.getDay()];case Kn.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=lZ(t),f=cZ(t,r,i),h=u.findIndex(m=>{if(Array.isArray(m)){let[p,y]=m,C=s>=p.hours&&a>=p.minutes,x=s<y.hours||s===y.hours&&a<y.minutes;if(p.hours<y.hours){if(C&&x)return!0}else if(C||x)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(h!==-1)return f[h]}return iZ(t,r,i)[s<12?0:1];case Kn.Eras:return sZ(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function q_(n){return function(t,e,i){let r=-1*i,o=J_(e,hc.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case pl.Short:return(r>=0?"+":"")+Zs(s,2,o)+Zs(Math.abs(r%60),2,o);case pl.ShortGMT:return"GMT"+(r>=0?"+":"")+Zs(s,1,o);case pl.Long:return"GMT"+(r>=0?"+":"")+Zs(s,2,o)+":"+Zs(Math.abs(r%60),2,o);case pl.Extended:return i===0?"Z":(r>=0?"+":"")+Zs(s,2,o)+":"+Zs(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var mZ=0,X_=4;function gZ(n){let t=K_(n,mZ,1).getDay();return K_(n,0,1+(t<=X_?X_:X_+7)-t)}function jN(n){let t=n.getDay(),e=t===0?-3:X_-t;return K_(n.getFullYear(),n.getMonth(),n.getDate()+e)}function O1(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=jN(e),s=gZ(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Zs(r,n,J_(i,hc.MinusSign))}}function Y_(n,t=!1){return function(e,i){let o=jN(e).getFullYear();return Zs(o,n,J_(i,hc.MinusSign),t)}}var A1={};function _Z(n){if(A1[n])return A1[n];let t;switch(n){case"G":case"GG":case"GGG":t=Mi(Kn.Eras,xi.Abbreviated);break;case"GGGG":t=Mi(Kn.Eras,xi.Wide);break;case"GGGGG":t=Mi(Kn.Eras,xi.Narrow);break;case"y":t=Qi(Jn.FullYear,1,0,!1,!0);break;case"yy":t=Qi(Jn.FullYear,2,0,!0,!0);break;case"yyy":t=Qi(Jn.FullYear,3,0,!1,!0);break;case"yyyy":t=Qi(Jn.FullYear,4,0,!1,!0);break;case"Y":t=Y_(1);break;case"YY":t=Y_(2,!0);break;case"YYY":t=Y_(3);break;case"YYYY":t=Y_(4);break;case"M":case"L":t=Qi(Jn.Month,1,1);break;case"MM":case"LL":t=Qi(Jn.Month,2,1);break;case"MMM":t=Mi(Kn.Months,xi.Abbreviated);break;case"MMMM":t=Mi(Kn.Months,xi.Wide);break;case"MMMMM":t=Mi(Kn.Months,xi.Narrow);break;case"LLL":t=Mi(Kn.Months,xi.Abbreviated,uo.Standalone);break;case"LLLL":t=Mi(Kn.Months,xi.Wide,uo.Standalone);break;case"LLLLL":t=Mi(Kn.Months,xi.Narrow,uo.Standalone);break;case"w":t=O1(1);break;case"ww":t=O1(2);break;case"W":t=O1(1,!0);break;case"d":t=Qi(Jn.Date,1);break;case"dd":t=Qi(Jn.Date,2);break;case"c":case"cc":t=Qi(Jn.Day,1);break;case"ccc":t=Mi(Kn.Days,xi.Abbreviated,uo.Standalone);break;case"cccc":t=Mi(Kn.Days,xi.Wide,uo.Standalone);break;case"ccccc":t=Mi(Kn.Days,xi.Narrow,uo.Standalone);break;case"cccccc":t=Mi(Kn.Days,xi.Short,uo.Standalone);break;case"E":case"EE":case"EEE":t=Mi(Kn.Days,xi.Abbreviated);break;case"EEEE":t=Mi(Kn.Days,xi.Wide);break;case"EEEEE":t=Mi(Kn.Days,xi.Narrow);break;case"EEEEEE":t=Mi(Kn.Days,xi.Short);break;case"a":case"aa":case"aaa":t=Mi(Kn.DayPeriods,xi.Abbreviated);break;case"aaaa":t=Mi(Kn.DayPeriods,xi.Wide);break;case"aaaaa":t=Mi(Kn.DayPeriods,xi.Narrow);break;case"b":case"bb":case"bbb":t=Mi(Kn.DayPeriods,xi.Abbreviated,uo.Standalone,!0);break;case"bbbb":t=Mi(Kn.DayPeriods,xi.Wide,uo.Standalone,!0);break;case"bbbbb":t=Mi(Kn.DayPeriods,xi.Narrow,uo.Standalone,!0);break;case"B":case"BB":case"BBB":t=Mi(Kn.DayPeriods,xi.Abbreviated,uo.Format,!0);break;case"BBBB":t=Mi(Kn.DayPeriods,xi.Wide,uo.Format,!0);break;case"BBBBB":t=Mi(Kn.DayPeriods,xi.Narrow,uo.Format,!0);break;case"h":t=Qi(Jn.Hours,1,-12);break;case"hh":t=Qi(Jn.Hours,2,-12);break;case"H":t=Qi(Jn.Hours,1);break;case"HH":t=Qi(Jn.Hours,2);break;case"m":t=Qi(Jn.Minutes,1);break;case"mm":t=Qi(Jn.Minutes,2);break;case"s":t=Qi(Jn.Seconds,1);break;case"ss":t=Qi(Jn.Seconds,2);break;case"S":t=Qi(Jn.FractionalSeconds,1);break;case"SS":t=Qi(Jn.FractionalSeconds,2);break;case"SSS":t=Qi(Jn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=q_(pl.Short);break;case"ZZZZZ":t=q_(pl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=q_(pl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=q_(pl.Long);break;default:return null}return A1[n]=t,t}function WN(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function vZ(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function yZ(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),o=WN(t,r);return vZ(n,i*(o-r))}function xZ(n){if(RN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return K_(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(uZ))return bZ(i)}let t=new Date(n);if(!RN(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function bZ(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,u),t}function RN(n){return n instanceof Date&&!isNaN(n.valueOf())}var GN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:function(i){let r=null;return i?r=new i:r=(o=>new MZ(o))(qe(Ca)),r},providedIn:"root"})}}return n})();function CZ(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}var MZ=(()=>{class n extends GN{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(aZ(i||this.locale)(e)){case tf.Zero:return"zero";case tf.One:return"one";case tf.Two:return"two";case tf.Few:return"few";case tf.Many:return"many";default:return"other"}}static{this.\u0275fac=function(i){return new(i||n)(qe(Ca))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function Q_(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var I1=/\s+/,kN=[],To=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=kN,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(I1):kN}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(I1):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(I1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(Ai))}}static{this.\u0275dir=en({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var R1=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mn=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new R1(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),NN(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);NN(o,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)($(Ho),$(_u),$(T1))}}static{this.\u0275dir=en({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function NN(n,t){n.context.$implicit=t.item}var Zt=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new k1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){FN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){FN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)($(Ho),$(_u))}}static{this.\u0275dir=en({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),k1=class{constructor(){this.$implicit=null,this.ngIf=null}};function FN(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${lo(t)}'.`)}var $N=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:va.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(P1),$(Ai))}}static{this.\u0275dir=en({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),_l=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)($(Ho))}}static{this.\u0275dir=en({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Cr]})}}return n})();function j1(n,t){return new Ct(2100,!1)}var N1=class{createSubscription(t,e){return hs(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){hs(()=>t.unsubscribe())}},F1=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},wZ=new F1,EZ=new N1,qN=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(dc(e))return wZ;if(S1(e))return EZ;throw j1(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)($(Xs,16))}}static{this.\u0275pipe=ac({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var SZ="mediumDate",TZ=new _t(""),PZ=new _t(""),Eu=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let s=i??this.defaultOptions?.dateFormat??SZ,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return er(e,s,o||this.locale,a)}catch(s){throw j1(n,s.message)}}static{this.\u0275fac=function(i){return new(i||n)($(Ca,16),$(TZ,24),$(PZ,24))}}static{this.\u0275pipe=ac({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),DZ=/#/g,ev=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(e==null)return"";if(typeof i!="object"||i===null)throw j1(n,i);let o=CZ(e,Object.keys(i),this._localization,r);return i[o].replace(DZ,e.toString())}static{this.\u0275fac=function(i){return new(i||n)($(GN,16))}}static{this.\u0275pipe=ac({name:"i18nPlural",type:n,pure:!0,standalone:!0})}}return n})();var vt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})(),W1="browser",OZ="server";function of(n){return n===W1}function Mp(n){return n===OZ}var YN=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>of(ze(Br))?new L1(ze(Zi),window):new U1})}}return n})(),L1=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=AZ(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function AZ(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var U1=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},nf=class{};var Ep=class{},Sp=class{},Ma=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var $1=class{encodeKey(t){return XN(t)}encodeValue(t){return XN(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function IZ(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var RZ=/%(\d[a-f0-9])/gi,kZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XN(n){return encodeURIComponent(n).replace(RZ,(t,e)=>kZ[e]??t)}function tv(n){return`${n}`}var ms=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new $1,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=IZ(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(tv):[tv(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(tv(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(tv(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var q1=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function NZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ZN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function KN(n){return typeof Blob<"u"&&n instanceof Blob}function JN(n){return typeof FormData<"u"&&n instanceof FormData}function FZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var wp=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(NZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ma,this.context??=new q1,!this.params)this.params=new ms,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ZN(this.body)||KN(this.body)||JN(this.body)||FZ(this.body)?this.body:this.body instanceof ms?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||JN(this.body)?null:KN(this.body)?this.body.type||null:ZN(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ms?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((m,p)=>m.set(p,t.setHeaders[p]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((m,p)=>m.set(p,t.setParams[p]),f)),new n(e,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},mc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mc||{}),Tp=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new Ma,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},iv=class n extends Tp{constructor(t={}){super(t),this.type=mc.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Su=class n extends Tp{constructor(t={}){super(t),this.type=mc.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},pc=class extends Tp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},uF=200,LZ=204;function G1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var $n=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof wp)o=e;else{let l;r.headers instanceof Ma?l=r.headers:l=new Ma(r.headers);let u;r.params&&(r.params instanceof ms?u=r.params:u=new ms({fromObject:r.params})),o=new wp(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Rt(o).pipe(tl(l=>this.handler.handle(l)));if(e instanceof wp||r.observe==="events")return s;let a=s.pipe(_i(l=>l instanceof Su));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Pt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Pt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Pt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(Pt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new ms().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,G1(r,i))}post(e,i,r={}){return this.request("POST",e,G1(r,i))}put(e,i,r={}){return this.request("PUT",e,G1(r,i))}static{this.\u0275fac=function(i){return new(i||n)(qe(Ep))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),UZ=/^\)\]\}',?\n/,VZ="X-Request-URL";function QN(n){if(n.url)return n.url;let t=VZ.toLocaleLowerCase();return n.headers.get(t)}var Y1=(()=>{class n{constructor(){this.fetchImpl=ze(X1,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=ze(Gn)}handle(e){return new Jt(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(Z1,o=>i.error(new pc({error:o}))),()=>r.abort()})}doRequest(e,i,r){return Ka(this,null,function*(){let o=this.createRequestInit(e),s;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,je({signal:i},o)));BZ(p),r.next({type:mc.Sent}),s=yield p}catch(p){r.error(new pc({error:p,status:p.status??0,statusText:p.statusText,url:e.urlWithParams,headers:p.headers}));return}let a=new Ma(s.headers),l=s.statusText,u=QN(s)??e.urlWithParams,f=s.status,h=null;if(e.reportProgress&&r.next(new iv({headers:a,status:f,statusText:l,url:u})),s.body){let p=s.headers.get("content-length"),y=[],C=s.body.getReader(),x=0,b,P,E=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Ka(this,null,function*(){for(;;){let{done:L,value:B}=yield C.read();if(L)break;if(y.push(B),x+=B.length,e.reportProgress){P=e.responseType==="text"?(P??"")+(b??=new TextDecoder).decode(B,{stream:!0}):void 0;let k=()=>r.next({type:mc.DownloadProgress,total:p?+p:void 0,loaded:x,partialText:P});E?E.run(k):k()}}}));let D=this.concatChunks(y,x);try{let L=s.headers.get("Content-Type")??"";h=this.parseBody(e,D,L)}catch(L){r.error(new pc({error:L,headers:new Ma(s.headers),status:s.status,statusText:s.statusText,url:QN(s)??e.urlWithParams}));return}}f===0&&(f=h?uF:0),f>=200&&f<300?(r.next(new Su({body:h,headers:a,status:f,statusText:l,url:u})),r.complete()):r.error(new pc({error:h,headers:a,status:f,statusText:l,url:u}))})}parseBody(e,i,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(i).replace(UZ,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>i[o]=s.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),X1=class{};function Z1(){}function BZ(n){n.then(Z1,Z1)}function dF(n,t){return t(n)}function zZ(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function HZ(n,t,e){return(i,r)=>ds(e,()=>t(i,o=>n(o,r)))}var K1=new _t(""),J1=new _t(""),fF=new _t(""),hF=new _t("",{providedIn:"root",factory:()=>!0});function jZ(){let n=null;return(t,e)=>{n===null&&(n=(ze(K1,{optional:!0})??[]).reduceRight(zZ,dF));let i=ze(sl);if(ze(hF)){let o=i.add();return n(t,e).pipe(Kl(()=>i.remove(o)))}else return n(t,e)}}var eF=(()=>{class n extends Ep{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=ze(sl),this.contributeToStability=ze(hF)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(J1),...this.injector.get(fF,[])]));this.chain=i.reduceRight((r,o)=>HZ(r,o,this.injector),dF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Kl(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(qe(Sp),qe(co))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();var WZ=/^\)\]\}',?\n/;function GZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var tF=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ct(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ci(i.\u0275loadImpl()):Rt(null)).pipe(ur(()=>new Jt(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((C,x)=>s.setRequestHeader(C,x.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let C=e.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(e.responseType){let C=e.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let C=s.statusText||"OK",x=new Ma(s.getAllResponseHeaders()),b=GZ(s)||e.url;return l=new iv({headers:x,status:s.status,statusText:C,url:b}),l},f=()=>{let{headers:C,status:x,statusText:b,url:P}=u(),E=null;x!==LZ&&(E=typeof s.response>"u"?s.responseText:s.response),x===0&&(x=E?uF:0);let D=x>=200&&x<300;if(e.responseType==="json"&&typeof E=="string"){let L=E;E=E.replace(WZ,"");try{E=E!==""?JSON.parse(E):null}catch(B){E=L,D&&(D=!1,E={error:B,text:E})}}D?(o.next(new Su({body:E,headers:C,status:x,statusText:b,url:P||void 0})),o.complete()):o.error(new pc({error:E,headers:C,status:x,statusText:b,url:P||void 0}))},h=C=>{let{url:x}=u(),b=new pc({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(b)},m=!1,p=C=>{m||(o.next(u()),m=!0);let x={type:mc.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),e.responseType==="text"&&s.responseText&&(x.partialText=s.responseText),o.next(x)},y=C=>{let x={type:mc.UploadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),o.next(x)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:mc.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(qe(nf))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),pF=new _t(""),$Z="XSRF-TOKEN",qZ=new _t("",{providedIn:"root",factory:()=>$Z}),YZ="X-XSRF-TOKEN",XZ=new _t("",{providedIn:"root",factory:()=>YZ}),rv=class{},ZZ=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Q_(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi),qe(Br),qe(qZ))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function KZ(n,t){let e=n.url.toLowerCase();if(!ze(pF)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=ze(rv).getToken(),r=ze(XZ);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Q1=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Q1||{});function mF(n,t){return{\u0275kind:n,\u0275providers:t}}function eE(...n){let t=[$n,tF,eF,{provide:Ep,useExisting:eF},{provide:Sp,useFactory:()=>ze(Y1,{optional:!0})??ze(tF)},{provide:J1,useValue:KZ,multi:!0},{provide:pF,useValue:!0},{provide:rv,useClass:ZZ}];for(let e of n)t.push(...e.\u0275providers);return lc(t)}var nF=new _t("");function JZ(){return mF(Q1.LegacyInterceptors,[{provide:nF,useFactory:jZ},{provide:J1,useExisting:nF,multi:!0}])}function gF(){return mF(Q1.Fetch,[Y1,{provide:Sp,useExisting:Y1}])}var _F=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({providers:[eE(JZ())]})}}return n})();var QZ=new _t(""),iF="b",rF="h",oF="s",sF="st",aF="u",lF="rt",nv=new _t(""),eK=["GET","HEAD"];function tK(n,t){let p=ze(nv),{isCacheActive:e}=p,i=zg(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!e||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!eK.includes(o)||!i.includeRequestsWithAuthHeaders&&nK(n)||i.filter?.(n)===!1)return t(n);let s=ze(Xd),a=ze(QZ,{optional:!0}),l=Mp(ze(Br));if(a&&!l)throw new Ct(2803,!1);let u=l&&a?sK(n.url,a):n.url,f=rK(n,u),h=s.get(f,null),m=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(m=r.includeHeaders),h){let{[iF]:y,[lF]:C,[rF]:x,[oF]:b,[sF]:P,[aF]:E}=h,D=y;switch(C){case"arraybuffer":D=new TextEncoder().encode(y).buffer;break;case"blob":D=new Blob([y]);break}let L=new Ma(x);return Rt(new Su({body:D,headers:L,status:b,statusText:P,url:E}))}return t(n).pipe(vi(y=>{y instanceof Su&&l&&s.set(f,{[iF]:y.body,[rF]:iK(y.headers,m),[oF]:y.status,[sF]:y.statusText,[aF]:u,[lF]:n.responseType})}))}function nK(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function iK(n,t){if(!t)return{};let e={};for(let i of t){let r=n.getAll(i);r!==null&&(e[i]=r)}return e}function cF(n){return[...n.keys()].sort().map(t=>`${t}=${n.getAll(t)}`).join("&")}function rK(n,t){let{params:e,method:i,responseType:r}=n,o=cF(e),s=n.serializeBody();s instanceof URLSearchParams?s=cF(s):typeof s!="string"&&(s="");let a=[i,r,t,s,o].join("|"),l=oK(a);return l}function oK(n){let t=0;for(let e of n)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function vF(n){return[{provide:nv,useFactory:()=>(ll("NgHttpTransferCache"),je({isCacheActive:!0},n))},{provide:fF,useValue:tK,multi:!0,deps:[Xd,nv]},{provide:wu,multi:!0,useFactory:()=>{let t=ze(ba),e=ze(nv);return()=>{B_(t).then(()=>{e.isCacheActive=!1})}}}]}function sK(n,t){let e=new URL(n,"resolve://").origin,i=t[e];return i?n.replace(e,i):n}var iE=class extends Z_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},rE=class n extends iE{static makeCurrent(){UN(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=aK();return e==null?null:lK(e)}resetBaseElement(){Pp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Q_(document.cookie,t)}},Pp=null;function aK(){return Pp=Pp||document.querySelector("base"),Pp?Pp.getAttribute("href"):null}function lK(n){return new URL(n,document.baseURI).pathname}var cK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),oE=new _t(""),CF=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new Ct(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(qe(oE),qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),ov=class{constructor(t){this._doc=t}},tE="ng-app-id",MF=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mp(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${tE}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(tE),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(tE,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi),qe(C_),qe(Zw,8),qe(Br))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),nE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lE=/%COMP%/g,wF="%COMP%",uK=`_nghost-${wF}`,dK=`_ngcontent-${wF}`,fK=!0,hK=new _t("",{providedIn:"root",factory:()=>fK});function pK(n){return dK.replace(lE,n)}function mK(n){return uK.replace(lE,n)}function EF(n,t){return t.map(e=>e.replace(lE,n))}var yF=(()=>{class n{constructor(e,i,r,o,s,a,l,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Mp(a),this.defaultRenderer=new Dp(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ma.ShadowDom&&(i=$t(je({},i),{encapsulation:ma.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof sv?r.applyToHost(e):r instanceof Op&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ma.Emulated:o=new sv(l,u,i,this.appId,f,s,a,h);break;case ma.ShadowDom:return new sE(l,u,e,i,s,a,this.nonce,h);default:o=new Op(l,u,i,f,s,a,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(qe(CF),qe(MF),qe(C_),qe(hK),qe(Zi),qe(Br),qe(Gn),qe(Zw))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),Dp=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(nE[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(xF(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(xF(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Ct(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=nE[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=nE[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(va.DashCase|va.Important)?t.style.setProperty(e,i,r&va.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&va.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=ml().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function xF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var sE=class extends Dp{constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=EF(r.id,r.styles);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Op=class extends Dp{constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?EF(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sv=class extends Op{constructor(t,e,i,r,o,s,a,l){let u=r+"-"+i.id;super(t,e,i,o,s,a,l,u),this.contentAttr=pK(u),this.hostAttr=mK(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},gK=(()=>{class n extends ov{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),bF=["alt","control","meta","shift"],_K={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},yK=(()=>{class n extends ov{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ml().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),bF.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=_K[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),bF.forEach(s=>{if(s!==r){let a=vK[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function SF(n,t){return PN(je({rootComponent:n},xK(t)))}function xK(n){return{appProviders:[...EK,...n?.providers??[]],platformProviders:wK}}function bK(){rE.makeCurrent()}function CK(){return new ol}function MK(){return GR(document),document}var wK=[{provide:Br,useValue:W1},{provide:Xw,useValue:bK,multi:!0},{provide:Zi,useFactory:MK,deps:[]}];var EK=[{provide:f_,useValue:"root"},{provide:ol,useFactory:CK,deps:[]},{provide:oE,useClass:gK,multi:!0,deps:[Zi,Gn,Br]},{provide:oE,useClass:yK,multi:!0,deps:[Zi]},yF,MF,CF,{provide:jd,useExisting:yF},{provide:nf,useClass:cK,deps:[]},[]];var TF=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aE=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(aE||{});function PF(...n){let t=[],e=new Set,i=e.has(aE.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of n)e.add(o),r.length&&t.push(r);return lc([[],DN(),e.has(aE.NoHttpTransferCache)||i?[]:vF({}),t])}var DF=(()=>{class n{constructor(){console.log("AuthInterceptor instantiated")}intercept(e,i){let o=["/login","/register","/delete-user","/activate-patient-user"].some(l=>e.url.includes(l)),s=e.headers.has("X-Skip-Interceptor");console.log("Request URL:",e.url),console.log("Is Non-Auth URL:",o),console.log("Skip Interceptor:",s);let a="";if(typeof window<"u"&&localStorage&&(a=localStorage.getItem("token")||"",console.log("Auth Token:",a)),a&&!o&&!s){let l=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return console.log("Auth Request Headers:",l.headers),i.handle(l)}return i.handle(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();var yn="primary",Gp=Symbol("RouteTitle"),hE=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function df(n){return new hE(n)}function TK(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function PK(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!wa(n[e],t[e]))return!1;return!0}function wa(n,t){let e=n?pE(n):void 0,i=t?pE(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!BF(n[r],t[r]))return!1;return!0}function pE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function BF(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function zF(n){return n.length>0?n[n.length-1]:null}function _c(n){return iM(n)?n:dc(n)?ci(Promise.resolve(n)):Rt(n)}var DK={exact:jF,subset:WF},HF={exact:OK,subset:AK,ignored:()=>!0};function OF(n,t,e){return DK[e.paths](n.root,t.root,e.matrixParams)&&HF[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function OK(n,t){return wa(n,t)}function jF(n,t,e){if(!Pu(n.segments,t.segments)||!cv(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!jF(n.children[i],t.children[i],e))return!1;return!0}function AK(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>BF(n[e],t[e]))}function WF(n,t,e){return GF(n,t,t.segments,e)}function GF(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Pu(r,e)||t.hasChildren()||!cv(r,e,i))}else if(n.segments.length===e.length){if(!Pu(n.segments,e)||!cv(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!WF(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Pu(n.segments,r)||!cv(n.segments,r,i)||!n.children[yn]?!1:GF(n.children[yn],t,o,i)}}function cv(n,t,e){return t.every((i,r)=>HF[e](n[r].parameters,i.parameters))}var yl=class{constructor(t=new ti([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=df(this.queryParams),this._queryParamMap}toString(){return kK.serialize(this)}},ti=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uv(this)}},Tu=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=df(this.parameters),this._parameterMap}toString(){return qF(this)}};function IK(n,t){return Pu(n,t)&&n.every((e,i)=>wa(e.parameters,t[i].parameters))}function Pu(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function RK(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===yn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==yn&&(e=e.concat(t(r,i)))}),e}var $p=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>new ff,providedIn:"root"})}}return n})(),ff=class{parse(t){let e=new gE(t);return new yl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ap(t.root,!0)}`,i=LK(t.queryParams),r=typeof t.fragment=="string"?`#${NK(t.fragment)}`:"";return`${e}${i}${r}`}},kK=new ff;function uv(n){return n.segments.map(t=>qF(t)).join("/")}function Ap(n,t){if(!n.hasChildren())return uv(n);if(t){let e=n.children[yn]?Ap(n.children[yn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==yn&&i.push(`${r}:${Ap(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=RK(n,(i,r)=>r===yn?[Ap(n.children[yn],!1)]:[`${r}:${Ap(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[yn]!=null?`${uv(n)}/${e[0]}`:`${uv(n)}/(${e.join("//")})`}}function $F(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function av(n){return $F(n).replace(/%3B/gi,";")}function NK(n){return encodeURI(n)}function mE(n){return $F(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function dv(n){return decodeURIComponent(n)}function AF(n){return dv(n.replace(/\+/g,"%20"))}function qF(n){return`${mE(n.path)}${FK(n.parameters)}`}function FK(n){return Object.entries(n).map(([t,e])=>`;${mE(t)}=${mE(e)}`).join("")}function LK(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${av(e)}=${av(r)}`).join("&"):`${av(e)}=${av(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var UK=/^[^\/()?;#]+/;function cE(n){let t=n.match(UK);return t?t[0]:""}var VK=/^[^\/()?;=#]+/;function BK(n){let t=n.match(VK);return t?t[0]:""}var zK=/^[^=?&#]+/;function HK(n){let t=n.match(zK);return t?t[0]:""}var jK=/^[^&#]+/;function WK(n){let t=n.match(jK);return t?t[0]:""}var gE=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ti([],{}):new ti([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[yn]=new ti(t,e)),i}parseSegment(){let t=cE(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ct(4009,!1);return this.capture(t),new Tu(dv(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=BK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=cE(this.remaining);r&&(i=r,this.capture(i))}t[dv(e)]=dv(i)}parseQueryParam(t){let e=HK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=WK(this.remaining);s&&(i=s,this.capture(i))}let r=AF(e),o=AF(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=cE(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ct(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=yn);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[yn]:new ti([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ct(4011,!1)}};function YF(n){return n.segments.length>0?new ti([],{[yn]:n}):n}function XF(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=XF(r);if(i===yn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new ti(n.segments,t);return GK(e)}function GK(n){if(n.numberOfChildren===1&&n.children[yn]){let t=n.children[yn];return new ti(n.segments.concat(t.segments),t.children)}return n}function Du(n){return n instanceof yl}function $K(n,t,e=null,i=null){let r=ZF(n);return KF(r,t,e,i)}function ZF(n){let t;function e(o){let s={};for(let l of o.children){let u=e(l);s[l.outlet]=u}let a=new ti(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=YF(i);return t??r}function KF(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return uE(r,r,r,e,i);let o=qK(t);if(o.toRoot())return uE(r,r,new ti([],{}),e,i);let s=YK(o,r,n),a=s.processChildren?kp(s.segmentGroup,s.index,o.commands):QF(s.segmentGroup,s.index,o.commands);return uE(r,s.segmentGroup,a,e,i)}function fv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Lp(n){return typeof n=="object"&&n!=null&&n.outlets}function uE(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===t?s=e:s=JF(n,t,e);let a=YF(XF(s));return new yl(a,o,r)}function JF(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=JF(o,t,e)}),new ti(n.segments,i)}var hv=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&fv(i[0]))throw new Ct(4003,!1);let r=i.find(Lp);if(r&&r!==zF(i))throw new Ct(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hv(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new hv(e,t,i)}var lf=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function YK(n,t,e){if(n.isAbsolute)return new lf(t,!0,0);if(!e)return new lf(t,!1,NaN);if(e.parent===null)return new lf(e,!0,0);let i=fv(n.commands[0])?0:1,r=e.segments.length-1+i;return XK(e,r,n.numberOfDoubleDots)}function XK(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ct(4005,!1);r=i.segments.length}return new lf(i,!1,r-o)}function ZK(n){return Lp(n[0])?n[0].outlets:{[yn]:n}}function QF(n,t,e){if(n??=new ti([],{}),n.segments.length===0&&n.hasChildren())return kp(n,t,e);let i=KK(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new ti(n.segments.slice(0,i.pathIndex),{});return o.children[yn]=new ti(n.segments.slice(i.pathIndex),n.children),kp(o,0,r)}else return i.match&&r.length===0?new ti(n.segments,{}):i.match&&!n.hasChildren()?_E(n,t,e):i.match?kp(n,0,r):_E(n,t,e)}function kp(n,t,e){if(e.length===0)return new ti(n.segments,{});{let i=ZK(e),r={};if(Object.keys(i).some(o=>o!==yn)&&n.children[yn]&&n.numberOfChildren===1&&n.children[yn].segments.length===0){let o=kp(n.children[yn],t,e);return new ti(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=QF(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new ti(n.segments,r)}}function KK(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(Lp(a))break;let l=`${a}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!RF(l,u,s))return o;i+=2}else{if(!RF(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function _E(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Lp(o)){let l=JK(o.outlets);return new ti(i,l)}if(r===0&&fv(e[0])){let l=n.segments[t];i.push(new Tu(l.path,IF(e[0]))),r++;continue}let s=Lp(o)?o.outlets[yn]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&fv(a)?(i.push(new Tu(s,IF(a))),r+=2):(i.push(new Tu(s,{})),r++)}return new ti(i,{})}function JK(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=_E(new ti([],{}),0,i))}),t}function IF(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function RF(n,t,e){return n==e.path&&wa(t,e.parameters)}var Np="imperative",Mr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Mr||{}),gs=class{constructor(t,e){this.id=t,this.url=e}},hf=class extends gs{constructor(t,e,i="imperative",r=null){super(t,e),this.type=Mr.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Js=class extends gs{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=Mr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$o=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($o||{}),pv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(pv||{}),vl=class extends gs{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Mr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gc=class extends gs{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Mr.NavigationSkipped}},Up=class extends gs{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=Mr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mv=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Mr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vE=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Mr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yE=class extends gs{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Mr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xE=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Mr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bE=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Mr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},CE=class{constructor(t){this.route=t,this.type=Mr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ME=class{constructor(t){this.route=t,this.type=Mr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wE=class{constructor(t){this.snapshot=t,this.type=Mr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},EE=class{constructor(t){this.snapshot=t,this.type=Mr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},SE=class{constructor(t){this.snapshot=t,this.type=Mr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},TE=class{constructor(t){this.snapshot=t,this.type=Mr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gv=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=Mr.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Vp=class{},pf=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function QK(n,t){return n.providers&&!n._injector&&(n._injector=N_(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Ks(n){return n.outlet||yn}function eJ(n,t){let e=n.filter(i=>Ks(i)===t);return e.push(...n.filter(i=>Ks(i)!==t)),e}function qp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var PE=class{get injector(){return qp(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Yp(this.rootInjector),this.attachRef=null}},Yp=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new PE(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(qe(co))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_v=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=DE(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=DE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=OE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return OE(t,this._root).map(e=>e.value)}};function DE(n,t){if(n===t.value)return t;for(let e of t.children){let i=DE(n,e);if(i)return i}return null}function OE(n,t){if(n===t.value)return[t];for(let e of t.children){let i=OE(n,e);if(i.length)return i.unshift(t),i}return[]}var Go=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function af(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var vv=class extends _v{constructor(t,e){super(t),this.snapshot=e,VE(this,t)}toString(){return this.snapshot.toString()}};function e3(n){let t=tJ(n),e=new Si([new Tu("",{})]),i=new Si({}),r=new Si({}),o=new Si({}),s=new Si(""),a=new tr(e,i,o,s,r,yn,n,t.root);return a.snapshot=t.root,new vv(new Go(a,[]),t)}function tJ(n){let t={},e={},i={},r="",o=new cf([],t,i,r,e,yn,n,null,{});return new xv("",new Go(o,[]))}var tr=class{constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Pt(u=>u[Gp]))??Rt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pt(t=>df(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pt(t=>df(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yv(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:je(je({},t.params),n.params),data:je(je({},t.data),n.data),resolve:je(je(je(je({},n.data),t.data),r?.data),n._resolvedData)}:i={params:je({},n.params),data:je({},n.data),resolve:je(je({},n.data),n._resolvedData??{})},r&&n3(r)&&(i.resolve[Gp]=r.title),i}var cf=class{get title(){return this.data?.[Gp]}constructor(t,e,i,r,o,s,a,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=df(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=df(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},xv=class extends _v{constructor(t,e){super(e),this.url=t,VE(this,e)}toString(){return t3(this._root)}};function VE(n,t){t.value._routerState=n,t.children.forEach(e=>VE(n,e))}function t3(n){let t=n.children.length>0?` { ${n.children.map(t3).join(", ")} } `:"";return`${n.value}${t}`}function dE(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,wa(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),wa(t.params,e.params)||n.paramsSubject.next(e.params),PK(t.url,e.url)||n.urlSubject.next(e.url),wa(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function AE(n,t){let e=wa(n.params,t.params)&&IK(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||AE(n.parent,t.parent))}function n3(n){return typeof n.title=="string"||n.title===null}var BE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=yn,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=ze(Yp),this.location=ze(Ho),this.changeDetector=ze(Xs),this.inputBinder=ze(wv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ct(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ct(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ct(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Ct(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new IE(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Cr]})}}return n})(),IE=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===tr?this.route:t===Yp?this.childContexts:this.parent.get(t,e)}},wv=new _t(""),kF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=ru([i.queryParams,i.params,i.data]).pipe(ur(([o,s,a],l)=>(a=je(je(je({},o),s),a),l===0?Rt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=ON(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function nJ(n,t,e){let i=Bp(n,t._root,e?e._root:void 0);return new vv(i,t)}function Bp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=iJ(n,t,e);return new Go(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Bp(n,a)),s}}let i=rJ(t.value),r=t.children.map(o=>Bp(n,o));return new Go(i,r)}}function iJ(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Bp(n,i,r);return Bp(n,i)})}function rJ(n){return new tr(new Si(n.url),new Si(n.params),new Si(n.queryParams),new Si(n.fragment),new Si(n.data),n.outlet,n.component,n)}var zp=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},i3="ngNavigationCancelingError";function bv(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Du(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=r3(!1,$o.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function r3(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[i3]=!0,e.cancellationCode=t,e}function oJ(n){return o3(n)&&Du(n.url)}function o3(n){return!!n&&n[i3]}var sJ=(n,t,e,i)=>Pt(r=>(new RE(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),RE=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),dE(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=af(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=af(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=af(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=af(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new TE(o.value.snapshot))}),t.children.length&&this.forwardEvent(new EE(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(dE(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),dE(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},Cv=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},uf=class{constructor(t,e){this.component=t,this.route=e}};function aJ(n,t,e){let i=n._root,r=t?t._root:null;return Ip(i,r,e,[i.value])}function lJ(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function gf(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!O2(n)?n:t.get(n):i}function Ip(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=af(t);return n.children.forEach(s=>{cJ(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Fp(a,e.getContext(s),r)),r}function cJ(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=uJ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Cv(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ip(n,t,a?a.children:null,i,r):Ip(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new uf(a.outlet.component,s))}else s&&Fp(t,a,r),r.canActivateChecks.push(new Cv(i)),o.component?Ip(n,null,a?a.children:null,i,r):Ip(n,null,e,i,r);return r}function uJ(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Pu(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Pu(n.url,t.url)||!wa(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!AE(n,t)||!wa(n.queryParams,t.queryParams);case"paramsChange":default:return!AE(n,t)}}function Fp(n,t,e){let i=af(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?Fp(s,t.children.getContext(o),e):Fp(s,null,e):Fp(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new uf(t.outlet.component,r)):e.canDeactivateChecks.push(new uf(null,r)):e.canDeactivateChecks.push(new uf(null,r))}function Xp(n){return typeof n=="function"}function dJ(n){return typeof n=="boolean"}function fJ(n){return n&&Xp(n.canLoad)}function hJ(n){return n&&Xp(n.canActivate)}function pJ(n){return n&&Xp(n.canActivateChild)}function mJ(n){return n&&Xp(n.canDeactivate)}function gJ(n){return n&&Xp(n.canMatch)}function s3(n){return n instanceof el||n?.name==="EmptyError"}var lv=Symbol("INITIAL_VALUE");function mf(){return ur(n=>ru(n.map(t=>t.pipe(Ur(1),ou(lv)))).pipe(Pt(t=>{for(let e of t)if(e!==!0){if(e===lv)return lv;if(e===!1||_J(e))return e}return!0}),_i(t=>t!==lv),Ur(1)))}function _J(n){return Du(n)||n instanceof zp}function vJ(n,t){return gi(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Rt($t(je({},e),{guardsResult:!0})):yJ(s,i,r,n).pipe(gi(a=>a&&dJ(a)?xJ(i,o,n,t):Rt(a)),Pt(a=>$t(je({},e),{guardsResult:a})))})}function yJ(n,t,e,i){return ci(n).pipe(gi(r=>EJ(r.component,r.route,e,t,i)),Vs(r=>r!==!0,!0))}function xJ(n,t,e,i){return ci(t).pipe(tl(r=>Dd(CJ(r.route.parent,i),bJ(r.route,i),wJ(n,r.path,e),MJ(n,r.route,e))),Vs(r=>r!==!0,!0))}function bJ(n,t){return n!==null&&t&&t(new SE(n)),Rt(!0)}function CJ(n,t){return n!==null&&t&&t(new wE(n)),Rt(!0)}function MJ(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Rt(!0);let r=i.map(o=>_0(()=>{let s=qp(t)??e,a=gf(o,s),l=hJ(a)?a.canActivate(t,n):ds(s,()=>a(t,n));return _c(l).pipe(Vs())}));return Rt(r).pipe(mf())}function wJ(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>lJ(s)).filter(s=>s!==null).map(s=>_0(()=>{let a=s.guards.map(l=>{let u=qp(s.node)??e,f=gf(l,u),h=pJ(f)?f.canActivateChild(i,n):ds(u,()=>f(i,n));return _c(h).pipe(Vs())});return Rt(a).pipe(mf())}));return Rt(o).pipe(mf())}function EJ(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Rt(!0);let s=o.map(a=>{let l=qp(t)??r,u=gf(a,l),f=mJ(u)?u.canDeactivate(n,t,e,i):ds(l,()=>u(n,t,e,i));return _c(f).pipe(Vs())});return Rt(s).pipe(mf())}function SJ(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Rt(!0);let o=r.map(s=>{let a=gf(s,n),l=fJ(a)?a.canLoad(t,e):ds(n,()=>a(t,e));return _c(l)});return Rt(o).pipe(mf(),a3(i))}function a3(n){return KC(vi(t=>{if(typeof t!="boolean")throw bv(n,t)}),Pt(t=>t===!0))}function TJ(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Rt(!0);let o=r.map(s=>{let a=gf(s,n),l=gJ(a)?a.canMatch(t,e):ds(n,()=>a(t,e));return _c(l)});return Rt(o).pipe(mf(),a3(i))}var Hp=class{constructor(t){this.segmentGroup=t||null}},jp=class extends Error{constructor(t){super(),this.urlTree=t}};function sf(n){return In(new Hp(n))}function PJ(n){return In(new Ct(4e3,!1))}function DJ(n){return In(r3(!1,$o.GuardRejected))}var kE=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Rt(i);if(r.numberOfChildren>1||!r.children[yn])return PJ(`${t.redirectTo}`);r=r.children[yn]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:m,params:p,data:y,title:C}=r,x=ds(o,()=>a({params:p,data:y,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:m,title:C}));if(x instanceof yl)throw new jp(x);e=x}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new jp(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new yl(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new ti(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Ct(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},NE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OJ(n,t,e,i,r){let o=l3(n,t,e);return o.matched?(i=QK(t,i),TJ(i,t,e,r).pipe(Pt(s=>s===!0?o:je({},NE)))):Rt(o)}function l3(n,t,e){if(t.path==="**")return AJ(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?je({},NE):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||TK)(e,n,t);if(!r)return je({},NE);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?je(je({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function AJ(n){return{matched:!0,parameters:n.length>0?zF(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function NF(n,t,e,i){return e.length>0&&kJ(n,e,i)?{segmentGroup:new ti(t,RJ(i,new ti(e,n.children))),slicedSegments:[]}:e.length===0&&NJ(n,e,i)?{segmentGroup:new ti(n.segments,IJ(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new ti(n.segments,n.children),slicedSegments:e}}function IJ(n,t,e,i){let r={};for(let o of e)if(Ev(n,t,o)&&!i[Ks(o)]){let s=new ti([],{});r[Ks(o)]=s}return je(je({},i),r)}function RJ(n,t){let e={};e[yn]=t;for(let i of n)if(i.path===""&&Ks(i)!==yn){let r=new ti([],{});e[Ks(i)]=r}return e}function kJ(n,t,e){return e.some(i=>Ev(n,t,i)&&Ks(i)!==yn)}function NJ(n,t,e){return e.some(i=>Ev(n,t,i))}function Ev(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function FJ(n,t,e){return t.length===0&&!n.children[e]}var FE=class{};function LJ(n,t,e,i,r,o,s="emptyOnly"){return new LE(n,t,e,i,r,s,o).recognize()}var UJ=31,LE=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new kE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ct(4002,`'${t.segmentGroup}'`)}recognize(){let t=NF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Pt(({children:e,rootSnapshot:i})=>{let r=new Go(i,e),o=new xv("",r),s=$K(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new cf([],Object.freeze({}),Object.freeze(je({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),yn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,yn,e).pipe(Pt(i=>({children:i,rootSnapshot:e})),_n(i=>{if(i instanceof jp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Hp?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(Pt(s=>s instanceof Go?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ci(o).pipe(tl(s=>{let a=i.children[s],l=eJ(e,s);return this.processSegmentGroup(t,l,a,s,r)}),uM((s,a)=>(s.push(...a),s)),Zl(null),cM(),gi(s=>{if(s===null)return sf(i);let a=c3(s);return VJ(a),Rt(a)}))}processSegment(t,e,i,r,o,s,a){return ci(e).pipe(tl(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,o,s,a).pipe(_n(u=>{if(u instanceof Hp)return Rt(null);throw u}))),Vs(l=>!!l),_n(l=>{if(s3(l))return FJ(i,r,o)?Rt(new FE):sf(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,l){return Ks(i)!==s&&(s===yn||!Ev(r,o,i))?sf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,l):sf(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:m}=l3(e,r,o);if(!l)return sf(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>UJ&&(this.allowRedirects=!1));let p=new cf(o,u,Object.freeze(je({},this.urlTree.queryParams)),this.urlTree.fragment,FF(r),Ks(r),r.component??r._loadedComponent??null,r,LF(r)),y=yv(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let C=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,p,t);return this.applyRedirects.lineralizeSegments(r,C).pipe(gi(x=>this.processSegment(t,i,e,x.concat(m),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=OJ(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(ur(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ur(({routes:u})=>{let f=i._loadedInjector??t,{parameters:h,consumedSegments:m,remainingSegments:p}=l,y=new cf(m,h,Object.freeze(je({},this.urlTree.queryParams)),this.urlTree.fragment,FF(i),Ks(i),i.component??i._loadedComponent??null,i,LF(i)),C=yv(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let{segmentGroup:x,slicedSegments:b}=NF(e,m,p,u);if(b.length===0&&x.hasChildren())return this.processChildren(f,u,x,y).pipe(Pt(E=>new Go(y,E)));if(u.length===0&&b.length===0)return Rt(new Go(y,[]));let P=Ks(i)===o;return this.processSegment(f,u,x,b,P?yn:o,!0,y).pipe(Pt(E=>new Go(y,E instanceof Go?[E]:[])))}))):sf(e)))}getChildConfig(t,e,i){return e.children?Rt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Rt({routes:e._loadedRoutes,injector:e._loadedInjector}):SJ(t,e,i,this.urlSerializer).pipe(gi(r=>r?this.configLoader.loadChildren(t,e).pipe(vi(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):DJ(e))):Rt({routes:[],injector:t})}};function VJ(n){n.sort((t,e)=>t.value.outlet===yn?-1:e.value.outlet===yn?1:t.value.outlet.localeCompare(e.value.outlet))}function BJ(n){let t=n.value.routeConfig;return t&&t.path===""}function c3(n){let t=[],e=new Set;for(let i of n){if(!BJ(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=c3(i.children);t.push(new Go(i.value,r))}return t.filter(i=>!e.has(i))}function FF(n){return n.data||{}}function LF(n){return n.resolve||{}}function zJ(n,t,e,i,r,o){return gi(s=>LJ(n,t,e,i,s.extractedUrl,r,o).pipe(Pt(({state:a,tree:l})=>$t(je({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function HJ(n,t){return gi(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Rt(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of u3(l))s.add(u);let a=0;return ci(s).pipe(tl(l=>o.has(l)?jJ(l,i,n,t):(l.data=yv(l,l.parent,n).resolve,Rt(void 0))),vi(()=>a++),Jl(1),gi(l=>a===s.size?Rt(e):so))})}function u3(n){let t=n.children.map(e=>u3(e)).flat();return[n,...t]}function jJ(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!n3(r)&&(o[Gp]=r.title),WJ(o,n,t,i).pipe(Pt(s=>(n._resolvedData=s,n.data=yv(n,n.parent,e).resolve,null)))}function WJ(n,t,e,i){let r=pE(n);if(r.length===0)return Rt({});let o={};return ci(r).pipe(gi(s=>GJ(n[s],t,e,i).pipe(Vs(),vi(a=>{if(a instanceof zp)throw bv(new ff,a);o[s]=a}))),Jl(1),aM(o),_n(s=>s3(s)?so:In(s)))}function GJ(n,t,e,i){let r=qp(t)??i,o=gf(n,r),s=o.resolve?o.resolve(t,e):ds(r,()=>o(t,e));return _c(s)}function fE(n){return ur(t=>{let e=n(t);return e?ci(e).pipe(Pt(()=>t)):Rt(t)})}var d3=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===yn);return i}getResolvedTitleForRoute(e){return e.data[Gp]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze($J),providedIn:"root"})}}return n})(),$J=(()=>{class n extends d3{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(qe(TF))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zp=new _t("",{providedIn:"root",factory:()=>({})}),qJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["ng-component"]],standalone:!0,features:[Je],decls:1,vars:0,template:function(i,r){i&1&&me(0,"router-outlet")},dependencies:[BE],encapsulation:2})}}return n})();function zE(n){let t=n.children&&n.children.map(zE),e=t?$t(je({},n),{children:t}):je({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==yn&&(e.component=qJ),e}var Wp=new _t(""),HE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ze(z_)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Rt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=_c(e.loadComponent()).pipe(Pt(f3),vi(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Kl(()=>{this.componentLoaders.delete(e)})),r=new Ed(i,()=>new On).pipe(wd());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Rt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=YJ(i,this.compiler,e,this.onLoadEndListener).pipe(Kl(()=>{this.childrenLoaders.delete(i)})),s=new Ed(o,()=>new On).pipe(wd());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YJ(n,t,e,i){return _c(n.loadChildren()).pipe(Pt(f3),gi(r=>r instanceof cp||Array.isArray(r)?Rt(r):ci(t.compileModuleAsync(r))),Pt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Wp,[],{optional:!0,self:!0}).flat()),{routes:s.map(zE),injector:o}}))}function XJ(n){return n&&typeof n=="object"&&"default"in n}function f3(n){return XJ(n)?n.default:n}var jE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(ZJ),providedIn:"root"})}}return n})(),ZJ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),h3=new _t(""),p3=new _t("");function KJ(n,t,e){let i=n.get(p3),r=n.get(Zi);return n.get(Gn).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=r.startViewTransition(()=>(o(),JJ(n))),{onViewTransitionCreated:l}=i;return l&&ds(n,()=>l({transition:a,from:t,to:e})),s})}function JJ(n){return new Promise(t=>{x1({read:()=>setTimeout(t)},{injector:n})})}var QJ=new _t(""),WE=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new On,this.transitionAbortSubject=new On,this.configLoader=ze(HE),this.environmentInjector=ze(co),this.urlSerializer=ze($p),this.rootContexts=ze(Yp),this.location=ze(rf),this.inputBindingEnabled=ze(wv,{optional:!0})!==null,this.titleStrategy=ze(d3),this.options=ze(Zp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ze(jE),this.createViewTransition=ze(h3,{optional:!0}),this.navigationErrorHandler=ze(QJ,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Rt(void 0),this.rootComponentType=null;let e=r=>this.events.next(new CE(r)),i=r=>this.events.next(new ME(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next($t(je(je({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Si({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Np,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_i(o=>o.id!==0),Pt(o=>$t(je({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ur(o=>{let s=!1,a=!1;return Rt(o).pipe(ur(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$o.SupersededByNewNavigation),so;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?$t(je({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&f!=="reload"){let h="";return this.events.next(new gc(l.id,this.urlSerializer.serialize(l.rawUrl),h,pv.IgnoredSameUrlNavigation)),l.resolve(!1),so}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Rt(l).pipe(ur(h=>{let m=this.transitions?.getValue();return this.events.next(new hf(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?so:Promise.resolve(h)}),zJ(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),vi(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=$t(je({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new mv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:m,source:p,restoredState:y,extras:C}=l,x=new hf(h,this.urlSerializer.serialize(m),p,y);this.events.next(x);let b=e3(this.rootComponentType).snapshot;return this.currentTransition=o=$t(je({},l),{targetSnapshot:b,urlAfterRedirects:m,extras:$t(je({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Rt(o)}else{let h="";return this.events.next(new gc(l.id,this.urlSerializer.serialize(l.extractedUrl),h,pv.IgnoredByUrlHandlingStrategy)),l.resolve(!1),so}}),vi(l=>{let u=new vE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Pt(l=>(this.currentTransition=o=$t(je({},l),{guards:aJ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),vJ(this.environmentInjector,l=>this.events.next(l)),vi(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw bv(this.urlSerializer,l.guardsResult);let u=new yE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),_i(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$o.GuardRejected),!1)),fE(l=>{if(l.guards.canActivateChecks.length)return Rt(l).pipe(vi(u=>{let f=new xE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),ur(u=>{let f=!1;return Rt(u).pipe(HJ(this.paramsInheritanceStrategy,this.environmentInjector),vi({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",$o.NoDataFromResolver)}}))}),vi(u=>{let f=new bE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),fE(l=>{let u=f=>{let h=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(f.routeConfig).pipe(vi(m=>{f.component=m}),Pt(()=>{})));for(let m of f.children)h.push(...u(m));return h};return ru(u(l.targetSnapshot.root)).pipe(Zl(null),Ur(1))}),fE(()=>this.afterPreactivation()),ur(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?ci(f).pipe(Pt(()=>o)):Rt(o)}),Pt(l=>{let u=nJ(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=$t(je({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),vi(()=>{this.events.next(new Vp)}),sJ(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ur(1),vi({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Js(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Co(this.transitionAbortSubject.pipe(vi(l=>{throw l}))),Kl(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",$o.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_n(l=>{if(a=!0,o3(l))this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),oJ(l)?this.events.next(new pf(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Up(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=ds(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(f instanceof zp){let{message:h,cancellationCode:m}=bv(this.urlSerializer,f);this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),h,m)),this.events.next(new pf(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(u);let h=e.errorHandler(l);o.resolve(!!h)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return so}))}))}cancelNavigationTransition(e,i,r){let o=new vl(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eQ(n){return n!==Np}var tQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(nQ),providedIn:"root"})}}return n})(),UE=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},nQ=(()=>{class n extends UE{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),m3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(iQ),providedIn:"root"})}}return n})(),iQ=(()=>{class n extends m3{constructor(){super(...arguments),this.location=ze(rf),this.urlSerializer=ze($p),this.options=ze(Zp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ze(jE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=e3(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof hf)this.stateMemento=this.createStateMemento();else if(e instanceof gc)this.rawUrlTree=i.initialUrl;else if(e instanceof mv){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof Vp?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof vl&&(e.code===$o.GuardRejected||e.code===$o.NoDataFromResolver)?this.restoreHistory(i):e instanceof Up?this.restoreHistory(i,!0):e instanceof Js&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof yl?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=je(je({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=je(je({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Rp||{});function g3(n,t){n.events.pipe(_i(e=>e instanceof Js||e instanceof vl||e instanceof Up||e instanceof gc),Pt(e=>e instanceof Js||e instanceof gc?Rp.COMPLETE:(e instanceof vl?e.code===$o.Redirect||e.code===$o.SupersededByNewNavigation:!1)?Rp.REDIRECTING:Rp.FAILED),_i(e=>e!==Rp.REDIRECTING),Ur(1)).subscribe(()=>{t()})}function rQ(n){throw n}var oQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=ze(U_),this.stateManager=ze(m3),this.options=ze(Zp,{optional:!0})||{},this.pendingTasks=ze(sl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ze(WE),this.urlSerializer=ze($p),this.location=ze(rf),this.urlHandlingStrategy=ze(jE),this._events=new On,this.errorHandler=this.options.errorHandler||rQ,this.navigated=!1,this.routeReuseStrategy=ze(tQ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ze(Wp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ze(wv,{optional:!0}),this.eventsSubscription=new Vi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vl&&i.code!==$o.Redirect&&i.code!==$o.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Js)this.navigated=!0;else if(i instanceof pf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=je({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||eQ(r.source)},s);this.scheduleNavigation(a,Np,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}lQ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Np,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=je({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(zE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=je(je({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let m=r?r.snapshot:this.routerState.snapshot.root;h=ZF(m)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return KF(h,e,f,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Du(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Np,null,i)}navigate(e,i={skipLocationChange:!1}){return aQ(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=je({},oQ):i===!1?r=je({},sQ):r=i,Du(e))return OF(this.currentUrlTree,e,r);let o=this.parseUrl(e);return OF(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,m)=>{a=h,l=m});let f=this.pendingTasks.add();return g3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aQ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Ct(4008,!1)}function lQ(n){return!(n instanceof Vp)&&!(n instanceof pf)}var Wt=(()=>{class n{constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new On,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof Js&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Du(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:lk(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Du(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(tr),Gw("tabindex"),$(Ai),$(ui),$(gl))}}static{this.\u0275dir=en({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&le("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Xi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fc],replaceUrl:[2,"replaceUrl","replaceUrl",fc],routerLink:"routerLink"},standalone:!0,features:[v1,Cr]})}}return n})(),Ea=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,o,s){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new yt,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Js&&this.update()})}ngAfterContentInit(){Rt(this.links.changes,Rt(null)).pipe(fa()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ci(e).pipe(fa()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=cQ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(ui),$(Ai),$(Xs),$(Wt,8))}}static{this.\u0275dir=en({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&uN(o,Wt,5),i&2){let s;dN(s=fN())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Cr]})}}return n})();function cQ(n){return!!n.paths}var Mv=class{};var uQ=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(_i(e=>e instanceof Js),tl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=N_(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ci(r).pipe(fa())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Rt(null);let o=r.pipe(gi(s=>s===null?Rt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return ci([o,s]).pipe(fa())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(qe(Mt),qe(z_),qe(co),qe(Mv),qe(HE))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_3=new _t(""),dQ=(()=>{class n{constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof hf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Js?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof gc&&e.code===pv.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof gv&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gv(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Ck()}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function v3(n,...t){return lc([{provide:Wp,multi:!0,useValue:n},[],{provide:tr,useFactory:y3,deps:[Mt]},{provide:wu,multi:!0,useFactory:x3},t.map(e=>e.\u0275providers)])}function y3(n){return n.routerState.root}function Kp(n,t){return{\u0275kind:n,\u0275providers:t}}function x3(){let n=ze(Eo);return t=>{let e=n.get(ba);if(t!==e.components[0])return;let i=n.get(Mt),r=n.get(b3);n.get(GE)===1&&i.initialNavigation(),n.get(C3,null,Sn.Optional)?.setUpPreloading(),n.get(_3,null,Sn.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var b3=new _t("",{factory:()=>new On}),GE=new _t("",{providedIn:"root",factory:()=>1});function fQ(){return Kp(2,[{provide:GE,useValue:0},{provide:V_,multi:!0,deps:[Eo],useFactory:t=>{let e=t.get(VN,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Mt),o=t.get(b3);g3(r,()=>{i(!0)}),t.get(WE).afterPreactivation=()=>(i(!0),o.closed?Rt(void 0):o),r.initialNavigation()}))}}])}function hQ(){return Kp(3,[{provide:V_,multi:!0,useFactory:()=>{let t=ze(Mt);return()=>{t.setUpLocationChangeListener()}}},{provide:GE,useValue:2}])}var C3=new _t("");function pQ(n){return Kp(0,[{provide:C3,useExisting:uQ},{provide:Mv,useExisting:n}])}function mQ(){return Kp(8,[kF,{provide:wv,useExisting:kF}])}function gQ(n){let t=[{provide:h3,useValue:KJ},{provide:p3,useValue:je({skipNextTransition:!!n?.skipInitialTransition},n)}];return Kp(9,t)}var UF=new _t("ROUTER_FORROOT_GUARD"),_Q=[rf,{provide:$p,useClass:ff},Mt,Yp,{provide:tr,useFactory:y3,deps:[Mt]},HE,[]],Nt=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[_Q,[],{provide:Wp,multi:!0,useValue:e},{provide:UF,useFactory:bQ,deps:[[Mt,new fp,new d_]]},{provide:Zp,useValue:i||{}},i?.useHash?yQ():xQ(),vQ(),i?.preloadingStrategy?pQ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?CQ(i):[],i?.bindToComponentInputs?mQ().\u0275providers:[],i?.enableViewTransitions?gQ().\u0275providers:[],MQ()]}}static forChild(e){return{ngModule:n,providers:[{provide:Wp,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(qe(UF,8))}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})();function vQ(){return{provide:_3,useFactory:()=>{let n=ze(YN),t=ze(Gn),e=ze(Zp),i=ze(WE),r=ze($p);return e.scrollOffset&&n.setOffset(e.scrollOffset),new dQ(r,i,n,t,e)}}}function yQ(){return{provide:gl,useClass:zN}}function xQ(){return{provide:gl,useClass:H1}}function bQ(n){return"guarded"}function CQ(n){return[n.initialNavigation==="disabled"?hQ().\u0275providers:[],n.initialNavigation==="enabledBlocking"?fQ().\u0275providers:[]]}var VF=new _t("");function MQ(){return[{provide:VF,useFactory:x3},{provide:wu,multi:!0,useExisting:VF}]}var I3=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)($(Ai),$(ui))}}static{this.\u0275dir=en({type:n})}}return n})(),Nv=(()=>{class n extends I3{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,features:[Yi]})}}return n})(),xf=new _t(""),wQ={provide:xf,useExisting:br(()=>im),multi:!0},im=(()=>{class n extends Nv{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&le("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[zi([wQ]),Yi]})}}return n})(),EQ={provide:xf,useExisting:br(()=>kt),multi:!0};function SQ(){let n=ml()?ml().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var TQ=new _t(""),kt=(()=>{class n extends I3{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!SQ())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)($(Ai),$(ui),$(TQ,8))}}static{this.\u0275dir=en({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&le("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[zi([EQ]),Yi]})}}return n})();function vc(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function R3(n){return n!=null&&typeof n.length=="number"}var Qs=new _t(""),bf=new _t(""),PQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gt=class{static min(t){return DQ(t)}static max(t){return OQ(t)}static required(t){return k3(t)}static requiredTrue(t){return N3(t)}static email(t){return AQ(t)}static minLength(t){return F3(t)}static maxLength(t){return L3(t)}static pattern(t){return U3(t)}static nullValidator(t){return Tv(t)}static compose(t){return W3(t)}static composeAsync(t){return G3(t)}};function DQ(n){return t=>{if(vc(t.value)||vc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function OQ(n){return t=>{if(vc(t.value)||vc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function k3(n){return vc(n.value)?{required:!0}:null}function N3(n){return n.value===!0?null:{required:!0}}function AQ(n){return vc(n.value)||PQ.test(n.value)?null:{email:!0}}function F3(n){return t=>vc(t.value)||!R3(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function L3(n){return t=>R3(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function U3(n){if(!n)return Tv;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(vc(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Tv(n){return null}function V3(n){return n!=null}function B3(n){return dc(n)?ci(n):n}function z3(n){let t={};return n.forEach(e=>{t=e!=null?je(je({},t),e):t}),Object.keys(t).length===0?null:t}function H3(n,t){return t.map(e=>e(n))}function IQ(n){return!n.validate}function j3(n){return n.map(t=>IQ(t)?t:e=>t.validate(e))}function W3(n){if(!n)return null;let t=n.filter(V3);return t.length==0?null:function(e){return z3(H3(e,t))}}function KE(n){return n!=null?W3(j3(n)):null}function G3(n){if(!n)return null;let t=n.filter(V3);return t.length==0?null:function(e){let i=H3(e,t).map(B3);return rM(i).pipe(Pt(z3))}}function JE(n){return n!=null?G3(j3(n)):null}function M3(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function $3(n){return n._rawValidators}function q3(n){return n._rawAsyncValidators}function $E(n){return n?Array.isArray(n)?n:[n]:[]}function Pv(n,t){return Array.isArray(n)?n.includes(t):n===t}function w3(n,t){let e=$E(t);return $E(n).forEach(r=>{Pv(e,r)||e.push(r)}),e}function E3(n,t){return $E(t).filter(e=>!Pv(n,e))}var Dv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=KE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=JE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},fo=class extends Dv{get formDirective(){return null}get path(){return null}},Ou=class extends Dv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ov=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},RQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},kye=$t(je({},RQ),{"[class.ng-submitted]":"isSubmitted"}),Ft=(()=>{class n extends Ov{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)($(Ou,2))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&So("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Yi]})}}return n})(),qt=(()=>{class n extends Ov{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)($(fo,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&So("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Yi]})}}return n})();var Jp="VALID",Sv="INVALID",_f="PENDING",Qp="DISABLED",yc=class{},Av=class extends yc{constructor(t,e){super(),this.value=t,this.source=e}},tm=class extends yc{constructor(t,e){super(),this.pristine=t,this.source=e}},nm=class extends yc{constructor(t,e){super(),this.touched=t,this.source=e}},vf=class extends yc{constructor(t,e){super(),this.status=t,this.source=e}},qE=class extends yc{constructor(t){super(),this.source=t}},YE=class extends yc{constructor(t){super(),this.source=t}};function QE(n){return(Fv(n)?n.validators:n)||null}function kQ(n){return Array.isArray(n)?KE(n):n||null}function eS(n,t){return(Fv(t)?t.asyncValidators:n)||null}function NQ(n){return Array.isArray(n)?JE(n):n||null}function Fv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Y3(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Ct(1e3,"");if(!i[e])throw new Ct(1001,"")}function X3(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Ct(1002,"")})}var yf=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ef(()=>this.statusReactive()),this.statusReactive=Jd(void 0),this._pristine=ef(()=>this.pristineReactive()),this.pristineReactive=Jd(!0),this._touched=ef(()=>this.touchedReactive()),this.touchedReactive=Jd(!1),this._events=new On,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return hs(this.statusReactive)}set status(t){hs(()=>this.statusReactive.set(t))}get valid(){return this.status===Jp}get invalid(){return this.status===Sv}get pending(){return this.status==_f}get disabled(){return this.status===Qp}get enabled(){return this.status!==Qp}get pristine(){return hs(this.pristineReactive)}set pristine(t){hs(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return hs(this.touchedReactive)}set touched(t){hs(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(w3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(w3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(E3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(E3(t,this._rawAsyncValidators))}hasValidator(t){return Pv(this._rawValidators,t)}hasAsyncValidator(t){return Pv(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched($t(je({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new nm(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new nm(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty($t(je({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new tm(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new tm(!0,i))}markAsPending(t={}){this.status=_f;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new vf(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending($t(je({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Qp,this.errors=null,this._forEachChild(r=>{r.disable($t(je({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Av(this.value,i)),this._events.next(new vf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($t(je({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Jp,this._forEachChild(i=>{i.enable($t(je({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors($t(je({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jp||this.status===_f)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Av(this.value,e)),this._events.next(new vf(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity($t(je({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qp:Jp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=_f,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=B3(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new vf(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Qp:this.errors?Sv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_f)?_f:this._anyControlsHaveStatus(Sv)?Sv:Jp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new tm(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new nm(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Fv(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=kQ(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=NQ(this._rawAsyncValidators)}},_s=class extends yf{constructor(t,e,i){super(QE(e),eS(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){X3(this,!0,t),Object.keys(t).forEach(i=>{Y3(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var XE=class extends _s{};var rm=new _t("CallSetDisabledState",{providedIn:"root",factory:()=>Lv}),Lv="always";function Uv(n,t){return[...t.path,n]}function Iv(n,t,e=Lv){tS(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),LQ(n,t),VQ(n,t),UQ(n,t),FQ(n,t)}function S3(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),kv(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Rv(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function FQ(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function tS(n,t){let e=$3(n);t.validator!==null?n.setValidators(M3(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=q3(n);t.asyncValidator!==null?n.setAsyncValidators(M3(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Rv(t._rawValidators,r),Rv(t._rawAsyncValidators,r)}function kv(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=$3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=q3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Rv(t._rawValidators,i),Rv(t._rawAsyncValidators,i),e}function LQ(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Z3(n,t)})}function UQ(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Z3(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Z3(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function VQ(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function K3(n,t){n==null,tS(n,t)}function BQ(n,t){return kv(n,t)}function J3(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function zQ(n){return Object.getPrototypeOf(n.constructor)===Nv}function Q3(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function eL(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===kt?e=o:zQ(o)?i=o:r=o}),r||i||e||null}function HQ(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var jQ={provide:fo,useExisting:br(()=>qn)},em=Promise.resolve(),qn=(()=>{class n extends fo{get submitted(){return hs(this.submittedReactive)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ef(()=>this.submittedReactive()),this.submittedReactive=Jd(!1),this._directives=new Set,this.ngSubmit=new yt,this.form=new _s({},KE(e),JE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){em.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Iv(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){em.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){em.then(()=>{let i=this._findContainer(e.path),r=new _s({});K3(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){em.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){em.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Q3(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)($(Qs,10),$(bf,10),$(rm,8))}}static{this.\u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&le("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([jQ]),Yi]})}}return n})();function T3(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function P3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Vn=class extends yf{constructor(t=null,e,i){super(QE(e),eS(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fv(e)&&(e.nonNullable||e.initialValueIsDefault)&&(P3(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){T3(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){T3(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){P3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var WQ=n=>n instanceof Vn,GQ=(()=>{class n extends fo{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Uv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,features:[Yi]})}}return n})();var $Q={provide:Ou,useExisting:br(()=>Tn)},D3=Promise.resolve(),Tn=(()=>{class n extends Ou{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Vn,this._registered=!1,this.name="",this.update=new yt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=eL(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),J3(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Iv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){D3.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&fc(i);D3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Uv(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)($(fo,9),$(Qs,10),$(bf,10),$(xf,10),$(Xs,8),$(rm,8))}}static{this.\u0275dir=en({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zi([$Q]),Yi,Cr]})}}return n})(),Yt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var tL=new _t("");var qQ={provide:fo,useExisting:br(()=>wr)},wr=(()=>{class n extends fo{get submitted(){return hs(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ef(()=>this._submittedReactive()),this._submittedReactive=Jd(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new yt,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Iv(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){S3(e.control||null,e,!1),HQ(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Q3(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new qE(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new YE(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(S3(i||null,e),WQ(r)&&(Iv(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);K3(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&BQ(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tS(this.form,this),this._oldForm&&kv(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)($(Qs,10),$(bf,10),$(rm,8))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&le("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([qQ]),Yi,Cr]})}}return n})(),YQ={provide:fo,useExisting:br(()=>nL)},nL=(()=>{class n extends GQ{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){iL(this._parent)}static{this.\u0275fac=function(i){return new(i||n)($(fo,13),$(Qs,10),$(bf,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[zi([YQ]),Yi]})}}return n})(),XQ={provide:fo,useExisting:br(()=>Cf)},Cf=(()=>{class n extends fo{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Uv(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){iL(this._parent)}static{this.\u0275fac=function(i){return new(i||n)($(fo,13),$(Qs,10),$(bf,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[zi([XQ]),Yi]})}}return n})();function iL(n){return!(n instanceof nL)&&!(n instanceof wr)&&!(n instanceof Cf)}var ZQ={provide:Ou,useExisting:br(()=>Rr)},Rr=(()=>{class n extends Ou{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new yt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=eL(this,o)}ngOnChanges(e){this._added||this._setUpControl(),J3(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Uv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)($(fo,13),$(Qs,10),$(bf,10),$(xf,10),$(tL,8))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[zi([ZQ]),Yi,Cr]})}}return n})(),KQ={provide:xf,useExisting:br(()=>ji),multi:!0};function rL(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function JQ(n){return n.split(":")[0]}var ji=(()=>{class n extends Nv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=rL(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=JQ(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&le("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zi([KQ]),Yi]})}}return n})(),Ri=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(rL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(Ai),$(ji,9))}}static{this.\u0275dir=en({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),QQ={provide:xf,useExisting:br(()=>oL),multi:!0};function O3(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function eee(n){return n.split(":")[0]}var oL=(()=>{class n extends Nv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=eee(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&le("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zi([QQ]),Yi]})}}return n})(),ki=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(O3(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(O3(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(Ai),$(oL,9))}}static{this.\u0275dir=en({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function sL(n){return typeof n=="number"?n:parseInt(n,10)}var Vv=(()=>{class n{constructor(){this._validator=Tv}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Tv,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,features:[Cr]})}}return n})();var tee={provide:Qs,useExisting:br(()=>hn),multi:!0},nee={provide:Qs,useExisting:br(()=>nS),multi:!0},hn=(()=>{class n extends Vv{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fc,this.createValidator=e=>k3}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("required",r._enabled?"":null)},inputs:{required:"required"},features:[zi([tee]),Yi]})}}return n})(),nS=(()=>{class n extends hn{constructor(){super(...arguments),this.createValidator=e=>N3}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("required",r._enabled?"":null)},features:[zi([nee]),Yi]})}}return n})();var iee={provide:Qs,useExisting:br(()=>om),multi:!0},om=(()=>{class n extends Vv{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>sL(e),this.createValidator=e=>F3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[zi([iee]),Yi]})}}return n})(),ree={provide:Qs,useExisting:br(()=>sm),multi:!0},sm=(()=>{class n extends Vv{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>sL(e),this.createValidator=e=>L3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[zi([ree]),Yi]})}}return n})(),oee={provide:Qs,useExisting:br(()=>xl),multi:!0},xl=(()=>{class n extends Vv{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>U3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Vr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[zi([oee]),Yi]})}}return n})();var aL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})(),ZE=class extends yf{constructor(t,e,i){super(QE(e),eS(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){X3(this,!1,t),t.forEach((i,r)=>{Y3(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function A3(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Sa=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return A3(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new _s(r,o)}record(e,i=null){let r=this._reduceControls(e);return new XE(r,i)}control(e,i,r){let o={};return this.useNonNullable?(A3(i)?o=i:(o.validators=i,o.asyncValidators=r),new Vn(e,$t(je({},o),{nonNullable:!0}))):new Vn(e,i,r)}array(e,i,r){let o=e.map(s=>this._createControl(s));return new ZE(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof Vn)return e;if(e instanceof yf)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Dt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:rm,useValue:e.callSetDisabledState??Lv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({imports:[aL]})}}return n})(),nr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:tL,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:rm,useValue:e.callSetDisabledState??Lv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({imports:[aL]})}}return n})();var xc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}login(e,i){let r={email:e,password:i};return this.http.post(`${this.apiUrl}/login`,r,{observe:"response",responseType:"text"})}getRoleFromToken(e){return JSON.parse(atob(e.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]}sendTokenToBackend(e){let i={"X-Skip-Interceptor":"true"};return this.http.post(`${this.apiUrl}/Google`,{token:e},{headers:i,observe:"response",responseType:"text"})}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function see(n,t){n&1&&(g(0,"p"),M(1," Email is required. "),_())}function aee(n,t){n&1&&(g(0,"p"),M(1," Please enter a valid email address. "),_())}function lee(n,t){if(n&1&&(g(0,"div",20),Te(1,see,2,0,"p",21)(2,aee,2,0,"p",21),_()),n&2){let e,i,r=ce();A(),X("ngIf",(e=r.loginForm.get("email"))==null||e.errors==null?null:e.errors.required),A(),X("ngIf",(i=r.loginForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function cee(n,t){n&1&&(g(0,"p"),M(1," Password is required. "),_())}function uee(n,t){if(n&1&&(g(0,"div",20),Te(1,cee,2,0,"p",21),_()),n&2){let e,i=ce();A(),X("ngIf",(e=i.loginForm.get("password"))==null||e.errors==null?null:e.errors.required)}}function dee(n,t){if(n&1&&(g(0,"div",20)(1,"p"),M(2),_()()),n&2){let e=ce();A(2),Ye(e.loginError)}}var lL=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i,this.passwordFieldType="password",this.loginForm=new _s({email:new Vn("",[Gt.required,Gt.email]),password:new Vn("",Gt.required)}),this.loginError=null}ngOnInit(){if(typeof document<"u"){let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>this.initializeGoogleSignIn(),document.head.appendChild(e)}}initializeGoogleSignIn(){google.accounts.id.initialize({client_id:"421903046401-5q20kb0ijen3tah9r68ngg2m1kmv66bj.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this)}),google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"})}handleCredentialResponse(e){console.log("Encoded JWT ID token: "+e.credential),this.sendTokenToBackend(e.credential)}sendTokenToBackend(e){this.loginService.sendTokenToBackend(e).subscribe(i=>{let r=i.body;if(r){localStorage.setItem("token",r);let s=JSON.parse(atob(r.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];s==="Admin"?this.router.navigate(["/panel-admin"]):s==="Patient"?this.router.navigate(["/patient-panel"]):s==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",s),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},i=>{i.status===401&&this.router.navigate(["/register"],{queryParams:{token:e}}),console.error("Login failed",i),this.loginError="Invalid email or password"})}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loginService.login(this.loginForm.value.email,this.loginForm.value.password).subscribe(e=>{let i=e.body;if(i){localStorage.setItem("token",i);let o=JSON.parse(atob(i.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];o==="Admin"?this.router.navigate(["/panel-admin"]):o==="Patient"?this.router.navigate(["/patient-panel"]):o==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",o),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},e=>{console.error("Login failed",e),this.loginError="Invalid email or password"})}static{this.\u0275fac=function(i){return new(i||n)($(xc),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-login"]],standalone:!0,features:[Je],decls:36,vars:6,consts:[[1,"login-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"login-left"],[1,"top"],["src","logo.png","alt","logo"],[3,"ngSubmit","formGroup"],["id","google-signin-button"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["class","error-message",4,"ngIf"],["for","password"],[1,"input-container"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["type","submit",1,"btn","btn-signin"],["routerLink","/register",1,"button"],[1,"login-right"],[1,"login-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"error-message"],[4,"ngIf"]],template:function(i,r){if(i&1&&(g(0,"div",0)(1,"a",1),me(2,"img",2),_(),g(3,"div",3)(4,"div",4),me(5,"img",5),g(6,"h2"),M(7,"Hospital Management App"),_()(),g(8,"form",6),le("ngSubmit",function(){return r.onSubmit()}),me(9,"div",7),g(10,"option"),M(11,"\u23AF\u23AF\u23AF Or Login with your email \u23AF\u23AF\u23AF"),_(),g(12,"label",8),M(13,"Email"),_(),me(14,"input",9),Te(15,lee,3,2,"div",10),g(16,"label",11),M(17,"Password"),_(),g(18,"div",12),me(19,"input",13),g(20,"img",14),le("click",function(){return r.togglePasswordVisibility()}),_()(),Te(21,uee,2,1,"div",10)(22,dee,3,1,"div",10),g(23,"button",15),M(24,"Login"),_()(),g(25,"p"),M(26," Don't have an account? "),g(27,"a",16),M(28,"Sign Up Now"),_()()(),g(29,"div",17)(30,"div",18)(31,"h3"),M(32,"Why should I login?"),_(),g(33,"p"),M(34," By logging in, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),_(),me(35,"img",19),_()()()),i&2){let o,s;A(8),X("formGroup",r.loginForm),A(7),X("ngIf",((o=r.loginForm.get("email"))==null?null:o.invalid)&&(((o=r.loginForm.get("email"))==null?null:o.dirty)||((o=r.loginForm.get("email"))==null?null:o.touched))),A(4),X("type",r.passwordFieldType),A(),X("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(),X("ngIf",((s=r.loginForm.get("password"))==null?null:s.invalid)&&(((s=r.loginForm.get("password"))==null?null:s.dirty)||((s=r.loginForm.get("password"))==null?null:s.touched))),A(),X("ngIf",r.loginError)}},dependencies:[Dt,Yt,Ri,ki,kt,Ft,qt,hn,nr,wr,Rr,Nt,Wt,vt,Zt],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{display:flex;height:100vh}.login-left[_ngcontent-%COMP%], .login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.login-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.login-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.login-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.login-left[_ngcontent-%COMP%]   #google-signin-button[_ngcontent-%COMP%]{margin-top:1rem;background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-right[_ngcontent-%COMP%]{background-image:url(https://online-learning-college.com/wp-content/uploads/2023/01/Qualifications-to-Become-a-Doctor--scaled.jpg);background-size:cover;background-position:center;color:#000}.login-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.login-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.login-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}']})}}return n})();var Au=class extends Error{};Au.prototype.name="InvalidTokenError";function fee(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function hee(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return fee(t)}catch{return atob(t)}}function Ta(n,t){if(typeof n!="string")throw new Au("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,i=n.split(".")[e];if(typeof i!="string")throw new Au(`Invalid token specified: missing part #${e+1}`);let r;try{r=hee(i)}catch(o){throw new Au(`Invalid token specified: invalid base64 for part #${e+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new Au(`Invalid token specified: invalid json for part #${e+1} (${o.message})`)}}var cL=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}register(e,i,r,o){let s={email:e,phoneNumber:i+r,password:o};return console.log("Registering user",s),this.http.post(`${this.apiUrl}/RegisterUserAsPatient`,s,{observe:"response",responseType:"text"}).pipe(vi(a=>{let l=a.body;l&&localStorage.setItem("authToken",l)}))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var uL=(()=>{class n{constructor(e,i,r){this.registerService=e,this.router=i,this.route=r,this.passwordFieldType="password",this.confirmPasswordFieldType="password",this.isModalVisible=!1,this.registerForm=new _s({email:new Vn("",[Gt.required,Gt.email]),identifier:new Vn("",Gt.required),phoneNumber:new Vn("",Gt.required),password:new Vn("",Gt.required),confirmPassword:new Vn("",Gt.required),acceptPolicy:new Vn(!1,Gt.requiredTrue)})}ngOnInit(){this.route.queryParams.subscribe(e=>{if(Object.keys(e).length>0&&(console.log("Query parameters:",e),e.token)){let i=Ta(e.token);i&&i.email&&this.registerForm.get("email")?.setValue(i.email)}})}togglePasswordVisibility(e){e==="password"?this.passwordFieldType=this.passwordFieldType==="password"?"text":"password":e==="confirm-password"&&(this.confirmPasswordFieldType=this.confirmPasswordFieldType==="password"?"text":"password")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}if(this.registerForm.value.password!==this.registerForm.value.confirmPassword){alert("Passwords do not match");return}this.registerService.register(this.registerForm.value.email,this.registerForm.value.identifier,this.registerForm.value.phoneNumber,this.registerForm.value.password).subscribe(e=>{console.log("Registration successful",e),this.router.navigate(["/login"])},e=>{console.error("Registration failed",e),alert("Registration failed - "+e.error)})}openPrivacyPolicy(e){e.preventDefault(),this.isModalVisible=!0,console.log("Modal opened:",this.isModalVisible)}closeModal(){this.isModalVisible=!1,console.log("Modal closed:",this.isModalVisible)}static{this.\u0275fac=function(i){return new(i||n)($(cL),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-register"]],standalone:!0,features:[Je],decls:205,vars:8,consts:[[1,"register-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"register-left"],[1,"top"],["src","logo.png","alt","Hospital Management App Logo"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","identifier"],[1,"identifier-container"],["type","text","id","identifier","formControlName","identifier","placeholder","+1","required","",1,"identifier-input"],["type","tel","id","phone","formControlName","phoneNumber","placeholder","123456789","required",""],[1,"input-container"],["for","password"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["for","confirm-password"],["id","confirm-password","formControlName","confirmPassword","placeholder","******","required","",3,"type"],["type","checkbox","id","acceptPolicy","formControlName","acceptPolicy","required",""],["for","acceptPolicy"],[1,"privacy-policy-link",3,"click"],["type","submit",1,"btn","btn-register",3,"disabled"],["routerLink","/login"],[1,"register-right"],[1,"register-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"modal-container"],[1,"modal-content"],[1,"modal-title"],[1,"modal-date"],[1,"modal-section"],[1,"modal-subtitle"],[1,"modal-text"],[1,"modal-list"],[1,"modal-close-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"a",1),me(2,"img",2),_(),g(3,"div",3)(4,"div",4),me(5,"img",5),g(6,"h2"),M(7,"Hospital Management App"),_()(),g(8,"form",6),le("ngSubmit",function(){return r.onSubmit()}),g(9,"label",7),M(10,"Email"),_(),me(11,"input",8),g(12,"label",9),M(13,"Phone Number"),_(),g(14,"div",10),me(15,"input",11)(16,"input",12),_(),g(17,"div",13)(18,"label",14),M(19,"Password"),_(),me(20,"input",15),g(21,"img",16),le("click",function(){return r.togglePasswordVisibility("password")}),_()(),g(22,"div",13)(23,"label",17),M(24,"Confirm Password"),_(),me(25,"input",18),g(26,"img",16),le("click",function(){return r.togglePasswordVisibility("confirm-password")}),_()(),g(27,"div",13),me(28,"input",19),g(29,"label",20),M(30," I accept the "),g(31,"a",21),le("click",function(s){return r.openPrivacyPolicy(s)}),M(32,"Privacy Policy"),_()()(),g(33,"button",22),M(34,"Register"),_()(),g(35,"p"),M(36,"Already have an account? "),g(37,"a",23),M(38,"Login Now"),_()()(),g(39,"div",24)(40,"div",25)(41,"h3"),M(42,"Why should I register?"),_(),g(43,"p"),M(44," By registering, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),_(),me(45,"img",26),_()()(),g(46,"div",27)(47,"div",28)(48,"h1",29),M(49,"Privacy Policy"),_(),g(50,"p",30),M(51,"Last updated: 4 de Janeiro de 2025"),_(),g(52,"section",31)(53,"h2",32),M(54,"Introdu\xE7\xE3o"),_(),g(55,"p",33),M(56," A sua privacidade \xE9 essencial para o Hospital Management App. Esta pol\xEDtica, em conformidade com o Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD), descreve como recolhemos, utilizamos, partilhamos e protegemos os seus dados pessoais ao utilizar a nossa aplica\xE7\xE3o. O RGPD assegura a prote\xE7\xE3o dos seus dados enquanto um direito fundamental. "),_()(),g(57,"section",31)(58,"h2",32),M(59,"Que Dados Pessoais Recolhemos?"),_(),g(60,"ul",34)(61,"li"),M(62,"Dados de Identifica\xE7\xE3o: Nome, data de nascimento, n\xFAmero de identifica\xE7\xE3o e g\xE9nero."),_(),g(63,"li"),M(64,"Contactos: Morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia"),_(),g(65,"li"),M(66,"Dados de Sa\xFAde: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(67,"li"),M(68,"Informa\xE7\xE3o de Utiliza\xE7\xE3o: Como utiliza a aplica\xE7\xE3o, as suas prefer\xEAncias e defini\xE7\xF5es."),_()()(),g(69,"section",31)(70,"h2",32),M(71,"Finalidades do Tratamento dos Dados"),_(),g(72,"ul",34)(73,"li"),M(74,"Gerir as suas consultas e marca\xE7\xF5es."),_(),g(75,"li"),M(76,"Fornecer-lhe os cuidados de sa\xFAde adequados."),_(),g(77,"li"),M(78,"Melhorar a qualidade dos nossos servi\xE7os."),_(),g(79,"li"),M(80,"Comunicar consigo sobre as suas consultas."),_(),g(81,"li"),M(82,"Cumprir com as obriga\xE7\xF5es legais."),_(),g(83,"li"),M(84,"Arquivo de interesse p\xFAblico, investiga\xE7\xE3o cient\xEDfica ou hist\xF3rica, ou fins estat\xEDsticos, assegurando a prote\xE7\xE3o dos seus direitos."),_()()(),g(85,"section",31)(86,"h2",32),M(87,"Tempos de Reten\xE7\xE3o de Dados"),_(),g(88,"p",33),M(89,"Os tempos de reten\xE7\xE3o foram definidos considerando a finalidade do tratamento, a base legal, as obriga\xE7\xF5es legais e as boas pr\xE1ticas de seguran\xE7a:"),_(),g(90,"h3",32),M(91,"1. Dados de Contacto"),_(),g(92,"ul",34)(93,"li"),M(94,"Inclui: Nome, morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia."),_(),g(95,"li"),M(96,"Tempo de reten\xE7\xE3o: Durante o per\xEDodo em que o paciente for utilizador ativo da aplica\xE7\xE3o. Eliminados 6 meses ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(97,"li"),M(98,"Justificativa: Essenciais para a gest\xE3o de consultas e comunica\xE7\xE3o com o paciente, com reten\xE7\xE3o adicional de 6 meses para eventuais quest\xF5es legais ou administrativas."),_()(),g(99,"h3",32),M(100,"2. Dados de Sa\xFAde"),_(),g(101,"ul",34)(102,"li"),M(103,"Inclui: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(104,"li"),M(105,"Tempo de reten\xE7\xE3o: 20 anos ap\xF3s a \xFAltima consulta, conforme legisla\xE7\xE3o portuguesa para prontu\xE1rios m\xE9dicos."),_(),g(106,"li"),M(107,"Justificativa: Obriga\xE7\xE3o legal de reten\xE7\xE3o por 20 anos para assegurar o cumprimento da legisla\xE7\xE3o e permitir acesso a informa\xE7\xF5es m\xE9dicas em caso de necessidade."),_()(),g(108,"h3",32),M(109,"3. Informa\xE7\xE3o de Utiliza\xE7\xE3o"),_(),g(110,"ul",34)(111,"li"),M(112,"Inclui: Como utiliza a aplica\xE7\xE3o, prefer\xEAncias e defini\xE7\xF5es."),_(),g(113,"li"),M(114,"Tempo de reten\xE7\xE3o: 1 ano ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(115,"li"),M(116,"Justificativa: Necess\xE1ria para melhorar os servi\xE7os da aplica\xE7\xE3o, permitindo an\xE1lise de tend\xEAncias e implementa\xE7\xE3o de melhorias."),_()()(),g(117,"section",31)(118,"h2",32),M(119,"Procedimentos Ap\xF3s o Fim do Per\xEDodo de Reten\xE7\xE3o"),_(),g(120,"p",33),M(121,"Ap\xF3s o per\xEDodo de reten\xE7\xE3o definido:"),_(),g(122,"ul",34)(123,"li"),M(124,"Os dados ser\xE3o eliminados de forma segura e irrevers\xEDvel, garantindo que n\xE3o possam ser recuperados."),_(),g(125,"li"),M(126,"Dados necess\xE1rios para fins legais ou contratuais poder\xE3o ser anonimizados e retidos por tempo indeterminado, utilizados exclusivamente para investiga\xE7\xE3o e estat\xEDstica."),_()()(),g(127,"section",31)(128,"h2",32),M(129,"Com Quem Partilhamos os seus Dados?"),_(),g(130,"ul",34)(131,"li"),M(132,"Profissionais de Sa\xFAde: Para fornecer os cuidados de sa\xFAde necess\xE1rios, apenas na medida estritamente indispens\xE1vel."),_(),g(133,"li"),M(134,"Autoridades de Controlo: Quando exigido por lei, mediante pedido formal, justificado e ocasional."),_(),g(135,"li"),M(136,"Prestadores de Servi\xE7os: Empresas que auxiliam na opera\xE7\xE3o da aplica\xE7\xE3o, sob contrato que garante prote\xE7\xE3o de dados adequada."),_()()(),g(137,"section",31)(138,"h2",32),M(139,"Como Protegemos os seus Dados?"),_(),g(140,"ul",34)(141,"li"),M(142,"Encripta\xE7\xE3o: Todos os dados s\xE3o encriptados para impedir acessos n\xE3o autorizados."),_(),g(143,"li"),M(144,"Pseudonimiza\xE7\xE3o: Sempre que poss\xEDvel, protegemos a sua identidade atrav\xE9s de pseudonimiza\xE7\xE3o."),_(),g(145,"li"),M(146,"Controlo de Acesso: Apenas utilizadores autorizados, mediante autentica\xE7\xE3o segura, t\xEAm acesso aos seus dados."),_(),g(147,"li"),M(148,"Medidas T\xE9cnicas e Organizativas: Implementamos solu\xE7\xF5es adequadas ao risco, considerando o estado da arte tecnol\xF3gica."),_()()(),g(149,"section",31)(150,"h2",32),M(151,"Os seus Direitos"),_(),g(152,"p",33),M(153,"De acordo com o RGPD, tem os seguintes direitos:"),_(),g(154,"ul",34)(155,"li"),M(156,"Acesso aos seus dados: Solicitar uma c\xF3pia dos seus dados pessoais num formato leg\xEDvel."),_(),g(157,"li"),M(158,"Retifica\xE7\xE3o: Corrigir dados incorretos ou incompletos."),_(),g(159,"li"),M(160,'Apagamento ("direito a ser esquecido"): Solicitar a elimina\xE7\xE3o dos seus dados em condi\xE7\xF5es espec\xEDficas.'),_(),g(161,"li"),M(162,"Limita\xE7\xE3o do Tratamento: Restringir o uso dos seus dados em determinadas situa\xE7\xF5es."),_(),g(163,"li"),M(164,"Oposi\xE7\xE3o ao Tratamento: Recusar o tratamento baseado em interesses leg\xEDtimos ou marketing direto."),_(),g(165,"li"),M(166,"Portabilidade dos Dados: Receber os seus dados num formato estruturado para transferir para outro servi\xE7o."),_()(),g(167,"p",33),M(168,"Pode exercer os seus direitos atrav\xE9s de um pedido dirigido ao Hospital Management App, pelos seguintes meios:"),_(),g(169,"ul",34)(170,"li"),M(171,"Por correio postal para o endere\xE7o: R. Dr. Ant\xF3nio Bernardino de Almeida 431, 4249-015 Porto."),_(),g(172,"li"),M(173,"Por email para o endere\xE7o: privacy@hospital.management.app.com."),_(),g(174,"li"),M(175,"Atrav\xE9s da aplica\xE7\xE3o, utilizando as funcionalidades espec\xEDficas dispon\xEDveis para o efeito."),_()(),g(176,"p",33),M(177,"Ao exercer estes direitos, o utilizador deve especificar a natureza da sua solicita\xE7\xE3o e identificar-se devidamente. Ap\xF3s a confirma\xE7\xE3o da identidade do utilizador, para garantir que o pedido n\xE3o \xE9 realizado por terceiros n\xE3o autorizados, a solicita\xE7\xE3o ser\xE1 tratada em total conformidade com os requisitos e prazos legais aplic\xE1veis."),_()(),g(178,"section",31)(179,"h2",32),M(180,"Consentimento"),_(),g(181,"p",33),M(182,"Solicitamos o seu consentimento claro e direto para tratar dados, especialmente categorias sens\xEDveis, explicando claramente as finalidades. Pode retirar o seu consentimento a qualquer momento atrav\xE9s das funcionalidades da aplica\xE7\xE3o ou pelos contactos disponibilizados."),_()(),g(183,"section",31)(184,"h2",32),M(185,"Transfer\xEAncia de Dados Pessoais"),_(),g(186,"p",33),M(187,"Em nenhum caso, o Hospital Management App transferir\xE1 os dados pessoais fornecidos atrav\xE9s deste website a terceiros sem o consentimento pr\xE9vio do utilizador, exceto se tal for uma obriga\xE7\xE3o legal ou se for identificado um interesse leg\xEDtimo, desde que sejam garantidas as salvaguardas apropriadas."),_()(),g(188,"section",31)(189,"h2",32),M(190,"Autoridade de Supervis\xE3o"),_(),g(191,"p",33),M(192,"De acordo com a lei, o titular dos dados tem o direito de apresentar uma reclama\xE7\xE3o relativa \xE0 prote\xE7\xE3o de dados pessoais junto da autoridade de supervis\xE3o competente."),_()(),g(193,"section",31)(194,"h2",32),M(195,"Contactos"),_(),g(196,"p",33),M(197,"Se tiver d\xFAvidas sobre esta pol\xEDtica de privacidade, contacte o nosso Encarregado de Prote\xE7\xE3o de Dados atrav\xE9s do email: paulo@hospital.management.app.com."),_()(),g(198,"section",31)(199,"h2",32),M(200,"Atualiza\xE7\xF5es"),_(),g(201,"p",33),M(202,"Esta pol\xEDtica de privacidade pode ser alterada. Informaremos com pelo menos 30 dias de anteced\xEAncia sobre mudan\xE7as significativas, e a vers\xE3o atualizada estar\xE1 sempre dispon\xEDvel na nossa aplica\xE7\xE3o."),_()(),g(203,"button",35),le("click",function(){return r.closeModal()}),M(204,"Close"),_()()()),i&2&&(A(8),X("formGroup",r.registerForm),A(12),X("type",r.passwordFieldType),A(),X("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(4),X("type",r.confirmPasswordFieldType),A(),X("src",r.confirmPasswordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(7),X("disabled",!r.registerForm.valid),A(13),So("active",r.isModalVisible))},dependencies:[Dt,Yt,kt,im,Ft,qt,hn,nS,nr,wr,Rr,Nt,Wt,vt],styles:['.register-container[_ngcontent-%COMP%]{display:flex;height:100vh}.register-left[_ngcontent-%COMP%], .register-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.register-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.register-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.register-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.identifier-container[_ngcontent-%COMP%]{display:flex;gap:2px}.identifier-input[_ngcontent-%COMP%]{width:50px}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.register-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]{background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;margin-right:.3rem}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]:hover{background-color:#0056b3}.register-right[_ngcontent-%COMP%]{background-image:url("https://www.verywellhealth.com/thmb/GXgk5oXpQWDe0N_-UHh3Aa_wCqk=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-519516073-962e173b7e2149d69c4f66915fd491f6.jpg");background-size:cover;background-position:center;color:#000}.register-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.register-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.register-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.register-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:none;justify-content:center;align-items:center;z-index:1000}.modal-container.active[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:1200px;max-width:90%;height:800px;overflow-y:auto;box-shadow:0 0 10px #0000001a}.modal-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem;text-align:center}.modal-date[_ngcontent-%COMP%]{font-size:.9rem;color:#666;text-align:center;margin-bottom:1rem}.modal-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.modal-text[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;text-align:justify}.modal-list[_ngcontent-%COMP%]{list-style-type:disc;padding-left:1.5rem;margin-bottom:1rem}.modal-close-btn[_ngcontent-%COMP%]{display:block;margin:0 auto;padding:.5rem 1rem;background-color:#4a90e2;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.modal-close-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.privacy-policy-link[_ngcontent-%COMP%]{color:#00f;text-decoration:underline}input[type=checkbox][_ngcontent-%COMP%]{display:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;padding-left:25px;cursor:pointer;font-size:14px;-webkit-user-select:none;user-select:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:16px;height:16px;border:2px solid #ccc;background-color:#fff;transition:background-color .3s,border-color .3s}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#4caf50;border-color:#4caf50}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:50%;transform:translateY(-50%) rotate(45deg);width:5px;height:10px;border:solid white;border-width:0 2px 2px 0}']})}}return n})();var dL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-home"]],standalone:!0,features:[Je],decls:91,vars:0,consts:[[1,"hero"],["src","hero.gif","alt","Hero Background",1,"hero-background"],[1,"logo"],["src","logo.png","alt","Hospital Logo"],[1,"buttons"],["routerLink","/login",1,"btn"],["routerLink","/register",1,"btn"],["src","arrow.png","alt","Hero Image","onclick","document.querySelector('.articles-container').scrollIntoView({ behavior: 'smooth' });",1,"hero-img"],[1,"articles-container"],[1,"articles"],["src","lifestyle.jpg","alt","Article 1 Image"],["routerLink","/"],["src","meds.jpg","alt","Article 2 Image"],["src","stress.jpg","alt","Article 3 Image"],[1,"footer"],[1,"container"],[1,"row"],[1,"footer-col"],["routerLink","/about-us"],["routerLink","/our-services"],["routerLink","/privacy-policy"],["routerLink","/faq"],["routerLink","/patient-portal"],["routerLink","/doctor-directory"],["routerLink","/health-library"],["routerLink","/emergency-services"],[1,"social"],["href","mailto:support@hospital.com"],["href","tel:+1234567890"]],template:function(i,r){i&1&&(g(0,"body")(1,"div",0),me(2,"img",1),g(3,"div",2),me(4,"img",3),g(5,"p"),M(6,"Hospital Management App"),_()(),g(7,"div",4)(8,"a",5),M(9,"Login"),_(),g(10,"a",6),M(11,"Register"),_()(),me(12,"img",7),_(),g(13,"div",8)(14,"h1"),M(15,"Health & Wellness Articles"),_(),g(16,"section",9)(17,"article"),me(18,"img",10),g(19,"h2"),M(20,"5 Tips for a Healthy Lifestyle"),_(),g(21,"p"),M(22,"Discover essential tips to maintain a healthy lifestyle, including diet, exercise, and mental well-being."),_(),g(23,"a",11),M(24,"Read more"),_()(),g(25,"article"),me(26,"img",12),g(27,"h2"),M(28,"Understanding Common Medications"),_(),g(29,"p"),M(30,"Learn about the most commonly prescribed medications, their uses, and potential side effects."),_(),g(31,"a",11),M(32,"Read more"),_()(),g(33,"article"),me(34,"img",13),g(35,"h2"),M(36,"How to Manage Stress Effectively"),_(),g(37,"p"),M(38,"Explore various techniques and strategies to manage stress and improve your overall well-being."),_(),g(39,"a",11),M(40,"Read more"),_()()()()(),g(41,"footer",14)(42,"div",15)(43,"div",16)(44,"div",17)(45,"h4"),M(46,"company"),_(),g(47,"ul")(48,"li")(49,"a",18),M(50,"About Us"),_()(),g(51,"li")(52,"a",19),M(53,"Our Services"),_()(),g(54,"li")(55,"a",20),M(56,"Privacy Policy"),_()()()(),g(57,"div",17)(58,"h4"),M(59,"get help"),_(),g(60,"ul")(61,"li")(62,"a",21),M(63,"FAQ"),_()()()(),g(64,"div",17)(65,"h4"),M(66,"resources"),_(),g(67,"ul")(68,"li")(69,"a",22),M(70,"Patient Portal"),_()(),g(71,"li")(72,"a",23),M(73,"Doctor Directory"),_()(),g(74,"li")(75,"a",24),M(76,"Health Library"),_()(),g(77,"li")(78,"a",25),M(79,"Emergency Services"),_()()()(),g(80,"div",17)(81,"h4"),M(82,"contact us"),_(),g(83,"div",26)(84,"ul")(85,"li")(86,"a",27),M(87,"support@hospital.com"),_()(),g(88,"li")(89,"a",28),M(90,"+351 912345678"),_()()()()()()()())},dependencies:[Nt,Wt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;box-sizing:border-box;height:100%}.hero[_ngcontent-%COMP%]{position:relative;text-align:center;padding:50px 20px;color:#fff;opacity:.9;height:100vh}.hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;display:flex;align-items:center;max-width:500px;max-height:60px;margin:10px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:20px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5em;font-family:Poppins,sans-serif;padding:0;margin:0;max-width:440px}.buttons[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;max-width:500px;margin:10px;display:flex;align-items:center;justify-content:center}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;margin:0 10px;border:2px solid #ffffff;transition:all .3s;border-radius:0;width:95px;font-family:Poppins,sans-serif;font-size:.8em}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff;color:#333;border-radius:0}.hero-img[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-50%);margin-bottom:1.5rem;height:40px;cursor:pointer;animation:_ngcontent-%COMP%_piscar 3s infinite}h1[_ngcontent-%COMP%]{margin:0;font-size:2.5em;font-family:Poppins,sans-serif}p[_ngcontent-%COMP%]{font-size:1.2em;font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_piscar{0%,to{opacity:1}50%{opacity:0}}.articles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex-wrap:wrap;padding:20px;height:100vh}.articles-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2em;font-family:Poppins,sans-serif;margin-bottom:2rem;color:#fff}.articles[_ngcontent-%COMP%]{width:50vw;height:fit-content;display:grid;grid-template-columns:repeat(3,minmax(200px,1fr));gap:30px;padding:10px;place-items:center}article[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin:2vh 1vw;padding:2vh 1vw;width:100%;height:100%;transition:transform .3s;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden}article[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:5px;flex-shrink:0;margin-bottom:5px}article[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}article[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;color:#333;margin:5px 0;flex-shrink:0;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;flex-grow:1;margin:5px 0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:5px;color:#007bff;text-decoration:none;flex-shrink:0}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#go-to-article[_ngcontent-%COMP%]{position:absolute;top:10px;scroll-margin-top:60px}.container[_ngcontent-%COMP%]{max-width:1170px;margin:auto}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer[_ngcontent-%COMP%]{background-color:#153e4c;padding:70px 0}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]{width:25%;padding:0 15px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;color:#fff;text-transform:capitalize;margin-bottom:35px;font-weight:500;position:relative}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:-10px;background-color:#e91e63;height:2px;box-sizing:border-box;width:50px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#bbb;text-decoration:none;font-weight:300;display:block;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;padding-left:8px}@media (max-width: 767px){.footer-col[_ngcontent-%COMP%]{width:50%;margin-bottom:30px}}@media (max-width: 574px){.footer-col[_ngcontent-%COMP%]{width:100%}}']})}}return n})();var fL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-not-found"]],standalone:!0,features:[Je],decls:7,vars:0,consts:[[1,"container"],[1,"screen"],["src","404-image.png","alt","Page not found image"],[1,"center"],["routerLink","/",1,"button"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1),me(2,"img",2),g(3,"div",3)(4,"a",4)(5,"span"),M(6," Go to Home Page "),_()()()()())},dependencies:[Nt,Wt],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.screen[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#123646;box-shadow:0 4px 8px #0000001a;border-radius:8px;height:fit-content;width:50%}img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}p[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:1em}a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-weight:700}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.image-container[_ngcontent-%COMP%]{margin-top:20px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}a.button[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;position:relative;height:50px;padding:0 30px;border:3px solid #ffffff;background:#37b0b4;-webkit-user-select:none;user-select:none;white-space:nowrap;transition:all .05s linear;font-family:inherit;text-decoration:none;color:inherit}a.button[_ngcontent-%COMP%]:before, a.button[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#37b0b4;transition:all .2s linear}a.button[_ngcontent-%COMP%]:before{width:calc(100% + 6px);height:calc(100% - 16px);top:8px;left:-3px}a.button[_ngcontent-%COMP%]:after{width:calc(100% - 16px);height:calc(100% + 6px);top:-3px;left:8px}a.button[_ngcontent-%COMP%]:hover{cursor:crosshair}a.button[_ngcontent-%COMP%]:active{transform:scale(.95)}a.button[_ngcontent-%COMP%]:hover:before{height:calc(100% - 32px);top:16px}a.button[_ngcontent-%COMP%]:hover:after{width:calc(100% - 32px);left:16px}a.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;z-index:3;position:relative;font-weight:600;display:flex;justify-content:center;align-items:center}']})}}return n})();var Fn=(()=>{class n{constructor(){this.panelIdSource=new Si("default-panel"),this.panelId$=this.panelIdSource.asObservable()}setPanelId(e){this.panelIdSource.next(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Pa=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user",this.settingsIdSource=new Si("default-settings"),this.settingsId$=this.settingsIdSource.asObservable()}setSettingsId(e){this.settingsIdSource.next(e)}deleteAccount(e){return this.http.post(`${this.apiUrl}/RequestDelete`,JSON.stringify(e),{headers:{"Content-Type":"application/json"},observe:"response"})}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api",this.profileIdSource=new Si("default-profile"),this.profileId$=this.profileIdSource.asObservable()}setProfileId(e){this.profileIdSource.next(e)}getCode(e){let i={email:e};return this.http.get(`${this.apiUrl}/User/GetCode`,{params:i})}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var iS=n=>["/",n],mee=()=>["/privacy-policy"],Vt=(()=>{class n{constructor(e,i,r){this.panelService=e,this.settingsService=i,this.profileService=r,this.panelId="",this.settingsId="",this.profileId="",this.name="",this.role="",this.privacyId=""}ngOnInit(){this.panelService.panelId$.subscribe(i=>{this.panelId=i}),this.settingsService.settingsId$.subscribe(i=>{this.settingsId=i}),this.profileService.profileId$.subscribe(i=>{this.profileId=i});let e=localStorage.getItem("token");if(e){console.log("Token:",e);let i=Ta(e);console.log("Decoded Token:",i),this.name=i["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],this.role=i["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],console.log("Name:",this.name),console.log("Role:",this.role)}}logout(){localStorage.removeItem("token")}static{this.\u0275fac=function(i){return new(i||n)($(Fn),$(Pa),$(bc))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-sidebar"]],standalone:!0,features:[Je],decls:50,vars:13,consts:[[1,"sidebar"],[1,"sidebar-header"],["src","logo.png","alt","logo"],[1,"sidebar-links"],[1,"menu-separator"],[3,"routerLink"],["src","dashboard.png","alt","icon"],["routerLink","/notifications"],["src","notifications.png","alt","icon"],["src","profile.png","alt","icon"],["src","settings.png","alt","icon"],["src","insurance.png","alt","icon",1,"colored-icon"],["routerLink","/",3,"click"],["src","logout.png","alt","icon"],[1,"user-account"],[1,"user-profile"],["src","user.png","alt","Profile Image"],[1,"user-detail"]],template:function(i,r){i&1&&(g(0,"aside",0)(1,"div",1),me(2,"img",2),g(3,"h2"),M(4,"Hospital Management App"),_()(),g(5,"ul",3)(6,"h4")(7,"span"),M(8,"Main Menu"),_(),me(9,"div",4),_(),g(10,"li")(11,"a",5),me(12,"img",6),M(13,"User Panel"),_()(),g(14,"h4")(15,"span"),M(16,"General"),_(),me(17,"div",4),_(),g(18,"li")(19,"a",7),me(20,"img",8),M(21,"Notifications"),_()(),g(22,"h4")(23,"span"),M(24,"Account"),_(),me(25,"div",4),_(),g(26,"li")(27,"a",5),me(28,"img",9),M(29,"Profile"),_()(),g(30,"li")(31,"a",5),me(32,"img",10),M(33,"Settings"),_()(),g(34,"li")(35,"a",5),me(36,"img",11),M(37,"Privacy Policy "),_()(),g(38,"li")(39,"a",12),le("click",function(){return r.logout()}),me(40,"img",13),M(41,"Logout"),_()()(),g(42,"div",14)(43,"div",15),me(44,"img",16),g(45,"div",17)(46,"h3"),M(47),_(),g(48,"span"),M(49),_()()()()()),i&2&&(A(11),X("routerLink",ri(6,iS,r.panelId)),A(16),X("routerLink",ri(8,iS,r.profileId)),A(4),X("routerLink",ri(10,iS,r.settingsId)),A(4),X("routerLink",Hi(12,mee)),A(12),Ye(r.name),A(2),Ye(r.role))},dependencies:[Nt,Wt],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;width:85px;display:flex;overflow-x:hidden;flex-direction:column;background:#0b0d16;padding:25px 20px;transition:all .4s ease;z-index:1000}.sidebar[_ngcontent-%COMP%]:hover{width:400px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:600;white-space:nowrap;margin-left:23px}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-weight:500;white-space:nowrap;margin:10px 0;position:relative}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover}.sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;width:100%;height:1px;transform:scaleX(1);transform:translateY(-50%);background:#4f52ba;transform-origin:right;transition-delay:.2s}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{transition-delay:0s;transform:scaleX(0)}.sidebar-links[_ngcontent-%COMP%]{list-style:none;margin-top:20px;height:80%;overflow-y:auto;scrollbar-width:none}.sidebar-links[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0 20px;color:#fff;font-weight:500;white-space:nowrap;padding:15px 10px;text-decoration:none;transition:.2s ease}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#161a2d;background:#fff;border-radius:4px}.user-account[_ngcontent-%COMP%]{margin-top:auto;padding:12px 10px;margin-left:-10px}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;color:#161a2d}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.user-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.user-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.775rem;font-weight:600}.user-detail[_ngcontent-%COMP%]{margin-left:23px;white-space:nowrap}.sidebar[_ngcontent-%COMP%]:hover   .user-account[_ngcontent-%COMP%]{background:#fff;border-radius:4px}.colored-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover;filter:invert(50%) sepia(100%) saturate(500%) hue-rotate(200deg)}"]})}}return n})();var vs=(()=>{class n{deleteOperationType(e){throw new Error("Method not implemented.")}constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}getSpecializations(){return this.http.get(`${this.apiUrl}/Specialization`)}createOperationType(e){return this.http.post(`${this.apiUrl}/OperationType`,e)}getStaffs(e){return this.http.get(`${this.apiUrl}/Specialization/staff/${encodeURIComponent(e)}`).pipe(_n(i=>(console.error("Error fetching staff:",i),In(()=>new Error("Failed to fetch staff members")))))}editOperationType(e,i){return this.http.put(`${this.apiUrl}/OperationType/${e}`,i)}getOperationTypeByName(e){return this.http.get(`${this.apiUrl}/OperationType/name/${e}`)}deactivateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/deactivate/${e}`,{},{responseType:"text"}).pipe(_n(i=>(console.error("Deactivation failed:",i),In(()=>i))))}activateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/activate/${e}`,{},{responseType:"text"}).pipe(_n(i=>(console.error("Activation failed:",i),In(()=>i))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var gee=()=>["/create-operation-type"],_ee=()=>["/panel-admin"],vee=n=>({deactivated:n}),yee=n=>["/update-operation-type",n];function xee(n,t){if(n&1&&(g(0,"td"),M(1),_()),n&2){let e=ce(2).$implicit;Xi("rowspan",e.specializations.length),A(),xt(" ",e.name," ")}}function bee(n,t){if(n&1&&(g(0,"td"),M(1),_()),n&2){let e=ce(2).$implicit;Xi("rowspan",e.specializations.length),A(),xt(" ",e.estimatedDuration," ")}}function Cee(n,t){if(n&1&&(g(0,"div"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" \u{1F464} ",e.fullName," ")}}function Mee(n,t){if(n&1&&(g(0,"div",10),Te(1,Cee,2,1,"div",4),_()),n&2){let e=ce().$implicit,i=ce(2);A(),X("ngForOf",i.staffs[e.specOption])}}function wee(n,t){if(n&1){let e=dt();g(0,"a",14),le("click",function(){Oe(e);let r=ce(3).$implicit,o=ce();return Ae(o.deactivateOperationType(r.name))}),M(1,"Deactivate"),_()}}function Eee(n,t){if(n&1){let e=dt();g(0,"a",15),le("click",function(){Oe(e);let r=ce(3).$implicit,o=ce();return Ae(o.activateOperationType(r.name))}),M(1,"Activate"),_()}}function See(n,t){if(n&1&&(g(0,"td")(1,"a",11),M(2,"Edit"),_(),Te(3,wee,2,0,"a",12)(4,Eee,2,0,"a",13),_()),n&2){let e=ce(2).$implicit;Xi("rowspan",e.specializations.length),A(),X("routerLink",ri(4,yee,e.name)),A(2),X("ngIf",!e.isDeactivated),A(),X("ngIf",e.isDeactivated)}}function Tee(n,t){if(n&1){let e=dt();bu(0),g(1,"tr",6),Te(2,xee,2,2,"td",7)(3,bee,2,2,"td",7),g(4,"td"),M(5),_(),g(6,"td")(7,"button",8),le("click",function(){let r=Oe(e).$implicit,o=ce().$implicit,s=ce();return Ae(s.loadStaffForSpecialization(o.name,r.specOption))}),M(8," Show Staff "),_(),Te(9,Mee,2,1,"div",9),_(),Te(10,See,5,6,"td",7),_(),Cu()}if(n&2){let e=t.$implicit,i=t.index,r=ce().$implicit,o=ce();A(),X("ngClass",ri(6,vee,r.isDeactivated)),A(),X("ngIf",i===0),A(),X("ngIf",i===0),A(2),Ye(e.specOption),A(4),X("ngIf",o.isStaffVisible(r.name,e.specOption)),A(),X("ngIf",i===0)}}function Pee(n,t){if(n&1&&(bu(0),Te(1,Tee,11,8,"ng-container",4),Cu()),n&2){let e=t.$implicit;A(),X("ngForOf",e.specializations)}}var hL=(()=>{class n{constructor(e,i){this.operationTypeService=e,this.panelService=i,this.operationTypes=[],this.staffs={},this.visibleStaffs={}}ngOnInit(){this.fetchOperationTypes(),this.panelService.setPanelId("panel-admin")}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.operationTypes=e,console.log("Operation types fetched:",e)},e=>{console.error("Error fetching operation types",e)})}loadStaffForSpecialization(e,i){this.staffs[i]?this.toggleStaffVisibility(e,i):this.operationTypeService.getStaffs(i).subscribe({next:r=>{Array.isArray(r)&&(this.staffs[i]=r.map(o=>$t(je({},o),{fullName:o.fullName||`${o.firstName} ${o.lastName}`}))),this.toggleStaffVisibility(e,i)},error:r=>{console.error("Error fetching staff:",r),this.staffs[i]=[]}})}toggleStaffVisibility(e,i){this.visibleStaffs[e]||(this.visibleStaffs[e]={}),this.visibleStaffs[e][i]=!this.visibleStaffs[e][i]}isStaffVisible(e,i){return this.visibleStaffs[e]&&this.visibleStaffs[e][i]}onEdit(e){console.log("Editing operation type:",e),this.operationTypeService.editOperationType(e.name,e).subscribe(()=>{alert("Operation type updated successfully"),this.fetchOperationTypes()},i=>{console.error("Error updating operation type",i),alert("Error updating operation type")})}deactivateOperationType(e){window.confirm(`Are you sure you want to deactivate the operation type: ${e}?`)&&this.operationTypeService.deactivateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!0,alert("Operation type deactivated successfully"))},r=>{console.error("Error deactivating operation type:",r)})}activateOperationType(e){window.confirm(`Are you sure you want to activate the operation type: ${e}?`)&&this.operationTypeService.activateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!1,alert("Operation type activated successfully"))},r=>{console.error("Error activating operation type:",r)})}static{this.\u0275fac=function(i){return new(i||n)($(vs),$(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-operation-types"]],standalone:!0,features:[Je],decls:24,vars:5,consts:[[1,"operationType-container"],[1,"operation-title"],[1,"btn","btn-create",3,"routerLink"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-back",3,"routerLink"],[3,"ngClass"],[4,"ngIf"],[1,"btn","btn-info",3,"click"],["class","staff-members",4,"ngIf"],[1,"staff-members"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)","class","btn btn-delete",3,"click",4,"ngIf"],["href","javascript:void(0)","class","btn btn-activate",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-activate",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h2",1),M(3,"Operation Types"),_(),g(4,"div")(5,"a",2),M(6,"Create Operation Type"),_(),g(7,"table",3)(8,"thead")(9,"tr")(10,"th"),M(11,"Operation Type"),_(),g(12,"th"),M(13,"Estimated Time"),_(),g(14,"th"),M(15,"Specialization"),_(),g(16,"th"),M(17,"Staff Members"),_(),g(18,"th"),M(19,"Actions"),_()()(),g(20,"tbody"),Te(21,Pee,2,1,"ng-container",4),_()(),g(22,"a",5),M(23,"Back to Dashboard"),_()()()),i&2&&(A(5),X("routerLink",Hi(3,gee)),A(16),X("ngForOf",r.operationTypes),A(),X("routerLink",Hi(4,_ee)))},dependencies:[vt,To,Mn,Zt,Nt,Wt,Vt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;max-width:1400px;font-family:Arial,sans-serif;background-color:#f8f8f8;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;align-items:center}.operation-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:2rem;color:#333}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;border-radius:4px;cursor:pointer;text-decoration:none;border:none;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]{background-color:#ff6f61;color:#fff;margin-top:20px}.btn-create[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;margin-bottom:20px}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#555}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.btn-update[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;padding:6px 12px;font-size:14px;text-decoration:none;border-radius:4px}.btn-update[_ngcontent-%COMP%]{background-color:orange;color:#fff}.btn-update[_ngcontent-%COMP%]:hover{background-color:#ff8c00}.btn-delete[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#e53935}.btn-activate[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover{background-color:#45a049}.router-outlet[_ngcontent-%COMP%]{margin-top:40px}@media (max-width: 768px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:8px}.btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}.operation-title[_ngcontent-%COMP%]{font-size:1.5rem}}.staff-members[_ngcontent-%COMP%]{margin-top:10px;background-color:#f9f9f9;border-radius:6px;padding:10px;box-shadow:0 2px 4px #0000001a}.staff-members[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#555}.deactivated[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.deactivated[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through}']})}}return n})();var Dee=()=>["/operation-types"];function Oee(n,t){if(n&1){let e=dt();g(0,"div",17)(1,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.onSpecializationChange(o,r))}),_(),g(2,"label",19),M(3),_()()}if(n&2){let e=t.$implicit,i=ce();A(),Mu("id","specialization-",e.id,""),X("checked",i.operationType.specializations.includes(e.specOption)),A(),Mu("for","specialization-",e.id,""),A(),Ye(e.specOption)}}function Aee(n,t){n&1&&(g(0,"div",20)(1,"p",21),M(2,"You must add at least one specialization to the operation type."),_()())}var pL=(()=>{class n{constructor(e,i){this.router=e,this.operationTypeService=i,this.operationType={name:"",estimatedDuration:"",specializations:[]},this.availableSpecializations=[],i.getSpecializations().subscribe(r=>{this.availableSpecializations=r},r=>{console.error("Error fetching specializations",r)})}onSpecializationChange(e,i){if(i.target.checked)this.operationType.specializations.push(e.specOption);else{let r=this.operationType.specializations.indexOf(e.specOption);r!==-1&&this.operationType.specializations.splice(r,1)}}onSubmit(){this.operationTypeService.createOperationType(this.operationType).subscribe(()=>{alert("Operation type created successfully"),this.operationType={name:"",estimatedDuration:"",specializations:[]},this.router.navigate(["/operation-types"])},e=>{console.error("Error creating operation type",e),alert("Error creating operation type")})}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(vs))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-operation-type"]],standalone:!0,features:[Je],decls:26,vars:7,consts:[["operationForm","ngForm"],[1,"operationType-container"],[1,"operation-title"],[1,"form-and-table-container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","estimatedTime"],["type","text","id","estimatedTime","name","estimatedTime","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","specializations"],[1,"checkboxes-container"],["class","checkbox-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"checkbox-group"],["type","checkbox",3,"change","id","checked"],[3,"for"],[1,"error-message"],[1,"text-danger"]],template:function(i,r){if(i&1){let o=dt();g(0,"div",1),me(1,"app-sidebar"),g(2,"h2",2),M(3,"Create Operation Type"),_(),g(4,"div",3)(5,"div",4)(6,"form",5,0),le("ngSubmit",function(){return Oe(o),Ae(r.onSubmit())}),g(8,"div",6)(9,"label",7),M(10,"Name"),_(),g(11,"input",8),Ze("ngModelChange",function(a){return Oe(o),Ke(r.operationType.name,a)||(r.operationType.name=a),Ae(a)}),_()(),g(12,"div",6)(13,"label",9),M(14,"Estimated Time"),_(),g(15,"input",10),Ze("ngModelChange",function(a){return Oe(o),Ke(r.operationType.estimatedDuration,a)||(r.operationType.estimatedDuration=a),Ae(a)}),_()(),g(16,"div",6)(17,"label",11),M(18,"Available Specializations"),_(),g(19,"div",12),Te(20,Oee,4,6,"div",13),_(),Te(21,Aee,3,0,"div",14),_(),g(22,"button",15),M(23,"Create"),_(),g(24,"a",16),M(25,"Back"),_()()()()()}if(i&2){let o=Ii(7);A(11),Xe("ngModel",r.operationType.name),A(4),Xe("ngModel",r.operationType.estimatedDuration),A(5),X("ngForOf",r.availableSpecializations),A(),X("ngIf",r.operationType.specializations.length===0),A(),X("disabled",!o.valid||r.operationType.specializations.length===0),A(2),X("routerLink",Hi(6,Dee))}},dependencies:[vt,Mn,Zt,Dt,Yt,kt,Ft,qt,hn,Tn,qn,Nt,Wt,Vt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;padding:30px;background-color:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;font-family:Arial,sans-serif}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:25px;color:#333}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;font-size:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#444;margin-bottom:8px}.form-control[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:8px;box-sizing:border-box;transition:all .3s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.form-control[_ngcontent-%COMP%]:required{border-color:#ff4d4d;background-color:#fff6f6}.form-control[_ngcontent-%COMP%]:required:focus{border-color:#ff1a1a}.form-control[_ngcontent-%COMP%]:valid{border-color:#28a745;background-color:#e6ffe6}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border-color:#ff4d4d}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]:after{content:"*";color:#ff4d4d;font-size:18px;margin-left:5px}.btn[_ngcontent-%COMP%]{padding:12px 25px;font-size:16px;text-align:center;text-decoration:none;cursor:pointer;border-radius:8px;border:none;transition:background-color .3s ease}.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-back[_ngcontent-%COMP%]{background-color:#a5342c;color:#fff}.btn-back[_ngcontent-%COMP%]:hover{background-color:#5a6268}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}@media (max-width: 600px){.operationType-container[_ngcontent-%COMP%]{padding:20px}.operation-title[_ngcontent-%COMP%]{font-size:24px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.btn[_ngcontent-%COMP%]{width:100%}}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px;cursor:pointer;transform:scale(1.3);transition:transform .3s ease-in-out;margin-left:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;color:#444;margin-left:5px;cursor:pointer}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{transform:scale(1.4)}.error-message[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#ff4d4d}']})}}return n})();var ir=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/staff",this.apiURLSpecializaction="https://localhost:5001/api/specialization",this.apiURLUser="https://localhost:5001/api/user"}createStaff(e){return this.http.post(`${this.apiUrl}`,e,{observe:"response",responseType:"text"})}getSpecialization(){return this.http.get(`${this.apiURLSpecializaction}`)}getStaffTypes(){return this.http.get(`${this.apiUrl}/staff-types`)}searchStaffProfiles(e){return this.http.get(`${this.apiUrl}/search`,{params:e})}deactivateStaff(e){return this.http.put(`${this.apiUrl}/deactivate/${e}`,{})}updateStaff(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}getStaffById(e){return this.http.get(`${this.apiUrl}/${e}`)}getAllStaffs(){return this.http.get(`${this.apiUrl}`)}confirmUpdates(e){let i=new ms;return e.phoneNumber&&(i=i.append("phoneNumber",e.phoneNumber)),e.email&&(i=i.append("email",e.email)),i=i.append("token",e.token),this.http.put(`${this.apiUrl}/ConfirmUpdates`,{},{params:i})}activateStaff(e){let i=`${this.apiURLUser}/RegisterUser`;return this.http.post(i,e)}activateUser(e,i){let r={token:e,newPassword:i};return this.http.post(`${this.apiURLUser}/Activate`,null,{params:r})}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Iee(n,t){if(n&1&&(g(0,"option",28),M(1),_()),n&2){let e=t.$implicit;X("value",e),A(),Ye(e)}}function Ree(n,t){if(n&1&&(g(0,"option",28),M(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),xt(" ",e.specOption," ")}}function kee(n,t){if(n&1&&(g(0,"div",29),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}var mL=(()=>{class n{constructor(e,i){this.service=e,this.router=i,this.createStaffForm=new _s({firstName:new Vn("",[Gt.required]),lastName:new Vn("",[Gt.required]),fullName:new Vn("",[Gt.required]),email:new Vn("",[Gt.required,Gt.email]),identifier:new Vn("",[Gt.required]),phoneNumber:new Vn("",[Gt.required]),staffType:new Vn("",[Gt.required]),specializationName:new Vn("",[Gt.required])}),this.newStaff={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",staffType:"",specializationName:""},this.staffTypes=[],this.specializations=[],this.errorMessage="",this.NumberPhone=""}ngOnInit(){this.loadSpecializations(),this.loadStaffTypes()}loadSpecializations(){this.service.getSpecialization().subscribe({next:e=>{console.log(`Data specilazation:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffTypes(){this.service.getStaffTypes().subscribe({next:e=>{console.log(`Data staff types:
`,e),this.staffTypes=e},error:e=>{console.error("Error loading staff types",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff types ")}})}onSubmit(){if(this.createStaffForm.invalid){this.errorMessage="",this.createStaffForm.markAllAsTouched();return}this.newStaff={firstName:this.createStaffForm.value.firstName.trim(),lastName:this.createStaffForm.value.lastName.trim(),fullName:this.createStaffForm.value.fullName.trim(),email:this.createStaffForm.value.email.trim(),phoneNumber:this.createStaffForm.value.identifier.trim()+this.createStaffForm.value.phoneNumber.trim(),staffType:this.createStaffForm.value.staffType.trim(),specializationName:this.createStaffForm.value.specializationName.trim()},this.createStaffForm.valid&&this.service.createStaff(this.newStaff).subscribe({next:e=>{console.log("Staff created successfully",e),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:e=>{if(console.error("Error creating staff",e),e.status===400){let i=JSON.parse(e.error);this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Creating failed - "+e.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-staff"]],standalone:!0,features:[Je],decls:46,vars:4,consts:[[1,"create-staff-container"],[1,"create-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","First Name","required",""],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name","required",""],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Full Name","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],[1,"form-group"],["for","staffType"],["id","staffType","formControlName","staffType","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","specializationName"],["id","specializationName","formControlName","specializationName","required",""],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(me(0,"app-sidebar"),g(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),M(5,"Go Back"),_(),g(6,"h2"),M(7,"Create Staff"),_()(),g(8,"form",4),le("ngSubmit",function(){return r.onSubmit()}),g(9,"label",5),M(10,"First Name"),_(),me(11,"input",6),g(12,"label",7),M(13,"Last Name"),_(),me(14,"input",8),g(15,"label",9),M(16,"Full Name"),_(),me(17,"input",10),g(18,"label",11),M(19,"Email"),_(),me(20,"input",12),g(21,"label",13),M(22,"Phone Number"),_(),g(23,"div",14)(24,"div",15),me(25,"input",16),_(),g(26,"div",17),me(27,"input",18),_()(),g(28,"div",14)(29,"div",19)(30,"label",20),M(31,"Staff Type"),_(),g(32,"select",21)(33,"option",22),M(34,"Select Staff Type"),_(),Te(35,Iee,2,2,"option",23),_()(),g(36,"div",19)(37,"label",24),M(38,"Specialization Name"),_(),g(39,"select",25)(40,"option",22),M(41,"Select Specialization"),_(),Te(42,Ree,2,2,"option",23),_()()(),Te(43,kee,2,1,"div",26),g(44,"button",27),M(45,"Create Staff"),_()()()()),i&2&&(A(8),X("formGroup",r.createStaffForm),A(27),X("ngForOf",r.staffTypes),A(7),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,hn,vt,Mn,Zt,Vt,nr,wr,Rr,Nt,Wt],styles:[".create-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.create-staff-container[_ngcontent-%COMP%]   .create-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem 2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#333;margin:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;color:#fff;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var gL=(()=>{class n{constructor(e,i,r,o){this.router=e,this.panelService=i,this.settingsService=r,this.profileService=o}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile")}onSubmit(){let e=localStorage.getItem("token");e?this.settingsService.deleteAccount(e).subscribe(i=>{console.log("Request Finished With Success",i),localStorage.removeItem("token"),this.router.navigate(["/login"]),alert("To complete the account deletion process, please check your email for further instructions.")},i=>{console.error("Account deletion failed",i),alert("Account deletion failed - "+i.error)}):(this.router.navigate(["/login"]),alert("No token found. Please log in again."))}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(Fn),$(Pa),$(bc))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-settings"]],standalone:!0,features:[Je],decls:21,vars:0,consts:[[1,"settings-container"],[1,"settings-content"],[1,"header"],[1,"settings-details"],["id","theme-settings",1,"box"],["type","radio","name","theme","value","light"],["type","radio","name","theme","value","dark","checked",""],["id","account-settings",1,"box"],[1,"delete-account",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Settings"),_()(),g(6,"div",3)(7,"section",4)(8,"h2"),M(9,"Theme"),_(),g(10,"label"),me(11,"input",5),M(12," Light "),_(),g(13,"label"),me(14,"input",6),M(15," Dark "),_()(),g(16,"section",7)(17,"h2"),M(18,"Account"),_(),g(19,"button",8),le("click",function(){return r.onSubmit()}),M(20," Request Account Delete "),_()()()()())},dependencies:[Vt],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.settings-container[_ngcontent-%COMP%]{display:flex;background-color:#161a2d;font-family:Poppins,sans-serif;color:#fff;height:100vh;margin-left:85px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]{flex:1;padding:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]{margin-top:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{background-color:#161a2d;border:1px solid #515253;border-radius:6px;padding:20px;margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;border-bottom:1px solid #515253;padding-bottom:10px;margin-bottom:15px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:1rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:8px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]{background-color:#d73a49;color:#fff;padding:10px 20px;font-size:1rem;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]:hover{background-color:#b92534}"]})}}return n})();var rr=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Admin")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Mt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rS=n=>({"is-invalid":n}),Nee=()=>["/operation-types"];function Fee(n,t){n&1&&(g(0,"div",15),M(1," Name is required. "),_())}function Lee(n,t){n&1&&(g(0,"div",15),M(1," Estimated Duration is required. "),_())}function Uee(n,t){if(n&1){let e=dt();g(0,"div",16),me(1,"input",17),g(2,"button",18),le("click",function(){let r=Oe(e).index,o=ce();return Ae(o.removeSpecialization(r))}),M(3,"Remove"),_()()}if(n&2){let e=t.$implicit,i=t.index;A(),X("formControlName",i)("ngClass",ri(2,rS,e.invalid&&e.touched))}}function Vee(n,t){n&1&&(g(0,"div",19),M(1," At least one specialization is required. "),_())}var _L=(()=>{class n{constructor(e,i,r,o){this.route=e,this.router=i,this.fb=r,this.operationTypeService=o,this.operationTypeName=""}ngOnInit(){this.updateForm=this.fb.group({name:[""],estimatedDuration:[""],specializations:this.fb.array([],Gt.required)}),this.operationTypeName=this.route.snapshot.paramMap.get("name"),this.loadOperationType()}loadOperationType(){this.operationTypeService.getOperationTypeByName(this.operationTypeName).subscribe(e=>{this.updateForm.patchValue({name:e.name,estimatedDuration:e.estimatedDuration});let i=this.updateForm.get("specializations");e.specializations.map(o=>o.specOption).forEach(o=>{i.push(this.fb.control(o,Gt.required))})},e=>{console.error("Error fetching operation type",e)})}updateOperationType(){if(this.updateForm.valid){let e=this.updateForm.value,i={name:e.name,estimatedDuration:e.estimatedDuration,specializations:e.specializations};this.operationTypeService.editOperationType(this.operationTypeName,i).subscribe(()=>{alert("Operation type updated successfully"),this.router.navigate(["/operation-types"])},r=>{console.error("Error updating operation type",r)})}}get specializations(){return this.updateForm.get("specializations")}addSpecialization(){this.specializations.push(this.fb.control("",Gt.required))}removeSpecialization(e){this.specializations.removeAt(e)}static{this.\u0275fac=function(i){return new(i||n)($(tr),$(Mt),$(Sa),$(vs))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-operation-type"]],standalone:!0,features:[Je],decls:26,vars:13,consts:[[1,"update-operation-type-container"],[1,"operation-title",2,"text-align","center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","estimatedDuration"],["type","text","id","estimatedDuration","formControlName","estimatedDuration",1,"form-control",3,"ngClass"],["formArrayName","specializations",1,"form-group"],["class","input-group mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-addSpecialization",3,"click"],["class","invalid-feedback d-block",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-secondary",3,"routerLink"],[1,"invalid-feedback"],[1,"input-group","mb-2"],["type","text","placeholder","Specialization",1,"form-control",3,"formControlName","ngClass"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback","d-block"]],template:function(i,r){if(i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h2",1),M(3,"Update Operation Type"),_(),g(4,"form",2),le("ngSubmit",function(){return r.updateOperationType()}),g(5,"div",3)(6,"label",4),M(7,"Name"),_(),me(8,"input",5),Te(9,Fee,2,0,"div",6),_(),g(10,"div",3)(11,"label",7),M(12,"Estimated Duration"),_(),me(13,"input",8),Te(14,Lee,2,0,"div",6),_(),g(15,"div",9)(16,"label"),M(17,"Specializations"),_(),Te(18,Uee,4,4,"div",10),g(19,"button",11),le("click",function(){return r.addSpecialization()}),M(20,"Add Specialization"),_(),Te(21,Vee,2,0,"div",12),_(),g(22,"button",13),M(23,"Update"),_(),g(24,"a",14),M(25,"Cancel"),_()()()),i&2){let o,s,a,l;A(4),X("formGroup",r.updateForm),A(4),X("ngClass",ri(8,rS,((o=r.updateForm.get("name"))==null?null:o.touched)&&((o=r.updateForm.get("name"))==null?null:o.invalid))),A(),X("ngIf",((s=r.updateForm.get("name"))==null?null:s.touched)&&((s=r.updateForm.get("name"))==null?null:s.invalid)),A(4),X("ngClass",ri(10,rS,((a=r.updateForm.get("estimatedDuration"))==null?null:a.touched)&&((a=r.updateForm.get("estimatedDuration"))==null?null:a.invalid))),A(),X("ngIf",((l=r.updateForm.get("estimatedDuration"))==null?null:l.touched)&&((l=r.updateForm.get("estimatedDuration"))==null?null:l.invalid)),A(4),X("ngForOf",r.specializations.controls),A(3),X("ngIf",r.specializations.invalid&&r.specializations.touched),A(3),X("routerLink",Hi(12,Nee))}},dependencies:[Dt,Yt,kt,Ft,qt,nr,wr,Rr,Cf,Nt,Wt,Vt,vt,To,Mn,Zt],styles:['@charset "UTF-8";.update-operation-type-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:30px;background-color:#fdfdfd;border-radius:12px;box-shadow:0 6px 12px #0000001a;border:1px solid #e6e6e6}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;font-weight:700;color:#333;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:15px;font-weight:500;color:#555;margin-bottom:6px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #ccc;border-radius:6px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#0069d9;outline:none;box-shadow:0 0 5px #007bff4d}.is-invalid[_ngcontent-%COMP%]{border-color:#e63946;box-shadow:0 0 5px #e639464d}.invalid-feedback[_ngcontent-%COMP%]{color:#e63946;font-size:14px;margin-top:5px}button.btn[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease}button.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 4px 8px #007bff33}.btn-secondary[_ngcontent-%COMP%]{background-color:#e63946;color:#fff;margin-top:30px;text-align:center}button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;box-shadow:0 4px 8px #6c757d33}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}a[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;font-size:15px;color:#007bff;font-weight:600;text-decoration:none;text-align:center}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-addSpecialization[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-top:10px}']})}}return n})();var KT="170";var Bee=0,vL=1,zee=2;var UU=1,JT=2,Tl=3,Ia=0,Do=1,Xo=2,Dc=0,jf=1,yL=2,xL=3,bL=4,Hee=5,Vu=100,jee=101,Wee=102,Gee=103,$ee=104,qee=200,Yee=201,Xee=202,Zee=203,LS=204,US=205,Kee=206,Jee=207,Qee=208,ete=209,tte=210,nte=211,ite=212,rte=213,ote=214,VS=0,BS=1,zS=2,qf=3,HS=4,jS=5,WS=6,GS=7,VU=0,ste=1,ate=2,Oc=0,lte=1,cte=2,ute=3,dte=4,fte=5,hte=6,pte=7,CL="attached",mte="detached",ML=300,Yf=301,Xf=302,$S=303,qS=304,Yy=306,sr=1e3,Dl=1001,Cm=1002,$r=1003,QT=1004;var Vf=1005;var Tr=1006,vm=1007;var Po=1008;var Il=1009,BU=1010,zU=1011,Mm=1012,eP=1013,Hu=1014,ra=1015,km=1016,tP=1017,nP=1018,Zf=1020,HU=35902,jU=1021,WU=1022,xs=1023,GU=1024,$U=1025,Wf=1026,Kf=1027,iP=1028,rP=1029,qU=1030,oP=1031;var sP=1033,my=33776,gy=33777,_y=33778,vy=33779,YS=35840,XS=35841,ZS=35842,KS=35843,JS=36196,QS=37492,eT=37496,tT=37808,nT=37809,iT=37810,rT=37811,oT=37812,sT=37813,aT=37814,lT=37815,cT=37816,uT=37817,dT=37818,fT=37819,hT=37820,pT=37821,yy=36492,mT=36494,gT=36495,YU=36283,_T=36284,vT=36285,yT=36286,aP=2200,gte=2201,_te=2202,Jf=2300,Qf=2301,oS=2302,Bf=2400,zf=2401,xy=2402,lP=2500,vte=2501,XU=0,Xy=1,Nm=2,yte=3200,xte=3201;var ZU=0,bte=1,Pc="",Li="srgb",Zr="srgb-linear",Zy="linear",fi="srgb";var wf=7680;var wL=519,Cte=512,Mte=513,wte=514,KU=515,Ete=516,Ste=517,Tte=518,Pte=519,xT=35044;var EL="300 es",Ol=2e3,by=2001,Rl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let r=this._listeners[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},jr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],SL=1234567,ym=Math.PI/180,eh=180/Math.PI;function oa(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(jr[n&255]+jr[n>>8&255]+jr[n>>16&255]+jr[n>>24&255]+"-"+jr[t&255]+jr[t>>8&255]+"-"+jr[t>>16&15|64]+jr[t>>24&255]+"-"+jr[e&63|128]+jr[e>>8&255]+"-"+jr[e>>16&255]+jr[e>>24&255]+jr[i&255]+jr[i>>8&255]+jr[i>>16&255]+jr[i>>24&255]).toLowerCase()}function Gr(n,t,e){return Math.max(t,Math.min(e,n))}function cP(n,t){return(n%t+t)%t}function Dte(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function Ote(n,t,e){return n!==t?(e-n)/(t-n):0}function xm(n,t,e){return(1-e)*n+e*t}function Ate(n,t,e,i){return xm(n,t,1-Math.exp(-e*i))}function Ite(n,t=1){return t-Math.abs(cP(n,t*2)-t)}function Rte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function kte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function Nte(n,t){return n+Math.floor(Math.random()*(t-n+1))}function Fte(n,t){return n+Math.random()*(t-n)}function Lte(n){return n*(.5-Math.random())}function Ute(n){n!==void 0&&(SL=n);let t=SL+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Vte(n){return n*ym}function Bte(n){return n*eh}function zte(n){return(n&n-1)===0&&n!==0}function Hte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function jte(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Wte(n,t,e,i,r){let o=Math.cos,s=Math.sin,a=o(e/2),l=s(e/2),u=o((t+i)/2),f=s((t+i)/2),h=o((t-i)/2),m=s((t-i)/2),p=o((i-t)/2),y=s((i-t)/2);switch(r){case"XYX":n.set(a*f,l*h,l*m,a*u);break;case"YZY":n.set(l*m,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*m,a*f,a*u);break;case"XZX":n.set(a*f,l*y,l*p,a*u);break;case"YXY":n.set(l*p,a*f,l*y,a*u);break;case"ZYZ":n.set(l*y,l*p,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ia(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function oi(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var kr={DEG2RAD:ym,RAD2DEG:eh,generateUUID:oa,clamp:Gr,euclideanModulo:cP,mapLinear:Dte,inverseLerp:Ote,lerp:xm,damp:Ate,pingpong:Ite,smoothstep:Rte,smootherstep:kte,randInt:Nte,randFloat:Fte,randFloatSpread:Lte,seededRandom:Ute,degToRad:Vte,radToDeg:Bte,isPowerOfTwo:zte,ceilPowerOfTwo:Hte,floorPowerOfTwo:jte,setQuaternionFromProperEuler:Wte,normalize:oi,denormalize:ia},dn=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Gr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},xn=class n{constructor(t,e,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,l,u)}set(t,e,i,r,o,s,a,l,u){let f=this.elements;return f[0]=t,f[1]=r,f[2]=a,f[3]=e,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],m=i[2],p=i[5],y=i[8],C=r[0],x=r[3],b=r[6],P=r[1],E=r[4],D=r[7],L=r[2],B=r[5],k=r[8];return o[0]=s*C+a*P+l*L,o[3]=s*x+a*E+l*B,o[6]=s*b+a*D+l*k,o[1]=u*C+f*P+h*L,o[4]=u*x+f*E+h*B,o[7]=u*b+f*D+h*k,o[2]=m*C+p*P+y*L,o[5]=m*x+p*E+y*B,o[8]=m*b+p*D+y*k,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8];return e*s*f-e*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],h=f*s-a*u,m=a*l-f*o,p=u*o-s*l,y=e*h+i*m+r*p;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);let C=1/y;return t[0]=h*C,t[1]=(r*u-f*i)*C,t[2]=(a*i-r*s)*C,t[3]=m*C,t[4]=(f*e-r*l)*C,t[5]=(r*o-a*e)*C,t[6]=p*C,t[7]=(i*l-u*e)*C,t[8]=(s*e-i*o)*C,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+t,-r*u,r*l,-r*(-u*s+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(sS.makeScale(t,e)),this}rotate(t){return this.premultiply(sS.makeRotation(-t)),this}translate(t,e){return this.premultiply(sS.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},sS=new xn;function JU(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function wm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Gte(){let n=wm("canvas");return n.style.display="block",n}var TL={};function gm(n){n in TL||(TL[n]=!0,console.warn(n))}function $te(n,t,e){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}function qte(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function Yte(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var Ln={enabled:!0,workingColorSpace:Zr,spaces:{},convert:function(n,t,e){return this.enabled===!1||t===e||!t||!e||(this.spaces[t].transfer===fi&&(n.r=Al(n.r),n.g=Al(n.g),n.b=Al(n.b)),this.spaces[t].primaries!==this.spaces[e].primaries&&(n.applyMatrix3(this.spaces[t].toXYZ),n.applyMatrix3(this.spaces[e].fromXYZ)),this.spaces[e].transfer===fi&&(n.r=Gf(n.r),n.g=Gf(n.g),n.b=Gf(n.b))),n},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Pc?Zy:this.spaces[n].transfer},getLuminanceCoefficients:function(n,t=this.workingColorSpace){return n.fromArray(this.spaces[t].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,t,e){return n.copy(this.spaces[t].toXYZ).multiply(this.spaces[e].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Al(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Gf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var PL=[.64,.33,.3,.6,.15,.06],DL=[.2126,.7152,.0722],OL=[.3127,.329],AL=new xn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),IL=new xn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Ln.define({[Zr]:{primaries:PL,whitePoint:OL,transfer:Zy,toXYZ:AL,fromXYZ:IL,luminanceCoefficients:DL,workingColorSpaceConfig:{unpackColorSpace:Li},outputColorSpaceConfig:{drawingBufferColorSpace:Li}},[Li]:{primaries:PL,whitePoint:OL,transfer:fi,toXYZ:AL,fromXYZ:IL,luminanceCoefficients:DL,outputColorSpaceConfig:{drawingBufferColorSpace:Li}}});var Ef,bT=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Ef===void 0&&(Ef=wm("canvas")),Ef.width=t.width,Ef.height=t.height;let i=Ef.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Ef}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=wm("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Al(o[s]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Al(e[i]/255)*255):e[i]=Al(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Xte=0,Cy=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Xte++}),this.uuid=oa(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(aS(r[s].image)):o.push(aS(r[s]))}else o=aS(r);i.url=o}return e||(t.images[this.uuid]=i),i}};function aS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?bT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Zte=0,ws=(()=>{class n extends Rl{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Dl,o=Dl,s=Tr,a=Po,l=xs,u=Il,f=n.DEFAULT_ANISOTROPY,h=Pc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Zte++}),this.uuid=oa(),this.name="",this.source=new Cy(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new dn(0,0),this.repeat=new dn(1,1),this.center=new dn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ML)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sr:e.x=e.x-Math.floor(e.x);break;case Dl:e.x=e.x<0?0:1;break;case Cm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sr:e.y=e.y-Math.floor(e.y);break;case Dl:e.y=e.y<0?0:1;break;case Cm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=ML,n.DEFAULT_ANISOTROPY=1,n})(),pn=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,o,l=t.elements,u=l[0],f=l[4],h=l[8],m=l[1],p=l[5],y=l[9],C=l[2],x=l[6],b=l[10];if(Math.abs(f-m)<.01&&Math.abs(h-C)<.01&&Math.abs(y-x)<.01){if(Math.abs(f+m)<.1&&Math.abs(h+C)<.1&&Math.abs(y+x)<.1&&Math.abs(u+p+b-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let E=(u+1)/2,D=(p+1)/2,L=(b+1)/2,B=(f+m)/4,k=(h+C)/4,G=(y+x)/4;return E>D&&E>L?E<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(E),r=B/i,o=k/i):D>L?D<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(D),i=B/r,o=G/r):L<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(L),i=k/o,r=G/o),this.set(i,r,o,e),this}let P=Math.sqrt((x-y)*(x-y)+(h-C)*(h-C)+(m-f)*(m-f));return Math.abs(P)<.001&&(P=1),this.x=(x-y)/P,this.y=(h-C)/P,this.z=(m-f)/P,this.w=Math.acos((u+p+b-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},CT=class extends Rl{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new pn(0,0,t,e),this.scissorTest=!1,this.viewport=new pn(0,0,t,e);let r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Tr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let o=new ws(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new Cy(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},kl=class extends CT{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},My=class extends ws{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=$r,this.minFilter=$r,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var MT=class extends ws{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=$r,this.minFilter=$r,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var qr=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],m=o[s+0],p=o[s+1],y=o[s+2],C=o[s+3];if(a===0){t[e+0]=l,t[e+1]=u,t[e+2]=f,t[e+3]=h;return}if(a===1){t[e+0]=m,t[e+1]=p,t[e+2]=y,t[e+3]=C;return}if(h!==C||l!==m||u!==p||f!==y){let x=1-a,b=l*m+u*p+f*y+h*C,P=b>=0?1:-1,E=1-b*b;if(E>Number.EPSILON){let L=Math.sqrt(E),B=Math.atan2(L,b*P);x=Math.sin(x*B)/L,a=Math.sin(a*B)/L}let D=a*P;if(l=l*x+m*D,u=u*x+p*D,f=f*x+y*D,h=h*x+C*D,x===1-a){let L=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=L,u*=L,f*=L,h*=L}}t[e]=l,t[e+1]=u,t[e+2]=f,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],m=o[s+1],p=o[s+2],y=o[s+3];return t[e]=a*y+f*h+l*p-u*m,t[e+1]=l*y+f*m+u*h-a*p,t[e+2]=u*y+f*p+a*m-l*h,t[e+3]=f*y-a*h-l*m-u*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),m=l(i/2),p=l(r/2),y=l(o/2);switch(s){case"XYZ":this._x=m*f*h+u*p*y,this._y=u*p*h-m*f*y,this._z=u*f*y+m*p*h,this._w=u*f*h-m*p*y;break;case"YXZ":this._x=m*f*h+u*p*y,this._y=u*p*h-m*f*y,this._z=u*f*y-m*p*h,this._w=u*f*h+m*p*y;break;case"ZXY":this._x=m*f*h-u*p*y,this._y=u*p*h+m*f*y,this._z=u*f*y+m*p*h,this._w=u*f*h-m*p*y;break;case"ZYX":this._x=m*f*h-u*p*y,this._y=u*p*h+m*f*y,this._z=u*f*y-m*p*h,this._w=u*f*h+m*p*y;break;case"YZX":this._x=m*f*h+u*p*y,this._y=u*p*h+m*f*y,this._z=u*f*y-m*p*h,this._w=u*f*h-m*p*y;break;case"XZY":this._x=m*f*h-u*p*y,this._y=u*p*h-m*f*y,this._z=u*f*y+m*p*h,this._w=u*f*h+m*p*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],l=e[9],u=e[2],f=e[6],h=e[10],m=i+a+h;if(m>0){let p=.5/Math.sqrt(m+1);this._w=.25/p,this._x=(f-l)*p,this._y=(o-u)*p,this._z=(s-r)*p}else if(i>a&&i>h){let p=2*Math.sqrt(1+i-a-h);this._w=(f-l)/p,this._x=.25*p,this._y=(r+s)/p,this._z=(o+u)/p}else if(a>h){let p=2*Math.sqrt(1+a-i-h);this._w=(o-u)/p,this._x=(r+s)/p,this._y=.25*p,this._z=(l+f)/p}else{let p=2*Math.sqrt(1+h-i-a);this._w=(s-r)/p,this._x=(o+u)/p,this._y=(l+f)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Gr(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,o=t._z,s=t._w,a=e._x,l=e._y,u=e._z,f=e._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let p=1-e;return this._w=p*s+e*this._w,this._x=p*i+e*this._x,this._y=p*r+e*this._y,this._z=p*o+e*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-e)*f)/u,m=Math.sin(e*f)/u;return this._w=s*h+this._w*m,this._x=i*h+this._x*m,this._y=r*h+this._y*m,this._z=o*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},te=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(RL.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(RL.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*r,this.y=o[1]*e+o[4]*i+o[7]*r,this.z=o[2]*e+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,o=t.x,s=t.y,a=t.z,l=t.w,u=2*(s*r-a*i),f=2*(a*e-o*r),h=2*(o*i-s*e);return this.x=e+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r,this.y=o[1]*e+o[5]*i+o[9]*r,this.z=o[2]*e+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,o=t.z,s=e.x,a=e.y,l=e.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return lS.copy(this).projectOnVector(t),this.sub(lS)}reflect(t){return this.sub(lS.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Gr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},lS=new te,RL=new qr,Ki=class{constructor(t=new te(1/0,1/0,1/0),e=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(ea.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(ea.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=ea.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,ea):ea.fromBufferAttribute(o,s),ea.applyMatrix4(t.matrixWorld),this.expandByPoint(ea);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Hv.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Hv.copy(i.boundingBox)),Hv.applyMatrix4(t.matrixWorld),this.union(Hv)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ea),ea.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(lm),jv.subVectors(this.max,lm),Sf.subVectors(t.a,lm),Tf.subVectors(t.b,lm),Pf.subVectors(t.c,lm),Cc.subVectors(Tf,Sf),Mc.subVectors(Pf,Tf),Iu.subVectors(Sf,Pf);let e=[0,-Cc.z,Cc.y,0,-Mc.z,Mc.y,0,-Iu.z,Iu.y,Cc.z,0,-Cc.x,Mc.z,0,-Mc.x,Iu.z,0,-Iu.x,-Cc.y,Cc.x,0,-Mc.y,Mc.x,0,-Iu.y,Iu.x,0];return!cS(e,Sf,Tf,Pf,jv)||(e=[1,0,0,0,1,0,0,0,1],!cS(e,Sf,Tf,Pf,jv))?!1:(Wv.crossVectors(Cc,Mc),e=[Wv.x,Wv.y,Wv.z],cS(e,Sf,Tf,Pf,jv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ea).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(ea).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(bl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},bl=[new te,new te,new te,new te,new te,new te,new te,new te],ea=new te,Hv=new Ki,Sf=new te,Tf=new te,Pf=new te,Cc=new te,Mc=new te,Iu=new te,lm=new te,jv=new te,Wv=new te,Ru=new te;function cS(n,t,e,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Ru.fromArray(n,o);let a=r.x*Math.abs(Ru.x)+r.y*Math.abs(Ru.y)+r.z*Math.abs(Ru.z),l=t.dot(Ru),u=e.dot(Ru),f=i.dot(Ru);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var Kte=new Ki,cm=new te,uS=new te,Zo=class{constructor(t=new te,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):Kte.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;cm.subVectors(t,this.center);let e=cm.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(cm,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(uS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(cm.copy(t.center).add(uS)),this.expandByPoint(cm.copy(t.center).sub(uS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Cl=new te,dS=new te,Gv=new te,wc=new te,fS=new te,$v=new te,hS=new te,ju=class{constructor(t=new te,e=new te(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Cl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Cl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Cl.copy(this.origin).addScaledVector(this.direction,e),Cl.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){dS.copy(t).add(e).multiplyScalar(.5),Gv.copy(e).sub(t).normalize(),wc.copy(this.origin).sub(dS);let o=t.distanceTo(e)*.5,s=-this.direction.dot(Gv),a=wc.dot(this.direction),l=-wc.dot(Gv),u=wc.lengthSq(),f=Math.abs(1-s*s),h,m,p,y;if(f>0)if(h=s*l-a,m=s*a-l,y=o*f,h>=0)if(m>=-y)if(m<=y){let C=1/f;h*=C,m*=C,p=h*(h+s*m+2*a)+m*(s*h+m+2*l)+u}else m=o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;else m=-o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;else m<=-y?(h=Math.max(0,-(-s*o+a)),m=h>0?-o:Math.min(Math.max(-o,-l),o),p=-h*h+m*(m+2*l)+u):m<=y?(h=0,m=Math.min(Math.max(-o,-l),o),p=m*(m+2*l)+u):(h=Math.max(0,-(s*o+a)),m=h>0?o:Math.min(Math.max(-o,-l),o),p=-h*h+m*(m+2*l)+u);else m=s>0?-o:o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(dS).addScaledVector(Gv,m),p}intersectSphere(t,e){Cl.subVectors(t.center,this.origin);let i=Cl.dot(this.direction),r=Cl.dot(Cl)-i*i,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,m=this.origin;return u>=0?(i=(t.min.x-m.x)*u,r=(t.max.x-m.x)*u):(i=(t.max.x-m.x)*u,r=(t.min.x-m.x)*u),f>=0?(o=(t.min.y-m.y)*f,s=(t.max.y-m.y)*f):(o=(t.max.y-m.y)*f,s=(t.min.y-m.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(t.min.z-m.z)*h,l=(t.max.z-m.z)*h):(a=(t.max.z-m.z)*h,l=(t.min.z-m.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,Cl)!==null}intersectTriangle(t,e,i,r,o){fS.subVectors(e,t),$v.subVectors(i,t),hS.crossVectors(fS,$v);let s=this.direction.dot(hS),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;wc.subVectors(this.origin,t);let l=a*this.direction.dot($v.crossVectors(wc,$v));if(l<0)return null;let u=a*this.direction.dot(fS.cross(wc));if(u<0||l+u>s)return null;let f=-a*wc.dot(hS);return f<0?null:this.at(f/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},an=class n{constructor(t,e,i,r,o,s,a,l,u,f,h,m,p,y,C,x){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,l,u,f,h,m,p,y,C,x)}set(t,e,i,r,o,s,a,l,u,f,h,m,p,y,C,x){let b=this.elements;return b[0]=t,b[4]=e,b[8]=i,b[12]=r,b[1]=o,b[5]=s,b[9]=a,b[13]=l,b[2]=u,b[6]=f,b[10]=h,b[14]=m,b[3]=p,b[7]=y,b[11]=C,b[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/Df.setFromMatrixColumn(t,0).length(),o=1/Df.setFromMatrixColumn(t,1).length(),s=1/Df.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(t.order==="XYZ"){let m=s*f,p=s*h,y=a*f,C=a*h;e[0]=l*f,e[4]=-l*h,e[8]=u,e[1]=p+y*u,e[5]=m-C*u,e[9]=-a*l,e[2]=C-m*u,e[6]=y+p*u,e[10]=s*l}else if(t.order==="YXZ"){let m=l*f,p=l*h,y=u*f,C=u*h;e[0]=m+C*a,e[4]=y*a-p,e[8]=s*u,e[1]=s*h,e[5]=s*f,e[9]=-a,e[2]=p*a-y,e[6]=C+m*a,e[10]=s*l}else if(t.order==="ZXY"){let m=l*f,p=l*h,y=u*f,C=u*h;e[0]=m-C*a,e[4]=-s*h,e[8]=y+p*a,e[1]=p+y*a,e[5]=s*f,e[9]=C-m*a,e[2]=-s*u,e[6]=a,e[10]=s*l}else if(t.order==="ZYX"){let m=s*f,p=s*h,y=a*f,C=a*h;e[0]=l*f,e[4]=y*u-p,e[8]=m*u+C,e[1]=l*h,e[5]=C*u+m,e[9]=p*u-y,e[2]=-u,e[6]=a*l,e[10]=s*l}else if(t.order==="YZX"){let m=s*l,p=s*u,y=a*l,C=a*u;e[0]=l*f,e[4]=C-m*h,e[8]=y*h+p,e[1]=h,e[5]=s*f,e[9]=-a*f,e[2]=-u*f,e[6]=p*h+y,e[10]=m-C*h}else if(t.order==="XZY"){let m=s*l,p=s*u,y=a*l,C=a*u;e[0]=l*f,e[4]=-h,e[8]=u*f,e[1]=m*h+C,e[5]=s*f,e[9]=p*h-y,e[2]=y*h-p,e[6]=a*f,e[10]=C*h+m}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Jte,t,Qte)}lookAt(t,e,i){let r=this.elements;return qo.subVectors(t,e),qo.lengthSq()===0&&(qo.z=1),qo.normalize(),Ec.crossVectors(i,qo),Ec.lengthSq()===0&&(Math.abs(i.z)===1?qo.x+=1e-4:qo.z+=1e-4,qo.normalize(),Ec.crossVectors(i,qo)),Ec.normalize(),qv.crossVectors(qo,Ec),r[0]=Ec.x,r[4]=qv.x,r[8]=qo.x,r[1]=Ec.y,r[5]=qv.y,r[9]=qo.y,r[2]=Ec.z,r[6]=qv.z,r[10]=qo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],m=i[9],p=i[13],y=i[2],C=i[6],x=i[10],b=i[14],P=i[3],E=i[7],D=i[11],L=i[15],B=r[0],k=r[4],G=r[8],F=r[12],T=r[1],N=r[5],S=r[9],q=r[13],oe=r[2],ee=r[6],ge=r[10],se=r[14],de=r[3],J=r[7],Q=r[11],Ie=r[15];return o[0]=s*B+a*T+l*oe+u*de,o[4]=s*k+a*N+l*ee+u*J,o[8]=s*G+a*S+l*ge+u*Q,o[12]=s*F+a*q+l*se+u*Ie,o[1]=f*B+h*T+m*oe+p*de,o[5]=f*k+h*N+m*ee+p*J,o[9]=f*G+h*S+m*ge+p*Q,o[13]=f*F+h*q+m*se+p*Ie,o[2]=y*B+C*T+x*oe+b*de,o[6]=y*k+C*N+x*ee+b*J,o[10]=y*G+C*S+x*ge+b*Q,o[14]=y*F+C*q+x*se+b*Ie,o[3]=P*B+E*T+D*oe+L*de,o[7]=P*k+E*N+D*ee+L*J,o[11]=P*G+E*S+D*ge+L*Q,o[15]=P*F+E*q+D*se+L*Ie,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],o=t[12],s=t[1],a=t[5],l=t[9],u=t[13],f=t[2],h=t[6],m=t[10],p=t[14],y=t[3],C=t[7],x=t[11],b=t[15];return y*(+o*l*h-r*u*h-o*a*m+i*u*m+r*a*p-i*l*p)+C*(+e*l*p-e*u*m+o*s*m-r*s*p+r*u*f-o*l*f)+x*(+e*u*h-e*a*p-o*s*h+i*s*p+o*a*f-i*u*f)+b*(-r*a*f-e*l*h+e*a*m+r*s*h-i*s*m+i*l*f)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],h=t[9],m=t[10],p=t[11],y=t[12],C=t[13],x=t[14],b=t[15],P=h*x*u-C*m*u+C*l*p-a*x*p-h*l*b+a*m*b,E=y*m*u-f*x*u-y*l*p+s*x*p+f*l*b-s*m*b,D=f*C*u-y*h*u+y*a*p-s*C*p-f*a*b+s*h*b,L=y*h*l-f*C*l-y*a*m+s*C*m+f*a*x-s*h*x,B=e*P+i*E+r*D+o*L;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let k=1/B;return t[0]=P*k,t[1]=(C*m*o-h*x*o-C*r*p+i*x*p+h*r*b-i*m*b)*k,t[2]=(a*x*o-C*l*o+C*r*u-i*x*u-a*r*b+i*l*b)*k,t[3]=(h*l*o-a*m*o-h*r*u+i*m*u+a*r*p-i*l*p)*k,t[4]=E*k,t[5]=(f*x*o-y*m*o+y*r*p-e*x*p-f*r*b+e*m*b)*k,t[6]=(y*l*o-s*x*o-y*r*u+e*x*u+s*r*b-e*l*b)*k,t[7]=(s*m*o-f*l*o+f*r*u-e*m*u-s*r*p+e*l*p)*k,t[8]=D*k,t[9]=(y*h*o-f*C*o-y*i*p+e*C*p+f*i*b-e*h*b)*k,t[10]=(s*C*o-y*a*o+y*i*u-e*C*u-s*i*b+e*a*b)*k,t[11]=(f*a*o-s*h*o-f*i*u+e*h*u+s*i*p-e*a*p)*k,t[12]=L*k,t[13]=(f*C*r-y*h*r+y*i*m-e*C*m-f*i*x+e*h*x)*k,t[14]=(y*a*r-s*C*r-y*i*l+e*C*l+s*i*x-e*a*x)*k,t[15]=(s*h*r-f*a*r+f*i*l-e*h*l-s*i*m+e*a*m)*k,this}scale(t){let e=this.elements,i=t.x,r=t.y,o=t.z;return e[0]*=i,e[4]*=r,e[8]*=o,e[1]*=i,e[5]*=r,e[9]*=o,e[2]*=i,e[6]*=r,e[10]*=o,e[3]*=i,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),o=1-i,s=t.x,a=t.y,l=t.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,o,s){return this.set(1,i,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,o=e._x,s=e._y,a=e._z,l=e._w,u=o+o,f=s+s,h=a+a,m=o*u,p=o*f,y=o*h,C=s*f,x=s*h,b=a*h,P=l*u,E=l*f,D=l*h,L=i.x,B=i.y,k=i.z;return r[0]=(1-(C+b))*L,r[1]=(p+D)*L,r[2]=(y-E)*L,r[3]=0,r[4]=(p-D)*B,r[5]=(1-(m+b))*B,r[6]=(x+P)*B,r[7]=0,r[8]=(y+E)*k,r[9]=(x-P)*k,r[10]=(1-(m+C))*k,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,o=Df.set(r[0],r[1],r[2]).length(),s=Df.set(r[4],r[5],r[6]).length(),a=Df.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],ta.copy(this);let u=1/o,f=1/s,h=1/a;return ta.elements[0]*=u,ta.elements[1]*=u,ta.elements[2]*=u,ta.elements[4]*=f,ta.elements[5]*=f,ta.elements[6]*=f,ta.elements[8]*=h,ta.elements[9]*=h,ta.elements[10]*=h,e.setFromRotationMatrix(ta),i.x=o,i.y=s,i.z=a,this}makePerspective(t,e,i,r,o,s,a=Ol){let l=this.elements,u=2*o/(e-t),f=2*o/(i-r),h=(e+t)/(e-t),m=(i+r)/(i-r),p,y;if(a===Ol)p=-(s+o)/(s-o),y=-2*s*o/(s-o);else if(a===by)p=-s/(s-o),y=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,i,r,o,s,a=Ol){let l=this.elements,u=1/(e-t),f=1/(i-r),h=1/(s-o),m=(e+t)*u,p=(i+r)*f,y,C;if(a===Ol)y=(s+o)*h,C=-2*h;else if(a===by)y=o*h,C=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=C,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Df=new te,ta=new an,Jte=new te(0,0,0),Qte=new te(1,1,1),Ec=new te,qv=new te,qo=new te,kL=new an,NL=new qr,Wu=(()=>{class n{constructor(e=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,o=this._order){return this._x=e,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let o=e.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],m=o[2],p=o[6],y=o[10];switch(i){case"XYZ":this._y=Math.asin(Gr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Gr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Gr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Gr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(p,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Gr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-Gr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return kL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kL,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return NL.setFromEuler(this),this.setFromQuaternion(NL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Em=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},ene=0,FL=new te,Of=new qr,Ml=new an,Yv=new te,um=new te,tne=new te,nne=new qr,LL=new te(1,0,0),UL=new te(0,1,0),VL=new te(0,0,1),BL={type:"added"},ine={type:"removed"},Af={type:"childadded",child:null},pS={type:"childremoved",child:null},hr=(()=>{class n extends Rl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ene++}),this.uuid=oa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new te,i=new Wu,r=new qr,o=new te(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new an},normalMatrix:{value:new xn}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Em,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Of.setFromAxisAngle(e,i),this.quaternion.multiply(Of),this}rotateOnWorldAxis(e,i){return Of.setFromAxisAngle(e,i),this.quaternion.premultiply(Of),this}rotateX(e){return this.rotateOnAxis(LL,e)}rotateY(e){return this.rotateOnAxis(UL,e)}rotateZ(e){return this.rotateOnAxis(VL,e)}translateOnAxis(e,i){return FL.copy(e).applyQuaternion(this.quaternion),this.position.add(FL.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(LL,e)}translateY(e){return this.translateOnAxis(UL,e)}translateZ(e){return this.translateOnAxis(VL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ml.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?Yv.copy(e):Yv.set(e,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),um.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ml.lookAt(um,Yv,this.up):Ml.lookAt(Yv,um,this.up),this.quaternion.setFromRotationMatrix(Ml),o&&(Ml.extractRotation(o.matrixWorld),Of.setFromRotationMatrix(Ml),this.quaternion.premultiply(Of.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(BL),Af.child=e,this.dispatchEvent(Af),Af.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(ine),pS.child=e,this.dispatchEvent(pS),pS.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ml.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ml.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ml),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(BL),Af.child=e,this.dispatchEvent(Af),Af.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(um,e,tne),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(um,nne,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let m=u[f];s(e.shapes,m)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(e.materials,this.material[u]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(e.animations,u))}}if(i){let l=a(e.geometries),u=a(e.materials),f=a(e.textures),h=a(e.images),m=a(e.shapes),p=a(e.skeletons),y=a(e.animations),C=a(e.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),m.length>0&&(r.shapes=m),p.length>0&&(r.skeletons=p),y.length>0&&(r.animations=y),C.length>0&&(r.nodes=C)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new te(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),na=new te,wl=new te,mS=new te,El=new te,If=new te,Rf=new te,zL=new te,gS=new te,_S=new te,vS=new te,yS=new pn,xS=new pn,bS=new pn,Bu=class n{constructor(t=new te,e=new te,i=new te){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),na.subVectors(t,e),r.cross(na);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,i,r,o){na.subVectors(r,e),wl.subVectors(i,e),mS.subVectors(t,e);let s=na.dot(na),a=na.dot(wl),l=na.dot(mS),u=wl.dot(wl),f=wl.dot(mS),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let m=1/h,p=(u*l-a*f)*m,y=(s*f-a*l)*m;return o.set(1-p-y,y,p)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,El)===null?!1:El.x>=0&&El.y>=0&&El.x+El.y<=1}static getInterpolation(t,e,i,r,o,s,a,l){return this.getBarycoord(t,e,i,r,El)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,El.x),l.addScaledVector(s,El.y),l.addScaledVector(a,El.z),l)}static getInterpolatedAttribute(t,e,i,r,o,s){return yS.setScalar(0),xS.setScalar(0),bS.setScalar(0),yS.fromBufferAttribute(t,e),xS.fromBufferAttribute(t,i),bS.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(yS,o.x),s.addScaledVector(xS,o.y),s.addScaledVector(bS,o.z),s}static isFrontFacing(t,e,i,r){return na.subVectors(i,e),wl.subVectors(t,e),na.cross(wl).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return na.subVectors(this.c,this.b),wl.subVectors(this.a,this.b),na.cross(wl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,o){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,o)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,o=this.c,s,a;If.subVectors(r,i),Rf.subVectors(o,i),gS.subVectors(t,i);let l=If.dot(gS),u=Rf.dot(gS);if(l<=0&&u<=0)return e.copy(i);_S.subVectors(t,r);let f=If.dot(_S),h=Rf.dot(_S);if(f>=0&&h<=f)return e.copy(r);let m=l*h-f*u;if(m<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(i).addScaledVector(If,s);vS.subVectors(t,o);let p=If.dot(vS),y=Rf.dot(vS);if(y>=0&&p<=y)return e.copy(o);let C=p*u-l*y;if(C<=0&&u>=0&&y<=0)return a=u/(u-y),e.copy(i).addScaledVector(Rf,a);let x=f*y-p*h;if(x<=0&&h-f>=0&&p-y>=0)return zL.subVectors(o,r),a=(h-f)/(h-f+(p-y)),e.copy(r).addScaledVector(zL,a);let b=1/(x+C+m);return s=C*b,a=m*b,e.copy(i).addScaledVector(If,s).addScaledVector(Rf,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},QU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sc={h:0,s:0,l:0},Xv={h:0,s:0,l:0};function CS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var Bt=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Li){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Ln.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Ln.workingColorSpace){return this.r=t,this.g=e,this.b=i,Ln.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Ln.workingColorSpace){if(t=cP(t,1),e=Gr(e,0,1),i=Gr(i,0,1),e===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=CS(s,o,t+1/3),this.g=CS(s,o,t),this.b=CS(s,o,t-1/3)}return Ln.toWorkingColorSpace(this,r),this}setStyle(t,e=Li){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Li){let i=QU[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Al(t.r),this.g=Al(t.g),this.b=Al(t.b),this}copyLinearToSRGB(t){return this.r=Gf(t.r),this.g=Gf(t.g),this.b=Gf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Li){return Ln.fromWorkingColorSpace(Wr.copy(this),t),Math.round(Gr(Wr.r*255,0,255))*65536+Math.round(Gr(Wr.g*255,0,255))*256+Math.round(Gr(Wr.b*255,0,255))}getHexString(t=Li){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Ln.workingColorSpace){Ln.fromWorkingColorSpace(Wr.copy(this),e);let i=Wr.r,r=Wr.g,o=Wr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,e=Ln.workingColorSpace){return Ln.fromWorkingColorSpace(Wr.copy(this),e),t.r=Wr.r,t.g=Wr.g,t.b=Wr.b,t}getStyle(t=Li){Ln.fromWorkingColorSpace(Wr.copy(this),t);let e=Wr.r,i=Wr.g,r=Wr.b;return t!==Li?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Sc),this.setHSL(Sc.h+t,Sc.s+e,Sc.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Sc),t.getHSL(Xv);let i=xm(Sc.h,Xv.h,e),r=xm(Sc.s,Xv.s,e),o=xm(Sc.l,Xv.l,e);return this.setHSL(i,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*r,this.g=o[1]*e+o[4]*i+o[7]*r,this.b=o[2]*e+o[5]*i+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Wr=new Bt;Bt.NAMES=QU;var rne=0,Yr=class extends Rl{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rne++}),this.uuid=oa(),this.name="",this.blending=jf,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=LS,this.blendDst=US,this.blendEquation=Vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=qf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wf,this.stencilZFail=wf,this.stencilZPass=wf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==jf&&(i.blending=this.blending),this.side!==Ia&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==LS&&(i.blendSrc=this.blendSrc),this.blendDst!==US&&(i.blendDst=this.blendDst),this.blendEquation!==Vu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==qf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wL&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==wf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==wf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},Ra=class extends Yr{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wu,this.combine=VU,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var or=new te,Zv=new dn,Pi=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=xT,this.updateRanges=[],this.gpuType=ra,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Zv.fromBufferAttribute(this,e),Zv.applyMatrix3(t),this.setXY(e,Zv.x,Zv.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix3(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix4(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyNormalMatrix(t),this.setXYZ(e,or.x,or.y,or.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.transformDirection(t),this.setXYZ(e,or.x,or.y,or.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=ia(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=oi(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ia(e,this.array)),e}setX(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ia(e,this.array)),e}setY(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ia(e,this.array)),e}setZ(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ia(e,this.array)),e}setW(t,e){return this.normalized&&(e=oi(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=oi(e,this.array),i=oi(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=oi(e,this.array),i=oi(i,this.array),r=oi(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=oi(e,this.array),i=oi(i,this.array),r=oi(r,this.array),o=oi(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==xT&&(t.usage=this.usage),t}};var wy=class extends Pi{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var Ey=class extends Pi{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var bs=class extends Pi{constructor(t,e,i){super(new Float32Array(t),e,i)}},one=0,ys=new an,MS=new hr,kf=new te,Yo=new Ki,dm=new Ki,Sr=new te,Oo=class n extends Rl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:one++}),this.uuid=oa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(JU(t)?Ey:wy)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new xn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return ys.makeRotationFromQuaternion(t),this.applyMatrix4(ys),this}rotateX(t){return ys.makeRotationX(t),this.applyMatrix4(ys),this}rotateY(t){return ys.makeRotationY(t),this.applyMatrix4(ys),this}rotateZ(t){return ys.makeRotationZ(t),this.applyMatrix4(ys),this}translate(t,e,i){return ys.makeTranslation(t,e,i),this.applyMatrix4(ys),this}scale(t,e,i){return ys.makeScale(t,e,i),this.applyMatrix4(ys),this}lookAt(t){return MS.lookAt(t),MS.updateMatrix(),this.applyMatrix4(MS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kf).negate(),this.translate(kf.x,kf.y,kf.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,o=t.length;r<o;r++){let s=t[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new bs(i,3))}else{for(let i=0,r=e.count;i<r;i++){let o=t[i];e.setXYZ(i,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ki);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let o=e[i];Yo.setFromBufferAttribute(o),this.morphTargetsRelative?(Sr.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(Sr),Sr.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(Sr)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zo);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new te,1/0);return}if(t){let i=this.boundingSphere.center;if(Yo.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let a=e[o];dm.setFromBufferAttribute(a),this.morphTargetsRelative?(Sr.addVectors(Yo.min,dm.min),Yo.expandByPoint(Sr),Sr.addVectors(Yo.max,dm.max),Yo.expandByPoint(Sr)):(Yo.expandByPoint(dm.min),Yo.expandByPoint(dm.max))}Yo.getCenter(i);let r=0;for(let o=0,s=t.count;o<s;o++)Sr.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(Sr));if(e)for(let o=0,s=e.length;o<s;o++){let a=e[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Sr.fromBufferAttribute(a,u),l&&(kf.fromBufferAttribute(t,u),Sr.add(kf)),r=Math.max(r,i.distanceToSquared(Sr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let G=0;G<i.count;G++)a[G]=new te,l[G]=new te;let u=new te,f=new te,h=new te,m=new dn,p=new dn,y=new dn,C=new te,x=new te;function b(G,F,T){u.fromBufferAttribute(i,G),f.fromBufferAttribute(i,F),h.fromBufferAttribute(i,T),m.fromBufferAttribute(o,G),p.fromBufferAttribute(o,F),y.fromBufferAttribute(o,T),f.sub(u),h.sub(u),p.sub(m),y.sub(m);let N=1/(p.x*y.y-y.x*p.y);isFinite(N)&&(C.copy(f).multiplyScalar(y.y).addScaledVector(h,-p.y).multiplyScalar(N),x.copy(h).multiplyScalar(p.x).addScaledVector(f,-y.x).multiplyScalar(N),a[G].add(C),a[F].add(C),a[T].add(C),l[G].add(x),l[F].add(x),l[T].add(x))}let P=this.groups;P.length===0&&(P=[{start:0,count:t.count}]);for(let G=0,F=P.length;G<F;++G){let T=P[G],N=T.start,S=T.count;for(let q=N,oe=N+S;q<oe;q+=3)b(t.getX(q+0),t.getX(q+1),t.getX(q+2))}let E=new te,D=new te,L=new te,B=new te;function k(G){L.fromBufferAttribute(r,G),B.copy(L);let F=a[G];E.copy(F),E.sub(L.multiplyScalar(L.dot(F))).normalize(),D.crossVectors(B,F);let N=D.dot(l[G])<0?-1:1;s.setXYZW(G,E.x,E.y,E.z,N)}for(let G=0,F=P.length;G<F;++G){let T=P[G],N=T.start,S=T.count;for(let q=N,oe=N+S;q<oe;q+=3)k(t.getX(q+0)),k(t.getX(q+1)),k(t.getX(q+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Pi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let m=0,p=i.count;m<p;m++)i.setXYZ(m,0,0,0);let r=new te,o=new te,s=new te,a=new te,l=new te,u=new te,f=new te,h=new te;if(t)for(let m=0,p=t.count;m<p;m+=3){let y=t.getX(m+0),C=t.getX(m+1),x=t.getX(m+2);r.fromBufferAttribute(e,y),o.fromBufferAttribute(e,C),s.fromBufferAttribute(e,x),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,C),u.fromBufferAttribute(i,x),a.add(f),l.add(f),u.add(f),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(C,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let m=0,p=e.count;m<p;m+=3)r.fromBufferAttribute(e,m+0),o.fromBufferAttribute(e,m+1),s.fromBufferAttribute(e,m+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Sr.fromBufferAttribute(t,e),Sr.normalize(),t.setXYZ(e,Sr.x,Sr.y,Sr.z)}toNonIndexed(){function t(a,l){let u=a.array,f=a.itemSize,h=a.normalized,m=new u.constructor(l.length*f),p=0,y=0;for(let C=0,x=l.length;C<x;C++){a.isInterleavedBufferAttribute?p=l[C]*a.data.stride+a.offset:p=l[C]*f;for(let b=0;b<f;b++)m[y++]=u[p++]}return new Pi(m,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=t(l,i);e.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let m=u[f],p=t(m,i);l.push(p)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let l in i){let u=i[l];t.data.attributes[l]=u.toJSON(t.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,m=u.length;h<m;h++){let p=u[h];f.push(p.toJSON(t.data))}f.length>0&&(r[l]=f,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let r=t.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(e))}let o=t.morphAttributes;for(let u in o){let f=[],h=o[u];for(let m=0,p=h.length;m<p;m++)f.push(h[m].clone(e));this.morphAttributes[u]=f}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},HL=new an,ku=new ju,Kv=new Zo,jL=new te,Jv=new te,Qv=new te,ey=new te,wS=new te,ty=new te,WL=new te,ny=new te,wi=class extends hr{constructor(t=new Oo,e=new Ra){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(o&&a){ty.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(wS.fromBufferAttribute(h,t),s?ty.addScaledVector(wS,f):ty.addScaledVector(wS.sub(e),f))}e.add(ty)}return e}raycast(t,e){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Kv.copy(i.boundingSphere),Kv.applyMatrix4(o),ku.copy(t.ray).recast(t.near),!(Kv.containsPoint(ku.origin)===!1&&(ku.intersectSphere(Kv,jL)===null||ku.origin.distanceToSquared(jL)>(t.far-t.near)**2))&&(HL.copy(o).invert(),ku.copy(t.ray).applyMatrix4(HL),!(i.boundingBox!==null&&ku.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,ku)))}_computeIntersections(t,e,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,m=o.groups,p=o.drawRange;if(a!==null)if(Array.isArray(s))for(let y=0,C=m.length;y<C;y++){let x=m[y],b=s[x.materialIndex],P=Math.max(x.start,p.start),E=Math.min(a.count,Math.min(x.start+x.count,p.start+p.count));for(let D=P,L=E;D<L;D+=3){let B=a.getX(D),k=a.getX(D+1),G=a.getX(D+2);r=iy(this,b,t,i,u,f,h,B,k,G),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=x.materialIndex,e.push(r))}}else{let y=Math.max(0,p.start),C=Math.min(a.count,p.start+p.count);for(let x=y,b=C;x<b;x+=3){let P=a.getX(x),E=a.getX(x+1),D=a.getX(x+2);r=iy(this,s,t,i,u,f,h,P,E,D),r&&(r.faceIndex=Math.floor(x/3),e.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let y=0,C=m.length;y<C;y++){let x=m[y],b=s[x.materialIndex],P=Math.max(x.start,p.start),E=Math.min(l.count,Math.min(x.start+x.count,p.start+p.count));for(let D=P,L=E;D<L;D+=3){let B=D,k=D+1,G=D+2;r=iy(this,b,t,i,u,f,h,B,k,G),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=x.materialIndex,e.push(r))}}else{let y=Math.max(0,p.start),C=Math.min(l.count,p.start+p.count);for(let x=y,b=C;x<b;x+=3){let P=x,E=x+1,D=x+2;r=iy(this,s,t,i,u,f,h,P,E,D),r&&(r.faceIndex=Math.floor(x/3),e.push(r))}}}};function sne(n,t,e,i,r,o,s,a){let l;if(t.side===Do?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,t.side===Ia,a),l===null)return null;ny.copy(a),ny.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo(ny);return u<e.near||u>e.far?null:{distance:u,point:ny.clone(),object:n}}function iy(n,t,e,i,r,o,s,a,l,u){n.getVertexPosition(a,Jv),n.getVertexPosition(l,Qv),n.getVertexPosition(u,ey);let f=sne(n,t,e,i,Jv,Qv,ey,WL);if(f){let h=new te;Bu.getBarycoord(WL,Jv,Qv,ey,h),r&&(f.uv=Bu.getInterpolatedAttribute(r,a,l,u,h,new dn)),o&&(f.uv1=Bu.getInterpolatedAttribute(o,a,l,u,h,new dn)),s&&(f.normal=Bu.getInterpolatedAttribute(s,a,l,u,h,new te),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let m={a,b:l,c:u,normal:new te,materialIndex:0};Bu.getNormal(Jv,Qv,ey,m.normal),f.face=m,f.barycoord=h}return f}var Sm=class n extends Oo{constructor(t=1,e=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],m=0,p=0;y("z","y","x",-1,-1,i,e,t,s,o,0),y("z","y","x",1,-1,i,e,-t,s,o,1),y("x","z","y",1,1,t,i,e,r,s,2),y("x","z","y",1,-1,t,i,-e,r,s,3),y("x","y","z",1,-1,t,e,i,r,o,4),y("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new bs(u,3)),this.setAttribute("normal",new bs(f,3)),this.setAttribute("uv",new bs(h,2));function y(C,x,b,P,E,D,L,B,k,G,F){let T=D/k,N=L/G,S=D/2,q=L/2,oe=B/2,ee=k+1,ge=G+1,se=0,de=0,J=new te;for(let Q=0;Q<ge;Q++){let Ie=Q*N-q;for(let Le=0;Le<ee;Le++){let ke=Le*T-S;J[C]=ke*P,J[x]=Ie*E,J[b]=oe,u.push(J.x,J.y,J.z),J[C]=0,J[x]=0,J[b]=B>0?1:-1,f.push(J.x,J.y,J.z),h.push(Le/k),h.push(1-Q/G),se+=1}}for(let Q=0;Q<G;Q++)for(let Ie=0;Ie<k;Ie++){let Le=m+Ie+ee*Q,ke=m+Ie+ee*(Q+1),Ce=m+(Ie+1)+ee*(Q+1),He=m+(Ie+1)+ee*Q;l.push(Le,ke,He),l.push(ke,Ce,He),de+=6}a.addGroup(p,de,F),p+=de,m+=se}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function th(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function po(n){let t={};for(let e=0;e<n.length;e++){let i=th(n[e]);for(let r in i)t[r]=i[r]}return t}function ane(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function eV(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Ln.workingColorSpace}var lne={clone:th,merge:po},cne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,une=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ka=class extends Yr{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=cne,this.fragmentShader=une,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=th(t.uniforms),this.uniformsGroups=ane(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},Sy=class extends hr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an,this.coordinateSystem=Ol}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Tc=new te,GL=new dn,$L=new dn,fr=class extends Sy{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=eh*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(ym*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return eh*2*Math.atan(Math.tan(ym*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Tc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Tc.x,Tc.y).multiplyScalar(-t/Tc.z),Tc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Tc.x,Tc.y).multiplyScalar(-t/Tc.z)}getViewSize(t,e){return this.getViewBounds(t,GL,$L),e.subVectors($L,GL)}setViewOffset(t,e,i,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(ym*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,e-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Nf=-90,Ff=1,wT=class extends hr{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new fr(Nf,Ff,t,e);r.layers=this.layers,this.add(r);let o=new fr(Nf,Ff,t,e);o.layers=this.layers,this.add(o);let s=new fr(Nf,Ff,t,e);s.layers=this.layers,this.add(s);let a=new fr(Nf,Ff,t,e);a.layers=this.layers,this.add(a);let l=new fr(Nf,Ff,t,e);l.layers=this.layers,this.add(l);let u=new fr(Nf,Ff,t,e);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,o,s,a,l]=e;for(let u of e)this.remove(u);if(t===Ol)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===by)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let u of e)this.add(u),u.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=t.getRenderTarget(),m=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),y=t.xr.enabled;t.xr.enabled=!1;let C=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,o),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,l),t.setRenderTarget(i,4,r),t.render(e,u),i.texture.generateMipmaps=C,t.setRenderTarget(i,5,r),t.render(e,f),t.setRenderTarget(h,m,p),t.xr.enabled=y,i.texture.needsPMREMUpdate=!0}},Ty=class extends ws{constructor(t,e,i,r,o,s,a,l,u,f){t=t!==void 0?t:[],e=e!==void 0?e:Yf,super(t,e,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},ET=class extends kl{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Ty(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Tr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Sm(5,5,5),o=new ka({name:"CubemapFromEquirect",uniforms:th(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Do,blending:Dc});o.uniforms.tEquirect.value=e;let s=new wi(r,o),a=e.minFilter;return e.minFilter===Po&&(e.minFilter=Tr),new wT(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,r){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,r);t.setRenderTarget(o)}},ES=new te,dne=new te,fne=new xn,Pl=class{constructor(t=new te(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=ES.subVectors(i,e).cross(dne.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(ES),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||fne.getNormalMatrix(t),r=this.coplanarPoint(ES).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Nu=new Zo,ry=new te,Tm=class{constructor(t=new Pl,e=new Pl,i=new Pl,r=new Pl,o=new Pl,s=new Pl){this.planes=[t,e,i,r,o,s]}set(t,e,i,r,o,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Ol){let i=this.planes,r=t.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],m=r[7],p=r[8],y=r[9],C=r[10],x=r[11],b=r[12],P=r[13],E=r[14],D=r[15];if(i[0].setComponents(l-o,m-u,x-p,D-b).normalize(),i[1].setComponents(l+o,m+u,x+p,D+b).normalize(),i[2].setComponents(l+s,m+f,x+y,D+P).normalize(),i[3].setComponents(l-s,m-f,x-y,D-P).normalize(),i[4].setComponents(l-a,m-h,x-C,D-E).normalize(),e===Ol)i[5].setComponents(l+a,m+h,x+C,D+E).normalize();else if(e===by)i[5].setComponents(a,h,C,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Nu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Nu.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Nu)}intersectsSprite(t){return Nu.center.set(0,0,0),Nu.radius=.7071067811865476,Nu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Nu)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(ry.x=r.normal.x>0?t.max.x:t.min.x,ry.y=r.normal.y>0?t.max.y:t.min.y,ry.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ry)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function tV(){let n=null,t=!1,e=null,i=null;function r(o,s){e(o,s),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function hne(n){let t=new WeakMap;function e(a,l){let u=a.array,f=a.usage,h=u.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,u,f),a.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((p,y)=>p.start-y.start);let m=0;for(let p=1;p<h.length;p++){let y=h[m],C=h[p];C.start<=y.start+y.count+1?y.count=Math.max(y.count,C.start+C.count-y.start):(++m,h[m]=C)}h.length=m+1;for(let p=0,y=h.length;p<y;p++){let C=h[p];n.bufferSubData(u,C.start*f.BYTES_PER_ELEMENT,f,C.start,C.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=t.get(a);l&&(n.deleteBuffer(l.buffer),t.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=t.get(a);(!f||f.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=t.get(a);if(u===void 0)t.set(a,e(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var Cs=class n extends Oo{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let o=t/2,s=e/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=t/a,m=e/l,p=[],y=[],C=[],x=[];for(let b=0;b<f;b++){let P=b*m-s;for(let E=0;E<u;E++){let D=E*h-o;y.push(D,-P,0),C.push(0,0,1),x.push(E/a),x.push(1-b/l)}}for(let b=0;b<l;b++)for(let P=0;P<a;P++){let E=P+u*b,D=P+u*(b+1),L=P+1+u*(b+1),B=P+1+u*b;p.push(E,D,B),p.push(D,L,B)}this.setIndex(p),this.setAttribute("position",new bs(y,3)),this.setAttribute("normal",new bs(C,3)),this.setAttribute("uv",new bs(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}},pne=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,mne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,gne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,_ne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vne=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,yne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,bne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Cne=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Mne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,wne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ene=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Sne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Tne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Pne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Dne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,One=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ane=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ine=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Rne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Nne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Fne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Lne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Une=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Vne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Bne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,zne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Hne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,jne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Wne="gl_FragColor = linearToOutputTexel( gl_FragColor );",Gne=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,$ne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,qne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Yne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Xne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Zne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Kne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Jne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Qne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,eie=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,tie=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,nie=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,iie=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,rie=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,oie=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,sie=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,aie=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lie=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,cie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,uie=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,die=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,fie=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hie=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,pie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,mie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,gie=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_ie=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,vie=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,yie=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,xie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,bie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Cie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Mie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Eie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Sie=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Tie=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Die=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Oie=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Aie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Iie=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Rie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Nie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Fie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Lie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Uie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Vie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Bie=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,zie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Hie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Wie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Gie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$ie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,qie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Xie=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Zie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Kie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Jie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Qie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ere=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,tre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nre=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ire=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rre=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ore=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,are=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,lre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,cre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ure=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,dre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,fre=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,hre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,pre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,gre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_re=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vre=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,bre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Mre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ere=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Sre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Tre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Pre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ore=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Are=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ire=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Nre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Fre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lre=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Ure=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vre=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bre=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zre=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Hre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jre=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wre=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$re=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wn={alphahash_fragment:pne,alphahash_pars_fragment:mne,alphamap_fragment:gne,alphamap_pars_fragment:_ne,alphatest_fragment:vne,alphatest_pars_fragment:yne,aomap_fragment:xne,aomap_pars_fragment:bne,batching_pars_vertex:Cne,batching_vertex:Mne,begin_vertex:wne,beginnormal_vertex:Ene,bsdfs:Sne,iridescence_fragment:Tne,bumpmap_pars_fragment:Pne,clipping_planes_fragment:Dne,clipping_planes_pars_fragment:One,clipping_planes_pars_vertex:Ane,clipping_planes_vertex:Ine,color_fragment:Rne,color_pars_fragment:kne,color_pars_vertex:Nne,color_vertex:Fne,common:Lne,cube_uv_reflection_fragment:Une,defaultnormal_vertex:Vne,displacementmap_pars_vertex:Bne,displacementmap_vertex:zne,emissivemap_fragment:Hne,emissivemap_pars_fragment:jne,colorspace_fragment:Wne,colorspace_pars_fragment:Gne,envmap_fragment:$ne,envmap_common_pars_fragment:qne,envmap_pars_fragment:Yne,envmap_pars_vertex:Xne,envmap_physical_pars_fragment:sie,envmap_vertex:Zne,fog_vertex:Kne,fog_pars_vertex:Jne,fog_fragment:Qne,fog_pars_fragment:eie,gradientmap_pars_fragment:tie,lightmap_pars_fragment:nie,lights_lambert_fragment:iie,lights_lambert_pars_fragment:rie,lights_pars_begin:oie,lights_toon_fragment:aie,lights_toon_pars_fragment:lie,lights_phong_fragment:cie,lights_phong_pars_fragment:uie,lights_physical_fragment:die,lights_physical_pars_fragment:fie,lights_fragment_begin:hie,lights_fragment_maps:pie,lights_fragment_end:mie,logdepthbuf_fragment:gie,logdepthbuf_pars_fragment:_ie,logdepthbuf_pars_vertex:vie,logdepthbuf_vertex:yie,map_fragment:xie,map_pars_fragment:bie,map_particle_fragment:Cie,map_particle_pars_fragment:Mie,metalnessmap_fragment:wie,metalnessmap_pars_fragment:Eie,morphinstance_vertex:Sie,morphcolor_vertex:Tie,morphnormal_vertex:Pie,morphtarget_pars_vertex:Die,morphtarget_vertex:Oie,normal_fragment_begin:Aie,normal_fragment_maps:Iie,normal_pars_fragment:Rie,normal_pars_vertex:kie,normal_vertex:Nie,normalmap_pars_fragment:Fie,clearcoat_normal_fragment_begin:Lie,clearcoat_normal_fragment_maps:Uie,clearcoat_pars_fragment:Vie,iridescence_pars_fragment:Bie,opaque_fragment:zie,packing:Hie,premultiplied_alpha_fragment:jie,project_vertex:Wie,dithering_fragment:Gie,dithering_pars_fragment:$ie,roughnessmap_fragment:qie,roughnessmap_pars_fragment:Yie,shadowmap_pars_fragment:Xie,shadowmap_pars_vertex:Zie,shadowmap_vertex:Kie,shadowmask_pars_fragment:Jie,skinbase_vertex:Qie,skinning_pars_vertex:ere,skinning_vertex:tre,skinnormal_vertex:nre,specularmap_fragment:ire,specularmap_pars_fragment:rre,tonemapping_fragment:ore,tonemapping_pars_fragment:sre,transmission_fragment:are,transmission_pars_fragment:lre,uv_pars_fragment:cre,uv_pars_vertex:ure,uv_vertex:dre,worldpos_vertex:fre,background_vert:hre,background_frag:pre,backgroundCube_vert:mre,backgroundCube_frag:gre,cube_vert:_re,cube_frag:vre,depth_vert:yre,depth_frag:xre,distanceRGBA_vert:bre,distanceRGBA_frag:Cre,equirect_vert:Mre,equirect_frag:wre,linedashed_vert:Ere,linedashed_frag:Sre,meshbasic_vert:Tre,meshbasic_frag:Pre,meshlambert_vert:Dre,meshlambert_frag:Ore,meshmatcap_vert:Are,meshmatcap_frag:Ire,meshnormal_vert:Rre,meshnormal_frag:kre,meshphong_vert:Nre,meshphong_frag:Fre,meshphysical_vert:Lre,meshphysical_frag:Ure,meshtoon_vert:Vre,meshtoon_frag:Bre,points_vert:zre,points_frag:Hre,shadow_vert:jre,shadow_frag:Wre,sprite_vert:Gre,sprite_frag:$re},ot={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},envMapRotation:{value:new xn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new dn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new dn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},Oa={basic:{uniforms:po([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:po([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:po([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:po([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:po([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:po([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:po([ot.points,ot.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:po([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:po([ot.common,ot.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:po([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:po([ot.sprite,ot.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xn}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:po([ot.common,ot.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:po([ot.lights,ot.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};Oa.physical={uniforms:po([Oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new dn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new dn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new dn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};var oy={r:0,b:0,g:0},Fu=new Wu,qre=new an;function Yre(n,t,e,i,r,o,s){let a=new Bt(0),l=o===!0?0:1,u,f,h=null,m=0,p=null;function y(P){let E=P.isScene===!0?P.background:null;return E&&E.isTexture&&(E=(P.backgroundBlurriness>0?e:t).get(E)),E}function C(P){let E=!1,D=y(P);D===null?b(a,l):D&&D.isColor&&(b(D,1),E=!0);let L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,s):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(P,E){let D=y(E);D&&(D.isCubeTexture||D.mapping===Yy)?(f===void 0&&(f=new wi(new Sm(1,1,1),new ka({name:"BackgroundCubeMaterial",uniforms:th(Oa.backgroundCube.uniforms),vertexShader:Oa.backgroundCube.vertexShader,fragmentShader:Oa.backgroundCube.fragmentShader,side:Do,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(L,B,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Fu.copy(E.backgroundRotation),Fu.x*=-1,Fu.y*=-1,Fu.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Fu.y*=-1,Fu.z*=-1),f.material.uniforms.envMap.value=D,f.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(qre.makeRotationFromEuler(Fu)),f.material.toneMapped=Ln.getTransfer(D.colorSpace)!==fi,(h!==D||m!==D.version||p!==n.toneMapping)&&(f.material.needsUpdate=!0,h=D,m=D.version,p=n.toneMapping),f.layers.enableAll(),P.unshift(f,f.geometry,f.material,0,0,null)):D&&D.isTexture&&(u===void 0&&(u=new wi(new Cs(2,2),new ka({name:"BackgroundMaterial",uniforms:th(Oa.background.uniforms),vertexShader:Oa.background.vertexShader,fragmentShader:Oa.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=D,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=Ln.getTransfer(D.colorSpace)!==fi,D.matrixAutoUpdate===!0&&D.updateMatrix(),u.material.uniforms.uvTransform.value.copy(D.matrix),(h!==D||m!==D.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,h=D,m=D.version,p=n.toneMapping),u.layers.enableAll(),P.unshift(u,u.geometry,u.material,0,0,null))}function b(P,E){P.getRGB(oy,eV(n)),i.buffers.color.setClear(oy.r,oy.g,oy.b,E,s)}return{getClearColor:function(){return a},setClearColor:function(P,E=1){a.set(P),l=E,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(P){l=P,b(a,l)},render:C,addToRenderList:x}}function Xre(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null),o=r,s=!1;function a(T,N,S,q,oe){let ee=!1,ge=h(q,S,N);o!==ge&&(o=ge,u(o.object)),ee=p(T,q,S,oe),ee&&y(T,q,S,oe),oe!==null&&t.update(oe,n.ELEMENT_ARRAY_BUFFER),(ee||s)&&(s=!1,D(T,N,S,q),oe!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(oe).buffer))}function l(){return n.createVertexArray()}function u(T){return n.bindVertexArray(T)}function f(T){return n.deleteVertexArray(T)}function h(T,N,S){let q=S.wireframe===!0,oe=i[T.id];oe===void 0&&(oe={},i[T.id]=oe);let ee=oe[N.id];ee===void 0&&(ee={},oe[N.id]=ee);let ge=ee[q];return ge===void 0&&(ge=m(l()),ee[q]=ge),ge}function m(T){let N=[],S=[],q=[];for(let oe=0;oe<e;oe++)N[oe]=0,S[oe]=0,q[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:S,attributeDivisors:q,object:T,attributes:{},index:null}}function p(T,N,S,q){let oe=o.attributes,ee=N.attributes,ge=0,se=S.getAttributes();for(let de in se)if(se[de].location>=0){let Q=oe[de],Ie=ee[de];if(Ie===void 0&&(de==="instanceMatrix"&&T.instanceMatrix&&(Ie=T.instanceMatrix),de==="instanceColor"&&T.instanceColor&&(Ie=T.instanceColor)),Q===void 0||Q.attribute!==Ie||Ie&&Q.data!==Ie.data)return!0;ge++}return o.attributesNum!==ge||o.index!==q}function y(T,N,S,q){let oe={},ee=N.attributes,ge=0,se=S.getAttributes();for(let de in se)if(se[de].location>=0){let Q=ee[de];Q===void 0&&(de==="instanceMatrix"&&T.instanceMatrix&&(Q=T.instanceMatrix),de==="instanceColor"&&T.instanceColor&&(Q=T.instanceColor));let Ie={};Ie.attribute=Q,Q&&Q.data&&(Ie.data=Q.data),oe[de]=Ie,ge++}o.attributes=oe,o.attributesNum=ge,o.index=q}function C(){let T=o.newAttributes;for(let N=0,S=T.length;N<S;N++)T[N]=0}function x(T){b(T,0)}function b(T,N){let S=o.newAttributes,q=o.enabledAttributes,oe=o.attributeDivisors;S[T]=1,q[T]===0&&(n.enableVertexAttribArray(T),q[T]=1),oe[T]!==N&&(n.vertexAttribDivisor(T,N),oe[T]=N)}function P(){let T=o.newAttributes,N=o.enabledAttributes;for(let S=0,q=N.length;S<q;S++)N[S]!==T[S]&&(n.disableVertexAttribArray(S),N[S]=0)}function E(T,N,S,q,oe,ee,ge){ge===!0?n.vertexAttribIPointer(T,N,S,oe,ee):n.vertexAttribPointer(T,N,S,q,oe,ee)}function D(T,N,S,q){C();let oe=q.attributes,ee=S.getAttributes(),ge=N.defaultAttributeValues;for(let se in ee){let de=ee[se];if(de.location>=0){let J=oe[se];if(J===void 0&&(se==="instanceMatrix"&&T.instanceMatrix&&(J=T.instanceMatrix),se==="instanceColor"&&T.instanceColor&&(J=T.instanceColor)),J!==void 0){let Q=J.normalized,Ie=J.itemSize,Le=t.get(J);if(Le===void 0)continue;let ke=Le.buffer,Ce=Le.type,He=Le.bytesPerElement,Ge=Ce===n.INT||Ce===n.UNSIGNED_INT||J.gpuType===eP;if(J.isInterleavedBufferAttribute){let Ve=J.data,mt=Ve.stride,pt=J.offset;if(Ve.isInstancedInterleavedBuffer){for(let Lt=0;Lt<de.locationSize;Lt++)b(de.location+Lt,Ve.meshPerAttribute);T.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let Lt=0;Lt<de.locationSize;Lt++)x(de.location+Lt);n.bindBuffer(n.ARRAY_BUFFER,ke);for(let Lt=0;Lt<de.locationSize;Lt++)E(de.location+Lt,Ie/de.locationSize,Ce,Q,mt*He,(pt+Ie/de.locationSize*Lt)*He,Ge)}else{if(J.isInstancedBufferAttribute){for(let Ve=0;Ve<de.locationSize;Ve++)b(de.location+Ve,J.meshPerAttribute);T.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let Ve=0;Ve<de.locationSize;Ve++)x(de.location+Ve);n.bindBuffer(n.ARRAY_BUFFER,ke);for(let Ve=0;Ve<de.locationSize;Ve++)E(de.location+Ve,Ie/de.locationSize,Ce,Q,Ie*He,Ie/de.locationSize*Ve*He,Ge)}}else if(ge!==void 0){let Q=ge[se];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(de.location,Q);break;case 3:n.vertexAttrib3fv(de.location,Q);break;case 4:n.vertexAttrib4fv(de.location,Q);break;default:n.vertexAttrib1fv(de.location,Q)}}}}P()}function L(){G();for(let T in i){let N=i[T];for(let S in N){let q=N[S];for(let oe in q)f(q[oe].object),delete q[oe];delete N[S]}delete i[T]}}function B(T){if(i[T.id]===void 0)return;let N=i[T.id];for(let S in N){let q=N[S];for(let oe in q)f(q[oe].object),delete q[oe];delete N[S]}delete i[T.id]}function k(T){for(let N in i){let S=i[N];if(S[T.id]===void 0)continue;let q=S[T.id];for(let oe in q)f(q[oe].object),delete q[oe];delete S[T.id]}}function G(){F(),s=!0,o!==r&&(o=r,u(o.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:G,resetDefaultState:F,dispose:L,releaseStatesOfGeometry:B,releaseStatesOfProgram:k,initAttributes:C,enableAttribute:x,disableUnusedAttributes:P}}function Zre(n,t,e){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),e.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),e.update(f,i,h))}function a(u,f,h){if(h===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let p=0;for(let y=0;y<h;y++)p+=f[y];e.update(p,i,1)}function l(u,f,h,m){if(h===0)return;let p=t.get("WEBGL_multi_draw");if(p===null)for(let y=0;y<u.length;y++)s(u[y],f[y],m[y]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,f,0,m,0,h);let y=0;for(let C=0;C<h;C++)y+=f[C]*m[C];e.update(y,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Kre(n,t,e,i){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let k=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(k){return!(k!==xs&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){let G=k===km&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(k!==Il&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==ra&&!G)}function l(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=e.precision!==void 0?e.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=e.logarithmicDepthBuffer===!0,m=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),P=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),L=y>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:m,maxTextures:p,maxVertexTextures:y,maxTextureSize:C,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:P,maxVaryings:E,maxFragmentUniforms:D,vertexTextures:L,maxSamples:B}}function Jre(n){let t=this,e=null,i=0,r=!1,o=!1,s=new Pl,a=new xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){let p=h.length!==0||m||i!==0||r;return r=m,i=h.length,p},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,m){e=f(h,m,0)},this.setState=function(h,m,p){let y=h.clippingPlanes,C=h.clipIntersection,x=h.clipShadows,b=n.get(h);if(!r||y===null||y.length===0||o&&!x)o?f(null):u();else{let P=o?0:i,E=P*4,D=b.clippingState||null;l.value=D,D=f(y,m,E,p);for(let L=0;L!==E;++L)D[L]=e[L];b.clippingState=D,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=P}};function u(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function f(h,m,p,y){let C=h!==null?h.length:0,x=null;if(C!==0){if(x=l.value,y!==!0||x===null){let b=p+C*4,P=m.matrixWorldInverse;a.getNormalMatrix(P),(x===null||x.length<b)&&(x=new Float32Array(b));for(let E=0,D=p;E!==C;++E,D+=4)s.copy(h[E]).applyMatrix4(P,a),s.normal.toArray(x,D),x[D+3]=s.constant}l.value=x,l.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,x}}function Qre(n){let t=new WeakMap;function e(s,a){return a===$S?s.mapping=Yf:a===qS&&(s.mapping=Xf),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===$S||a===qS)if(t.has(s)){let l=t.get(s).texture;return e(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new ET(l.height);return u.fromEquirectangularTexture(n,s),t.set(s,u),s.addEventListener("dispose",r),e(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}var Na=class extends Sy{constructor(t=-1,e=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-t,s=i+t,a=r+e,l=r-e;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},Hf=4,qL=[.125,.215,.35,.446,.526,.582],zu=20,SS=new Na,YL=new Bt,TS=null,PS=0,DS=0,OS=!1,Uu=(1+Math.sqrt(5))/2,Lf=1/Uu,XL=[new te(-Uu,Lf,0),new te(Uu,Lf,0),new te(-Lf,0,Uu),new te(Lf,0,Uu),new te(0,Uu,-Lf),new te(0,Uu,Lf),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)],Py=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){TS=this._renderer.getRenderTarget(),PS=this._renderer.getActiveCubeFace(),DS=this._renderer.getActiveMipmapLevel(),OS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=JL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=KL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(TS,PS,DS),this._renderer.xr.enabled=OS,t.scissorTest=!1,sy(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Yf||t.mapping===Xf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),TS=this._renderer.getRenderTarget(),PS=this._renderer.getActiveCubeFace(),DS=this._renderer.getActiveMipmapLevel(),OS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Tr,minFilter:Tr,generateMipmaps:!1,type:km,format:xs,colorSpace:Zr,depthBuffer:!1},r=ZL(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ZL(t,e,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=eoe(o)),this._blurMaterial=toe(o,t,e)}return r}_compileMaterial(t){let e=new wi(this._lodPlanes[0],t);this._renderer.compile(e,SS)}_sceneToCubeUV(t,e,i,r){let a=new fr(90,1,e,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,m=f.toneMapping;f.getClearColor(YL),f.toneMapping=Oc,f.autoClear=!1;let p=new Ra({name:"PMREM.Background",side:Do,depthWrite:!1,depthTest:!1}),y=new wi(new Sm,p),C=!1,x=t.background;x?x.isColor&&(p.color.copy(x),t.background=null,C=!0):(p.color.copy(YL),C=!0);for(let b=0;b<6;b++){let P=b%3;P===0?(a.up.set(0,l[b],0),a.lookAt(u[b],0,0)):P===1?(a.up.set(0,0,l[b]),a.lookAt(0,u[b],0)):(a.up.set(0,l[b],0),a.lookAt(0,0,u[b]));let E=this._cubeSize;sy(r,P*E,b>2?E:0,E,E),f.setRenderTarget(r),C&&f.render(y,a),f.render(t,a)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=m,f.autoClear=h,t.background=x}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===Yf||t.mapping===Xf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=JL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=KL());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new wi(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;let l=this._cubeSize;sy(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(s,SS)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=XL[(r-o-1)%XL.length];this._blur(t,o-1,o,s,a)}e.autoClear=i}_blur(t,e,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",o),this._halfBlur(s,t,i,i,r,"longitudinal",o)}_halfBlur(t,e,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new wi(this._lodPlanes[r],u),m=u.uniforms,p=this._sizeLods[i]-1,y=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*zu-1),C=o/y,x=isFinite(o)?1+Math.floor(f*C):zu;x>zu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${zu}`);let b=[],P=0;for(let k=0;k<zu;++k){let G=k/C,F=Math.exp(-G*G/2);b.push(F),k===0?P+=F:k<x&&(P+=2*F)}for(let k=0;k<b.length;k++)b[k]=b[k]/P;m.envMap.value=t.texture,m.samples.value=x,m.weights.value=b,m.latitudinal.value=s==="latitudinal",a&&(m.poleAxis.value=a);let{_lodMax:E}=this;m.dTheta.value=y,m.mipInt.value=E-i;let D=this._sizeLods[r],L=3*D*(r>E-Hf?r-E+Hf:0),B=4*(this._cubeSize-D);sy(e,L,B,3*D,2*D),l.setRenderTarget(e),l.render(h,SS)}};function eoe(n){let t=[],e=[],i=[],r=n,o=n-Hf+1+qL.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);e.push(a);let l=1/a;s>n-Hf?l=qL[s-n+Hf-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,m=[f,f,h,f,h,h,f,f,h,h,f,h],p=6,y=6,C=3,x=2,b=1,P=new Float32Array(C*y*p),E=new Float32Array(x*y*p),D=new Float32Array(b*y*p);for(let B=0;B<p;B++){let k=B%3*2/3-1,G=B>2?0:-1,F=[k,G,0,k+2/3,G,0,k+2/3,G+1,0,k,G,0,k+2/3,G+1,0,k,G+1,0];P.set(F,C*y*B),E.set(m,x*y*B);let T=[B,B,B,B,B,B];D.set(T,b*y*B)}let L=new Oo;L.setAttribute("position",new Pi(P,C)),L.setAttribute("uv",new Pi(E,x)),L.setAttribute("faceIndex",new Pi(D,b)),t.push(L),r>Hf&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function ZL(n,t,e){let i=new kl(n,t,e);return i.texture.mapping=Yy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function sy(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function toe(n,t,e){let i=new Float32Array(zu),r=new te(0,1,0);return new ka({name:"SphericalGaussianBlur",defines:{n:zu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:uP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function KL(){return new ka({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:uP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function JL(){return new ka({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:uP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function uP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function noe(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===$S||l===qS,f=l===Yf||l===Xf;if(u||f){let h=t.get(a),m=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return e===null&&(e=new Py(n)),h=u?e.fromEquirectangular(a,h):e.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(h!==void 0)return h.texture;{let p=a.image;return u&&p&&p.height>0||f&&p&&r(p)?(e===null&&(e=new Py(n)),h=u?e.fromEquirectangular(a):e.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function ioe(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&gm("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function roe(n,t,e,i){let r={},o=new WeakMap;function s(h){let m=h.target;m.index!==null&&t.remove(m.index);for(let y in m.attributes)t.remove(m.attributes[y]);for(let y in m.morphAttributes){let C=m.morphAttributes[y];for(let x=0,b=C.length;x<b;x++)t.remove(C[x])}m.removeEventListener("dispose",s),delete r[m.id];let p=o.get(m);p&&(t.remove(p),o.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,e.memory.geometries--}function a(h,m){return r[m.id]===!0||(m.addEventListener("dispose",s),r[m.id]=!0,e.memory.geometries++),m}function l(h){let m=h.attributes;for(let y in m)t.update(m[y],n.ARRAY_BUFFER);let p=h.morphAttributes;for(let y in p){let C=p[y];for(let x=0,b=C.length;x<b;x++)t.update(C[x],n.ARRAY_BUFFER)}}function u(h){let m=[],p=h.index,y=h.attributes.position,C=0;if(p!==null){let P=p.array;C=p.version;for(let E=0,D=P.length;E<D;E+=3){let L=P[E+0],B=P[E+1],k=P[E+2];m.push(L,B,B,k,k,L)}}else if(y!==void 0){let P=y.array;C=y.version;for(let E=0,D=P.length/3-1;E<D;E+=3){let L=E+0,B=E+1,k=E+2;m.push(L,B,B,k,k,L)}}else return;let x=new(JU(m)?Ey:wy)(m,1);x.version=C;let b=o.get(h);b&&t.remove(b),o.set(h,x)}function f(h){let m=o.get(h);if(m){let p=h.index;p!==null&&m.version<p.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function ooe(n,t,e){let i;function r(m){i=m}let o,s;function a(m){o=m.type,s=m.bytesPerElement}function l(m,p){n.drawElements(i,p,o,m*s),e.update(p,i,1)}function u(m,p,y){y!==0&&(n.drawElementsInstanced(i,p,o,m*s,y),e.update(p,i,y))}function f(m,p,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,o,m,0,y);let x=0;for(let b=0;b<y;b++)x+=p[b];e.update(x,i,1)}function h(m,p,y,C){if(y===0)return;let x=t.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<m.length;b++)u(m[b]/s,p[b],C[b]);else{x.multiDrawElementsInstancedWEBGL(i,p,0,o,m,0,C,0,y);let b=0;for(let P=0;P<y;P++)b+=p[P]*C[P];e.update(b,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function soe(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(e.calls++,s){case n.TRIANGLES:e.triangles+=a*(o/3);break;case n.LINES:e.lines+=a*(o/2);break;case n.LINE_STRIP:e.lines+=a*(o-1);break;case n.LINE_LOOP:e.lines+=a*o;break;case n.POINTS:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function aoe(n,t,e){let i=new WeakMap,r=new pn;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,m=i.get(a);if(m===void 0||m.count!==h){let T=function(){G.dispose(),i.delete(a),a.removeEventListener("dispose",T)};var p=T;m!==void 0&&m.texture.dispose();let y=a.morphAttributes.position!==void 0,C=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,b=a.morphAttributes.position||[],P=a.morphAttributes.normal||[],E=a.morphAttributes.color||[],D=0;y===!0&&(D=1),C===!0&&(D=2),x===!0&&(D=3);let L=a.attributes.position.count*D,B=1;L>t.maxTextureSize&&(B=Math.ceil(L/t.maxTextureSize),L=t.maxTextureSize);let k=new Float32Array(L*B*4*h),G=new My(k,L,B,h);G.type=ra,G.needsUpdate=!0;let F=D*4;for(let N=0;N<h;N++){let S=b[N],q=P[N],oe=E[N],ee=L*B*4*N;for(let ge=0;ge<S.count;ge++){let se=ge*F;y===!0&&(r.fromBufferAttribute(S,ge),k[ee+se+0]=r.x,k[ee+se+1]=r.y,k[ee+se+2]=r.z,k[ee+se+3]=0),C===!0&&(r.fromBufferAttribute(q,ge),k[ee+se+4]=r.x,k[ee+se+5]=r.y,k[ee+se+6]=r.z,k[ee+se+7]=0),x===!0&&(r.fromBufferAttribute(oe,ge),k[ee+se+8]=r.x,k[ee+se+9]=r.y,k[ee+se+10]=r.z,k[ee+se+11]=oe.itemSize===4?r.w:1)}}m={count:h,texture:G,size:new dn(L,B)},i.set(a,m),a.addEventListener("dispose",T)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,e);else{let y=0;for(let x=0;x<u.length;x++)y+=u[x];let C=a.morphTargetsRelative?1:1-y;l.getUniforms().setValue(n,"morphTargetBaseInfluence",C),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,e),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:o}}function loe(n,t,e,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=t.get(l,f);if(r.get(h)!==u&&(t.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(e.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&e.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let m=l.skeleton;r.get(m)!==u&&(m.update(),r.set(m,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:o,dispose:s}}var Dy=class extends ws{constructor(t,e,i,r,o,s,a,l,u,f=Wf){if(f!==Wf&&f!==Kf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Wf&&(i=Hu),i===void 0&&f===Kf&&(i=Zf),super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:$r,this.minFilter=l!==void 0?l:$r,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},nV=new ws,QL=new Dy(1,1),iV=new My,rV=new MT,oV=new Ty,eU=[],tU=[],nU=new Float32Array(16),iU=new Float32Array(9),rU=new Float32Array(4);function ah(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,o=eU[r];if(o===void 0&&(o=new Float32Array(r),eU[r]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,n[s].toArray(o,a)}return o}function pr(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function mr(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Ky(n,t){let e=tU[t];e===void 0&&(e=new Int32Array(t),tU[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function coe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function uoe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2fv(this.addr,t),mr(e,t)}}function doe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(pr(e,t))return;n.uniform3fv(this.addr,t),mr(e,t)}}function foe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4fv(this.addr,t),mr(e,t)}}function hoe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;rU.set(i),n.uniformMatrix2fv(this.addr,!1,rU),mr(e,i)}}function poe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;iU.set(i),n.uniformMatrix3fv(this.addr,!1,iU),mr(e,i)}}function moe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;nU.set(i),n.uniformMatrix4fv(this.addr,!1,nU),mr(e,i)}}function goe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function _oe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2iv(this.addr,t),mr(e,t)}}function voe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(pr(e,t))return;n.uniform3iv(this.addr,t),mr(e,t)}}function yoe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4iv(this.addr,t),mr(e,t)}}function xoe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function boe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2uiv(this.addr,t),mr(e,t)}}function Coe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(pr(e,t))return;n.uniform3uiv(this.addr,t),mr(e,t)}}function Moe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4uiv(this.addr,t),mr(e,t)}}function woe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(QL.compareFunction=KU,o=QL):o=nV,e.setTexture2D(t||o,r)}function Eoe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||rV,r)}function Soe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||oV,r)}function Toe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||iV,r)}function Poe(n){switch(n){case 5126:return coe;case 35664:return uoe;case 35665:return doe;case 35666:return foe;case 35674:return hoe;case 35675:return poe;case 35676:return moe;case 5124:case 35670:return goe;case 35667:case 35671:return _oe;case 35668:case 35672:return voe;case 35669:case 35673:return yoe;case 5125:return xoe;case 36294:return boe;case 36295:return Coe;case 36296:return Moe;case 35678:case 36198:case 36298:case 36306:case 35682:return woe;case 35679:case 36299:case 36307:return Eoe;case 35680:case 36300:case 36308:case 36293:return Soe;case 36289:case 36303:case 36311:case 36292:return Toe}}function Doe(n,t){n.uniform1fv(this.addr,t)}function Ooe(n,t){let e=ah(t,this.size,2);n.uniform2fv(this.addr,e)}function Aoe(n,t){let e=ah(t,this.size,3);n.uniform3fv(this.addr,e)}function Ioe(n,t){let e=ah(t,this.size,4);n.uniform4fv(this.addr,e)}function Roe(n,t){let e=ah(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function koe(n,t){let e=ah(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function Noe(n,t){let e=ah(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function Foe(n,t){n.uniform1iv(this.addr,t)}function Loe(n,t){n.uniform2iv(this.addr,t)}function Uoe(n,t){n.uniform3iv(this.addr,t)}function Voe(n,t){n.uniform4iv(this.addr,t)}function Boe(n,t){n.uniform1uiv(this.addr,t)}function zoe(n,t){n.uniform2uiv(this.addr,t)}function Hoe(n,t){n.uniform3uiv(this.addr,t)}function joe(n,t){n.uniform4uiv(this.addr,t)}function Woe(n,t,e){let i=this.cache,r=t.length,o=Ky(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture2D(t[s]||nV,o[s])}function Goe(n,t,e){let i=this.cache,r=t.length,o=Ky(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||rV,o[s])}function $oe(n,t,e){let i=this.cache,r=t.length,o=Ky(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||oV,o[s])}function qoe(n,t,e){let i=this.cache,r=t.length,o=Ky(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||iV,o[s])}function Yoe(n){switch(n){case 5126:return Doe;case 35664:return Ooe;case 35665:return Aoe;case 35666:return Ioe;case 35674:return Roe;case 35675:return koe;case 35676:return Noe;case 5124:case 35670:return Foe;case 35667:case 35671:return Loe;case 35668:case 35672:return Uoe;case 35669:case 35673:return Voe;case 5125:return Boe;case 36294:return zoe;case 36295:return Hoe;case 36296:return joe;case 35678:case 36198:case 36298:case 36306:case 35682:return Woe;case 35679:case 36299:case 36307:return Goe;case 35680:case 36300:case 36308:case 36293:return $oe;case 36289:case 36303:case 36311:case 36292:return qoe}}var ST=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=Poe(e.type)}},TT=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=Yoe(e.type)}},PT=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(t,e[a.id],i)}}},AS=/(\w+)(\])?(\[|\.)?/g;function oU(n,t){n.seq.push(t),n.map[t.id]=t}function Xoe(n,t,e){let i=n.name,r=i.length;for(AS.lastIndex=0;;){let o=AS.exec(i),s=AS.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){oU(e,u===void 0?new ST(a,n,t):new TT(a,n,t));break}else{let h=e.map[a];h===void 0&&(h=new PT(a),oU(e,h)),e=h}}}var $f=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=t.getActiveUniform(e,r),s=t.getUniformLocation(e,o.name);Xoe(o,s,this)}}setValue(t,e,i,r){let o=this.map[e];o!==void 0&&o.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let o=0,s=e.length;o!==s;++o){let a=e[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&i.push(s)}return i}};function sU(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var Zoe=37297,Koe=0;function Joe(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return i.join(`
`)}var aU=new xn;function Qoe(n){Ln._getMatrix(aU,Ln.workingColorSpace,n);let t=`mat3( ${aU.elements.map(e=>e.toFixed(4))} )`;switch(Ln.getTransfer(n)){case Zy:return[t,"LinearTransferOETF"];case fi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function lU(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return e.toUpperCase()+`

`+r+`

`+Joe(n.getShaderSource(t),s)}else return r}function ese(n,t){let e=Qoe(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function tse(n,t){let e;switch(t){case lte:e="Linear";break;case cte:e="Reinhard";break;case ute:e="Cineon";break;case dte:e="ACESFilmic";break;case hte:e="AgX";break;case pte:e="Neutral";break;case fte:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var ay=new te;function nse(){Ln.getLuminanceCoefficients(ay);let n=ay.x.toFixed(4),t=ay.y.toFixed(4),e=ay.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function ise(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_m).join(`
`)}function rse(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function ose(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(t,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:n.getAttribLocation(t,s),locationSize:a}}return e}function _m(n){return n!==""}function cU(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function uU(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var sse=/^[ \t]*#include +<([\w\d./]+)>/gm;function DT(n){return n.replace(sse,lse)}var ase=new Map;function lse(n,t){let e=wn[t];if(e===void 0){let i=ase.get(t);if(i!==void 0)e=wn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return DT(e)}var cse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dU(n){return n.replace(cse,use)}function use(n,t,e,i){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function fU(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function dse(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===UU?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===JT?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Tl&&(t="SHADOWMAP_TYPE_VSM"),t}function fse(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Yf:case Xf:t="ENVMAP_TYPE_CUBE";break;case Yy:t="ENVMAP_TYPE_CUBE_UV";break}return t}function hse(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Xf:t="ENVMAP_MODE_REFRACTION";break}return t}function pse(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case VU:t="ENVMAP_BLENDING_MULTIPLY";break;case ste:t="ENVMAP_BLENDING_MIX";break;case ate:t="ENVMAP_BLENDING_ADD";break}return t}function mse(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function gse(n,t,e,i){let r=n.getContext(),o=e.defines,s=e.vertexShader,a=e.fragmentShader,l=dse(e),u=fse(e),f=hse(e),h=pse(e),m=mse(e),p=ise(e),y=rse(o),C=r.createProgram(),x,b,P=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(x=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y].filter(_m).join(`
`),x.length>0&&(x+=`
`),b=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y].filter(_m).join(`
`),b.length>0&&(b+=`
`)):(x=[fU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_m).join(`
`),b=[fU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+f:"",e.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Oc?"#define TONE_MAPPING":"",e.toneMapping!==Oc?wn.tonemapping_pars_fragment:"",e.toneMapping!==Oc?tse("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",wn.colorspace_pars_fragment,ese("linearToOutputTexel",e.outputColorSpace),nse(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(_m).join(`
`)),s=DT(s),s=cU(s,e),s=uU(s,e),a=DT(a),a=cU(a,e),a=uU(a,e),s=dU(s),a=dU(a),e.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,x=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,b=["#define varying in",e.glslVersion===EL?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===EL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let E=P+x+s,D=P+b+a,L=sU(r,r.VERTEX_SHADER,E),B=sU(r,r.FRAGMENT_SHADER,D);r.attachShader(C,L),r.attachShader(C,B),e.index0AttributeName!==void 0?r.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(C,0,"position"),r.linkProgram(C);function k(N){if(n.debug.checkShaderErrors){let S=r.getProgramInfoLog(C).trim(),q=r.getShaderInfoLog(L).trim(),oe=r.getShaderInfoLog(B).trim(),ee=!0,ge=!0;if(r.getProgramParameter(C,r.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,C,L,B);else{let se=lU(r,L,"vertex"),de=lU(r,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(C,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+S+`
`+se+`
`+de)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(q===""||oe==="")&&(ge=!1);ge&&(N.diagnostics={runnable:ee,programLog:S,vertexShader:{log:q,prefix:x},fragmentShader:{log:oe,prefix:b}})}r.deleteShader(L),r.deleteShader(B),G=new $f(r,C),F=ose(r,C)}let G;this.getUniforms=function(){return G===void 0&&k(this),G};let F;this.getAttributes=function(){return F===void 0&&k(this),F};let T=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=r.getProgramParameter(C,Zoe)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Koe++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=L,this.fragmentShader=B,this}var _se=0,OT=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new AT(t),e.set(t,i)),i}},AT=class{constructor(t){this.id=_se++,this.code=t,this.usedTimes=0}};function vse(n,t,e,i,r,o,s){let a=new Em,l=new OT,u=new Set,f=[],h=r.logarithmicDepthBuffer,m=r.vertexTextures,p=r.precision,y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(F){return u.add(F),F===0?"uv":`uv${F}`}function x(F,T,N,S,q){let oe=S.fog,ee=q.geometry,ge=F.isMeshStandardMaterial?S.environment:null,se=(F.isMeshStandardMaterial?e:t).get(F.envMap||ge),de=se&&se.mapping===Yy?se.image.height:null,J=y[F.type];F.precision!==null&&(p=r.getMaxPrecision(F.precision),p!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",p,"instead."));let Q=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Ie=Q!==void 0?Q.length:0,Le=0;ee.morphAttributes.position!==void 0&&(Le=1),ee.morphAttributes.normal!==void 0&&(Le=2),ee.morphAttributes.color!==void 0&&(Le=3);let ke,Ce,He,Ge;if(J){let Xn=Oa[J];ke=Xn.vertexShader,Ce=Xn.fragmentShader}else ke=F.vertexShader,Ce=F.fragmentShader,l.update(F),He=l.getVertexShaderID(F),Ge=l.getFragmentShaderID(F);let Ve=n.getRenderTarget(),mt=n.state.buffers.depth.getReversed(),pt=q.isInstancedMesh===!0,Lt=q.isBatchedMesh===!0,Pn=!!F.map,O=!!F.matcap,Me=!!se,j=!!F.aoMap,Y=!!F.lightMap,W=!!F.bumpMap,ne=!!F.normalMap,ve=!!F.displacementMap,Ee=!!F.emissiveMap,ie=!!F.metalnessMap,U=!!F.roughnessMap,R=F.anisotropy>0,K=F.clearcoat>0,_e=F.dispersion>0,Pe=F.iridescence>0,ye=F.sheen>0,st=F.transmission>0,et=R&&!!F.anisotropyMap,nt=K&&!!F.clearcoatMap,ln=K&&!!F.clearcoatNormalMap,Fe=K&&!!F.clearcoatRoughnessMap,lt=Pe&&!!F.iridescenceMap,It=Pe&&!!F.iridescenceThicknessMap,Ot=ye&&!!F.sheenColorMap,ht=ye&&!!F.sheenRoughnessMap,Dn=!!F.specularMap,tn=!!F.specularColorMap,Qn=!!F.specularIntensityMap,ae=st&&!!F.transmissionMap,tt=st&&!!F.thicknessMap,Se=!!F.gradientMap,Be=!!F.alphaMap,ft=F.alphaTest>0,ct=!!F.alphaHash,nn=!!F.extensions,Di=Oc;F.toneMapped&&(Ve===null||Ve.isXRRenderTarget===!0)&&(Di=n.toneMapping);let vr={shaderID:J,shaderType:F.type,shaderName:F.name,vertexShader:ke,fragmentShader:Ce,defines:F.defines,customVertexShaderID:He,customFragmentShaderID:Ge,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:p,batching:Lt,batchingColor:Lt&&q._colorsTexture!==null,instancing:pt,instancingColor:pt&&q.instanceColor!==null,instancingMorph:pt&&q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Ve===null?n.outputColorSpace:Ve.isXRRenderTarget===!0?Ve.texture.colorSpace:Zr,alphaToCoverage:!!F.alphaToCoverage,map:Pn,matcap:O,envMap:Me,envMapMode:Me&&se.mapping,envMapCubeUVHeight:de,aoMap:j,lightMap:Y,bumpMap:W,normalMap:ne,displacementMap:m&&ve,emissiveMap:Ee,normalMapObjectSpace:ne&&F.normalMapType===bte,normalMapTangentSpace:ne&&F.normalMapType===ZU,metalnessMap:ie,roughnessMap:U,anisotropy:R,anisotropyMap:et,clearcoat:K,clearcoatMap:nt,clearcoatNormalMap:ln,clearcoatRoughnessMap:Fe,dispersion:_e,iridescence:Pe,iridescenceMap:lt,iridescenceThicknessMap:It,sheen:ye,sheenColorMap:Ot,sheenRoughnessMap:ht,specularMap:Dn,specularColorMap:tn,specularIntensityMap:Qn,transmission:st,transmissionMap:ae,thicknessMap:tt,gradientMap:Se,opaque:F.transparent===!1&&F.blending===jf&&F.alphaToCoverage===!1,alphaMap:Be,alphaTest:ft,alphaHash:ct,combine:F.combine,mapUv:Pn&&C(F.map.channel),aoMapUv:j&&C(F.aoMap.channel),lightMapUv:Y&&C(F.lightMap.channel),bumpMapUv:W&&C(F.bumpMap.channel),normalMapUv:ne&&C(F.normalMap.channel),displacementMapUv:ve&&C(F.displacementMap.channel),emissiveMapUv:Ee&&C(F.emissiveMap.channel),metalnessMapUv:ie&&C(F.metalnessMap.channel),roughnessMapUv:U&&C(F.roughnessMap.channel),anisotropyMapUv:et&&C(F.anisotropyMap.channel),clearcoatMapUv:nt&&C(F.clearcoatMap.channel),clearcoatNormalMapUv:ln&&C(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&C(F.clearcoatRoughnessMap.channel),iridescenceMapUv:lt&&C(F.iridescenceMap.channel),iridescenceThicknessMapUv:It&&C(F.iridescenceThicknessMap.channel),sheenColorMapUv:Ot&&C(F.sheenColorMap.channel),sheenRoughnessMapUv:ht&&C(F.sheenRoughnessMap.channel),specularMapUv:Dn&&C(F.specularMap.channel),specularColorMapUv:tn&&C(F.specularColorMap.channel),specularIntensityMapUv:Qn&&C(F.specularIntensityMap.channel),transmissionMapUv:ae&&C(F.transmissionMap.channel),thicknessMapUv:tt&&C(F.thicknessMap.channel),alphaMapUv:Be&&C(F.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(ne||R),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ee.attributes.uv&&(Pn||Be),fog:!!oe,useFog:F.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:mt,skinning:q.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:Le,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:F.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Di,decodeVideoTexture:Pn&&F.map.isVideoTexture===!0&&Ln.getTransfer(F.map.colorSpace)===fi,decodeVideoTextureEmissive:Ee&&F.emissiveMap.isVideoTexture===!0&&Ln.getTransfer(F.emissiveMap.colorSpace)===fi,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Xo,flipSided:F.side===Do,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:nn&&F.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(nn&&F.extensions.multiDraw===!0||Lt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return vr.vertexUv1s=u.has(1),vr.vertexUv2s=u.has(2),vr.vertexUv3s=u.has(3),u.clear(),vr}function b(F){let T=[];if(F.shaderID?T.push(F.shaderID):(T.push(F.customVertexShaderID),T.push(F.customFragmentShaderID)),F.defines!==void 0)for(let N in F.defines)T.push(N),T.push(F.defines[N]);return F.isRawShaderMaterial===!1&&(P(T,F),E(T,F),T.push(n.outputColorSpace)),T.push(F.customProgramCacheKey),T.join()}function P(F,T){F.push(T.precision),F.push(T.outputColorSpace),F.push(T.envMapMode),F.push(T.envMapCubeUVHeight),F.push(T.mapUv),F.push(T.alphaMapUv),F.push(T.lightMapUv),F.push(T.aoMapUv),F.push(T.bumpMapUv),F.push(T.normalMapUv),F.push(T.displacementMapUv),F.push(T.emissiveMapUv),F.push(T.metalnessMapUv),F.push(T.roughnessMapUv),F.push(T.anisotropyMapUv),F.push(T.clearcoatMapUv),F.push(T.clearcoatNormalMapUv),F.push(T.clearcoatRoughnessMapUv),F.push(T.iridescenceMapUv),F.push(T.iridescenceThicknessMapUv),F.push(T.sheenColorMapUv),F.push(T.sheenRoughnessMapUv),F.push(T.specularMapUv),F.push(T.specularColorMapUv),F.push(T.specularIntensityMapUv),F.push(T.transmissionMapUv),F.push(T.thicknessMapUv),F.push(T.combine),F.push(T.fogExp2),F.push(T.sizeAttenuation),F.push(T.morphTargetsCount),F.push(T.morphAttributeCount),F.push(T.numDirLights),F.push(T.numPointLights),F.push(T.numSpotLights),F.push(T.numSpotLightMaps),F.push(T.numHemiLights),F.push(T.numRectAreaLights),F.push(T.numDirLightShadows),F.push(T.numPointLightShadows),F.push(T.numSpotLightShadows),F.push(T.numSpotLightShadowsWithMaps),F.push(T.numLightProbes),F.push(T.shadowMapType),F.push(T.toneMapping),F.push(T.numClippingPlanes),F.push(T.numClipIntersection),F.push(T.depthPacking)}function E(F,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),T.dispersion&&a.enable(20),T.batchingColor&&a.enable(21),F.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.reverseDepthBuffer&&a.enable(4),T.skinning&&a.enable(5),T.morphTargets&&a.enable(6),T.morphNormals&&a.enable(7),T.morphColors&&a.enable(8),T.premultipliedAlpha&&a.enable(9),T.shadowMapEnabled&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),T.decodeVideoTexture&&a.enable(19),T.decodeVideoTextureEmissive&&a.enable(20),T.alphaToCoverage&&a.enable(21),F.push(a.mask)}function D(F){let T=y[F.type],N;if(T){let S=Oa[T];N=lne.clone(S.uniforms)}else N=F.uniforms;return N}function L(F,T){let N;for(let S=0,q=f.length;S<q;S++){let oe=f[S];if(oe.cacheKey===T){N=oe,++N.usedTimes;break}}return N===void 0&&(N=new gse(n,T,F,o),f.push(N)),N}function B(F){if(--F.usedTimes===0){let T=f.indexOf(F);f[T]=f[f.length-1],f.pop(),F.destroy()}}function k(F){l.remove(F)}function G(){l.dispose()}return{getParameters:x,getProgramCacheKey:b,getUniforms:D,acquireProgram:L,releaseProgram:B,releaseShaderCache:k,programs:f,dispose:G}}function yse(){let n=new WeakMap;function t(s){return n.has(s)}function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:o}}function xse(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function hU(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function pU(){let n=[],t=0,e=[],i=[],r=[];function o(){t=0,e.length=0,i.length=0,r.length=0}function s(h,m,p,y,C,x){let b=n[t];return b===void 0?(b={id:h.id,object:h,geometry:m,material:p,groupOrder:y,renderOrder:h.renderOrder,z:C,group:x},n[t]=b):(b.id=h.id,b.object=h,b.geometry=m,b.material=p,b.groupOrder=y,b.renderOrder=h.renderOrder,b.z=C,b.group=x),t++,b}function a(h,m,p,y,C,x){let b=s(h,m,p,y,C,x);p.transmission>0?i.push(b):p.transparent===!0?r.push(b):e.push(b)}function l(h,m,p,y,C,x){let b=s(h,m,p,y,C,x);p.transmission>0?i.unshift(b):p.transparent===!0?r.unshift(b):e.unshift(b)}function u(h,m){e.length>1&&e.sort(h||xse),i.length>1&&i.sort(m||hU),r.length>1&&r.sort(m||hU)}function f(){for(let h=t,m=n.length;h<m;h++){let p=n[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:e,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function bse(){let n=new WeakMap;function t(i,r){let o=n.get(i),s;return o===void 0?(s=new pU,n.set(i,[s])):r>=o.length?(s=new pU,o.push(s)):s=o[r],s}function e(){n=new WeakMap}return{get:t,dispose:e}}function Cse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new te,color:new Bt};break;case"SpotLight":e={position:new te,direction:new te,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new te,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new te,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":e={color:new Bt,position:new te,halfWidth:new te,halfHeight:new te};break}return n[t.id]=e,e}}}function Mse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dn};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dn};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var wse=0;function Ese(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function Sse(n){let t=new Cse,e=Mse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new te);let r=new te,o=new an,s=new an;function a(u){let f=0,h=0,m=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let p=0,y=0,C=0,x=0,b=0,P=0,E=0,D=0,L=0,B=0,k=0;u.sort(Ese);for(let F=0,T=u.length;F<T;F++){let N=u[F],S=N.color,q=N.intensity,oe=N.distance,ee=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)f+=S.r*q,h+=S.g*q,m+=S.b*q;else if(N.isLightProbe){for(let ge=0;ge<9;ge++)i.probe[ge].addScaledVector(N.sh.coefficients[ge],q);k++}else if(N.isDirectionalLight){let ge=t.get(N);if(ge.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){let se=N.shadow,de=e.get(N);de.shadowIntensity=se.intensity,de.shadowBias=se.bias,de.shadowNormalBias=se.normalBias,de.shadowRadius=se.radius,de.shadowMapSize=se.mapSize,i.directionalShadow[p]=de,i.directionalShadowMap[p]=ee,i.directionalShadowMatrix[p]=N.shadow.matrix,P++}i.directional[p]=ge,p++}else if(N.isSpotLight){let ge=t.get(N);ge.position.setFromMatrixPosition(N.matrixWorld),ge.color.copy(S).multiplyScalar(q),ge.distance=oe,ge.coneCos=Math.cos(N.angle),ge.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),ge.decay=N.decay,i.spot[C]=ge;let se=N.shadow;if(N.map&&(i.spotLightMap[L]=N.map,L++,se.updateMatrices(N),N.castShadow&&B++),i.spotLightMatrix[C]=se.matrix,N.castShadow){let de=e.get(N);de.shadowIntensity=se.intensity,de.shadowBias=se.bias,de.shadowNormalBias=se.normalBias,de.shadowRadius=se.radius,de.shadowMapSize=se.mapSize,i.spotShadow[C]=de,i.spotShadowMap[C]=ee,D++}C++}else if(N.isRectAreaLight){let ge=t.get(N);ge.color.copy(S).multiplyScalar(q),ge.halfWidth.set(N.width*.5,0,0),ge.halfHeight.set(0,N.height*.5,0),i.rectArea[x]=ge,x++}else if(N.isPointLight){let ge=t.get(N);if(ge.color.copy(N.color).multiplyScalar(N.intensity),ge.distance=N.distance,ge.decay=N.decay,N.castShadow){let se=N.shadow,de=e.get(N);de.shadowIntensity=se.intensity,de.shadowBias=se.bias,de.shadowNormalBias=se.normalBias,de.shadowRadius=se.radius,de.shadowMapSize=se.mapSize,de.shadowCameraNear=se.camera.near,de.shadowCameraFar=se.camera.far,i.pointShadow[y]=de,i.pointShadowMap[y]=ee,i.pointShadowMatrix[y]=N.shadow.matrix,E++}i.point[y]=ge,y++}else if(N.isHemisphereLight){let ge=t.get(N);ge.skyColor.copy(N.color).multiplyScalar(q),ge.groundColor.copy(N.groundColor).multiplyScalar(q),i.hemi[b]=ge,b++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_FLOAT_1,i.rectAreaLTC2=ot.LTC_FLOAT_2):(i.rectAreaLTC1=ot.LTC_HALF_1,i.rectAreaLTC2=ot.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=m;let G=i.hash;(G.directionalLength!==p||G.pointLength!==y||G.spotLength!==C||G.rectAreaLength!==x||G.hemiLength!==b||G.numDirectionalShadows!==P||G.numPointShadows!==E||G.numSpotShadows!==D||G.numSpotMaps!==L||G.numLightProbes!==k)&&(i.directional.length=p,i.spot.length=C,i.rectArea.length=x,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=P,i.directionalShadowMap.length=P,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=P,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=D+L-B,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=k,G.directionalLength=p,G.pointLength=y,G.spotLength=C,G.rectAreaLength=x,G.hemiLength=b,G.numDirectionalShadows=P,G.numPointShadows=E,G.numSpotShadows=D,G.numSpotMaps=L,G.numLightProbes=k,i.version=wse++)}function l(u,f){let h=0,m=0,p=0,y=0,C=0,x=f.matrixWorldInverse;for(let b=0,P=u.length;b<P;b++){let E=u[b];if(E.isDirectionalLight){let D=i.directional[h];D.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(x),h++}else if(E.isSpotLight){let D=i.spot[p];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),D.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(x),p++}else if(E.isRectAreaLight){let D=i.rectArea[y];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),s.identity(),o.copy(E.matrixWorld),o.premultiply(x),s.extractRotation(o),D.halfWidth.set(E.width*.5,0,0),D.halfHeight.set(0,E.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),y++}else if(E.isPointLight){let D=i.point[m];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),m++}else if(E.isHemisphereLight){let D=i.hemi[C];D.direction.setFromMatrixPosition(E.matrixWorld),D.direction.transformDirection(x),C++}}}return{setup:a,setupView:l,state:i}}function mU(n){let t=new Sse(n),e=[],i=[];function r(f){u.camera=f,e.length=0,i.length=0}function o(f){e.push(f)}function s(f){i.push(f)}function a(){t.setup(e)}function l(f){t.setupView(e,f)}let u={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Tse(n){let t=new WeakMap;function e(r,o=0){let s=t.get(r),a;return s===void 0?(a=new mU(n),t.set(r,[a])):o>=s.length?(a=new mU(n),s.push(a)):a=s[o],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var IT=class extends Yr{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=yte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},RT=class extends Yr{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},Pse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ose(n,t,e){let i=new Tm,r=new dn,o=new dn,s=new pn,a=new IT({depthPacking:xte}),l=new RT,u={},f=e.maxTextureSize,h={[Ia]:Do,[Do]:Ia,[Xo]:Xo},m=new ka({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dn},radius:{value:4}},vertexShader:Pse,fragmentShader:Dse}),p=m.clone();p.defines.HORIZONTAL_PASS=1;let y=new Oo;y.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let C=new wi(y,m),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UU;let b=this.type;this.render=function(B,k,G){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||B.length===0)return;let F=n.getRenderTarget(),T=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),S=n.state;S.setBlending(Dc),S.buffers.color.setClear(1,1,1,1),S.buffers.depth.setTest(!0),S.setScissorTest(!1);let q=b!==Tl&&this.type===Tl,oe=b===Tl&&this.type!==Tl;for(let ee=0,ge=B.length;ee<ge;ee++){let se=B[ee],de=se.shadow;if(de===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(de.autoUpdate===!1&&de.needsUpdate===!1)continue;r.copy(de.mapSize);let J=de.getFrameExtents();if(r.multiply(J),o.copy(de.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/J.x),r.x=o.x*J.x,de.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/J.y),r.y=o.y*J.y,de.mapSize.y=o.y)),de.map===null||q===!0||oe===!0){let Ie=this.type!==Tl?{minFilter:$r,magFilter:$r}:{};de.map!==null&&de.map.dispose(),de.map=new kl(r.x,r.y,Ie),de.map.texture.name=se.name+".shadowMap",de.camera.updateProjectionMatrix()}n.setRenderTarget(de.map),n.clear();let Q=de.getViewportCount();for(let Ie=0;Ie<Q;Ie++){let Le=de.getViewport(Ie);s.set(o.x*Le.x,o.y*Le.y,o.x*Le.z,o.y*Le.w),S.viewport(s),de.updateMatrices(se,Ie),i=de.getFrustum(),D(k,G,de.camera,se,this.type)}de.isPointLightShadow!==!0&&this.type===Tl&&P(de,G),de.needsUpdate=!1}b=this.type,x.needsUpdate=!1,n.setRenderTarget(F,T,N)};function P(B,k){let G=t.update(C);m.defines.VSM_SAMPLES!==B.blurSamples&&(m.defines.VSM_SAMPLES=B.blurSamples,p.defines.VSM_SAMPLES=B.blurSamples,m.needsUpdate=!0,p.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new kl(r.x,r.y)),m.uniforms.shadow_pass.value=B.map.texture,m.uniforms.resolution.value=B.mapSize,m.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(k,null,G,m,C,null),p.uniforms.shadow_pass.value=B.mapPass.texture,p.uniforms.resolution.value=B.mapSize,p.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(k,null,G,p,C,null)}function E(B,k,G,F){let T=null,N=G.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(N!==void 0)T=N;else if(T=G.isPointLight===!0?l:a,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){let S=T.uuid,q=k.uuid,oe=u[S];oe===void 0&&(oe={},u[S]=oe);let ee=oe[q];ee===void 0&&(ee=T.clone(),oe[q]=ee,k.addEventListener("dispose",L)),T=ee}if(T.visible=k.visible,T.wireframe=k.wireframe,F===Tl?T.side=k.shadowSide!==null?k.shadowSide:k.side:T.side=k.shadowSide!==null?k.shadowSide:h[k.side],T.alphaMap=k.alphaMap,T.alphaTest=k.alphaTest,T.map=k.map,T.clipShadows=k.clipShadows,T.clippingPlanes=k.clippingPlanes,T.clipIntersection=k.clipIntersection,T.displacementMap=k.displacementMap,T.displacementScale=k.displacementScale,T.displacementBias=k.displacementBias,T.wireframeLinewidth=k.wireframeLinewidth,T.linewidth=k.linewidth,G.isPointLight===!0&&T.isMeshDistanceMaterial===!0){let S=n.properties.get(T);S.light=G}return T}function D(B,k,G,F,T){if(B.visible===!1)return;if(B.layers.test(k.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&T===Tl)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,B.matrixWorld);let q=t.update(B),oe=B.material;if(Array.isArray(oe)){let ee=q.groups;for(let ge=0,se=ee.length;ge<se;ge++){let de=ee[ge],J=oe[de.materialIndex];if(J&&J.visible){let Q=E(B,J,F,T);B.onBeforeShadow(n,B,k,G,q,Q,de),n.renderBufferDirect(G,null,q,Q,B,de),B.onAfterShadow(n,B,k,G,q,Q,de)}}}else if(oe.visible){let ee=E(B,oe,F,T);B.onBeforeShadow(n,B,k,G,q,ee,null),n.renderBufferDirect(G,null,q,ee,B,null),B.onAfterShadow(n,B,k,G,q,ee,null)}}let S=B.children;for(let q=0,oe=S.length;q<oe;q++)D(S[q],k,G,F,T)}function L(B){B.target.removeEventListener("dispose",L);for(let G in u){let F=u[G],T=B.target.uuid;T in F&&(F[T].dispose(),delete F[T])}}}var Ase={[VS]:BS,[zS]:WS,[HS]:GS,[qf]:jS,[BS]:VS,[WS]:zS,[GS]:HS,[jS]:qf};function Ise(n,t){function e(){let ae=!1,tt=new pn,Se=null,Be=new pn(0,0,0,0);return{setMask:function(ft){Se!==ft&&!ae&&(n.colorMask(ft,ft,ft,ft),Se=ft)},setLocked:function(ft){ae=ft},setClear:function(ft,ct,nn,Di,vr){vr===!0&&(ft*=Di,ct*=Di,nn*=Di),tt.set(ft,ct,nn,Di),Be.equals(tt)===!1&&(n.clearColor(ft,ct,nn,Di),Be.copy(tt))},reset:function(){ae=!1,Se=null,Be.set(-1,0,0,0)}}}function i(){let ae=!1,tt=!1,Se=null,Be=null,ft=null;return{setReversed:function(ct){if(tt!==ct){let nn=t.get("EXT_clip_control");tt?nn.clipControlEXT(nn.LOWER_LEFT_EXT,nn.ZERO_TO_ONE_EXT):nn.clipControlEXT(nn.LOWER_LEFT_EXT,nn.NEGATIVE_ONE_TO_ONE_EXT);let Di=ft;ft=null,this.setClear(Di)}tt=ct},getReversed:function(){return tt},setTest:function(ct){ct?Ve(n.DEPTH_TEST):mt(n.DEPTH_TEST)},setMask:function(ct){Se!==ct&&!ae&&(n.depthMask(ct),Se=ct)},setFunc:function(ct){if(tt&&(ct=Ase[ct]),Be!==ct){switch(ct){case VS:n.depthFunc(n.NEVER);break;case BS:n.depthFunc(n.ALWAYS);break;case zS:n.depthFunc(n.LESS);break;case qf:n.depthFunc(n.LEQUAL);break;case HS:n.depthFunc(n.EQUAL);break;case jS:n.depthFunc(n.GEQUAL);break;case WS:n.depthFunc(n.GREATER);break;case GS:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Be=ct}},setLocked:function(ct){ae=ct},setClear:function(ct){ft!==ct&&(tt&&(ct=1-ct),n.clearDepth(ct),ft=ct)},reset:function(){ae=!1,Se=null,Be=null,ft=null,tt=!1}}}function r(){let ae=!1,tt=null,Se=null,Be=null,ft=null,ct=null,nn=null,Di=null,vr=null;return{setTest:function(Xn){ae||(Xn?Ve(n.STENCIL_TEST):mt(n.STENCIL_TEST))},setMask:function(Xn){tt!==Xn&&!ae&&(n.stencilMask(Xn),tt=Xn)},setFunc:function(Xn,to,As){(Se!==Xn||Be!==to||ft!==As)&&(n.stencilFunc(Xn,to,As),Se=Xn,Be=to,ft=As)},setOp:function(Xn,to,As){(ct!==Xn||nn!==to||Di!==As)&&(n.stencilOp(Xn,to,As),ct=Xn,nn=to,Di=As)},setLocked:function(Xn){ae=Xn},setClear:function(Xn){vr!==Xn&&(n.clearStencil(Xn),vr=Xn)},reset:function(){ae=!1,tt=null,Se=null,Be=null,ft=null,ct=null,nn=null,Di=null,vr=null}}}let o=new e,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},m=new WeakMap,p=[],y=null,C=!1,x=null,b=null,P=null,E=null,D=null,L=null,B=null,k=new Bt(0,0,0),G=0,F=!1,T=null,N=null,S=null,q=null,oe=null,ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ge=!1,se=0,de=n.getParameter(n.VERSION);de.indexOf("WebGL")!==-1?(se=parseFloat(/^WebGL (\d)/.exec(de)[1]),ge=se>=1):de.indexOf("OpenGL ES")!==-1&&(se=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),ge=se>=2);let J=null,Q={},Ie=n.getParameter(n.SCISSOR_BOX),Le=n.getParameter(n.VIEWPORT),ke=new pn().fromArray(Ie),Ce=new pn().fromArray(Le);function He(ae,tt,Se,Be){let ft=new Uint8Array(4),ct=n.createTexture();n.bindTexture(ae,ct),n.texParameteri(ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let nn=0;nn<Se;nn++)ae===n.TEXTURE_3D||ae===n.TEXTURE_2D_ARRAY?n.texImage3D(tt,0,n.RGBA,1,1,Be,0,n.RGBA,n.UNSIGNED_BYTE,ft):n.texImage2D(tt+nn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ft);return ct}let Ge={};Ge[n.TEXTURE_2D]=He(n.TEXTURE_2D,n.TEXTURE_2D,1),Ge[n.TEXTURE_CUBE_MAP]=He(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ge[n.TEXTURE_2D_ARRAY]=He(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ge[n.TEXTURE_3D]=He(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),Ve(n.DEPTH_TEST),s.setFunc(qf),W(!1),ne(vL),Ve(n.CULL_FACE),j(Dc);function Ve(ae){f[ae]!==!0&&(n.enable(ae),f[ae]=!0)}function mt(ae){f[ae]!==!1&&(n.disable(ae),f[ae]=!1)}function pt(ae,tt){return h[ae]!==tt?(n.bindFramebuffer(ae,tt),h[ae]=tt,ae===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=tt),ae===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=tt),!0):!1}function Lt(ae,tt){let Se=p,Be=!1;if(ae){Se=m.get(tt),Se===void 0&&(Se=[],m.set(tt,Se));let ft=ae.textures;if(Se.length!==ft.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let ct=0,nn=ft.length;ct<nn;ct++)Se[ct]=n.COLOR_ATTACHMENT0+ct;Se.length=ft.length,Be=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Be=!0);Be&&n.drawBuffers(Se)}function Pn(ae){return y!==ae?(n.useProgram(ae),y=ae,!0):!1}let O={[Vu]:n.FUNC_ADD,[jee]:n.FUNC_SUBTRACT,[Wee]:n.FUNC_REVERSE_SUBTRACT};O[Gee]=n.MIN,O[$ee]=n.MAX;let Me={[qee]:n.ZERO,[Yee]:n.ONE,[Xee]:n.SRC_COLOR,[LS]:n.SRC_ALPHA,[tte]:n.SRC_ALPHA_SATURATE,[Qee]:n.DST_COLOR,[Kee]:n.DST_ALPHA,[Zee]:n.ONE_MINUS_SRC_COLOR,[US]:n.ONE_MINUS_SRC_ALPHA,[ete]:n.ONE_MINUS_DST_COLOR,[Jee]:n.ONE_MINUS_DST_ALPHA,[nte]:n.CONSTANT_COLOR,[ite]:n.ONE_MINUS_CONSTANT_COLOR,[rte]:n.CONSTANT_ALPHA,[ote]:n.ONE_MINUS_CONSTANT_ALPHA};function j(ae,tt,Se,Be,ft,ct,nn,Di,vr,Xn){if(ae===Dc){C===!0&&(mt(n.BLEND),C=!1);return}if(C===!1&&(Ve(n.BLEND),C=!0),ae!==Hee){if(ae!==x||Xn!==F){if((b!==Vu||D!==Vu)&&(n.blendEquation(n.FUNC_ADD),b=Vu,D=Vu),Xn)switch(ae){case jf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yL:n.blendFunc(n.ONE,n.ONE);break;case xL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bL:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case jf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yL:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case xL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case bL:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}P=null,E=null,L=null,B=null,k.set(0,0,0),G=0,x=ae,F=Xn}return}ft=ft||tt,ct=ct||Se,nn=nn||Be,(tt!==b||ft!==D)&&(n.blendEquationSeparate(O[tt],O[ft]),b=tt,D=ft),(Se!==P||Be!==E||ct!==L||nn!==B)&&(n.blendFuncSeparate(Me[Se],Me[Be],Me[ct],Me[nn]),P=Se,E=Be,L=ct,B=nn),(Di.equals(k)===!1||vr!==G)&&(n.blendColor(Di.r,Di.g,Di.b,vr),k.copy(Di),G=vr),x=ae,F=!1}function Y(ae,tt){ae.side===Xo?mt(n.CULL_FACE):Ve(n.CULL_FACE);let Se=ae.side===Do;tt&&(Se=!Se),W(Se),ae.blending===jf&&ae.transparent===!1?j(Dc):j(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.blendColor,ae.blendAlpha,ae.premultipliedAlpha),s.setFunc(ae.depthFunc),s.setTest(ae.depthTest),s.setMask(ae.depthWrite),o.setMask(ae.colorWrite);let Be=ae.stencilWrite;a.setTest(Be),Be&&(a.setMask(ae.stencilWriteMask),a.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),a.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),Ee(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?Ve(n.SAMPLE_ALPHA_TO_COVERAGE):mt(n.SAMPLE_ALPHA_TO_COVERAGE)}function W(ae){T!==ae&&(ae?n.frontFace(n.CW):n.frontFace(n.CCW),T=ae)}function ne(ae){ae!==Bee?(Ve(n.CULL_FACE),ae!==N&&(ae===vL?n.cullFace(n.BACK):ae===zee?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):mt(n.CULL_FACE),N=ae}function ve(ae){ae!==S&&(ge&&n.lineWidth(ae),S=ae)}function Ee(ae,tt,Se){ae?(Ve(n.POLYGON_OFFSET_FILL),(q!==tt||oe!==Se)&&(n.polygonOffset(tt,Se),q=tt,oe=Se)):mt(n.POLYGON_OFFSET_FILL)}function ie(ae){ae?Ve(n.SCISSOR_TEST):mt(n.SCISSOR_TEST)}function U(ae){ae===void 0&&(ae=n.TEXTURE0+ee-1),J!==ae&&(n.activeTexture(ae),J=ae)}function R(ae,tt,Se){Se===void 0&&(J===null?Se=n.TEXTURE0+ee-1:Se=J);let Be=Q[Se];Be===void 0&&(Be={type:void 0,texture:void 0},Q[Se]=Be),(Be.type!==ae||Be.texture!==tt)&&(J!==Se&&(n.activeTexture(Se),J=Se),n.bindTexture(ae,tt||Ge[ae]),Be.type=ae,Be.texture=tt)}function K(){let ae=Q[J];ae!==void 0&&ae.type!==void 0&&(n.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ye(){try{n.texSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function st(){try{n.texSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function nt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ln(){try{n.texStorage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function lt(){try{n.texImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function It(){try{n.texImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ot(ae){ke.equals(ae)===!1&&(n.scissor(ae.x,ae.y,ae.z,ae.w),ke.copy(ae))}function ht(ae){Ce.equals(ae)===!1&&(n.viewport(ae.x,ae.y,ae.z,ae.w),Ce.copy(ae))}function Dn(ae,tt){let Se=u.get(tt);Se===void 0&&(Se=new WeakMap,u.set(tt,Se));let Be=Se.get(ae);Be===void 0&&(Be=n.getUniformBlockIndex(tt,ae.name),Se.set(ae,Be))}function tn(ae,tt){let Be=u.get(tt).get(ae);l.get(tt)!==Be&&(n.uniformBlockBinding(tt,Be,ae.__bindingPointIndex),l.set(tt,Be))}function Qn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},J=null,Q={},h={},m=new WeakMap,p=[],y=null,C=!1,x=null,b=null,P=null,E=null,D=null,L=null,B=null,k=new Bt(0,0,0),G=0,F=!1,T=null,N=null,S=null,q=null,oe=null,ke.set(0,0,n.canvas.width,n.canvas.height),Ce.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:Ve,disable:mt,bindFramebuffer:pt,drawBuffers:Lt,useProgram:Pn,setBlending:j,setMaterial:Y,setFlipSided:W,setCullFace:ne,setLineWidth:ve,setPolygonOffset:Ee,setScissorTest:ie,activeTexture:U,bindTexture:R,unbindTexture:K,compressedTexImage2D:_e,compressedTexImage3D:Pe,texImage2D:lt,texImage3D:It,updateUBOMapping:Dn,uniformBlockBinding:tn,texStorage2D:ln,texStorage3D:Fe,texSubImage2D:ye,texSubImage3D:st,compressedTexSubImage2D:et,compressedTexSubImage3D:nt,scissor:Ot,viewport:ht,reset:Qn}}function gU(n,t,e,i){let r=Rse(i);switch(e){case jU:return n*t;case GU:return n*t;case $U:return n*t*2;case iP:return n*t/r.components*r.byteLength;case rP:return n*t/r.components*r.byteLength;case qU:return n*t*2/r.components*r.byteLength;case oP:return n*t*2/r.components*r.byteLength;case WU:return n*t*3/r.components*r.byteLength;case xs:return n*t*4/r.components*r.byteLength;case sP:return n*t*4/r.components*r.byteLength;case my:case gy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case _y:case vy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case XS:case KS:return Math.max(n,16)*Math.max(t,8)/4;case YS:case ZS:return Math.max(n,8)*Math.max(t,8)/2;case JS:case QS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case eT:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case tT:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case nT:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case iT:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case rT:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case oT:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case sT:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case aT:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case lT:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case cT:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case uT:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case dT:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case fT:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case hT:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case pT:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case yy:case mT:case gT:return Math.ceil(n/4)*Math.ceil(t/4)*16;case YU:case _T:return Math.ceil(n/4)*Math.ceil(t/4)*8;case vT:case yT:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Rse(n){switch(n){case Il:case BU:return{byteLength:1,components:1};case Mm:case zU:case km:return{byteLength:2,components:1};case tP:case nP:return{byteLength:2,components:4};case Hu:case eP:case ra:return{byteLength:4,components:1};case HU:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function kse(n,t,e,i,r,o,s){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new dn,f=new WeakMap,h,m=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(U,R){return p?new OffscreenCanvas(U,R):wm("canvas")}function C(U,R,K){let _e=1,Pe=ie(U);if((Pe.width>K||Pe.height>K)&&(_e=K/Math.max(Pe.width,Pe.height)),_e<1)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap||typeof VideoFrame<"u"&&U instanceof VideoFrame){let ye=Math.floor(_e*Pe.width),st=Math.floor(_e*Pe.height);h===void 0&&(h=y(ye,st));let et=R?y(ye,st):h;return et.width=ye,et.height=st,et.getContext("2d").drawImage(U,0,0,ye,st),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+ye+"x"+st+")."),et}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),U;return U}function x(U){return U.generateMipmaps}function b(U){n.generateMipmap(U)}function P(U){return U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:U.isWebGL3DRenderTarget?n.TEXTURE_3D:U.isWebGLArrayRenderTarget||U.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(U,R,K,_e,Pe=!1){if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let ye=R;if(R===n.RED&&(K===n.FLOAT&&(ye=n.R32F),K===n.HALF_FLOAT&&(ye=n.R16F),K===n.UNSIGNED_BYTE&&(ye=n.R8)),R===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.R8UI),K===n.UNSIGNED_SHORT&&(ye=n.R16UI),K===n.UNSIGNED_INT&&(ye=n.R32UI),K===n.BYTE&&(ye=n.R8I),K===n.SHORT&&(ye=n.R16I),K===n.INT&&(ye=n.R32I)),R===n.RG&&(K===n.FLOAT&&(ye=n.RG32F),K===n.HALF_FLOAT&&(ye=n.RG16F),K===n.UNSIGNED_BYTE&&(ye=n.RG8)),R===n.RG_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RG8UI),K===n.UNSIGNED_SHORT&&(ye=n.RG16UI),K===n.UNSIGNED_INT&&(ye=n.RG32UI),K===n.BYTE&&(ye=n.RG8I),K===n.SHORT&&(ye=n.RG16I),K===n.INT&&(ye=n.RG32I)),R===n.RGB_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RGB8UI),K===n.UNSIGNED_SHORT&&(ye=n.RGB16UI),K===n.UNSIGNED_INT&&(ye=n.RGB32UI),K===n.BYTE&&(ye=n.RGB8I),K===n.SHORT&&(ye=n.RGB16I),K===n.INT&&(ye=n.RGB32I)),R===n.RGBA_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RGBA8UI),K===n.UNSIGNED_SHORT&&(ye=n.RGBA16UI),K===n.UNSIGNED_INT&&(ye=n.RGBA32UI),K===n.BYTE&&(ye=n.RGBA8I),K===n.SHORT&&(ye=n.RGBA16I),K===n.INT&&(ye=n.RGBA32I)),R===n.RGB&&K===n.UNSIGNED_INT_5_9_9_9_REV&&(ye=n.RGB9_E5),R===n.RGBA){let st=Pe?Zy:Ln.getTransfer(_e);K===n.FLOAT&&(ye=n.RGBA32F),K===n.HALF_FLOAT&&(ye=n.RGBA16F),K===n.UNSIGNED_BYTE&&(ye=st===fi?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ye}function D(U,R){let K;return U?R===null||R===Hu||R===Zf?K=n.DEPTH24_STENCIL8:R===ra?K=n.DEPTH32F_STENCIL8:R===Mm&&(K=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):R===null||R===Hu||R===Zf?K=n.DEPTH_COMPONENT24:R===ra?K=n.DEPTH_COMPONENT32F:R===Mm&&(K=n.DEPTH_COMPONENT16),K}function L(U,R){return x(U)===!0||U.isFramebufferTexture&&U.minFilter!==$r&&U.minFilter!==Tr?Math.log2(Math.max(R.width,R.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?R.mipmaps.length:1}function B(U){let R=U.target;R.removeEventListener("dispose",B),G(R),R.isVideoTexture&&f.delete(R)}function k(U){let R=U.target;R.removeEventListener("dispose",k),T(R)}function G(U){let R=i.get(U);if(R.__webglInit===void 0)return;let K=U.source,_e=m.get(K);if(_e){let Pe=_e[R.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&F(U),Object.keys(_e).length===0&&m.delete(K)}i.remove(U)}function F(U){let R=i.get(U);n.deleteTexture(R.__webglTexture);let K=U.source,_e=m.get(K);delete _e[R.__cacheKey],s.memory.textures--}function T(U){let R=i.get(U);if(U.depthTexture&&(U.depthTexture.dispose(),i.remove(U.depthTexture)),U.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(R.__webglFramebuffer[_e]))for(let Pe=0;Pe<R.__webglFramebuffer[_e].length;Pe++)n.deleteFramebuffer(R.__webglFramebuffer[_e][Pe]);else n.deleteFramebuffer(R.__webglFramebuffer[_e]);R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer[_e])}else{if(Array.isArray(R.__webglFramebuffer))for(let _e=0;_e<R.__webglFramebuffer.length;_e++)n.deleteFramebuffer(R.__webglFramebuffer[_e]);else n.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&n.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let _e=0;_e<R.__webglColorRenderbuffer.length;_e++)R.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(R.__webglColorRenderbuffer[_e]);R.__webglDepthRenderbuffer&&n.deleteRenderbuffer(R.__webglDepthRenderbuffer)}let K=U.textures;for(let _e=0,Pe=K.length;_e<Pe;_e++){let ye=i.get(K[_e]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),s.memory.textures--),i.remove(K[_e])}i.remove(U)}let N=0;function S(){N=0}function q(){let U=N;return U>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+r.maxTextures),N+=1,U}function oe(U){let R=[];return R.push(U.wrapS),R.push(U.wrapT),R.push(U.wrapR||0),R.push(U.magFilter),R.push(U.minFilter),R.push(U.anisotropy),R.push(U.internalFormat),R.push(U.format),R.push(U.type),R.push(U.generateMipmaps),R.push(U.premultiplyAlpha),R.push(U.flipY),R.push(U.unpackAlignment),R.push(U.colorSpace),R.join()}function ee(U,R){let K=i.get(U);if(U.isVideoTexture&&ve(U),U.isRenderTargetTexture===!1&&U.version>0&&K.__version!==U.version){let _e=U.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(K,U,R);return}}e.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+R)}function ge(U,R){let K=i.get(U);if(U.version>0&&K.__version!==U.version){Ce(K,U,R);return}e.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+R)}function se(U,R){let K=i.get(U);if(U.version>0&&K.__version!==U.version){Ce(K,U,R);return}e.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+R)}function de(U,R){let K=i.get(U);if(U.version>0&&K.__version!==U.version){He(K,U,R);return}e.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+R)}let J={[sr]:n.REPEAT,[Dl]:n.CLAMP_TO_EDGE,[Cm]:n.MIRRORED_REPEAT},Q={[$r]:n.NEAREST,[QT]:n.NEAREST_MIPMAP_NEAREST,[Vf]:n.NEAREST_MIPMAP_LINEAR,[Tr]:n.LINEAR,[vm]:n.LINEAR_MIPMAP_NEAREST,[Po]:n.LINEAR_MIPMAP_LINEAR},Ie={[Cte]:n.NEVER,[Pte]:n.ALWAYS,[Mte]:n.LESS,[KU]:n.LEQUAL,[wte]:n.EQUAL,[Tte]:n.GEQUAL,[Ete]:n.GREATER,[Ste]:n.NOTEQUAL};function Le(U,R){if(R.type===ra&&t.has("OES_texture_float_linear")===!1&&(R.magFilter===Tr||R.magFilter===vm||R.magFilter===Vf||R.magFilter===Po||R.minFilter===Tr||R.minFilter===vm||R.minFilter===Vf||R.minFilter===Po)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(U,n.TEXTURE_WRAP_S,J[R.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,J[R.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,J[R.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,Q[R.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,Q[R.minFilter]),R.compareFunction&&(n.texParameteri(U,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(U,n.TEXTURE_COMPARE_FUNC,Ie[R.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===$r||R.minFilter!==Vf&&R.minFilter!==Po||R.type===ra&&t.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||i.get(R).__currentAnisotropy){let K=t.get("EXT_texture_filter_anisotropic");n.texParameterf(U,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),i.get(R).__currentAnisotropy=R.anisotropy}}}function ke(U,R){let K=!1;U.__webglInit===void 0&&(U.__webglInit=!0,R.addEventListener("dispose",B));let _e=R.source,Pe=m.get(_e);Pe===void 0&&(Pe={},m.set(_e,Pe));let ye=oe(R);if(ye!==U.__cacheKey){Pe[ye]===void 0&&(Pe[ye]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,K=!0),Pe[ye].usedTimes++;let st=Pe[U.__cacheKey];st!==void 0&&(Pe[U.__cacheKey].usedTimes--,st.usedTimes===0&&F(R)),U.__cacheKey=ye,U.__webglTexture=Pe[ye].texture}return K}function Ce(U,R,K){let _e=n.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),R.isData3DTexture&&(_e=n.TEXTURE_3D);let Pe=ke(U,R),ye=R.source;e.bindTexture(_e,U.__webglTexture,n.TEXTURE0+K);let st=i.get(ye);if(ye.version!==st.__version||Pe===!0){e.activeTexture(n.TEXTURE0+K);let et=Ln.getPrimaries(Ln.workingColorSpace),nt=R.colorSpace===Pc?null:Ln.getPrimaries(R.colorSpace),ln=R.colorSpace===Pc||et===nt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ln);let Fe=C(R.image,!1,r.maxTextureSize);Fe=Ee(R,Fe);let lt=o.convert(R.format,R.colorSpace),It=o.convert(R.type),Ot=E(R.internalFormat,lt,It,R.colorSpace,R.isVideoTexture);Le(_e,R);let ht,Dn=R.mipmaps,tn=R.isVideoTexture!==!0,Qn=st.__version===void 0||Pe===!0,ae=ye.dataReady,tt=L(R,Fe);if(R.isDepthTexture)Ot=D(R.format===Kf,R.type),Qn&&(tn?e.texStorage2D(n.TEXTURE_2D,1,Ot,Fe.width,Fe.height):e.texImage2D(n.TEXTURE_2D,0,Ot,Fe.width,Fe.height,0,lt,It,null));else if(R.isDataTexture)if(Dn.length>0){tn&&Qn&&e.texStorage2D(n.TEXTURE_2D,tt,Ot,Dn[0].width,Dn[0].height);for(let Se=0,Be=Dn.length;Se<Be;Se++)ht=Dn[Se],tn?ae&&e.texSubImage2D(n.TEXTURE_2D,Se,0,0,ht.width,ht.height,lt,It,ht.data):e.texImage2D(n.TEXTURE_2D,Se,Ot,ht.width,ht.height,0,lt,It,ht.data);R.generateMipmaps=!1}else tn?(Qn&&e.texStorage2D(n.TEXTURE_2D,tt,Ot,Fe.width,Fe.height),ae&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,lt,It,Fe.data)):e.texImage2D(n.TEXTURE_2D,0,Ot,Fe.width,Fe.height,0,lt,It,Fe.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){tn&&Qn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Ot,Dn[0].width,Dn[0].height,Fe.depth);for(let Se=0,Be=Dn.length;Se<Be;Se++)if(ht=Dn[Se],R.format!==xs)if(lt!==null)if(tn){if(ae)if(R.layerUpdates.size>0){let ft=gU(ht.width,ht.height,R.format,R.type);for(let ct of R.layerUpdates){let nn=ht.data.subarray(ct*ft/ht.data.BYTES_PER_ELEMENT,(ct+1)*ft/ht.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,ct,ht.width,ht.height,1,lt,nn)}R.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ht.width,ht.height,Fe.depth,lt,ht.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Se,Ot,ht.width,ht.height,Fe.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else tn?ae&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ht.width,ht.height,Fe.depth,lt,It,ht.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Se,Ot,ht.width,ht.height,Fe.depth,0,lt,It,ht.data)}else{tn&&Qn&&e.texStorage2D(n.TEXTURE_2D,tt,Ot,Dn[0].width,Dn[0].height);for(let Se=0,Be=Dn.length;Se<Be;Se++)ht=Dn[Se],R.format!==xs?lt!==null?tn?ae&&e.compressedTexSubImage2D(n.TEXTURE_2D,Se,0,0,ht.width,ht.height,lt,ht.data):e.compressedTexImage2D(n.TEXTURE_2D,Se,Ot,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tn?ae&&e.texSubImage2D(n.TEXTURE_2D,Se,0,0,ht.width,ht.height,lt,It,ht.data):e.texImage2D(n.TEXTURE_2D,Se,Ot,ht.width,ht.height,0,lt,It,ht.data)}else if(R.isDataArrayTexture)if(tn){if(Qn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Ot,Fe.width,Fe.height,Fe.depth),ae)if(R.layerUpdates.size>0){let Se=gU(Fe.width,Fe.height,R.format,R.type);for(let Be of R.layerUpdates){let ft=Fe.data.subarray(Be*Se/Fe.data.BYTES_PER_ELEMENT,(Be+1)*Se/Fe.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Be,Fe.width,Fe.height,1,lt,It,ft)}R.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,It,Fe.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Ot,Fe.width,Fe.height,Fe.depth,0,lt,It,Fe.data);else if(R.isData3DTexture)tn?(Qn&&e.texStorage3D(n.TEXTURE_3D,tt,Ot,Fe.width,Fe.height,Fe.depth),ae&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,It,Fe.data)):e.texImage3D(n.TEXTURE_3D,0,Ot,Fe.width,Fe.height,Fe.depth,0,lt,It,Fe.data);else if(R.isFramebufferTexture){if(Qn)if(tn)e.texStorage2D(n.TEXTURE_2D,tt,Ot,Fe.width,Fe.height);else{let Se=Fe.width,Be=Fe.height;for(let ft=0;ft<tt;ft++)e.texImage2D(n.TEXTURE_2D,ft,Ot,Se,Be,0,lt,It,null),Se>>=1,Be>>=1}}else if(Dn.length>0){if(tn&&Qn){let Se=ie(Dn[0]);e.texStorage2D(n.TEXTURE_2D,tt,Ot,Se.width,Se.height)}for(let Se=0,Be=Dn.length;Se<Be;Se++)ht=Dn[Se],tn?ae&&e.texSubImage2D(n.TEXTURE_2D,Se,0,0,lt,It,ht):e.texImage2D(n.TEXTURE_2D,Se,Ot,lt,It,ht);R.generateMipmaps=!1}else if(tn){if(Qn){let Se=ie(Fe);e.texStorage2D(n.TEXTURE_2D,tt,Ot,Se.width,Se.height)}ae&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,lt,It,Fe)}else e.texImage2D(n.TEXTURE_2D,0,Ot,lt,It,Fe);x(R)&&b(_e),st.__version=ye.version,R.onUpdate&&R.onUpdate(R)}U.__version=R.version}function He(U,R,K){if(R.image.length!==6)return;let _e=ke(U,R),Pe=R.source;e.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+K);let ye=i.get(Pe);if(Pe.version!==ye.__version||_e===!0){e.activeTexture(n.TEXTURE0+K);let st=Ln.getPrimaries(Ln.workingColorSpace),et=R.colorSpace===Pc?null:Ln.getPrimaries(R.colorSpace),nt=R.colorSpace===Pc||st===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let ln=R.isCompressedTexture||R.image[0].isCompressedTexture,Fe=R.image[0]&&R.image[0].isDataTexture,lt=[];for(let Be=0;Be<6;Be++)!ln&&!Fe?lt[Be]=C(R.image[Be],!0,r.maxCubemapSize):lt[Be]=Fe?R.image[Be].image:R.image[Be],lt[Be]=Ee(R,lt[Be]);let It=lt[0],Ot=o.convert(R.format,R.colorSpace),ht=o.convert(R.type),Dn=E(R.internalFormat,Ot,ht,R.colorSpace),tn=R.isVideoTexture!==!0,Qn=ye.__version===void 0||_e===!0,ae=Pe.dataReady,tt=L(R,It);Le(n.TEXTURE_CUBE_MAP,R);let Se;if(ln){tn&&Qn&&e.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Dn,It.width,It.height);for(let Be=0;Be<6;Be++){Se=lt[Be].mipmaps;for(let ft=0;ft<Se.length;ft++){let ct=Se[ft];R.format!==xs?Ot!==null?tn?ae&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,0,0,ct.width,ct.height,Ot,ct.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,Dn,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,0,0,ct.width,ct.height,Ot,ht,ct.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,Dn,ct.width,ct.height,0,Ot,ht,ct.data)}}}else{if(Se=R.mipmaps,tn&&Qn){Se.length>0&&tt++;let Be=ie(lt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Dn,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(Fe){tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,lt[Be].width,lt[Be].height,Ot,ht,lt[Be].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,Dn,lt[Be].width,lt[Be].height,0,Ot,ht,lt[Be].data);for(let ft=0;ft<Se.length;ft++){let nn=Se[ft].image[Be].image;tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,0,0,nn.width,nn.height,Ot,ht,nn.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,Dn,nn.width,nn.height,0,Ot,ht,nn.data)}}else{tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,Ot,ht,lt[Be]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,Dn,Ot,ht,lt[Be]);for(let ft=0;ft<Se.length;ft++){let ct=Se[ft];tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,0,0,Ot,ht,ct.image[Be]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,Dn,Ot,ht,ct.image[Be])}}}x(R)&&b(n.TEXTURE_CUBE_MAP),ye.__version=Pe.version,R.onUpdate&&R.onUpdate(R)}U.__version=R.version}function Ge(U,R,K,_e,Pe,ye){let st=o.convert(K.format,K.colorSpace),et=o.convert(K.type),nt=E(K.internalFormat,st,et,K.colorSpace),ln=i.get(R),Fe=i.get(K);if(Fe.__renderTarget=R,!ln.__hasExternalTextures){let lt=Math.max(1,R.width>>ye),It=Math.max(1,R.height>>ye);Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?e.texImage3D(Pe,ye,nt,lt,It,R.depth,0,st,et,null):e.texImage2D(Pe,ye,nt,lt,It,0,st,et,null)}e.bindFramebuffer(n.FRAMEBUFFER,U),ne(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Pe,Fe.__webglTexture,0,W(R)):(Pe===n.TEXTURE_2D||Pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Pe,Fe.__webglTexture,ye),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ve(U,R,K){if(n.bindRenderbuffer(n.RENDERBUFFER,U),R.depthBuffer){let _e=R.depthTexture,Pe=_e&&_e.isDepthTexture?_e.type:null,ye=D(R.stencilBuffer,Pe),st=R.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=W(R);ne(R)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,ye,R.width,R.height):K?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,ye,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,ye,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,st,n.RENDERBUFFER,U)}else{let _e=R.textures;for(let Pe=0;Pe<_e.length;Pe++){let ye=_e[Pe],st=o.convert(ye.format,ye.colorSpace),et=o.convert(ye.type),nt=E(ye.internalFormat,st,et,ye.colorSpace),ln=W(R);K&&ne(R)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ln,nt,R.width,R.height):ne(R)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ln,nt,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,nt,R.width,R.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function mt(U,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,U),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let _e=i.get(R.depthTexture);_e.__renderTarget=R,(!_e.__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),ee(R.depthTexture,0);let Pe=_e.__webglTexture,ye=W(R);if(R.depthTexture.format===Wf)ne(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(R.depthTexture.format===Kf)ne(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function pt(U){let R=i.get(U),K=U.isWebGLCubeRenderTarget===!0;if(R.__boundDepthTexture!==U.depthTexture){let _e=U.depthTexture;if(R.__depthDisposeCallback&&R.__depthDisposeCallback(),_e){let Pe=()=>{delete R.__boundDepthTexture,delete R.__depthDisposeCallback,_e.removeEventListener("dispose",Pe)};_e.addEventListener("dispose",Pe),R.__depthDisposeCallback=Pe}R.__boundDepthTexture=_e}if(U.depthTexture&&!R.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");mt(R.__webglFramebuffer,U)}else if(K){R.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[_e]),R.__webglDepthbuffer[_e]===void 0)R.__webglDepthbuffer[_e]=n.createRenderbuffer(),Ve(R.__webglDepthbuffer[_e],U,!1);else{let Pe=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=R.__webglDepthbuffer[_e];n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,Pe,n.RENDERBUFFER,ye)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer===void 0)R.__webglDepthbuffer=n.createRenderbuffer(),Ve(R.__webglDepthbuffer,U,!1);else{let _e=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pe=R.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,_e,n.RENDERBUFFER,Pe)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Lt(U,R,K){let _e=i.get(U);R!==void 0&&Ge(_e.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&pt(U)}function Pn(U){let R=U.texture,K=i.get(U),_e=i.get(R);U.addEventListener("dispose",k);let Pe=U.textures,ye=U.isWebGLCubeRenderTarget===!0,st=Pe.length>1;if(st||(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=R.version,s.memory.textures++),ye){K.__webglFramebuffer=[];for(let et=0;et<6;et++)if(R.mipmaps&&R.mipmaps.length>0){K.__webglFramebuffer[et]=[];for(let nt=0;nt<R.mipmaps.length;nt++)K.__webglFramebuffer[et][nt]=n.createFramebuffer()}else K.__webglFramebuffer[et]=n.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){K.__webglFramebuffer=[];for(let et=0;et<R.mipmaps.length;et++)K.__webglFramebuffer[et]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(st)for(let et=0,nt=Pe.length;et<nt;et++){let ln=i.get(Pe[et]);ln.__webglTexture===void 0&&(ln.__webglTexture=n.createTexture(),s.memory.textures++)}if(U.samples>0&&ne(U)===!1){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let et=0;et<Pe.length;et++){let nt=Pe[et];K.__webglColorRenderbuffer[et]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[et]);let ln=o.convert(nt.format,nt.colorSpace),Fe=o.convert(nt.type),lt=E(nt.internalFormat,ln,Fe,nt.colorSpace,U.isXRRenderTarget===!0),It=W(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,It,lt,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,K.__webglColorRenderbuffer[et])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),Ve(K.__webglDepthRenderbuffer,U,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){e.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Le(n.TEXTURE_CUBE_MAP,R);for(let et=0;et<6;et++)if(R.mipmaps&&R.mipmaps.length>0)for(let nt=0;nt<R.mipmaps.length;nt++)Ge(K.__webglFramebuffer[et][nt],U,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,nt);else Ge(K.__webglFramebuffer[et],U,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);x(R)&&b(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(st){for(let et=0,nt=Pe.length;et<nt;et++){let ln=Pe[et],Fe=i.get(ln);e.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),Le(n.TEXTURE_2D,ln),Ge(K.__webglFramebuffer,U,ln,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,0),x(ln)&&b(n.TEXTURE_2D)}e.unbindTexture()}else{let et=n.TEXTURE_2D;if((U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(et=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(et,_e.__webglTexture),Le(et,R),R.mipmaps&&R.mipmaps.length>0)for(let nt=0;nt<R.mipmaps.length;nt++)Ge(K.__webglFramebuffer[nt],U,R,n.COLOR_ATTACHMENT0,et,nt);else Ge(K.__webglFramebuffer,U,R,n.COLOR_ATTACHMENT0,et,0);x(R)&&b(et),e.unbindTexture()}U.depthBuffer&&pt(U)}function O(U){let R=U.textures;for(let K=0,_e=R.length;K<_e;K++){let Pe=R[K];if(x(Pe)){let ye=P(U),st=i.get(Pe).__webglTexture;e.bindTexture(ye,st),b(ye),e.unbindTexture()}}}let Me=[],j=[];function Y(U){if(U.samples>0){if(ne(U)===!1){let R=U.textures,K=U.width,_e=U.height,Pe=n.COLOR_BUFFER_BIT,ye=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,st=i.get(U),et=R.length>1;if(et)for(let nt=0;nt<R.length;nt++)e.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let nt=0;nt<R.length;nt++){if(U.resolveDepthBuffer&&(U.depthBuffer&&(Pe|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&U.resolveStencilBuffer&&(Pe|=n.STENCIL_BUFFER_BIT)),et){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,st.__webglColorRenderbuffer[nt]);let ln=i.get(R[nt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ln,0)}n.blitFramebuffer(0,0,K,_e,0,0,K,_e,Pe,n.NEAREST),l===!0&&(Me.length=0,j.length=0,Me.push(n.COLOR_ATTACHMENT0+nt),U.depthBuffer&&U.resolveDepthBuffer===!1&&(Me.push(ye),j.push(ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Me))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),et)for(let nt=0;nt<R.length;nt++){e.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,st.__webglColorRenderbuffer[nt]);let ln=i.get(R[nt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,ln,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}else if(U.depthBuffer&&U.resolveDepthBuffer===!1&&l){let R=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[R])}}}function W(U){return Math.min(r.maxSamples,U.samples)}function ne(U){let R=i.get(U);return U.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function ve(U){let R=s.render.frame;f.get(U)!==R&&(f.set(U,R),U.update())}function Ee(U,R){let K=U.colorSpace,_e=U.format,Pe=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||K!==Zr&&K!==Pc&&(Ln.getTransfer(K)===fi?(_e!==xs||Pe!==Il)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),R}function ie(U){return typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement?(u.width=U.naturalWidth||U.width,u.height=U.naturalHeight||U.height):typeof VideoFrame<"u"&&U instanceof VideoFrame?(u.width=U.displayWidth,u.height=U.displayHeight):(u.width=U.width,u.height=U.height),u}this.allocateTextureUnit=q,this.resetTextureUnits=S,this.setTexture2D=ee,this.setTexture2DArray=ge,this.setTexture3D=se,this.setTextureCube=de,this.rebindTextures=Lt,this.setupRenderTarget=Pn,this.updateRenderTargetMipmap=O,this.updateMultisampleRenderTarget=Y,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=Ge,this.useMultisampledRTT=ne}function Nse(n,t){function e(i,r=Pc){let o,s=Ln.getTransfer(r);if(i===Il)return n.UNSIGNED_BYTE;if(i===tP)return n.UNSIGNED_SHORT_4_4_4_4;if(i===nP)return n.UNSIGNED_SHORT_5_5_5_1;if(i===HU)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===BU)return n.BYTE;if(i===zU)return n.SHORT;if(i===Mm)return n.UNSIGNED_SHORT;if(i===eP)return n.INT;if(i===Hu)return n.UNSIGNED_INT;if(i===ra)return n.FLOAT;if(i===km)return n.HALF_FLOAT;if(i===jU)return n.ALPHA;if(i===WU)return n.RGB;if(i===xs)return n.RGBA;if(i===GU)return n.LUMINANCE;if(i===$U)return n.LUMINANCE_ALPHA;if(i===Wf)return n.DEPTH_COMPONENT;if(i===Kf)return n.DEPTH_STENCIL;if(i===iP)return n.RED;if(i===rP)return n.RED_INTEGER;if(i===qU)return n.RG;if(i===oP)return n.RG_INTEGER;if(i===sP)return n.RGBA_INTEGER;if(i===my||i===gy||i===_y||i===vy)if(s===fi)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===my)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===gy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===_y)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===vy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===my)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===gy)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===_y)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===vy)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===YS||i===XS||i===ZS||i===KS)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===YS)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===XS)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===ZS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===KS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===JS||i===QS||i===eT)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===JS||i===QS)return s===fi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===eT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===tT||i===nT||i===iT||i===rT||i===oT||i===sT||i===aT||i===lT||i===cT||i===uT||i===dT||i===fT||i===hT||i===pT)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===tT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===nT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===iT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===rT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===oT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===sT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===aT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===lT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===cT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===uT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===dT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===fT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===hT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===pT)return s===fi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===yy||i===mT||i===gT)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===yy)return s===fi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===mT)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===gT)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===YU||i===_T||i===vT||i===yT)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===yy)return o.COMPRESSED_RED_RGTC1_EXT;if(i===_T)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===vT)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===yT)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Zf?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var kT=class extends fr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},ni=class extends hr{constructor(){super(),this.isGroup=!0,this.type="Group"}},Fse={type:"move"},bm=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ni,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ni,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ni,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){s=!0;for(let C of t.hand.values()){let x=e.getJointPose(C,i),b=this._getHandJoint(u,C);x!==null&&(b.matrix.fromArray(x.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=x.radius),b.visible=x!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],m=f.position.distanceTo(h.position),p=.02,y=.005;u.inputState.pinching&&m>p+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&m<=p-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Fse)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new ni;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},Lse=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Use=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,NT=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new ws,o=t.properties.get(r);o.__webglTexture=e.texture,(e.depthNear!=i.depthNear||e.depthFar!=i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new ka({vertexShader:Lse,fragmentShader:Use,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new wi(new Cs(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},FT=class extends Rl{constructor(t,e){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,m=null,p=null,y=null,C=new NT,x=e.getContextAttributes(),b=null,P=null,E=[],D=[],L=new dn,B=null,k=new fr;k.viewport=new pn;let G=new fr;G.viewport=new pn;let F=[k,G],T=new kT,N=null,S=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ce){let He=E[Ce];return He===void 0&&(He=new bm,E[Ce]=He),He.getTargetRaySpace()},this.getControllerGrip=function(Ce){let He=E[Ce];return He===void 0&&(He=new bm,E[Ce]=He),He.getGripSpace()},this.getHand=function(Ce){let He=E[Ce];return He===void 0&&(He=new bm,E[Ce]=He),He.getHandSpace()};function q(Ce){let He=D.indexOf(Ce.inputSource);if(He===-1)return;let Ge=E[He];Ge!==void 0&&(Ge.update(Ce.inputSource,Ce.frame,u||s),Ge.dispatchEvent({type:Ce.type,data:Ce.inputSource}))}function oe(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",ee);for(let Ce=0;Ce<E.length;Ce++){let He=D[Ce];He!==null&&(D[Ce]=null,E[Ce].disconnect(He))}N=null,S=null,C.reset(),t.setRenderTarget(b),p=null,m=null,h=null,r=null,P=null,ke.stop(),i.isPresenting=!1,t.setPixelRatio(B),t.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ce){o=Ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ce){a=Ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Ce){u=Ce},this.getBaseLayer=function(){return m!==null?m:p},this.getBinding=function(){return h},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=function(Ce){return Ka(this,null,function*(){if(r=Ce,r!==null){if(b=t.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",ee),x.xrCompatible!==!0&&(yield e.makeXRCompatible()),B=t.getPixelRatio(),t.getSize(L),r.renderState.layers===void 0){let He={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(r,e,He),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),P=new kl(p.framebufferWidth,p.framebufferHeight,{format:xs,type:Il,colorSpace:t.outputColorSpace,stencilBuffer:x.stencil})}else{let He=null,Ge=null,Ve=null;x.depth&&(Ve=x.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,He=x.stencil?Kf:Wf,Ge=x.stencil?Zf:Hu);let mt={colorFormat:e.RGBA8,depthFormat:Ve,scaleFactor:o};h=new XRWebGLBinding(r,e),m=h.createProjectionLayer(mt),r.updateRenderState({layers:[m]}),t.setPixelRatio(1),t.setSize(m.textureWidth,m.textureHeight,!1),P=new kl(m.textureWidth,m.textureHeight,{format:xs,type:Il,depthTexture:new Dy(m.textureWidth,m.textureHeight,Ge,void 0,void 0,void 0,void 0,void 0,void 0,He),stencilBuffer:x.stencil,colorSpace:t.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1})}P.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),ke.setContext(r),ke.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function ee(Ce){for(let He=0;He<Ce.removed.length;He++){let Ge=Ce.removed[He],Ve=D.indexOf(Ge);Ve>=0&&(D[Ve]=null,E[Ve].disconnect(Ge))}for(let He=0;He<Ce.added.length;He++){let Ge=Ce.added[He],Ve=D.indexOf(Ge);if(Ve===-1){for(let pt=0;pt<E.length;pt++)if(pt>=D.length){D.push(Ge),Ve=pt;break}else if(D[pt]===null){D[pt]=Ge,Ve=pt;break}if(Ve===-1)break}let mt=E[Ve];mt&&mt.connect(Ge)}}let ge=new te,se=new te;function de(Ce,He,Ge){ge.setFromMatrixPosition(He.matrixWorld),se.setFromMatrixPosition(Ge.matrixWorld);let Ve=ge.distanceTo(se),mt=He.projectionMatrix.elements,pt=Ge.projectionMatrix.elements,Lt=mt[14]/(mt[10]-1),Pn=mt[14]/(mt[10]+1),O=(mt[9]+1)/mt[5],Me=(mt[9]-1)/mt[5],j=(mt[8]-1)/mt[0],Y=(pt[8]+1)/pt[0],W=Lt*j,ne=Lt*Y,ve=Ve/(-j+Y),Ee=ve*-j;if(He.matrixWorld.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.translateX(Ee),Ce.translateZ(ve),Ce.matrixWorld.compose(Ce.position,Ce.quaternion,Ce.scale),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert(),mt[10]===-1)Ce.projectionMatrix.copy(He.projectionMatrix),Ce.projectionMatrixInverse.copy(He.projectionMatrixInverse);else{let ie=Lt+ve,U=Pn+ve,R=W-Ee,K=ne+(Ve-Ee),_e=O*Pn/U*ie,Pe=Me*Pn/U*ie;Ce.projectionMatrix.makePerspective(R,K,_e,Pe,ie,U),Ce.projectionMatrixInverse.copy(Ce.projectionMatrix).invert()}}function J(Ce,He){He===null?Ce.matrixWorld.copy(Ce.matrix):Ce.matrixWorld.multiplyMatrices(He.matrixWorld,Ce.matrix),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert()}this.updateCamera=function(Ce){if(r===null)return;let He=Ce.near,Ge=Ce.far;C.texture!==null&&(C.depthNear>0&&(He=C.depthNear),C.depthFar>0&&(Ge=C.depthFar)),T.near=G.near=k.near=He,T.far=G.far=k.far=Ge,(N!==T.near||S!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),N=T.near,S=T.far),k.layers.mask=Ce.layers.mask|2,G.layers.mask=Ce.layers.mask|4,T.layers.mask=k.layers.mask|G.layers.mask;let Ve=Ce.parent,mt=T.cameras;J(T,Ve);for(let pt=0;pt<mt.length;pt++)J(mt[pt],Ve);mt.length===2?de(T,k,G):T.projectionMatrix.copy(k.projectionMatrix),Q(Ce,T,Ve)};function Q(Ce,He,Ge){Ge===null?Ce.matrix.copy(He.matrixWorld):(Ce.matrix.copy(Ge.matrixWorld),Ce.matrix.invert(),Ce.matrix.multiply(He.matrixWorld)),Ce.matrix.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.updateMatrixWorld(!0),Ce.projectionMatrix.copy(He.projectionMatrix),Ce.projectionMatrixInverse.copy(He.projectionMatrixInverse),Ce.isPerspectiveCamera&&(Ce.fov=eh*2*Math.atan(1/Ce.projectionMatrix.elements[5]),Ce.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(m===null&&p===null))return l},this.setFoveation=function(Ce){l=Ce,m!==null&&(m.fixedFoveation=Ce),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Ce)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(T)};let Ie=null;function Le(Ce,He){if(f=He.getViewerPose(u||s),y=He,f!==null){let Ge=f.views;p!==null&&(t.setRenderTargetFramebuffer(P,p.framebuffer),t.setRenderTarget(P));let Ve=!1;Ge.length!==T.cameras.length&&(T.cameras.length=0,Ve=!0);for(let pt=0;pt<Ge.length;pt++){let Lt=Ge[pt],Pn=null;if(p!==null)Pn=p.getViewport(Lt);else{let Me=h.getViewSubImage(m,Lt);Pn=Me.viewport,pt===0&&(t.setRenderTargetTextures(P,Me.colorTexture,m.ignoreDepthValues?void 0:Me.depthStencilTexture),t.setRenderTarget(P))}let O=F[pt];O===void 0&&(O=new fr,O.layers.enable(pt),O.viewport=new pn,F[pt]=O),O.matrix.fromArray(Lt.transform.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale),O.projectionMatrix.fromArray(Lt.projectionMatrix),O.projectionMatrixInverse.copy(O.projectionMatrix).invert(),O.viewport.set(Pn.x,Pn.y,Pn.width,Pn.height),pt===0&&(T.matrix.copy(O.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Ve===!0&&T.cameras.push(O)}let mt=r.enabledFeatures;if(mt&&mt.includes("depth-sensing")){let pt=h.getDepthInformation(Ge[0]);pt&&pt.isValid&&pt.texture&&C.init(t,pt,r.renderState)}}for(let Ge=0;Ge<E.length;Ge++){let Ve=D[Ge],mt=E[Ge];Ve!==null&&mt!==void 0&&mt.update(Ve,He,u||s)}Ie&&Ie(Ce,He),He.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:He}),y=null}let ke=new tV;ke.setAnimationLoop(Le),this.setAnimationLoop=function(Ce){Ie=Ce},this.dispose=function(){}}},Lu=new Wu,Vse=new an;function Bse(n,t){function e(x,b){x.matrixAutoUpdate===!0&&x.updateMatrix(),b.value.copy(x.matrix)}function i(x,b){b.color.getRGB(x.fogColor.value,eV(n)),b.isFog?(x.fogNear.value=b.near,x.fogFar.value=b.far):b.isFogExp2&&(x.fogDensity.value=b.density)}function r(x,b,P,E,D){b.isMeshBasicMaterial||b.isMeshLambertMaterial?o(x,b):b.isMeshToonMaterial?(o(x,b),h(x,b)):b.isMeshPhongMaterial?(o(x,b),f(x,b)):b.isMeshStandardMaterial?(o(x,b),m(x,b),b.isMeshPhysicalMaterial&&p(x,b,D)):b.isMeshMatcapMaterial?(o(x,b),y(x,b)):b.isMeshDepthMaterial?o(x,b):b.isMeshDistanceMaterial?(o(x,b),C(x,b)):b.isMeshNormalMaterial?o(x,b):b.isLineBasicMaterial?(s(x,b),b.isLineDashedMaterial&&a(x,b)):b.isPointsMaterial?l(x,b,P,E):b.isSpriteMaterial?u(x,b):b.isShadowMaterial?(x.color.value.copy(b.color),x.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function o(x,b){x.opacity.value=b.opacity,b.color&&x.diffuse.value.copy(b.color),b.emissive&&x.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(x.map.value=b.map,e(b.map,x.mapTransform)),b.alphaMap&&(x.alphaMap.value=b.alphaMap,e(b.alphaMap,x.alphaMapTransform)),b.bumpMap&&(x.bumpMap.value=b.bumpMap,e(b.bumpMap,x.bumpMapTransform),x.bumpScale.value=b.bumpScale,b.side===Do&&(x.bumpScale.value*=-1)),b.normalMap&&(x.normalMap.value=b.normalMap,e(b.normalMap,x.normalMapTransform),x.normalScale.value.copy(b.normalScale),b.side===Do&&x.normalScale.value.negate()),b.displacementMap&&(x.displacementMap.value=b.displacementMap,e(b.displacementMap,x.displacementMapTransform),x.displacementScale.value=b.displacementScale,x.displacementBias.value=b.displacementBias),b.emissiveMap&&(x.emissiveMap.value=b.emissiveMap,e(b.emissiveMap,x.emissiveMapTransform)),b.specularMap&&(x.specularMap.value=b.specularMap,e(b.specularMap,x.specularMapTransform)),b.alphaTest>0&&(x.alphaTest.value=b.alphaTest);let P=t.get(b),E=P.envMap,D=P.envMapRotation;E&&(x.envMap.value=E,Lu.copy(D),Lu.x*=-1,Lu.y*=-1,Lu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Lu.y*=-1,Lu.z*=-1),x.envMapRotation.value.setFromMatrix4(Vse.makeRotationFromEuler(Lu)),x.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=b.reflectivity,x.ior.value=b.ior,x.refractionRatio.value=b.refractionRatio),b.lightMap&&(x.lightMap.value=b.lightMap,x.lightMapIntensity.value=b.lightMapIntensity,e(b.lightMap,x.lightMapTransform)),b.aoMap&&(x.aoMap.value=b.aoMap,x.aoMapIntensity.value=b.aoMapIntensity,e(b.aoMap,x.aoMapTransform))}function s(x,b){x.diffuse.value.copy(b.color),x.opacity.value=b.opacity,b.map&&(x.map.value=b.map,e(b.map,x.mapTransform))}function a(x,b){x.dashSize.value=b.dashSize,x.totalSize.value=b.dashSize+b.gapSize,x.scale.value=b.scale}function l(x,b,P,E){x.diffuse.value.copy(b.color),x.opacity.value=b.opacity,x.size.value=b.size*P,x.scale.value=E*.5,b.map&&(x.map.value=b.map,e(b.map,x.uvTransform)),b.alphaMap&&(x.alphaMap.value=b.alphaMap,e(b.alphaMap,x.alphaMapTransform)),b.alphaTest>0&&(x.alphaTest.value=b.alphaTest)}function u(x,b){x.diffuse.value.copy(b.color),x.opacity.value=b.opacity,x.rotation.value=b.rotation,b.map&&(x.map.value=b.map,e(b.map,x.mapTransform)),b.alphaMap&&(x.alphaMap.value=b.alphaMap,e(b.alphaMap,x.alphaMapTransform)),b.alphaTest>0&&(x.alphaTest.value=b.alphaTest)}function f(x,b){x.specular.value.copy(b.specular),x.shininess.value=Math.max(b.shininess,1e-4)}function h(x,b){b.gradientMap&&(x.gradientMap.value=b.gradientMap)}function m(x,b){x.metalness.value=b.metalness,b.metalnessMap&&(x.metalnessMap.value=b.metalnessMap,e(b.metalnessMap,x.metalnessMapTransform)),x.roughness.value=b.roughness,b.roughnessMap&&(x.roughnessMap.value=b.roughnessMap,e(b.roughnessMap,x.roughnessMapTransform)),b.envMap&&(x.envMapIntensity.value=b.envMapIntensity)}function p(x,b,P){x.ior.value=b.ior,b.sheen>0&&(x.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),x.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(x.sheenColorMap.value=b.sheenColorMap,e(b.sheenColorMap,x.sheenColorMapTransform)),b.sheenRoughnessMap&&(x.sheenRoughnessMap.value=b.sheenRoughnessMap,e(b.sheenRoughnessMap,x.sheenRoughnessMapTransform))),b.clearcoat>0&&(x.clearcoat.value=b.clearcoat,x.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(x.clearcoatMap.value=b.clearcoatMap,e(b.clearcoatMap,x.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,e(b.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(x.clearcoatNormalMap.value=b.clearcoatNormalMap,e(b.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===Do&&x.clearcoatNormalScale.value.negate())),b.dispersion>0&&(x.dispersion.value=b.dispersion),b.iridescence>0&&(x.iridescence.value=b.iridescence,x.iridescenceIOR.value=b.iridescenceIOR,x.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(x.iridescenceMap.value=b.iridescenceMap,e(b.iridescenceMap,x.iridescenceMapTransform)),b.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=b.iridescenceThicknessMap,e(b.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),b.transmission>0&&(x.transmission.value=b.transmission,x.transmissionSamplerMap.value=P.texture,x.transmissionSamplerSize.value.set(P.width,P.height),b.transmissionMap&&(x.transmissionMap.value=b.transmissionMap,e(b.transmissionMap,x.transmissionMapTransform)),x.thickness.value=b.thickness,b.thicknessMap&&(x.thicknessMap.value=b.thicknessMap,e(b.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=b.attenuationDistance,x.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(x.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(x.anisotropyMap.value=b.anisotropyMap,e(b.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=b.specularIntensity,x.specularColor.value.copy(b.specularColor),b.specularColorMap&&(x.specularColorMap.value=b.specularColorMap,e(b.specularColorMap,x.specularColorMapTransform)),b.specularIntensityMap&&(x.specularIntensityMap.value=b.specularIntensityMap,e(b.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,b){b.matcap&&(x.matcap.value=b.matcap)}function C(x,b){let P=t.get(b).light;x.referencePosition.value.setFromMatrixPosition(P.matrixWorld),x.nearDistance.value=P.shadow.camera.near,x.farDistance.value=P.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function zse(n,t,e,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(P,E){let D=E.program;i.uniformBlockBinding(P,D)}function u(P,E){let D=r[P.id];D===void 0&&(y(P),D=f(P),r[P.id]=D,P.addEventListener("dispose",x));let L=E.program;i.updateUBOMapping(P,L);let B=t.render.frame;o[P.id]!==B&&(m(P),o[P.id]=B)}function f(P){let E=h();P.__bindingPointIndex=E;let D=n.createBuffer(),L=P.__size,B=P.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,L,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,D),D}function h(){for(let P=0;P<a;P++)if(s.indexOf(P)===-1)return s.push(P),P;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(P){let E=r[P.id],D=P.uniforms,L=P.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let B=0,k=D.length;B<k;B++){let G=Array.isArray(D[B])?D[B]:[D[B]];for(let F=0,T=G.length;F<T;F++){let N=G[F];if(p(N,B,F,L)===!0){let S=N.__offset,q=Array.isArray(N.value)?N.value:[N.value],oe=0;for(let ee=0;ee<q.length;ee++){let ge=q[ee],se=C(ge);typeof ge=="number"||typeof ge=="boolean"?(N.__data[0]=ge,n.bufferSubData(n.UNIFORM_BUFFER,S+oe,N.__data)):ge.isMatrix3?(N.__data[0]=ge.elements[0],N.__data[1]=ge.elements[1],N.__data[2]=ge.elements[2],N.__data[3]=0,N.__data[4]=ge.elements[3],N.__data[5]=ge.elements[4],N.__data[6]=ge.elements[5],N.__data[7]=0,N.__data[8]=ge.elements[6],N.__data[9]=ge.elements[7],N.__data[10]=ge.elements[8],N.__data[11]=0):(ge.toArray(N.__data,oe),oe+=se.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,S,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(P,E,D,L){let B=P.value,k=E+"_"+D;if(L[k]===void 0)return typeof B=="number"||typeof B=="boolean"?L[k]=B:L[k]=B.clone(),!0;{let G=L[k];if(typeof B=="number"||typeof B=="boolean"){if(G!==B)return L[k]=B,!0}else if(G.equals(B)===!1)return G.copy(B),!0}return!1}function y(P){let E=P.uniforms,D=0,L=16;for(let k=0,G=E.length;k<G;k++){let F=Array.isArray(E[k])?E[k]:[E[k]];for(let T=0,N=F.length;T<N;T++){let S=F[T],q=Array.isArray(S.value)?S.value:[S.value];for(let oe=0,ee=q.length;oe<ee;oe++){let ge=q[oe],se=C(ge),de=D%L,J=de%se.boundary,Q=de+J;D+=J,Q!==0&&L-Q<se.storage&&(D+=L-Q),S.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=D,D+=se.storage}}}let B=D%L;return B>0&&(D+=L-B),P.__size=D,P.__cache={},this}function C(P){let E={boundary:0,storage:0};return typeof P=="number"||typeof P=="boolean"?(E.boundary=4,E.storage=4):P.isVector2?(E.boundary=8,E.storage=8):P.isVector3||P.isColor?(E.boundary=16,E.storage=12):P.isVector4?(E.boundary=16,E.storage=16):P.isMatrix3?(E.boundary=48,E.storage=48):P.isMatrix4?(E.boundary=64,E.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),E}function x(P){let E=P.target;E.removeEventListener("dispose",x);let D=s.indexOf(E.__bindingPointIndex);s.splice(D,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete o[E.id]}function b(){for(let P in r)n.deleteBuffer(r[P]);s=[],r={},o={}}return{bind:l,update:u,dispose:b}}var Oy=class{constructor(t={}){let{canvas:e=Gte(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:m=!1}=t;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=s;let y=new Uint32Array(4),C=new Int32Array(4),x=null,b=null,P=[],E=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Li,this.toneMapping=Oc,this.toneMappingExposure=1;let D=this,L=!1,B=0,k=0,G=null,F=-1,T=null,N=new pn,S=new pn,q=null,oe=new Bt(0),ee=0,ge=e.width,se=e.height,de=1,J=null,Q=null,Ie=new pn(0,0,ge,se),Le=new pn(0,0,ge,se),ke=!1,Ce=new Tm,He=!1,Ge=!1,Ve=new an,mt=new an,pt=new te,Lt=new pn,Pn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},O=!1;function Me(){return G===null?de:1}let j=i;function Y(z,he){return e.getContext(z,he)}try{let z={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${KT}`),e.addEventListener("webglcontextlost",Be,!1),e.addEventListener("webglcontextrestored",ft,!1),e.addEventListener("webglcontextcreationerror",ct,!1),j===null){let he="webgl2";if(j=Y(he,z),j===null)throw Y(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let W,ne,ve,Ee,ie,U,R,K,_e,Pe,ye,st,et,nt,ln,Fe,lt,It,Ot,ht,Dn,tn,Qn,ae;function tt(){W=new ioe(j),W.init(),tn=new Nse(j,W),ne=new Kre(j,W,t,tn),ve=new Ise(j,W),ne.reverseDepthBuffer&&m&&ve.buffers.depth.setReversed(!0),Ee=new soe(j),ie=new yse,U=new kse(j,W,ve,ie,ne,tn,Ee),R=new Qre(D),K=new noe(D),_e=new hne(j),Qn=new Xre(j,_e),Pe=new roe(j,_e,Ee,Qn),ye=new loe(j,Pe,_e,Ee),Ot=new aoe(j,ne,U),Fe=new Jre(ie),st=new vse(D,R,K,W,ne,Qn,Fe),et=new Bse(D,ie),nt=new bse,ln=new Tse(W),It=new Yre(D,R,K,ve,ye,p,l),lt=new Ose(D,ye,ne),ae=new zse(j,Ee,ne,ve),ht=new Zre(j,W,Ee),Dn=new ooe(j,W,Ee),Ee.programs=st.programs,D.capabilities=ne,D.extensions=W,D.properties=ie,D.renderLists=nt,D.shadowMap=lt,D.state=ve,D.info=Ee}tt();let Se=new FT(D,j);this.xr=Se,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){let z=W.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){let z=W.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(z){z!==void 0&&(de=z,this.setSize(ge,se,!1))},this.getSize=function(z){return z.set(ge,se)},this.setSize=function(z,he,xe=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ge=z,se=he,e.width=Math.floor(z*de),e.height=Math.floor(he*de),xe===!0&&(e.style.width=z+"px",e.style.height=he+"px"),this.setViewport(0,0,z,he)},this.getDrawingBufferSize=function(z){return z.set(ge*de,se*de).floor()},this.setDrawingBufferSize=function(z,he,xe){ge=z,se=he,de=xe,e.width=Math.floor(z*xe),e.height=Math.floor(he*xe),this.setViewport(0,0,z,he)},this.getCurrentViewport=function(z){return z.copy(N)},this.getViewport=function(z){return z.copy(Ie)},this.setViewport=function(z,he,xe,be){z.isVector4?Ie.set(z.x,z.y,z.z,z.w):Ie.set(z,he,xe,be),ve.viewport(N.copy(Ie).multiplyScalar(de).round())},this.getScissor=function(z){return z.copy(Le)},this.setScissor=function(z,he,xe,be){z.isVector4?Le.set(z.x,z.y,z.z,z.w):Le.set(z,he,xe,be),ve.scissor(S.copy(Le).multiplyScalar(de).round())},this.getScissorTest=function(){return ke},this.setScissorTest=function(z){ve.setScissorTest(ke=z)},this.setOpaqueSort=function(z){J=z},this.setTransparentSort=function(z){Q=z},this.getClearColor=function(z){return z.copy(It.getClearColor())},this.setClearColor=function(){It.setClearColor.apply(It,arguments)},this.getClearAlpha=function(){return It.getClearAlpha()},this.setClearAlpha=function(){It.setClearAlpha.apply(It,arguments)},this.clear=function(z=!0,he=!0,xe=!0){let be=0;if(z){let fe=!1;if(G!==null){let Qe=G.texture.format;fe=Qe===sP||Qe===oP||Qe===rP}if(fe){let Qe=G.texture.type,ut=Qe===Il||Qe===Hu||Qe===Mm||Qe===Zf||Qe===tP||Qe===nP,Et=It.getClearColor(),wt=It.getClearAlpha(),Xt=Et.r,rn=Et.g,St=Et.b;ut?(y[0]=Xt,y[1]=rn,y[2]=St,y[3]=wt,j.clearBufferuiv(j.COLOR,0,y)):(C[0]=Xt,C[1]=rn,C[2]=St,C[3]=wt,j.clearBufferiv(j.COLOR,0,C))}else be|=j.COLOR_BUFFER_BIT}he&&(be|=j.DEPTH_BUFFER_BIT),xe&&(be|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Be,!1),e.removeEventListener("webglcontextrestored",ft,!1),e.removeEventListener("webglcontextcreationerror",ct,!1),nt.dispose(),ln.dispose(),ie.dispose(),R.dispose(),K.dispose(),ye.dispose(),Qn.dispose(),ae.dispose(),st.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",id),Se.removeEventListener("sessionend",Zm),Ba.stop()};function Be(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;let z=Ee.autoReset,he=lt.enabled,xe=lt.autoUpdate,be=lt.needsUpdate,fe=lt.type;tt(),Ee.autoReset=z,lt.enabled=he,lt.autoUpdate=xe,lt.needsUpdate=be,lt.type=fe}function ct(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function nn(z){let he=z.target;he.removeEventListener("dispose",nn),Di(he)}function Di(z){vr(z),ie.remove(z)}function vr(z){let he=ie.get(z).programs;he!==void 0&&(he.forEach(function(xe){st.releaseProgram(xe)}),z.isShaderMaterial&&st.releaseShaderCache(z))}this.renderBufferDirect=function(z,he,xe,be,fe,Qe){he===null&&(he=Pn);let ut=fe.isMesh&&fe.matrixWorld.determinant()<0,Et=Sb(z,he,xe,be,fe);ve.setMaterial(be,ut);let wt=xe.index,Xt=1;if(be.wireframe===!0){if(wt=Pe.getWireframeAttribute(xe),wt===void 0)return;Xt=2}let rn=xe.drawRange,St=xe.attributes.position,zn=rn.start*Xt,ai=(rn.start+rn.count)*Xt;Qe!==null&&(zn=Math.max(zn,Qe.start*Xt),ai=Math.min(ai,(Qe.start+Qe.count)*Xt)),wt!==null?(zn=Math.max(zn,0),ai=Math.min(ai,wt.count)):St!=null&&(zn=Math.max(zn,0),ai=Math.min(ai,St.count));let hi=ai-zn;if(hi<0||hi===1/0)return;Qn.setup(fe,be,Et,xe,wt);let Dr,jn=ht;if(wt!==null&&(Dr=_e.get(wt),jn=Dn,jn.setIndex(Dr)),fe.isMesh)be.wireframe===!0?(ve.setLineWidth(be.wireframeLinewidth*Me()),jn.setMode(j.LINES)):jn.setMode(j.TRIANGLES);else if(fe.isLine){let At=be.linewidth;At===void 0&&(At=1),ve.setLineWidth(At*Me()),fe.isLineSegments?jn.setMode(j.LINES):fe.isLineLoop?jn.setMode(j.LINE_LOOP):jn.setMode(j.LINE_STRIP)}else fe.isPoints?jn.setMode(j.POINTS):fe.isSprite&&jn.setMode(j.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)jn.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(W.get("WEBGL_multi_draw"))jn.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{let At=fe._multiDrawStarts,Ao=fe._multiDrawCounts,Yn=fe._multiDrawCount,mo=wt?_e.get(wt).bytesPerElement:1,Is=ie.get(be).currentProgram.getUniforms();for(let Nr=0;Nr<Yn;Nr++)Is.setValue(j,"_gl_DrawID",Nr),jn.render(At[Nr]/mo,Ao[Nr])}else if(fe.isInstancedMesh)jn.renderInstances(zn,hi,fe.count);else if(xe.isInstancedBufferGeometry){let At=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,Ao=Math.min(xe.instanceCount,At);jn.renderInstances(zn,hi,Ao)}else jn.render(zn,hi)};function Xn(z,he,xe){z.transparent===!0&&z.side===Xo&&z.forceSinglePass===!1?(z.side=Do,z.needsUpdate=!0,od(z,he,xe),z.side=Ia,z.needsUpdate=!0,od(z,he,xe),z.side=Xo):od(z,he,xe)}this.compile=function(z,he,xe=null){xe===null&&(xe=z),b=ln.get(xe),b.init(he),E.push(b),xe.traverseVisible(function(fe){fe.isLight&&fe.layers.test(he.layers)&&(b.pushLight(fe),fe.castShadow&&b.pushShadow(fe))}),z!==xe&&z.traverseVisible(function(fe){fe.isLight&&fe.layers.test(he.layers)&&(b.pushLight(fe),fe.castShadow&&b.pushShadow(fe))}),b.setupLights();let be=new Set;return z.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;let Qe=fe.material;if(Qe)if(Array.isArray(Qe))for(let ut=0;ut<Qe.length;ut++){let Et=Qe[ut];Xn(Et,xe,fe),be.add(Et)}else Xn(Qe,xe,fe),be.add(Qe)}),E.pop(),b=null,be},this.compileAsync=function(z,he,xe=null){let be=this.compile(z,he,xe);return new Promise(fe=>{function Qe(){if(be.forEach(function(ut){ie.get(ut).currentProgram.isReady()&&be.delete(ut)}),be.size===0){fe(z);return}setTimeout(Qe,10)}W.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let to=null;function As(z){to&&to(z)}function id(){Ba.stop()}function Zm(){Ba.start()}let Ba=new tV;Ba.setAnimationLoop(As),typeof self<"u"&&Ba.setContext(self),this.setAnimationLoop=function(z){to=z,Se.setAnimationLoop(z),z===null?Ba.stop():Ba.start()},Se.addEventListener("sessionstart",id),Se.addEventListener("sessionend",Zm),this.render=function(z,he){if(he!==void 0&&he.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),he.parent===null&&he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(he),he=Se.getCamera()),z.isScene===!0&&z.onBeforeRender(D,z,he,G),b=ln.get(z,E.length),b.init(he),E.push(b),mt.multiplyMatrices(he.projectionMatrix,he.matrixWorldInverse),Ce.setFromProjectionMatrix(mt),Ge=this.localClippingEnabled,He=Fe.init(this.clippingPlanes,Ge),x=nt.get(z,P.length),x.init(),P.push(x),Se.enabled===!0&&Se.isPresenting===!0){let Qe=D.xr.getDepthSensingMesh();Qe!==null&&Dh(Qe,he,-1/0,D.sortObjects)}Dh(z,he,0,D.sortObjects),x.finish(),D.sortObjects===!0&&x.sort(J,Q),O=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,O&&It.addToRenderList(x,z),this.info.render.frame++,He===!0&&Fe.beginShadows();let xe=b.state.shadowsArray;lt.render(xe,z,he),He===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();let be=x.opaque,fe=x.transmissive;if(b.setupLights(),he.isArrayCamera){let Qe=he.cameras;if(fe.length>0)for(let ut=0,Et=Qe.length;ut<Et;ut++){let wt=Qe[ut];Jm(be,fe,z,wt)}O&&It.render(z);for(let ut=0,Et=Qe.length;ut<Et;ut++){let wt=Qe[ut];Km(x,z,wt,wt.viewport)}}else fe.length>0&&Jm(be,fe,z,he),O&&It.render(z),Km(x,z,he);G!==null&&(U.updateMultisampleRenderTarget(G),U.updateRenderTargetMipmap(G)),z.isScene===!0&&z.onAfterRender(D,z,he),Qn.resetDefaultState(),F=-1,T=null,E.pop(),E.length>0?(b=E[E.length-1],He===!0&&Fe.setGlobalState(D.clippingPlanes,b.state.camera)):b=null,P.pop(),P.length>0?x=P[P.length-1]:x=null};function Dh(z,he,xe,be){if(z.visible===!1)return;if(z.layers.test(he.layers)){if(z.isGroup)xe=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(he);else if(z.isLight)b.pushLight(z),z.castShadow&&b.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||Ce.intersectsSprite(z)){be&&Lt.setFromMatrixPosition(z.matrixWorld).applyMatrix4(mt);let ut=ye.update(z),Et=z.material;Et.visible&&x.push(z,ut,Et,xe,Lt.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||Ce.intersectsObject(z))){let ut=ye.update(z),Et=z.material;if(be&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),Lt.copy(z.boundingSphere.center)):(ut.boundingSphere===null&&ut.computeBoundingSphere(),Lt.copy(ut.boundingSphere.center)),Lt.applyMatrix4(z.matrixWorld).applyMatrix4(mt)),Array.isArray(Et)){let wt=ut.groups;for(let Xt=0,rn=wt.length;Xt<rn;Xt++){let St=wt[Xt],zn=Et[St.materialIndex];zn&&zn.visible&&x.push(z,ut,zn,xe,Lt.z,St)}}else Et.visible&&x.push(z,ut,Et,xe,Lt.z,null)}}let Qe=z.children;for(let ut=0,Et=Qe.length;ut<Et;ut++)Dh(Qe[ut],he,xe,be)}function Km(z,he,xe,be){let fe=z.opaque,Qe=z.transmissive,ut=z.transparent;b.setupLightsView(xe),He===!0&&Fe.setGlobalState(D.clippingPlanes,xe),be&&ve.viewport(N.copy(be)),fe.length>0&&rd(fe,he,xe),Qe.length>0&&rd(Qe,he,xe),ut.length>0&&rd(ut,he,xe),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1)}function Jm(z,he,xe,be){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[be.id]===void 0&&(b.state.transmissionRenderTarget[be.id]=new kl(1,1,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")||W.has("EXT_color_buffer_float")?km:Il,minFilter:Po,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ln.workingColorSpace}));let Qe=b.state.transmissionRenderTarget[be.id],ut=be.viewport||N;Qe.setSize(ut.z,ut.w);let Et=D.getRenderTarget();D.setRenderTarget(Qe),D.getClearColor(oe),ee=D.getClearAlpha(),ee<1&&D.setClearColor(16777215,.5),D.clear(),O&&It.render(xe);let wt=D.toneMapping;D.toneMapping=Oc;let Xt=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),b.setupLightsView(be),He===!0&&Fe.setGlobalState(D.clippingPlanes,be),rd(z,xe,be),U.updateMultisampleRenderTarget(Qe),U.updateRenderTargetMipmap(Qe),W.has("WEBGL_multisampled_render_to_texture")===!1){let rn=!1;for(let St=0,zn=he.length;St<zn;St++){let ai=he[St],hi=ai.object,Dr=ai.geometry,jn=ai.material,At=ai.group;if(jn.side===Xo&&hi.layers.test(be.layers)){let Ao=jn.side;jn.side=Do,jn.needsUpdate=!0,Qm(hi,xe,be,Dr,jn,At),jn.side=Ao,jn.needsUpdate=!0,rn=!0}}rn===!0&&(U.updateMultisampleRenderTarget(Qe),U.updateRenderTargetMipmap(Qe))}D.setRenderTarget(Et),D.setClearColor(oe,ee),Xt!==void 0&&(be.viewport=Xt),D.toneMapping=wt}function rd(z,he,xe){let be=he.isScene===!0?he.overrideMaterial:null;for(let fe=0,Qe=z.length;fe<Qe;fe++){let ut=z[fe],Et=ut.object,wt=ut.geometry,Xt=be===null?ut.material:be,rn=ut.group;Et.layers.test(xe.layers)&&Qm(Et,he,xe,wt,Xt,rn)}}function Qm(z,he,xe,be,fe,Qe){z.onBeforeRender(D,he,xe,be,fe,Qe),z.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),fe.onBeforeRender(D,he,xe,be,z,Qe),fe.transparent===!0&&fe.side===Xo&&fe.forceSinglePass===!1?(fe.side=Do,fe.needsUpdate=!0,D.renderBufferDirect(xe,he,be,fe,z,Qe),fe.side=Ia,fe.needsUpdate=!0,D.renderBufferDirect(xe,he,be,fe,z,Qe),fe.side=Xo):D.renderBufferDirect(xe,he,be,fe,z,Qe),z.onAfterRender(D,he,xe,be,fe,Qe)}function od(z,he,xe){he.isScene!==!0&&(he=Pn);let be=ie.get(z),fe=b.state.lights,Qe=b.state.shadowsArray,ut=fe.state.version,Et=st.getParameters(z,fe.state,Qe,he,xe),wt=st.getProgramCacheKey(Et),Xt=be.programs;be.environment=z.isMeshStandardMaterial?he.environment:null,be.fog=he.fog,be.envMap=(z.isMeshStandardMaterial?K:R).get(z.envMap||be.environment),be.envMapRotation=be.environment!==null&&z.envMap===null?he.environmentRotation:z.envMapRotation,Xt===void 0&&(z.addEventListener("dispose",nn),Xt=new Map,be.programs=Xt);let rn=Xt.get(wt);if(rn!==void 0){if(be.currentProgram===rn&&be.lightsStateVersion===ut)return eg(z,Et),rn}else Et.uniforms=st.getUniforms(z),z.onBeforeCompile(Et,D),rn=st.acquireProgram(Et,wt),Xt.set(wt,rn),be.uniforms=Et.uniforms;let St=be.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(St.clippingPlanes=Fe.uniform),eg(z,Et),be.needsLights=Pb(z),be.lightsStateVersion=ut,be.needsLights&&(St.ambientLightColor.value=fe.state.ambient,St.lightProbe.value=fe.state.probe,St.directionalLights.value=fe.state.directional,St.directionalLightShadows.value=fe.state.directionalShadow,St.spotLights.value=fe.state.spot,St.spotLightShadows.value=fe.state.spotShadow,St.rectAreaLights.value=fe.state.rectArea,St.ltc_1.value=fe.state.rectAreaLTC1,St.ltc_2.value=fe.state.rectAreaLTC2,St.pointLights.value=fe.state.point,St.pointLightShadows.value=fe.state.pointShadow,St.hemisphereLights.value=fe.state.hemi,St.directionalShadowMap.value=fe.state.directionalShadowMap,St.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,St.spotShadowMap.value=fe.state.spotShadowMap,St.spotLightMatrix.value=fe.state.spotLightMatrix,St.spotLightMap.value=fe.state.spotLightMap,St.pointShadowMap.value=fe.state.pointShadowMap,St.pointShadowMatrix.value=fe.state.pointShadowMatrix),be.currentProgram=rn,be.uniformsList=null,rn}function Oh(z){if(z.uniformsList===null){let he=z.currentProgram.getUniforms();z.uniformsList=$f.seqWithValue(he.seq,z.uniforms)}return z.uniformsList}function eg(z,he){let xe=ie.get(z);xe.outputColorSpace=he.outputColorSpace,xe.batching=he.batching,xe.batchingColor=he.batchingColor,xe.instancing=he.instancing,xe.instancingColor=he.instancingColor,xe.instancingMorph=he.instancingMorph,xe.skinning=he.skinning,xe.morphTargets=he.morphTargets,xe.morphNormals=he.morphNormals,xe.morphColors=he.morphColors,xe.morphTargetsCount=he.morphTargetsCount,xe.numClippingPlanes=he.numClippingPlanes,xe.numIntersection=he.numClipIntersection,xe.vertexAlphas=he.vertexAlphas,xe.vertexTangents=he.vertexTangents,xe.toneMapping=he.toneMapping}function Sb(z,he,xe,be,fe){he.isScene!==!0&&(he=Pn),U.resetTextureUnits();let Qe=he.fog,ut=be.isMeshStandardMaterial?he.environment:null,Et=G===null?D.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:Zr,wt=(be.isMeshStandardMaterial?K:R).get(be.envMap||ut),Xt=be.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,rn=!!xe.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),St=!!xe.morphAttributes.position,zn=!!xe.morphAttributes.normal,ai=!!xe.morphAttributes.color,hi=Oc;be.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(hi=D.toneMapping);let Dr=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,jn=Dr!==void 0?Dr.length:0,At=ie.get(be),Ao=b.state.lights;if(He===!0&&(Ge===!0||z!==T)){let go=z===T&&be.id===F;Fe.setState(be,z,go)}let Yn=!1;be.version===At.__version?(At.needsLights&&At.lightsStateVersion!==Ao.state.version||At.outputColorSpace!==Et||fe.isBatchedMesh&&At.batching===!1||!fe.isBatchedMesh&&At.batching===!0||fe.isBatchedMesh&&At.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&At.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&At.instancing===!1||!fe.isInstancedMesh&&At.instancing===!0||fe.isSkinnedMesh&&At.skinning===!1||!fe.isSkinnedMesh&&At.skinning===!0||fe.isInstancedMesh&&At.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&At.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&At.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&At.instancingMorph===!1&&fe.morphTexture!==null||At.envMap!==wt||be.fog===!0&&At.fog!==Qe||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==Fe.numPlanes||At.numIntersection!==Fe.numIntersection)||At.vertexAlphas!==Xt||At.vertexTangents!==rn||At.morphTargets!==St||At.morphNormals!==zn||At.morphColors!==ai||At.toneMapping!==hi||At.morphTargetsCount!==jn)&&(Yn=!0):(Yn=!0,At.__version=be.version);let mo=At.currentProgram;Yn===!0&&(mo=od(be,he,fe));let Is=!1,Nr=!1,Wc=!1,li=mo.getUniforms(),Io=At.uniforms;if(ve.useProgram(mo.program)&&(Is=!0,Nr=!0,Wc=!0),be.id!==F&&(F=be.id,Nr=!0),Is||T!==z){ve.buffers.depth.getReversed()?(Ve.copy(z.projectionMatrix),qte(Ve),Yte(Ve),li.setValue(j,"projectionMatrix",Ve)):li.setValue(j,"projectionMatrix",z.projectionMatrix),li.setValue(j,"viewMatrix",z.matrixWorldInverse);let Rs=li.map.cameraPosition;Rs!==void 0&&Rs.setValue(j,pt.setFromMatrixPosition(z.matrixWorld)),ne.logarithmicDepthBuffer&&li.setValue(j,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&li.setValue(j,"isOrthographic",z.isOrthographicCamera===!0),T!==z&&(T=z,Nr=!0,Wc=!0)}if(fe.isSkinnedMesh){li.setOptional(j,fe,"bindMatrix"),li.setOptional(j,fe,"bindMatrixInverse");let go=fe.skeleton;go&&(go.boneTexture===null&&go.computeBoneTexture(),li.setValue(j,"boneTexture",go.boneTexture,U))}fe.isBatchedMesh&&(li.setOptional(j,fe,"batchingTexture"),li.setValue(j,"batchingTexture",fe._matricesTexture,U),li.setOptional(j,fe,"batchingIdTexture"),li.setValue(j,"batchingIdTexture",fe._indirectTexture,U),li.setOptional(j,fe,"batchingColorTexture"),fe._colorsTexture!==null&&li.setValue(j,"batchingColorTexture",fe._colorsTexture,U));let za=xe.morphAttributes;if((za.position!==void 0||za.normal!==void 0||za.color!==void 0)&&Ot.update(fe,xe,mo),(Nr||At.receiveShadow!==fe.receiveShadow)&&(At.receiveShadow=fe.receiveShadow,li.setValue(j,"receiveShadow",fe.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(Io.envMap.value=wt,Io.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),be.isMeshStandardMaterial&&be.envMap===null&&he.environment!==null&&(Io.envMapIntensity.value=he.environmentIntensity),Nr&&(li.setValue(j,"toneMappingExposure",D.toneMappingExposure),At.needsLights&&Tb(Io,Wc),Qe&&be.fog===!0&&et.refreshFogUniforms(Io,Qe),et.refreshMaterialUniforms(Io,be,de,se,b.state.transmissionRenderTarget[z.id]),$f.upload(j,Oh(At),Io,U)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&($f.upload(j,Oh(At),Io,U),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&li.setValue(j,"center",fe.center),li.setValue(j,"modelViewMatrix",fe.modelViewMatrix),li.setValue(j,"normalMatrix",fe.normalMatrix),li.setValue(j,"modelMatrix",fe.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){let go=be.uniformsGroups;for(let Rs=0,Jo=go.length;Rs<Jo;Rs++){let sd=go[Rs];ae.update(sd,mo),ae.bind(sd,mo)}}return mo}function Tb(z,he){z.ambientLightColor.needsUpdate=he,z.lightProbe.needsUpdate=he,z.directionalLights.needsUpdate=he,z.directionalLightShadows.needsUpdate=he,z.pointLights.needsUpdate=he,z.pointLightShadows.needsUpdate=he,z.spotLights.needsUpdate=he,z.spotLightShadows.needsUpdate=he,z.rectAreaLights.needsUpdate=he,z.hemisphereLights.needsUpdate=he}function Pb(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(z,he,xe){ie.get(z.texture).__webglTexture=he,ie.get(z.depthTexture).__webglTexture=xe;let be=ie.get(z);be.__hasExternalTextures=!0,be.__autoAllocateDepthBuffer=xe===void 0,be.__autoAllocateDepthBuffer||W.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(z,he){let xe=ie.get(z);xe.__webglFramebuffer=he,xe.__useDefaultFramebuffer=he===void 0},this.setRenderTarget=function(z,he=0,xe=0){G=z,B=he,k=xe;let be=!0,fe=null,Qe=!1,ut=!1;if(z){let wt=ie.get(z);if(wt.__useDefaultFramebuffer!==void 0)ve.bindFramebuffer(j.FRAMEBUFFER,null),be=!1;else if(wt.__webglFramebuffer===void 0)U.setupRenderTarget(z);else if(wt.__hasExternalTextures)U.rebindTextures(z,ie.get(z.texture).__webglTexture,ie.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){let St=z.depthTexture;if(wt.__boundDepthTexture!==St){if(St!==null&&ie.has(St)&&(z.width!==St.image.width||z.height!==St.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");U.setupDepthRenderbuffer(z)}}let Xt=z.texture;(Xt.isData3DTexture||Xt.isDataArrayTexture||Xt.isCompressedArrayTexture)&&(ut=!0);let rn=ie.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(rn[he])?fe=rn[he][xe]:fe=rn[he],Qe=!0):z.samples>0&&U.useMultisampledRTT(z)===!1?fe=ie.get(z).__webglMultisampledFramebuffer:Array.isArray(rn)?fe=rn[xe]:fe=rn,N.copy(z.viewport),S.copy(z.scissor),q=z.scissorTest}else N.copy(Ie).multiplyScalar(de).floor(),S.copy(Le).multiplyScalar(de).floor(),q=ke;if(ve.bindFramebuffer(j.FRAMEBUFFER,fe)&&be&&ve.drawBuffers(z,fe),ve.viewport(N),ve.scissor(S),ve.setScissorTest(q),Qe){let wt=ie.get(z.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+he,wt.__webglTexture,xe)}else if(ut){let wt=ie.get(z.texture),Xt=he||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,wt.__webglTexture,xe||0,Xt)}F=-1},this.readRenderTargetPixels=function(z,he,xe,be,fe,Qe,ut){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=ie.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&ut!==void 0&&(Et=Et[ut]),Et){ve.bindFramebuffer(j.FRAMEBUFFER,Et);try{let wt=z.texture,Xt=wt.format,rn=wt.type;if(!ne.textureFormatReadable(Xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ne.textureTypeReadable(rn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}he>=0&&he<=z.width-be&&xe>=0&&xe<=z.height-fe&&j.readPixels(he,xe,be,fe,tn.convert(Xt),tn.convert(rn),Qe)}finally{let wt=G!==null?ie.get(G).__webglFramebuffer:null;ve.bindFramebuffer(j.FRAMEBUFFER,wt)}}},this.readRenderTargetPixelsAsync=function(z,he,xe,be,fe,Qe,ut){return Ka(this,null,function*(){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=ie.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&ut!==void 0&&(Et=Et[ut]),Et){let wt=z.texture,Xt=wt.format,rn=wt.type;if(!ne.textureFormatReadable(Xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ne.textureTypeReadable(rn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(he>=0&&he<=z.width-be&&xe>=0&&xe<=z.height-fe){ve.bindFramebuffer(j.FRAMEBUFFER,Et);let St=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,St),j.bufferData(j.PIXEL_PACK_BUFFER,Qe.byteLength,j.STREAM_READ),j.readPixels(he,xe,be,fe,tn.convert(Xt),tn.convert(rn),0);let zn=G!==null?ie.get(G).__webglFramebuffer:null;ve.bindFramebuffer(j.FRAMEBUFFER,zn);let ai=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),yield $te(j,ai,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,St),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Qe),j.deleteBuffer(St),j.deleteSync(ai),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(z,he=null,xe=0){z.isTexture!==!0&&(gm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),he=arguments[0]||null,z=arguments[1]);let be=Math.pow(2,-xe),fe=Math.floor(z.image.width*be),Qe=Math.floor(z.image.height*be),ut=he!==null?he.x:0,Et=he!==null?he.y:0;U.setTexture2D(z,0),j.copyTexSubImage2D(j.TEXTURE_2D,xe,0,0,ut,Et,fe,Qe),ve.unbindTexture()},this.copyTextureToTexture=function(z,he,xe=null,be=null,fe=0){z.isTexture!==!0&&(gm("WebGLRenderer: copyTextureToTexture function signature has changed."),be=arguments[0]||null,z=arguments[1],he=arguments[2],fe=arguments[3]||0,xe=null);let Qe,ut,Et,wt,Xt,rn,St,zn,ai,hi=z.isCompressedTexture?z.mipmaps[fe]:z.image;xe!==null?(Qe=xe.max.x-xe.min.x,ut=xe.max.y-xe.min.y,Et=xe.isBox3?xe.max.z-xe.min.z:1,wt=xe.min.x,Xt=xe.min.y,rn=xe.isBox3?xe.min.z:0):(Qe=hi.width,ut=hi.height,Et=hi.depth||1,wt=0,Xt=0,rn=0),be!==null?(St=be.x,zn=be.y,ai=be.z):(St=0,zn=0,ai=0);let Dr=tn.convert(he.format),jn=tn.convert(he.type),At;he.isData3DTexture?(U.setTexture3D(he,0),At=j.TEXTURE_3D):he.isDataArrayTexture||he.isCompressedArrayTexture?(U.setTexture2DArray(he,0),At=j.TEXTURE_2D_ARRAY):(U.setTexture2D(he,0),At=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,he.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,he.unpackAlignment);let Ao=j.getParameter(j.UNPACK_ROW_LENGTH),Yn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),mo=j.getParameter(j.UNPACK_SKIP_PIXELS),Is=j.getParameter(j.UNPACK_SKIP_ROWS),Nr=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,hi.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,hi.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,wt),j.pixelStorei(j.UNPACK_SKIP_ROWS,Xt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,rn);let Wc=z.isDataArrayTexture||z.isData3DTexture,li=he.isDataArrayTexture||he.isData3DTexture;if(z.isRenderTargetTexture||z.isDepthTexture){let Io=ie.get(z),za=ie.get(he),go=ie.get(Io.__renderTarget),Rs=ie.get(za.__renderTarget);ve.bindFramebuffer(j.READ_FRAMEBUFFER,go.__webglFramebuffer),ve.bindFramebuffer(j.DRAW_FRAMEBUFFER,Rs.__webglFramebuffer);for(let Jo=0;Jo<Et;Jo++)Wc&&j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ie.get(z).__webglTexture,fe,rn+Jo),z.isDepthTexture?(li&&j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ie.get(he).__webglTexture,fe,ai+Jo),j.blitFramebuffer(wt,Xt,Qe,ut,St,zn,Qe,ut,j.DEPTH_BUFFER_BIT,j.NEAREST)):li?j.copyTexSubImage3D(At,fe,St,zn,ai+Jo,wt,Xt,Qe,ut):j.copyTexSubImage2D(At,fe,St,zn,ai+Jo,wt,Xt,Qe,ut);ve.bindFramebuffer(j.READ_FRAMEBUFFER,null),ve.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else li?z.isDataTexture||z.isData3DTexture?j.texSubImage3D(At,fe,St,zn,ai,Qe,ut,Et,Dr,jn,hi.data):he.isCompressedArrayTexture?j.compressedTexSubImage3D(At,fe,St,zn,ai,Qe,ut,Et,Dr,hi.data):j.texSubImage3D(At,fe,St,zn,ai,Qe,ut,Et,Dr,jn,hi):z.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,fe,St,zn,Qe,ut,Dr,jn,hi.data):z.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,fe,St,zn,hi.width,hi.height,Dr,hi.data):j.texSubImage2D(j.TEXTURE_2D,fe,St,zn,Qe,ut,Dr,jn,hi);j.pixelStorei(j.UNPACK_ROW_LENGTH,Ao),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Yn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,mo),j.pixelStorei(j.UNPACK_SKIP_ROWS,Is),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Nr),fe===0&&he.generateMipmaps&&j.generateMipmap(At),ve.unbindTexture()},this.copyTextureToTexture3D=function(z,he,xe=null,be=null,fe=0){return z.isTexture!==!0&&(gm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),xe=arguments[0]||null,be=arguments[1]||null,z=arguments[2],he=arguments[3],fe=arguments[4]||0),gm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(z,he,xe,be,fe)},this.initRenderTarget=function(z){ie.get(z).__webglFramebuffer===void 0&&U.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?U.setTextureCube(z,0):z.isData3DTexture?U.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?U.setTexture2DArray(z,0):U.setTexture2D(z,0),ve.unbindTexture()},this.resetState=function(){B=0,k=0,G=null,ve.reset(),Qn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ol}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorspace=Ln._getDrawingBufferColorSpace(t),e.unpackColorSpace=Ln._getUnpackColorSpace()}};var Ay=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new Bt(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Pm=class extends hr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Wu,this.environmentIntensity=1,this.environmentRotation=new Wu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Dm=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=xT,this.updateRanges=[],this.version=0,this.uuid=oa()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},ho=new te,Om=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ho.fromBufferAttribute(this,e),ho.applyMatrix4(t),this.setXYZ(e,ho.x,ho.y,ho.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ho.fromBufferAttribute(this,e),ho.applyNormalMatrix(t),this.setXYZ(e,ho.x,ho.y,ho.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ho.fromBufferAttribute(this,e),ho.transformDirection(t),this.setXYZ(e,ho.x,ho.y,ho.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=ia(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=oi(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=oi(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ia(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ia(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ia(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ia(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=oi(e,this.array),i=oi(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=oi(e,this.array),i=oi(i,this.array),r=oi(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=oi(e,this.array),i=oi(i,this.array),r=oi(r,this.array),o=oi(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return new Pi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var _U=new te,vU=new pn,yU=new pn,Hse=new te,xU=new an,ly=new te,IS=new Zo,bU=new an,RS=new ju,Iy=class extends wi{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=CL,this.bindMatrix=new an,this.bindMatrixInverse=new an,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ki),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,ly),this.boundingBox.expandByPoint(ly)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zo),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,ly),this.boundingSphere.expandByPoint(ly)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),IS.copy(this.boundingSphere),IS.applyMatrix4(r),t.ray.intersectsSphere(IS)!==!1&&(bU.copy(r).invert(),RS.copy(t.ray).applyMatrix4(bU),!(this.boundingBox!==null&&RS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,RS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new pn,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===CL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===mte?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;vU.fromBufferAttribute(r.attributes.skinIndex,t),yU.fromBufferAttribute(r.attributes.skinWeight,t),_U.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){let s=yU.getComponent(o);if(s!==0){let a=vU.getComponent(o);xU.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(Hse.copy(_U).applyMatrix4(xU),s)}}return e.applyMatrix4(this.bindMatrixInverse)}},Am=class extends hr{constructor(){super(),this.isBone=!0,this.type="Bone"}},Ry=class extends ws{constructor(t=null,e=1,i=1,r,o,s,a,l,u=$r,f=$r,h,m){super(null,s,a,l,u,f,r,o,h,m),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},CU=new an,jse=new an,ky=class n{constructor(t=[],e=[]){this.uuid=oa(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new an)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new an;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=t.length;o<s;o++){let a=t[o]?t[o].matrixWorld:jse;CU.multiplyMatrices(a,e[o]),CU.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new Ry(e,t,t,xs,ra);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let o=t.bones[i],s=e[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Am),this.bones.push(s),this.boneInverses.push(new an().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,o=e.length;r<o;r++){let s=e[r];t.bones.push(s.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Gu=class extends Pi{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Uf=new an,MU=new an,cy=[],wU=new Ki,Wse=new an,fm=new wi,hm=new Zo,Ny=class extends wi{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Gu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Wse)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ki),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Uf),wU.copy(t.boundingBox).applyMatrix4(Uf),this.boundingBox.union(wU)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zo),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Uf),hm.copy(t.boundingSphere).applyMatrix4(Uf),this.boundingSphere.union(hm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=t*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(fm.geometry=this.geometry,fm.material=this.material,fm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),hm.copy(this.boundingSphere),hm.applyMatrix4(i),t.ray.intersectsSphere(hm)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Uf),MU.multiplyMatrices(i,Uf),fm.matrixWorld=MU,fm.raycast(t,cy);for(let s=0,a=cy.length;s<a;s++){let l=cy[s];l.instanceId=o,l.object=this,e.push(l)}cy.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Gu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ry(new Float32Array(r*this.count),r,this.count,iP,ra));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*t;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var $u=class extends Yr{static get type(){return"LineBasicMaterial"}constructor(t){super(),this.isLineBasicMaterial=!0,this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},Fy=new te,Ly=new te,EU=new an,pm=new ju,uy=new Zo,kS=new te,SU=new te,nh=class extends hr{constructor(t=new Oo,e=new $u){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,o=e.count;r<o;r++)Fy.fromBufferAttribute(e,r-1),Ly.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Fy.distanceTo(Ly);t.setAttribute("lineDistance",new bs(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),uy.copy(i.boundingSphere),uy.applyMatrix4(r),uy.radius+=o,t.ray.intersectsSphere(uy)===!1)return;EU.copy(r).invert(),pm.copy(t.ray).applyMatrix4(EU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){let p=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let C=p,x=y-1;C<x;C+=u){let b=f.getX(C),P=f.getX(C+1),E=dy(this,t,pm,l,b,P);E&&e.push(E)}if(this.isLineLoop){let C=f.getX(y-1),x=f.getX(p),b=dy(this,t,pm,l,C,x);b&&e.push(b)}}else{let p=Math.max(0,s.start),y=Math.min(m.count,s.start+s.count);for(let C=p,x=y-1;C<x;C+=u){let b=dy(this,t,pm,l,C,C+1);b&&e.push(b)}if(this.isLineLoop){let C=dy(this,t,pm,l,y-1,p);C&&e.push(C)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function dy(n,t,e,i,r,o){let s=n.geometry.attributes.position;if(Fy.fromBufferAttribute(s,r),Ly.fromBufferAttribute(s,o),e.distanceSqToSegment(Fy,Ly,kS,SU)>i)return;kS.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(kS);if(!(l<t.near||l>t.far))return{distance:l,point:SU.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}var TU=new te,PU=new te,Uy=class extends nh{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,o=e.count;r<o;r+=2)TU.fromBufferAttribute(e,r),PU.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+TU.distanceTo(PU);t.setAttribute("lineDistance",new bs(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},ih=class extends nh{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},Im=class extends Yr{static get type(){return"PointsMaterial"}constructor(t){super(),this.isPointsMaterial=!0,this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},DU=new an,LT=new ju,fy=new Zo,hy=new te,Vy=class extends hr{constructor(t=new Oo,e=new Im){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),fy.copy(i.boundingSphere),fy.applyMatrix4(r),fy.radius+=o,t.ray.intersectsSphere(fy)===!1)return;DU.copy(r).invert(),LT.copy(t.ray).applyMatrix4(DU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let m=Math.max(0,s.start),p=Math.min(u.count,s.start+s.count);for(let y=m,C=p;y<C;y++){let x=u.getX(y);hy.fromBufferAttribute(h,x),OU(hy,x,l,r,t,e,this)}}else{let m=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let y=m,C=p;y<C;y++)hy.fromBufferAttribute(h,y),OU(hy,y,l,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function OU(n,t,e,i,r,o,s){let a=LT.distanceSqToPoint(n);if(a<e){let l=new te;LT.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}var Fa=class extends Yr{static get type(){return"MeshStandardMaterial"}constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ZU,this.normalScale=new dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Ko=class extends Fa{static get type(){return"MeshPhysicalMaterial"}constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new dn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}};function py(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function Gse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function $se(n){function t(r,o){return n[r]-n[o]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function AU(n,t,e){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=e[o]*t;for(let l=0;l!==t;++l)r[s++]=n[a+l]}return r}function sV(n,t,e,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),e.push.apply(e,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(e,e.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),e.push(s)),o=n[r++];while(o!==void 0)}var Ac=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],o=e[i-1];e:{t:{let s;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=e[++i],t<r)break t}s=e.length;break n}if(!(t>=o)){let a=e[1];t<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=e[--i-1],t>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;t<e[a]?s=a:i=a+1}if(r=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=i[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},UT=class extends Ac{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bf,endingEnd:Bf}}intervalChanged_(t,e,i){let r=this.parameterPositions,o=t-2,s=t+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case zf:o=t,a=2*e-i;break;case xy:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case zf:s=t,l=2*i-e;break;case xy:s=1,l=i+r[1]-r[0];break;default:s=t-1,l=e}let u=(i-e)*.5,f=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,p=this._weightNext,y=(i-e)/(r-e),C=y*y,x=C*y,b=-m*x+2*m*C-m*y,P=(1+m)*x+(-1.5-2*m)*C+(-.5+m)*y+1,E=(-1-p)*x+(1.5+p)*C+.5*y,D=p*x-p*C;for(let L=0;L!==a;++L)o[L]=b*s[f+L]+P*s[u+L]+E*s[l+L]+D*s[h+L];return o}},By=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,f=(i-e)/(r-e),h=1-f;for(let m=0;m!==a;++m)o[m]=s[u+m]*h+s[l+m]*f;return o}},VT=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Ms=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=py(e,this.TimeBufferType),this.values=py(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:py(t.times,Array),values:py(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new VT(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new By(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new UT(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Jf:e=this.InterpolantFactoryMethodDiscrete;break;case Qf:e=this.InterpolantFactoryMethodLinear;break;case oS:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jf;case this.InterpolantFactoryMethodLinear:return Qf;case this.InterpolantFactoryMethodSmooth:return oS}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<t;)++o;for(;s!==-1&&i[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),t=!1;break}s=l}if(r!==void 0&&Gse(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===oS,o=t.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=t[a],f=t[a+1];if(u!==f&&(a!==1||u!==t[0]))if(r)l=!0;else{let h=a*i,m=h-i,p=h+i;for(let y=0;y!==i;++y){let C=e[h+y];if(C!==e[m+y]||C!==e[p+y]){l=!0;break}}}if(l){if(a!==s){t[s]=t[a];let h=a*i,m=s*i;for(let p=0;p!==i;++p)e[m+p]=e[h+p]}++s}}if(o>0){t[s]=t[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)e[l+u]=e[a+u];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Ms.prototype.TimeBufferType=Float32Array;Ms.prototype.ValueBufferType=Float32Array;Ms.prototype.DefaultInterpolation=Qf;var Ic=class extends Ms{constructor(t,e,i){super(t,e,i)}};Ic.prototype.ValueTypeName="bool";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=Jf;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;var zy=class extends Ms{};zy.prototype.ValueTypeName="color";var Nl=class extends Ms{};Nl.prototype.ValueTypeName="number";var BT=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-e)/(r-e),u=t*a;for(let f=u+a;u!==f;u+=4)qr.slerpFlat(o,0,s,u-a,s,u,l);return o}},Fl=class extends Ms{InterpolantFactoryMethodLinear(t){return new BT(this.times,this.values,this.getValueSize(),t)}};Fl.prototype.ValueTypeName="quaternion";Fl.prototype.InterpolantFactoryMethodSmooth=void 0;var Rc=class extends Ms{constructor(t,e,i){super(t,e,i)}};Rc.prototype.ValueTypeName="string";Rc.prototype.ValueBufferType=Array;Rc.prototype.DefaultInterpolation=Jf;Rc.prototype.InterpolantFactoryMethodLinear=void 0;Rc.prototype.InterpolantFactoryMethodSmooth=void 0;var Ll=class extends Ms{};Ll.prototype.ValueTypeName="vector";var rh=class{constructor(t="",e=-1,i=[],r=lP){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=oa(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let s=0,a=i.length;s!==a;++s)e.push(Yse(i[s]).scale(r));let o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=i.length;o!==s;++o)e.push(Ms.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let o=e.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=$se(l);l=AU(l,1,f),u=AU(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new Nl(".morphTargetInfluences["+e[a].name+"]",l,u).scale(1/i))}return new this(t,-1,s)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){let u=t[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],m=r[h];m||(r[h]=m=[]),m.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,m,p,y,C){if(p.length!==0){let x=[],b=[];sV(p,x,b,y),x.length!==0&&C.push(new h(m,x,b))}},r=[],o=t.name||"default",s=t.fps||30,a=t.blendMode,l=t.length||-1,u=t.hierarchy||[];for(let h=0;h<u.length;h++){let m=u[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){let p={},y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let C=0;C<m[y].morphTargets.length;C++)p[m[y].morphTargets[C]]=-1;for(let C in p){let x=[],b=[];for(let P=0;P!==m[y].morphTargets.length;++P){let E=m[y];x.push(E.time),b.push(E.morphTarget===C?1:0)}r.push(new Nl(".morphTargetInfluence["+C+"]",x,b))}l=p.length*s}else{let p=".bones["+e[h].name+"]";i(Ll,p+".position",m,"pos",r),i(Fl,p+".quaternion",m,"rot",r),i(Ll,p+".scale",m,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function qse(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nl;case"vector":case"vector2":case"vector3":case"vector4":return Ll;case"color":return zy;case"quaternion":return Fl;case"bool":case"boolean":return Ic;case"string":return Rc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Yse(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=qse(n.type);if(n.times===void 0){let e=[],i=[];sV(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var Aa={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},zT=class{constructor(t,e,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,m=u.length;h<m;h+=2){let p=u[h],y=u[h+1];if(p.global&&(p.lastIndex=0),p.test(f))return y}return null}}},Xse=new zT,lh=(()=>{class n{constructor(e){this.manager=e!==void 0?e:Xse,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(o,s){r.load(e,o,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Sl={},HT=class extends Error{constructor(t,e){super(t),this.response=e}},qu=class extends lh{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=Aa.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(Sl[t]!==void 0){Sl[t].push({onLoad:e,onProgress:i,onError:r});return}Sl[t]=[],Sl[t].push({onLoad:e,onProgress:i,onError:r});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Sl[t],h=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=m?parseInt(m):0,y=p!==0,C=0,x=new ReadableStream({start(b){P();function P(){h.read().then(({done:E,value:D})=>{if(E)b.close();else{C+=D.byteLength;let L=new ProgressEvent("progress",{lengthComputable:y,loaded:C,total:p});for(let B=0,k=f.length;B<k;B++){let G=f[B];G.onProgress&&G.onProgress(L)}b.enqueue(D),P()}},E=>{b.error(E)})}}});return new Response(x)}else throw new HT(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),m=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(m);return u.arrayBuffer().then(y=>p.decode(y))}}}).then(u=>{Aa.add(t,u);let f=Sl[t];delete Sl[t];for(let h=0,m=f.length;h<m;h++){let p=f[h];p.onLoad&&p.onLoad(u)}}).catch(u=>{let f=Sl[t];if(f===void 0)throw this.manager.itemError(t),u;delete Sl[t];for(let h=0,m=f.length;h<m;h++){let p=f[h];p.onError&&p.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var jT=class extends lh{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Aa.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;let a=wm("img");function l(){f(),Aa.add(t,this),e&&e(this),o.manager.itemEnd(t)}function u(h){f(),r&&r(h),o.manager.itemError(t),o.manager.itemEnd(t)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}};var Xr=class extends lh{constructor(t){super(t)}load(t,e,i,r){let o=new ws,s=new jT(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,e!==void 0&&e(o)},i,r),o}},oh=class extends hr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};var NS=new an,IU=new te,RU=new te,Rm=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dn(512,512),this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tm,this._frameExtents=new dn(1,1),this._viewportCount=1,this._viewports=[new pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;IU.setFromMatrixPosition(t.matrixWorld),e.position.copy(IU),RU.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(RU),e.updateMatrixWorld(),NS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(NS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},WT=class extends Rm{constructor(){super(new fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,i=eh*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||r!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},Hy=class extends oh{constructor(t,e,i=0,r=Math.PI/3,o=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hr.DEFAULT_UP),this.updateMatrix(),this.target=new hr,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new WT}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},kU=new an,mm=new te,FS=new te,GT=class extends Rm{constructor(){super(new fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new dn(4,2),this._viewportCount=6,this._viewports=[new pn(2,1,1,1),new pn(0,1,1,1),new pn(3,1,1,1),new pn(1,1,1,1),new pn(3,0,1,1),new pn(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),mm.setFromMatrixPosition(t.matrixWorld),i.position.copy(mm),FS.copy(i.position),FS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(FS),i.updateMatrixWorld(),r.makeTranslation(-mm.x,-mm.y,-mm.z),kU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kU)}},Yu=class extends oh{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new GT}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},$T=class extends Rm{constructor(){super(new Na(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},sh=class extends oh{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hr.DEFAULT_UP),this.updateMatrix(),this.target=new hr,this.shadow=new $T}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},jy=class extends oh{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var kc=class{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}};var Wy=class extends lh{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Aa.get(t);if(s!==void 0){if(o.manager.itemStart(t),s.then){s.then(u=>{e&&e(u),o.manager.itemEnd(t)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(t,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Aa.add(t,u),e&&e(u),o.manager.itemEnd(t),u}).catch(function(u){r&&r(u),Aa.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});Aa.add(t,l),o.manager.itemStart(t)}};var Gy=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=NU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=NU();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function NU(){return performance.now()}var qT=class{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,o,s;switch(e){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){let i=this.buffer,r=this.valueSize,o=t*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=e}else{s+=e;let a=e/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(t){let e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let e=this.valueSize,i=this.buffer,r=t*e+e,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let l=e*this._origIndex;this._mixBufferRegion(i,r,l,1-o,e)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let l=e,u=e+e;l!==u;++l)if(i[l]!==i[l+e]){a.setValue(i,r);break}}saveOriginalState(){let t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let o=i,s=r;o!==s;++o)e[o]=e[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)t[e+s]=t[i+s]}_slerp(t,e,i,r){qr.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,o){let s=this._workIndex*o;qr.multiplyQuaternionsFlat(t,s,t,e,t,i),qr.slerpFlat(t,e,t,e,t,s,r)}_lerp(t,e,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let l=e+a;t[l]=t[l]*s+t[i+a]*r}}_lerpAdditive(t,e,i,r,o){for(let s=0;s!==o;++s){let a=e+s;t[a]=t[a]+t[i+s]*r}}},dP="\\[\\]\\.:\\/",Zse=new RegExp("["+dP+"]","g"),fP="[^"+dP+"]",Kse="[^"+dP.replace("\\.","")+"]",Jse=/((?:WC+[\/:])*)/.source.replace("WC",fP),Qse=/(WCOD+)?/.source.replace("WCOD",Kse),eae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fP),tae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fP),nae=new RegExp("^"+Jse+Qse+eae+tae+"$"),iae=["material","materials","bones","map"],YT=class{constructor(t,e,i){let r=i||Ni.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ni=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Zse,"")}static parseTrackName(e){let i=nae.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);iae.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[i++]=r[o]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}let a=e[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=YT,n})();Ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ni.prototype.GetterByBindingType=[Ni.prototype._getValue_direct,Ni.prototype._getValue_array,Ni.prototype._getValue_arrayElement,Ni.prototype._getValue_toArray];Ni.prototype.SetterByBindingTypeAndVersioning=[[Ni.prototype._setValue_direct,Ni.prototype._setValue_direct_setNeedsUpdate,Ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_array,Ni.prototype._setValue_array_setNeedsUpdate,Ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_arrayElement,Ni.prototype._setValue_arrayElement_setNeedsUpdate,Ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_fromArray,Ni.prototype._setValue_fromArray_setNeedsUpdate,Ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var XT=class{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;let o=e.tracks,s=o.length,a=new Array(s),l={endingStart:Bf,endingEnd:Bf};for(let u=0;u!==s;++u){let f=o[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=gte,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){let r=this._clip.duration,o=t._clip.duration,s=o/r,a=r/o;t.warp(1,s,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){let t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+i,u[0]=t/s,u[1]=e/s,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}let o=this._startTime;if(o!==null){let l=(t-o)*i;l<0||i===0?e=0:(this._startTime=null,e=i*l)}e*=this._updateTimeScale(t);let s=this._updateTime(e),a=this._updateWeight(t);if(a>0){let l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case vte:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulateAdditive(a);break;case lP:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){let e=this._clip.duration,i=this.loop,r=this.time+t,o=this._loopCount,s=i===_te;if(t===0)return o===-1?r:s&&(o&1)===1?e-r:r;if(i===aP){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=e||r<0){let a=Math.floor(r/e);r-=e*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){let u=t<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return e-r}return r}_setEndings(t,e,i){let r=this._interpolantSettings;i?(r.endingStart=zf,r.endingEnd=zf):(t?r.endingStart=this.zeroSlopeAtStart?zf:Bf:r.endingStart=xy,e?r.endingEnd=this.zeroSlopeAtEnd?zf:Bf:r.endingEnd=xy)}_scheduleFading(t,e,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=e,a[1]=o+t,l[1]=i,this}},rae=new Float32Array(1),$y=class extends Rl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){let i=t._localRoot||this._root,r=t._clip.tracks,o=r.length,s=t._propertyBindings,a=t._interpolants,l=i.uuid,u=this._bindingsByRootAndName,f=u[l];f===void 0&&(f={},u[l]=f);for(let h=0;h!==o;++h){let m=r[h],p=m.name,y=f[p];if(y!==void 0)++y.referenceCount,s[h]=y;else{if(y=s[h],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,p));continue}let C=e&&e._propertyBindings[h].binding.parsedPath;y=new qT(Ni.create(i,p,C),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,p),s[h]=y}a[h].resultBuffer=y.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let i=(t._localRoot||this._root).uuid,r=t._clip.uuid,o=this._actionsByClip[r];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,r,i)}let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){let r=this._actions,o=this._actionsByClip,s=o[e];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=s;else{let a=s.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){let e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;let o=t._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],f=t._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),t._byClipCacheIndex=null;let h=a.actionByRoot,m=(t._localRoot||this._root).uuid;delete h[m],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){let e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackAction(t){let e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_addInactiveBinding(t,e,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[e];s===void 0&&(s={},r[e]=s),s[i]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){let e=this._bindings,i=t.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=e[e.length-1],u=t._cacheIndex;l._cacheIndex=u,e[u]=l,e.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(t){let e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackBinding(t){let e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_lendControlInterpolant(){let t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return i===void 0&&(i=new By(new Float32Array(2),new Float32Array(2),1,rae),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){let e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=i,e[i]=o}clipAction(t,e,i){let r=e||this._root,o=r.uuid,s=typeof t=="string"?rh.findByName(r,t):t,a=s!==null?s.uuid:t,l=this._actionsByClip[a],u=null;if(i===void 0&&(s!==null?i=s.blendMode:i=lP),l!==void 0){let h=l.actionByRoot[o];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;let f=new XT(this,s,e,i);return this._bindAction(f,u),this._addInactiveAction(f,a,o),f}existingAction(t,e){let i=e||this._root,r=i.uuid,o=typeof t=="string"?rh.findByName(i,t):t,s=o?o.uuid:t,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let e=this._actions,i=this._nActiveActions,r=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1;for(let u=0;u!==i;++u)e[u]._update(r,t,o,s);let a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let e=this._actions,i=t.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){let u=s[a];this._deactivateAction(u);let f=u._cacheIndex,h=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=f,e[f]=h,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(t){let e=t.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,l=a[e];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}let r=this._bindingsByRootAndName,o=r[e];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){let i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}};var FU=new an,qy=class{constructor(t,e,i=0,r=1/0){this.ray=new ju(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new Em,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return FU.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(FU),this}intersectObject(t,e=!0,i=[]){return ZT(t,this,i,e),i.sort(LU),i}intersectObjects(t,e=!0,i=[]){for(let r=0,o=t.length;r<o;r++)ZT(t[r],this,i,e);return i.sort(LU),i}};function LU(n,t){return n.distance-t.distance}function ZT(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)ZT(o[s],t,e,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:KT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=KT);var Kr=class extends dn{constructor(t=0,e=0){super(),this.x=t,this.y=e}get h(){return this.x}set h(t){this.x=t}get v(){return this.y}set v(t){this.y=t}};var Fm=function(){var n=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(f){f.preventDefault(),i(++n%t.children.length)},!1);function e(f){return t.appendChild(f.dom),f}function i(f){for(var h=0;h<t.children.length;h++)t.children[h].style.display=h===f?"block":"none";n=f}var r=(performance||Date).now(),o=r,s=0,a=e(new Fm.Panel("FPS","#0ff","#002")),l=e(new Fm.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new Fm.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var f=(performance||Date).now();if(l.update(f-r,200),f>=o+1e3&&(a.update(s*1e3/(f-o),100),o=f,s=0,u)){var h=performance.memory;u.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:t,setMode:i}};Fm.Panel=function(n,t,e){var i=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,l=48*s,u=3*s,f=2*s,h=3*s,m=15*s,p=74*s,y=30*s,C=document.createElement("canvas");C.width=a,C.height=l,C.style.cssText="width:80px;height:48px";var x=C.getContext("2d");return x.font="bold "+9*s+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=e,x.fillRect(0,0,a,l),x.fillStyle=t,x.fillText(n,u,f),x.fillRect(h,m,p,y),x.fillStyle=e,x.globalAlpha=.9,x.fillRect(h,m,p,y),{dom:C,update:function(b,P){i=Math.min(i,b),r=Math.max(r,b),x.fillStyle=e,x.globalAlpha=1,x.fillRect(0,0,a,m),x.fillStyle=t,x.fillText(o(b)+" "+n+" ("+o(i)+"-"+o(r)+")",u,f),x.drawImage(C,h+s,m,p-s,y,h,m,p-s,y),x.fillRect(h+p-s,m,s,y),x.fillStyle=e,x.globalAlpha=.9,x.fillRect(h+p-s,m,s,o((1-b/P)*y))}}};var aV=Fm;var lV={setDevicePixelRatio:!1},cV={url:"/mazes/Loquitas.json",credits:"Maze designed by Cec\xEDlia Fernandes and Nikita.",scale:new te(1,1,1)},uV={url:"/models/gltf/RobotExpressive/RobotExpressive.glb",credits:"Model and related code snippets created by <a href='https://www.patreon.com/quaternius' target='_blank' rel='noopener'>Tom\xE1s Laulh\xE9</a>. CC0 1.0. Modified by <a href='https://donmccurdy.com/' target='_blank' rel='noopener'>Don McCurdy</a>.",eyeHeight:.8,scale:new te(.1,.1,.1),walkingSpeed:3,initialDirection:0,turningSpeed:250,runningFactor:2,keyCodes:{fixedView:"Digit1",firstPersonView:"Digit2",thirdPersonView:"Digit3",topView:"Digit4",viewMode:"KeyV",userInterface:"KeyU",miniMap:"KeyM",help:"KeyH",statistics:"KeyS",run:"KeyR",left:"ArrowLeft",right:"ArrowRight",backward:"ArrowDown",forward:"ArrowUp",jump:"KeyJ",yes:"KeyY",no:"KeyN",wave:"KeyW",punch:"KeyP",thumbsUp:"KeyT"}},dV={ambientLight:{color:16777215,intensity:1},pointLight1:{color:16777215,intensity:1,distance:0,position:new te(0,0,0)},pointLight2:{color:16777215,intensity:1,distance:0,position:new te(0,0,0)},directionalLight:{color:16777215,intensity:1,position:new te(0,0,0),target:new te(0,0,0)},spotLight:{color:16777215,intensity:1,distance:0,angle:Math.PI/3,penumbra:0,position:new te(0,0,0),direction:0}},fV={enabled:!1,color:14737632,near:.1,far:14},ch={view:"fixed",multipleViewsViewport:new pn(0,0,1,1),target:new te(0,0,0),initialOrientation:new Kr(135,-45),orientationMin:new Kr(-180,-90),orientationMax:new Kr(180,0),initialDistance:8,distanceMin:4,distanceMax:16,initialZoom:1,zoomMin:.5,zoomMax:2,initialFov:45,near:.01,far:100},hV={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new te(.42,.269,1)},pV={url:"/models/gltf/RobotExpressive/hospital_bed.glb",scale:new te(.5,1,.5),name:""},mV={url:"/models/gltf/RobotExpressive/patient.glb",scale:new te(.0045,.01,.0045)},gV={url:"/models/gltf/RobotExpressive/exit_doors.glb",scale:new te(1.35,1.4,1.3)},_V={url:"/models/gltf/RobotExpressive/monitor_with_heart_rate.glb",scale:new te(.5,.5,.5)},vV={url:"/models/gltf/RobotExpressive/adjustable_bedside_table.glb",scale:new te(.5,.5,.5)},yV={url:"/models/gltf/RobotExpressive/surgical.glb",scale:new te(.5,.5,.5)},xV={url:"/models/gltf/RobotExpressive/surgeon.glb",scale:new te(.1,.1,.1)};var Jy=UC(bV());function _r(n,...t){return Jy.mergeWith(n,...t,(e,i,r,o,s)=>{if(Jy.isArray(e))return e.concat(i);{let a=Object.getOwnPropertyDescriptor(o,r);a!==void 0&&!a.writable&&(a.value=i,a.writable=!0,Object.defineProperty(o,r,a),a.writable=!1,Object.defineProperty(o,r,a))}})}var Qy=class{constructor(t){for(let[a,l]of Object.entries(t))this[a]=l;let e=new Xr().load(this.textureUrl);e.colorSpace=Li,e.wrapS=sr,e.wrapT=sr,e.repeat.set(this.size.width,this.size.height),e.magFilter=Tr,e.minFilter=Po;let i=null;this.normalMapUrl&&(i=new Xr().load(this.normalMapUrl),i.wrapS=sr,i.wrapT=sr,i.repeat.set(this.size.width,this.size.height));let r=null;this.bumpMapUrl&&(r=new Xr().load(this.bumpMapUrl),r.wrapS=sr,r.wrapT=sr,r.repeat.set(this.size.width,this.size.height));let o=new Cs(this.size.width,this.size.height),s=new Fa({color:16777215,map:e,normalMap:i,bumpMap:r,bumpScale:this.bumpScale||.1,roughness:.8,metalness:.2});this.object=new wi(o,s),this.object.rotation.x=-Math.PI/2,this.object.receiveShadow=this.shadow||!1,this.object.castShadow=this.shadow||!1,this.object.receiveShadow=!0}setShadow(t){this.object.castShadow=t}setTextureRepeat(t,e){this.object.material.map.repeat.set(t,e),this.object.material.normalMap&&this.object.material.normalMap.repeat.set(t,e),this.object.material.bumpMap&&this.object.material.bumpMap.repeat.set(t,e)}updateTexture(t){let e=new Xr().load(t);e.colorSpace=Li,e.wrapS=sr,e.wrapT=sr,this.object.material.map=e}updateNormalMap(t){let e=new Xr().load(t);e.wrapS=sr,e.wrapT=sr,this.object.material.normalMap=e}updateBumpMap(t,e=.1){let i=new Xr().load(t);i.wrapS=sr,i.wrapT=sr,this.object.material.bumpMap=i,this.object.material.bumpScale=e}};var ex=class{constructor(t){let{textureUrl:e,bumpMapUrl:i,normalMapUrl:r,aoMapUrl:o,width:s=1,height:a=3,thickness:l=.05}=t,u=new Xr().load(e);u.colorSpace=Li,u.magFilter=Tr,u.minFilter=Po;let f=i?new Xr().load(i):null,h=r?new Xr().load(r):null,m=o?new Xr().load(o):null,p=new Fa({color:16777215,map:u,bumpMap:f,bumpScale:.1,normalMap:h,aoMap:m,side:Xo});this.object=new ni,this.addFrontBackFaces(s,a,l,p),this.addSideFaces(s,a,l,p),this.addTopFace(s,l,p),this.addBottomFace(s,l,p),this.addTopCover(s,l,p)}addFrontBackFaces(t,e,i,r){let o=new Cs(t,e);o.setAttribute("uv2",new Pi(o.attributes.uv.array,2));let s=new wi(o,r);s.position.set(0,0,i/2),s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new wi(o,r);a.position.set(0,0,-i/2),a.rotation.y=Math.PI,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addSideFaces(t,e,i,r){let o=new Cs(i,e);o.setAttribute("uv2",new Pi(o.attributes.uv.array,2));let s=new wi(o,r);s.position.set(-t/2,0,0),s.rotation.y=Math.PI/2,s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new wi(o,r);a.position.set(t/2,0,0),a.rotation.y=-Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addTopFace(t,e,i){let r=new Cs(t,e);r.setAttribute("uv2",new Pi(r.attributes.uv.array,2));let o=new wi(r,i);o.rotation.x=-Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addBottomFace(t,e,i){let r=new Cs(t,e);r.setAttribute("uv2",new Pi(r.attributes.uv.array,2));let o=new wi(r,i);o.rotation.x=Math.PI/2,o.position.set(0,-e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addTopCover(t,e,i){let r=new Cs(t,e);r.setAttribute("uv2",new Pi(r.attributes.uv.array,2));let o=new wi(r,i);o.rotation.x=Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}};function hP(n,t){if(t===XU)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===Nm||t===Xy){let e=n.getIndex();if(e===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===Nm)for(let s=1;s<=i;s++)r.push(e.getX(0)),r.push(e.getX(s)),r.push(e.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(e.getX(s)),r.push(e.getX(s+1)),r.push(e.getX(s+2))):(r.push(e.getX(s+2)),r.push(e.getX(s+1)),r.push(e.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var Pr=class extends lh{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new xP(e)}),this.register(function(e){return new bP(e)}),this.register(function(e){return new OP(e)}),this.register(function(e){return new AP(e)}),this.register(function(e){return new IP(e)}),this.register(function(e){return new MP(e)}),this.register(function(e){return new wP(e)}),this.register(function(e){return new EP(e)}),this.register(function(e){return new SP(e)}),this.register(function(e){return new yP(e)}),this.register(function(e){return new TP(e)}),this.register(function(e){return new CP(e)}),this.register(function(e){return new DP(e)}),this.register(function(e){return new PP(e)}),this.register(function(e){return new _P(e)}),this.register(function(e){return new RP(e)}),this.register(function(e){return new kP(e)})}load(t,e,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=kc.extractUrlBase(t);s=kc.resolveURL(u,this.path)}else s=kc.extractUrlBase(t);this.manager.itemStart(t);let a=function(u){r?r(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},l=new qu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{o.parse(u,s,function(f){e(f),o.manager.itemEnd(t)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let o,s={},a={},l=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===SV){try{s[kn.KHR_BINARY_GLTF]=new NP(t)}catch(h){r&&r(h);return}o=JSON.parse(s[kn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new HP(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],m=o.extensionsRequired||[];switch(h){case kn.KHR_MATERIALS_UNLIT:s[h]=new vP;break;case kn.KHR_DRACO_MESH_COMPRESSION:s[h]=new FP(o,this.dracoLoader);break;case kn.KHR_TEXTURE_TRANSFORM:s[h]=new LP;break;case kn.KHR_MESH_QUANTIZATION:s[h]=new UP;break;default:m.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,o){i.parse(t,e,r,o)})}};function oae(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var kn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},_P=class{constructor(t){this.parser=t,this.name=kn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let o=e[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let o=e.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t],u,f=new Bt(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],Zr);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new sh(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Yu(f),u.distance=h;break;case"spot":u=new Hy(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Ul(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(u),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,o=i.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(e.cache,a,l)})}},vP=class{constructor(){this.name=kn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ra}extendParams(t,e,i){let r=[];t.color=new Bt(1,1,1),t.opacity=1;let o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],Zr),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",o.baseColorTexture,Li))}return Promise.all(r)}},yP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(e.emissiveIntensity=o),Promise.resolve()}},xP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(e.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new dn(a,a)}return Promise.all(o)}},bP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},CP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(e.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(e.iridescenceIOR=s.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},MP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];e.sheenColor=new Bt(0,0,0),e.sheenRoughness=0,e.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Zr)}return s.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(e,"sheenColorMap",s.sheenColorTexture,Li)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},wP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(e.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},EP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return e.attenuationColor=new Bt().setRGB(a[0],a[1],a[2],Zr),Promise.all(o)}},SP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},TP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return e.specularColor=new Bt().setRGB(a[0],a[1],a[2],Zr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,Li)),Promise.all(o)}},PP=class{constructor(t){this.parser=t,this.name=kn.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return e.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(o)}},DP=class{constructor(t){this.parser=t,this.name=kn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(e.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(e.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},OP=class{constructor(t){this.parser=t,this.name=kn.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,s)}},AP=class{constructor(t){this.parser=t,this.name=kn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},IP=class{constructor(t){this.parser=t,this.name=kn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},RP=class{constructor(t){this.name=kn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,m=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,m,r.mode,r.filter).then(function(p){return p.buffer}):s.ready.then(function(){let p=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(p),f,h,m,r.mode,r.filter),p})})}else return null}},kP=class{constructor(t){this.name=kn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==Es.TRIANGLES&&u.mode!==Es.TRIANGLE_STRIP&&u.mode!==Es.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],m=u[0].count,p=[];for(let y of h){let C=new an,x=new te,b=new qr,P=new te(1,1,1),E=new Ny(y.geometry,y.material,m);for(let D=0;D<m;D++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,D),l.ROTATION&&b.fromBufferAttribute(l.ROTATION,D),l.SCALE&&P.fromBufferAttribute(l.SCALE,D),E.setMatrixAt(D,C.compose(x,b,P));for(let D in l)if(D==="_COLOR_0"){let L=l[D];E.instanceColor=new Gu(L.array,L.itemSize,L.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&y.geometry.setAttribute(D,l[D]);hr.prototype.copy.call(E,y),this.parser.assignFinalMaterial(E),p.push(E)}return f.isGroup?(f.clear(),f.add(...p),f):p[0]}))}},SV="glTF",Um=12,CV={JSON:1313821514,BIN:5130562},NP=class{constructor(t){this.name=kn.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,Um),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==SV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Um,o=new DataView(t,Um),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===CV.JSON){let u=new Uint8Array(t,Um+s,a);this.content=i.decode(u)}else if(l===CV.BIN){let u=Um+s;this.body=t.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},FP=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=BP[f]||f.toLowerCase();a[h]=s[f]}for(let f in t.attributes){let h=BP[f]||f.toLowerCase();if(s[f]!==void 0){let m=i.accessors[t.attributes[f]],p=dh[m.componentType];u[h]=p.name,l[h]=m.normalized===!0}}return e.getDependency("bufferView",o).then(function(f){return new Promise(function(h,m){r.decodeDracoFile(f,function(p){for(let y in p.attributes){let C=p.attributes[y],x=l[y];x!==void 0&&(C.normalized=x)}h(p)},a,u,Zr,m)})})}},LP=class{constructor(){this.name=kn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},UP=class{constructor(){this.name=kn.KHR_MESH_QUANTIZATION}},tx=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)e[s]=i[o+s];return e}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-e,h=(i-e)/f,m=h*h,p=m*h,y=t*u,C=y-u,x=-2*p+3*m,b=p-m,P=1-x,E=b-m+h;for(let D=0;D!==a;D++){let L=s[C+D+a],B=s[C+D+l]*f,k=s[y+D+a],G=s[y+D]*f;o[D]=P*L+E*B+x*k+b*G}return o}},sae=new qr,VP=class extends tx{interpolate_(t,e,i,r){let o=super.interpolate_(t,e,i,r);return sae.fromArray(o).normalize().toArray(o),o}},Es={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},MV={9728:$r,9729:Tr,9984:QT,9985:vm,9986:Vf,9987:Po},wV={33071:Dl,33648:Cm,10497:sr},pP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},BP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},aae={CUBICSPLINE:void 0,LINEAR:Qf,STEP:Jf},mP={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function lae(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Fa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ia})),n.DefaultMaterial}function Xu(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Ul(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function cae(n,t,e){let i=!1,r=!1,o=!1;for(let u=0,f=t.length;u<f;u++){let h=t[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=t.length;u<f;u++){let h=t[u];if(i){let m=h.POSITION!==void 0?e.getDependency("accessor",h.POSITION):n.attributes.position;s.push(m)}if(r){let m=h.NORMAL!==void 0?e.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(m)}if(o){let m=h.COLOR_0!==void 0?e.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(m)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],m=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function uae(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function dae(n){let t,e=n.extensions&&n.extensions[kn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+gP(e.attributes):t=n.indices+":"+gP(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+gP(n.targets[i]);return t}function gP(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function zP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function fae(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var hae=new an,HP=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new oae,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Xr(this.options.manager):this.textureLoader=new Wy(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Xu(o,a,r),Ul(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=e.length;r<o;r++){let s=e[r].joints;for(let a=0,l=s.length;a<l;a++)t[s[a]].isBone=!0}for(let r=0,o=t.length;r<o;r++){let s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let o=t(e[r]);o&&i.push(o)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(e)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[kn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(kc.resolveURL(e.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,o=e.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let s=pP[r.type],a=dh[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new Pi(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=pP[r.type],u=dh[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,m=r.byteOffset||0,p=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0,C,x;if(p&&p!==h){let b=Math.floor(m/p),P="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count,E=e.cache.get(P);E||(C=new u(a,b*p,r.count*p/f),E=new Dm(C,p/f),e.cache.add(P,E)),x=new Om(E,l,m%p/f,y)}else a===null?C=new u(r.count*l):C=new u(a,m,r.count*l),x=new Pi(C,l,y);if(r.sparse!==void 0){let b=pP.SCALAR,P=dh[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,D=r.sparse.values.byteOffset||0,L=new P(s[1],E,r.sparse.count*b),B=new u(s[2],D,r.sparse.count*l);a!==null&&(x=new Pi(x.array.slice(),x.itemSize,x.normalized)),x.normalized=!1;for(let k=0,G=L.length;k<G;k++){let F=L[k];if(x.setX(F,B[k*l]),l>=2&&x.setY(F,B[k*l+1]),l>=3&&x.setZ(F,B[k*l+2]),l>=4&&x.setW(F,B[k*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}x.normalized=y}return x})}loadTexture(t){let e=this.json,i=this.options,o=e.textures[t].source,s=e.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,e,i){let r=this,o=this.json,s=o.textures[t],a=o.images[e],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(e,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let m=(o.samplers||{})[s.sampler]||{};return f.magFilter=MV[m.magFilter]||Tr,f.minFilter=MV[m.minFilter]||Po,f.wrapS=wV[m.wrapS]||sr,f.wrapT=wV[m.wrapT]||sr,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==$r&&f.minFilter!==Tr,r.associations.set(f,{textures:t}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(t,e){let i=this,r=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(h=>h.clone());let s=r.images[t],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let m=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(m),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(m,p){let y=m;e.isImageBitmapLoader===!0&&(y=function(C){let x=new ws(C);x.needsUpdate=!0,m(x)}),e.load(kc.resolveURL(h,o.path),y,void 0,p)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Ul(h,s),h.userData.mimeType=s.mimeType||fae(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[t]=f,f}assignTexture(t,e,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[kn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[kn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[kn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),t[e]=s,s})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,o=e.attributes.color!==void 0,s=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Im,Yr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new $u,Yr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}t.material=i}getMaterialType(){return Fa}loadMaterial(t){let e=this,i=this.json,r=this.extensions,o=i.materials[t],s,a={},l=o.extensions||{},u=[];if(l[kn.KHR_MATERIALS_UNLIT]){let h=r[kn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,e))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new Bt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let m=h.baseColorFactor;a.color.setRGB(m[0],m[1],m[2],Zr),a.opacity=m[3]}h.baseColorTexture!==void 0&&u.push(e.assignTexture(a,"map",h.baseColorTexture,Li)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(e.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(e.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=Xo);let f=o.alphaMode||mP.OPAQUE;if(f===mP.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===mP.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Ra&&(u.push(e.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new dn(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Ra&&(u.push(e.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Ra){let h=o.emissiveFactor;a.emissive=new Bt().setRGB(h[0],h[1],h[2],Zr)}return o.emissiveTexture!==void 0&&s!==Ra&&u.push(e.assignTexture(a,"emissiveMap",o.emissiveTexture,Li)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Ul(h,o),e.associations.set(h,{materials:t}),o.extensions&&Xu(r,h,o),h})}createUniqueName(t){let e=Ni.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[kn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return EV(l,a,e)})}let s=[];for(let a=0,l=t.length;a<l;a++){let u=t[a],f=dae(u),h=r[f];if(h)s.push(h.promise);else{let m;u.extensions&&u.extensions[kn.KHR_DRACO_MESH_COMPRESSION]?m=o(u):m=EV(new Oo,u,e),r[f]={primitive:u,promise:m},s.push(m)}}return Promise.all(s)}loadMesh(t){let e=this,i=this.json,r=this.extensions,o=i.meshes[t],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?lae(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(e.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let p=0,y=f.length;p<y;p++){let C=f[p],x=s[p],b,P=u[p];if(x.mode===Es.TRIANGLES||x.mode===Es.TRIANGLE_STRIP||x.mode===Es.TRIANGLE_FAN||x.mode===void 0)b=o.isSkinnedMesh===!0?new Iy(C,P):new wi(C,P),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),x.mode===Es.TRIANGLE_STRIP?b.geometry=hP(b.geometry,Xy):x.mode===Es.TRIANGLE_FAN&&(b.geometry=hP(b.geometry,Nm));else if(x.mode===Es.LINES)b=new Uy(C,P);else if(x.mode===Es.LINE_STRIP)b=new nh(C,P);else if(x.mode===Es.LINE_LOOP)b=new ih(C,P);else if(x.mode===Es.POINTS)b=new Vy(C,P);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(b.geometry.morphAttributes).length>0&&uae(b,o),b.name=e.createUniqueName(o.name||"mesh_"+t),Ul(b,o),x.extensions&&Xu(r,b,x),e.assignFinalMaterial(b),h.push(b)}for(let p=0,y=h.length;p<y;p++)e.associations.set(h[p],{meshes:t,primitives:p});if(h.length===1)return o.extensions&&Xu(r,h[0],o),h[0];let m=new ni;o.extensions&&Xu(r,m,o),e.associations.set(m,{meshes:t});for(let p=0,y=h.length;p<y;p++)m.add(h[p]);return m})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new fr(kr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new Na(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Ul(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,o=e.joints.length;r<o;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let m=new an;o!==null&&m.fromArray(o.array,u*16),l.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[u])}return new ky(a,l)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],o=r.name?r.name:"animation_"+t,s=[],a=[],l=[],u=[],f=[];for(let h=0,m=r.channels.length;h<m;h++){let p=r.channels[h],y=r.samplers[p.sampler],C=p.target,x=C.node,b=r.parameters!==void 0?r.parameters[y.input]:y.input,P=r.parameters!==void 0?r.parameters[y.output]:y.output;C.node!==void 0&&(s.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",b)),l.push(this.getDependency("accessor",P)),u.push(y),f.push(C))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let m=h[0],p=h[1],y=h[2],C=h[3],x=h[4],b=[];for(let P=0,E=m.length;P<E;P++){let D=m[P],L=p[P],B=y[P],k=C[P],G=x[P];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();let F=i._createAnimationTracks(D,L,B,k,G);if(F)for(let T=0;T<F.length;T++)b.push(F[T])}return new rh(o,void 0,b)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],o=i._loadNodeShallow(t),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],m=u[2];m!==null&&f.traverse(function(p){p.isSkinnedMesh&&p.bind(m,hae)});for(let p=0,y=h.length;p<y;p++)f.add(h[p]);return f})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let o=e.nodes[t],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){a.push(u)}),this.nodeCache[t]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Am:u.length>1?f=new ni:u.length===1?f=u[0]:f=new hr,f!==u[0])for(let h=0,m=u.length;h<m;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Ul(f,o),o.extensions&&Xu(i,f,o),o.matrix!==void 0){let h=new an;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=t,f}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,o=new ni;i.name&&(o.name=r.createUniqueName(i.name)),Ul(o,i),i.extensions&&Xu(e,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[m,p]of r.associations)(m instanceof Yr||m instanceof ws)&&h.set(m,p);return f.traverse(m=>{let p=r.associations.get(m);p!=null&&h.set(m,p)}),h};return r.associations=u(o),o})}_createAnimationTracks(t,e,i,r,o){let s=[],a=t.name?t.name:t.uuid,l=[];Nc[o.path]===Nc.weights?t.traverse(function(m){m.morphTargetInfluences&&l.push(m.name?m.name:m.uuid)}):l.push(a);let u;switch(Nc[o.path]){case Nc.weights:u=Nl;break;case Nc.rotation:u=Fl;break;case Nc.position:case Nc.scale:u=Ll;break;default:switch(i.itemSize){case 1:u=Nl;break;case 2:case 3:default:u=Ll;break}break}let f=r.interpolation!==void 0?aae[r.interpolation]:Qf,h=this._getArrayFromAccessor(i);for(let m=0,p=l.length;m<p;m++){let y=new u(l[m]+"."+Nc[o.path],e.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),s.push(y)}return s}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=zP(e.constructor),r=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o++)r[o]=e[o]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof Fl?VP:tx;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function pae(n,t,e){let i=t.attributes,r=new Ki;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new te(l[0],l[1],l[2]),new te(u[0],u[1],u[2])),a.normalized){let f=zP(dh[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=t.targets;if(o!==void 0){let a=new te,l=new te;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let m=e.json.accessors[h.POSITION],p=m.min,y=m.max;if(p!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(y[2]))),m.normalized){let C=zP(dh[m.componentType]);l.multiplyScalar(C)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new Zo;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function EV(n,t,e){let i=t.attributes,r=[];function o(s,a){return e.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=BP[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(t.indices!==void 0&&!n.index){let s=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(s)}return Ln.workingColorSpace!==Zr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ln.workingColorSpace}" not supported.`),Ul(n,t),pae(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?cae(n,t.targets,e):n})}var Wxe={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new te(1,1,2)},Zu=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,this.isLoaded=!1,new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ki().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}open(){this.isLoaded&&(this.object.rotation.y=Math.PI/2,this.boundingBox.setFromObject(this.object))}isTrespassing(t){if(this.isLoaded){let e=new Ki().setFromObject(t);return this.boundingBox.intersectsBox(e)}return!1}blockMovementIfTrespassing(t){this.isTrespassing(t)&&(console.log("Movement blocked: Door is in the way!"),t.position.copy(t.previousPosition))}};var fh=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,this.tables=[],new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0,o.name=this.name||"Table",o.isTable=!0)}),r.scale.copy(this.scale),this.object.add(r),this.tables.push(this.object)},void 0,i=>{console.error("Error loading the table model:",i)})}addToScene(t){this.tables.forEach(e=>t.add(e))}handleRaycast(t,e){let r=t.intersectObjects(this.tables,!0).find(o=>o.object.isTable);r&&e&&e(r.object)}};var Xxe={url:"/models/gltf/RobotExpressive/patient.glb",scale:new te(1,1,1)},Vm=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var nx=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,this.isLoaded=!1,new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ki().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}};var ix=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var rx=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var ox=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Pr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var sx=class{constructor(t,e,i,r,o,s,a,l,u,f){this.onLoad=function(m){this.map=m.map,this.doorMap=m.doorMap,this.tableMap=m.tableMap,this.size=m.size,this.doorParameters=e,this.tableParameters=i,this.humanParameters=r,this.exitDoorParameters=o,this.hearthMonitorParameters=s,this.hearthTableParameters=a,this.surgicalEquipmentParameters=l,this.surgeonParameters=u,this.roomParameters=f,this.initialPosition=this.cellToCartesian(m.initialPosition),this.initialDirection=m.initialDirection,this.object=new ni,this.ground=new Qy({textureUrl:m.groundTextureUrl,size:m.size}),this.object.add(this.ground.object),this.wall=new ex({textureUrl:m.wallTextureUrl});for(let p=0;p<=m.size.height;p++)for(let y=0;y<=m.size.width;y++){let C,x=Math.floor(m.size.height/2),b=Math.floor(m.size.width/2);p<x&&y<b?C=0:p<x&&y>=b?C=1:p>=x&&y<b?C=2:C=3;let P=f[C];if(m.map[p][y]===2||m.map[p][y]===3){let E=this.wall.object.clone();E.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),this.object.add(E)}if(m.map[p][y]===1||m.map[p][y]===3){let E=this.wall.object.clone();E.rotateY(Math.PI/2),E.position.set(y-m.size.width/2,.5,p-m.size.height/2+.5),this.object.add(E)}if(m.map[p][y]===4&&!P.isOccupied){let E=new Zu(this.doorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(.0035,.00635,0),E.object.translateY(-.6),E.object.translateX(.5),m.doorMap[p][y]===1?E.object.rotateY(-Math.PI/2):m.doorMap[p][y]===2&&(E.object.translateZ(-.029),E.object.rotateY(Math.PI/2)),this.object.add(E.object)}if(m.map[p][y]===4&&P.isOccupied){let E=new Zu(this.doorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(.0035,.00635,0),E.object.translateY(-.6),E.object.translateX(.5),m.map[p][y]===1?E.object.translateZ(.3):m.map[p][y]===2&&E.object.translateZ(-.029),this.object.add(E.object)}if(this.map[p][y]===5){let E=new fh({url:this.tableParameters.url,scale:new te(.5,1,.5),name:`Table_${p}_${y}`});if(console.log("Table added: "+E.name),E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(1,1,1),E.object.translateX(-.6),E.object.translateY(-.4),this.object.add(E.object),P.isOccupied){console.log("Human added: "+P.isOccupied);let D=new Vm(this.humanParameters);D.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),D.object.scale.set(1.2,1,1),D.object.rotateY(Math.PI/2),D.object.translateY(.29),D.object.translateZ(-.67),this.object.add(D.object);let L=new Vm(this.surgeonParameters);L.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),L.object.scale.set(.08,.08,.08),L.object.translateY(-.5),L.object.translateZ(.3),L.object.translateX(.15),this.object.add(L.object)}}if(this.map[p][y]===6){let E=new nx(this.exitDoorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.translateX(-.34),E.object.translateY(-1),E.object.translateZ(-.05),this.object.add(E.object)}if(this.map[p][y]===7&&P.isOccupied){let E=new ix(this.hearthMonitorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(.02,.02,.02),E.object.translateZ(.4),E.object.translateX(-.8),E.object.translateY(.6),this.object.add(E.object);let D=new rx(this.hearthTableParameters);D.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),D.object.scale.set(.5,.5,.3),D.object.translateZ(.4),D.object.translateX(-.8),D.object.translateY(-.4),this.object.add(D.object);let L=new ox(this.surgicalEquipmentParameters);L.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),L.object.scale.set(.8,1.55,.87),L.object.translateZ(1.5),L.object.translateX(0),L.object.translateY(-.4),L.object.rotateY(Math.PI/2),this.object.add(L.object)}}this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(m,p){console.log("Resource '"+m+"' "+(100*p.loaded/p.total).toFixed(0)+"% loaded.")},this.onError=function(m,p){console.error("Error loading resource "+m+" ("+p+").")};for(let[m,p]of Object.entries(t))this[m]=p;this.loaded=!1,Aa.enabled=!0;let h=new qu;h.setResponseType("json"),h.load(this.url,m=>this.onLoad(m),m=>this.onProgress(this.url,m),m=>this.onError(this.url,m))}cellToCartesian(t){return new te((t[1]-this.size.width/2+.5)*this.scale.x,0,(t[0]-this.size.height/2+.5)*this.scale.z)}cartesianToCell(t){return[Math.floor(t.z/this.scale.z+this.size.height/2),Math.floor(t.x/this.scale.x+this.size.width/2)]}distanceToWestWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?t.x-this.cellToCartesian(e).x+this.scale.x/2:1/0}distanceToEastWall(t){let e=this.cartesianToCell(t);return e[1]++,this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).x-this.scale.x/2-t.x:1/0}distanceToNorthWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?t.z-this.cellToCartesian(e).z+this.scale.z/2:1/0}distanceToSouthWall(t){let e=this.cartesianToCell(t);return e[0]++,this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToWestWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===1&&r.isOccupied?t.x-this.cellToCartesian(e).x+this.scale.x/2:1/0}distanceToEastWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===1&&r.isOccupied?this.cellToCartesian(e).x-this.scale.x/2-t.x:1/0}distanceToNorthWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===2&&r.isOccupied?t.z-this.cellToCartesian(e).z+this.scale.z/2:1/0}distanceToSouthWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===2&&r.isOccupied?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToDoor(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===4&&r.isOccupied?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToTable(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===5?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}getRoomIndex(t){let e=Math.floor(this.size.height/2),i=Math.floor(this.size.width/2);return t[0]<e&&t[1]<i?0:t[0]<e&&t[1]>=i?1:t[0]>=e&&t[1]<i?2:3}};var ax=class{constructor(t){this.onLoad=function(i){this.object=i.scene,this.animations=i.animations,this.setShadow(this.object);let r=new Ki;r.setFromObject(this.object);let o=new te;r.getSize(o),o.x=3,o.y=4.4,o.z=2.6,this.radius=o.x/2*this.scale.x,this.eyeHeight*=o.y*this.scale.y,this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(i,r){console.log("Resource '"+i+"' "+(100*r.loaded/r.total).toFixed(0)+"% loaded.")},this.onError=function(i,r){console.error("Error loading resource "+i+" ("+r+").")};for(let[i,r]of Object.entries(t))this[i]=r;this.initialDirection=kr.degToRad(this.initialDirection),this.keyStates={fixedView:!1,firstPersonView:!1,thirdPersonView:!1,topView:!1,viewMode:!1,miniMap:!1,statistics:!1,userInterface:!1,help:!1,run:!1,left:!1,right:!1,backward:!1,forward:!1,jump:!1,yes:!1,no:!1,wave:!1,punch:!1,thumbsUp:!1},this.loaded=!1,new Pr().load(this.url,i=>this.onLoad(i),i=>this.onProgress(this.url,i),i=>this.onError(this.url,i))}setShadow(t){t.traverseVisible(function(e){e instanceof hr&&(e.castShadow=!0,e.receiveShadow=!1)})}};var lx=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new ni,this.object.ambientLight=new jy(this.ambientLight.color,this.ambientLight.intensity),this.object.add(this.object.ambientLight),this.object.pointLight1=new Yu(this.pointLight1.color,this.pointLight1.intensity,this.pointLight1.distance),this.object.pointLight1.position.set(this.pointLight1.position.x,this.pointLight1.position.y,this.pointLight1.position.z),this.object.pointLight1.castShadow=!0,this.object.pointLight1.shadow.mapSize.width=512,this.object.pointLight1.shadow.mapSize.height=512,this.object.pointLight1.shadow.camera.near=5,this.object.pointLight1.shadow.camera.far=15,this.object.pointLight1.visible=!1,this.object.add(this.object.pointLight1),this.object.pointLight2=new Yu(this.pointLight2.color,this.pointLight2.intensity,this.pointLight2.distance),this.object.pointLight2.position.set(this.pointLight2.position.x,this.pointLight2.position.y,this.pointLight2.position.z),this.object.pointLight2.castShadow=!0,this.object.pointLight2.shadow.mapSize.width=512,this.object.pointLight2.shadow.mapSize.height=512,this.object.pointLight2.shadow.camera.near=5,this.object.pointLight2.shadow.camera.far=15,this.object.pointLight2.visible=!1,this.object.add(this.object.pointLight2),this.object.directionalLight=new sh(this.directionalLight.color,this.directionalLight.intensity),this.object.directionalLight.castShadow=!0,this.object.directionalLight.position.set(this.directionalLight.position.x,this.directionalLight.position.y,this.directionalLight.position.z),this.object.directionalLight.target.position.set(this.directionalLight.target.x,this.directionalLight.target.y,this.directionalLight.target.z),this.object.add(this.object.directionalLight),this.object.add(this.object.directionalLight.target)}};var cx=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new Ay(this.color,this.near,this.far)}};var Fc=class{constructor(t,e,i){for(let[r,o]of Object.entries(t))this[r]=o;this.viewport=this.multipleViewsViewport.clone(),this.target=this.target.clone(),this.initialHalfSize=Math.tan(kr.degToRad(this.initialFov/2))*this.initialDistance,this.playerDirection=0,this.perspective=new fr,this.orthographic=new Na,this.setWindowSize(e,i),this.initialize()}setViewingParameters(){let t=new Kr(this.orientation.h+this.playerDirection,this.orientation.v),e=Math.cos(kr.degToRad(t.h)),i=Math.sin(kr.degToRad(t.h)),r=Math.cos(kr.degToRad(t.v)),o=Math.sin(kr.degToRad(t.v)),s=this.target.x,a=this.target.y,l=this.target.z;this.view!="first-person"&&(s-=this.distance*i*r,a-=this.distance*o,l-=this.distance*e*r),this.perspective.position.set(s,a,l),this.orthographic.position.set(s,a,l);let u=-i*o,f=r,h=-e*o;this.perspective.up.set(u,f,h),this.orthographic.up.set(u,f,h);let m=this.target.clone();this.view=="first-person"&&(m.x+=i*r,m.y+=o,m.z+=e*r),this.perspective.lookAt(m),this.orthographic.lookAt(m)}setProjectionParameters(){let t,e,i,r,o;this.aspectRatio<1?(t=2*kr.radToDeg(Math.atan(Math.tan(kr.degToRad(this.initialFov/2))/this.aspectRatio)),i=this.initialHalfSize,e=-i,r=i/this.aspectRatio,o=-r):(t=this.initialFov,r=this.initialHalfSize,o=-r,i=r*this.aspectRatio,e=-i),this.perspective.fov=t,this.perspective.aspect=this.aspectRatio,this.perspective.near=this.near,this.perspective.far=this.far,this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.left=e,this.orthographic.right=i,this.orthographic.top=r,this.orthographic.bottom=o,this.orthographic.near=this.near,this.orthographic.far=this.far,this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}setActiveProjection(t){this.projection=t,this.projection!="orthographic"?this.object=this.perspective:this.object=this.orthographic}initialize(){this.orientation=this.initialOrientation.clone(),this.distance=this.initialDistance,this.zoom=this.initialZoom,this.setViewingParameters(),this.setProjectionParameters(),this.view!="mini-map"?this.setActiveProjection("perspective"):this.setActiveProjection("orthographic")}getViewport(){let t=Math.min(this.windowWidth,this.windowHeight),e,i,r=this.viewport.width,o=this.viewport.height;return this.view!="mini-map"?(e=this.viewport.x*(1-this.viewport.width),i=this.viewport.y*(1-this.viewport.height),this.windowWidth<this.windowHeight?(e*=t,i*=this.windowHeight,r*=t,o*=this.windowHeight):(e*=this.windowWidth,i*=t,r*=this.windowWidth,o*=t)):(r*=t,o*=t,e=this.viewport.x*(this.windowWidth-r),i=this.viewport.y*(this.windowHeight-o)),new pn(e,i,r,o)}setViewport(t){t?this.viewport=this.multipleViewsViewport.clone():this.viewport=new pn(0,0,1,1);let e=this.getViewport();this.aspectRatio=e.width/e.height,this.setProjectionParameters()}setWindowSize(t,e){this.windowWidth=t,this.windowHeight=e;let i=this.getViewport();this.aspectRatio=i.width/i.height}updateWindowSize(t,e){this.setWindowSize(t,e),this.setProjectionParameters()}setTarget(t){this.target.copy(t),this.setViewingParameters()}updateTarget(t){this.setTarget(this.target.add(t))}setOrientation(t){this.orientation.copy(t).clamp(this.orientationMin,this.orientationMax),this.setViewingParameters()}updateOrientation(t){this.setOrientation(this.orientation.add(t))}setDistance(t){this.distance=kr.clamp(t,this.distanceMin,this.distanceMax),this.setViewingParameters()}updateDistance(t){this.setDistance(this.distance+t)}setZoom(t){this.zoom=kr.clamp(t,this.zoomMin,this.zoomMax),this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}updateZoom(t){this.setZoom(this.zoom+t)}};var ux=class{constructor(t,e){this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.mixer=new $y(t),this.actionInProgress=!1,this.actions={};for(let i=0;i<e.length;i++){let r=e[i],o=this.mixer.clipAction(r);this.actions[r.name]=o,(this.states.indexOf(r.name)>=4||this.emotes.indexOf(r.name)>=0)&&(o.clampWhenFinished=!0,o.loop=aP)}this.activeName="Idle",this.actions[this.activeName].play()}fadeToAction(t,e){if(this.activeName!=t&&!this.actionInProgress){let i=this.activeName;this.activeName=t,this.actions[i].fadeOut(e),this.actions[this.activeName].reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(e).play(),this.activeName!="Idle"&&this.activeName!="Walking"&&this.activeName!="Running"&&(this.mixer.addEventListener("finished",r=>this.actionFinished(r)),this.actionInProgress=!0)}}actionFinished(){this.actionInProgress&&(this.actionInProgress=!1,this.mixer.removeEventListener("finished",this.actionInProgress))}update(t){this.mixer&&this.mixer.update(t)}};var Lc=class n{constructor(t,e,i,r,o="div"){this.parent=t,this.object=e,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id="lil-gui-name-"+ ++n.nextNameID,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){let e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},jP=class extends Lc{constructor(t,e,i){super(t,e,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function WP(n){let t,e;return(t=n.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!e&&"#"+e}var mae={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:WP,toHexString:WP},zm={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},gae={isPrimitive:!1,match:Array.isArray,fromHexString(n,t,e=1){let i=zm.fromHexString(n);t[0]=(i>>16&255)/255*e,t[1]=(i>>8&255)/255*e,t[2]=(255&i)/255*e},toHexString:([n,t,e],i=1)=>zm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},_ae={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,t,e=1){let i=zm.fromHexString(n);t.r=(i>>16&255)/255*e,t.g=(i>>8&255)/255*e,t.b=(255&i)/255*e},toHexString:({r:n,g:t,b:e},i=1)=>zm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},vae=[mae,zm,gae,_ae],GP=class extends Lc{constructor(t,e,i,r){var o;super(t,e,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(o=this.initialValue,vae.find(s=>s.match(o))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let s=WP(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){let e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Bm=class extends Lc{constructor(t,e,i){super(t,e,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},$P=class extends Lc{constructor(t,e,i,r,o,s){super(t,e,i,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){let t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;let t=f=>{let h=parseFloat(this.$input.value);isNaN(h)||(this._snapClampSetValue(h+f),this.$input.value=this.getValue())},e,i,r,o,s,a=!1,l=f=>{if(a){let h=f.clientX-e,m=f.clientY-i;Math.abs(m)>5?(f.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(h)>5&&u()}if(!a){let h=f.clientY-r;s-=h*this._step*this._arrowKeyMultiplier(f),o+s>this._max?s=this._max-o:o+s<this._min&&(s=this._min-o),this._snapClampSetValue(o+s)}r=f.clientY},u=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u)};this.$input.addEventListener("input",()=>{let f=parseFloat(this.$input.value);isNaN(f)||(this._stepExplicit&&(f=this._snap(f)),this.setValue(this._clamp(f)))}),this.$input.addEventListener("keydown",f=>{f.code==="Enter"&&this.$input.blur(),f.code==="ArrowUp"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f))),f.code==="ArrowDown"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f)*-1))}),this.$input.addEventListener("wheel",f=>{this._inputFocused&&(f.preventDefault(),t(this._step*this._normalizeMouseWheel(f)))},{passive:!1}),this.$input.addEventListener("mousedown",f=>{e=f.clientX,i=r=f.clientY,a=!0,o=this.getValue(),s=0,window.addEventListener("mousemove",l),window.addEventListener("mouseup",u)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let t=m=>{let p=this.$slider.getBoundingClientRect(),y=(C=m,x=p.left,b=p.right,P=this._min,E=this._max,(C-x)/(b-x)*(E-P)+P);var C,x,b,P,E;this._snapClampSetValue(y)},e=m=>{t(m.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)},r,o,s=!1,a=m=>{m.preventDefault(),this._setDraggingStyle(!0),t(m.touches[0].clientX),s=!1},l=m=>{if(s){let p=m.touches[0].clientX-r,y=m.touches[0].clientY-o;Math.abs(p)>Math.abs(y)?a(m):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",u))}else m.preventDefault(),t(m.touches[0].clientX)},u=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",u)},f=this._callOnFinishChange.bind(this),h;this.$slider.addEventListener("mousedown",m=>{this._setDraggingStyle(!0),t(m.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",m=>{m.touches.length>1||(this._hasScrollBar?(r=m.touches[0].clientX,o=m.touches[0].clientY,s=!0):a(m),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",u))},{passive:!1}),this.$slider.addEventListener("wheel",m=>{if(Math.abs(m.deltaX)<Math.abs(m.deltaY)&&this._hasScrollBar)return;m.preventDefault();let p=this._normalizeMouseWheel(m)*this._step;this._snapClampSetValue(this.getValue()+p),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(f,400)},{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle("lil-gui-"+e,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:i}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,i=-t.wheelDelta/120,i*=this._stepExplicit?1:10),e+-i}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){let e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){let t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},qP=class extends Lc{constructor(t,e,i,r){super(t,e,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?t:this._names[e],this}},YP=class extends Lc{constructor(t,e,i){super(t,e,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},TV=!1,dx=class n{constructor({parent:t,autoPlace:e=t===void 0,container:i,width:r,title:o="Controls",injectStyles:s=!0,touchStyles:a=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{l.code!=="Enter"&&l.code!=="Space"||(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!TV&&s&&(function(l){let u=document.createElement("style");u.innerHTML=l;let f=document.querySelector("head link[rel=stylesheet], head style");f?document.head.insertBefore(u,f):document.head.appendChild(u)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25BE";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25B8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),TV=!0),i?i.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(t,e,i,r,o){if(Object(i)===i)return new qP(this,t,e,i);let s=t[e];switch(typeof s){case"number":return new $P(this,t,e,i,r,o);case"boolean":return new jP(this,t,e);case"string":return new YP(this,t,e);case"function":return new Bm(this,t,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,t,`
	value:`,s)}addColor(t,e,i=1){return new GP(this,t,e,i)}addFolder(t){return new n({parent:this,title:t})}load(t,e=!0){return t.controllers&&this.controllers.forEach(i=>{i instanceof Bm||i._name in t.controllers&&i.load(t.controllers[i._name])}),e&&t.folders&&this.folders.forEach(i=>{i._title in t.folders&&i.load(t.folders[i._title])}),this}save(t=!0){let e={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Bm)){if(i._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);e.controllers[i._name]=i.save()}}),t&&this.folders.forEach(i=>{if(i._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);e.folders[i._title]=i.save()}),e}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");let i=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}};var fx=class{constructor(t,e,i,r,o,s){function a(oe,ee){oe.color.set(ee)}function l(oe){t.traverseVisible(function(ee){ee.material&&(ee.material instanceof Yr?ee.material.needsUpdate=!0:ee.material instanceof Array&&ee.material.forEach(ge=>{ge instanceof Yr&&(ge.needsUpdate=!0)}))})}function u(oe,ee){T[ee]=function(){oe.fadeToAction(ee,.2)},F.add(T,ee)}this.gui=new dx({hideable:!1});let f=this.gui.addFolder("Lights"),h=f.addFolder("Ambient light");h.add(i.object.ambientLight,"visible").listen();let m=i.object.ambientLight,p={color:"#"+new Bt(m.color).getHexString()};h.addColor(p,"color").onChange(oe=>a(m,oe)),h.add(i.object.ambientLight,"intensity",0,1,.01);let y=f.addFolder("Directional light");y.add(i.object.directionalLight,"visible").listen();let C=i.object.directionalLight,x={color:"#"+new Bt(C.color).getHexString()};y.addColor(x,"color").onChange(oe=>a(C,oe)),y.add(i.object.directionalLight,"intensity",0,1,.01),y.add(i.object.directionalLight.position,"x",-100,100,.01),y.add(i.object.directionalLight.position,"y",-100,100,.01),y.add(i.object.directionalLight.position,"z",-100,100,.01);let b=f.addFolder("Point light #1");b.close(),b.add(i.object.pointLight1,"visible").listen();let P=i.object.pointLight1,E={color:"#"+new Bt(P.color).getHexString()};b.addColor(E,"color").onChange(oe=>a(P,oe)),b.add(i.object.pointLight1,"intensity",0,100,1),b.add(i.object.pointLight1,"distance",0,20,.01),b.add(i.object.pointLight1.position,"x",-10,10,.01),b.add(i.object.pointLight1.position,"y",0,20,.01),b.add(i.object.pointLight1.position,"z",-10,10,.01);let D=f.addFolder("Point light #2");D.close(),D.add(i.object.pointLight2,"visible").listen();let L=i.object.pointLight2,B={color:"#"+new Bt(L.color).getHexString()};D.addColor(B,"color").onChange(oe=>a(L,oe)),D.add(i.object.pointLight2,"intensity",0,100,1),D.add(i.object.pointLight2,"distance",0,20,.01),D.add(i.object.pointLight2.position,"x",-10,10,.01),D.add(i.object.pointLight2.position,"y",0,20,.01),D.add(i.object.pointLight2.position,"z",-10,10,.01),this.gui.addFolder("Shadows").add(e.shadowMap,"enabled").onChange(oe=>l(oe));let G=this.gui.addFolder("Character"),F=G.addFolder("Emotes"),T=[];for(let oe=0;oe<s.emotes.length;oe++)u(s,s.emotes[oe]);let N=G.addFolder("Expressions"),S=o.getObjectByName("Head_4"),q=Object.keys(S.morphTargetDictionary);for(let oe=0;oe<q.length;oe++)N.add(S.morphTargetInfluences,oe,0,1,.01).name(q[oe])}setVisibility(t){t?this.gui.show():this.gui.hide()}};var hx=class{constructor(t){this.selectedRoom=null,this.isInfoVisible=!1,this.roomParameters=t,this.toggleInfoSound=new Audio("audios/i.mp3"),console.log("Sound loaded: "+this.toggleInfoSound.src),this.toggleInfoSound.loop=!1,this.toggleInfoSound.volume=.3,this.toggleHeartMonitorSound=new Audio("audios/heartbit.mp3"),this.toggleHeartMonitorSound.loop=!0,this.initKeyboardListener()}playToggleInfoSound(){this.selectedRoom&&this.toggleInfoSound&&(this.toggleInfoSound.paused||(this.toggleInfoSound.currentTime=0),this.toggleInfoSound.play().catch(t=>{console.error("Error playing sound:",t)}))}playToggleHeartMonitorSound(){this.selectedRoom&&this.selectedRoom.isOccupied&&this.toggleHeartMonitorSound&&(this.toggleHeartMonitorSound.paused||(this.toggleHeartMonitorSound.currentTime=0),this.toggleHeartMonitorSound.play().catch(t=>{console.error("Error playing sound:",t)}))}getRoomFromTable(t){let e=t.name;console.log("getRoomFromTable:"+e);let r={Table_2_2:0,Table_2_8:1,Table_8_2:2,Table_8_8:3}[e];return r===void 0?(console.error(`Table name ${e} is not recognized`),null):this.roomParameters&&Array.isArray(this.roomParameters)&&this.roomParameters.length>r?this.roomParameters[r]:(console.error("roomParameters is not defined, not an array, or out of range"),null)}selectRoomFromTable(t){let e=this.getRoomFromTable(t);if(!e){console.error(`Room not found for table: ${t}`),this.deselectRoom();return}this.selectedRoom=e,this.playToggleHeartMonitorSound(),console.log(`Room selected: ${e.roomNumber}`),this.isInfoVisible&&this.updateRoomInfo()}deselectRoom(){console.log("Deselecting room..."),this.selectedRoom=null,this.clearRoomInfo(),this.toggleHeartMonitorSound.pause()}clearRoomInfo(){let t=document.getElementById("room-info");t&&(t.innerHTML=`
                <h3>Room Information</h3>
                <p>No room selected.</p>
            `,t.style.display="none",this.isInfoVisible=!1)}toggleRoomInfo(){if(!this.selectedRoom){alert("No room selected!");return}let t=document.getElementById("room-info")||this.createInfoDiv();this.isInfoVisible?(t.style.display="none",this.isInfoVisible=!1):(this.updateRoomInfo(),t.style.display="block",this.isInfoVisible=!0)}updateRoomInfo(){let t=document.getElementById("room-info");if(t&&this.selectedRoom){let e=this.selectedRoom;t.innerHTML=`
                <h3>Room Information</h3>
                <p><strong>Number:</strong> ${e.roomNumber}</p>
                <p><strong>Capacity:</strong> ${e.capacity}</p>
                <p><strong>Occupied:</strong> ${e.isOccupied?"Yes":"No"}</p>
            `}}initKeyboardListener(){document.addEventListener("keydown",t=>{t.key.toLowerCase()==="i"&&(this.toggleRoomInfo(),this.playToggleInfoSound())})}handlePlayerLeavingRoom(){console.log("Player has left the room."),this.deselectRoom()}createInfoDiv(){let t=document.createElement("div");return t.id="room-info",t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.padding="15px",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.borderRadius="5px",t.style.zIndex="1000",t.style.display="none",document.body.appendChild(t),t}};var px=class{constructor(t,e,i,r,o,s,a,l,u,f,h,m,p,y,C,x,b,P,E){this.generalParameters=_r({},lV,t),this.mazeParameters=_r({},cV,e),this.playerParameters=_r({},uV,i),this.lightsParameters=_r({},dV,r),this.fogParameters=_r({},fV,o),this.fixedViewCameraParameters=_r({},ch,s),this.firstPersonViewCameraParameters=_r({},ch,a),this.thirdPersonViewCameraParameters=_r({},ch,l),this.topViewCameraParameters=_r({},ch,u),this.miniMapCameraParameters=_r({},ch,f),this.doorParameters=_r({},hV,h),this.tableParameters=_r({},pV,m),this.humanParameters=_r({},mV,p),this.exitDoorParameters=_r({},gV,y),this.hearthMonitorParameters=_r({},_V,C),this.hearthTableParameters=_r({},vV,x),this.surgicalEquipmentParameters=_r({},yV,b),this.surgeonParameters=_r({},xV,P),this.roomParameters=E&&E.rooms?E.rooms:[],this.scene2D=new Pm;let D=[new te(0,0,0),new te(1,0,0),new te(1,1,0),new te(0,1,0)],L=new Oo().setFromPoints(D),B=new $u({color:16777215});this.square=new ih(L,B),this.scene2D.add(this.square),this.camera2D=new Na(0,1,1,0,0,1),this.scene3D=new Pm,this.maze=new sx(this.mazeParameters,this.doorParameters,this.tableParameters,this.humanParameters,this.exitDoorParameters,this.hearthMonitorParameters,this.hearthTableParameters,this.surgicalEquipmentParameters,this.surgeonParameters,this.roomParameters),this.player=new ax(this.playerParameters),this.lights=new lx(this.lightsParameters),this.fog=new cx(this.fogParameters),this.door=new Zu(this.doorParameters),this.table=new fh(this.tableParameters),this.fixedViewCamera=new Fc(this.fixedViewCameraParameters,window.innerWidth,window.innerHeight),this.firstPersonViewCamera=new Fc(this.firstPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.thirdPersonViewCamera=new Fc(this.thirdPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.topViewCamera=new Fc(this.topViewCameraParameters,window.innerWidth,window.innerHeight),this.miniMapCamera=new Fc(this.miniMapCameraParameters,window.innerWidth,window.innerHeight),this.statistics=new aV,this.statistics.dom.style.visibility="hidden",document.body.appendChild(this.statistics.dom),this.renderer=new Oy({antialias:!0}),this.generalParameters.setDevicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=JT,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1,this.gameRunning=!1,this.viewsPanel=document.getElementById("views-panel"),this.view=document.getElementById("view"),this.projection=document.getElementById("projection"),this.horizontal=document.getElementById("horizontal"),this.horizontal.step=1,this.vertical=document.getElementById("vertical"),this.vertical.step=1,this.distance=document.getElementById("distance"),this.distance.step=.1,this.zoom=document.getElementById("zoom"),this.zoom.step=.1,this.reset=document.getElementById("reset"),this.resetAll=document.getElementById("reset-all"),this.helpPanel=document.getElementById("help-panel"),this.helpPanel.style.visibility="hidden",this.subwindowsPanel=document.getElementById("subwindows-panel"),this.multipleViewsCheckBox=document.getElementById("multiple-views"),this.multipleViewsCheckBox.checked=!1,this.userInterfaceCheckBox=document.getElementById("user-interface"),this.userInterfaceCheckBox.checked=!0,this.miniMapCheckBox=document.getElementById("mini-map"),this.miniMapCheckBox.checked=!0,this.helpCheckBox=document.getElementById("help"),this.helpCheckBox.checked=!1,this.statisticsCheckBox=document.getElementById("statistics"),this.statisticsCheckBox.checked=!1,this.sceneContainer=document.getElementById("scene-container"),this.renderer.domElement.id="scene-container",this.buildHelpPanel(),this.setActiveViewCamera(this.fixedViewCamera),this.arrangeViewports(this.multipleViewsCheckBox.checked),window.addEventListener("resize",k=>this.windowResize(k)),document.addEventListener("keydown",k=>this.keyChange(k,!0)),document.addEventListener("keyup",k=>this.keyChange(k,!1)),this.renderer.domElement.addEventListener("mousedown",k=>this.mouseDown(k)),this.renderer.domElement.addEventListener("mousemove",k=>this.mouseMove(k)),this.renderer.domElement.addEventListener("mouseup",k=>this.mouseUp(k)),this.renderer.domElement.addEventListener("wheel",k=>this.mouseWheel(k)),this.renderer.domElement.addEventListener("contextmenu",k=>this.contextMenu(k)),this.renderer.domElement.addEventListener("click",k=>this.mouseClick(k)),this.view.addEventListener("change",k=>this.elementChange(k)),this.projection.addEventListener("change",k=>this.elementChange(k)),this.horizontal.addEventListener("change",k=>this.elementChange(k)),this.vertical.addEventListener("change",k=>this.elementChange(k)),this.distance.addEventListener("change",k=>this.elementChange(k)),this.zoom.addEventListener("change",k=>this.elementChange(k)),this.multipleViewsCheckBox.addEventListener("change",k=>this.elementChange(k)),this.userInterfaceCheckBox.addEventListener("change",k=>this.elementChange(k)),this.helpCheckBox.addEventListener("change",k=>this.elementChange(k)),this.statisticsCheckBox.addEventListener("change",k=>this.elementChange(k)),this.reset.addEventListener("click",k=>this.buttonClick(k)),this.resetAll.addEventListener("click",k=>this.buttonClick(k)),this.activeElement=document.activeElement,this.roomInfoHandler=new hx(this.roomParameters),this.player.moveSound=new Audio("/audios/walking.mp3"),console.log(this.player.moveSound),this.player.moveSound.loop=!0,this.player.moveSound.volume=.3,this.activeKeys=new Set,this.player.hitWallSound=new Audio("/audios/hurt.mp3"),this.player.hitWallSound.loop=!1,this.player.hitWallSound.volume=.3,this.door.hearthSound=new Audio("/audios/heartbit.mp3"),this.door.hearthSound.loop=!0}mouseClick(t){if(t.button===0&&t.target.id==="scene-container"){t.preventDefault();let e=new qy,i=new dn(t.clientX/window.innerWidth*2-1,-(t.clientY/window.innerHeight)*2+1);e.setFromCamera(i,this.activeViewCamera.object);let r=e.intersectObjects(this.scene3D.children,!0);if(r.length>0){let o=r.find(s=>s.object.isTable);if(o){let s=o.object;console.log("Picked table:",s.name),this.roomInfoHandler.selectRoomFromTable(s),this.moveCameraToTable(s)}else console.log("No table found in the intersection"),this.roomInfoHandler.deselectRoom()}}}moveCameraToTable(t){if(this.isCameraAnimating){console.log("Camera is already animating");return}this.isCameraAnimating=!0;let e=new Ki().setFromObject(t);console.log("Bounding Box:",e);let i=e.getCenter(new te);console.log("Target Position:",i);let r=this.activeViewCamera.object,o=new te(0,6,0),s=i.clone().add(o);console.log("Final Position:",s);let a=r.position.clone(),l=r.quaternion.clone(),u=new te(0,1,0),f=new qr().setFromRotationMatrix(new an().lookAt(s,i,u)),h=r.zoom,m=1,p=1500,y=Date.now(),C=b=>b<.5?2*b*b:-1+(4-2*b)*b,x=()=>{let b=Date.now()-y,P=Math.min(b/p,1),E=C(P);if(r.position.lerpVectors(a,s,E),r.quaternion.slerpQuaternions(l,f,E),r.zoom=kr.lerp(h,m,E),r.updateProjectionMatrix(),this.spotlight){let D=new te(0,10,0),L=s.clone().add(D);this.spotlight.position.lerpVectors(a.clone().add(D),L,E),this.spotlight.target.position.copy(i),this.spotlight.target.updateMatrixWorld()}P<1?requestAnimationFrame(x):this.isCameraAnimating=!1};x()}buildHelpPanel(){let t=document.getElementById("help-table"),e=0;for(let i in this.player.keyCodes){for(;t.rows[e].cells.length<2;)e++;t.rows[e++].cells[0].innerHTML=this.player.keyCodes[i]}t.rows[e].cells[0].innerHTML=this.maze.credits+"<br>"+this.player.credits}displayPanel(){this.view.options.selectedIndex=["fixed","first-person","third-person","top"].indexOf(this.activeViewCamera.view),this.projection.options.selectedIndex=["perspective","orthographic"].indexOf(this.activeViewCamera.projection),this.horizontal.value=this.activeViewCamera.orientation.h.toFixed(0),this.vertical.value=this.activeViewCamera.orientation.v.toFixed(0),this.distance.value=this.activeViewCamera.distance.toFixed(1),this.zoom.value=this.activeViewCamera.zoom.toFixed(1)}setActiveViewCamera(t){this.activeViewCamera=t,this.horizontal.min=this.activeViewCamera.orientationMin.h.toFixed(0),this.horizontal.max=this.activeViewCamera.orientationMax.h.toFixed(0),this.vertical.min=this.activeViewCamera.orientationMin.v.toFixed(0),this.vertical.max=this.activeViewCamera.orientationMax.v.toFixed(0),this.distance.min=this.activeViewCamera.distanceMin.toFixed(1),this.distance.max=this.activeViewCamera.distanceMax.toFixed(1),this.zoom.min=this.activeViewCamera.zoomMin.toFixed(1),this.zoom.max=this.activeViewCamera.zoomMax.toFixed(1),this.displayPanel()}arrangeViewports(t){this.fixedViewCamera.setViewport(t),this.firstPersonViewCamera.setViewport(t),this.thirdPersonViewCamera.setViewport(t),this.topViewCamera.setViewport(t)}pointerIsOverViewport(t,e){return t.x>=e.x&&t.x<e.x+e.width&&t.y>=e.y&&t.y<e.y+e.height}getPointedViewport(t){let e;if(this.miniMapCheckBox.checked&&(e=this.miniMapCamera.getViewport(),this.pointerIsOverViewport(t,e)))return this.miniMapCamera.view;let i;this.multipleViewsCheckBox.checked?i=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:i=[this.activeViewCamera];for(let r of i)if(e=r.getViewport(),this.pointerIsOverViewport(t,e))return r.view;return"none"}setViewMode(t){this.multipleViewsCheckBox.checked=t,this.arrangeViewports(this.multipleViewsCheckBox.checked)}setUserInterfaceVisibility(t){this.userInterfaceCheckBox.checked=t,this.viewsPanel.style.visibility=t?"visible":"hidden",this.subwindowsPanel.style.visibility=t?"visible":"hidden",this.userInterface.setVisibility(t)}setMiniMapVisibility(t){this.miniMapCheckBox.checked=t}setHelpVisibility(t){this.helpCheckBox.checked=t,this.helpPanel.style.visibility=t?"visible":"hidden"}setStatisticsVisibility(t){this.statisticsCheckBox.checked=t,this.statistics.dom.style.visibility=t?"visible":"hidden"}windowResize(){this.fixedViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.firstPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.thirdPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.topViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.miniMapCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight)}keyChange(t,e){["horizontal","vertical","distance","zoom"].indexOf(t.target.id)<0&&t.target.blur(),["Space","ArrowLeft","ArrowRight","ArrowDown","ArrowUp"].includes(t.code)&&(t.preventDefault(),e?this.activeKeys.has(t.code)||(this.activeKeys.add(t.code),(t.code==="ArrowUp"||t.code==="ArrowDown")&&this.player.moveSound.play()):(this.activeKeys.delete(t.code),(this.activeKeys.size===0||t.code==="ArrowUp"||t.code==="ArrowDown")&&(this.player.moveSound.pause(),this.player.moveSound.currentTime=0)),t.code==this.player.keyCodes.fixedView&&e?this.setActiveViewCamera(this.fixedViewCamera):t.code==this.player.keyCodes.firstPersonView&&e?this.setActiveViewCamera(this.firstPersonViewCamera):t.code==this.player.keyCodes.thirdPersonView&&e?this.setActiveViewCamera(this.thirdPersonViewCamera):t.code==this.player.keyCodes.topView&&e&&this.setActiveViewCamera(this.topViewCamera),t.code==this.player.keyCodes.viewMode&&e&&this.setViewMode(!this.multipleViewsCheckBox.checked),t.code==this.player.keyCodes.miniMap&&e&&this.setMiniMapVisibility(!this.miniMapCheckBox.checked),t.code==this.player.keyCodes.help&&e&&this.setHelpVisibility(!this.helpCheckBox.checked),t.code==this.player.keyCodes.statistics&&e&&this.setStatisticsVisibility(!this.statisticsCheckBox.checked),t.code==this.player.keyCodes.run&&(this.player.keyStates.run=e),t.code==this.player.keyCodes.left?this.player.keyStates.left=e:t.code==this.player.keyCodes.right&&(this.player.keyStates.right=e),t.code==this.player.keyCodes.backward?this.player.keyStates.backward=e:t.code==this.player.keyCodes.forward&&(this.player.keyStates.forward=e),t.code==this.player.keyCodes.jump?this.player.keyStates.jump=e:t.code==this.player.keyCodes.yes?this.player.keyStates.yes=e:t.code==this.player.keyCodes.no?this.player.keyStates.no=e:t.code==this.player.keyCodes.wave?this.player.keyStates.wave=e:t.code==this.player.keyCodes.punch?this.player.keyStates.punch=e:t.code==this.player.keyCodes.thumbsUp&&(this.player.keyStates.thumbsUp=e))}mouseDown(t){if(t.buttons==2){this.isRotating=!0,this.mousePosition=new dn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none")if(e=="mini-map")t.buttons==1&&(this.dragMiniMap=!0);else{let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i,this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i]),t.buttons==1?this.changeCameraDistance=!0:this.changeCameraOrientation=!0}this.isRotating==!0&&this.roomInfoHandler.deselectRoom()}}mouseMove(t){if((t.buttons==1||t.buttons==2)&&(this.changeCameraDistance||this.changeCameraOrientation||this.dragMiniMap)){let e=new dn(t.clientX,window.innerHeight-t.clientY-1),i=e.clone().sub(this.mousePosition);if(this.mousePosition=e,t.buttons==1){if(this.changeCameraDistance)this.activeViewCamera.updateDistance(-.05*(i.x+i.y)),this.displayPanel();else if(this.dragMiniMap){let r=Math.min(window.innerWidth,window.innerHeight),o=this.miniMapCamera.viewport.width*r,s=this.miniMapCamera.viewport.height*r;this.miniMapCamera.viewport.x+=i.x/(window.innerWidth-o),this.miniMapCamera.viewport.y+=i.y/(window.innerHeight-s)}}else this.changeCameraOrientation&&(this.activeViewCamera.updateOrientation(i.multiply(new dn(-.5,.5))),this.displayPanel())}}mouseUp(t){this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1}mouseWheel(t){t.preventDefault(),this.mousePosition=new dn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none"&&e!="mini-map"){let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i;let r=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i];r.updateZoom(-.001*t.deltaY),this.setActiveViewCamera(r)}}contextMenu(t){t.preventDefault()}elementChange(t){switch(t.target.id){case"view":this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][this.view.options.selectedIndex]);break;case"projection":this.activeViewCamera.setActiveProjection(["perspective","orthographic"][this.projection.options.selectedIndex]),this.displayPanel();break;case"horizontal":case"vertical":case"distance":case"zoom":if(t.target.checkValidity())switch(t.target.id){case"horizontal":case"vertical":this.activeViewCamera.setOrientation(new Kr(this.horizontal.value,this.vertical.value));break;case"distance":this.activeViewCamera.setDistance(this.distance.value);break;case"zoom":this.activeViewCamera.setZoom(this.zoom.value);break}break;case"multiple-views":this.setViewMode(t.target.checked);break;case"user-interface":this.setUserInterfaceVisibility(t.target.checked);break;case"help":this.setHelpVisibility(t.target.checked);break;case"statistics":this.setStatisticsVisibility(t.target.checked);break}}buttonClick(t){switch(t.target.id){case"reset":this.activeViewCamera.initialize();break;case"reset-all":this.fixedViewCamera.initialize(),this.firstPersonViewCamera.initialize(),this.thirdPersonViewCamera.initialize(),this.topViewCamera.initialize();break}this.displayPanel()}finalSequence(){this.fog.enabled=!1,this.thirdPersonViewCamera.setOrientation(new Kr(-180,this.thirdPersonViewCamera.initialOrientation.v)),this.thirdPersonViewCamera.setDistance(this.thirdPersonViewCamera.initialDistance),this.thirdPersonViewCamera.setZoom(2),this.setActiveViewCamera(this.thirdPersonViewCamera),this.setViewMode(!1),this.animations.fadeToAction("Dance",.2)}collision(t){let e=this.maze.distanceToWestWall(t)<this.player.radius||this.maze.distanceToEastWall(t)<this.player.radius||this.maze.distanceToNorthWall(t)<this.player.radius||this.maze.distanceToSouthWall(t)<this.player.radius,i=this.maze.distanceToDoor(t)<this.player.radius;return e||i}distanceToRoomBoundaryAndPlaySound(t){let i=!1;{let r=this.maze.distanceToWestWallSound(t),o=this.maze.distanceToEastWallSound(t),s=this.maze.distanceToNorthWallSound(t),a=this.maze.distanceToSouthWallSound(t),l=this.maze.distanceToDoor(t);Math.min(r,o,s,a,l)<=20?(this.door.hearthSound.paused&&(this.door.hearthSound.play(),this.door.hearthSound.volume=.1),i=!0):this.door.hearthSound.paused||this.door.hearthSound.pause()}return i}update(){if(!this.gameRunning)this.maze.loaded&&this.player.loaded&&(this.scene3D.add(this.maze.object),this.scene3D.add(this.player.object),this.scene3D.add(this.lights.object),this.clock=new Gy,this.animations=new ux(this.player.object,this.player.animations),this.player.position=this.maze.initialPosition.clone(),this.player.direction=this.maze.initialDirection,this.userInterface=new fx(this.scene3D,this.renderer,this.lights,this.fog,this.player.object,this.animations),this.gameRunning=!0);else{let t=this.clock.getDelta();if(this.animations.update(t),!this.animations.actionInProgress){let r=this.player.walkingSpeed*t,o=this.player.turningSpeed*t;this.player.keyStates.run&&(r*=this.player.runningFactor,o*=this.player.runningFactor),this.player.keyStates.left?this.player.direction+=o:this.player.keyStates.right&&(this.player.direction-=o);let s=kr.degToRad(this.player.direction);if(this.player.keyStates.backward){let a=new te(-r*Math.sin(s)+this.player.position.x,this.player.position.y,-r*Math.cos(s)+this.player.position.z);this.collision(a)?(this.animations.fadeToAction("Death",.2),this.player.moveSound.pause(),this.player.hitWallSound.play()):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else if(this.player.keyStates.forward){let a=new te(r*Math.sin(s)+this.player.position.x,this.player.position.y,r*Math.cos(s)+this.player.position.z);this.collision(a)?(this.animations.fadeToAction("Death",.2),this.player.moveSound.pause(),this.player.hitWallSound.play()):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else this.player.keyStates.jump?this.animations.fadeToAction("Jump",.2):this.player.keyStates.yes?this.animations.fadeToAction("Yes",.2):this.player.keyStates.no?this.animations.fadeToAction("No",.2):this.player.keyStates.wave?this.animations.fadeToAction("Wave",.2):this.player.keyStates.punch?this.animations.fadeToAction("Punch",.2):this.player.keyStates.thumbsUp?this.animations.fadeToAction("ThumbsUp",.2):this.animations.fadeToAction("Idle",this.animations.previousAction=="Death"?.6:.2);this.player.object.position.copy(this.player.position),this.player.object.rotation.y=s-this.player.initialDirection}this.distanceToRoomBoundaryAndPlaySound(this.player.position),this.firstPersonViewCamera.playerDirection=this.player.direction,this.thirdPersonViewCamera.playerDirection=this.player.direction,this.topViewCamera.playerDirection=this.player.direction;let e=new te(this.player.position.x,this.player.position.y+this.player.eyeHeight,this.player.position.z);this.firstPersonViewCamera.setTarget(e),this.thirdPersonViewCamera.setTarget(e),this.topViewCamera.setTarget(e),this.statistics.update(),this.renderer.clear(),this.fog.enabled?this.scene3D.fog=this.fog.object:this.scene3D.fog=null;let i;this.multipleViewsCheckBox.checked?i=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:i=[this.activeViewCamera];for(let r of i){this.player.object.visible=r!=this.firstPersonViewCamera;let o=r.getViewport();this.renderer.setViewport(o.x,o.y,o.width,o.height),this.renderer.render(this.scene3D,r.object),this.renderer.render(this.scene2D,this.camera2D),this.renderer.clearDepth()}if(this.miniMapCheckBox.checked){this.scene3D.fog=null,this.player.object.visible=!0;let r=this.miniMapCamera.getViewport();this.renderer.setViewport(r.x,r.y,r.width,r.height),this.renderer.render(this.scene3D,this.miniMapCamera.object),this.renderer.render(this.scene2D,this.camera2D)}}}dispose(){this.renderer&&this.renderer.dispose(),this.scene&&this.scene.children.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(e=>e.dispose()):t.material.dispose()),this.scene.remove(t)})}};var mx=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/SurgeryRoom/"}getRoomsAvailabilityByDate(e){let r=new Date(e).toISOString().split("T")[0];console.log(r);let o=new ms().set("date",r);return this.http.get(this.apiUrl,{params:o})}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xae(n,t){if(n&1&&(g(0,"tr")(1,"td",35)(2,"p"),M(3),_()()()),n&2){let e=ce();A(3),Ye(e.error)}}var PV=(()=>{class n{constructor(e,i){this.platformId=e,this.hospital3dService=i,this.animationFrameId=null,this.selectedDate=new Date,this.firstRooms=[{roomNumber:"101",type:"Conference",capacity:20,equipment:["Projector","Whiteboard"],isOccupied:!1},{roomNumber:"102",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0},{roomNumber:"103",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!1},{roomNumber:"104",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0}],this.rooms=[],this.loading=!1,this.error=null,this.animate=()=>{of(this.platformId)&&(this.animationFrameId=requestAnimationFrame(this.animate),this.thumbRaiser.update())}}initialize(e=this.firstRooms){this.disposeThumbRaiser(),this.thumbRaiser=new px({},{scale:new te(1,.5,1)},{},{ambientLight:{intensity:.5},pointLight1:{intensity:50,distance:20,position:new te(-3.5,10,2.5)},pointLight2:{intensity:50,distance:20,position:new te(3.5,10,-2.5)},directionalLight:{intensity:.5,position:new te(0,10,0)}},{},{view:"fixed",multipleViewsViewport:new pn(0,1,.45,.5)},{view:"first-person",multipleViewsViewport:new pn(1,1,.55,.5),initialOrientation:new Kr(0,-10),initialDistance:2,distanceMin:1,distanceMax:4},{view:"third-person",multipleViewsViewport:new pn(0,0,.55,.5),initialOrientation:new Kr(0,-20),initialDistance:2,distanceMin:1,distanceMax:4},{view:"top",multipleViewsViewport:new pn(1,0,.45,.5),initialOrientation:new Kr(0,-90),initialDistance:4,distanceMin:1,distanceMax:16},{view:"mini-map",multipleViewsViewport:new pn(.99,.02,.3,.3),initialOrientation:new Kr(180,-90),initialZoom:.64},{},{},{},{},{},{},{},{},{rooms:e}),(!this.thumbRaiser.renderer||!this.thumbRaiser.update)&&console.error("ThumbRaiser properties are not properly initialized");let i=document.getElementById("scene-container");i&&(i.innerHTML="",i.appendChild(this.thumbRaiser.renderer.domElement))}ngOnInit(){of(this.platformId)&&(this.initialize(),this.animate())}ngAfterViewInit(){}ngOnDestroy(){this.disposeThumbRaiser()}disposeThumbRaiser(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.thumbRaiser&&(this.thumbRaiser.dispose(),this.thumbRaiser=null)}checkOperations(){this.selectedDate?(this.loading=!0,this.error=null,this.hospital3dService.getRoomsAvailabilityByDate(this.selectedDate).subscribe(e=>{console.log("Rooms fetched:",e),this.rooms=e;let i=this.rooms;this.update3DVisualization(i),this.loading=!1},e=>{console.error("Error fetching rooms",e),this.error="Error fetching rooms",this.loading=!1})):this.error="No date selected"}onDateChange(e){console.log("Date changed:",this.selectedDate)}update3DVisualization(e){this.disposeThumbRaiser(),this.initialize(e),this.animate()}static{this.\u0275fac=function(i){return new(i||n)($(Br),$(mx))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-hospital3d"]],standalone:!0,features:[zi([mx]),Je],decls:186,vars:2,consts:[["id","parent"],["id","views-panel"],[1,"views"],["id","view"],["value","fixed"],["value","first"],["value","third"],["value","top"],["type","number","id","horizontal","required",""],["type","number","id","vertical","required",""],["type","button","id","reset","value","Reset view"],["id","projection"],["value","perspective"],["value","orthographic"],["type","number","id","distance","required",""],["type","number","id","zoom","required",""],["type","button","id","reset-all","value","Reset all views"],["colspan","4",2,"text-align","center"],["for","date-picker",2,"margin-right","10px"],["type","datetime-local","id","date-picker",2,"margin-right","10px",3,"ngModelChange","change","ngModel"],[2,"padding","5px 15px",3,"click"],[4,"ngIf"],["id","scene-container"],["id","help-panel"],["id","help-table",1,"help"],["colspan","2",2,"font-size","3.0vmin"],["colspan","2",2,"text-align","left"],["colspan","2",2,"text-align","right"],["id","subwindows-panel"],[1,"subwindows"],["type","checkbox","id","multiple-views"],["type","checkbox","id","user-interface"],["type","checkbox","id","mini-map"],["type","checkbox","id","help"],["type","checkbox","id","statistics"],["colspan","4",2,"text-align","center","color","red"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr")(5,"td")(6,"label"),M(7,"View:"),_(),g(8,"select",3)(9,"option",4),M(10,"Fixed"),_(),g(11,"option",5),M(12,"First-person"),_(),g(13,"option",6),M(14,"Third-person"),_(),g(15,"option",7),M(16,"Top"),_()()(),g(17,"td")(18,"label"),M(19,"Orientation (h):"),_(),me(20,"input",8),_(),g(21,"td")(22,"label"),M(23,"Orientation (v):"),_(),me(24,"input",9),_(),g(25,"td"),me(26,"input",10),_()(),g(27,"tr")(28,"td")(29,"label"),M(30,"Projection:"),_(),g(31,"select",11)(32,"option",12),M(33,"Perspective"),_(),g(34,"option",13),M(35,"Orthographic"),_()()(),g(36,"td")(37,"label"),M(38,"Distance:"),_(),me(39,"input",14),_(),g(40,"td")(41,"label"),M(42,"Zoom:"),_(),me(43,"input",15),_(),g(44,"td"),me(45,"input",16),_()(),g(46,"tr")(47,"td",17)(48,"label",18),M(49,"Select a Date:"),_(),g(50,"input",19),Ze("ngModelChange",function(s){return Ke(r.selectedDate,s)||(r.selectedDate=s),s}),le("change",function(s){return r.onDateChange(s)}),_(),g(51,"button",20),le("click",function(){return r.checkOperations()}),M(52,"Check Operations"),_()()(),Te(53,xae,4,1,"tr",21),_()()(),me(54,"div",22),g(55,"div",23)(56,"table",24)(57,"tbody")(58,"tr")(59,"th",25),M(60," Help "),_()(),g(61,"tr")(62,"th",26),M(63,"Select active view"),_()(),g(64,"tr"),me(65,"td"),g(66,"td"),M(67,"Fixed view"),_()(),g(68,"tr"),me(69,"td"),g(70,"td"),M(71,"First-person view"),_()(),g(72,"tr"),me(73,"td"),g(74,"td"),M(75,"Third-person view"),_()(),g(76,"tr"),me(77,"td"),g(78,"td"),M(79,"Top view"),_()(),g(80,"tr")(81,"th",26),M(82,"Toggle view mode"),_()(),g(83,"tr"),me(84,"td"),g(85,"td"),M(86,"Single-view mode / multiple-views mode"),_()(),g(87,"tr")(88,"th",26),M(89,"Display / hide subwindows"),_()(),g(90,"tr"),me(91,"td"),g(92,"td"),M(93,"User interface"),_()(),g(94,"tr"),me(95,"td"),g(96,"td"),M(97,"Mini-map"),_()(),g(98,"tr"),me(99,"td"),g(100,"td"),M(101,"Help"),_()(),g(102,"tr"),me(103,"td"),g(104,"td"),M(105,"Statistics"),_()(),g(106,"tr")(107,"th",26),M(108,"Move character"),_()(),g(109,"tr"),me(110,"td"),g(111,"td"),M(112,"Walk / run (modifier key)"),_()(),g(113,"tr"),me(114,"td"),g(115,"td"),M(116,"Turn left slowly / quickly"),_()(),g(117,"tr"),me(118,"td"),g(119,"td"),M(120,"Turn right slowly / quickly"),_()(),g(121,"tr"),me(122,"td"),g(123,"td"),M(124,"Walk / run backward"),_()(),g(125,"tr"),me(126,"td"),g(127,"td"),M(128,"Walk / run forward"),_()(),g(129,"tr")(130,"th",26),M(131,"Emote character"),_()(),g(132,"tr"),me(133,"td"),g(134,"td"),M(135,"Jump"),_()(),g(136,"tr"),me(137,"td"),g(138,"td"),M(139,"Yes"),_()(),g(140,"tr"),me(141,"td"),g(142,"td"),M(143,"No"),_()(),g(144,"tr"),me(145,"td"),g(146,"td"),M(147,"Wave"),_()(),g(148,"tr"),me(149,"td"),g(150,"td"),M(151,"Punch"),_()(),g(152,"tr"),me(153,"td"),g(154,"td"),M(155,"Thumbs up"),_()(),g(156,"tr"),me(157,"td",27),_()()()(),g(158,"div",28)(159,"table",29)(160,"tbody")(161,"tr")(162,"td")(163,"label"),M(164,"Multiple views:"),_(),me(165,"input",30),_()(),g(166,"tr")(167,"td")(168,"label"),M(169,"User interface:"),_(),me(170,"input",31),_()(),g(171,"tr")(172,"td")(173,"label"),M(174,"Mini-map:"),_(),me(175,"input",32),_()(),g(176,"tr")(177,"td")(178,"label"),M(179,"Help:"),_(),me(180,"input",33),_()(),g(181,"tr")(182,"td")(183,"label"),M(184,"Statistics:"),_(),me(185,"input",34),_()()()()()()),i&2&&(A(50),Xe("ngModel",r.selectedDate),A(3),X("ngIf",r.error))},dependencies:[Dt,Ri,ki,kt,Ft,Tn,vt,Zt],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;background-color:#f0f0f0}canvas[_ngcontent-%COMP%]{display:block;height:100vh;width:100vw;pointer-events:auto}#scene-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;overflow:hidden;background-color:#000;pointer-events:auto}#parent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}#views-panel[_ngcontent-%COMP%]{position:absolute;top:1vh;left:50%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;text-align:center;font-size:1.5vmin;color:#fff;pointer-events:auto}#help-panel[_ngcontent-%COMP%]{position:absolute;right:1vw;top:1vh;z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}#subwindows-panel[_ngcontent-%COMP%]{position:absolute;bottom:1vh;left:5%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}.left-align[_ngcontent-%COMP%]{text-align:left}"]})}}return n})();var DV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}deleteAccount(e){return this.http.delete(`${this.apiUrl}/DeleteUser/${e}`,{observe:"response"}).pipe(_n(i=>(console.error("Error deleting account:",i),In(i))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var OV=(()=>{class n{constructor(e,i){this.deleteUserService=e,this.router=i}ngOnInit(){}onDelete(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.deleteUserService.deleteAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully deleted.")},r=>{console.error("Account deletion failed",r),alert("Account deletion failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account deletion failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account deletion cancelled.")}static{this.\u0275fac=function(i){return new(i||n)($(DV),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-delete-user"]],standalone:!0,features:[Je],decls:8,vars:0,consts:[[1,"delete-user-container"],[1,"delete-user-box"],[1,"delete-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"p"),M(3,"Are you sure you want to delete your account? This action is irreversible."),_(),g(4,"button",2),le("click",function(){return r.onDelete()}),M(5,"Delete"),_(),g(6,"button",3),le("click",function(){return r.onCancel()}),M(7,"Cancel"),_()()())},styles:[".delete-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.delete-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.delete-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.delete-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function Cae(n,t){if(n&1&&(g(0,"div",9),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}var AV=(()=>{class n{constructor(e){this.staffService=e,this.close=new yt,this.username="",this.errorMessage=""}onModalClick(e){e.stopPropagation()}ngOnInit(){console.log("ActiveModalComponent initialized",this.profile)}closeModal(){this.close.emit(!1)}onSubmit(){if(this.username===""){this.errorMessage="Username is required";return}let e={email:this.profile.email,username:this.username,role:this.profile.staffType,staffId:this.profile.id};this.staffService.activateStaff(e).subscribe({next:i=>{console.log("User activated:",i),this.errorMessage="",this.username="",this.close.emit(!0)},error:i=>{if(console.error("Error Activating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Activing staff failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-active-modal"]],inputs:{profile:"profile"},outputs:{close:"close"},standalone:!0,features:[Je],decls:13,vars:2,consts:[[1,"modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","username","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-submitUser"],[1,"error-message"]],template:function(i,r){i&1&&(g(0,"div",0),le("click",function(){return r.closeModal()}),g(1,"div",1),le("click",function(s){return r.onModalClick(s)}),g(2,"div",2)(3,"h2"),M(4,"Activate User"),_()(),g(5,"form",3),le("ngSubmit",function(){return r.onSubmit()}),g(6,"div",4)(7,"label",5),M(8,"Username"),_(),g(9,"input",6),Ze("ngModelChange",function(s){return Ke(r.username,s)||(r.username=s),s}),_()(),Te(10,Cae,2,1,"div",7),g(11,"button",8),M(12,"Submit"),_()()()()),i&2&&(A(9),Xe("ngModel",r.username),A(),X("ngIf",r.errorMessage))},dependencies:[Dt,Yt,kt,Ft,qt,hn,Tn,qn,vt,Zt,nr,Nt],styles:[".modal[_ngcontent-%COMP%]{display:block;position:fixed;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal-content[_ngcontent-%COMP%]{background-color:#fff;margin:15% auto;padding:20px;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px;align-items:center;font-family:Poppins,sans-serif}.modal-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin:0}.modal-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-top:.5rem;border-radius:4px}.modal-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;text-align:center;font-size:small;margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;transition:background-color .5s}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:focus{outline:none}"]})}}return n})();function Mae(n,t){if(n&1){let e=dt();g(0,"app-active-modal",25),le("close",function(r){Oe(e);let o=ce();return Ae(o.closeModal(r))}),_()}if(n&2){let e=ce();X("profile",e.modalProfile)}}function wae(n,t){if(n&1&&(g(0,"option",26),M(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),xt(" ",e.specOption," ")}}function Eae(n,t){if(n&1&&(g(0,"div",27),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}function Sae(n,t){if(n&1){let e=dt();g(0,"button",32),le("click",function(){Oe(e);let r=ce().$implicit,o=ce();return Ae(o.openModal(r))}),M(1,"Activate"),_()}}function Tae(n,t){if(n&1){let e=dt();g(0,"button",33),le("click",function(){Oe(e);let r=ce().$implicit,o=ce();return Ae(o.deactivateStaff(r.id))}),M(1,"Deactivate"),_()}}function Pae(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td")(6,"button",28),M(7,"Edit"),_(),Te(8,Sae,2,0,"button",29)(9,Tae,2,0,"button",30),g(10,"button",31),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.viewStaffDetails(r))}),M(11,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.fullName),A(2),Ye(e.email),A(2),Mu("routerLink","/update-staff/",e.id,""),A(2),X("ngIf",!e.isActive),A(),X("ngIf",e.isActive)}}function Dae(n,t){if(n&1){let e=dt();g(0,"div",34)(1,"div",35)(2,"h3"),M(3,"Staff Details"),_(),g(4,"button",36),le("click",function(){Oe(e);let r=ce();return Ae(r.clearSelectedStaff())}),me(5,"img",37),_(),g(6,"table",38)(7,"tbody")(8,"tr")(9,"th"),M(10,"License Number"),_(),g(11,"td"),M(12),_()(),g(13,"tr")(14,"th"),M(15,"First Name"),_(),g(16,"td"),M(17),_()(),g(18,"tr")(19,"th"),M(20,"Last Name"),_(),g(21,"td"),M(22),_()(),g(23,"tr")(24,"th"),M(25,"Full Name"),_(),g(26,"td"),M(27),_()(),g(28,"tr")(29,"th"),M(30,"Phone Number"),_(),g(31,"td"),M(32),_()(),g(33,"tr")(34,"th"),M(35,"Email"),_(),g(36,"td"),M(37),_()(),g(38,"tr")(39,"th"),M(40,"Specialization"),_(),g(41,"td"),M(42),_()(),g(43,"tr")(44,"th"),M(45,"Staff Type"),_(),g(46,"td"),M(47),_()(),g(48,"tr")(49,"th"),M(50,"Is Active"),_(),g(51,"td"),M(52),_()()()(),g(53,"button",39),M(54,"View Availability"),_()()()}if(n&2){let e=ce();A(12),Ye(e.selectedStaff.licenseNumber),A(5),Ye(e.selectedStaff.firstName),A(5),Ye(e.selectedStaff.lastName),A(5),Ye(e.selectedStaff.fullName),A(5),Ye(e.selectedStaff.phoneNumber),A(5),Ye(e.selectedStaff.email),A(5),Ye(e.selectedStaff.specializationName),A(5),Ye(e.selectedStaff.staffType),A(5),Ye(e.selectedStaff.isActive?"Yes":"No"),A(),Mu("routerLink","/view-availability/",e.selectedStaff.id,"")}}var IV=(()=>{class n{constructor(e,i){this.fb=e,this.staffService=i,this.isModalOpen=!1,this.staffProfiles=[],this.errorMessage="",this.specializations=[],this.selectedStaff=null,this.showAvailabilityModal=!1,this.availabilitySlots=[],this.username="",this.modalProfile=null,this.searchForm=this.fb.group({firstName:new Vn("",[Gt.required]),lastName:new Vn("",[Gt.required]),fullName:new Vn("",[Gt.required]),email:new Vn("",[Gt.required,Gt.email]),specializationName:new Vn("",[Gt.required])})}ngOnInit(){this.loadStaffProfiles(),this.loadSpecializations()}loadSpecializations(){this.staffService.getSpecialization().subscribe({next:e=>{console.log(`Data specialization:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}clearFilters(){this.searchForm.reset({firstName:"",lastName:"",fullName:"",email:"",specializationName:""}),this.loadStaffProfiles(),this.errorMessage=""}onSearch(){let e={firstName:this.searchForm.value.firstName?.trim()||"",lastName:this.searchForm.value.lastName?.trim()||"",fullName:this.searchForm.value.fullName?.trim()||"",email:this.searchForm.value.email?.trim()||"",specializationName:this.searchForm.value.specializationName?.trim()||""};if(Object.values(e).every(i=>!i)){this.errorMessage="At least one search parameter is required.";return}if(e.email!==""&&this.searchForm.get("email")?.invalid){this.errorMessage="Invalid email address";return}console.log("Search criteria",e),this.staffService.searchStaffProfiles(e).subscribe({next:i=>{this.errorMessage="",Array.isArray(i)?this.staffProfiles=i:this.staffProfiles=[]},error:i=>{if(console.error("Error search staff",i),this.staffProfiles=[],i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Search Staff - "+i.error)}})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}viewStaffDetails(e){e.specializationName=this.getSpecializationName(e.specializationId),this.selectedStaff=e}clearSelectedStaff(){this.selectedStaff=null}deactivateStaff(e){this.staffService.deactivateStaff(e).subscribe({next:()=>{console.log("Staff Deactivated Successfully"),this.errorMessage="",this.clearFilters()},error:i=>{if(console.error("Error deactivating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Deactive staff failed - "+i.error)}})}openModal(e){this.modalProfile=e,this.isModalOpen=!0}closeModal(e){e&&this.clearFilters(),this.modalProfile=null,this.isModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)($(Sa),$(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-search-staffs"]],inputs:{profile:"profile"},standalone:!0,features:[Je],decls:45,vars:6,consts:[[1,"manage-container"],[3,"profile","close",4,"ngIf"],[1,"screens-container"],[1,"screen"],["type","button","routerLink","/panel-admin",1,"btn-back"],[1,"manage-title"],[1,"content-container"],[1,"filter-container"],[1,"filter-form",3,"ngSubmit","formGroup"],["type","text","name","firstName","placeholder","First Name","formControlName","firstName"],["type","text","name","lastName","placeholder","Last Name","formControlName","lastName"],["type","text","name","fullName","placeholder","Full Name","formControlName","fullName"],["type","email","name","email","placeholder","Email","formControlName","email"],["name","specialization","formControlName","specializationName","title","Specialization"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-filter"],["type","reset",1,"btn","btn-clear",3,"click"],[1,"operation"],["type","button","routerLink","/create-staff",1,"btn","btn-create"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[3,"close","profile"],[3,"value"],[1,"error-message"],["type","button",1,"btn","btn-update",3,"routerLink"],["type","button","class","btn btn-activate",3,"click",4,"ngIf"],["type","button","class","btn btn-deactive",3,"click",4,"ngIf"],["type","button",1,"btn","btn-view",3,"click"],["type","button",1,"btn","btn-activate",3,"click"],["type","button",1,"btn","btn-deactive",3,"click"],[1,"details-screen"],[1,"staff-details"],["type","button",3,"click"],["src","fechar.png","alt","Close"],[1,"table","table-bordered"],["type","button",1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",0),Te(1,Mae,1,1,"app-active-modal",1),me(2,"app-sidebar"),g(3,"div",2)(4,"div",3)(5,"button",4),M(6," Back to DashBoard "),_(),g(7,"h2",5),M(8,"Search Staff Profiles"),_(),g(9,"div",6)(10,"div",7)(11,"form",8),le("ngSubmit",function(){return r.onSearch()}),g(12,"p"),M(13," Filter Fields"),_(),me(14,"input",9)(15,"input",10)(16,"input",11)(17,"input",12),g(18,"select",13)(19,"option",14),M(20,"Select Specialization"),_(),Te(21,wae,2,2,"option",15),_(),Te(22,Eae,2,1,"div",16),g(23,"button",17),M(24,"Search"),_(),g(25,"button",18),le("click",function(){return r.clearFilters()}),M(26," Clear Filters "),_()(),g(27,"div",19)(28,"p"),M(29," Others operations"),_(),g(30,"button",20),M(31," Create Staff "),_()()(),g(32,"div",21)(33,"table",22)(34,"thead")(35,"tr")(36,"th"),M(37,"Full Name"),_(),g(38,"th"),M(39,"Email"),_(),g(40,"th"),M(41,"Actions"),_()()(),g(42,"tbody"),Te(43,Pae,12,6,"tr",23),_()()()()(),Te(44,Dae,55,11,"div",24),_()()),i&2&&(A(),X("ngIf",r.isModalOpen),A(10),X("formGroup",r.searchForm),A(10),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage),A(21),X("ngForOf",r.staffProfiles),A(),X("ngIf",r.selectedStaff))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,vt,Mn,Zt,Vt,AV,nr,wr,Rr,Nt,Wt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:40px;margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:10px;width:100%;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:250px;overflow:auto;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #ddd;border-radius:8px;padding:10px;background-color:#fff;box-shadow:0 0 10px #0000001a;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center;font-weight:700;margin:0;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{margin-right:5px;background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]{margin-right:5px;background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{margin-top:1rem;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]{margin-right:5px;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;word-wrap:break-word;vertical-align:middle;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 5px;word-wrap:break-word;vertical-align:middle}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:15px;right:10px;background:none;border:none;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]{position:relative;background-color:#6c757d;color:#fff;display:flex;justify-content:center;align-items:center;margin:0 auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();var gx=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Patient")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Mt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var RV=(()=>{class n{constructor(e,i){this.panelService=e,this.settingsService=i}ngOnInit(){this.panelService.setPanelId("panel-admin")}static{this.\u0275fac=function(i){return new(i||n)($(Fn),$(Pa))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-panel-admin"]],standalone:!0,features:[Je],decls:19,vars:0,consts:[[1,"dashboard-container"],[1,"dashboard-content"],[1,"header"],[1,"stats"],["routerLink","/operation-types","routerLinkActive","active",1,"box","box1"],["routerLink","/manage-patients","routerLinkActive","active",1,"box","box2"],["routerLink","/search-staffs","routerLinkActive","active",1,"box","box3"],["routerLink","/operation-rooms","routerLinkActive","active",1,"box","box4"],["routerLink","/specializations","routerLinkActive","active",1,"box","box5"],["routerLink","/manage-allergies-and-conditions","routerLinkActive","active",1,"box","box6"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Admin Panel"),_()(),g(6,"div",3)(7,"button",4),M(8," Manage Operation Types "),_(),g(9,"button",5),M(10," Manage Patients "),_(),g(11,"button",6),M(12," Manage Staffs "),_(),g(13,"button",7),M(14," Manage Operation Rooms "),_(),g(15,"button",8),M(16," Manage Specializations "),_(),g(17,"button",9),M(18," Manage Allergies and Conditions "),_()()()())},dependencies:[Vt,Nt,Wt,Ea],styles:['@charset "UTF-8";.dashboard-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.dashboard-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4" "box5 box6";grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.4em;font-weight:700;box-shadow:0 4px 8px #0000001a;width:100%;height:100%}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%], .box5[_ngcontent-%COMP%], .box6[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}.box5[_ngcontent-%COMP%]{grid-area:box5}.box5[_ngcontent-%COMP%]:hover{border-color:#b8b528}.box6[_ngcontent-%COMP%]{grid-area:box6}.box6[_ngcontent-%COMP%]:hover{border-color:#92a8d1}a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;text-decoration:none;color:#fff}']})}}return n})();function Oae(n,t){if(n&1&&(g(0,"option",19),M(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),xt(" ",e.specOption," ")}}function Aae(n,t){if(n&1&&(g(0,"div",20),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}var kV=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.errorMessage="",this.specializations=[],this.staffName="",this.updateStaffForm=this.fb.group({identifier:new Vn("",[Gt.required]),phoneNumber:new Vn("",[Gt.required]),email:new Vn("",[Gt.required,Gt.email]),addAvailabilitySlots:[""],removeAvailabilitySlots:[""],specializationName:new Vn("",[Gt.required])}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadSpecializations().then(()=>{this.loadStaffDetails()})}loadSpecializations(){return new Promise((e,i)=>{this.staffService.getSpecialization().subscribe({next:r=>{console.log(`Data specialization:
`,r),this.specializations=r,e()},error:r=>{console.error("Error loading specializations",r),r.status===401?alert("Unauthorized page access"):alert("Error loading specializations"),i(r)}})})}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.initFromUpdate(e),this.staffName=e.fullName,console.log(`Staff details:
`,e)},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}initFromUpdate(e){let i=e.phoneNumber,r=i.substring(0,4),o=i.substring(4);this.updateStaffForm.patchValue({identifier:r,phoneNumber:o,email:e.email,addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.getSpecializationName(e.specializationId.trim())})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}onSubmit(){if(this.updateStaffForm.invalid){this.errorMessage="",this.updateStaffForm.markAllAsTouched();return}let e={phoneNumber:(this.updateStaffForm.value.identifier?.trim()||"")+(this.updateStaffForm.value.phoneNumber?.trim()||""),email:this.updateStaffForm.value.email?.trim()||"",addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.updateStaffForm.value.specializationName?.trim()||""};console.log(`Update data:
`,e),this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:i=>{if(console.error("Error Updating staff",i),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Sa),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-staff"]],standalone:!0,features:[Je],decls:30,vars:4,consts:[[1,"update-staff-container"],[1,"update-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","specializationName"],["id","specializationName","formControlName","specializationName","title","Specialization","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(me(0,"app-sidebar"),g(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back"),_(),g(6,"h2"),M(7,"Edit Staff "),_(),g(8,"h3"),M(9),_()(),g(10,"form",4),le("ngSubmit",function(){return r.onSubmit()}),g(11,"label",5),M(12,"Phone Number"),_(),g(13,"div",6)(14,"div",7),me(15,"input",8),_(),g(16,"div",9),me(17,"input",10),_()(),g(18,"label",11),M(19,"Email"),_(),me(20,"input",12),g(21,"label",13),M(22,"Specialization"),_(),g(23,"select",14)(24,"option",15),M(25,"Select Specialization"),_(),Te(26,Oae,2,2,"option",16),_(),Te(27,Aae,2,1,"div",17),g(28,"button",18),M(29,"Update"),_()()()()),i&2&&(A(9),Ye(r.staffName),A(),X("formGroup",r.updateStaffForm),A(16),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,hn,vt,Mn,Zt,Vt,nr,wr,Rr,Nt,Wt],styles:[".update-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.update-staff-container[_ngcontent-%COMP%]   .update-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var NV=(()=>{class n{constructor(e,i,r,o){this.router=e,this.panelService=i,this.settingsService=r,this.profileService=o}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile")}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(Fn),$(Pa),$(bc))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-panel"]],standalone:!0,features:[Je],decls:11,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"header"],[1,"stats"],[1,"box","box1"],[1,"box","box2"],[1,"box","box3"],[1,"box","box4"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Patient Panel"),_()(),g(6,"div",3),me(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),_()()())},dependencies:[Vt],styles:['.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.5em;font-weight:700;box-shadow:0 4px 8px #0000001a}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}']})}}return n})();var Ss=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}deletePatient(e){return this.http.delete(`${this.apiUrl}/Patient/${e}`,{observe:"response"}).pipe(_n(i=>(console.error("Error deleting patient:",i),In(i))))}getPatientsWithAdvancedFilter(e,i,r,o,s,a,l,u){let f=new URLSearchParams({firstName:e||"",lastName:i||"",fullName:r||"",dateOfBirth:o||"",medicalRecordNumber:s||"",gender:a||"",email:l||"",phoneNumber:u||""});return this.http.get(`${this.apiUrl}/Patient?${f.toString()}`)}getMyProfile(e){return this.http.get(`${this.apiUrl}/Patient/myProfile/${e}`)}createPatient(e){return this.http.post(`${this.apiUrl}/Patient`,e).pipe(_n(i=>(console.error("Error creating patient:",i),In(i))))}updatePatient(e,i){return this.http.put(`${this.apiUrl}/Patient/${e}`,i,{responseType:"json"}).pipe(_n(r=>(console.error("Error updating patient:",r),In(r))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/allergies"}getAllergies(){return console.log("getAllergies called"),this.http.get(`${this.apiUrl}`).pipe(_n(e=>(console.error("Error fetching allergies:",e),Rt([]))))}createAllergy(e){return this.http.post(`${this.apiUrl}/create`,{allergyCode:e.allergyCode,allergyName:e.allergyName,allergyDescription:e.allergyDescription,allergySymptoms:e.allergySymptoms}).pipe(_n(i=>(console.error("Error creating allergy:",i),In(()=>new Error("Failed to create Allergy. Please try again later.")))))}updateAllergy(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{allergyCode:i.allergyCode,allergyName:i.allergyName,allergyDescription:i.allergyDescription,allergySymptoms:i.allergySymptoms}).pipe(_n(r=>(console.error("Error updating allergy:",r),In(()=>new Error("Failed to update allergy. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/medicalConditions"}getMedicalConditions(){return this.http.get(`${this.apiUrl}/`)}createMedicalConditions(e){return this.http.post(`${this.apiUrl}/create`,{medicalConditionCode:e.medicalConditionCode,medicalConditionName:e.medicalConditionName,medicalConditionDescription:e.medicalConditionDescription,medicalConditionSymptoms:e.medicalConditionSymptoms}).pipe(_n(i=>(console.error("Error creating medical condition:",i),In(()=>new Error("Failed to create medical condition. Please try again later.")))))}updateCondition(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{medicalConditionCode:i.medicalConditionCode,medicalConditionName:i.medicalConditionName,medicalConditionDescription:i.medicalConditionDescription,medicalConditionSymptoms:i.medicalConditionSymptoms}).pipe(_n(r=>(console.error("Error updating medical condition:",r),In(()=>new Error("Failed to update medical condition. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var La=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/patientsMedicalHistory"}getPatientMedicalHistory(e){return this.http.get(`${this.apiUrl}/get/${e}`).pipe(vi(i=>console.log("Medical history response:",i)),_n(i=>(i.status===404&&console.error("Medical history not found:",i),In(()=>i))))}updatePatientMedicalHistory(e,i,r,o,s){let a=`${this.apiUrl}/update/${e}`,l={medicalConditions:r,allergies:i,familyHistory:o,freeText:s};return this.http.put(a,l).pipe(vi(u=>console.log("Update response:",u)),_n(u=>(console.error("Error updating medical history:",u),In(()=>u))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Iae=n=>["/update-patient",n];function Rae(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td")(6,"a",24),M(7,"Edit"),_(),g(8,"a",25),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.deletePatient(r.medicalRecordNumber,r.fullName))}),M(9,"Delete"),_(),g(10,"a",26),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.viewPatientDetails(r.medicalRecordNumber))}),M(11,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.medicalRecordNumber),A(2),Ye(e.fullName),A(2),X("routerLink",ri(3,Iae,e.medicalRecordNumber))}}function kae(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.allergyName," ")}}function Nae(n,t){n&1&&(g(0,"li"),M(1,"No allergies"),_())}function Fae(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.medicalConditionName," ")}}function Lae(n,t){n&1&&(g(0,"li"),M(1,"No medical conditions"),_())}function Uae(n,t){if(n&1){let e=dt();g(0,"div",27)(1,"div",28)(2,"h3"),M(3,"Patient Details"),_(),g(4,"button",29),le("click",function(){Oe(e);let r=ce();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],Ae(r.selectedMedicalHistory=void 0)}),_(),g(5,"table",30)(6,"tbody")(7,"tr")(8,"th"),M(9,"Medical Record Number"),_(),g(10,"td"),M(11),_()(),g(12,"tr")(13,"th"),M(14,"First Name"),_(),g(15,"td"),M(16),_()(),g(17,"tr")(18,"th"),M(19,"Last Name"),_(),g(20,"td"),M(21),_()(),g(22,"tr")(23,"th"),M(24,"Full Name"),_(),g(25,"td"),M(26),_()(),g(27,"tr")(28,"th"),M(29,"Date of Birth"),_(),g(30,"td"),M(31),_()(),g(32,"tr")(33,"th"),M(34,"Gender"),_(),g(35,"td"),M(36),_()(),g(37,"tr")(38,"th"),M(39,"Email"),_(),g(40,"td"),M(41),_()(),g(42,"tr")(43,"th"),M(44,"Phone Number"),_(),g(45,"td"),M(46),_()(),g(47,"tr")(48,"th"),M(49,"Emergency Contact"),_(),g(50,"td"),M(51),_()(),g(52,"tr")(53,"th"),M(54,"Allergies"),_(),g(55,"td")(56,"form",31),le("submit",function(){Oe(e);let r=ce();return Ae(r.searchAllergies())}),g(57,"input",32),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.allergySearch,r)||(o.allergySearch=r),Ae(r)}),_(),g(58,"button",33),M(59,"Search"),_()(),g(60,"ul",34),Te(61,kae,2,1,"li",22)(62,Nae,2,0,"li",35),_()()(),g(63,"tr")(64,"th"),M(65,"Medical Conditions"),_(),g(66,"td")(67,"form",31),le("submit",function(){Oe(e);let r=ce();return Ae(r.searchMedicalConditions())}),g(68,"input",36),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.medicalConditionSearch,r)||(o.medicalConditionSearch=r),Ae(r)}),_(),g(69,"button",33),M(70,"Search"),_()(),g(71,"ul",37),Te(72,Fae,2,1,"li",22)(73,Lae,2,0,"li",35),_()()(),g(74,"tr")(75,"th"),M(76,"Appointment History"),_(),g(77,"td"),M(78),_()(),g(79,"tr")(80,"th"),M(81,"Is Active"),_(),g(82,"td"),M(83),_()()()()()()}if(n&2){let e=ce();A(11),Ye(e.selectedPatient.medicalRecordNumber),A(5),Ye(e.selectedPatient.firstName),A(5),Ye(e.selectedPatient.lastName),A(5),Ye(e.selectedPatient.fullName),A(5),Ye(e.selectedPatient.dateOfBirth),A(5),Ye(e.selectedPatient.gender===1?"Male":"Female"),A(5),Ye(e.selectedPatient.email),A(5),Ye(e.selectedPatient.phoneNumber),A(5),Ye(e.selectedPatient.emergencyContact),A(6),Xe("ngModel",e.allergySearch),A(4),X("ngForOf",e.filteredAllergies),A(),X("ngIf",e.filteredAllergies.length===0),A(6),Xe("ngModel",e.medicalConditionSearch),A(4),X("ngForOf",e.filteredMedicalConditions),A(),X("ngIf",e.filteredMedicalConditions.length===0),A(5),xt(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),A(5),Ye(e.selectedPatient.isActive?"Yes":"No")}}var FV=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[]}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[]},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(Fn),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-manage-patients"]],standalone:!0,features:[Je],decls:41,vars:10,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-patient",1,"btn","btn-create"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[3,"submit"],["type","text","placeholder","Search Allergies","name","allergySearch",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-search"],[1,"allergies-list"],[4,"ngIf"],["type","text","placeholder","Search Medical Conditions","name","medicalConditionSearch",3,"ngModelChange","ngModel"],[1,"conditions-list"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Create Patient "),_(),g(6,"h2",4),M(7,"Patients Manager"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.applyFilters(s)}),g(10,"input",7),Ze("ngModelChange",function(s){return Ke(r.filters.firstName,s)||(r.filters.firstName=s),s}),_(),g(11,"input",8),Ze("ngModelChange",function(s){return Ke(r.filters.lastName,s)||(r.filters.lastName=s),s}),_(),g(12,"input",9),Ze("ngModelChange",function(s){return Ke(r.filters.fullName,s)||(r.filters.fullName=s),s}),_(),g(13,"input",10),Ze("ngModelChange",function(s){return Ke(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),_(),g(14,"input",11),Ze("ngModelChange",function(s){return Ke(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),_(),g(15,"select",12),Ze("ngModelChange",function(s){return Ke(r.filters.gender,s)||(r.filters.gender=s),s}),g(16,"option",13),M(17,"Select Gender"),_(),g(18,"option",14),M(19,"Male"),_(),g(20,"option",15),M(21,"Female"),_()(),g(22,"input",16),Ze("ngModelChange",function(s){return Ke(r.filters.email,s)||(r.filters.email=s),s}),_(),g(23,"input",17),Ze("ngModelChange",function(s){return Ke(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),_(),g(24,"button",18),M(25,"Apply Filters"),_(),g(26,"button",19),le("click",function(){return r.clearFilters()}),M(27," Clear Filters "),_()(),g(28,"div",20)(29,"table",21)(30,"thead")(31,"tr")(32,"th"),M(33,"Medical Record Number"),_(),g(34,"th"),M(35,"Name"),_(),g(36,"th"),M(37,"Actions"),_()()(),g(38,"tbody"),Te(39,Rae,12,5,"tr",22),_()()()()(),Te(40,Uae,84,17,"div",23),_()()),i&2&&(A(10),Xe("ngModel",r.filters.firstName),A(),Xe("ngModel",r.filters.lastName),A(),Xe("ngModel",r.filters.fullName),A(),Xe("ngModel",r.filters.dateOfBirth),A(),Xe("ngModel",r.filters.medicalRecordNumber),A(),Xe("ngModel",r.filters.gender),A(7),Xe("ngModel",r.filters.email),A(),Xe("ngModel",r.filters.phoneNumber),A(16),X("ngForOf",r.patients),A(),X("ngIf",r.selectedPatient))},dependencies:[Vt,vt,Mn,Zt,Dt,Yt,Ri,ki,kt,ji,Ft,qt,xl,Tn,qn,Nt,Wt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;height:900px;background-color:#f9f9f9;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:500px;height:900px;background-color:#fff;max-width:500px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{max-width:500px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]})}}return n})();var LV=(()=>{class n{constructor(e,i,r){this.patientService=e,this.router=i,this.panelService=r,this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.showMedicalHistoryModal=!1}ngOnInit(){console.log("CreatePatientComponent initialized"),this.panelService.setPanelId("panel-admin")}createPatient(e){e.preventDefault(),this.patientService.createPatient(this.newPatient).subscribe(i=>{console.log("Patient created:",i),this.clearForm(),alert("Patient created successfully"),this.router.navigate(["/patients"])},i=>{console.error("Error creating patient",i),alert("Error creating patient")})}clearForm(){this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""}}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(Mt),$(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-patient"]],standalone:!0,features:[Je],decls:28,vars:8,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}","required","",3,"ngModelChange","ngModel"],["name","genderOptions","required","",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","0"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Create Patient"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.createPatient(s)}),g(10,"input",7),Ze("ngModelChange",function(s){return Ke(r.newPatient.firstName,s)||(r.newPatient.firstName=s),s}),_(),g(11,"input",8),Ze("ngModelChange",function(s){return Ke(r.newPatient.lastName,s)||(r.newPatient.lastName=s),s}),_(),g(12,"input",9),Ze("ngModelChange",function(s){return Ke(r.newPatient.fullName,s)||(r.newPatient.fullName=s),s}),_(),g(13,"input",10),Ze("ngModelChange",function(s){return Ke(r.newPatient.dateOfBirth,s)||(r.newPatient.dateOfBirth=s),s}),_(),g(14,"select",11),Ze("ngModelChange",function(s){return Ke(r.newPatient.genderOptions,s)||(r.newPatient.genderOptions=s),s}),g(15,"option",12),M(16,"Select Gender"),_(),g(17,"option",13),M(18,"Male"),_(),g(19,"option",14),M(20,"Female"),_()(),g(21,"input",15),Ze("ngModelChange",function(s){return Ke(r.newPatient.email,s)||(r.newPatient.email=s),s}),_(),g(22,"input",16),Ze("ngModelChange",function(s){return Ke(r.newPatient.phoneNumber,s)||(r.newPatient.phoneNumber=s),s}),_(),g(23,"input",17),Ze("ngModelChange",function(s){return Ke(r.newPatient.emergencyContact,s)||(r.newPatient.emergencyContact=s),s}),_(),g(24,"button",18),M(25,"Create Patient"),_(),g(26,"button",19),le("click",function(){return r.clearForm()}),M(27," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.newPatient.firstName),A(),Xe("ngModel",r.newPatient.lastName),A(),Xe("ngModel",r.newPatient.fullName),A(),Xe("ngModel",r.newPatient.dateOfBirth),A(),Xe("ngModel",r.newPatient.genderOptions),A(7),Xe("ngModel",r.newPatient.email),A(),Xe("ngModel",r.newPatient.phoneNumber),A(),Xe("ngModel",r.newPatient.emergencyContact))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,hn,xl,Tn,qn,Vt,Nt,Wt,Ea,vt],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var UV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}activateAccount(e){return localStorage.removeItem("authToken"),this.http.post(`${this.apiUrl}/ActivatePatientUser?token=${e}`,{},{observe:"response"}).pipe(_n(i=>(console.error("Error activating account:",i),In(i))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var VV=(()=>{class n{constructor(e,i){this.activateUserService=e,this.router=i}ngOnInit(){}onActivate(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.activateUserService.activateAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully activated.")},r=>{console.error("Account activation failed",r),alert("Account activation failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account activation failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account activation cancelled.")}static{this.\u0275fac=function(i){return new(i||n)($(UV),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-activate-patient-user"]],standalone:!0,features:[Je],decls:8,vars:0,consts:[[1,"activate-user-container"],[1,"activate-user-box"],[1,"activate-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"p"),M(3,"Are you sure you want to activate your account?"),_(),g(4,"button",2),le("click",function(){return r.onActivate()}),M(5,"Activate"),_(),g(6,"button",3),le("click",function(){return r.onCancel()}),M(7,"Cancel"),_()()())},styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.activate-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.activate-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.activate-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.activate-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-button[_ngcontent-%COMP%]:hover{background-color:#218838}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function Bae(n,t){if(n&1&&(g(0,"div")(1,"p")(2,"strong"),M(3,"New Phone Number:"),_(),M(4),_()()),n&2){let e=ce(2);A(4),xt(" ",e.phoneNumber,"")}}function zae(n,t){if(n&1&&(g(0,"div")(1,"p")(2,"strong"),M(3,"New Email:"),_(),M(4),_()()),n&2){let e=ce(2);A(4),xt(" ",e.email,"")}}function Hae(n,t){if(n&1&&(g(0,"div",7),Te(1,Bae,5,1,"div",8)(2,zae,5,1,"div",8),_()),n&2){let e=ce();A(),X("ngIf",e.phoneNumber),A(),X("ngIf",e.email)}}function jae(n,t){if(n&1&&(g(0,"div",9),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}function Wae(n,t){if(n&1){let e=dt();g(0,"button",10),le("click",function(){Oe(e);let r=ce();return Ae(r.updateContactInfo())}),M(1,"Confirm"),_()}}function Gae(n,t){if(n&1){let e=dt();g(0,"div",11),me(1,"img",12),g(2,"p"),M(3,"Updates confirmed successfully!"),_(),g(4,"button",13),le("click",function(){Oe(e);let r=ce();return Ae(r.goToHome())}),M(5,"Go to Home"),_()()}}var BV=(()=>{class n{constructor(e,i,r){this.route=e,this.router=i,this.staffService=r,this.errorMessage="",this.token="",this.phoneNumber="",this.email="",this.updateSuccessful=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.phoneNumber=e.phoneNumber||"",this.email=e.email||"",this.token=e.token||""})}updateContactInfo(){let e={token:this.token,phoneNumber:this.phoneNumber,email:this.email};this.staffService.confirmUpdates(e).subscribe({next:i=>{console.log("Updates confirmed",i),this.updateSuccessful=!0},error:i=>{this.updateSuccessful=!1,console.error("Error confirming updates",i),this.errorMessage="Failed to confirm updates"}})}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)($(tr),$(Mt),$(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-confirm-updates-staff"]],standalone:!0,features:[Je],decls:9,vars:4,consts:[[1,"confirm-updates-container"],[1,"confirm-updates-middle"],[1,"top"],["class","info-container",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit","class","btn btn-filter",3,"click",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container"],[4,"ngIf"],[1,"error-message"],["type","submit",1,"btn","btn-filter",3,"click"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),M(4,"Confirm Contact Information"),_()(),Te(5,Hae,3,2,"div",3)(6,jae,2,1,"div",4)(7,Wae,2,0,"button",5)(8,Gae,6,0,"div",6),_()()),i&2&&(A(5),X("ngIf",!r.updateSuccessful),A(),X("ngIf",r.errorMessage),A(),X("ngIf",!r.updateSuccessful),A(),X("ngIf",r.updateSuccessful))},dependencies:[vt,Zt],styles:[".confirm-updates-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.confirm-updates-container[_ngcontent-%COMP%]   .confirm-updates-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.confirm-updates-container[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:small}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.confirm-updates-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var zV=(()=>{class n{constructor(e,i,r,o,s,a){this.patientService=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.medicalHistoryService=a,this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.getPatient()}getPatient(){let e=this.extractMedicalRecordNumberFromUrl();this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.existingPatient=i[0],console.log("Patient fetched:",i)},i=>{console.error("Error fetching patient",i)})}updatePatientDetails(e){e.preventDefault();let i=this.extractMedicalRecordNumberFromUrl();this.patientService.updatePatient(i,this.existingPatient).subscribe(r=>{console.log("Patient updated successfully:",r),alert("Patient updated successfully!"),this.router.navigate(["/manage-patients"])},r=>{console.error("Error updating patient:",r),alert("Error updating patient"+r)})}extractMedicalRecordNumberFromUrl(){let e=window.location.href,i=/\/update-patient\/(\d+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Medical record number not found in URL.")}clearForm(){this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(Mt),$(Fn),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-patient"]],standalone:!0,features:[Je],decls:20,vars:6,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Update Patient"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.updatePatientDetails(s)}),g(10,"input",7),Ze("ngModelChange",function(s){return Ke(r.existingPatient.firstName,s)||(r.existingPatient.firstName=s),s}),_(),g(11,"input",8),Ze("ngModelChange",function(s){return Ke(r.existingPatient.lastName,s)||(r.existingPatient.lastName=s),s}),_(),g(12,"input",9),Ze("ngModelChange",function(s){return Ke(r.existingPatient.fullName,s)||(r.existingPatient.fullName=s),s}),_(),g(13,"input",10),Ze("ngModelChange",function(s){return Ke(r.existingPatient.email,s)||(r.existingPatient.email=s),s}),_(),g(14,"input",11),Ze("ngModelChange",function(s){return Ke(r.existingPatient.phoneNumber,s)||(r.existingPatient.phoneNumber=s),s}),_(),g(15,"input",12),Ze("ngModelChange",function(s){return Ke(r.existingPatient.emergencyContact,s)||(r.existingPatient.emergencyContact=s),s}),_(),g(16,"button",13),M(17,"Update Patient"),_(),g(18,"button",14),le("click",function(){return r.clearForm()}),M(19," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.existingPatient.firstName),A(),Xe("ngModel",r.existingPatient.lastName),A(),Xe("ngModel",r.existingPatient.fullName),A(),Xe("ngModel",r.existingPatient.email),A(),Xe("ngModel",r.existingPatient.phoneNumber),A(),Xe("ngModel",r.existingPatient.emergencyContact))},dependencies:[Dt,Yt,kt,Ft,qt,hn,Tn,qn,Vt,Nt,Wt,vt],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:90vh;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var $ae=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return(this.getStyle(t,"position")||"static")==="static"},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){e===void 0&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if(this.getStyle(t,"position")==="fixed")i=t.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var o=this.offsetParent(t);i=this.offset(t,!1),o!==document.documentElement&&(r=this.offset(o,!1)),r.top+=o.clientTop,r.left+=o.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){e===void 0&&(e=!0);var i=t.getBoundingClientRect(),r={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft},o={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r.top,bottom:i.bottom+r.top,left:i.left+r.left,right:i.right+r.left};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o},n.prototype.positionElements=function(t,e,i,r){var o=i.split("-"),s=o[0],a=s===void 0?"top":s,l=o[1],u=l===void 0?"center":l,f=r?this.offset(t,!1):this.position(t,!1),h=this.getAllStyles(e),m=parseFloat(h.marginTop),p=parseFloat(h.marginBottom),y=parseFloat(h.marginLeft),C=parseFloat(h.marginRight),x=0,b=0;switch(a){case"top":x=f.top-(e.offsetHeight+m+p);break;case"bottom":x=f.top+f.height;break;case"left":b=f.left-(e.offsetWidth+y+C);break;case"right":b=f.left+f.width;break}switch(u){case"top":x=f.top;break;case"bottom":x=f.top+f.height-e.offsetHeight;break;case"left":b=f.left;break;case"right":b=f.left+f.width-e.offsetWidth;break;case"center":a==="top"||a==="bottom"?b=f.left+f.width/2-e.offsetWidth/2:x=f.top+f.height/2-e.offsetHeight/2;break}e.style.transform="translate("+Math.round(b)+"px, "+Math.round(x)+"px)";var P=e.getBoundingClientRect(),E=document.documentElement,D=window.innerHeight||E.clientHeight,L=window.innerWidth||E.clientWidth;return P.left>=0&&P.top>=0&&P.right<=L&&P.bottom<=D},n}();var qae=/\s+/,HV=new $ae;function XP(n,t,e,i,r){var o=Array.isArray(e)?e:e.split(qae),s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,l=function(x){var b=x.split("-"),P=b[0],E=b[1],D=[];return r&&(D.push(r+"-"+P),E&&D.push(r+"-"+P+"-"+E),D.forEach(function(L){a.add(L)})),D};r&&s.forEach(function(x){a.remove(r+"-"+x)});var u=o.findIndex(function(x){return x==="auto"});u>=0&&s.forEach(function(x){o.find(function(b){return b.search("^"+x)!==-1})==null&&o.splice(u++,1,x)});var f=t.style;f.position="absolute",f.top="0",f.left="0",f["will-change"]="transform";for(var h,m=!1,p=0,y=o;p<y.length;p++){h=y[p];var C=l(h);if(HV.positionElements(n,t,h,i)){m=!0;break}r&&C.forEach(function(x){a.remove(x)})}return m||(h=o[0],l(h),HV.positionElements(n,t,h,i)),h}var sa=function(){return sa=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sa.apply(this,arguments)},ZP=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,o;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))},yx=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(yx||{}),Yae=[yx.SUNDAY,yx.SATURDAY],KP=7,JP=24,_x=60,Bc=60*60*24;function jV(n,t){var e=t.startDate,i=t.seconds,r=t.excluded,o=t.precision;if(r.length<1)return 0;for(var s=n.addSeconds,a=n.getDay,l=n.addDays,u=s(e,i-1),f=a(e),h=a(u),m=0,p=e,y=function(){var C=a(p);r.some(function(x){return x===C})&&(m+=Xae(n,{dayStart:f,dayEnd:h,day:C,precision:o,startDate:e,endDate:u})),p=l(p,1)};p<u;)y();return m}function Xae(n,t){var e=t.precision,i=t.day,r=t.dayStart,o=t.dayEnd,s=t.startDate,a=t.endDate,l=n.differenceInSeconds,u=n.endOfDay,f=n.startOfDay;if(e==="minutes"){if(i===r)return l(u(s),s)+1;if(i===o)return l(a,f(a))+1}return Bc}function Zae(n,t){var e=t.event,i=t.offset,r=t.startOfWeekDate,o=t.excluded,s=t.precision,a=t.totalDaysInView,l=n.max,u=n.differenceInSeconds,f=n.addDays,h=n.endOfDay,m=n.differenceInDays,p=Bc,y=l([e.start,r]);if(e.end)switch(s){case"minutes":p=u(e.end,y);break;default:p=m(f(h(e.end),1),y)*Bc;break}var C=i*Bc,x=C+p,b=a*Bc;return x>b&&(p=b-C),p-=jV(n,{startDate:y,seconds:p,excluded:o,precision:s}),p/Bc}function Kae(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,o=t.precision,s=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(e.start<i)return 0;var u=0;switch(o){case"days":u=s(a(e.start),i)*Bc;break;case"minutes":u=l(e.start,i);break}return u-=jV(n,{startDate:i,seconds:u,excluded:r,precision:o}),Math.abs(u/Bc)}function Jae(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,o=n.isSameSecond,s=e.start,a=e.end||e.start;return!!(s>i&&s<r||a>i&&a<r||s<i&&a>r||o(s,i)||o(s,r)||o(a,i)||o(a,r))}function jm(n,t){var e=t.events,i=t.periodStart,r=t.periodEnd;return e.filter(function(o){return Jae(n,{event:o,periodStart:i,periodEnd:r})})}function WV(n,t){var e=t.date,i=t.weekendDays,r=i===void 0?Yae:i,o=n.startOfDay,s=n.isSameDay,a=n.getDay,l=o(new Date),u=a(e);return{date:e,day:u,isPast:e<l,isToday:s(e,l),isFuture:e>l,isWeekend:r.indexOf(u)>-1}}function Cx(n,t){for(var e=t.viewDate,i=t.weekStartsOn,r=t.excluded,o=r===void 0?[]:r,s=t.weekendDays,a=t.viewStart,l=a===void 0?n.startOfWeek(e,{weekStartsOn:i}):a,u=t.viewEnd,f=u===void 0?n.addDays(l,KP):u,h=n.addDays,m=n.getDay,p=[],y=l;y<f;)o.some(function(C){return m(y)===C})||p.push(WV(n,{date:y,weekendDays:s})),y=h(y,1);return p}function Qae(n,t){for(var e=t.date1,i=t.date2,r=t.excluded,o=e,s=0;o<i;)r.indexOf(n.getDay(o))===-1&&s++,o=n.addDays(o,1);return s}function ele(n,t){var e=t.events,i=e===void 0?[]:e,r=t.excluded,o=r===void 0?[]:r,s=t.precision,a=s===void 0?"days":s,l=t.absolutePositionedEvents,u=l===void 0?!1:l,f=t.viewStart,h=t.viewEnd;f=n.startOfDay(f),h=n.endOfDay(h);var m=n.differenceInSeconds,p=n.differenceInDays,y=Qae(n,{date1:f,date2:h,excluded:o}),C=p(h,f)+1,x=i.filter(function(E){return E.allDay}).map(function(E){var D=Kae(n,{event:E,startOfWeek:f,excluded:o,precision:a}),L=Zae(n,{event:E,offset:D,startOfWeekDate:f,excluded:o,precision:a,totalDaysInView:C});return{event:E,offset:D,span:L}}).filter(function(E){return E.offset<y}).filter(function(E){return E.span>0}).map(function(E){return{event:E.event,offset:E.offset,span:E.span,startsBeforeWeek:E.event.start<f,endsAfterWeek:(E.event.end||E.event.start)>h}}).sort(function(E,D){var L=m(E.event.start,D.event.start);return L===0?m(D.event.end||D.event.start,E.event.end||E.event.start):L}),b=[],P=[];return x.forEach(function(E,D){if(P.indexOf(E)===-1){P.push(E);var L=E.span+E.offset,B=x.slice(D+1).filter(function(F){if(F.offset>=L&&L+F.span<=C&&P.indexOf(F)===-1){var T=F.offset-L;return u||(F.offset=T),L+=F.span+T,P.push(F),!0}}),k=ZP([E],B,!0),G=k.filter(function(F){return F.event.id}).map(function(F){return F.event.id}).join("-");b.push(sa({row:k},G?{id:G}:{}))}}),b}function tle(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.hourDuration,s=t.dayStart,a=t.dayEnd,l=t.weekStartsOn,u=t.excluded,f=t.weekendDays,h=t.segmentHeight,m=t.viewStart,p=t.viewEnd,y=t.minimumEventHeight,C=ile(n,{viewDate:i,hourSegments:r,hourDuration:o,dayStart:s,dayEnd:a}),x=Cx(n,{viewDate:i,weekStartsOn:l,excluded:u,weekendDays:f,viewStart:m,viewEnd:p}),b=n.setHours,P=n.setMinutes,E=n.getHours,D=n.getMinutes;return x.map(function(L){var B=nle(n,{events:e,viewDate:L.date,hourSegments:r,dayStart:s,dayEnd:a,segmentHeight:h,eventWidth:1,hourDuration:o,minimumEventHeight:y}),k=C.map(function(T){var N=T.segments.map(function(S){var q=P(b(L.date,E(S.date)),D(S.date));return sa(sa({},S),{date:q})});return sa(sa({},T),{segments:N})});function G(T,N){var S=Math.max.apply(Math,N.map(function(oe){return oe.left+1})),q=T.filter(function(oe){return oe.left>=S}).filter(function(oe){return vx(N,oe.top,oe.top+oe.height).length>0});return q.length>0?G(T,q):S}var F=B.events.map(function(T){var N=G(B.events,vx(B.events,T.top,T.top+T.height)),S=100/N;return sa(sa({},T),{left:T.left*S,width:S})});return{hours:k,date:L.date,events:F.map(function(T){var N=vx(F.filter(function(S){return S.left>T.left}),T.top,T.top+T.height);return N.length>0?sa(sa({},T),{width:Math.min.apply(Math,N.map(function(S){return S.left}))-T.left}):T})}})}function GV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,l=t.precision,u=l===void 0?"days":l,f=t.absolutePositionedEvents,h=f===void 0?!1:f,m=t.hourSegments,p=t.hourDuration,y=t.dayStart,C=t.dayEnd,x=t.weekendDays,b=t.segmentHeight,P=t.minimumEventHeight,E=t.viewStart,D=E===void 0?n.startOfWeek(r,{weekStartsOn:o}):E,L=t.viewEnd,B=L===void 0?n.endOfWeek(r,{weekStartsOn:o}):L;i||(i=[]);var k=n.startOfDay,G=n.endOfDay;D=k(D),B=G(B);var F=jm(n,{events:i,periodStart:D,periodEnd:B}),T=Cx(n,{viewDate:r,weekStartsOn:o,excluded:a,weekendDays:x,viewStart:D,viewEnd:B});return{allDayEventRows:ele(n,{events:F,excluded:a,precision:u,absolutePositionedEvents:h,viewStart:D,viewEnd:B}),period:{events:F,start:T[0].date,end:G(T[T.length-1].date)},hourColumns:tle(n,{events:i,viewDate:r,hourSegments:m,hourDuration:p,dayStart:y,dayEnd:C,weekStartsOn:o,excluded:a,weekendDays:x,segmentHeight:b,viewStart:D,viewEnd:B,minimumEventHeight:P})}}function $V(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,l=t.viewStart,u=l===void 0?n.startOfMonth(r):l,f=t.viewEnd,h=f===void 0?n.endOfMonth(r):f,m=t.weekendDays;i||(i=[]);for(var p=n.startOfWeek,y=n.endOfWeek,C=n.differenceInDays,x=n.startOfDay,b=n.addHours,P=n.endOfDay,E=n.isSameMonth,D=n.getDay,L=p(u,{weekStartsOn:o}),B=y(h,{weekStartsOn:o}),k=jm(n,{events:i,periodStart:L,periodEnd:B}),G=[],F,T=function(de){var J;if(F?(J=x(b(F,JP)),F.getTime()===J.getTime()&&(J=x(b(F,JP+1))),F=J):J=F=L,!a.some(function(Le){return D(J)===Le})){var Q=WV(n,{date:J,weekendDays:m}),Ie=jm(n,{events:k,periodStart:x(J),periodEnd:P(J)});Q.inMonth=E(J,r),Q.events=Ie,Q.badgeTotal=Ie.length,G.push(Q)}},N=0;N<C(B,L)+1;N++)T(N);var S=[],q=KP-a.length;if(q<KP)for(var N=0;N<G.length;N+=q){var oe=G.slice(N,N+q),ee=oe.some(function(J){return u<=J.date&&J.date<h});ee&&(S=ZP(ZP([],S,!0),oe,!0))}else S=G;for(var ge=Math.floor(S.length/q),se=[],N=0;N<ge;N++)se.push(N*q);return{rowOffsets:se,totalDaysVisibleInWeek:q,days:S,period:{start:S[0].date,end:P(S[S.length-1].date),events:k}}}function vx(n,t,e){return n.filter(function(i){var r=i.top,o=i.top+i.height;return t<o&&o<e||t<r&&r<e?!0:r<=t&&e<=o})}function nle(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.dayStart,s=t.dayEnd,a=t.eventWidth,l=t.segmentHeight,u=t.hourDuration,f=t.minimumEventHeight,h=n.setMinutes,m=n.setHours,p=n.startOfDay,y=n.startOfMinute,C=n.endOfDay,x=n.differenceInMinutes,b=h(m(p(i),xx(o.hour)),bx(o.minute)),P=h(m(y(C(i)),xx(s.hour)),bx(s.minute));P.setSeconds(59,999);var E=[],D=jm(n,{events:e.filter(function(G){return!G.allDay}),periodStart:b,periodEnd:P}),L=D.sort(function(G,F){return G.start.valueOf()-F.start.valueOf()}).map(function(G){var F=G.start,T=G.end||F,N=F<b,S=T>P,q=r*l/(u||_x),oe=0;if(F>b){var ee=n.getTimezoneOffset(F),ge=n.getTimezoneOffset(b),se=ge-ee;oe+=x(F,b)+se}oe*=q,oe=Math.floor(oe);var de=N?b:F,J=S?P:T,Q=n.getTimezoneOffset(de)-n.getTimezoneOffset(J),Ie=x(J,de)+Q;G.end?Ie*=q:Ie=l,f&&Ie<f&&(Ie=f),Ie=Math.floor(Ie);for(var Le=oe+Ie,ke=vx(E,oe,Le),Ce=0;ke.some(function(Ge){return Ge.left===Ce});)Ce+=a;var He={event:G,height:Ie,width:a,top:oe,left:Ce,startsBeforeDay:N,endsAfterDay:S};return E.push(He),He}),B=Math.max.apply(Math,L.map(function(G){return G.left+G.width})),k=jm(n,{events:e.filter(function(G){return G.allDay}),periodStart:p(b),periodEnd:C(P)});return{events:L,width:B,allDayEvents:k,period:{events:D,start:b,end:P}}}function xx(n){return Math.max(Math.min(23,n),0)}function bx(n){return Math.max(Math.min(59,n),0)}function ile(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,o=t.dayStart,s=t.dayEnd,a=n.setMinutes,l=n.setHours,u=n.startOfDay,f=n.startOfMinute,h=n.endOfDay,m=n.addMinutes,p=n.addDays,y=[],C=a(l(u(e),xx(o.hour)),bx(o.minute)),x=a(l(f(h(e)),xx(s.hour)),bx(s.minute)),b=(r||_x)/i,P=u(e),E=h(e),D=function(T){return T};n.getTimezoneOffset(P)!==n.getTimezoneOffset(E)&&(P=p(P,1),C=p(C,1),x=p(x,1),D=function(T){return p(T,-1)});for(var L=r?JP*60/r:_x,B=0;B<L;B++){for(var k=[],G=0;G<i;G++){var F=m(m(C,B*(r||_x)),G*b);F>=C&&F<x&&k.push({date:D(F),displayDate:F,isStart:G===0})}k.length>0&&y.push({segments:k})}return y}var ph=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(ph||{});function qV(n,t){var e=!0;function i(r,o){t(r,o),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(ph.StartPropertyNotDate,r):i(ph.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(ph.EndPropertyNotDate,r),r.start>r.end&&i(ph.EndsBeforeStart,r))}),e):(t(ph.NotArray,n),!1)}function rle(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}function nD(n,t){return n=rle(n,t),typeof n=="function"?function(){for(var i=arguments,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=i[s];return!!n.apply(this,o)}:n?function(){return!0}:function(){return!1}}var QP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol?"symbol":typeof n},XV=function(n){return n!=null&&(typeof n>"u"?"undefined":QP(n))==="object"&&n.nodeType===1&&QP(n.style)==="object"&&QP(n.ownerDocument)==="object"};function ZV(n,t){if(t=oD(t,!0),!XV(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function iD(n,t){return ZV(n,t)!==-1}function ole(n,t){for(var e=0;e<t.length;e++)iD(n,t[e])||n.push(t[e]);return t}function sle(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e=e.map(oD),ole(n,e)}function ale(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(oD).reduce(function(r,o){var s=ZV(n,o);return s!==-1?r.concat(n.splice(s,1)):r},[])}function oD(n,t){if(typeof n=="string")try{return document.querySelector(n)}catch(e){throw e}if(!XV(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function lle(n,t){t=t||{};var e=nD(t.allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,!!e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(r.pageX===null&&r.clientX!==null){var o=r.target&&r.target.ownerDocument||document,s=o.documentElement,a=o.body;n.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}function cle(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}function KV(n){if(n===window)return cle();try{var t=n.getBoundingClientRect();return t.x===void 0&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}function ule(n,t){var e=KV(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}var rD=void 0;typeof Object.create!="function"?rD=function(n){var t=function(){};return function(e,i){if(e!==Object(e)&&e!==null)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,i!==n&&Object.defineProperties(r,i),e===null&&(r.__proto__=null),r}}():rD=Object.create;var dle=rD,Ku=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function fle(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};n!==void 0&&n.addEventListener("mousemove",e);function e(o){for(var s=0;s<Ku.length;s++)t[Ku[s]]=o[Ku[s]]}var i=function(){if(MouseEvent)return function(s,a,l){var u=new MouseEvent("mousemove",eD(t,a));return tD(u,l),s.dispatchEvent(u)};if(typeof document.createEvent=="function")return function(s,a,l){var u=eD(t,a),f=document.createEvent("MouseEvents");return f.initMouseEvent("mousemove",!0,!0,window,0,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget),tD(f,l),s.dispatchEvent(f)};if(typeof document.createEventObject=="function")return function(s,a,l){var u=document.createEventObject(),f=eD(t,a);for(var h in f)u[h]=f[h];return tD(u,l),s.dispatchEvent(u)}}();function r(){n&&n.removeEventListener("mousemove",e,!1),t=null}return{destroy:r,dispatch:i}}function eD(n,t){t=t||{};for(var e=dle(n),i=0;i<Ku.length;i++)t[Ku[i]]!==void 0&&(e[Ku[i]]=t[Ku[i]]);return e}function tD(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var Gm=["webkit","moz","ms","o"],Wm=function(){if(typeof window>"u")return function(){};for(var n=0,t=Gm.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Gm[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=new Date().getTime(),o=Math.max(0,16-r-e),s=window.setTimeout(function(){return i(r+o)},o);return e=r+o,s}}return window.requestAnimationFrame.bind(window)}(),mh=function(){if(typeof window>"u")return function(){};for(var n=0,t=Gm.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Gm[n]+"CancelAnimationFrame"]||window[Gm[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function hle(n,t){t===void 0&&(t={});var e=this,i=4,r=!1;if(typeof t.margin!="object"){var o=t.margin||-1;this.margin={left:o,right:o,top:o,bottom:o}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var s={},a=lle(s),l=fle(),u=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),typeof i!="object"&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=nD(t.autoScroll),this.syncMove=nD(t.syncMove,!1),this.destroy=function(N){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",C,!1),window.removeEventListener("touchstart",C,!1),window.removeEventListener("mouseup",x,!1),window.removeEventListener("touchend",x,!1),window.removeEventListener("pointerup",x,!1),window.removeEventListener("mouseleave",P,!1),window.removeEventListener("mousemove",L,!1),window.removeEventListener("touchmove",L,!1),window.removeEventListener("scroll",y,!0),n=[],N&&b()},this.add=function(){for(var N=[],S=arguments.length;S--;)N[S]=arguments[S];return sle.apply(void 0,[n].concat(N)),this},this.remove=function(){for(var N=[],S=arguments.length;S--;)N[S]=arguments[S];return ale.apply(void 0,[n].concat(N))};var f=null,h;Object.prototype.toString.call(n)!=="[object Array]"&&(n=[n]),function(N){n=[],N.forEach(function(S){S===window?f=window:e.add(S)})}(n),Object.defineProperties(this,{down:{get:function(){return u}},maxSpeed:{get:function(){return i}},point:{get:function(){return s}},scrolling:{get:function(){return r}}});var m=null,p;window.addEventListener("mousedown",C,!1),window.addEventListener("touchstart",C,!1),window.addEventListener("mouseup",x,!1),window.addEventListener("touchend",x,!1),window.addEventListener("pointerup",x,!1),window.addEventListener("mousemove",L,!1),window.addEventListener("touchmove",L,!1),window.addEventListener("mouseleave",P,!1),window.addEventListener("scroll",y,!0);function y(N){for(var S=0;S<n.length;S++)if(n[S]===N.target){r=!0;break}r&&Wm(function(){return r=!1})}function C(){u=!0}function x(){u=!1,b()}function b(){mh(p),mh(h)}function P(){u=!1}function E(N){if(!N)return null;if(m===N||iD(n,N))return N;for(;N=N.parentNode;)if(iD(n,N))return N;return null}function D(){for(var N=null,S=0;S<n.length;S++)YV(s,n[S])&&(N=n[S]);return N}function L(N){if(e.autoScroll()&&!N.dispatched){var S=N.target,q=document.body;m&&!YV(s,m)&&(e.scrollWhenOutside||(m=null)),S&&S.parentNode===q?S=D():(S=E(S),S||(S=D())),S&&S!==m&&(m=S),f&&(mh(h),h=Wm(B)),m&&(mh(p),p=Wm(k))}}function B(){G(f),mh(h),h=Wm(B)}function k(){m&&(G(m),mh(p),p=Wm(k))}function G(N){var S=KV(N),q,oe;s.x<S.left+e.margin.left?q=Math.floor(Math.max(-1,(s.x-S.left)/e.margin.left-1)*e.maxSpeed.left):s.x>S.right-e.margin.right?q=Math.ceil(Math.min(1,(s.x-S.right)/e.margin.right+1)*e.maxSpeed.right):q=0,s.y<S.top+e.margin.top?oe=Math.floor(Math.max(-1,(s.y-S.top)/e.margin.top-1)*e.maxSpeed.top):s.y>S.bottom-e.margin.bottom?oe=Math.ceil(Math.min(1,(s.y-S.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):oe=0,e.syncMove()&&l.dispatch(N,{pageX:s.pageX+q,pageY:s.pageY+oe,clientX:s.x+q,clientY:s.y+oe}),setTimeout(function(){oe&&F(N,oe),q&&T(N,q)})}function F(N,S){N===window?window.scrollTo(N.pageXOffset,N.pageYOffset+S):N.scrollTop+=S}function T(N,S){N===window?window.scrollTo(N.pageXOffset+S,N.pageYOffset):N.scrollLeft+=S}}function ple(n,t){return new hle(n,t)}function YV(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:ule(n,t)}var JV=ple;function sD(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function Mx(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}var eB=(()=>{class n{constructor(){this.currentDrag=new On}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tB=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)($(ui))},n.\u0275dir=en({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),nB=(()=>{class n{constructor(e,i,r,o,s,a,l){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=o,this.vcr=s,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new yt,this.dragStart=new yt,this.ghostElementCreated=new yt,this.dragging=new yt,this.dragEnd=new yt,this.pointerDown$=new On,this.pointerMove$=new On,this.pointerUp$=new On,this.eventListenerSubscriptions={},this.destroy$=new On,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();let e=this.pointerDown$.pipe(_i(()=>this.canDrag()),gi(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();let r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText(`
          body * {
           -moz-user-select: none;
           -ms-user-select: none;
           -webkit-user-select: none;
           user-select: none;
          }
        `)),requestAnimationFrame(()=>{this.document.head.appendChild(r)});let o=this.getScrollPosition(),s=new Jt(p=>{let y=this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window";return this.renderer.listen(y,"scroll",C=>p.next(C))}).pipe(ou(o),Pt(()=>this.getScrollPosition())),a=new On,l=new Kh;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});let u=as(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(ls()),f=ru([this.pointerMove$,s]).pipe(Pt(([p,y])=>({currentDrag$:a,transformX:p.clientX-i.clientX,transformY:p.clientY-i.clientY,clientX:p.clientX,clientY:p.clientY,scrollLeft:y.left,scrollTop:y.top,target:p.event.target})),Pt(p=>(this.dragSnapGrid.x&&(p.transformX=Math.round(p.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(p.transformY=Math.round(p.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),p)),Pt(p=>(this.dragAxis.x||(p.transformX=0),this.dragAxis.y||(p.transformY=0),p)),Pt(p=>{let y=p.scrollLeft-o.left,C=p.scrollTop-o.top;return $t(je({},p),{x:p.transformX+y,y:p.transformY+C})}),_i(({x:p,y,transformX:C,transformY:x})=>!this.validateDrag||this.validateDrag({x:p,y,transform:{x:C,y:x}})),Co(u),ls()),h=f.pipe(Ur(1),ls()),m=f.pipe(Jl(1),ls());return h.subscribe(({clientX:p,clientY:y,x:C,y:x})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=JV([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],$t(je({},this.autoScroll),{autoScroll(){return!0}})),sD(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){let b=this.element.nativeElement.getBoundingClientRect(),P=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(P):this.element.nativeElement.parentNode.insertBefore(P,this.element.nativeElement.nextSibling),this.ghostElement=P,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(P,{position:"fixed",top:`${b.top}px`,left:`${b.left}px`,width:`${b.width}px`,height:`${b.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){let E=this.vcr.createEmbeddedView(this.ghostElementTemplate);P.innerHTML="",E.rootNodes.filter(D=>D instanceof Node).forEach(D=>{P.appendChild(D)}),m.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(E))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:p-C,clientY:y-x,element:P})}),m.subscribe(()=>{P.parentElement.removeChild(P),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),m.pipe(gi(p=>{let y=l.pipe(sM(),Ur(1),Pt(C=>$t(je({},p),{dragCancelled:C>0})));return l.complete(),y})).subscribe(({x:p,y,dragCancelled:C})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:p,y,dragCancelled:C})}),Mx(this.renderer,this.element,this.dragActiveClass),a.complete()}),as(u,m).pipe(Ur(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),f}),ls());as(e.pipe(Ur(1),Pt(i=>[,i])),e.pipe(Od())).pipe(_i(([i,r])=>i?i.x!==r.x||i.y!==r.y:!0),Pt(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:o,clientX:s,clientY:a,transformX:l,transformY:u,target:f})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){let h=`translate3d(${l}px, ${u}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:h,"-webkit-transform":h,"-ms-transform":h,"-moz-transform":h,"-o-transform":h})}}),o.next({clientX:s,clientY:a,dropData:this.dropData,target:f})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){let e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){e.button===0&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){e.button===0&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,o;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,o=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){let s=Xl(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Xl(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&o&&(r=this.shouldBeginDrag(e,l,i)),(!this.touchStartLongPress||!o||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{s.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){let o=this.getScrollPosition(),s={top:Math.abs(o.top-r.top),left:Math.abs(o.left-r.left)},a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-s.left,l=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-s.top,u=a+l,f=this.touchStartLongPress;return(u>f.delta||s.top>0||s.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=f.delay?(this.disableScroll(),!0):!1}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){let e=this.getScrollElement(),i=e.scrollWidth>e.clientWidth,r=e.scrollHeight>e.clientHeight;return i||r}}return n.\u0275fac=function(e){return new(e||n)($(ui),$(Ai),$(eB),$(Gn),$(Ho),$(tB,8),$(Zi))},n.\u0275dir=en({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Cr]}),n})();function QV(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}var aD=(()=>{class n{constructor(e,i,r,o,s){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=o,this.scrollContainer=s,this.dragEnter=new yt,this.dragLeave=new yt,this.dragOver=new yt,this.drop=new yt}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{sD(this.renderer,this.element,this.dragActiveClass);let i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0}),o,s=e.pipe(Pt(({clientX:u,clientY:f,dropData:h,target:m})=>{o={clientX:u,clientY:f,dropData:h,target:m},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);let p=QV(u,f,i.rect),y=!this.validateDrop||this.validateDrop({clientX:u,clientY:f,target:m,dropData:h});return i.scrollContainerRect?p&&y&&QV(u,f,i.scrollContainerRect):p&&y})),a=s.pipe(lM()),l;a.pipe(_i(u=>u)).subscribe(()=>{l=!0,sD(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(o)})}),s.pipe(_i(u=>u)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(o)})}),a.pipe(Od(),_i(([u,f])=>u&&!f)).subscribe(()=>{l=!1,Mx(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(o)})}),e.subscribe({complete:()=>{r(),Mx(this.renderer,this.element,this.dragActiveClass),l&&(Mx(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(o)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)($(ui),$(eB),$(Gn),$(Ai),$(tB,8))},n.\u0275dir=en({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),$m=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({}),n})();var gh=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(gh||{});function iB(n,t){return{type:gh.Trigger,name:n,definitions:t,options:{}}}function lD(n,t=null){return{type:gh.Animate,styles:t,timings:n}}function cD(n){return{type:gh.Style,styles:n,offset:null}}function uD(n,t,e){return{type:gh.State,name:n,styles:t,options:e}}function dD(n,t,e=null){return{type:gh.Transition,expr:n,animation:t,options:e}}var Ju=typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function gle(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),i==="canvas"?sB(n,t):(i==="input"||i==="select"||i==="textarea")&&oB(n,t),rB("canvas",n,t,sB),rB("input, textarea, select",n,t,oB),t}function rB(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var _le=0;function oB(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${_le++}`)}function sB(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function aB(n,t,e,i){let r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}function vle(n,t){let e=0,i=0,r=n.nativeElement.style,s=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(s&&s.includes("translate")&&(e=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),t==="absolute")return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{let a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}var lB=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function cB(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function wx({edges:n,initialRectangle:t,newRectangle:e}){let i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}var uB="resize-active",yle="resize-ghost-element",xle=50,hD=(()=>{class n{constructor(e,i,r,o){this.platformId=e,this.renderer=i,this.elm=r,this.zone=o,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=lB,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=xle,this.resizeStart=new yt,this.resizing=new yt,this.resizeEnd=new yt,this.mouseup=new On,this.mousedown=new On,this.mousemove=new On,this.destroy$=new On,this.pointerEventListeners=fD.getInstance(i,o)}ngOnInit(){let e=as(this.pointerEventListeners.pointerDown,this.mousedown),i=as(this.pointerEventListeners.pointerMove,this.mousemove).pipe(vi(({event:u})=>{o&&u.cancelable&&u.preventDefault()}),ls()),r=as(this.pointerEventListeners.pointerUp,this.mouseup),o,s=()=>{o&&o.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>je(je({},lB),this.resizeCursors);e.pipe(gi(u=>{function f(p){return{clientX:p.clientX-u.clientX,clientY:p.clientY-u.clientY}}let h=()=>{let p={x:1,y:1};return o&&(this.resizeSnapGrid.left&&o.edges.left?p.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&o.edges.right&&(p.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&o.edges.top?p.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&o.edges.bottom&&(p.y=+this.resizeSnapGrid.bottom)),p};function m(p,y){return{x:Math.ceil(p.clientX/y.x),y:Math.ceil(p.clientY/y.y)}}return as(i.pipe(Ur(1)).pipe(Pt(p=>[,p])),i.pipe(Od())).pipe(Pt(([p,y])=>[p&&f(p),f(y)])).pipe(_i(([p,y])=>{if(!p)return!0;let C=h(),x=m(p,C),b=m(y,C);return x.x!==b.x||x.y!==b.y})).pipe(Pt(([,p])=>{let y=h();return{clientX:Math.round(p.clientX/y.x)*y.x,clientY:Math.round(p.clientY/y.y)*y.y}})).pipe(Co(as(r,e)))})).pipe(_i(()=>!!o)).pipe(Pt(({clientX:u,clientY:f})=>aB(o.startingRect,o.edges,u,f))).pipe(_i(u=>this.allowNegativeResizes||!!(u.height&&u.width&&u.height>0&&u.width>0))).pipe(_i(u=>this.validateResize?this.validateResize({rectangle:u,edges:wx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:u})}):!0),Co(this.destroy$)).subscribe(u=>{o&&o.clonedNode&&(this.renderer.setStyle(o.clonedNode,"height",`${u.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${u.width}px`),this.renderer.setStyle(o.clonedNode,"top",`${u.top}px`),this.renderer.setStyle(o.clonedNode,"left",`${u.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:wx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:u}),rectangle:u})}),o.currentRect=u}),e.pipe(Pt(({edges:u})=>u||{}),_i(u=>Object.keys(u).length>0),Co(this.destroy$)).subscribe(u=>{o&&s();let f=vle(this.elm,this.ghostElementPositioning);o={edges:u,startingRect:f,currentRect:f};let h=a(),m=cB(o.edges,h);this.renderer.setStyle(document.body,"cursor",m),this.setElementClass(this.elm,uB,!0),this.enableGhostResize&&(o.clonedNode=gle(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(o.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(o.clonedNode,"left",`${o.startingRect.left}px`),this.renderer.setStyle(o.clonedNode,"top",`${o.startingRect.top}px`),this.renderer.setStyle(o.clonedNode,"height",`${o.startingRect.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${o.startingRect.width}px`),this.renderer.setStyle(o.clonedNode,"cursor",cB(o.edges,h)),this.renderer.addClass(o.clonedNode,yle),o.clonedNode.scrollTop=o.startingRect.scrollTop,o.clonedNode.scrollLeft=o.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:wx({edges:u,initialRectangle:f,newRectangle:f}),rectangle:aB(f,{},0,0)})})}),r.pipe(Co(this.destroy$)).subscribe(()=>{o&&(this.renderer.removeClass(this.elm.nativeElement,uB),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:wx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:o.currentRect}),rectangle:o.currentRect})}),s(),o=null)})}ngOnDestroy(){of(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)($(Br),$(Ai),$(ui),$(Gn))},n.\u0275dir=en({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})(),fD=class n{constructor(t,e){this.pointerDown=new Jt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ju&&(o=t.listen("document","touchstart",s=>{i.next({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,event:s})}))}),()=>{r(),Ju&&o()}}).pipe(ls()),this.pointerMove=new Jt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ju&&(o=t.listen("document","touchmove",s=>{i.next({clientX:s.targetTouches[0].clientX,clientY:s.targetTouches[0].clientY,event:s})}))}),()=>{r(),Ju&&o()}}).pipe(ls()),this.pointerUp=new Jt(i=>{let r,o,s;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),Ju&&(o=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),s=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),Ju&&(o(),s())}}).pipe(ls())}static getInstance(t,e){return n.instance||(n.instance=new n(t,e)),n.instance}},dB=(()=>{class n{constructor(e,i,r,o){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=o,this.resizeEdges={},this.eventListeners={},this.destroy$=new On}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Ju&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),as(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",o=>{this.onMousemove(o,o.targetTouches[0].clientX,o.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",o=>{this.onMousemove(o,o.clientX,o.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Xl(this.element.nativeElement,e).pipe(Co(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)($(Ai),$(ui),$(Gn),$(hD,8))},n.\u0275dir=en({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),pD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({}),n})();var Cle=(n,t)=>({event:n,trackByActionId:t}),Mle=n=>({action:n});function wle(n,t){if(n&1){let e=dt();g(0,"a",5),zr(1,"calendarA11y"),le("mwlClick",function(r){let o=Oe(e).$implicit,s=ce(2).event;return Ae(o.onClick({event:s,sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=Oe(e).$implicit,s=ce(2).event;return Ae(o.onClick({event:s,sourceEvent:r}))}),_()}if(n&2){let e=t.$implicit;X("ngClass",e.cssClass)("innerHtml",e.label,S_),Xi("aria-label",dl(1,3,ri(6,Mle,e),"actionButtonLabel"))}}function Ele(n,t){if(n&1&&(g(0,"span",3),Te(1,wle,2,8,"a",4),_()),n&2){let e=ce(),i=e.event,r=e.trackByActionId;A(),X("ngForOf",i.actions)("ngForTrackBy",r)}}function Sle(n,t){if(n&1&&Te(0,Ele,2,2,"span",2),n&2){let e=t.event;X("ngIf",e.actions)}}function Tle(n,t){}var Ple=(n,t)=>({event:n,view:t}),Ex=()=>({});function Dle(n,t){if(n&1&&(me(0,"span",2),zr(1,"calendarEventTitle"),zr(2,"calendarA11y")),n&2){let e=t.event,i=t.view;X("innerHTML",Qd(1,2,e.title,i,e),S_),Xi("aria-hidden",dl(2,6,Hi(9,Ex),"hideEventTitle"))}}function Ole(n,t){}var Ale=(n,t,e)=>({contents:n,placement:t,event:e});function Ile(n,t){if(n&1&&(g(0,"div",2),me(1,"div",3)(2,"div",4),_()),n&2){let e=t.contents,i=t.placement;X("ngClass","cal-tooltip-"+i),A(2),X("innerHtml",e,S_)}}function Rle(n,t){}var gD=(n,t)=>({x:n,y:t}),mB=()=>({delay:300,delta:30});var kle=(n,t)=>({event:n,locale:t});var Nle=(n,t,e,i,r,o)=>({days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:o});function Fle(n,t){if(n&1){let e=dt();g(0,"div",4),le("mwlClick",function(r){let o=Oe(e).$implicit,s=ce().dayHeaderClicked;return Ae(s.emit({day:o,sourceEvent:r}))})("drop",function(r){let o=Oe(e).$implicit,s=ce().eventDropped;return Ae(s.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){let r=Oe(e).$implicit,o=ce().dragEnter;return Ae(o.emit({date:r.date}))}),g(1,"b"),M(2),zr(3,"calendarDate"),_(),me(4,"br"),g(5,"span"),M(6),zr(7,"calendarDate"),_()()}if(n&2){let e=t.$implicit,i=ce().locale;So("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),X("ngClass",e.cssClass),A(2),Ye(Qd(3,11,e.date,"weekViewColumnHeader",i)),A(4),Ye(Qd(7,15,e.date,"weekViewColumnSubHeader",i))}}function Lle(n,t){if(n&1&&(g(0,"div",2),Te(1,Fle,8,19,"div",3),_()),n&2){let e=t.days,i=t.trackByWeekDayHeaderDate;A(),X("ngForOf",e)("ngForTrackBy",i)}}function Ule(n,t){}var Vle=(n,t,e,i,r,o,s,a,l)=>({weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:o,tooltipDelay:s,column:a,daysInWeek:l}),Ble=(n,t,e)=>({color:n,backgroundColor:t,borderColor:e});function zle(n,t){if(n&1){let e=dt();g(0,"div",2),zr(1,"calendarEventTitle"),zr(2,"calendarA11y"),le("mwlClick",function(r){let o=Oe(e).eventClicked;return Ae(o.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=Oe(e).eventClicked;return Ae(o.emit({sourceEvent:r}))}),me(3,"mwl-calendar-event-actions",3),M(4," "),me(5,"mwl-calendar-event-title",4),_()}if(n&2){let e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,o=t.tooltipAppendToBody,s=t.tooltipDisabled,a=t.tooltipDelay,l=t.daysInWeek,u=ce();X("ngStyle",M1(20,Ble,e.event.color==null?null:e.event.color.secondaryText,e.event.color==null?null:e.event.color.secondary,e.event.color==null?null:e.event.color.primary))("mwlCalendarTooltip",s?"":Qd(1,13,e.event.title,l===1?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",o)("tooltipDelay",a),Xi("aria-label",dl(2,17,xa(24,kle,e.tempEvent||e.event,u.locale),"eventDescription")),A(3),X("event",e.tempEvent||e.event)("customTemplate",u.eventActionsTemplate),A(2),X("event",e.tempEvent||e.event)("customTemplate",u.eventTitleTemplate)("view",l===1?"day":"week")}}function Hle(n,t){}var jle=(n,t,e,i,r)=>({segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r});function Wle(n,t){if(n&1&&(g(0,"div",4),M(1),zr(2,"calendarDate"),_()),n&2){let e=ce(),i=e.segment,r=e.locale,o=e.daysInWeek;A(),xt(" ",Qd(2,1,i.displayDate,o===1?"dayViewHour":"weekViewHour",r)," ")}}function Gle(n,t){if(n&1&&(g(0,"div",2),zr(1,"calendarA11y"),Te(2,Wle,3,5,"div",3),_()),n&2){let e=t.segment,i=t.segmentHeight,r=t.isTimeLabel,o=t.daysInWeek;ul("height",i,"px"),So("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),X("ngClass",e.cssClass),Xi("aria-hidden",dl(1,9,Hi(12,Ex),o===1?"hideDayHourSegment":"hideWeekHourSegment")),A(2),X("ngIf",r)}}function $le(n,t){}var qle=(n,t,e,i,r,o,s)=>({columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:o,topPx:s});function Yle(n,t){if(n&1&&me(0,"div",3),n&2){let e=ce().topPx;ul("top",e,"px")}}function Xle(n,t){if(n&1&&Te(0,Yle,1,2,"div",2),n&2){let e=t.isVisible;X("ngIf",e)}}function Zle(n,t){}var Kle=(n,t)=>({left:n,right:t}),gB=(n,t)=>({event:n,calendarId:t}),Jle=n=>({x:n}),Qle=()=>({left:!0}),ece=()=>({right:!0}),tce=(n,t,e,i)=>({left:n,right:t,top:e,bottom:i}),nce=()=>({left:!0,top:!0}),ice=()=>({right:!0,bottom:!0});function rce(n,t){n&1&&b1(0)}function oce(n,t){if(n&1){let e=dt();g(0,"div",17),le("drop",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.eventDropped(r,o.date,!0))})("dragEnter",function(){let r=Oe(e).$implicit,o=ce(2);return Ae(o.dateDragEnter(r.date))}),_()}}function sce(n,t){n&1&&me(0,"div",24),n&2&&X("resizeEdges",Hi(1,Qle))}function ace(n,t){n&1&&me(0,"div",25),n&2&&X("resizeEdges",Hi(1,ece))}function lce(n,t){if(n&1){let e=dt();g(0,"div",20,3),le("resizeStart",function(r){let o=Oe(e).$implicit;ce();let s=Ii(1),a=ce(2);return Ae(a.allDayEventResizeStarted(s,o,r))})("resizing",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.allDayEventResizing(o,r,s.dayColumnWidth))})("resizeEnd",function(){let r=Oe(e).$implicit,o=ce(3);return Ae(o.allDayEventResizeEnded(r))})("dragStart",function(){let r=Oe(e).$implicit,o=Ii(1);ce();let s=Ii(1),a=ce(2);return Ae(a.dragStarted(s,o,r,!1))})("dragging",function(){Oe(e);let r=ce(3);return Ae(r.allDayEventDragMove())})("dragEnd",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.dragEnded(o,r,s.dayColumnWidth))}),Te(2,sce,1,2,"div",21),g(3,"mwl-calendar-week-view-event",22),le("eventClicked",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),_(),Te(4,ace,1,2,"div",23),_()}if(n&2){let e=t.$implicit,i=ce(3);ul("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),So("cal-draggable",e.event.draggable&&i.allDayEventResizes.size===0)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),X("ngClass",e.event==null?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",xa(33,Kle,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",xa(36,gB,e.event,i.calendarId))("dragAxis",xa(39,gD,e.event.draggable&&i.allDayEventResizes.size===0,!i.snapDraggedEvents&&e.event.draggable&&i.allDayEventResizes.size===0))("dragSnapGrid",i.snapDraggedEvents?ri(42,Jle,i.dayColumnWidth):Hi(44,Ex))("validateDrag",i.validateDrag)("touchStartLongPress",Hi(45,mB)),A(2),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),A(),X("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),A(),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function cce(n,t){if(n&1&&(g(0,"div",18,2),Te(2,lce,5,46,"div",19),_()),n&2){let e=t.$implicit,i=ce(2);A(2),X("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function uce(n,t){if(n&1){let e=dt();g(0,"div",12,1),le("dragEnter",function(){Oe(e);let r=ce();return Ae(r.dragEnter("allDay"))})("dragLeave",function(){Oe(e);let r=ce();return Ae(r.dragLeave("allDay"))}),g(2,"div",10)(3,"div",13),Te(4,rce,1,0,"ng-container",14),_(),Te(5,oce,1,0,"div",15),_(),Te(6,cce,3,2,"div",16),_()}if(n&2){let e=ce();A(4),X("ngTemplateOutlet",e.allDayEventsLabelTemplate),A(),X("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),A(),X("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function dce(n,t){if(n&1&&me(0,"mwl-calendar-week-view-hour-segment",29),n&2){let e=t.$implicit,i=ce(3);ul("height",i.hourSegmentHeight,"px"),X("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function fce(n,t){if(n&1&&(g(0,"div",27),Te(1,dce,1,8,"mwl-calendar-week-view-hour-segment",28),_()),n&2){let e=t.$implicit,i=t.odd,r=ce(2);So("cal-hour-odd",i),A(),X("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function hce(n,t){if(n&1&&(g(0,"div",13),Te(1,fce,2,4,"div",26),_()),n&2){let e=ce();A(),X("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}function pce(n,t){n&1&&me(0,"div",24),n&2&&X("resizeEdges",Hi(1,nce))}function mce(n,t){}function gce(n,t){if(n&1){let e=dt();g(0,"mwl-calendar-week-view-event",36),le("eventClicked",function(r){Oe(e);let o=ce().$implicit,s=ce(2);return Ae(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),_()}if(n&2){let e=ce().$implicit,i=ce().$implicit,r=ce();X("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}function _ce(n,t){n&1&&me(0,"div",25),n&2&&X("resizeEdges",Hi(1,ice))}function vce(n,t){if(n&1){let e=dt();g(0,"div",34,3),le("resizeStart",function(r){let o=Oe(e).$implicit,s=ce(2),a=Ii(6);return Ae(s.timeEventResizeStarted(a,o,r))})("resizing",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.timeEventResizing(o,r))})("resizeEnd",function(){let r=Oe(e).$implicit,o=ce(2);return Ae(o.timeEventResizeEnded(r))})("dragStart",function(){let r=Oe(e).$implicit,o=Ii(1),s=ce(2),a=Ii(6);return Ae(s.dragStarted(a,o,r,!0))})("dragging",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.dragMove(o,r))})("dragEnd",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.dragEnded(o,r,s.dayColumnWidth,!0))}),Te(2,pce,1,2,"div",21)(3,mce,0,0,"ng-template",35)(4,gce,1,12,"ng-template",null,4,Ys)(6,_ce,1,2,"div",23),_()}if(n&2){let e=t.$implicit,i=Ii(5),r=ce(2);ul("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),So("cal-draggable",e.event.draggable&&r.timeEventResizes.size===0)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),X("ngClass",e.event.cssClass)("hidden",e.height===0&&e.width===0)("resizeCursors",r.resizeCursors)("resizeSnapGrid",mN(30,tce,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",xa(35,gB,e.event,r.calendarId))("dragAxis",xa(38,gD,e.event.draggable&&r.timeEventResizes.size===0,e.event.draggable&&r.timeEventResizes.size===0))("dragSnapGrid",r.snapDraggedEvents?xa(41,gD,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):Hi(44,Ex))("touchStartLongPress",Hi(45,mB))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),A(2),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),A(),X("ngTemplateOutlet",i),A(3),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function yce(n,t){if(n&1){let e=dt();g(0,"mwl-calendar-week-view-hour-segment",38),le("mwlClick",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.eventDropped(r,o.date,!1))})("dragEnter",function(){let r=Oe(e).$implicit,o=ce(3);return Ae(o.dateDragEnter(r.date))}),_()}if(n&2){let e=t.$implicit,i=ce(3);ul("height",i.hourSegmentHeight,"px"),X("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",i.hourSegmentClicked.observers.length===0)("dragOverClass",!i.dragActive||!i.snapDraggedEvents?"cal-drag-over":null)("isTimeLabel",i.daysInWeek===1)}}function xce(n,t){if(n&1&&(g(0,"div",27),Te(1,yce,1,10,"mwl-calendar-week-view-hour-segment",37),_()),n&2){let e=t.$implicit,i=t.odd,r=ce(2);So("cal-hour-odd",i),A(),X("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function bce(n,t){if(n&1&&(g(0,"div",30),me(1,"mwl-calendar-week-view-current-time-marker",31),g(2,"div",32),Te(3,vce,7,46,"div",33),_(),Te(4,xce,2,4,"div",26),_()),n&2){let e=t.$implicit,i=ce();A(),X("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),A(2),X("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),A(),X("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}var Sx=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new yt,this.destroy$=new On}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(Co(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new Jt(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)($(Ai),$(ui),$(Zi))},n.\u0275dir=en({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),_B=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new yt,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(e.keyCode===13||e.which===13||e.key==="Enter")&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){this.keydownListener!==null&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)($(ui),$(Gn),$(Ai))},n.\u0275dir=en({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),_h=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`
        ${er(e.date,"EEEE MMMM d",i)},
        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},
         click to expand
      `:`${er(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`
      Beginning of expanded view for ${er(e,"EEEE MMMM dd",i)}
    `}openDayEventsAlert({date:e,locale:i}){return`${er(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(e.allDay===!0)return this.allDayEventDescription({event:e,locale:i});let r=`
      ${er(e.start,"EEEE MMMM dd",i)},
      ${e.title}, from ${er(e.start,"hh:mm a",i)}
    `;return e.end?r+` to ${er(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){let r=`
      ${e.title}, event spans multiple days:
      start time ${er(e.start,"MMMM dd hh:mm a",i)}
    `;return e.end?r+`, stop time ${er(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(qe(ev))},n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),Tx=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){let r=Object.getOwnPropertyNames(Object.getPrototypeOf(_h.prototype)).filter(o=>o!=="constructor");throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)($(_h,16),$(Ca,16))},n.\u0275pipe=ac({name:"calendarA11y",type:n,pure:!0}),n})(),Cce=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"mwlClick","mwlKeydownEnter","ngClass","innerHtml"]],template:function(e,i){if(e&1&&Te(0,Sle,1,1,"ng-template",null,0,Ys)(2,Tle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",xa(2,Cle,i.event,i.trackByActionId))}},dependencies:[To,Mn,Zt,_l,Sx,_B,Tx],encapsulation:2}),n})(),td=class{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}},vB=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)($(td,16))},n.\u0275pipe=ac({name:"calendarEventTitle",type:n,pure:!0}),n})(),Mce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(e&1&&Te(0,Dle,3,10,"ng-template",null,0,Ys)(2,Ole,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",xa(2,Ple,i.event,i.view))}},dependencies:[_l,vB,Tx],encapsulation:2}),n})(),wce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(e&1&&Te(0,Ile,3,2,"ng-template",null,0,Ys)(2,Rle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",M1(2,Ale,i.contents,i.placement,i.event))}},dependencies:[To,_l],encapsulation:2}),n})(),Ece=(()=>{class n{constructor(e,i,r,o,s,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=s,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new On,this.tooltipFactory=o.resolveComponentFactory(wce)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(this.delay===null?Rt("now"):ep(this.delay)).pipe(Co(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=XP(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),e.indexOf(this.tooltipRef.instance.placement)===-1&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)($(ui),$(Eo),$(Ai),$(oc),$(Ho),$(Zi))},n.\u0275dir=en({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){e&1&&le("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:[0,"mwlCalendarTooltip","contents"],placement:[0,"tooltipPlacement","placement"],customTemplate:[0,"tooltipTemplate","customTemplate"],event:[0,"tooltipEvent","event"],appendToBody:[0,"tooltipAppendToBody","appendToBody"],delay:[0,"tooltipDelay","delay"]},features:[Cr]}),n})(),bD=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(bD||{}),Sce=n=>qV(n,(...e)=>console.warn("angular-calendar",...e));function yB(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function Tce(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}function Pce(n,t){return yB(n,t)&&Tce(n,t)}function xB(n,t){return Math.round(n/t)*t}var bB=(n,t)=>t.date.toISOString(),Dce=(n,t)=>t.date.toISOString(),Oce=(n,t)=>t.segments[0].date.toISOString(),Ace=(n,t)=>t.event.id?t.event.id:t.event,Ice=(n,t)=>t.event.id?t.event.id:t.event,Rce=60;function kce(n,t,e){return(e||Rce)/(n*t)}function mD(n,t,e,i,r){let o=xB(n,i||e),s=kce(t,e,r);return o*s}function fB(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Qu(n,t,e,i){let r=0,o=0,s=e<0?n.subDays:n.addDays,a=t;for(;o<=Math.abs(e);){a=s(t,r);let l=n.getDay(a);i.indexOf(l)===-1&&o++,r++}return a}function Nce(n,t,e){let i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}function Fce(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)}function _D(n,t,e,i=[],r){let o=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e}),s=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(o))>-1&&o<s;)o=n.addDays(o,1);if(r){let a=n.endOfDay(Qu(n,o,r-1,i));return{viewStart:o,viewEnd:a}}else{let a=s;for(;i.indexOf(n.getDay(a))>-1&&a>o;)a=n.subDays(a,1);return{viewStart:o,viewEnd:a}}}function Lce({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}var zc=class{};var Uce=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return er(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return er(e,"d",i)}monthViewTitle({date:e,locale:i}){return er(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return er(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return er(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:o,daysInWeek:s}){let{viewStart:a,viewEnd:l}=_D(this.dateAdapter,e,r,o,s),u=(f,h)=>er(f,"MMM d"+(h?", yyyy":""),i);return`${u(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${u(l,!0)}`}weekViewHour({date:e,locale:i}){return er(e,"h a",i)}dayViewHour({date:e,locale:i}){return er(e,"h a",i)}dayViewTitle({date:e,locale:i}){return er(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(qe(zc))},n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),vh=(()=>{class n extends Uce{}return n.\u0275fac=(()=>{let t;return function(i){return(t||(t=Vr(n)))(i||n)}})(),n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),CB=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,o=0,s=[],a){if(typeof this.dateFormatter[i]>"u"){let l=Object.getOwnPropertyNames(Object.getPrototypeOf(vh.prototype)).filter(u=>u!=="constructor");throw new Error(`${i} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:o,excludeDays:s,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)($(vh,16),$(Ca,16))},n.\u0275pipe=ac({name:"calendarDate",type:n,pure:!0}),n})(),Ym=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return $V(this.dateAdapter,e)}getWeekViewHeader(e){return Cx(this.dateAdapter,e)}getWeekView(e){return GV(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(qe(zc))},n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),$Me=new _t("Moment");var ed=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(ed||{}),qm=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||td,i.dateFormatter||vh,i.utils||Ym,i.a11y||_h]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({providers:[ev],imports:[vt]}),n})();var qMe=iB("collapse",[uD("void",cD({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),uD("*",cD({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),dD("* => void",lD("150ms ease-out")),dD("void => *",lD("150ms ease-in"))]);var hB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[vt,$m,qm,$m]}),n})(),vD=class{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:o}){let s=Lce({x:t,y:e})||r;if(i){let a=Object.assign({},this.startPosition,{left:this.startPosition.left+o.x,right:this.startPosition.right+o.x,top:this.startPosition.top+o.y,bottom:this.startPosition.bottom+o.y});if(s){let l=this.dragContainerElement.getBoundingClientRect(),u=l.top<a.top&&a.top<l.bottom,f=l.top<a.bottom&&a.bottom<l.bottom;return yB(l,a)&&(u||f)}return!1}else return s}},yD=class{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth)?!1:Pce(this.resizeContainerElement.getBoundingClientRect(),t)}},Vce=(()=>{class n{constructor(){this.dayHeaderClicked=new yt,this.eventDropped=new yt,this.dragEnter=new yt,this.trackByWeekDayHeaderDate=bB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"mwlClick","drop","dragEnter","ngClass"]],template:function(e,i){if(e&1&&Te(0,Lle,2,2,"ng-template",null,0,Ys)(2,Ule,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",_N(2,Nle,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[To,Mn,_l,aD,Sx,CB],encapsulation:2}),n})(),Bce=(()=>{class n{constructor(){this.eventClicked=new yt}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"mwlClick","mwlKeydownEnter","ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(e&1&&Te(0,zle,6,27,"ng-template",null,0,Ys)(2,Hle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",yN(2,Vle,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[_l,$N,Cce,Mce,Ece,Sx,_B,vB,Tx],encapsulation:2}),n})(),zce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(e&1&&Te(0,Gle,3,13,"ng-template",null,0,Ys)(2,$le,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",gN(2,jle,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[To,Zt,_l,CB,Tx],encapsulation:2}),n})(),Hce=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new Si(void 0),this.marker$=this.zone.onStable.pipe(ur(()=>oM(60*1e3)),ou(0),fM(this.columnDate$),Pt(r=>{let o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(r,l)&&l>=o&&l<=s,top:this.dateAdapter.differenceInMinutes(l,o)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)($(zc),$(Gn))},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Cr],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(e&1&&(Te(0,Xle,1,1,"ng-template",null,0,Ys)(2,Zle,0,0,"ng-template",1),zr(3,"async"),zr(4,"async")),e&2){let r,o=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||o)("ngTemplateOutletContext",vN(6,qle,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,(r=w1(3,2,i.marker$))==null?null:r.isVisible,(r=w1(4,4,i.marker$))==null?null:r.top))}},dependencies:[Zt,_l,qN],encapsulation:2}),n})(),MB=(()=>{class n{constructor(e,i,r,o,s){this.cdr=e,this.utils=i,this.dateAdapter=o,this.element=s,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new yt,this.eventClicked=new yt,this.eventTimesChanged=new yt,this.beforeViewRender=new yt,this.hourSegmentClicked=new yt,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=bB,this.trackByHourSegment=Dce,this.trackByHour=Oce,this.trackByWeekAllDayEvent=Ace,this.trackByWeekTimeEvent=Ice,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){let i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&Sce(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&getComputedStyle(this.element.nativeElement).direction==="rtl",this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);let r=new Map,o=[...this.events];this.timeEventResizes.forEach((s,a)=>{let l=this.getTimeEventResizedDates(a,s),u=je(je({},a),l);r.set(u,a);let f=o.indexOf(a);o[f]=u}),this.restoreOriginalEvents(o,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);let i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);let r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:ed.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){let o=this.allDayEventResizes.get(e),s=this.rtl?-1:1;if(typeof i.edges.left<"u"){let a=Math.round(+i.edges.left/r)*s;e.offset=o.originalOffset+a,e.span=o.originalSpan-a}else if(typeof i.edges.right<"u"){let a=Math.round(+i.edges.right/r)*s;e.span=o.originalSpan+a}}allDayEventResizeEnded(e){let i=this.allDayEventResizes.get(e);if(i){let r=i.edge==="left",o;r?o=e.offset-i.originalOffset:o=e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;let s=this.getAllDayEventResizedDates(e.event,o,r);this.eventTimesChanged.emit({newStart:s.start,newEnd:s.end,event:e.event,type:ed.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){Fce(e,i,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:ed.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,o){this.dayColumnWidth=this.getDayColumnWidth(e);let s=new vD(e,i);this.validateDrag=({x:a,y:l,transform:u})=>{let f=this.allDayEventResizes.size===0&&this.timeEventResizes.size===0&&s.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:u});if(f&&this.validateEventTimesChanged){let h=this.getDragMovedEventTimes(r,{x:a,y:l},this.dayColumnWidth,o);return this.validateEventTimesChanged({type:ed.Drag,event:r.event,newStart:h.start,newEnd:h.end})}return f},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&o&&this.view.hourColumns.forEach(a=>{let l=a.events.find(u=>u.event===r.event&&u!==r);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(e,i){let r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),o=e.event,s=je(je({},o),r),a=this.events.map(l=>l===o?s:l);this.restoreOriginalEvents(a,new Map([[s,o]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,o=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;let{start:s,end:a}=this.getDragMovedEventTimes(e,i,r,o);(this.snapDraggedEvents||this.eventDragEnterByType[o?"time":"allDay"]>0)&&Nce(s,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:s,newEnd:a,event:e.event,type:ed.Drag,allDay:!o}))}refreshHeader(){this.days=this.utils.getWeekViewHeader(je({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays},_D(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit(je({header:this.days},this.view))}getWeekView(e){return this.utils.getWeekView(je({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight},_D(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}getDragMovedEventTimes(e,i,r,o){let s=xB(i.x,r)/r*(this.rtl?-1:1),a=o?mD(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(Qu(this.dateAdapter,e.event.start,s,this.excludeDays),a),u;return e.event.end&&(u=this.dateAdapter.addMinutes(Qu(this.dateAdapter,e.event.end,s,this.excludeDays),a)),{start:l,end:u}}restoreOriginalEvents(e,i,r=!0){let o=this.view;r&&(this.view=this.getWeekView(e));let s=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,l)=>{o.hourColumns[l].hours.forEach((u,f)=>{u.segments.forEach((h,m)=>{a.hours[f].segments[m].cssClass=h.cssClass})}),s.forEach(u=>{let f=i.get(u),h=a.events.find(m=>m.event===(r?u:f));if(h)h.event=f,h.tempEvent=u,r||(h.height=0,h.width=0);else{let m={event:f,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:u};a.events.push(m)}})}),i.clear()}getTimeEventResizedDates(e,i){let r={start:e.start,end:fB(this.dateAdapter,e,this.minimumEventHeight)},u=e,{end:o}=u,s=zg(u,["end"]),a={start:this.dateAdapter.addMinutes(r.end,this.minimumEventHeight*-1),end:fB(this.dateAdapter,s,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof i.edges.left<"u"){let f=Math.round(+i.edges.left/this.dayColumnWidth)*l,h=Qu(this.dateAdapter,r.start,f,this.excludeDays);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.right<"u"){let f=Math.round(+i.edges.right/this.dayColumnWidth)*l,h=Qu(this.dateAdapter,r.end,f,this.excludeDays);h>a.end?r.end=h:r.end=a.end}if(typeof i.edges.top<"u"){let f=mD(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.start,f);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.bottom<"u"){let f=mD(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.end,f);h>a.end?r.end=h:r.end=a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);let o=new yD(e,r,this.rtl);this.validateResize=({rectangle:s,edges:a})=>{let l=o.validateResize({rectangle:je({},s),edges:a});if(l&&this.validateEventTimesChanged){let u;if(!r)u=this.getTimeEventResizedDates(i.event,{rectangle:s,edges:a});else{let f=this.rtl?-1:1;if(typeof a.left<"u"){let h=Math.round(+a.left/r)*f;u=this.getAllDayEventResizedDates(i.event,h,!this.rtl)}else{let h=Math.round(+a.right/r)*f;u=this.getAllDayEventResizedDates(i.event,h,this.rtl)}}return this.validateEventTimesChanged({type:ed.Resize,event:i.event,newStart:u.start,newEnd:u.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let o=e.start,s=e.end||e.start;return r?o=Qu(this.dateAdapter,o,i,this.excludeDays):s=Qu(this.dateAdapter,s,i,this.excludeDays),{start:o,end:s}}}return n.\u0275fac=function(e){return new(e||n)($(Xs),$(Ym),$(Ca),$(zc),$(ui))},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Cr],decls:8,vars:9,consts:[["dayColumns",""],["allDayEventsContainer",""],["eventRowContainer",""],["event",""],["weekEventTemplate",""],["role","grid",1,"cal-week-view"],[3,"dayHeaderClicked","eventDropped","dragEnter","days","locale","customTemplate"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress"],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag"],[3,"ngTemplateOutlet"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"mwlClick","drop","dragEnter","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel"]],template:function(e,i){if(e&1){let r=dt();g(0,"div",5)(1,"mwl-calendar-week-view-header",6),le("dayHeaderClicked",function(s){return Oe(r),Ae(i.dayHeaderClicked.emit(s))})("eventDropped",function(s){return Oe(r),Ae(i.eventDropped({dropData:s},s.newStart,!0))})("dragEnter",function(s){return Oe(r),Ae(i.dateDragEnter(s.date))}),_(),Te(2,uce,7,5,"div",7),g(3,"div",8),le("dragEnter",function(){return Oe(r),Ae(i.dragEnter("time"))})("dragLeave",function(){return Oe(r),Ae(i.dragLeave("time"))}),Te(4,hce,2,2,"div",9),g(5,"div",10,0),Te(7,bce,5,13,"div",11),_()()()}e&2&&(A(),X("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),A(),X("ngIf",i.view.allDayEventRows.length>0),A(2),X("ngIf",i.view.hourColumns.length>0&&i.daysInWeek!==1),A(),So("cal-resize-active",i.timeEventResizes.size>0),A(2),X("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[To,Mn,Zt,_l,hD,dB,nB,aD,Sx,Vce,Bce,zce,Hce],encapsulation:2}),n})(),xD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[vt,pD,$m,qm,pD,$m]}),n})();var pB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[vt,qm,xD]}),n})(),wB=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||td,i.dateFormatter||vh,i.utils||Ym,i.a11y||_h]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[qm,hB,xD,pB,qm,hB,xD,pB]}),n})();var Wce=Math.pow(10,8)*24*60*60*1e3,ZMe=-Wce,Px=6048e5,EB=864e5,yh=6e4,Dx=36e5,SB=1e3;var Gce=3600;var TB=Gce*24,KMe=TB*7,$ce=TB*365.2425,qce=$ce/12,JMe=qce*3,CD=Symbol.for("constructDateFrom");function Kt(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&CD in n?n[CD](t):n instanceof Date?new n.constructor(t):new Date(t)}function it(n,t){return Kt(t||n,n)}function Ua(n,t,e){let i=it(n,e?.in);return isNaN(t)?Kt(e?.in||n,NaN):(t&&i.setDate(i.getDate()+t),i)}function Ox(n,t,e){let i=it(n,e?.in);if(isNaN(t))return Kt(e?.in||n,NaN);if(!t)return i;let r=i.getDate(),o=Kt(e?.in||n,i.getTime());o.setMonth(i.getMonth()+t+1,0);let s=o.getDate();return r>=s?o:(i.setFullYear(o.getFullYear(),o.getMonth(),r),i)}function Ax(n,t,e){return Kt(e?.in||n,+it(n)+t)}function Ix(n,t,e){return Ax(n,t*Dx,e)}var Yce={};function Ts(){return Yce}function eo(n,t){let e=Ts(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=it(n,t?.in),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function aa(n,t){return eo(n,$t(je({},t),{weekStartsOn:1}))}function PB(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=Kt(e,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);let o=aa(r),s=Kt(e,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);let a=aa(s);return e.getTime()>=o.getTime()?i+1:e.getTime()>=a.getTime()?i:i-1}function nd(n){let t=it(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Hc(n,...t){let e=Kt.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function jc(n,t){let e=it(n,t?.in);return e.setHours(0,0,0,0),e}function DB(n,t,e){let[i,r]=Hc(e?.in,n,t),o=jc(i),s=jc(r),a=+o-nd(o),l=+s-nd(s);return Math.round((a-l)/EB)}function OB(n,t){let e=PB(n,t),i=Kt(t?.in||n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),aa(i)}function AB(n,t,e){let i=it(n,e?.in);return i.setTime(i.getTime()+t*yh),i}function IB(n,t,e){return Ax(n,t*1e3,e)}function xh(n,t,e){return Ua(n,t*7,e)}function RB(n,t){let e,i=t?.in;return n.forEach(r=>{!i&&typeof r=="object"&&(i=Kt.bind(null,r));let o=it(r,i);(!e||e<o||isNaN(+o))&&(e=o)}),Kt(i,e||NaN)}function kB(n,t,e){let[i,r]=Hc(e?.in,n,t);return+jc(i)==+jc(r)}function NB(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function FB(n){return!(!NB(n)&&typeof n!="number"||isNaN(+it(n)))}function UB(n,t,e){let[i,r]=Hc(e?.in,n,t),o=LB(i,r),s=Math.abs(DB(i,r));i.setDate(i.getDate()-o*s);let a=+(LB(i,r)===-o),l=o*(s-a);return l===0?0:l}function LB(n,t){let e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Rx(n){return t=>{let i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function kx(n,t){return+it(n)-+it(t)}function VB(n,t,e){let i=kx(n,t)/yh;return Rx(e?.roundingMethod)(i)}function BB(n,t){let e=it(n,t?.in);return e.setHours(23,59,59,999),e}function zB(n,t){let e=it(n,t?.in),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function HB(n,t,e){let i=kx(n,t)/1e3;return Rx(e?.roundingMethod)(i)}function jB(n,t){let e=it(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function WB(n,t){let e=Ts(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=it(n,t?.in),o=r.getDay(),s=(o<i?-7:0)+6-(o-i);return r.setDate(r.getDate()+s),r.setHours(23,59,59,999),r}var Xce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GB=(n,t,e)=>{let i,r=Xce[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Nx(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Zce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$B={date:Nx({formats:Zce,defaultWidth:"full"}),time:Nx({formats:Kce,defaultWidth:"full"}),dateTime:Nx({formats:Jce,defaultWidth:"full"})};var Qce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qB=(n,t,e,i)=>Qce[n];function bh(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;r=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}var eue={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tue={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iue={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},oue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sue=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},YB={ordinalNumber:sue,era:bh({values:eue,defaultWidth:"wide"}),quarter:bh({values:tue,defaultWidth:"wide",argumentCallback:n=>n-1}),month:bh({values:nue,defaultWidth:"wide"}),day:bh({values:iue,defaultWidth:"wide"}),dayPeriod:bh({values:rue,defaultWidth:"wide",formattingValues:oue,defaultFormattingWidth:"wide"})};function Ch(n){return(t,e={})=>{let i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;let s=o[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?lue(a,h=>h.test(s)):aue(a,h=>h.test(s)),u;u=n.valueCallback?n.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;let f=t.slice(s.length);return{value:u,rest:f}}}function aue(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function lue(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function XB(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let r=i[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(r.length);return{value:s,rest:a}}}var cue=/^(\d+)(th|st|nd|rd)?/i,uue=/\d+/i,due={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fue={any:[/^b/i,/^(a|c)/i]},hue={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},pue={any:[/1/i,/2/i,/3/i,/4/i]},mue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_ue={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vue={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yue={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xue={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZB={ordinalNumber:XB({matchPattern:cue,parsePattern:uue,valueCallback:n=>parseInt(n,10)}),era:Ch({matchPatterns:due,defaultMatchWidth:"wide",parsePatterns:fue,defaultParseWidth:"any"}),quarter:Ch({matchPatterns:hue,defaultMatchWidth:"wide",parsePatterns:pue,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ch({matchPatterns:mue,defaultMatchWidth:"wide",parsePatterns:gue,defaultParseWidth:"any"}),day:Ch({matchPatterns:_ue,defaultMatchWidth:"wide",parsePatterns:vue,defaultParseWidth:"any"}),dayPeriod:Ch({matchPatterns:yue,defaultMatchWidth:"any",parsePatterns:xue,defaultParseWidth:"any"})};var MD={code:"en-US",formatDistance:GB,formatLong:$B,formatRelative:qB,localize:YB,match:ZB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fx(n,t){let e=it(n,t?.in),i=+aa(e)-+OB(e);return Math.round(i/Px)+1}function Lx(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=Ts(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Kt(t?.in||n,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=eo(s,t),l=Kt(t?.in||n,0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);let u=eo(l,t);return+e>=+a?i+1:+e>=+u?i:i-1}function KB(n,t){let e=Ts(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=Lx(n,t),o=Kt(t?.in||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),eo(o,t)}function JB(n,t){let e=it(n,t?.in),i=+eo(e,t)-+KB(e,t);return Math.round(i/Px)+1}var QB=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},ez=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bue=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return QB(n,t);let o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",QB(i,t)).replace("{{time}}",ez(r,t))},wD={p:ez,P:bue};var Cue=/^D+$/,Mue=/^Y+$/,wue=["D","DD","YY","YYYY"];function tz(n){return Cue.test(n)}function nz(n){return Mue.test(n)}function ED(n,t,e){let i=Eue(n,t,e);if(console.warn(i),wue.includes(n))throw new RangeError(i)}function Eue(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function iz(n,t){return it(n,t?.in).getDate()}function rz(n,t){return it(n,t?.in).getDay()}function oz(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=e.getMonth(),o=Kt(e,0);return o.setFullYear(i,r+1,0),o.setHours(0,0,0,0),o.getDate()}function sz(){return Object.assign({},Ts())}function az(n,t){return it(n,t?.in).getHours()}function lz(n,t){let e=it(n,t?.in).getDay();return e===0?7:e}function cz(n,t){return it(n,t?.in).getMinutes()}function uz(n,t){return it(n,t?.in).getMonth()}function dz(n,t){return it(n,t?.in).getFullYear()}function fz(n,t){let e=Sue(t)?new t(0):Kt(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function Sue(n){return typeof n=="function"&&n.prototype?.constructor===n}var Tue=10,Ux=class{subPriority=0;validate(t,e){return!0}},Vx=class extends Ux{constructor(t,e,i,r,o){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=r,o&&(this.subPriority=o)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}},Bx=class extends Ux{priority=Tue;subPriority=-1;constructor(t,e){super(),this.context=t||(i=>Kt(e,i))}set(t,e){return e.timestampIsSet?t:Kt(t,fz(t,this.context))}};var bt=class{run(t,e,i,r){let o=this.parse(t,e,i,r);return o?{setter:new Vx(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,e,i){return!0}};var zx=class extends bt{priority=140;parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]};var Hn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ps={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function si(n,t){return n&&{value:t(n.value),rest:n.rest}}function Bn(n,t){let e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Ds(n,t){let e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};let i=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,s=e[5]?parseInt(e[5],10):0;return{value:i*(r*Dx+o*yh+s*SB),rest:t.slice(e[0].length)}}function Hx(n){return Bn(Hn.anyDigitsSigned,n)}function mn(n,t){switch(n){case 1:return Bn(Hn.singleDigit,t);case 2:return Bn(Hn.twoDigits,t);case 3:return Bn(Hn.threeDigits,t);case 4:return Bn(Hn.fourDigits,t);default:return Bn(new RegExp("^\\d{1,"+n+"}"),t)}}function Mh(n,t){switch(n){case 1:return Bn(Hn.singleDigitSigned,t);case 2:return Bn(Hn.twoDigitsSigned,t);case 3:return Bn(Hn.threeDigitsSigned,t);case 4:return Bn(Hn.fourDigitsSigned,t);default:return Bn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function wh(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function jx(n,t){let e=t>0,i=e?t:1-t,r;if(i<=50)r=n||100;else{let o=i+50,s=Math.trunc(o/100)*100,a=n>=o%100;r=n+s-(a?100:0)}return e?r:1-r}function Wx(n){return n%400===0||n%4===0&&n%100!==0}var Gx=class extends bt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="yy"});switch(e){case"y":return si(mn(4,t),r);case"yo":return si(i.ordinalNumber(t,{unit:"year"}),r);default:return si(mn(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let r=t.getFullYear();if(i.isTwoDigitYear){let s=jx(i.year,r);return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}let o=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}};var $x=class extends bt{priority=130;parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="YY"});switch(e){case"Y":return si(mn(4,t),r);case"Yo":return si(i.ordinalNumber(t,{unit:"year"}),r);default:return si(mn(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,r){let o=Lx(t,r);if(i.isTwoDigitYear){let a=jx(i.year,o);return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),eo(t,r)}let s=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(s,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),eo(t,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]};var qx=class extends bt{priority=130;parse(t,e){return e==="R"?Mh(4,t):Mh(e.length,t)}set(t,e,i){let r=Kt(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),aa(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]};var Yx=class extends bt{priority=130;parse(t,e){return e==="u"?Mh(4,t):Mh(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]};var Xx=class extends bt{priority=120;parse(t,e,i){switch(e){case"Q":case"QQ":return mn(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]};var Zx=class extends bt{priority=120;parse(t,e,i){switch(e){case"q":case"qq":return mn(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]};var Kx=class extends bt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"M":return si(Bn(Hn.month,t),r);case"MM":return si(mn(2,t),r);case"Mo":return si(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}};var Jx=class extends bt{priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"L":return si(Bn(Hn.month,t),r);case"LL":return si(mn(2,t),r);case"Lo":return si(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]};function hz(n,t,e){let i=it(n,e?.in),r=JB(i,e)-t;return i.setDate(i.getDate()-r*7),it(i,e?.in)}var Qx=class extends bt{priority=100;parse(t,e,i){switch(e){case"w":return Bn(Hn.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,r){return eo(hz(t,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]};function pz(n,t,e){let i=it(n,e?.in),r=Fx(i,e)-t;return i.setDate(i.getDate()-r*7),i}var eb=class extends bt{priority=100;parse(t,e,i){switch(e){case"I":return Bn(Hn.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return aa(pz(t,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]};var Pue=[31,28,31,30,31,30,31,31,30,31,30,31],Due=[31,29,31,30,31,30,31,31,30,31,30,31],tb=class extends bt{priority=90;subPriority=1;parse(t,e,i){switch(e){case"d":return Bn(Hn.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return mn(e.length,t)}}validate(t,e){let i=t.getFullYear(),r=Wx(i),o=t.getMonth();return r?e>=1&&e<=Due[o]:e>=1&&e<=Pue[o]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]};var nb=class extends bt{priority=90;subpriority=1;parse(t,e,i){switch(e){case"D":case"DD":return Bn(Hn.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return mn(e.length,t)}}validate(t,e){let i=t.getFullYear();return Wx(i)?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]};function Eh(n,t,e){let i=Ts(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=it(n,e?.in),s=o.getDay(),l=(t%7+7)%7,u=7-r,f=t<0||t>6?t-(s+u)%7:(l+u)%7-(s+u)%7;return Ua(o,f,e)}var ib=class extends bt{priority=90;parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Eh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]};var rb=class extends bt{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return si(mn(e.length,t),o);case"eo":return si(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Eh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]};var ob=class extends bt{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return si(mn(e.length,t),o);case"co":return si(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Eh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]};function mz(n,t,e){let i=it(n,e?.in),r=lz(i,e),o=t-r;return Ua(i,o,e)}var sb=class extends bt{priority=90;parse(t,e,i){let r=o=>o===0?7:o;switch(e){case"i":case"ii":return mn(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return si(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return si(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return si(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return si(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return t=mz(t,i),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]};var ab=class extends bt{priority=80;parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(wh(i),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]};var lb=class extends bt{priority=80;parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(wh(i),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]};var cb=class extends bt{priority=80;parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(wh(i),0,0,0),t}incompatibleTokens=["a","b","t","T"]};var ub=class extends bt{priority=70;parse(t,e,i){switch(e){case"h":return Bn(Hn.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]};var db=class extends bt{priority=70;parse(t,e,i){switch(e){case"H":return Bn(Hn.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]};var fb=class extends bt{priority=70;parse(t,e,i){switch(e){case"K":return Bn(Hn.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]};var hb=class extends bt{priority=70;parse(t,e,i){switch(e){case"k":return Bn(Hn.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){let r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]};var pb=class extends bt{priority=60;parse(t,e,i){switch(e){case"m":return Bn(Hn.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}incompatibleTokens=["t","T"]};var mb=class extends bt{priority=50;parse(t,e,i){switch(e){case"s":return Bn(Hn.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}incompatibleTokens=["t","T"]};var gb=class extends bt{priority=30;parse(t,e){let i=r=>Math.trunc(r*Math.pow(10,-e.length+3));return si(mn(e.length,t),i)}set(t,e,i){return t.setMilliseconds(i),t}incompatibleTokens=["t","T"]};var _b=class extends bt{priority=10;parse(t,e){switch(e){case"X":return Ds(Ps.basicOptionalMinutes,t);case"XX":return Ds(Ps.basic,t);case"XXXX":return Ds(Ps.basicOptionalSeconds,t);case"XXXXX":return Ds(Ps.extendedOptionalSeconds,t);case"XXX":default:return Ds(Ps.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Kt(t,t.getTime()-nd(t)-i)}incompatibleTokens=["t","T","x"]};var vb=class extends bt{priority=10;parse(t,e){switch(e){case"x":return Ds(Ps.basicOptionalMinutes,t);case"xx":return Ds(Ps.basic,t);case"xxxx":return Ds(Ps.basicOptionalSeconds,t);case"xxxxx":return Ds(Ps.extendedOptionalSeconds,t);case"xxx":default:return Ds(Ps.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Kt(t,t.getTime()-nd(t)-i)}incompatibleTokens=["t","T","X"]};var yb=class extends bt{priority=40;parse(t){return Hx(t)}set(t,e,i){return[Kt(t,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"};var xb=class extends bt{priority=20;parse(t){return Hx(t)}set(t,e,i){return[Kt(t,i),{timestampIsSet:!0}]}incompatibleTokens="*"};var gz={G:new zx,y:new Gx,Y:new $x,R:new qx,u:new Yx,Q:new Xx,q:new Zx,M:new Kx,L:new Jx,w:new Qx,I:new eb,d:new tb,D:new nb,E:new ib,e:new rb,c:new ob,i:new sb,a:new ab,b:new lb,B:new cb,h:new ub,H:new db,K:new fb,k:new hb,m:new pb,s:new mb,S:new gb,X:new _b,x:new vb,t:new yb,T:new xb};var Oue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Aue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Iue=/^'([^]*?)'?$/,Rue=/''/g,kue=/\S/,Nue=/[a-zA-Z]/;function _z(n,t,e,i){let r=()=>Kt(i?.in||e,NaN),o=sz(),s=i?.locale??o.locale??MD,a=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return n?r():it(e,i?.in);let u={firstWeekContainsDate:a,weekStartsOn:l,locale:s},f=[new Bx(i?.in,e)],h=t.match(Aue).map(x=>{let b=x[0];if(b in wD){let P=wD[b];return P(x,s.formatLong)}return x}).join("").match(Oue),m=[];for(let x of h){!i?.useAdditionalWeekYearTokens&&nz(x)&&ED(x,t,n),!i?.useAdditionalDayOfYearTokens&&tz(x)&&ED(x,t,n);let b=x[0],P=gz[b];if(P){let{incompatibleTokens:E}=P;if(Array.isArray(E)){let L=m.find(B=>E.includes(B.token)||B.token===b);if(L)throw new RangeError(`The format string mustn't contain \`${L.fullToken}\` and \`${x}\` at the same time`)}else if(P.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);m.push({token:b,fullToken:x});let D=P.run(n,x,s.match,u);if(!D)return r();f.push(D.setter),n=D.rest}else{if(b.match(Nue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(x==="''"?x="'":b==="'"&&(x=Fue(x)),n.indexOf(x)===0)n=n.slice(x.length);else return r()}}if(n.length>0&&kue.test(n))return r();let p=f.map(x=>x.priority).sort((x,b)=>b-x).filter((x,b,P)=>P.indexOf(x)===b).map(x=>f.filter(b=>b.priority===x).sort((b,P)=>P.subPriority-b.subPriority)).map(x=>x[0]),y=it(e,i?.in);if(isNaN(+y))return r();let C={};for(let x of p){if(!x.validate(y,u))return r();let b=x.set(y,C,u);Array.isArray(b)?(y=b[0],Object.assign(C,b[1])):y=b}return y}function Fue(n){return n.match(Iue)[1].replace(Rue,"'")}function vz(n,t){let e=it(n,t?.in);return e.setSeconds(0,0),e}function yz(n,t,e){let[i,r]=Hc(e?.in,n,t);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}function SD(n,t){let e=it(n,t?.in);return e.setMilliseconds(0),e}function xz(n,t){return+SD(n)==+SD(t)}function bz(n,t,e){return Ua(n,-t,e)}function Cz(n,t,e){let i=it(n,e?.in),r=i.getFullYear(),o=i.getDate(),s=Kt(e?.in||n,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);let a=oz(s);return i.setMonth(t,Math.min(o,a)),i}function Mz(n,t,e){let i=it(n,e?.in);return i.setDate(t),i}function wz(n,t,e){let i=it(n,e?.in);return i.setHours(t),i}function Ez(n,t,e){let i=it(n,e?.in);return i.setMinutes(t),i}function Sz(n,t,e){let i=it(n,e?.in);return isNaN(+i)?Kt(e?.in||n,NaN):(i.setFullYear(t),i)}function Tz(n,t,e){return Ox(n,-t,e)}function bb(n,t,e){return xh(n,-t,e)}function Lue(n){return new Date(n).getTimezoneOffset()}function Pz(){return{addDays:Ua,addHours:Ix,addMinutes:AB,addSeconds:IB,differenceInDays:UB,differenceInMinutes:VB,differenceInSeconds:HB,endOfDay:BB,endOfMonth:zB,endOfWeek:WB,getDay:rz,getMonth:uz,isSameDay:kB,isSameMonth:yz,isSameSecond:xz,max:RB,setHours:wz,setMinutes:Ez,startOfDay:jc,startOfMinute:vz,startOfMonth:jB,startOfWeek:eo,getHours:az,getMinutes:cz,getTimezoneOffset:Lue}}function Dz(){return Qh(Qh({},Pz()),{addWeeks:xh,addMonths:Ox,subDays:bz,subWeeks:bb,subMonths:Tz,getISOWeek:Fx,setDate:Mz,setMonth:Cz,setYear:Sz,getDate:iz,getYear:dz})}function Uue(n,t){if(n&1&&(g(0,"div"),me(1,"input",25),M(2),_()),n&2){let e=t.$implicit,i=t.index;A(),X("formControlName",i),A(),xt(" ",e," ")}}function Vue(n,t){if(n&1&&(g(0,"div",26),M(1),_()),n&2){let e=ce(2);A(),xt(" ",e.errorMessage," ")}}function Bue(n,t){if(n&1){let e=dt();g(0,"div",14)(1,"div",15)(2,"h3"),M(3,"Edit Availability Slots"),_(),g(4,"button",9),le("click",function(){Oe(e);let r=ce();return Ae(r.toggleEditAvailability())}),me(5,"img",16),_(),g(6,"form",17),le("ngSubmit",function(){Oe(e);let r=ce();return Ae(r.onSubmit())}),g(7,"label",18),M(8,"Date"),_(),g(9,"input",19),le("change",function(r){Oe(e);let o=ce();return Ae(o.onUpdateDateChange(r))}),_(),g(10,"label",20),M(11,"Select Hours"),_(),g(12,"div",21),Te(13,Uue,3,2,"div",22),_(),Te(14,Vue,2,1,"div",23),g(15,"button",24),M(16,"Confirm"),_()()()()}if(n&2){let e=ce();A(6),X("formGroup",e.availabilityForm),A(3),X("value",e.today),A(4),X("ngForOf",e.hours),A(),X("ngIf",e.errorMessage)}}var Oz=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.staffId="",this.staffName="",this.availabilitySlots=[],this.viewDate=new Date,this.today="",this.view=bD.Week,this.events=[],this.showEditAvailability=!1,this.availabilityType="",this.errorMessage="",this.hours=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],this.addAvailabilitySlots="",this.removeAvailabilitySlots="",this.availabilityForm=this.fb.group({date:[""],selectedHours:this.fb.array(this.hours.map(()=>this.fb.control(!1)))}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadStaffDetails()}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.staffName=e.fullName,this.availabilitySlots=e.availabilitySlots,this.populateEvents()},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}populateEvents(){this.events=this.availabilitySlots.map(e=>{let i=_z(e,"dd/MM/yyyy HH:mm:ss",new Date);return FB(i)?{start:i,end:Ix(i,1),title:"Available",color:{primary:"#1e90ff",secondary:"#D1E8FF"}}:null}).filter(e=>e!==null)}initFromUpdate(){let e=new Date;this.today=e.toISOString().split("T")[0],this.availabilityForm.patchValue({date:this.today}),this.onUpdateDateChange({target:{value:this.today}})}previousWeek(){this.viewDate=bb(this.viewDate,1)}nextWeek(){this.viewDate=xh(this.viewDate,1)}onDateChange(e){this.viewDate=new Date(e.target.value)}toggleEditAvailability(){this.showEditAvailability=!this.showEditAvailability,this.initFromUpdate()}formatDateString(e){let i=new Date(e),r=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),s=i.getFullYear();return`${r}/${o}/${s}`}onUpdateDateChange(e){let i=this.formatDateString(e.target.value);this.availabilityForm.setControl("selectedHours",this.fb.array(this.hours.map(()=>this.fb.control(!1)))),this.availabilitySlots.forEach(r=>{let[o,s]=r.split(" ");if(o===i){let a=this.hours.indexOf(s.slice(0,5));a!==-1&&this.availabilityForm.get("selectedHours").at(a).setValue(!0)}})}onSubmit(){if(this.availabilityForm.value.date===""){this.errorMessage="Please select a date";return}let e=this.availabilityForm.value.date,i=this.availabilityForm.value.selectedHours.map((a,l)=>a?this.hours[l]:null).filter(a=>a!==null),r=this.availabilityForm.value.selectedHours.map((a,l)=>a?null:this.hours[l]).filter(a=>a!==null),o=i.map(a=>`${e} ${a}`).join(","),s=r.map(a=>`${e} ${a}`).join(",");if(o===this.addAvailabilitySlots&&s===this.removeAvailabilitySlots){this.errorMessage="No changes detected in availability slots";return}this.addAvailabilitySlots=o,this.removeAvailabilitySlots=s,this.SubmitAvailabilitySlots()}SubmitAvailabilitySlots(){let e={phoneNumber:"",email:"",addAvailabilitySlots:this.addAvailabilitySlots,removeAvailabilitySlots:this.removeAvailabilitySlots,specializationName:""};this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.loadStaffDetails()},error:i=>{if(console.error("Error Updating staff",i),console.error("Error status",i.status),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Sa),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-view-availability"]],standalone:!0,features:[zi([Ym,_h,vh,td,{provide:zc,useFactory:Dz}]),Je],decls:25,vars:11,consts:[[1,"view-availability-staff-container"],[1,"screens-container"],[1,"view-availability-staff-screen"],[1,"top"],["type","button",1,"btn-availability",3,"click"],["type","button","routerLink","/search-staffs",1,"btn-back"],[1,"page-body"],[1,"calendar-body"],[1,"calendar-navigation"],["type","button",3,"click"],["type","date","title","Select date","placeholder","Select date",3,"change","value"],[1,"calendar-container"],[3,"viewDate","events","hourSegments","dayStartHour","dayEndHour"],["class","edit-screen",4,"ngIf"],[1,"edit-screen"],[1,"staff-edit"],["src","fechar.png","alt","Close"],[3,"ngSubmit","formGroup"],["for","date"],["type","date","id","date","formControlName","date","required","",3,"change","value"],["for","hours"],["formArrayName","selectedHours"],[4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],["type","checkbox","title","Select hour",3,"formControlName"],[1,"error-message"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),le("click",function(){return r.toggleEditAvailability()}),M(6,"Edit Availability Slots"),_(),g(7,"button",5),M(8," Go Back"),_(),g(9,"h2"),M(10,"Availability for Staff"),_(),g(11,"h3"),M(12),_()(),g(13,"div",6)(14,"div",7)(15,"div",8)(16,"button",9),le("click",function(){return r.previousWeek()}),M(17,"Previous Week"),_(),g(18,"input",10),zr(19,"date"),le("change",function(s){return r.onDateChange(s)}),_(),g(20,"button",9),le("click",function(){return r.nextWeek()}),M(21,"Next Week"),_()(),g(22,"div",11),me(23,"mwl-calendar-week-view",12),_()()()(),Te(24,Bue,17,4,"div",13),_()()),i&2&&(A(12),Ye(r.staffName),A(6),X("value",dl(19,8,r.viewDate,"yyyy-MM-dd")),A(5),X("viewDate",r.viewDate)("events",r.events)("hourSegments",1)("dayStartHour",0)("dayEndHour",24),A(),X("ngIf",r.showEditAvailability))},dependencies:[Dt,Yt,kt,im,Ft,qt,hn,vt,Mn,Zt,Eu,Vt,wB,MB,nr,wr,Rr,Cf,Nt,Wt],styles:[".view-availability-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;font-family:Poppins,sans-serif}.view-availability-staff-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.view-availability-staff-container[_ngcontent-%COMP%]   .view-availability-staff-screen[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:1000px;height:90vh;display:flex;flex-direction:column;align-items:center;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#28a745;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex:1;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff;margin-bottom:10px;display:flex;flex-direction:column;overflow:hidden;flex:1}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:16px;cursor:pointer;transition:border-color .3s,box-shadow .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:hover{color:#1e90ff}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#1e90ff;box-shadow:0 0 5px #1e90ff80;outline:none}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::placeholder{color:#aaa}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#1e90ff;color:#fff;border:none;border-radius:3px;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1c86ee}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]     .cal-event-title{display:flex;justify-content:center;align-items:center;height:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-day-column[_ngcontent-%COMP%]{min-height:100px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-hour-segment[_ngcontent-%COMP%]{height:50px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]{padding:20px;width:300px;height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]{width:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;font-weight:700}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:4px;margin-bottom:1rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#28a745;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem}"]})}}return n})();var Az=n=>({error:n});function zue(n,t){if(n&1&&(g(0,"div",13),M(1),_()),n&2){let e=ce(2);A(),xt(" ",e.errorMessage," ")}}function Hue(n,t){if(n&1){let e=dt();g(0,"form",5),le("ngSubmit",function(){Oe(e);let r=ce();return Ae(r.activateUser())}),g(1,"div",6)(2,"label",7),M(3,"New Password"),_(),g(4,"input",8),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.newPassword,r)||(o.newPassword=r),Ae(r)}),_(),g(5,"label",9),M(6,"Confirm Password"),_(),g(7,"input",10),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.confirmPassword,r)||(o.confirmPassword=r),Ae(r)}),_()(),Te(8,zue,2,1,"div",11),g(9,"button",12),M(10,"Activate"),_()()}if(n&2){let e=ce();A(4),Xe("ngModel",e.newPassword),X("ngClass",ri(5,Az,e.newPasswordError)),A(3),Xe("ngModel",e.confirmPassword),X("ngClass",ri(7,Az,e.confirmPasswordError)),A(),X("ngIf",e.errorMessage)}}function jue(n,t){if(n&1){let e=dt();g(0,"div",14),me(1,"img",15),g(2,"p"),M(3,"User activated successfully!"),_(),g(4,"button",16),le("click",function(){Oe(e);let r=ce();return Ae(r.goToHome())}),M(5,"Go to Home"),_()()}}var Iz=(()=>{class n{constructor(e,i,r){this.staffService=e,this.router=i,this.route=r,this.token="",this.newPassword="",this.confirmPassword="",this.errorMessage="",this.activationSuccessful=!1,this.newPasswordError=!1,this.confirmPasswordError=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.token=e.token||""})}activateUser(){if(this.newPasswordError=!this.newPassword.trim(),this.confirmPasswordError=!this.confirmPassword.trim(),!(this.newPasswordError||this.confirmPasswordError)){if(this.token=this.token.trim(),this.newPassword=this.newPassword.trim(),this.confirmPassword=this.confirmPassword.trim(),this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match.";return}this.staffService.activateUser(this.token,this.newPassword).subscribe({next:e=>{console.log("User activated",e),this.errorMessage="",this.activationSuccessful=!0},error:e=>{if(console.error("Error activating user",e),e.status===400){let i=e.error;this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Activation failed - "+e.error)}})}}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-active-staff"]],standalone:!0,features:[Je],decls:7,vars:2,consts:[[1,"activate-user-container"],[1,"activate-user-middle"],[1,"top"],["class","info-container",3,"ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container",3,"ngSubmit"],[1,"form-group"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","placeholder","Enter new password","required","",3,"ngModelChange","ngModel","ngClass"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm password","required","",3,"ngModelChange","ngModel","ngClass"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-submit"],[1,"error-message"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),M(4,"Activate User"),_()(),Te(5,Hue,11,9,"form",3)(6,jue,6,0,"div",4),_()()),i&2&&(A(5),X("ngIf",!r.activationSuccessful),A(),X("ngIf",r.activationSuccessful))},dependencies:[vt,To,Zt,Dt,Yt,kt,Ft,qt,hn,Tn,qn],styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.activate-user-container[_ngcontent-%COMP%]   .activate-user-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:500px;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border:2px solid red}.activate-user-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.activate-user-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var Va=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Doctor")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Mt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Rz=(()=>{class n{constructor(e){this.panelService=e}ngOnInit(){this.panelService.setPanelId("panel-doctor")}static{this.\u0275fac=function(i){return new(i||n)($(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-doctor-panel"]],standalone:!0,features:[Je],decls:13,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"header"],[1,"stats"],["routerLink","/medical-history-manager","routerLinkActive","active",1,"box","box1"],["routerLink","/appointment-manager","routerLinkActive","active",1,"box","box2"],["routerLink","/operation-requests","routerLinkActive","active",1,"box","box3"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Doctor Panel"),_()(),g(6,"div",3)(7,"button",4),M(8," Manage Medical Histories "),_(),g(9,"button",5),M(10," Manage Appointments "),_(),g(11,"button",6),M(12," Manage Operation Requests "),_()()()())},dependencies:[Vt,Nt,Wt,Ea],styles:['.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box3";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.5em;font-weight:700;box-shadow:0 4px 8px #0000001a}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#e70a0a}']})}}return n})();var Os=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}createOperationRequest(e){return console.log(e),this.http.post(`${this.apiUrl}/OperationRequest`,e).pipe(_n(i=>(console.error("Error creating operation request:",i),In(i))))}editOperationRequest(e,i){return console.log(e),this.http.put(`${this.apiUrl}/OperationRequest/${e}`,i,{responseType:"json"}).pipe(_n(r=>(console.error("Error editing operation request:",r),In(r))))}getOperationRequests(){return this.http.get(`${this.apiUrl}/operationRequest`).pipe(_n(e=>(console.error("Error fetching operation requests:",e),In(()=>new Error("Failed to fetch operation requests")))))}deleteOperationRequest(e,i){return this.http.delete(`${this.apiUrl}/OperationRequest/${e}?doctorLicenseNumber=${i}`,{observe:"response"}).pipe(_n(r=>(console.error("Error deleting operation request:",r),In(r))))}getOperationRequestsWithAdvancedFilter(e,i,r,o,s,a){let l=new URLSearchParams({operationRequest:e||"",doctorLicenseNumber:i||"",operationType:r||"",deadlineDate:o||"",patientMedicalRecordNumber:s||"",priority:a||""});return this.http.get(`${this.apiUrl}/OperationRequest?${l.toString()}`)}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Wue=n=>["/update-operation-request",n],Gue=n=>["/create-appointment",n],$ue=n=>["/view-appointment-details",n];function que(n,t){if(n&1){let e=dt();bu(0),g(1,"a",12),M(2,"Edit"),_(),g(3,"a",13),le("click",function(){Oe(e);let r=ce().$implicit,o=ce();return Ae(o.deleteOperationRequest(r.id,r.doctorLicenseNumber))}),M(4,"Delete"),_(),g(5,"a",14),M(6,"Create Appointment"),_(),Cu()}if(n&2){let e=ce().$implicit;A(),X("routerLink",ri(2,Wue,e.id)),A(4),X("routerLink",ri(4,Gue,e.id))}}function Yue(n,t){if(n&1&&(g(0,"a",14),M(1,"View Appointment Details"),_()),n&2){let e=ce().$implicit;X("routerLink",ri(1,$ue,e.id))}}function Xue(n,t){if(n&1&&(g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td"),M(6),_(),g(7,"td"),M(8),_(),g(9,"td"),M(10),_(),g(11,"td"),M(12),_(),g(13,"td"),Te(14,que,7,6,"ng-container",11)(15,Yue,2,3,"ng-template",null,0,Ys),_()()),n&2){let e=t.$implicit,i=t.index,r=Ii(16),o=ce();A(2),Ye(i+1),A(2),Ye(e.patientName),A(2),Ye(e.doctorLicenseNumber),A(2),Ye(e.operationType),A(2),Ye(e.deadlineDate),A(2),Ye(e.priority),A(2),X("ngIf",o.currentView==="Pending")("ngIfElse",r)}}var kz=(()=>{class n{constructor(e,i,r){this.staffService=e,this.panelService=i,this.operationRequestService=r,this.operationRequests=[],this.operationTypes=[],this.searchTerm="",this.patients=[],this.email="",this.doctors=[],this.staffProfiles=[],this.doctorLicenseNumber="",this.currentView="Pending"}ngOnInit(){this.loadStaffProfiles(),this.panelService.setPanelId("panel-doctor"),this.fetchOperationRequests()}toggleView(){this.currentView=this.currentView==="Pending"?"Accepted":"Pending",this.fetchOperationRequests()}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.doctorLicenseNumber===this.doctorLicenseNumber&&i.status===this.currentView),console.log("Filtered operation requests:",this.operationRequests)},e=>{console.error("Error fetching operation requests",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=Ta(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&(this.doctorLicenseNumber=this.doctors[0].licenseNumber,console.log("Doctor license number:",this.doctorLicenseNumber),this.fetchOperationRequests())}console.log("Doctors:",this.doctors)},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}deleteOperationRequest(e,i){window.confirm(`Are you sure you want to delete the operation request: ${e}?`)&&this.operationRequestService.deleteOperationRequest(e,i).subscribe(()=>{alert("Operation request deleted successfully")},o=>{console.error("Error deleting operation Request:",o)})}viewOperationRequestDetails(e){console.log(`Viewing details for operationRequest ${e}`),this.operationRequestService.getOperationRequestsWithAdvancedFilter().subscribe(i=>{this.selectedOperationRequest=e[0],console.log("Operation request fetched:",i)},i=>{console.error("Error fetching operation request",i)})}searchOperationRequests(){this.searchTerm?this.operationRequests=this.operationRequests.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.fetchOperationRequests()}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Fn),$(Os))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-operation-requests"]],standalone:!0,features:[Je],decls:31,vars:2,consts:[["scheduledActions",""],[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-operation-request",1,"btn","btn-create"],[1,"btn","btn-toggle",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],[1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",1),me(1,"app-sidebar"),g(2,"div",2)(3,"div",3)(4,"button",4),M(5," Create Operation Request "),_(),g(6,"button",5),le("click",function(){return r.toggleView()}),M(7),_(),g(8,"h2",6),M(9,"Operation Request Manager"),_(),g(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),M(16,"Operation Request"),_(),g(17,"th"),M(18,"Patient"),_(),g(19,"th"),M(20,"Doctor"),_(),g(21,"th"),M(22,"Operation Type"),_(),g(23,"th"),M(24,"Deadline"),_(),g(25,"th"),M(26,"Priority"),_(),g(27,"th"),M(28,"Actions"),_()()(),g(29,"tbody"),Te(30,Xue,17,8,"tr",10),_()()()()()()()),i&2&&(A(7),xt(" ",r.currentView==="Pending"?"Show Accepted Requests":"Show Pending Requests"," "),A(23),X("ngForOf",r.operationRequests))},dependencies:[vt,Mn,Zt,Nt,Wt,Vt,Dt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;height:90vh;background-color:#f9f9f9;width:1500px;max-width:2000px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#ffc107;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:150%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var Zue=()=>["/operation-requests"];function Kue(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Deadline date is required."),_()())}function Jue(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Priority is required."),_()())}function Que(n,t){if(n&1&&(g(0,"option",24),M(1),_()),n&2){let e=t.$implicit;X("value",e.medicalRecordNumber),A(),C1(" ",e.medicalRecordNumber," - ",e.fullName," ")}}function ede(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Patient selection is required."),_()())}function tde(n,t){if(n&1&&(g(0,"option"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.name," ")}}function nde(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Operation type selection is required."),_()())}var Nz=(()=>{class n{constructor(e,i,r,o,s,a,l){this.fb=e,this.operationRequestService=i,this.router=r,this.patientService=o,this.operationTypeService=s,this.staffService=a,this.panelService=l,this.patients=[],this.operationTypes=[],this.doctors=[],this.staffProfiles=[],this.email="",this.operationRequestForm=this.fb.group({deadlineDate:["",Gt.required],priority:["",Gt.required],patientMedicalRecordNumber:["",Gt.required],doctorLicenseNumber:[""],operationType:["",Gt.required]})}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.operationRequestForm=this.fb.group({deadlineDate:["",Gt.required],priority:["",Gt.required],patientMedicalRecordNumber:["",Gt.required],doctorLicenseNumber:[""],operationType:["",Gt.required]}),this.fetchPatients(),this.loadStaffProfiles()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{let i=this.doctors.length>0?this.doctors[0].specializationId:null;i?(e.forEach(r=>{r.specializations.forEach(o=>{console.log("Operation type specialization ID:",o.id.value)})}),this.operationTypes=e.filter(r=>r.specializations.some(o=>o.id.value===i))):this.operationTypes=e,console.log("Filtered operation types:",this.operationTypes)},e=>{console.error("Error fetching operation types",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=Ta(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&this.operationRequestForm.patchValue({doctorLicenseNumber:this.doctors[0].licenseNumber})}console.log("Doctors:",this.doctors),this.fetchOperationTypes()},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}onSubmit(){this.operationRequestForm.valid?this.operationRequestService.createOperationRequest(this.operationRequestForm.value).subscribe(e=>{alert("Operation requested successfully"),this.router.navigate(["/operation-requests"])},e=>{console.error("Error requesting operation",e),alert("There was an error requesting the operation. Please try again.")}):alert("Please fill in all required fields.")}static{this.\u0275fac=function(i){return new(i||n)($(Sa),$(Os),$(Mt),$(Ss),$(vs),$(ir),$(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-operation-request"]],standalone:!0,features:[Je],decls:45,vars:10,consts:[[1,"operationRequest-container"],[1,"form-and-table-container"],[1,"form-container"],[1,"operation-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","deadlineDate"],["type","date","id","deadlineDate","formControlName","deadlineDate","placeholder","YYYY-MM-DD"],[4,"ngIf"],["for","priority"],["id","priority","formControlName","priority"],["value","","disabled","","selected",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["for","patientMedicalRecordNumber"],["id","patientMedicalRecordNumber","formControlName","patientMedicalRecordNumber"],[3,"value",4,"ngFor","ngForOf"],["for","operationType"],["id","operationType","formControlName","operationType"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"error"],[3,"value"]],template:function(i,r){if(i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),M(5,"Create Operation Request"),_(),g(6,"form",4),le("ngSubmit",function(){return r.onSubmit()}),g(7,"div",5)(8,"label",6),M(9,"Deadline Date:"),_(),me(10,"input",7),Te(11,Kue,3,0,"div",8),_(),g(12,"div",5)(13,"label",9),M(14,"Priority:"),_(),g(15,"select",10)(16,"option",11),M(17,"Select priority"),_(),g(18,"option",12),M(19,"Elective Surgery"),_(),g(20,"option",13),M(21,"Urgent Surgery"),_(),g(22,"option",14),M(23,"Emergency Surgery"),_()(),Te(24,Jue,3,0,"div",8),_(),g(25,"div",5)(26,"label",15),M(27,"Select Patient:"),_(),g(28,"select",16)(29,"option",11),M(30,"Select patient"),_(),Te(31,Que,2,3,"option",17),_(),Te(32,ede,3,0,"div",8),_(),g(33,"div",5)(34,"label",18),M(35,"Select Operation Type:"),_(),g(36,"select",19)(37,"option",11),M(38,"Select operation type"),_(),Te(39,tde,2,1,"option",20),_(),Te(40,nde,3,0,"div",8),_(),g(41,"button",21),M(42," Create Request "),_(),g(43,"a",22),M(44,"Back"),_()()()()()),i&2){let o,s,a,l;A(6),X("formGroup",r.operationRequestForm),A(5),X("ngIf",((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.invalid)&&((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.touched)),A(13),X("ngIf",((s=r.operationRequestForm.get("priority"))==null?null:s.invalid)&&((s=r.operationRequestForm.get("priority"))==null?null:s.touched)),A(7),X("ngForOf",r.patients),A(),X("ngIf",((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.invalid)&&((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.touched)),A(7),X("ngForOf",r.operationTypes),A(),X("ngIf",((l=r.operationRequestForm.get("operationType"))==null?null:l.invalid)&&((l=r.operationRequestForm.get("operationType"))==null?null:l.touched)),A(),X("disabled",r.operationRequestForm.invalid),A(2),X("routerLink",Hi(9,Zue))}},dependencies:[vt,Mn,Zt,nr,Yt,Ri,ki,kt,ji,Ft,qt,wr,Rr,Nt,Wt,Vt],styles:[".operationRequest-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box;padding:20px}.operationRequest-container[_ngcontent-%COMP%]   .form-and-table-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:30px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:600px;background-color:#fff;border:1px solid #e0e0e0;border-radius:12px;box-shadow:0 4px 20px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .operation-title[_ngcontent-%COMP%]{margin-bottom:25px;font-size:24px;font-weight:600;color:#333;text-align:center}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#555;font-size:14px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #cccccc;border-radius:6px;padding:12px;font-size:16px;color:#555;box-sizing:border-box;transition:border-color .3s,box-shadow .3s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80;outline:none}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:13px;margin-top:5px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px;padding:12px 24px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-left:135px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;position:absolute;top:10px;right:10px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Th=(()=>{class n{constructor(e){this.http=e,this.url="http://localhost:4000/api/specializations"}getSpecializations(){return this.http.get(this.url)}createSpecialization(e){return this.http.post(`${this.url}/create`,e)}updateSpecialization(e,i){return this.http.put(`${this.url}/update/${e}`,i)}deleteSpecialization(e){return this.http.delete(`${this.url}/delete/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ide(n,t){n&1&&(g(0,"small",8),M(1," Specialization Type is required and must be between 3 and 50 characters. "),_())}var Xm=(()=>{class n{constructor(e){this.specializationService=e,this.specialization={specializationType:""},this.specializationCreated=new yt}onSubmit(){this.specializationService.createSpecialization(this.specialization).subscribe({next:()=>{alert("Specialization created successfully!"),this.specializationCreated.emit()},error:e=>{console.error("Error creating specialization:",e),alert("Failed to create specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Th))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-specialization"]],outputs:{specializationCreated:"specializationCreated"},standalone:!0,features:[Je],decls:15,vars:3,consts:[["specializationForm","ngForm"],[1,"create-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","3","maxlength","50","aria-label","Specialization Type",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"]],template:function(i,r){if(i&1){let o=dt();g(0,"div",1)(1,"h2"),M(2,"Create Specialization"),_(),g(3,"form",2,0),le("ngSubmit",function(){return Oe(o),Ae(r.onSubmit())}),g(5,"fieldset")(6,"legend"),M(7,"Specialization Details"),_(),g(8,"div",3)(9,"label",4),M(10,"Specialization Type"),_(),g(11,"input",5),Ze("ngModelChange",function(a){return Oe(o),Ke(r.specialization.specializationType,a)||(r.specialization.specializationType=a),Ae(a)}),_(),Te(12,ide,2,0,"small",6),_(),g(13,"button",7),M(14," Submit "),_()()()()}if(i&2){let o=Ii(4);A(11),Xe("ngModel",r.specialization.specializationType),A(),X("ngIf",(o.form.controls.specializationType==null?null:o.form.controls.specializationType.invalid)&&(o.form.controls.specializationType==null?null:o.form.controls.specializationType.touched)),A(),X("disabled",!o.form.valid)}},dependencies:[Dt,Yt,kt,Ft,qt,hn,om,sm,Tn,qn,vt,Zt],styles:[".create-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.create-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff80}"]})}}return n})();function rde(n,t){n&1&&(g(0,"p",10),M(1," Specialization Type is required. "),_())}function ode(n,t){n&1&&(g(0,"p",10),M(1," Specialization Type must be at least 1 character long. "),_())}function sde(n,t){if(n&1&&(g(0,"div"),Te(1,rde,2,0,"p",9)(2,ode,2,0,"p",9),_()),n&2){let e,i;ce();let r=Ii(4);A(),X("ngIf",(e=r.form.get("specializationType"))==null||e.errors==null?null:e.errors.required),A(),X("ngIf",(i=r.form.get("specializationType"))==null||i.errors==null?null:i.errors.minlength)}}var Fz=(()=>{class n{constructor(e,i){this.route=e,this.specializationService=i,this.specializationId="",this.specializationUpdated=new yt,this.specialization={specializationType:""}}ngOnInit(){console.log("Specialization ID:",this.specializationId)}onSubmit(){this.specializationService.updateSpecialization(this.specializationId,this.specialization).subscribe({next:()=>{alert("Specialization updated successfully!"),this.specializationUpdated.emit()},error:e=>{console.error("Error updating specialization:",e),alert("Failed to update specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(Th))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-specialization"]],inputs:{specializationId:"specializationId"},outputs:{specializationUpdated:"specializationUpdated"},standalone:!0,features:[Je],decls:17,vars:3,consts:[["specializationForm","ngForm"],[1,"update-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","1","aria-label","Specialization Type","aria-describedby","specializationTypeHelp specializationTypeError",1,"form-control",3,"ngModelChange","ngModel"],["id","specializationTypeHelp",1,"form-text","text-muted"],[4,"ngIf"],["type","submit","aria-disabled","!specializationForm.form.valid",1,"btn","btn-primary",3,"disabled"],["id","specializationTypeError","class","error-text",4,"ngIf"],["id","specializationTypeError",1,"error-text"]],template:function(i,r){if(i&1){let o=dt();g(0,"div",1)(1,"h2"),M(2,"Update Specialization"),_(),g(3,"form",2,0),le("ngSubmit",function(){return Oe(o),Ae(r.onSubmit())}),g(5,"fieldset")(6,"legend"),M(7,"Specialization Details"),_(),g(8,"div",3)(9,"label",4),M(10,"Specialization Type"),_(),g(11,"input",5),Ze("ngModelChange",function(a){return Oe(o),Ke(r.specialization.specializationType,a)||(r.specialization.specializationType=a),Ae(a)}),_(),g(12,"small",6),M(13," Enter the type of specialization (e.g., Doctor, Nurse). "),_(),Te(14,sde,3,2,"div",7),_(),g(15,"button",8),M(16," Update "),_()()()()}if(i&2){let o,s=Ii(4);A(11),Xe("ngModel",r.specialization.specializationType),A(3),X("ngIf",s.submitted||((o=s.form.get("specializationType"))==null?null:o.touched)),A(),X("disabled",!s.form.valid)}},dependencies:[Dt,Yt,kt,Ft,qt,hn,om,Tn,qn,vt,Zt],styles:[".update-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 6px #0000001a}.update-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:14px;border:1px solid #ced4da;border-radius:4px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:none}.form-text[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#dc3545}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:none;border-radius:4px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[aria-disabled=true][_ngcontent-%COMP%]{background-color:silver;cursor:not-allowed}"]})}}return n})();function ade(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",10),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openUpdateSpecialization(r.id))}),M(5," Edit "),_(),g(6,"button",11),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.deleteSpecialization(r.id,r.specializationType))}),M(7," Delete "),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.specializationType),A(2),Xi("aria-label","Edit "+e.specializationType),A(2),Xi("aria-label","Delete "+e.specializationType)}}function lde(n,t){if(n&1){let e=dt();g(0,"div",12),le("click",function(r){Oe(e);let o=ce();return Ae(o.closeModal(r))}),g(1,"div",13),le("click",function(r){return Oe(e),Ae(r.stopPropagation())}),g(2,"button",14),le("click",function(){Oe(e);let r=ce();return Ae(r.closeModal())}),M(3,"X"),_(),g(4,"app-create-specialization",15),le("specializationCreated",function(){Oe(e);let r=ce();return Ae(r.refreshSpecializations())}),_()()()}}function cde(n,t){if(n&1){let e=dt();g(0,"div",12),le("click",function(r){Oe(e);let o=ce();return Ae(o.closeUpdateModal(r))}),g(1,"div",13),le("click",function(r){return Oe(e),Ae(r.stopPropagation())}),g(2,"button",14),le("click",function(){Oe(e);let r=ce();return Ae(r.closeUpdateModal())}),M(3,"X"),_(),g(4,"app-update-specialization",16),le("specializationUpdated",function(){Oe(e);let r=ce();return Ae(r.refreshSpecializations())}),_()()()}if(n&2){let e=ce();A(4),X("specializationId",e.selectedSpecializationId)}}var Lz=(()=>{class n{constructor(e,i){this.specializationService=e,this.router=i,this.specializations=[],this.isModalOpen=!1,this.isUpdateModalOpen=!1}ngOnInit(){this.fetchSpecializations()}fetchSpecializations(){this.specializationService.getSpecializations().subscribe({next:e=>{console.log("API Response:",e),e.isSuccess&&Array.isArray(e._value)?(this.specializations=e._value,console.log("Specializations:",this.specializations)):(this.specializations=[],console.error("Unexpected API response format:",e))},error:e=>{console.error("Error fetching specializations:",e)}})}openCreateSpecialization(){this.isModalOpen=!0,this.router.navigate(["specializations/create-specialization"])}closeModal(e){e&&e.stopPropagation(),this.isModalOpen=!1,this.router.navigate(["specializations"])}openUpdateSpecialization(e){this.selectedSpecializationId=e,this.isUpdateModalOpen=!0,this.router.navigate(["specializations/update-specialization",e])}closeUpdateModal(e){e&&e.stopPropagation(),this.isUpdateModalOpen=!1,this.router.navigate(["specializations"])}refreshSpecializations(){this.fetchSpecializations(),this.closeModal(),this.closeUpdateModal()}deleteSpecialization(e,i){confirm(`Are you sure you want to delete the specialization "${i}"?`)&&this.specializationService.deleteSpecialization(e).subscribe({next:()=>{alert("Specialization deleted successfully!"),this.refreshSpecializations()},error:r=>{console.error("Error deleting specialization:",r),alert("Failed to delete specialization.")}})}viewSpecializationDetails(e){console.log(`Viewing specialization details for ID: ${e}`)}static{this.\u0275fac=function(i){return new(i||n)($(Th),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-specialization"]],standalone:!0,features:[Je],decls:21,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["type","button",1,"btn","btn-create",3,"click"],[1,"manage-title","text-center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal-container",3,"click",4,"ngIf"],["type","button",1,"btn","btn-update",3,"click"],["type","button",1,"btn","btn-delete",3,"click"],[1,"modal-container",3,"click"],[1,"modal-content",3,"click"],["type","button","aria-label","Close modal",1,"btn","btn-close",3,"click"],[3,"specializationCreated"],[3,"specializationUpdated","specializationId"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),le("click",function(){return r.openCreateSpecialization()}),M(5," Create Specialization "),_(),g(6,"h2",4),M(7," Specializations Manager "),_(),g(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th"),M(14,"Specialization"),_(),g(15,"th"),M(16,"Actions"),_()()(),g(17,"tbody"),Te(18,ade,8,3,"tr",8),_()()()()()(),Te(19,lde,5,0,"div",9)(20,cde,5,1,"div",9),_()),i&2&&(A(18),X("ngForOf",r.specializations),A(),X("ngIf",r.isModalOpen),A(),X("ngIf",r.isUpdateModalOpen))},dependencies:[vt,Mn,Zt,Nt,Vt,Xm,Fz],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;margin:0;padding:0;box-sizing:border-box}.manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;padding:20px}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:100%;max-width:1100px;height:auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 10px #0000001a;position:relative}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:15px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{font-size:12px;padding:8px 16px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:1.5rem;text-align:center}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:1.25rem}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;flex-direction:column}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:90%;margin:0 auto;border-collapse:collapse;font-size:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:6px;text-align:left}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;padding:4px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 10px}}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{padding:10px}}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;max-width:600px;width:100%;box-shadow:0 4px 6px #0000001a;position:relative;transition:transform .3s ease,opacity .3s ease}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{padding:15px;max-width:90%}}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#dc3545;border:none;color:#fff;padding:5px 10px;border-radius:50%;cursor:pointer;font-size:16px;transition:background-color .3s}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#c82333}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{font-size:14px;padding:4px 8px}}"]})}}return n})();var Cb=(()=>{class n{constructor(e){this.allergyService=e,this.allergy={allergyCode:"",allergyName:"",allergyDescription:"",allergySymptoms:""},this.allergyCreated=new yt}onSubmit(){this.allergyService.createAllergy(this.allergy).subscribe({next:()=>{alert("Allergy created successfully!"),this.allergyCreated.emit()},error:e=>{console.error("Error creating allergy:",e),alert("Failed to create allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Jr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-allergies"]],outputs:{allergyCreated:"allergyCreated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Create Allergy"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.allergy.allergyCode),A(3),Xe("ngModel",r.allergy.allergyName),A(3),Xe("ngModel",r.allergy.allergyDescription),A(3),Xe("ngModel",r.allergy.allergySymptoms))},dependencies:[Dt,Yt,kt,Ft,qt,hn,Tn,qn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var Mb=(()=>{class n{constructor(e){this.conditionService=e,this.medicalCondition={medicalConditionCode:"",medicalConditionName:"",medicalConditionDescription:"",medicalConditionSymptoms:""},this.conditionCreated=new yt}onSubmit(){this.conditionService.createMedicalConditions(this.medicalCondition).subscribe({next:()=>{alert("Medical Condition created successfully!"),this.conditionCreated.emit()},error:e=>{console.error("Error creating condition:",e),alert("Failed to create condition.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Qr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-conditions"]],outputs:{conditionCreated:"conditionCreated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","condition-code"],["type","text","id","condition-code","name","condition-code","required","",3,"ngModelChange","ngModel"],["for","condition-name"],["type","text","id","condition-name","name","condition-name","required","",3,"ngModelChange","ngModel"],["for","condition-description"],["type","text","id","condition-description","name","condition-description","required","",3,"ngModelChange","ngModel"],["for","condition-sypmtoms"],["type","text","id","condition-symptoms","name","condition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Create Medical Condition"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.medicalCondition.medicalConditionCode),A(3),Xe("ngModel",r.medicalCondition.medicalConditionName),A(3),Xe("ngModel",r.medicalCondition.medicalConditionDescription),A(3),Xe("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[Dt,Yt,kt,Ft,qt,hn,Tn,qn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var wb=(()=>{class n{constructor(e){this.allergyService=e,this.allergyUpdated=new yt}onSubmit(){let e=this.allergy.id;console.log("Allergy:",this.allergy),console.log("Allergy ID:",e),this.allergyService.updateAllergy(e,this.allergy).subscribe({next:()=>{alert("Allergy updated successfully!"),this.allergyUpdated.emit()},error:i=>{console.error("Error updating allergy:",i),alert("Failed to update allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Jr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-allergies"]],inputs:{allergy:"allergy"},outputs:{allergyUpdated:"allergyUpdated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Update Allergy"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.allergy.allergyCode),A(3),Xe("ngModel",r.allergy.allergyName),A(3),Xe("ngModel",r.allergy.allergyDescription),A(3),Xe("ngModel",r.allergy.allergySymptoms))},dependencies:[Dt,Yt,kt,Ft,qt,hn,Tn,qn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var Eb=(()=>{class n{constructor(e){this.medicalConditionService=e,this.conditionUpdated=new yt}onSubmit(){let e=this.medicalCondition.id;this.medicalConditionService.updateCondition(e,this.medicalCondition).subscribe({next:()=>{alert("Condition updated successfully!"),this.conditionUpdated.emit()},error:i=>{console.error("Error creating condition:",i),alert("Failed to update condition.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Qr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-conditions"]],inputs:{medicalCondition:"medicalCondition"},outputs:{conditionUpdated:"conditionUpdated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","medicalCondition-code"],["type","text","id","medicalCondition-code","name","medicalCondition-code","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-name"],["type","text","id","medicalCondition-name","name","medicalCondition-name","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-description"],["type","text","id","medicalCondition-description","name","medicalCondition-description","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-symptoms"],["type","text","id","medicalCondition-symptoms","name","medicalCondition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Update Condition"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.medicalCondition.medicalConditionCode),A(3),Xe("ngModel",r.medicalCondition.medicalConditionName),A(3),Xe("ngModel",r.medicalCondition.medicalConditionDescription),A(3),Xe("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[Dt,Yt,kt,Ft,qt,hn,Tn,qn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();function ude(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openDetailsModal(r,"allergy"))}),M(5,"View Details"),_(),g(6,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openUpdateModal(r,"allergy"))}),M(7,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.allergyName)}}function dde(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openDetailsModal(r,"condition"))}),M(5,"View Details"),_(),g(6,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openUpdateModal(r,"condition"))}),M(7,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.medicalConditionName)}}function fde(n,t){if(n&1){let e=dt();g(0,"app-create-allergies",18),le("allergyCreated",function(){Oe(e);let r=ce(2);return Ae(r.handleAllergyCreated())}),_()}}function hde(n,t){if(n&1){let e=dt();g(0,"app-create-conditions",19),le("conditionCreated",function(){Oe(e);let r=ce(2);return Ae(r.handleConditionCreated())}),_()}}function pde(n,t){if(n&1){let e=dt();g(0,"app-update-allergies",20),le("allergyUpdated",function(){Oe(e);let r=ce(2);return Ae(r.handleAllergyUpdated())}),_()}if(n&2){let e=ce(2);X("allergy",e.selectedItem)}}function mde(n,t){if(n&1){let e=dt();g(0,"app-update-conditions",21),le("conditionUpdated",function(){Oe(e);let r=ce(2);return Ae(r.handleConditionUpdated())}),_()}if(n&2){let e=ce(2);X("medicalCondition",e.selectedItem)}}function gde(n,t){if(n&1&&(g(0,"div")(1,"h2"),M(2),_(),g(3,"p")(4,"strong"),M(5,"Code:"),_(),M(6),_(),g(7,"p")(8,"strong"),M(9,"Description:"),_(),M(10),_(),g(11,"p")(12,"strong"),M(13,"Symptoms:"),_(),M(14),_()()),n&2){let e=ce(2);A(2),xt("",e.selectedItemType==="allergy"?e.selectedItem.allergyName:e.selectedItem.medicalConditionName," Details"),A(4),xt(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyCode:e.selectedItem.medicalConditionCode,""),A(4),xt(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyDescription:e.selectedItem.medicalConditionDescription,""),A(4),xt(" ",e.selectedItemType==="allergy"?e.selectedItem.allergySymptoms:e.selectedItem.medicalConditionSymptoms,"")}}function _de(n,t){if(n&1){let e=dt();g(0,"div",10)(1,"div",11)(2,"span",12),le("click",function(){Oe(e);let r=ce();return Ae(r.closeModal())}),M(3,"\xD7"),_(),Te(4,fde,1,0,"app-create-allergies",13)(5,hde,1,0,"app-create-conditions",14)(6,pde,1,1,"app-update-allergies",15)(7,mde,1,1,"app-update-conditions",16)(8,gde,15,4,"div",17),_()()}if(n&2){let e=ce();A(4),X("ngIf",e.modalType==="create-allergies"),A(),X("ngIf",e.modalType==="create-conditions"),A(),X("ngIf",e.modalType==="update-allergies"),A(),X("ngIf",e.modalType==="update-conditions"),A(),X("ngIf",e.modalType==="details")}}var Uz=(()=>{class n{constructor(e,i,r,o,s){this.renderer=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.modalType=null,this.allergies=[],this.medicalConditions=[],this.selectedItem=null,this.selectedItemType=null}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.fetchAllergies(),this.fetchMedicalConditions()}openModal(e){this.modalType=e,this.renderer.addClass(document.body,"modal-active"),this.router.navigate([`/manage-allergies-and-conditions/${e}`])}closeModal(){this.modalType=null,this.selectedItem=null,this.selectedItemType=null,this.renderer.removeClass(document.body,"modal-active"),this.router.navigate(["/manage-allergies-and-conditions"]),this.refreshPage()}openDetailsModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType="details",this.renderer.addClass(document.body,"modal-active")}openUpdateModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType=i==="allergy"?"update-allergies":"update-conditions",this.renderer.addClass(document.body,"modal-active"),i==="allergy"?this.router.navigate([`/manage-allergies-and-conditions/update-allergies/${e.id}`]):this.router.navigate([`/manage-allergies-and-conditions/update-conditions/${e.id}`])}handleAllergyCreated(){this.closeModal()}handleConditionCreated(){this.closeModal()}handleAllergyUpdated(){this.closeModal()}handleConditionUpdated(){this.closeModal()}refreshPage(){this.fetchAllergies(),this.fetchMedicalConditions()}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}static{this.\u0275fac=function(i){return new(i||n)($(Ai),$(Mt),$(Fn),$(Jr),$(Qr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-manage-allergies-and-conditions"]],standalone:!0,features:[Je],decls:34,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"btn","btn-create",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[3,"allergyCreated",4,"ngIf"],[3,"conditionCreated",4,"ngIf"],[3,"allergy","allergyUpdated",4,"ngIf"],[3,"medicalCondition","conditionUpdated",4,"ngIf"],[4,"ngIf"],[3,"allergyCreated"],[3,"conditionCreated"],[3,"allergyUpdated","allergy"],[3,"conditionUpdated","medicalCondition"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),le("click",function(){return r.openModal("create-allergies")}),M(5,"Create"),_(),g(6,"h2",4),M(7,"Allergies"),_(),g(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),M(13,"Allergies"),_(),g(14,"th"),M(15,"Actions"),_()()(),g(16,"tbody"),Te(17,ude,8,1,"tr",7),_()()()(),g(18,"div",2)(19,"button",3),le("click",function(){return r.openModal("create-conditions")}),M(20,"Create"),_(),g(21,"h2",4),M(22,"Medical Conditions"),_(),g(23,"div",5)(24,"table",6)(25,"thead")(26,"tr")(27,"th"),M(28,"Conditions"),_(),g(29,"th"),M(30,"Actions"),_()()(),g(31,"tbody"),Te(32,dde,8,1,"tr",7),_()()()()(),Te(33,_de,9,5,"div",8),_()),i&2&&(A(17),X("ngForOf",r.allergies),A(15),X("ngForOf",r.medicalConditions),A(),X("ngIf",r.modalType))},dependencies:[vt,Mn,Zt,Dt,Nt,Vt,Cb,Mb,wb,Eb],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:800px;height:600px;background-color:#f9f9f9;max-width:800px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:12px;width:80%;max-width:500px;position:relative;box-shadow:0 4px 8px #0000001a}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:24px;cursor:pointer;color:#333;transition:color .3s}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#007bff}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:24px;color:#333}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;margin:10px 0}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}"]})}}return n})();function vde(n,t){if(n&1){let e=dt();g(0,"div",17)(1,"span"),M(2),_(),g(3,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.onAllergyChange(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(2),Ye(e.allergyName),A(),X("value",e.id)("checked",i.medicalHistory.allergies.includes(e.id))}}function yde(n,t){if(n&1){let e=dt();g(0,"div",17)(1,"span"),M(2),_(),g(3,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.onMedicalConditionChange(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(2),Ye(e.medicalConditionName),A(),X("value",e.id)("checked",i.medicalHistory.medicalConditions.includes(e.id))}}function xde(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",9),le("click",function(){let r=Oe(e).index,o=ce();return Ae(o.editFamilyHistory(r))}),M(5,"Edit"),_(),g(6,"button",9),le("click",function(){let r=Oe(e).index,o=ce();return Ae(o.removeFamilyHistory(r))}),M(7," Remove "),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e)}}function bde(n,t){if(n&1){let e=dt();g(0,"div",24)(1,"span"),M(2),_(),g(3,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.onFamilyHistoryConditionChange(r,o.medicalConditionName))}),_()()}if(n&2){let e=t.$implicit,i=ce(2);A(2),Ye(e.medicalConditionName),A(),X("value",e.medicalConditionName)("checked",i.newFamilyHistory.conditions.includes(e.medicalConditionName))}}function Cde(n,t){if(n&1){let e=dt();g(0,"div",19)(1,"div",20)(2,"span",21),le("click",function(){Oe(e);let r=ce();return Ae(r.closeFamilyConditionsModal())}),M(3,"\xD7"),_(),g(4,"h2"),M(5,"Select Family Conditions"),_(),g(6,"div",22),Te(7,bde,4,3,"div",23),_(),g(8,"button",15),le("click",function(){Oe(e);let r=ce();return Ae(r.closeFamilyConditionsModal())}),M(9," Save "),_()()()}if(n&2){let e=ce();A(7),X("ngForOf",e.medicalConditions)}}function Mde(n,t){if(n&1){let e=dt();g(0,"div",19)(1,"div",25)(2,"span",26),le("click",function(){Oe(e);let r=ce();return Ae(r.closeUpdateFamilyHistoryModal())}),M(3,"\xD7"),_(),g(4,"h2"),M(5,"Edit Family History"),_(),g(6,"div",7)(7,"input",27),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.newFamilyHistory.relationship,r)||(o.newFamilyHistory.relationship=r),Ae(r)}),_(),g(8,"button",9),le("click",function(){Oe(e);let r=ce();return Ae(r.openFamilyConditionsModal())}),M(9," Select Conditions "),_()(),g(10,"button",28),le("click",function(){Oe(e);let r=ce();return Ae(r.updateFamilyHistory())}),M(11," Save "),_()()()}if(n&2){let e=ce();A(7),Xe("ngModel",e.newFamilyHistory.relationship),A(3),X("disabled",!e.newFamilyHistory.relationship||e.newFamilyHistory.conditions.length===0)}}var Vz=(()=>{class n{constructor(e,i,r,o){this.allergyService=e,this.panelService=i,this.medicalHistoryService=r,this.medicalConditionService=o,this.medicalHistory={id:"",patientMedicalRecordNumber:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.newFamilyHistory={relationship:"",conditions:[]},this.selectedFamilyHistory=null,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen=!1}ngOnInit(){console.log("ngOnInit called"),this.panelService.setPanelId("panel-doctor"),this.fetchAllergies(),this.fetchMedicalConditions();let e=this.extractMedicalRecordNumberFromUrl();this.fetchMedicalHistory(e)}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(console.log("Family History:",i.familyHistory),this.medicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:i.familyHistory===""?[]:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.medicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){console.log("filterSelectedAllergies called"),this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){console.log("filterSelectedMedicalConditions called"),this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){console.log("searchAllergies called with allergySearch:",this.allergySearch),this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase())),console.log("Filtered allergies after search:",this.filteredAllergies)}searchMedicalConditions(){console.log("searchMedicalConditions called with medicalConditionSearch:",this.medicalConditionSearch),this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase())),console.log("Filtered medical conditions after search:",this.filteredMedicalConditions)}extractMedicalRecordNumberFromUrl(){console.log("extractMedicalRecordNumberFromUrl called");let e=window.location.href,i=/\/update-medical-history\/(\d+)/,r=e.match(i);if(r&&r[1])return console.log("Medical record number extracted from URL:",r[1]),r[1];throw new Error("Medical record number not found in URL.")}fetchAllergies(){console.log("fetchAllergies called"),this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){console.log("fetchMedicalConditions called"),this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}onAllergyChange(e,i){if(console.log("onAllergyChange called with event:",e,"and allergyId:",i),e.target.checked)this.medicalHistory.allergies.push(i);else{let r=this.medicalHistory.allergies.indexOf(i);r>-1&&this.medicalHistory.allergies.splice(r,1)}console.log("Updated allergies:",this.medicalHistory.allergies)}onMedicalConditionChange(e,i){if(console.log("onMedicalConditionChange called with event:",e,"and medicalConditionId:",i),e.target.checked)this.medicalHistory.medicalConditions.push(i);else{let r=this.medicalHistory.medicalConditions.indexOf(i);r>-1&&this.medicalHistory.medicalConditions.splice(r,1)}console.log("Updated medical conditions:",this.medicalHistory.medicalConditions)}openFamilyConditionsModal(){console.log("openFamilyConditionsModal called"),this.wasUpdateFamilyHistoryModalOpen=this.showUpdateFamilyHistoryModal,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!0,console.log("Family conditions modal opened")}closeFamilyConditionsModal(){console.log("closeFamilyConditionsModal called"),this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen&&(this.showUpdateFamilyHistoryModal=!0),console.log("Family conditions modal closed")}addFamilyHistory(){console.log("addFamilyHistory called with newFamilyHistory:",this.newFamilyHistory);let e=this.newFamilyHistory.conditions.join("; "),i=`${this.newFamilyHistory.relationship}: ${e}`;this.medicalHistory.familyHistory.includes(i)||this.medicalHistory.familyHistory.push(i),this.newFamilyHistory={relationship:"",conditions:[]},console.log("Updated family history:",this.medicalHistory.familyHistory)}removeFamilyHistory(e){console.log("removeFamilyHistory called with index:",e),this.medicalHistory.familyHistory.splice(e,1),this.selectedFamilyHistory=null,console.log("Updated family history:",this.medicalHistory.familyHistory)}onFamilyHistoryConditionChange(e,i){if(console.log("onFamilyHistoryConditionChange called with event:",e,"and condition:",i),e.target.checked)this.newFamilyHistory.conditions.includes(i)||this.newFamilyHistory.conditions.push(i);else{let r=this.newFamilyHistory.conditions.indexOf(i);r>-1&&this.newFamilyHistory.conditions.splice(r,1)}console.log("Updated new family history conditions:",this.newFamilyHistory.conditions)}editFamilyHistory(e){console.log("editFamilyHistory called with index:",e),this.selectedFamilyHistory=e;let i=this.parseFamilyHistory([this.medicalHistory.familyHistory[e]])[0];this.newFamilyHistory={relationship:i.relationship,conditions:i.conditions},this.showUpdateFamilyHistoryModal=!0,console.log("Editing family history:",this.newFamilyHistory)}closeUpdateFamilyHistoryModal(){console.log("closeUpdateFamilyHistoryModal called"),this.showUpdateFamilyHistoryModal=!1,this.newFamilyHistory={relationship:"",conditions:[]},console.log("Update family history modal closed")}updateFamilyHistory(){if(console.log("updateFamilyHistory called"),this.selectedFamilyHistory!==null){let e=`${this.newFamilyHistory.relationship}: ${this.newFamilyHistory.conditions.join("; ")}`;this.medicalHistory.familyHistory.includes(e)||(this.medicalHistory.familyHistory[this.selectedFamilyHistory]=e),this.closeUpdateFamilyHistoryModal(),console.log("Updated family history:",this.medicalHistory.familyHistory)}}submitMedicalHistory(){console.log("submitMedicalHistory called with medicalHistory:",this.medicalHistory),this.medicalHistoryService.updatePatientMedicalHistory(this.medicalHistory.patientMedicalRecordNumber,this.medicalHistory.allergies,this.medicalHistory.medicalConditions,this.medicalHistory.familyHistory,this.medicalHistory.freeText).subscribe(e=>{console.log("Medical history updated:",e),alert("Medical history updated successfully")},e=>{console.error("Error updating medical history:",e),alert("Error updating medical history")})}static{this.\u0275fac=function(i){return new(i||n)($(Jr),$(Fn),$(La),$(Qr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-medical-history"]],standalone:!0,features:[Je],decls:42,vars:8,consts:[[1,"content"],[1,"medical-history-container"],[1,"top-section"],[1,"box"],[1,"multi-select-list"],["class","multi-select-item",4,"ngFor","ngForOf"],[1,"middle-section"],[1,"family-history-input"],["type","text","placeholder","Relationship","name","newRelationship","required","",3,"ngModelChange","ngModel"],["type","button",3,"click"],["type","button",3,"click","disabled"],[1,"family-history-table"],[4,"ngFor","ngForOf"],[1,"bottom-section"],["placeholder","Free Text Field","name","freeTextField",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click"],["class","modal",4,"ngIf"],[1,"multi-select-item"],["type","checkbox",3,"change","value","checked"],[1,"modal"],[1,"family-conditions-modal-content"],[1,"family-conditions-close",3,"click"],[1,"family-conditions-multi-select-list"],["class","family-conditions-multi-select-item",4,"ngFor","ngForOf"],[1,"family-conditions-multi-select-item"],[1,"update-family-history-modal-content"],[1,"update-family-history-close",3,"click"],["type","text","placeholder","Relationship","name","editRelationship","required","",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click","disabled"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"h2"),M(4,"Medical History"),_(),g(5,"div",2)(6,"div",3)(7,"h3"),M(8,"Allergies"),_(),g(9,"div",4),Te(10,vde,4,3,"div",5),_()(),g(11,"div",3)(12,"h3"),M(13,"Medical Conditions"),_(),g(14,"div",4),Te(15,yde,4,3,"div",5),_()()(),g(16,"div",6)(17,"h3"),M(18,"Family History"),_(),g(19,"div",7)(20,"input",8),Ze("ngModelChange",function(s){return Ke(r.newFamilyHistory.relationship,s)||(r.newFamilyHistory.relationship=s),s}),_(),g(21,"button",9),le("click",function(){return r.openFamilyConditionsModal()}),M(22," Select Conditions "),_(),g(23,"button",10),le("click",function(){return r.addFamilyHistory()}),M(24," Add Family History "),_()(),g(25,"table",11)(26,"thead")(27,"tr")(28,"th"),M(29,"Family History"),_(),g(30,"th"),M(31,"Actions"),_()()(),g(32,"tbody"),Te(33,xde,8,1,"tr",12),_()()(),g(34,"div",13)(35,"h3"),M(36,"Free Text Field"),_(),g(37,"textarea",14),Ze("ngModelChange",function(s){return Ke(r.medicalHistory.freeText,s)||(r.medicalHistory.freeText=s),s}),_()(),g(38,"button",15),le("click",function(){return r.submitMedicalHistory()}),M(39,"Save"),_()(),Te(40,Cde,10,1,"div",16)(41,Mde,12,2,"div",16),_()),i&2&&(A(10),X("ngForOf",r.allergies),A(5),X("ngForOf",r.medicalConditions),A(5),Xe("ngModel",r.newFamilyHistory.relationship),A(3),X("disabled",!r.newFamilyHistory.relationship||r.newFamilyHistory.conditions.length===0),A(10),X("ngForOf",r.medicalHistory.familyHistory),A(4),Xe("ngModel",r.medicalHistory.freeText),A(3),X("ngIf",r.showFamilyConditionsModal),A(),X("ngIf",r.showUpdateFamilyHistoryModal))},dependencies:[Dt,kt,Ft,hn,Tn,vt,Mn,Zt,Vt],styles:[".content[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100vh;overflow-y:auto;box-sizing:border-box;align-items:center}.medical-history-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;height:fit-content;margin:0 auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.medical-history-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:0}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 1px 3px #0000001a}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;position:relative}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:calc(100% - 16px);table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;max-height:150px;overflow-y:scroll;width:100%}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left;font-size:14px;box-sizing:border-box}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar{width:16px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:8px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b3b3b3}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:14px;cursor:pointer;transition:background-color .3s;margin-right:5px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c82333}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px;resize:none;overflow-y:auto}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]{display:block;margin:10px auto;background-color:#17a2b8;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;inset:0;width:100%;height:100%;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-family-history-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:2}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:hover, .update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.update-family-history-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.family-conditions-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:100}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:hover, .family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.family-conditions-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var wde=n=>["/update-medical-history",n];function Ede(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td")(6,"a",24),M(7,"Edit"),_(),g(8,"a",25),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.viewPatientDetails(r.medicalRecordNumber))}),M(9,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.medicalRecordNumber),A(2),Ye(e.fullName),A(2),X("routerLink",ri(3,wde,e.medicalRecordNumber))}}function Sde(n,t){if(n&1){let e=dt();g(0,"div",26)(1,"div",27)(2,"h3"),M(3,"Patient Details"),_(),g(4,"button",28),le("click",function(){Oe(e);let r=ce();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],Ae(r.selectedMedicalHistory=void 0)}),_(),g(5,"table",29)(6,"tbody")(7,"tr")(8,"th"),M(9,"Medical Record Number"),_(),g(10,"td"),M(11),_()(),g(12,"tr")(13,"th"),M(14,"First Name"),_(),g(15,"td"),M(16),_()(),g(17,"tr")(18,"th"),M(19,"Last Name"),_(),g(20,"td"),M(21),_()(),g(22,"tr")(23,"th"),M(24,"Full Name"),_(),g(25,"td"),M(26),_()(),g(27,"tr")(28,"th"),M(29,"Date of Birth"),_(),g(30,"td"),M(31),_()(),g(32,"tr")(33,"th"),M(34,"Gender"),_(),g(35,"td"),M(36),_()(),g(37,"tr")(38,"th"),M(39,"Email"),_(),g(40,"td"),M(41),_()(),g(42,"tr")(43,"th"),M(44,"Phone Number"),_(),g(45,"td"),M(46),_()(),g(47,"tr")(48,"th"),M(49,"Emergency Contact"),_(),g(50,"td"),M(51),_()(),g(52,"tr")(53,"th"),M(54,"Appointment History"),_(),g(55,"td"),M(56),_()(),g(57,"tr")(58,"th"),M(59,"Is Active"),_(),g(60,"td"),M(61),_()(),g(62,"tr")(63,"th"),M(64,"Medical History"),_(),g(65,"td")(66,"button",30),le("click",function(){Oe(e);let r=ce();return Ae(r.openMedicalHistoryModal())}),M(67," View Medical History "),_()()()()()()()}if(n&2){let e=ce();A(11),Ye(e.selectedPatient.medicalRecordNumber),A(5),Ye(e.selectedPatient.firstName),A(5),Ye(e.selectedPatient.lastName),A(5),Ye(e.selectedPatient.fullName),A(5),Ye(e.selectedPatient.dateOfBirth),A(5),Ye(e.selectedPatient.gender===1?"Male":"Female"),A(5),Ye(e.selectedPatient.email),A(5),Ye(e.selectedPatient.phoneNumber),A(5),Ye(e.selectedPatient.emergencyContact),A(5),xt(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),A(5),Ye(e.selectedPatient.isActive?"Yes":"No")}}function Tde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e," ")}}function Pde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.allergyName," ")}}function Dde(n,t){n&1&&(g(0,"li"),M(1,"No allergies"),_())}function Ode(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.medicalConditionName," ")}}function Ade(n,t){n&1&&(g(0,"li"),M(1," No medical conditions "),_())}function Ide(n,t){if(n&1){let e=dt();g(0,"div",31)(1,"div",32)(2,"span",33),le("click",function(){Oe(e);let r=ce();return Ae(r.closeMedicalHistoryModal())}),M(3,"\xD7"),_(),g(4,"h3"),M(5,"Medical History"),_(),g(6,"table",29)(7,"tbody")(8,"tr")(9,"th"),M(10,"Free Text"),_(),g(11,"td"),M(12),_()(),g(13,"tr")(14,"th"),M(15,"Family History"),_(),g(16,"td")(17,"ul"),Te(18,Tde,2,1,"li",21),_()()(),g(19,"tr")(20,"th"),M(21,"Allergies"),_(),g(22,"td")(23,"ul",34),Te(24,Pde,2,1,"li",21)(25,Dde,2,0,"li",35),_()()(),g(26,"tr")(27,"th"),M(28,"Medical Conditions"),_(),g(29,"td")(30,"ul",36),Te(31,Ode,2,1,"li",21)(32,Ade,2,0,"li",35),_()()()()()()()}if(n&2){let e=ce();A(12),Ye(e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.freeText),A(6),X("ngForOf",e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.familyHistory),A(6),X("ngForOf",e.selectedAllergies),A(),X("ngIf",e.selectedAllergies.length===0),A(6),X("ngForOf",e.selectedMedicalConditions),A(),X("ngIf",e.selectedMedicalConditions.length===0)}}var Bz=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}openMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!0}closeMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(Fn),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-medical-history-manager"]],standalone:!0,features:[Je],decls:40,vars:11,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],["class","modal",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[1,"allergies-list"],[4,"ngIf"],[1,"conditions-list"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),M(5,"Patients Manager"),_(),g(6,"div",4)(7,"form",5),le("submit",function(s){return r.applyFilters(s)}),g(8,"input",6),Ze("ngModelChange",function(s){return Ke(r.filters.firstName,s)||(r.filters.firstName=s),s}),_(),g(9,"input",7),Ze("ngModelChange",function(s){return Ke(r.filters.lastName,s)||(r.filters.lastName=s),s}),_(),g(10,"input",8),Ze("ngModelChange",function(s){return Ke(r.filters.fullName,s)||(r.filters.fullName=s),s}),_(),g(11,"input",9),Ze("ngModelChange",function(s){return Ke(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),_(),g(12,"input",10),Ze("ngModelChange",function(s){return Ke(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),_(),g(13,"select",11),Ze("ngModelChange",function(s){return Ke(r.filters.gender,s)||(r.filters.gender=s),s}),g(14,"option",12),M(15,"Select Gender"),_(),g(16,"option",13),M(17,"Male"),_(),g(18,"option",14),M(19,"Female"),_()(),g(20,"input",15),Ze("ngModelChange",function(s){return Ke(r.filters.email,s)||(r.filters.email=s),s}),_(),g(21,"input",16),Ze("ngModelChange",function(s){return Ke(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),_(),g(22,"button",17),M(23,"Apply Filters"),_(),g(24,"button",18),le("click",function(){return r.clearFilters()}),M(25," Clear Filters "),_()(),g(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th"),M(31,"Medical Record Number"),_(),g(32,"th"),M(33,"Name"),_(),g(34,"th"),M(35,"Actions"),_()()(),g(36,"tbody"),Te(37,Ede,10,5,"tr",21),_()()()()(),Te(38,Sde,68,11,"div",22),_(),Te(39,Ide,33,6,"div",23),_()),i&2&&(A(8),Xe("ngModel",r.filters.firstName),A(),Xe("ngModel",r.filters.lastName),A(),Xe("ngModel",r.filters.fullName),A(),Xe("ngModel",r.filters.dateOfBirth),A(),Xe("ngModel",r.filters.medicalRecordNumber),A(),Xe("ngModel",r.filters.gender),A(7),Xe("ngModel",r.filters.email),A(),Xe("ngModel",r.filters.phoneNumber),A(16),X("ngForOf",r.patients),A(),X("ngIf",r.selectedPatient),A(),X("ngIf",r.isMedicalHistoryModalOpen))},dependencies:[Vt,vt,Mn,Zt,Dt,Yt,Ri,ki,kt,ji,Ft,qt,xl,Tn,qn,Nt,Wt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{background-color:#3588d1;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0;margin-top:5px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover{background-color:#70b1e2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #888;width:600px;height:fit-content;max-height:600px;border-radius:10px;box-shadow:0 0 20px #0003;position:relative}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;overflow-y:auto}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var zz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-policy"]],standalone:!0,features:[Je],decls:157,vars:0,consts:[[1,"policy-container"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h1"),M(3,"Privacy Policy"),_(),g(4,"p"),M(5,"Last updated: 4 de Janeiro de 2025"),_(),g(6,"section")(7,"h2"),M(8,"Introdu\xE7\xE3o"),_(),g(9,"p"),M(10," A sua privacidade \xE9 essencial para o Hospital Management App. Esta pol\xEDtica, em conformidade com o Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD), descreve como recolhemos, utilizamos, partilhamos e protegemos os seus dados pessoais ao utilizar a nossa aplica\xE7\xE3o. O RGPD assegura a prote\xE7\xE3o dos seus dados enquanto um direito fundamental. "),_()(),g(11,"section")(12,"h2"),M(13,"Que Dados Pessoais Recolhemos?"),_(),g(14,"ul")(15,"li"),M(16,"Dados de Identifica\xE7\xE3o: Nome, data de nascimento, n\xFAmero de identifica\xE7\xE3o e g\xE9nero."),_(),g(17,"li"),M(18,"Contactos: Morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia"),_(),g(19,"li"),M(20,"Dados de Sa\xFAde: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(21,"li"),M(22,"Informa\xE7\xE3o de Utiliza\xE7\xE3o: Como utiliza a aplica\xE7\xE3o, as suas prefer\xEAncias e defini\xE7\xF5es."),_()()(),g(23,"section")(24,"h2"),M(25,"Finalidades do Tratamento dos Dados"),_(),g(26,"ul")(27,"li"),M(28,"Gerir as suas consultas e marca\xE7\xF5es."),_(),g(29,"li"),M(30,"Fornecer-lhe os cuidados de sa\xFAde adequados."),_(),g(31,"li"),M(32,"Melhorar a qualidade dos nossos servi\xE7os."),_(),g(33,"li"),M(34,"Comunicar consigo sobre as suas consultas."),_(),g(35,"li"),M(36,"Cumprir com as obriga\xE7\xF5es legais."),_(),g(37,"li"),M(38,"Arquivo de interesse p\xFAblico, investiga\xE7\xE3o cient\xEDfica ou hist\xF3rica, ou fins estat\xEDsticos, assegurando a prote\xE7\xE3o dos seus direitos."),_()()(),g(39,"section")(40,"h2"),M(41,"Tempos de Reten\xE7\xE3o de Dados"),_(),g(42,"p"),M(43,"Os tempos de reten\xE7\xE3o foram definidos considerando a finalidade do tratamento, a base legal, as obriga\xE7\xF5es legais e as boas pr\xE1ticas de seguran\xE7a:"),_(),g(44,"h3"),M(45,"1. Dados de Contacto"),_(),g(46,"ul")(47,"li"),M(48,"Inclui: Nome, morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia."),_(),g(49,"li"),M(50,"Tempo de reten\xE7\xE3o: Durante o per\xEDodo em que o paciente for utilizador ativo da aplica\xE7\xE3o. Eliminados 6 meses ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(51,"li"),M(52,"Justificativa: Essenciais para a gest\xE3o de consultas e comunica\xE7\xE3o com o paciente, com reten\xE7\xE3o adicional de 6 meses para eventuais quest\xF5es legais ou administrativas."),_()(),g(53,"h3"),M(54,"2. Dados de Sa\xFAde"),_(),g(55,"ul")(56,"li"),M(57,"Inclui: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(58,"li"),M(59,"Tempo de reten\xE7\xE3o: 20 anos ap\xF3s a \xFAltima consulta, conforme legisla\xE7\xE3o portuguesa para prontu\xE1rios m\xE9dicos."),_(),g(60,"li"),M(61,"Justificativa: Obriga\xE7\xE3o legal de reten\xE7\xE3o por 20 anos para assegurar o cumprimento da legisla\xE7\xE3o e permitir acesso a informa\xE7\xF5es m\xE9dicas em caso de necessidade."),_()(),g(62,"h3"),M(63,"3. Informa\xE7\xE3o de Utiliza\xE7\xE3o"),_(),g(64,"ul")(65,"li"),M(66,"Inclui: Como utiliza a aplica\xE7\xE3o, prefer\xEAncias e defini\xE7\xF5es."),_(),g(67,"li"),M(68,"Tempo de reten\xE7\xE3o: 1 ano ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(69,"li"),M(70,"Justificativa: Necess\xE1ria para melhorar os servi\xE7os da aplica\xE7\xE3o, permitindo an\xE1lise de tend\xEAncias e implementa\xE7\xE3o de melhorias."),_()()(),g(71,"section")(72,"h2"),M(73,"Procedimentos Ap\xF3s o Fim do Per\xEDodo de Reten\xE7\xE3o"),_(),g(74,"p"),M(75,"Ap\xF3s o per\xEDodo de reten\xE7\xE3o definido:"),_(),g(76,"ul")(77,"li"),M(78,"Os dados ser\xE3o eliminados de forma segura e irrevers\xEDvel, garantindo que n\xE3o possam ser recuperados."),_(),g(79,"li"),M(80,"Dados necess\xE1rios para fins legais ou contratuais poder\xE3o ser anonimizados e retidos por tempo indeterminado, utilizados exclusivamente para investiga\xE7\xE3o e estat\xEDstica."),_()()(),g(81,"section")(82,"h2"),M(83,"Com Quem Partilhamos os seus Dados?"),_(),g(84,"ul")(85,"li"),M(86,"Profissionais de Sa\xFAde: Para fornecer os cuidados de sa\xFAde necess\xE1rios, apenas na medida estritamente indispens\xE1vel."),_(),g(87,"li"),M(88,"Autoridades de Controlo: Quando exigido por lei, mediante pedido formal, justificado e ocasional."),_(),g(89,"li"),M(90,"Prestadores de Servi\xE7os: Empresas que auxiliam na opera\xE7\xE3o da aplica\xE7\xE3o, sob contrato que garante prote\xE7\xE3o de dados adequada."),_()()(),g(91,"section")(92,"h2"),M(93,"Como Protegemos os seus Dados?"),_(),g(94,"ul")(95,"li"),M(96,"Encripta\xE7\xE3o: Todos os dados s\xE3o encriptados para impedir acessos n\xE3o autorizados."),_(),g(97,"li"),M(98,"Pseudonimiza\xE7\xE3o: Sempre que poss\xEDvel, protegemos a sua identidade atrav\xE9s de pseudonimiza\xE7\xE3o."),_(),g(99,"li"),M(100,"Controlo de Acesso: Apenas utilizadores autorizados, mediante autentica\xE7\xE3o segura, t\xEAm acesso aos seus dados."),_(),g(101,"li"),M(102,"Medidas T\xE9cnicas e Organizativas: Implementamos solu\xE7\xF5es adequadas ao risco, considerando o estado da arte tecnol\xF3gica."),_()()(),g(103,"section")(104,"h2"),M(105,"Os seus Direitos"),_(),g(106,"p"),M(107,"De acordo com o RGPD, tem os seguintes direitos:"),_(),g(108,"ul")(109,"li"),M(110,"Acesso aos seus dados: Solicitar uma c\xF3pia dos seus dados pessoais num formato leg\xEDvel."),_(),g(111,"li"),M(112,"Retifica\xE7\xE3o: Corrigir dados incorretos ou incompletos."),_(),g(113,"li"),M(114,'Apagamento ("direito a ser esquecido"): Solicitar a elimina\xE7\xE3o dos seus dados em condi\xE7\xF5es espec\xEDficas.'),_(),g(115,"li"),M(116,"Limita\xE7\xE3o do Tratamento: Restringir o uso dos seus dados em determinadas situa\xE7\xF5es."),_(),g(117,"li"),M(118,"Oposi\xE7\xE3o ao Tratamento: Recusar o tratamento baseado em interesses leg\xEDtimos ou marketing direto."),_(),g(119,"li"),M(120,"Portabilidade dos Dados: Receber os seus dados num formato estruturado para transferir para outro servi\xE7o."),_()(),g(121,"p"),M(122,"Pode exercer os seus direitos atrav\xE9s de um pedido dirigido ao Hospital Management App, pelos seguintes meios:"),_(),g(123,"ul")(124,"li"),M(125,"Por correio postal para o endere\xE7o: R. Dr. Ant\xF3nio Bernardino de Almeida 431, 4249-015 Porto."),_(),g(126,"li"),M(127,"Por email para o endere\xE7o: privacy@hospital.management.app.com."),_(),g(128,"li"),M(129,"Atrav\xE9s da aplica\xE7\xE3o, utilizando as funcionalidades espec\xEDficas dispon\xEDveis para o efeito."),_()(),g(130,"p"),M(131,"Ao exercer estes direitos, o utilizador deve especificar a natureza da sua solicita\xE7\xE3o e identificar-se devidamente. Ap\xF3s a confirma\xE7\xE3o da identidade do utilizador, para garantir que o pedido n\xE3o \xE9 realizado por terceiros n\xE3o autorizados, a solicita\xE7\xE3o ser\xE1 tratada em total conformidade com os requisitos e prazos legais aplic\xE1veis."),_()(),g(132,"section")(133,"h2"),M(134,"Consentimento"),_(),g(135,"p"),M(136,"Solicitamos o seu consentimento claro e direto para tratar dados, especialmente categorias sens\xEDveis, explicando claramente as finalidades. Pode retirar o seu consentimento a qualquer momento atrav\xE9s das funcionalidades da aplica\xE7\xE3o ou pelos contactos disponibilizados."),_()(),g(137,"section")(138,"h2"),M(139,"Transfer\xEAncia de Dados Pessoais"),_(),g(140,"p"),M(141,"Em nenhum caso, o Hospital Management App transferir\xE1 os dados pessoais fornecidos atrav\xE9s deste website a terceiros sem o consentimento pr\xE9vio do utilizador, exceto se tal for uma obriga\xE7\xE3o legal ou se for identificado um interesse leg\xEDtimo, desde que sejam garantidas as salvaguardas apropriadas."),_()(),g(142,"section")(143,"h2"),M(144,"Autoridade de Supervis\xE3o"),_(),g(145,"p"),M(146,"De acordo com a lei, o titular dos dados tem o direito de apresentar uma reclama\xE7\xE3o relativa \xE0 prote\xE7\xE3o de dados pessoais junto da autoridade de supervis\xE3o competente."),_()(),g(147,"section")(148,"h2"),M(149,"Contactos"),_(),g(150,"p"),M(151,"Se tiver d\xFAvidas sobre esta pol\xEDtica de privacidade, contacte o nosso Encarregado de Prote\xE7\xE3o de Dados atrav\xE9s do email: paulo@hospital.management.app.com."),_()(),g(152,"section")(153,"h2"),M(154,"Atualiza\xE7\xF5es"),_(),g(155,"p"),M(156,"Esta pol\xEDtica de privacidade pode ser alterada. Informaremos com pelo menos 30 dias de anteced\xEAncia sobre mudan\xE7as significativas, e a vers\xE3o atualizada estar\xE1 sempre dispon\xEDvel na nossa aplica\xE7\xE3o."),_()()())},dependencies:[Vt],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;font-family:Poppins,sans-serif,Arial,sans-serif;background-color:#f9f9f9;overflow:hidden}.policy-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;height:100vh;padding:20px;overflow-y:auto;background-color:#fff;color:#333;border-radius:8px;box-shadow:0 4px 10px #0000001a;max-width:900px;margin:auto;border:1px solid rgba(0,0,0,.1)}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;color:#007bff;text-align:center;font-weight:700}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:25px;padding:10px 15px;background-color:#f9f9f9;border-radius:8px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:10px;color:#004085;font-weight:600}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;margin-bottom:15px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;margin-left:20px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 1024px){.policy-container[_ngcontent-%COMP%]{max-width:100%;padding:15px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.policy-container[_ngcontent-%COMP%]{padding:10px;margin:10px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.policy-container[_ngcontent-%COMP%]{padding:8px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem}}"]})}}return n})();var Hz=(()=>{class n{constructor(e,i,r){this.operationRequestService=e,this.router=i,this.panelService=r,this.existingOperationRequest={priority:"",deadlineDate:""}}ngOnInit(){this.panelService.setPanelId("panel-doctor");let e=this.extractOperationRequestFromUrl();this.getOperationRequest(e)}getOperationRequest(e){this.operationRequestService.getOperationRequests().subscribe(i=>{console.log("Operation requests fetched:",i);let r=i.find(o=>o.id===e);r?(this.existingOperationRequest=$t(je({},r),{deadlineDate:this.formatDate(r.deadlineDate)}),console.log("Operation request fetched:",r)):console.error("Operation request not found with id:",e)},i=>{console.error("Error fetching operation request",i)})}updateOperationRequest(e){e.preventDefault();let i=new Date;if(new Date(this.existingOperationRequest.deadlineDate)<=i){alert("The deadline date must be higher than today.");return}let o=this.extractOperationRequestFromUrl();console.log("Updating operation request:",o),this.operationRequestService.editOperationRequest(o,this.existingOperationRequest).subscribe(s=>{console.log("Operation request updated successfully:",s),alert("Operation request updated successfully!"),this.router.navigate(["/manage-patients"])},s=>{console.error("Error updating operation request:",s),alert("Error updating operation request: "+JSON.stringify(s))})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/update-operation-request\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Operation Request not found in URL.")}formatDate(e){let[i,r,o]=e.split("/");return`${o}-${r}-${i}`}clearForm(){this.existingOperationRequest={priority:"",deadlineDate:""}}static{this.\u0275fac=function(i){return new(i||n)($(Os),$(Mt),$(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-operation-request"]],standalone:!0,features:[Je],decls:24,vars:2,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","type","button",1,"btn","btn-back"],[1,"update-title"],[1,"content-container"],[1,"update-form",3,"submit"],["name","priority","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["type","date","placeholder","Deadline Date","name","deadlineDate","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7," Update OperationRequest "),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.updateOperationRequest(s)}),g(10,"select",7),Ze("ngModelChange",function(s){return Ke(r.existingOperationRequest.priority,s)||(r.existingOperationRequest.priority=s),s}),g(11,"option",8),M(12,"Select Priority"),_(),g(13,"option",9),M(14,"Elective Surgery"),_(),g(15,"option",10),M(16,"Urgent Surgery"),_(),g(17,"option",11),M(18,"Emergency Surgery"),_()(),g(19,"input",12),Ze("ngModelChange",function(s){return Ke(r.existingOperationRequest.deadlineDate,s)||(r.existingOperationRequest.deadlineDate=s),s}),_(),g(20,"button",13),M(21," Update OperationRequest "),_(),g(22,"button",14),le("click",function(){return r.clearForm()}),M(23," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.existingOperationRequest.priority),A(9),Xe("ngModel",r.existingOperationRequest.deadlineDate))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,hn,Tn,qn,Vt,Nt,Wt,vt],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:35;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Ph=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/appointments"}createAppointment(e){return console.log("Creating appointment:",e),this.http.post(`${this.apiUrl}/create`,e).pipe(_n(i=>(console.error("Error creating appointment:",i),In(()=>new Error("Failed to create appointment. Please try again later.")))))}getAppointments(){return console.log("getAppointments called"),this.http.get(`${this.apiUrl}`).pipe(_n(e=>(console.error("Error fetching appointments:",e),In(()=>new Error("Failed to fetch appointments. Please try again later.")))))}getAppointmentById(e){return console.log("getAppointmentById called"),this.http.get(`${this.apiUrl}/${e}`).pipe(_n(i=>(console.error("Error fetching appointment:",i),In(()=>new Error("Failed to fetch appointment. Please try again later.")))))}updateAppointment(e,i){return console.log("Updating appointment:",i),this.http.put(`${this.apiUrl}/update/${e}`,i).pipe(_n(r=>(console.error("Error updating appointment:",r),In(()=>new Error("Failed to update appointment. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe($n))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rde(n,t){if(n&1&&(g(0,"option",16),M(1),_()),n&2){let e=t.$implicit;X("value",e.id),A(),Ye(e.name)}}function kde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit;A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)}}function Nde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit;A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)}}var jz=(()=>{class n{constructor(e,i,r,o,s){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.panelService=s,this.operationRequests=[],this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.fetchOperationRequests()}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{console.log(this.selectedOperationRequest.operationType),this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],console.log("Filtered operation types:",this.selectedOperationType),this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)}),console.log("Fetched doctors list:",this.doctors),console.log("Fetched nurses list:",this.nurses)):console.error("No staff list found for the selected operation type")}createAppointment(e){e.preventDefault(),console.log("Creating appointment with data:",this.newAppointment),this.appointmentService.createAppointment(this.newAppointment).subscribe(i=>{console.log("Appointment created:",i),this.clearForm(),alert("Appointment created successfully"),this.router.navigate(["/appointment-manager"])},i=>{console.error("Error creating appointment",i),alert("Error creating appointment")})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/create-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Appointment not found in URL.")}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.id===this.extractOperationRequestFromUrl()),console.log("Filtered operation requests:",this.operationRequests),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.newAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.newAppointment.team.push(i);else{let o=this.newAppointment.team.indexOf(i);o>-1&&this.newAppointment.team.splice(o,1)}console.log("Updated team:",this.newAppointment.team)}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Mt),$(vs),$(Os),$(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-appointment"]],standalone:!0,features:[Je],decls:28,vars:5,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Create Appointment"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.createAppointment(s)}),g(10,"select",7),Ze("ngModelChange",function(s){return Ke(r.newAppointment.roomId,s)||(r.newAppointment.roomId=s),s}),g(11,"option",8),M(12,"Select Room"),_(),Te(13,Rde,2,2,"option",9),_(),g(14,"input",10),Ze("ngModelChange",function(s){return Ke(r.newAppointment.dateTime,s)||(r.newAppointment.dateTime=s),s}),_(),g(15,"div",11)(16,"div",12)(17,"label"),M(18,"Doctors:"),_(),Te(19,kde,3,2,"div",13),_(),g(20,"div",12)(21,"label"),M(22,"Nurses:"),_(),Te(23,Nde,3,2,"div",13),_()(),g(24,"button",14),M(25,"Create Appointment"),_(),g(26,"button",15),le("click",function(){return r.clearForm()}),M(27," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.newAppointment.roomId),A(3),X("ngForOf",r.rooms),A(),Xe("ngModel",r.newAppointment.dateTime),A(5),X("ngForOf",r.doctors),A(4),X("ngForOf",r.nurses))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,hn,Tn,qn,Vt,Nt,Wt,Ea,vt,Mn],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var Fde=n=>["/update-appointment",n];function Lde(n,t){if(n&1&&(g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td"),M(6),_(),g(7,"td"),M(8),_(),g(9,"td"),M(10),zr(11,"date"),_(),g(12,"td"),M(13),_(),g(14,"td"),M(15),_(),g(16,"td"),M(17),_(),g(18,"td"),M(19),_(),g(20,"td")(21,"a",8),M(22,"Edit"),_()()()),n&2){let e=t.$implicit,i=ce();A(2),Ye(e.operationRequest==null?null:e.operationRequest.patientName),A(2),Ye(e.operationRequest==null?null:e.operationRequest.doctorLicenseNumber),A(2),Ye(e.operationRequest==null?null:e.operationRequest.priority),A(2),Ye(e.roomId),A(2),Ye(dl(11,10,e.dateTime,"dd/MM/yyyy - HH:mm")),A(3),Ye(e.status),A(2),Ye(i.getDoctorNames(e.teamDetails)),A(2),Ye(i.getNurseNames(e.teamDetails)),A(2),Ye(e.operationRequest==null?null:e.operationRequest.operationType),A(2),X("routerLink",ri(13,Fde,e.id))}}var Wz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.operationRequestService=i,this.staffService=r,this.datePipe=o,this.filters={},this.appointments=[],this.operationRequests=[],this.staffList=[],this.statusTypes=["Pending","Confirmed","Cancelled"]}ngOnInit(){this.fetchAppointments()}fetchAppointments(){this.appointmentService.getAppointments().subscribe(e=>{e.isSuccess&&e._value?(this.appointments=e._value,console.log("Appointments fetched:",this.appointments),this.fetchOperationRequests()):console.error("Failed to fetch appointments:",e.error)},e=>{console.error("Error fetching appointments",e)})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e,this.mergeAppointmentWithOperationRequests()},e=>{console.error("Error fetching operation requests",e)})}mergeAppointmentWithOperationRequests(){this.appointments=this.appointments.map(e=>{let i=this.operationRequests.find(r=>r.id===e.requestId);return $t(je({},e),{operationRequest:i})}),console.log("Merged appointments:",this.appointments),this.fetchStaffList()}fetchStaffList(){let e=this.appointments.flatMap(r=>r.team),i=[...new Set(e)];Promise.all(i.map(r=>this.staffService.getStaffById(r).toPromise())).then(r=>{this.staffList=r,this.mergeAppointmentWithStaffList()}).catch(r=>{console.error("Error fetching staff list",r)})}mergeAppointmentWithStaffList(){this.appointments=this.appointments.map(e=>{let i=e.team.map(r=>this.staffList.find(o=>o.id===r)).filter(r=>r!==void 0);return $t(je({},e),{teamDetails:i})}),console.log("Merged appointments with staff list:",this.appointments)}getTeamNames(e,i){return e?e.filter(r=>r.staffType===i).map(r=>`${r.fullName} (${r.licenseNumber})`).join(", "):""}getDoctorNames(e){return this.getTeamNames(e,"Doctor")}getNurseNames(e){return this.getTeamNames(e,"Nurse")}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Os),$(ir),$(Eu))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-appointment-manager"]],standalone:!0,features:[zi([Eu]),Je],decls:33,vars:1,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-update",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),M(5,"Appointments Manager"),_(),g(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),M(12,"Patient Name"),_(),g(13,"th"),M(14,"Doctor License Number"),_(),g(15,"th"),M(16,"Priority"),_(),g(17,"th"),M(18,"Room ID"),_(),g(19,"th"),M(20,"Date and Time"),_(),g(21,"th"),M(22,"Status"),_(),g(23,"th"),M(24,"Doctors"),_(),g(25,"th"),M(26,"Nurses"),_(),g(27,"th"),M(28,"Operation Type"),_(),g(29,"th"),M(30,"Actions"),_()()(),g(31,"tbody"),Te(32,Lde,23,15,"tr",7),_()()()()()()()),i&2&&(A(32),X("ngForOf",r.appointments))},dependencies:[Dt,nr,vt,Mn,Eu,Nt,Wt,Vt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:100%;max-width:1400px;height:auto;background-color:#f9f9f9;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;max-width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;max-width:600px;margin-top:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}"]})}}return n})();function Ude(n,t){if(n&1&&(g(0,"option",16),M(1),_()),n&2){let e=t.$implicit;X("value",e.id),A(),Ye(e.name)}}function Vde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}function Bde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}var Gz=(()=>{class n{constructor(e,i,r,o,s){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.panelService=s,this.operationRequests=[],this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.loadAppointment()}loadAppointment(){let e=this.getAppointmentIdFromRoute();this.appointmentService.getAppointmentById(e).subscribe(i=>{i.isSuccess?(console.log("Appointment loaded:",i._value),this.existingAppointment=i._value,this.existingAppointment.dateTime=new Date(this.existingAppointment.dateTime).toISOString().slice(0,16),this.fetchOperationRequests()):console.error("Error loading appointment",i.error)},i=>{console.error("Error loading appointment",i)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)})):console.error("No staff list found for the selected operation type")}updateAppointment(e){e.preventDefault();let i={roomId:this.existingAppointment.roomId,dateTime:this.existingAppointment.dateTime,team:this.existingAppointment.team},r=this.getAppointmentIdFromRoute();this.appointmentService.updateAppointment(r,i).subscribe(o=>{this.clearForm(),alert("Appointment updated successfully"),this.router.navigate(["/appointment-manager"])},o=>{console.error("Error updating appointment",o),alert("Error updating appointment")})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests:",e),console.log("Existing appointment:",this.existingAppointment),console.log("Existing appointment request ID:",this.existingAppointment.requestId),this.existingAppointment.requestId?(this.operationRequests=e.filter(i=>i.id===this.existingAppointment.requestId),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.existingAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")):console.error("Existing appointment request ID is undefined")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.existingAppointment.team.push(i);else{let o=this.existingAppointment.team.indexOf(i);o>-1&&this.existingAppointment.team.splice(o,1)}}getAppointmentIdFromRoute(){let e=window.location.href,i=/\/update-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return console.log("Appointment ID:",r[1]),r[1];throw new Error("Appointment not found in URL.")}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Mt),$(vs),$(Os),$(Fn))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-appointment"]],standalone:!0,features:[Je],decls:28,vars:5,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/appointment-manager","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value","checked"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Update Appointment"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.updateAppointment(s)}),g(10,"select",7),Ze("ngModelChange",function(s){return Ke(r.existingAppointment.roomId,s)||(r.existingAppointment.roomId=s),s}),g(11,"option",8),M(12,"Select Room"),_(),Te(13,Ude,2,2,"option",9),_(),g(14,"input",10),Ze("ngModelChange",function(s){return Ke(r.existingAppointment.dateTime,s)||(r.existingAppointment.dateTime=s),s}),_(),g(15,"div",11)(16,"div",12)(17,"label"),M(18,"Doctors:"),_(),Te(19,Vde,3,3,"div",13),_(),g(20,"div",12)(21,"label"),M(22,"Nurses:"),_(),Te(23,Bde,3,3,"div",13),_()(),g(24,"button",14),M(25,"Update Appointment"),_(),g(26,"button",15),le("click",function(){return r.clearForm()}),M(27," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.existingAppointment.roomId),A(3),X("ngForOf",r.rooms),A(),Xe("ngModel",r.existingAppointment.dateTime),A(5),X("ngForOf",r.doctors),A(4),X("ngForOf",r.nurses))},dependencies:[Dt,Yt,Ri,ki,kt,ji,Ft,qt,hn,Tn,qn,Vt,Nt,Wt,Ea,vt,Mn],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var Xz=UC(qz()),Zz=UC(Yz());var zde=n=>({show:n});function Hde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.allergyName," ")}}function jde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.medicalConditionName," ")}}function Wde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e," ")}}var Kz=(()=>{class n{constructor(e,i,r,o,s,a,l){this.panelService=e,this.settingsService=i,this.profileService=r,this.patientService=o,this.allergyService=s,this.medicalConditionService=a,this.medicalHistoryService=l,this.patientProfile={firstName:"",lastName:"",dateOfBirth:"",gender:0,email:"",phoneNumber:"",emergencyContact:"",fullName:"",id:"",isActive:!1,medicalHistory:"",medicalRecordNumber:""},this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],this.checkCode="",this.isModalOpen=!1}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile"),this.fetchAllergies(),this.fetchMedicalConditions(),this.getPatientProfile()}getPatientProfile(){let e=localStorage.getItem("token");if(e){let r=Ta(e)["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"];this.patientService.getMyProfile(r).subscribe(o=>{console.log(o),this.patientProfile=o[0],this.fetchMedicalHistory(this.patientProfile.medicalRecordNumber)})}}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}downloadProfile(){return Ka(this,null,function*(){let e={fullName:this.patientProfile.fullName,email:this.patientProfile.email,phoneNumber:this.patientProfile.phoneNumber,dateOfBirth:this.patientProfile.dateOfBirth,emergencyContact:this.patientProfile.emergencyContact,gender:this.patientProfile.gender===0?"Male":"Female",medicalRecordNumber:this.patientProfile.medicalRecordNumber,allergies:this.selectedAllergies.map(s=>s.allergyName),medicalConditions:this.selectedMedicalConditions.map(s=>s.medicalConditionName),familyHistory:this.selectedMedicalHistory?.familyHistory||[],freeText:this.selectedMedicalHistory?.freeText||"None"},i=JSON.stringify(e,null,2),r=new Xz.default;r.file("profile.json",i);let o=yield r.generateAsync({type:"blob"});(0,Zz.saveAs)(o,"patient_profile.zip")})}openModal(){this.isModalOpen=!0,this.profileService.getCode(this.patientProfile.email).subscribe(e=>{this.checkCode=e},e=>{console.error("Error fetching code",e)})}verifyCode(){this.code=parseInt(this.code1.toString()+this.code2.toString()+this.code3.toString()+this.code4.toString()+this.code5.toString()+this.code6.toString()),this.code.toString()===this.checkCode.toString()?(this.isModalOpen=!1,this.downloadProfile()):alert("Invalid code"),this.code1=void 0,this.code2=void 0,this.code3=void 0,this.code4=void 0,this.code5=void 0,this.code6=void 0}closeModal(){this.isModalOpen=!1}moveFocus(e,i){if(e.target.value.length===1){let r=document.getElementById(i);r&&r.focus()}}handleBackspace(e,i){if(e.key==="Backspace"&&e.target.value===""){let r=document.getElementById(i);r&&r.focus()}}allowOnlyNumbers(e){let i=e.which?e.which:e.keyCode;(i<48||i>57)&&e.preventDefault()}handlePaste(e){let i=e.clipboardData?.getData("text");if(i&&/^\d{6}$/.test(i)){e.preventDefault();let r=i.split("");this.code1=parseInt(r[0],10),this.code2=parseInt(r[1],10),this.code3=parseInt(r[2],10),this.code4=parseInt(r[3],10),this.code5=parseInt(r[4],10),this.code6=parseInt(r[5],10),setTimeout(()=>{let o=document.getElementById("code6");o&&o.focus()},0)}}static{this.\u0275fac=function(i){return new(i||n)($(Fn),$(Pa),$(bc),$(Ss),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-profile"]],standalone:!0,features:[Je],decls:73,vars:20,consts:[[1,"profile-container"],[1,"profile-screen"],[1,"profile-header"],[1,"profile-name"],[1,"download-button",3,"click"],[1,"profile-details"],[4,"ngFor","ngForOf"],["id","codeModal",1,"modal",3,"ngClass"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"code-inputs"],["id","code1","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code2","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code3","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code4","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code5","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code6","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","keydown","paste","ngModel"],[1,"btn-submit",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1",3),M(5),_(),g(6,"button",4),le("click",function(){return r.openModal()}),M(7,"Download Profile"),_()(),g(8,"div",5)(9,"h2"),M(10,"Personal Information"),_(),g(11,"p")(12,"strong"),M(13,"Email:"),_(),M(14),_(),g(15,"p")(16,"strong"),M(17,"Phone:"),_(),M(18),_(),g(19,"p")(20,"strong"),M(21,"Date of Birth:"),_(),M(22),_(),g(23,"p")(24,"strong"),M(25,"Emergency Contact:"),_(),M(26),_(),g(27,"p")(28,"strong"),M(29,"Gender:"),_(),M(30),_(),g(31,"p")(32,"strong"),M(33,"Medical Record Number:"),_(),M(34),_()(),g(35,"div",5)(36,"h2"),M(37,"Medical History"),_(),g(38,"p")(39,"strong"),M(40,"Allergies:"),_()(),g(41,"ul"),Te(42,Hde,2,1,"li",6),_(),g(43,"p")(44,"strong"),M(45,"Medical Conditions:"),_()(),g(46,"ul"),Te(47,jde,2,1,"li",6),_(),g(48,"p")(49,"strong"),M(50,"Family History:"),_()(),g(51,"ul"),Te(52,Wde,2,1,"li",6),_(),g(53,"p")(54,"strong"),M(55,"Free Text:"),_(),M(56),_()()()(),g(57,"div",7)(58,"div",8)(59,"div",9)(60,"h2",10),M(61,"Enter Verification Code"),_(),g(62,"span",11),le("click",function(){return r.closeModal()}),M(63,"\xD7"),_()(),g(64,"div",12)(65,"input",13),Ze("ngModelChange",function(s){return Ke(r.code1,s)||(r.code1=s),s}),le("input",function(s){return r.moveFocus(s,"code2")})("keydown",function(s){return r.handleBackspace(s,"code1"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(66,"input",14),Ze("ngModelChange",function(s){return Ke(r.code2,s)||(r.code2=s),s}),le("input",function(s){return r.moveFocus(s,"code3")})("keydown",function(s){return r.handleBackspace(s,"code1"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(67,"input",15),Ze("ngModelChange",function(s){return Ke(r.code3,s)||(r.code3=s),s}),le("input",function(s){return r.moveFocus(s,"code4")})("keydown",function(s){return r.handleBackspace(s,"code2"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(68,"input",16),Ze("ngModelChange",function(s){return Ke(r.code4,s)||(r.code4=s),s}),le("input",function(s){return r.moveFocus(s,"code5")})("keydown",function(s){return r.handleBackspace(s,"code3"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(69,"input",17),Ze("ngModelChange",function(s){return Ke(r.code5,s)||(r.code5=s),s}),le("input",function(s){return r.moveFocus(s,"code6")})("keydown",function(s){return r.handleBackspace(s,"code4"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(70,"input",18),Ze("ngModelChange",function(s){return Ke(r.code6,s)||(r.code6=s),s}),le("keydown",function(s){return r.handleBackspace(s,"code5"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_()(),g(71,"button",19),le("click",function(){return r.verifyCode()}),M(72,"Submit"),_()()()),i&2&&(A(5),xt(" ",r.patientProfile.fullName," "),A(9),xt(" ",r.patientProfile.email,""),A(4),xt(" ",r.patientProfile.phoneNumber,""),A(4),xt(" ",r.patientProfile.dateOfBirth,""),A(4),xt(" ",r.patientProfile.emergencyContact," "),A(4),xt(" ",r.patientProfile.gender===0?"Male":"Female"," "),A(4),xt(" ",r.patientProfile.medicalRecordNumber," "),A(8),X("ngForOf",r.selectedAllergies),A(5),X("ngForOf",r.selectedMedicalConditions),A(5),X("ngForOf",r.selectedMedicalHistory==null?null:r.selectedMedicalHistory.familyHistory),A(4),xt(" ",(r.selectedMedicalHistory==null?null:r.selectedMedicalHistory.freeText)||"None "," "),A(),X("ngClass",ri(18,zde,r.isModalOpen)),A(8),Xe("ngModel",r.code1),A(),Xe("ngModel",r.code2),A(),Xe("ngModel",r.code3),A(),Xe("ngModel",r.code4),A(),Xe("ngModel",r.code5),A(),Xe("ngModel",r.code6))},dependencies:[Vt,vt,To,Mn,Dt,kt,Ft,sm,xl,Tn],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.profile-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;max-height:900px;background-color:#fff;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;border-bottom:2px solid #ddd;padding-bottom:10px;width:100%}.profile-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.download-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px}.download-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.profile-details[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9}.profile-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px;color:#555}.profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:16px;color:#666}.profile-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px}.profile-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0}.separator[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin:20px 0}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:2;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;padding-top:100px}.modal.show[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fefefe;margin:5% auto;padding:20px;width:400px;box-shadow:0 0 10px #0000001a;border-radius:8px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;border-bottom:none}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.close[_ngcontent-%COMP%]{color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.code-inputs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.code-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;height:40px;font-size:24px;text-align:center;border:1px solid #ddd;border-radius:5px;margin-right:10px}.code-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:last-child{margin-right:0}.btn-submit[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px;margin-top:10px}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Jz=[{path:"register",component:uL},{path:"login",component:lL},{path:"update-staff/ConfirmUpdates",component:BV},{path:"activate",component:Iz},{path:"panel-admin",component:RV,canActivate:[rr]},{path:"panel-doctor",component:Rz,canActivate:[Va]},{path:"create-staff",component:mL,canActivate:[rr]},{path:"search-staffs",component:IV,canActivate:[rr]},{path:"update-staff/:id",component:kV,canActivate:[rr]},{path:"view-availability/:id",component:Oz,canActivate:[rr]},{path:"operation-types",component:hL,canActivate:[rr]},{path:"specializations",component:Lz,canActivate:[rr],children:[{path:"create-specialization",component:Xm,canActivate:[rr]},{path:"update-specialization/:id",component:Xm,canActivate:[rr]}]},{path:"update-operation-type/:name",component:_L,canActivate:[rr]},{path:"create-operation-type",component:pL,canActivate:[rr]},{path:"patient-panel",component:NV,canActivate:[gx]},{path:"patient-settings",component:gL,canActivate:[gx]},{path:"privacy-policy",component:zz},{path:"patient-profile",component:Kz,canActivate:[gx]},{path:"hospital3d",component:PV},{path:"delete-user",component:OV},{path:"manage-patients",component:FV,canActivate:[rr]},{path:"create-patient",component:LV,canActivate:[rr]},{path:"activate-patient-user",component:VV},{path:"update-patient/:medicalRecordNumber",component:zV,canActivate:[rr]},{path:"operation-requests",component:kz,canActivate:[Va]},{path:"create-operation-request",component:Nz,canActivate:[Va]},{path:"update-operation-request/:id",component:Hz,canActivate:[Va]},{path:"manage-allergies-and-conditions",component:Uz,canActivate:[rr],children:[{path:"create-allergies",component:Cb,canActivate:[rr]},{path:"create-conditions",component:Mb,canActivate:[rr]},{path:"update-allergies/:id",component:wb,canActivate:[rr]},{path:"update-conditions/:id",component:Eb,canActivate:[rr]}]},{path:"update-medical-history/:medicalRecordNumber",component:Vz,canActivate:[Va]},{path:"medical-history-manager",component:Bz,canActivate:[Va]},{path:"create-appointment/:id",component:jz,canActivate:[Va]},{path:"appointment-manager",component:Wz,canActivate:[Va]},{path:"update-appointment/:id",component:Gz,canActivate:[Va]},{path:"",component:dL},{path:"**",component:fL}];var Gde={provide:K1,useClass:DF,multi:!0},Qz={providers:[SN({eventCoalescing:!0}),v3(Jz),PF(),eE(gF()),Nw(_F),Gde]};var e4=(()=>{class n{constructor(e){this.router=e,this.title="Angular-View"}static{this.\u0275fac=function(i){return new(i||n)($(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-root"]],standalone:!0,features:[Je],decls:2,vars:0,consts:[[1,"main-content"]],template:function(i,r){i&1&&(g(0,"main",0),me(1,"router-outlet"),_())},dependencies:[vt,BE,Dt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-content-with-sidebar[_ngcontent-%COMP%]{margin-left:85px;width:calc(100% - 85px);transition:margin-left .4s ease,width .4s ease;height:100vh;overflow:hidden}.main-content-with-sidebar[_ngcontent-%COMP%] ~ .sidebar[_ngcontent-%COMP%]{transition:all .4s ease}.main-content[_ngcontent-%COMP%]{width:100%;height:100%}']})}}return n})();SF(e4,Qz).catch(n=>console.error(n));

var Gj=Object.create;var IC=Object.defineProperty,$j=Object.defineProperties,qj=Object.getOwnPropertyDescriptor,Yj=Object.getOwnPropertyDescriptors,Xj=Object.getOwnPropertyNames,Ug=Object.getOwnPropertySymbols,Zj=Object.getPrototypeOf,RC=Object.prototype.hasOwnProperty,jA=Object.prototype.propertyIsEnumerable;var WA=(n,t,e)=>t in n?IC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,We=(n,t)=>{for(var e in t||={})RC.call(t,e)&&WA(n,e,t[e]);if(Ug)for(var e of Ug(t))jA.call(t,e)&&WA(n,e,t[e]);return n},$t=(n,t)=>$j(n,Yj(t));var Gh=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var Vg=(n,t)=>{var e={};for(var i in n)RC.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Ug)for(var i of Ug(n))t.indexOf(i)<0&&jA.call(n,i)&&(e[i]=n[i]);return e};var NC=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var Kj=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Xj(t))!RC.call(n,r)&&r!==e&&IC(n,r,{get:()=>t[r],enumerable:!(i=qj(t,r))||i.enumerable});return n};var kC=(n,t,e)=>(e=n!=null?Gj(Zj(n)):{},Kj(t||!n||!n.__esModule?IC(e,"default",{value:n,enumerable:!0}):e,n));var Ka=(n,t,e)=>new Promise((i,r)=>{var o=l=>{try{a(e.next(l))}catch(u){r(u)}},s=l=>{try{a(e.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(n,t)).next())});var pV=NC((uh,Fm)=>{"use strict";(function(){var n,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,m=1,p=2,b=1,C=2,y=4,x=8,T=16,E=32,D=64,V=128,B=256,F=512,G=30,k="...",P=800,N=16,S=1,q=2,oe=3,ee=1/0,ge=9007199254740991,se=17976931348623157e292,de=NaN,J=4294967295,Q=J-1,Ie=J>>>1,Le=[["ary",V],["bind",b],["bindKey",C],["curry",x],["curryRight",T],["flip",F],["partial",E],["partialRight",D],["rearg",B]],Ne="[object Arguments]",Ce="[object Array]",He="[object AsyncFunction]",Ge="[object Boolean]",Ve="[object Date]",mt="[object DOMException]",pt="[object Error]",Lt="[object Function]",Tn="[object GeneratorFunction]",O="[object Map]",Me="[object Number]",W="[object Null]",Y="[object Object]",j="[object Promise]",te="[object Proxy]",ve="[object RegExp]",Ee="[object Set]",ie="[object String]",L="[object Symbol]",R="[object Undefined]",K="[object WeakMap]",_e="[object WeakSet]",Te="[object ArrayBuffer]",ye="[object DataView]",st="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",ln="[object Int16Array]",Fe="[object Int32Array]",lt="[object Uint8Array]",It="[object Uint8ClampedArray]",Ot="[object Uint16Array]",ht="[object Uint32Array]",Dn=/\b__p \+= '';/g,tn=/\b(__p \+=) '' \+/g,Jn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ae=/&(?:amp|lt|gt|quot|#39);/g,tt=/[&<>"']/g,Se=RegExp(ae.source),Be=RegExp(tt.source),ft=/<%-([\s\S]+?)%>/g,ct=/<%([\s\S]+?)%>/g,nn=/<%=([\s\S]+?)%>/g,Ti=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gr=/^\w*$/,Yn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jr=/[\\^$.*+?()[\]{}|]/g,As=RegExp(Jr.source),id=/^\s+/,Ym=/\s/,Ba=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Th=/\{\n\/\* \[wrapped with (.+)\] \*/,Xm=/,? & /,Zm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rd=/[()=,{}\[\]\/\s]/,Km=/\\(\\)?/g,od=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dh=/\w*$/,Jm=/^[-+]0x[0-9a-f]+$/i,Mb=/^0b[01]+$/i,wb=/^\[object .+?Constructor\]$/,Eb=/^0o[0-7]+$/i,z=/^(?:0|[1-9]\d*)$/,he=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,be=/['\n\r\u2028\u2029\\]/g,fe="\\ud800-\\udfff",Qe="\\u0300-\\u036f",ut="\\ufe20-\\ufe2f",Et="\\u20d0-\\u20ff",wt=Qe+ut+Et,Xt="\\u2700-\\u27bf",rn="a-z\\xdf-\\xf6\\xf8-\\xff",St="\\xac\\xb1\\xd7\\xf7",Bn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",oi="\\u2000-\\u206f",fi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Er="A-Z\\xc0-\\xd6\\xd8-\\xde",Hn="\\ufe0e\\ufe0f",At=St+Bn+oi+fi,Oo="['\u2019]",qn="["+fe+"]",ho="["+At+"]",Is="["+wt+"]",Ar="\\d+",jc="["+Xt+"]",si="["+rn+"]",Ao="[^"+fe+At+Ar+Xt+rn+Er+"]",za="\\ud83c[\\udffb-\\udfff]",po="(?:"+Is+"|"+za+")",Rs="[^"+fe+"]",Ko="(?:\\ud83c[\\udde6-\\uddff]){2}",sd="[\\ud800-\\udbff][\\udc00-\\udfff]",ad="["+Er+"]",DD="\\u200d",OD="(?:"+si+"|"+Ao+")",Yz="(?:"+ad+"|"+Ao+")",AD="(?:"+Oo+"(?:d|ll|m|re|s|t|ve))?",ID="(?:"+Oo+"(?:D|LL|M|RE|S|T|VE))?",RD=po+"?",ND="["+Hn+"]?",Xz="(?:"+DD+"(?:"+[Rs,Ko,sd].join("|")+")"+ND+RD+")*",Zz="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kz="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kD=ND+RD+Xz,Jz="(?:"+[jc,Ko,sd].join("|")+")"+kD,Qz="(?:"+[Rs+Is+"?",Is,Ko,sd,qn].join("|")+")",e4=RegExp(Oo,"g"),t4=RegExp(Is,"g"),Sb=RegExp(za+"(?="+za+")|"+Qz+kD,"g"),n4=RegExp([ad+"?"+si+"+"+AD+"(?="+[ho,ad,"$"].join("|")+")",Yz+"+"+ID+"(?="+[ho,ad+OD,"$"].join("|")+")",ad+"?"+OD+"+"+AD,ad+"+"+ID,Kz,Zz,Ar,Jz].join("|"),"g"),i4=RegExp("["+DD+fe+wt+Hn+"]"),r4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,o4=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],s4=-1,wi={};wi[st]=wi[et]=wi[nt]=wi[ln]=wi[Fe]=wi[lt]=wi[It]=wi[Ot]=wi[ht]=!0,wi[Ne]=wi[Ce]=wi[Te]=wi[Ge]=wi[ye]=wi[Ve]=wi[pt]=wi[Lt]=wi[O]=wi[Me]=wi[Y]=wi[ve]=wi[Ee]=wi[ie]=wi[K]=!1;var bi={};bi[Ne]=bi[Ce]=bi[Te]=bi[ye]=bi[Ge]=bi[Ve]=bi[st]=bi[et]=bi[nt]=bi[ln]=bi[Fe]=bi[O]=bi[Me]=bi[Y]=bi[ve]=bi[Ee]=bi[ie]=bi[L]=bi[lt]=bi[It]=bi[Ot]=bi[ht]=!0,bi[pt]=bi[Lt]=bi[K]=!1;var a4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},l4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},u4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},d4=parseFloat,f4=parseInt,FD=typeof global=="object"&&global&&global.Object===Object&&global,h4=typeof self=="object"&&self&&self.Object===Object&&self,_r=FD||h4||Function("return this")(),Pb=typeof uh=="object"&&uh&&!uh.nodeType&&uh,Gc=Pb&&typeof Fm=="object"&&Fm&&!Fm.nodeType&&Fm,LD=Gc&&Gc.exports===Pb,Tb=LD&&FD.process,Jo=function(){try{var ue=Gc&&Gc.require&&Gc.require("util").types;return ue||Tb&&Tb.binding&&Tb.binding("util")}catch{}}(),UD=Jo&&Jo.isArrayBuffer,VD=Jo&&Jo.isDate,BD=Jo&&Jo.isMap,zD=Jo&&Jo.isRegExp,HD=Jo&&Jo.isSet,WD=Jo&&Jo.isTypedArray;function Io(ue,De,we){switch(we.length){case 0:return ue.call(De);case 1:return ue.call(De,we[0]);case 2:return ue.call(De,we[0],we[1]);case 3:return ue.call(De,we[0],we[1],we[2])}return ue.apply(De,we)}function p4(ue,De,we,gt){for(var on=-1,Xn=ue==null?0:ue.length;++on<Xn;){var ar=ue[on];De(gt,ar,we(ar),ue)}return gt}function Qo(ue,De){for(var we=-1,gt=ue==null?0:ue.length;++we<gt&&De(ue[we],we,ue)!==!1;);return ue}function m4(ue,De){for(var we=ue==null?0:ue.length;we--&&De(ue[we],we,ue)!==!1;);return ue}function jD(ue,De){for(var we=-1,gt=ue==null?0:ue.length;++we<gt;)if(!De(ue[we],we,ue))return!1;return!0}function Vl(ue,De){for(var we=-1,gt=ue==null?0:ue.length,on=0,Xn=[];++we<gt;){var ar=ue[we];De(ar,we,ue)&&(Xn[on++]=ar)}return Xn}function Qm(ue,De){var we=ue==null?0:ue.length;return!!we&&ld(ue,De,0)>-1}function Db(ue,De,we){for(var gt=-1,on=ue==null?0:ue.length;++gt<on;)if(we(De,ue[gt]))return!0;return!1}function Di(ue,De){for(var we=-1,gt=ue==null?0:ue.length,on=Array(gt);++we<gt;)on[we]=De(ue[we],we,ue);return on}function Bl(ue,De){for(var we=-1,gt=De.length,on=ue.length;++we<gt;)ue[on+we]=De[we];return ue}function Ob(ue,De,we,gt){var on=-1,Xn=ue==null?0:ue.length;for(gt&&Xn&&(we=ue[++on]);++on<Xn;)we=De(we,ue[on],on,ue);return we}function g4(ue,De,we,gt){var on=ue==null?0:ue.length;for(gt&&on&&(we=ue[--on]);on--;)we=De(we,ue[on],on,ue);return we}function Ab(ue,De){for(var we=-1,gt=ue==null?0:ue.length;++we<gt;)if(De(ue[we],we,ue))return!0;return!1}var _4=Ib("length");function v4(ue){return ue.split("")}function y4(ue){return ue.match(Zm)||[]}function GD(ue,De,we){var gt;return we(ue,function(on,Xn,ar){if(De(on,Xn,ar))return gt=Xn,!1}),gt}function eg(ue,De,we,gt){for(var on=ue.length,Xn=we+(gt?1:-1);gt?Xn--:++Xn<on;)if(De(ue[Xn],Xn,ue))return Xn;return-1}function ld(ue,De,we){return De===De?A4(ue,De,we):eg(ue,$D,we)}function x4(ue,De,we,gt){for(var on=we-1,Xn=ue.length;++on<Xn;)if(gt(ue[on],De))return on;return-1}function $D(ue){return ue!==ue}function qD(ue,De){var we=ue==null?0:ue.length;return we?Nb(ue,De)/we:de}function Ib(ue){return function(De){return De==null?n:De[ue]}}function Rb(ue){return function(De){return ue==null?n:ue[De]}}function YD(ue,De,we,gt,on){return on(ue,function(Xn,ar,hi){we=gt?(gt=!1,Xn):De(we,Xn,ar,hi)}),we}function b4(ue,De){var we=ue.length;for(ue.sort(De);we--;)ue[we]=ue[we].value;return ue}function Nb(ue,De){for(var we,gt=-1,on=ue.length;++gt<on;){var Xn=De(ue[gt]);Xn!==n&&(we=we===n?Xn:we+Xn)}return we}function kb(ue,De){for(var we=-1,gt=Array(ue);++we<ue;)gt[we]=De(we);return gt}function C4(ue,De){return Di(De,function(we){return[we,ue[we]]})}function XD(ue){return ue&&ue.slice(0,QD(ue)+1).replace(id,"")}function Ro(ue){return function(De){return ue(De)}}function Fb(ue,De){return Di(De,function(we){return ue[we]})}function Oh(ue,De){return ue.has(De)}function ZD(ue,De){for(var we=-1,gt=ue.length;++we<gt&&ld(De,ue[we],0)>-1;);return we}function KD(ue,De){for(var we=ue.length;we--&&ld(De,ue[we],0)>-1;);return we}function M4(ue,De){for(var we=ue.length,gt=0;we--;)ue[we]===De&&++gt;return gt}var w4=Rb(a4),E4=Rb(l4);function S4(ue){return"\\"+u4[ue]}function P4(ue,De){return ue==null?n:ue[De]}function cd(ue){return i4.test(ue)}function T4(ue){return r4.test(ue)}function D4(ue){for(var De,we=[];!(De=ue.next()).done;)we.push(De.value);return we}function Lb(ue){var De=-1,we=Array(ue.size);return ue.forEach(function(gt,on){we[++De]=[on,gt]}),we}function JD(ue,De){return function(we){return ue(De(we))}}function zl(ue,De){for(var we=-1,gt=ue.length,on=0,Xn=[];++we<gt;){var ar=ue[we];(ar===De||ar===l)&&(ue[we]=l,Xn[on++]=we)}return Xn}function tg(ue){var De=-1,we=Array(ue.size);return ue.forEach(function(gt){we[++De]=gt}),we}function O4(ue){var De=-1,we=Array(ue.size);return ue.forEach(function(gt){we[++De]=[gt,gt]}),we}function A4(ue,De,we){for(var gt=we-1,on=ue.length;++gt<on;)if(ue[gt]===De)return gt;return-1}function I4(ue,De,we){for(var gt=we+1;gt--;)if(ue[gt]===De)return gt;return gt}function ud(ue){return cd(ue)?N4(ue):_4(ue)}function Ns(ue){return cd(ue)?k4(ue):v4(ue)}function QD(ue){for(var De=ue.length;De--&&Ym.test(ue.charAt(De)););return De}var R4=Rb(c4);function N4(ue){for(var De=Sb.lastIndex=0;Sb.test(ue);)++De;return De}function k4(ue){return ue.match(Sb)||[]}function F4(ue){return ue.match(n4)||[]}var L4=function ue(De){De=De==null?_r:Hl.defaults(_r.Object(),De,Hl.pick(_r,o4));var we=De.Array,gt=De.Date,on=De.Error,Xn=De.Function,ar=De.Math,hi=De.Object,Ub=De.RegExp,U4=De.String,es=De.TypeError,ng=we.prototype,V4=Xn.prototype,dd=hi.prototype,ig=De["__core-js_shared__"],rg=V4.toString,ti=dd.hasOwnProperty,B4=0,eO=function(){var c=/[^.]+$/.exec(ig&&ig.keys&&ig.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),og=dd.toString,z4=rg.call(hi),H4=_r._,W4=Ub("^"+rg.call(ti).replace(Jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sg=LD?De.Buffer:n,Wl=De.Symbol,ag=De.Uint8Array,tO=sg?sg.allocUnsafe:n,lg=JD(hi.getPrototypeOf,hi),nO=hi.create,iO=dd.propertyIsEnumerable,cg=ng.splice,rO=Wl?Wl.isConcatSpreadable:n,Ah=Wl?Wl.iterator:n,$c=Wl?Wl.toStringTag:n,ug=function(){try{var c=Kc(hi,"defineProperty");return c({},"",{}),c}catch{}}(),j4=De.clearTimeout!==_r.clearTimeout&&De.clearTimeout,G4=gt&&gt.now!==_r.Date.now&&gt.now,$4=De.setTimeout!==_r.setTimeout&&De.setTimeout,dg=ar.ceil,fg=ar.floor,Vb=hi.getOwnPropertySymbols,q4=sg?sg.isBuffer:n,oO=De.isFinite,Y4=ng.join,X4=JD(hi.keys,hi),lr=ar.max,Ir=ar.min,Z4=gt.now,K4=De.parseInt,sO=ar.random,J4=ng.reverse,Bb=Kc(De,"DataView"),Ih=Kc(De,"Map"),zb=Kc(De,"Promise"),fd=Kc(De,"Set"),Rh=Kc(De,"WeakMap"),Nh=Kc(hi,"create"),hg=Rh&&new Rh,hd={},Q4=Jc(Bb),e5=Jc(Ih),t5=Jc(zb),n5=Jc(fd),i5=Jc(Rh),pg=Wl?Wl.prototype:n,kh=pg?pg.valueOf:n,aO=pg?pg.toString:n;function U(c){if(Ui(c)&&!cn(c)&&!(c instanceof kn)){if(c instanceof ts)return c;if(ti.call(c,"__wrapped__"))return lA(c)}return new ts(c)}var pd=function(){function c(){}return function(d){if(!Fi(d))return{};if(nO)return nO(d);c.prototype=d;var v=new c;return c.prototype=n,v}}();function mg(){}function ts(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}U.templateSettings={escape:ft,evaluate:ct,interpolate:nn,variable:"",imports:{_:U}},U.prototype=mg.prototype,U.prototype.constructor=U,ts.prototype=pd(mg.prototype),ts.prototype.constructor=ts;function kn(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function r5(){var c=new kn(this.__wrapped__);return c.__actions__=mo(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=mo(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=mo(this.__views__),c}function o5(){if(this.__filtered__){var c=new kn(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function s5(){var c=this.__wrapped__.value(),d=this.__dir__,v=cn(c),w=d<0,I=v?c.length:0,H=vH(0,I,this.__views__),Z=H.start,re=H.end,pe=re-Z,Re=w?re:Z-1,ke=this.__iteratees__,je=ke.length,rt=0,Pt=Ir(pe,this.__takeCount__);if(!v||!w&&I==pe&&Pt==pe)return AO(c,this.__actions__);var Ht=[];e:for(;pe--&&rt<Pt;){Re+=d;for(var bn=-1,Wt=c[Re];++bn<je;){var An=ke[bn],Ln=An.iteratee,Fo=An.type,to=Ln(Wt);if(Fo==q)Wt=to;else if(!to){if(Fo==S)continue e;break e}}Ht[rt++]=Wt}return Ht}kn.prototype=pd(mg.prototype),kn.prototype.constructor=kn;function qc(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function a5(){this.__data__=Nh?Nh(null):{},this.size=0}function l5(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function c5(c){var d=this.__data__;if(Nh){var v=d[c];return v===s?n:v}return ti.call(d,c)?d[c]:n}function u5(c){var d=this.__data__;return Nh?d[c]!==n:ti.call(d,c)}function d5(c,d){var v=this.__data__;return this.size+=this.has(c)?0:1,v[c]=Nh&&d===n?s:d,this}qc.prototype.clear=a5,qc.prototype.delete=l5,qc.prototype.get=c5,qc.prototype.has=u5,qc.prototype.set=d5;function Ha(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function f5(){this.__data__=[],this.size=0}function h5(c){var d=this.__data__,v=gg(d,c);if(v<0)return!1;var w=d.length-1;return v==w?d.pop():cg.call(d,v,1),--this.size,!0}function p5(c){var d=this.__data__,v=gg(d,c);return v<0?n:d[v][1]}function m5(c){return gg(this.__data__,c)>-1}function g5(c,d){var v=this.__data__,w=gg(v,c);return w<0?(++this.size,v.push([c,d])):v[w][1]=d,this}Ha.prototype.clear=f5,Ha.prototype.delete=h5,Ha.prototype.get=p5,Ha.prototype.has=m5,Ha.prototype.set=g5;function Wa(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function _5(){this.size=0,this.__data__={hash:new qc,map:new(Ih||Ha),string:new qc}}function v5(c){var d=Tg(this,c).delete(c);return this.size-=d?1:0,d}function y5(c){return Tg(this,c).get(c)}function x5(c){return Tg(this,c).has(c)}function b5(c,d){var v=Tg(this,c),w=v.size;return v.set(c,d),this.size+=v.size==w?0:1,this}Wa.prototype.clear=_5,Wa.prototype.delete=v5,Wa.prototype.get=y5,Wa.prototype.has=x5,Wa.prototype.set=b5;function Yc(c){var d=-1,v=c==null?0:c.length;for(this.__data__=new Wa;++d<v;)this.add(c[d])}function C5(c){return this.__data__.set(c,s),this}function M5(c){return this.__data__.has(c)}Yc.prototype.add=Yc.prototype.push=C5,Yc.prototype.has=M5;function ks(c){var d=this.__data__=new Ha(c);this.size=d.size}function w5(){this.__data__=new Ha,this.size=0}function E5(c){var d=this.__data__,v=d.delete(c);return this.size=d.size,v}function S5(c){return this.__data__.get(c)}function P5(c){return this.__data__.has(c)}function T5(c,d){var v=this.__data__;if(v instanceof Ha){var w=v.__data__;if(!Ih||w.length<e-1)return w.push([c,d]),this.size=++v.size,this;v=this.__data__=new Wa(w)}return v.set(c,d),this.size=v.size,this}ks.prototype.clear=w5,ks.prototype.delete=E5,ks.prototype.get=S5,ks.prototype.has=P5,ks.prototype.set=T5;function lO(c,d){var v=cn(c),w=!v&&Qc(c),I=!v&&!w&&Yl(c),H=!v&&!w&&!I&&vd(c),Z=v||w||I||H,re=Z?kb(c.length,U4):[],pe=re.length;for(var Re in c)(d||ti.call(c,Re))&&!(Z&&(Re=="length"||I&&(Re=="offset"||Re=="parent")||H&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||qa(Re,pe)))&&re.push(Re);return re}function cO(c){var d=c.length;return d?c[Jb(0,d-1)]:n}function D5(c,d){return Dg(mo(c),Xc(d,0,c.length))}function O5(c){return Dg(mo(c))}function Hb(c,d,v){(v!==n&&!Fs(c[d],v)||v===n&&!(d in c))&&ja(c,d,v)}function Fh(c,d,v){var w=c[d];(!(ti.call(c,d)&&Fs(w,v))||v===n&&!(d in c))&&ja(c,d,v)}function gg(c,d){for(var v=c.length;v--;)if(Fs(c[v][0],d))return v;return-1}function A5(c,d,v,w){return jl(c,function(I,H,Z){d(w,I,v(I),Z)}),w}function uO(c,d){return c&&ca(d,vr(d),c)}function I5(c,d){return c&&ca(d,_o(d),c)}function ja(c,d,v){d=="__proto__"&&ug?ug(c,d,{configurable:!0,enumerable:!0,value:v,writable:!0}):c[d]=v}function Wb(c,d){for(var v=-1,w=d.length,I=we(w),H=c==null;++v<w;)I[v]=H?n:MC(c,d[v]);return I}function Xc(c,d,v){return c===c&&(v!==n&&(c=c<=v?c:v),d!==n&&(c=c>=d?c:d)),c}function ns(c,d,v,w,I,H){var Z,re=d&u,pe=d&f,Re=d&h;if(v&&(Z=I?v(c,w,I,H):v(c)),Z!==n)return Z;if(!Fi(c))return c;var ke=cn(c);if(ke){if(Z=xH(c),!re)return mo(c,Z)}else{var je=Rr(c),rt=je==Lt||je==Tn;if(Yl(c))return NO(c,re);if(je==Y||je==Ne||rt&&!I){if(Z=pe||rt?{}:QO(c),!re)return pe?cH(c,I5(Z,c)):lH(c,uO(Z,c))}else{if(!bi[je])return I?c:{};Z=bH(c,je,re)}}H||(H=new ks);var Pt=H.get(c);if(Pt)return Pt;H.set(c,Z),TA(c)?c.forEach(function(Wt){Z.add(ns(Wt,d,v,Wt,c,H))}):SA(c)&&c.forEach(function(Wt,An){Z.set(An,ns(Wt,d,v,An,c,H))});var Ht=Re?pe?cC:lC:pe?_o:vr,bn=ke?n:Ht(c);return Qo(bn||c,function(Wt,An){bn&&(An=Wt,Wt=c[An]),Fh(Z,An,ns(Wt,d,v,An,c,H))}),Z}function R5(c){var d=vr(c);return function(v){return dO(v,c,d)}}function dO(c,d,v){var w=v.length;if(c==null)return!w;for(c=hi(c);w--;){var I=v[w],H=d[I],Z=c[I];if(Z===n&&!(I in c)||!H(Z))return!1}return!0}function fO(c,d,v){if(typeof c!="function")throw new es(r);return Wh(function(){c.apply(n,v)},d)}function Lh(c,d,v,w){var I=-1,H=Qm,Z=!0,re=c.length,pe=[],Re=d.length;if(!re)return pe;v&&(d=Di(d,Ro(v))),w?(H=Db,Z=!1):d.length>=e&&(H=Oh,Z=!1,d=new Yc(d));e:for(;++I<re;){var ke=c[I],je=v==null?ke:v(ke);if(ke=w||ke!==0?ke:0,Z&&je===je){for(var rt=Re;rt--;)if(d[rt]===je)continue e;pe.push(ke)}else H(d,je,w)||pe.push(ke)}return pe}var jl=VO(la),hO=VO(Gb,!0);function N5(c,d){var v=!0;return jl(c,function(w,I,H){return v=!!d(w,I,H),v}),v}function _g(c,d,v){for(var w=-1,I=c.length;++w<I;){var H=c[w],Z=d(H);if(Z!=null&&(re===n?Z===Z&&!ko(Z):v(Z,re)))var re=Z,pe=H}return pe}function k5(c,d,v,w){var I=c.length;for(v=gn(v),v<0&&(v=-v>I?0:I+v),w=w===n||w>I?I:gn(w),w<0&&(w+=I),w=v>w?0:OA(w);v<w;)c[v++]=d;return c}function pO(c,d){var v=[];return jl(c,function(w,I,H){d(w,I,H)&&v.push(w)}),v}function Sr(c,d,v,w,I){var H=-1,Z=c.length;for(v||(v=MH),I||(I=[]);++H<Z;){var re=c[H];d>0&&v(re)?d>1?Sr(re,d-1,v,w,I):Bl(I,re):w||(I[I.length]=re)}return I}var jb=BO(),mO=BO(!0);function la(c,d){return c&&jb(c,d,vr)}function Gb(c,d){return c&&mO(c,d,vr)}function vg(c,d){return Vl(d,function(v){return Ya(c[v])})}function Zc(c,d){d=$l(d,c);for(var v=0,w=d.length;c!=null&&v<w;)c=c[ua(d[v++])];return v&&v==w?c:n}function gO(c,d,v){var w=d(c);return cn(c)?w:Bl(w,v(c))}function Qr(c){return c==null?c===n?R:W:$c&&$c in hi(c)?_H(c):OH(c)}function $b(c,d){return c>d}function F5(c,d){return c!=null&&ti.call(c,d)}function L5(c,d){return c!=null&&d in hi(c)}function U5(c,d,v){return c>=Ir(d,v)&&c<lr(d,v)}function qb(c,d,v){for(var w=v?Db:Qm,I=c[0].length,H=c.length,Z=H,re=we(H),pe=1/0,Re=[];Z--;){var ke=c[Z];Z&&d&&(ke=Di(ke,Ro(d))),pe=Ir(ke.length,pe),re[Z]=!v&&(d||I>=120&&ke.length>=120)?new Yc(Z&&ke):n}ke=c[0];var je=-1,rt=re[0];e:for(;++je<I&&Re.length<pe;){var Pt=ke[je],Ht=d?d(Pt):Pt;if(Pt=v||Pt!==0?Pt:0,!(rt?Oh(rt,Ht):w(Re,Ht,v))){for(Z=H;--Z;){var bn=re[Z];if(!(bn?Oh(bn,Ht):w(c[Z],Ht,v)))continue e}rt&&rt.push(Ht),Re.push(Pt)}}return Re}function V5(c,d,v,w){return la(c,function(I,H,Z){d(w,v(I),H,Z)}),w}function Uh(c,d,v){d=$l(d,c),c=iA(c,d);var w=c==null?c:c[ua(rs(d))];return w==null?n:Io(w,c,v)}function _O(c){return Ui(c)&&Qr(c)==Ne}function B5(c){return Ui(c)&&Qr(c)==Te}function z5(c){return Ui(c)&&Qr(c)==Ve}function Vh(c,d,v,w,I){return c===d?!0:c==null||d==null||!Ui(c)&&!Ui(d)?c!==c&&d!==d:H5(c,d,v,w,Vh,I)}function H5(c,d,v,w,I,H){var Z=cn(c),re=cn(d),pe=Z?Ce:Rr(c),Re=re?Ce:Rr(d);pe=pe==Ne?Y:pe,Re=Re==Ne?Y:Re;var ke=pe==Y,je=Re==Y,rt=pe==Re;if(rt&&Yl(c)){if(!Yl(d))return!1;Z=!0,ke=!1}if(rt&&!ke)return H||(H=new ks),Z||vd(c)?ZO(c,d,v,w,I,H):mH(c,d,pe,v,w,I,H);if(!(v&m)){var Pt=ke&&ti.call(c,"__wrapped__"),Ht=je&&ti.call(d,"__wrapped__");if(Pt||Ht){var bn=Pt?c.value():c,Wt=Ht?d.value():d;return H||(H=new ks),I(bn,Wt,v,w,H)}}return rt?(H||(H=new ks),gH(c,d,v,w,I,H)):!1}function W5(c){return Ui(c)&&Rr(c)==O}function Yb(c,d,v,w){var I=v.length,H=I,Z=!w;if(c==null)return!H;for(c=hi(c);I--;){var re=v[I];if(Z&&re[2]?re[1]!==c[re[0]]:!(re[0]in c))return!1}for(;++I<H;){re=v[I];var pe=re[0],Re=c[pe],ke=re[1];if(Z&&re[2]){if(Re===n&&!(pe in c))return!1}else{var je=new ks;if(w)var rt=w(Re,ke,pe,c,d,je);if(!(rt===n?Vh(ke,Re,m|p,w,je):rt))return!1}}return!0}function vO(c){if(!Fi(c)||EH(c))return!1;var d=Ya(c)?W4:wb;return d.test(Jc(c))}function j5(c){return Ui(c)&&Qr(c)==ve}function G5(c){return Ui(c)&&Rr(c)==Ee}function $5(c){return Ui(c)&&kg(c.length)&&!!wi[Qr(c)]}function yO(c){return typeof c=="function"?c:c==null?vo:typeof c=="object"?cn(c)?CO(c[0],c[1]):bO(c):zA(c)}function Xb(c){if(!Hh(c))return X4(c);var d=[];for(var v in hi(c))ti.call(c,v)&&v!="constructor"&&d.push(v);return d}function q5(c){if(!Fi(c))return DH(c);var d=Hh(c),v=[];for(var w in c)w=="constructor"&&(d||!ti.call(c,w))||v.push(w);return v}function Zb(c,d){return c<d}function xO(c,d){var v=-1,w=go(c)?we(c.length):[];return jl(c,function(I,H,Z){w[++v]=d(I,H,Z)}),w}function bO(c){var d=dC(c);return d.length==1&&d[0][2]?tA(d[0][0],d[0][1]):function(v){return v===c||Yb(v,c,d)}}function CO(c,d){return hC(c)&&eA(d)?tA(ua(c),d):function(v){var w=MC(v,c);return w===n&&w===d?wC(v,c):Vh(d,w,m|p)}}function yg(c,d,v,w,I){c!==d&&jb(d,function(H,Z){if(I||(I=new ks),Fi(H))Y5(c,d,Z,v,yg,w,I);else{var re=w?w(mC(c,Z),H,Z+"",c,d,I):n;re===n&&(re=H),Hb(c,Z,re)}},_o)}function Y5(c,d,v,w,I,H,Z){var re=mC(c,v),pe=mC(d,v),Re=Z.get(pe);if(Re){Hb(c,v,Re);return}var ke=H?H(re,pe,v+"",c,d,Z):n,je=ke===n;if(je){var rt=cn(pe),Pt=!rt&&Yl(pe),Ht=!rt&&!Pt&&vd(pe);ke=pe,rt||Pt||Ht?cn(re)?ke=re:ji(re)?ke=mo(re):Pt?(je=!1,ke=NO(pe,!0)):Ht?(je=!1,ke=kO(pe,!0)):ke=[]:jh(pe)||Qc(pe)?(ke=re,Qc(re)?ke=AA(re):(!Fi(re)||Ya(re))&&(ke=QO(pe))):je=!1}je&&(Z.set(pe,ke),I(ke,pe,w,H,Z),Z.delete(pe)),Hb(c,v,ke)}function MO(c,d){var v=c.length;if(v)return d+=d<0?v:0,qa(d,v)?c[d]:n}function wO(c,d,v){d.length?d=Di(d,function(H){return cn(H)?function(Z){return Zc(Z,H.length===1?H[0]:H)}:H}):d=[vo];var w=-1;d=Di(d,Ro(zt()));var I=xO(c,function(H,Z,re){var pe=Di(d,function(Re){return Re(H)});return{criteria:pe,index:++w,value:H}});return b4(I,function(H,Z){return aH(H,Z,v)})}function X5(c,d){return EO(c,d,function(v,w){return wC(c,w)})}function EO(c,d,v){for(var w=-1,I=d.length,H={};++w<I;){var Z=d[w],re=Zc(c,Z);v(re,Z)&&Bh(H,$l(Z,c),re)}return H}function Z5(c){return function(d){return Zc(d,c)}}function Kb(c,d,v,w){var I=w?x4:ld,H=-1,Z=d.length,re=c;for(c===d&&(d=mo(d)),v&&(re=Di(c,Ro(v)));++H<Z;)for(var pe=0,Re=d[H],ke=v?v(Re):Re;(pe=I(re,ke,pe,w))>-1;)re!==c&&cg.call(re,pe,1),cg.call(c,pe,1);return c}function SO(c,d){for(var v=c?d.length:0,w=v-1;v--;){var I=d[v];if(v==w||I!==H){var H=I;qa(I)?cg.call(c,I,1):tC(c,I)}}return c}function Jb(c,d){return c+fg(sO()*(d-c+1))}function K5(c,d,v,w){for(var I=-1,H=lr(dg((d-c)/(v||1)),0),Z=we(H);H--;)Z[w?H:++I]=c,c+=v;return Z}function Qb(c,d){var v="";if(!c||d<1||d>ge)return v;do d%2&&(v+=c),d=fg(d/2),d&&(c+=c);while(d);return v}function En(c,d){return gC(nA(c,d,vo),c+"")}function J5(c){return cO(yd(c))}function Q5(c,d){var v=yd(c);return Dg(v,Xc(d,0,v.length))}function Bh(c,d,v,w){if(!Fi(c))return c;d=$l(d,c);for(var I=-1,H=d.length,Z=H-1,re=c;re!=null&&++I<H;){var pe=ua(d[I]),Re=v;if(pe==="__proto__"||pe==="constructor"||pe==="prototype")return c;if(I!=Z){var ke=re[pe];Re=w?w(ke,pe,re):n,Re===n&&(Re=Fi(ke)?ke:qa(d[I+1])?[]:{})}Fh(re,pe,Re),re=re[pe]}return c}var PO=hg?function(c,d){return hg.set(c,d),c}:vo,eH=ug?function(c,d){return ug(c,"toString",{configurable:!0,enumerable:!1,value:SC(d),writable:!0})}:vo;function tH(c){return Dg(yd(c))}function is(c,d,v){var w=-1,I=c.length;d<0&&(d=-d>I?0:I+d),v=v>I?I:v,v<0&&(v+=I),I=d>v?0:v-d>>>0,d>>>=0;for(var H=we(I);++w<I;)H[w]=c[w+d];return H}function nH(c,d){var v;return jl(c,function(w,I,H){return v=d(w,I,H),!v}),!!v}function xg(c,d,v){var w=0,I=c==null?w:c.length;if(typeof d=="number"&&d===d&&I<=Ie){for(;w<I;){var H=w+I>>>1,Z=c[H];Z!==null&&!ko(Z)&&(v?Z<=d:Z<d)?w=H+1:I=H}return I}return eC(c,d,vo,v)}function eC(c,d,v,w){var I=0,H=c==null?0:c.length;if(H===0)return 0;d=v(d);for(var Z=d!==d,re=d===null,pe=ko(d),Re=d===n;I<H;){var ke=fg((I+H)/2),je=v(c[ke]),rt=je!==n,Pt=je===null,Ht=je===je,bn=ko(je);if(Z)var Wt=w||Ht;else Re?Wt=Ht&&(w||rt):re?Wt=Ht&&rt&&(w||!Pt):pe?Wt=Ht&&rt&&!Pt&&(w||!bn):Pt||bn?Wt=!1:Wt=w?je<=d:je<d;Wt?I=ke+1:H=ke}return Ir(H,Q)}function TO(c,d){for(var v=-1,w=c.length,I=0,H=[];++v<w;){var Z=c[v],re=d?d(Z):Z;if(!v||!Fs(re,pe)){var pe=re;H[I++]=Z===0?0:Z}}return H}function DO(c){return typeof c=="number"?c:ko(c)?de:+c}function No(c){if(typeof c=="string")return c;if(cn(c))return Di(c,No)+"";if(ko(c))return aO?aO.call(c):"";var d=c+"";return d=="0"&&1/c==-ee?"-0":d}function Gl(c,d,v){var w=-1,I=Qm,H=c.length,Z=!0,re=[],pe=re;if(v)Z=!1,I=Db;else if(H>=e){var Re=d?null:hH(c);if(Re)return tg(Re);Z=!1,I=Oh,pe=new Yc}else pe=d?[]:re;e:for(;++w<H;){var ke=c[w],je=d?d(ke):ke;if(ke=v||ke!==0?ke:0,Z&&je===je){for(var rt=pe.length;rt--;)if(pe[rt]===je)continue e;d&&pe.push(je),re.push(ke)}else I(pe,je,v)||(pe!==re&&pe.push(je),re.push(ke))}return re}function tC(c,d){return d=$l(d,c),c=iA(c,d),c==null||delete c[ua(rs(d))]}function OO(c,d,v,w){return Bh(c,d,v(Zc(c,d)),w)}function bg(c,d,v,w){for(var I=c.length,H=w?I:-1;(w?H--:++H<I)&&d(c[H],H,c););return v?is(c,w?0:H,w?H+1:I):is(c,w?H+1:0,w?I:H)}function AO(c,d){var v=c;return v instanceof kn&&(v=v.value()),Ob(d,function(w,I){return I.func.apply(I.thisArg,Bl([w],I.args))},v)}function nC(c,d,v){var w=c.length;if(w<2)return w?Gl(c[0]):[];for(var I=-1,H=we(w);++I<w;)for(var Z=c[I],re=-1;++re<w;)re!=I&&(H[I]=Lh(H[I]||Z,c[re],d,v));return Gl(Sr(H,1),d,v)}function IO(c,d,v){for(var w=-1,I=c.length,H=d.length,Z={};++w<I;){var re=w<H?d[w]:n;v(Z,c[w],re)}return Z}function iC(c){return ji(c)?c:[]}function rC(c){return typeof c=="function"?c:vo}function $l(c,d){return cn(c)?c:hC(c,d)?[c]:aA(Qn(c))}var iH=En;function ql(c,d,v){var w=c.length;return v=v===n?w:v,!d&&v>=w?c:is(c,d,v)}var RO=j4||function(c){return _r.clearTimeout(c)};function NO(c,d){if(d)return c.slice();var v=c.length,w=tO?tO(v):new c.constructor(v);return c.copy(w),w}function oC(c){var d=new c.constructor(c.byteLength);return new ag(d).set(new ag(c)),d}function rH(c,d){var v=d?oC(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.byteLength)}function oH(c){var d=new c.constructor(c.source,Dh.exec(c));return d.lastIndex=c.lastIndex,d}function sH(c){return kh?hi(kh.call(c)):{}}function kO(c,d){var v=d?oC(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.length)}function FO(c,d){if(c!==d){var v=c!==n,w=c===null,I=c===c,H=ko(c),Z=d!==n,re=d===null,pe=d===d,Re=ko(d);if(!re&&!Re&&!H&&c>d||H&&Z&&pe&&!re&&!Re||w&&Z&&pe||!v&&pe||!I)return 1;if(!w&&!H&&!Re&&c<d||Re&&v&&I&&!w&&!H||re&&v&&I||!Z&&I||!pe)return-1}return 0}function aH(c,d,v){for(var w=-1,I=c.criteria,H=d.criteria,Z=I.length,re=v.length;++w<Z;){var pe=FO(I[w],H[w]);if(pe){if(w>=re)return pe;var Re=v[w];return pe*(Re=="desc"?-1:1)}}return c.index-d.index}function LO(c,d,v,w){for(var I=-1,H=c.length,Z=v.length,re=-1,pe=d.length,Re=lr(H-Z,0),ke=we(pe+Re),je=!w;++re<pe;)ke[re]=d[re];for(;++I<Z;)(je||I<H)&&(ke[v[I]]=c[I]);for(;Re--;)ke[re++]=c[I++];return ke}function UO(c,d,v,w){for(var I=-1,H=c.length,Z=-1,re=v.length,pe=-1,Re=d.length,ke=lr(H-re,0),je=we(ke+Re),rt=!w;++I<ke;)je[I]=c[I];for(var Pt=I;++pe<Re;)je[Pt+pe]=d[pe];for(;++Z<re;)(rt||I<H)&&(je[Pt+v[Z]]=c[I++]);return je}function mo(c,d){var v=-1,w=c.length;for(d||(d=we(w));++v<w;)d[v]=c[v];return d}function ca(c,d,v,w){var I=!v;v||(v={});for(var H=-1,Z=d.length;++H<Z;){var re=d[H],pe=w?w(v[re],c[re],re,v,c):n;pe===n&&(pe=c[re]),I?ja(v,re,pe):Fh(v,re,pe)}return v}function lH(c,d){return ca(c,fC(c),d)}function cH(c,d){return ca(c,KO(c),d)}function Cg(c,d){return function(v,w){var I=cn(v)?p4:A5,H=d?d():{};return I(v,c,zt(w,2),H)}}function md(c){return En(function(d,v){var w=-1,I=v.length,H=I>1?v[I-1]:n,Z=I>2?v[2]:n;for(H=c.length>3&&typeof H=="function"?(I--,H):n,Z&&eo(v[0],v[1],Z)&&(H=I<3?n:H,I=1),d=hi(d);++w<I;){var re=v[w];re&&c(d,re,w,H)}return d})}function VO(c,d){return function(v,w){if(v==null)return v;if(!go(v))return c(v,w);for(var I=v.length,H=d?I:-1,Z=hi(v);(d?H--:++H<I)&&w(Z[H],H,Z)!==!1;);return v}}function BO(c){return function(d,v,w){for(var I=-1,H=hi(d),Z=w(d),re=Z.length;re--;){var pe=Z[c?re:++I];if(v(H[pe],pe,H)===!1)break}return d}}function uH(c,d,v){var w=d&b,I=zh(c);function H(){var Z=this&&this!==_r&&this instanceof H?I:c;return Z.apply(w?v:this,arguments)}return H}function zO(c){return function(d){d=Qn(d);var v=cd(d)?Ns(d):n,w=v?v[0]:d.charAt(0),I=v?ql(v,1).join(""):d.slice(1);return w[c]()+I}}function gd(c){return function(d){return Ob(VA(UA(d).replace(e4,"")),c,"")}}function zh(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var v=pd(c.prototype),w=c.apply(v,d);return Fi(w)?w:v}}function dH(c,d,v){var w=zh(c);function I(){for(var H=arguments.length,Z=we(H),re=H,pe=_d(I);re--;)Z[re]=arguments[re];var Re=H<3&&Z[0]!==pe&&Z[H-1]!==pe?[]:zl(Z,pe);if(H-=Re.length,H<v)return $O(c,d,Mg,I.placeholder,n,Z,Re,n,n,v-H);var ke=this&&this!==_r&&this instanceof I?w:c;return Io(ke,this,Z)}return I}function HO(c){return function(d,v,w){var I=hi(d);if(!go(d)){var H=zt(v,3);d=vr(d),v=function(re){return H(I[re],re,I)}}var Z=c(d,v,w);return Z>-1?I[H?d[Z]:Z]:n}}function WO(c){return $a(function(d){var v=d.length,w=v,I=ts.prototype.thru;for(c&&d.reverse();w--;){var H=d[w];if(typeof H!="function")throw new es(r);if(I&&!Z&&Pg(H)=="wrapper")var Z=new ts([],!0)}for(w=Z?w:v;++w<v;){H=d[w];var re=Pg(H),pe=re=="wrapper"?uC(H):n;pe&&pC(pe[0])&&pe[1]==(V|x|E|B)&&!pe[4].length&&pe[9]==1?Z=Z[Pg(pe[0])].apply(Z,pe[3]):Z=H.length==1&&pC(H)?Z[re]():Z.thru(H)}return function(){var Re=arguments,ke=Re[0];if(Z&&Re.length==1&&cn(ke))return Z.plant(ke).value();for(var je=0,rt=v?d[je].apply(this,Re):ke;++je<v;)rt=d[je].call(this,rt);return rt}})}function Mg(c,d,v,w,I,H,Z,re,pe,Re){var ke=d&V,je=d&b,rt=d&C,Pt=d&(x|T),Ht=d&F,bn=rt?n:zh(c);function Wt(){for(var An=arguments.length,Ln=we(An),Fo=An;Fo--;)Ln[Fo]=arguments[Fo];if(Pt)var to=_d(Wt),Lo=M4(Ln,to);if(w&&(Ln=LO(Ln,w,I,Pt)),H&&(Ln=UO(Ln,H,Z,Pt)),An-=Lo,Pt&&An<Re){var Gi=zl(Ln,to);return $O(c,d,Mg,Wt.placeholder,v,Ln,Gi,re,pe,Re-An)}var Ls=je?v:this,Za=rt?Ls[c]:c;return An=Ln.length,re?Ln=AH(Ln,re):Ht&&An>1&&Ln.reverse(),ke&&pe<An&&(Ln.length=pe),this&&this!==_r&&this instanceof Wt&&(Za=bn||zh(Za)),Za.apply(Ls,Ln)}return Wt}function jO(c,d){return function(v,w){return V5(v,c,d(w),{})}}function wg(c,d){return function(v,w){var I;if(v===n&&w===n)return d;if(v!==n&&(I=v),w!==n){if(I===n)return w;typeof v=="string"||typeof w=="string"?(v=No(v),w=No(w)):(v=DO(v),w=DO(w)),I=c(v,w)}return I}}function sC(c){return $a(function(d){return d=Di(d,Ro(zt())),En(function(v){var w=this;return c(d,function(I){return Io(I,w,v)})})})}function Eg(c,d){d=d===n?" ":No(d);var v=d.length;if(v<2)return v?Qb(d,c):d;var w=Qb(d,dg(c/ud(d)));return cd(d)?ql(Ns(w),0,c).join(""):w.slice(0,c)}function fH(c,d,v,w){var I=d&b,H=zh(c);function Z(){for(var re=-1,pe=arguments.length,Re=-1,ke=w.length,je=we(ke+pe),rt=this&&this!==_r&&this instanceof Z?H:c;++Re<ke;)je[Re]=w[Re];for(;pe--;)je[Re++]=arguments[++re];return Io(rt,I?v:this,je)}return Z}function GO(c){return function(d,v,w){return w&&typeof w!="number"&&eo(d,v,w)&&(v=w=n),d=Xa(d),v===n?(v=d,d=0):v=Xa(v),w=w===n?d<v?1:-1:Xa(w),K5(d,v,w,c)}}function Sg(c){return function(d,v){return typeof d=="string"&&typeof v=="string"||(d=os(d),v=os(v)),c(d,v)}}function $O(c,d,v,w,I,H,Z,re,pe,Re){var ke=d&x,je=ke?Z:n,rt=ke?n:Z,Pt=ke?H:n,Ht=ke?n:H;d|=ke?E:D,d&=~(ke?D:E),d&y||(d&=~(b|C));var bn=[c,d,I,Pt,je,Ht,rt,re,pe,Re],Wt=v.apply(n,bn);return pC(c)&&rA(Wt,bn),Wt.placeholder=w,oA(Wt,c,d)}function aC(c){var d=ar[c];return function(v,w){if(v=os(v),w=w==null?0:Ir(gn(w),292),w&&oO(v)){var I=(Qn(v)+"e").split("e"),H=d(I[0]+"e"+(+I[1]+w));return I=(Qn(H)+"e").split("e"),+(I[0]+"e"+(+I[1]-w))}return d(v)}}var hH=fd&&1/tg(new fd([,-0]))[1]==ee?function(c){return new fd(c)}:DC;function qO(c){return function(d){var v=Rr(d);return v==O?Lb(d):v==Ee?O4(d):C4(d,c(d))}}function Ga(c,d,v,w,I,H,Z,re){var pe=d&C;if(!pe&&typeof c!="function")throw new es(r);var Re=w?w.length:0;if(Re||(d&=~(E|D),w=I=n),Z=Z===n?Z:lr(gn(Z),0),re=re===n?re:gn(re),Re-=I?I.length:0,d&D){var ke=w,je=I;w=I=n}var rt=pe?n:uC(c),Pt=[c,d,v,w,I,ke,je,H,Z,re];if(rt&&TH(Pt,rt),c=Pt[0],d=Pt[1],v=Pt[2],w=Pt[3],I=Pt[4],re=Pt[9]=Pt[9]===n?pe?0:c.length:lr(Pt[9]-Re,0),!re&&d&(x|T)&&(d&=~(x|T)),!d||d==b)var Ht=uH(c,d,v);else d==x||d==T?Ht=dH(c,d,re):(d==E||d==(b|E))&&!I.length?Ht=fH(c,d,v,w):Ht=Mg.apply(n,Pt);var bn=rt?PO:rA;return oA(bn(Ht,Pt),c,d)}function YO(c,d,v,w){return c===n||Fs(c,dd[v])&&!ti.call(w,v)?d:c}function XO(c,d,v,w,I,H){return Fi(c)&&Fi(d)&&(H.set(d,c),yg(c,d,n,XO,H),H.delete(d)),c}function pH(c){return jh(c)?n:c}function ZO(c,d,v,w,I,H){var Z=v&m,re=c.length,pe=d.length;if(re!=pe&&!(Z&&pe>re))return!1;var Re=H.get(c),ke=H.get(d);if(Re&&ke)return Re==d&&ke==c;var je=-1,rt=!0,Pt=v&p?new Yc:n;for(H.set(c,d),H.set(d,c);++je<re;){var Ht=c[je],bn=d[je];if(w)var Wt=Z?w(bn,Ht,je,d,c,H):w(Ht,bn,je,c,d,H);if(Wt!==n){if(Wt)continue;rt=!1;break}if(Pt){if(!Ab(d,function(An,Ln){if(!Oh(Pt,Ln)&&(Ht===An||I(Ht,An,v,w,H)))return Pt.push(Ln)})){rt=!1;break}}else if(!(Ht===bn||I(Ht,bn,v,w,H))){rt=!1;break}}return H.delete(c),H.delete(d),rt}function mH(c,d,v,w,I,H,Z){switch(v){case ye:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Te:return!(c.byteLength!=d.byteLength||!H(new ag(c),new ag(d)));case Ge:case Ve:case Me:return Fs(+c,+d);case pt:return c.name==d.name&&c.message==d.message;case ve:case ie:return c==d+"";case O:var re=Lb;case Ee:var pe=w&m;if(re||(re=tg),c.size!=d.size&&!pe)return!1;var Re=Z.get(c);if(Re)return Re==d;w|=p,Z.set(c,d);var ke=ZO(re(c),re(d),w,I,H,Z);return Z.delete(c),ke;case L:if(kh)return kh.call(c)==kh.call(d)}return!1}function gH(c,d,v,w,I,H){var Z=v&m,re=lC(c),pe=re.length,Re=lC(d),ke=Re.length;if(pe!=ke&&!Z)return!1;for(var je=pe;je--;){var rt=re[je];if(!(Z?rt in d:ti.call(d,rt)))return!1}var Pt=H.get(c),Ht=H.get(d);if(Pt&&Ht)return Pt==d&&Ht==c;var bn=!0;H.set(c,d),H.set(d,c);for(var Wt=Z;++je<pe;){rt=re[je];var An=c[rt],Ln=d[rt];if(w)var Fo=Z?w(Ln,An,rt,d,c,H):w(An,Ln,rt,c,d,H);if(!(Fo===n?An===Ln||I(An,Ln,v,w,H):Fo)){bn=!1;break}Wt||(Wt=rt=="constructor")}if(bn&&!Wt){var to=c.constructor,Lo=d.constructor;to!=Lo&&"constructor"in c&&"constructor"in d&&!(typeof to=="function"&&to instanceof to&&typeof Lo=="function"&&Lo instanceof Lo)&&(bn=!1)}return H.delete(c),H.delete(d),bn}function $a(c){return gC(nA(c,n,dA),c+"")}function lC(c){return gO(c,vr,fC)}function cC(c){return gO(c,_o,KO)}var uC=hg?function(c){return hg.get(c)}:DC;function Pg(c){for(var d=c.name+"",v=hd[d],w=ti.call(hd,d)?v.length:0;w--;){var I=v[w],H=I.func;if(H==null||H==c)return I.name}return d}function _d(c){var d=ti.call(U,"placeholder")?U:c;return d.placeholder}function zt(){var c=U.iteratee||PC;return c=c===PC?yO:c,arguments.length?c(arguments[0],arguments[1]):c}function Tg(c,d){var v=c.__data__;return wH(d)?v[typeof d=="string"?"string":"hash"]:v.map}function dC(c){for(var d=vr(c),v=d.length;v--;){var w=d[v],I=c[w];d[v]=[w,I,eA(I)]}return d}function Kc(c,d){var v=P4(c,d);return vO(v)?v:n}function _H(c){var d=ti.call(c,$c),v=c[$c];try{c[$c]=n;var w=!0}catch{}var I=og.call(c);return w&&(d?c[$c]=v:delete c[$c]),I}var fC=Vb?function(c){return c==null?[]:(c=hi(c),Vl(Vb(c),function(d){return iO.call(c,d)}))}:OC,KO=Vb?function(c){for(var d=[];c;)Bl(d,fC(c)),c=lg(c);return d}:OC,Rr=Qr;(Bb&&Rr(new Bb(new ArrayBuffer(1)))!=ye||Ih&&Rr(new Ih)!=O||zb&&Rr(zb.resolve())!=j||fd&&Rr(new fd)!=Ee||Rh&&Rr(new Rh)!=K)&&(Rr=function(c){var d=Qr(c),v=d==Y?c.constructor:n,w=v?Jc(v):"";if(w)switch(w){case Q4:return ye;case e5:return O;case t5:return j;case n5:return Ee;case i5:return K}return d});function vH(c,d,v){for(var w=-1,I=v.length;++w<I;){var H=v[w],Z=H.size;switch(H.type){case"drop":c+=Z;break;case"dropRight":d-=Z;break;case"take":d=Ir(d,c+Z);break;case"takeRight":c=lr(c,d-Z);break}}return{start:c,end:d}}function yH(c){var d=c.match(Th);return d?d[1].split(Xm):[]}function JO(c,d,v){d=$l(d,c);for(var w=-1,I=d.length,H=!1;++w<I;){var Z=ua(d[w]);if(!(H=c!=null&&v(c,Z)))break;c=c[Z]}return H||++w!=I?H:(I=c==null?0:c.length,!!I&&kg(I)&&qa(Z,I)&&(cn(c)||Qc(c)))}function xH(c){var d=c.length,v=new c.constructor(d);return d&&typeof c[0]=="string"&&ti.call(c,"index")&&(v.index=c.index,v.input=c.input),v}function QO(c){return typeof c.constructor=="function"&&!Hh(c)?pd(lg(c)):{}}function bH(c,d,v){var w=c.constructor;switch(d){case Te:return oC(c);case Ge:case Ve:return new w(+c);case ye:return rH(c,v);case st:case et:case nt:case ln:case Fe:case lt:case It:case Ot:case ht:return kO(c,v);case O:return new w;case Me:case ie:return new w(c);case ve:return oH(c);case Ee:return new w;case L:return sH(c)}}function CH(c,d){var v=d.length;if(!v)return c;var w=v-1;return d[w]=(v>1?"& ":"")+d[w],d=d.join(v>2?", ":" "),c.replace(Ba,`{
/* [wrapped with `+d+`] */
`)}function MH(c){return cn(c)||Qc(c)||!!(rO&&c&&c[rO])}function qa(c,d){var v=typeof c;return d=d??ge,!!d&&(v=="number"||v!="symbol"&&z.test(c))&&c>-1&&c%1==0&&c<d}function eo(c,d,v){if(!Fi(v))return!1;var w=typeof d;return(w=="number"?go(v)&&qa(d,v.length):w=="string"&&d in v)?Fs(v[d],c):!1}function hC(c,d){if(cn(c))return!1;var v=typeof c;return v=="number"||v=="symbol"||v=="boolean"||c==null||ko(c)?!0:gr.test(c)||!Ti.test(c)||d!=null&&c in hi(d)}function wH(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function pC(c){var d=Pg(c),v=U[d];if(typeof v!="function"||!(d in kn.prototype))return!1;if(c===v)return!0;var w=uC(v);return!!w&&c===w[0]}function EH(c){return!!eO&&eO in c}var SH=ig?Ya:AC;function Hh(c){var d=c&&c.constructor,v=typeof d=="function"&&d.prototype||dd;return c===v}function eA(c){return c===c&&!Fi(c)}function tA(c,d){return function(v){return v==null?!1:v[c]===d&&(d!==n||c in hi(v))}}function PH(c){var d=Rg(c,function(w){return v.size===a&&v.clear(),w}),v=d.cache;return d}function TH(c,d){var v=c[1],w=d[1],I=v|w,H=I<(b|C|V),Z=w==V&&v==x||w==V&&v==B&&c[7].length<=d[8]||w==(V|B)&&d[7].length<=d[8]&&v==x;if(!(H||Z))return c;w&b&&(c[2]=d[2],I|=v&b?0:y);var re=d[3];if(re){var pe=c[3];c[3]=pe?LO(pe,re,d[4]):re,c[4]=pe?zl(c[3],l):d[4]}return re=d[5],re&&(pe=c[5],c[5]=pe?UO(pe,re,d[6]):re,c[6]=pe?zl(c[5],l):d[6]),re=d[7],re&&(c[7]=re),w&V&&(c[8]=c[8]==null?d[8]:Ir(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=I,c}function DH(c){var d=[];if(c!=null)for(var v in hi(c))d.push(v);return d}function OH(c){return og.call(c)}function nA(c,d,v){return d=lr(d===n?c.length-1:d,0),function(){for(var w=arguments,I=-1,H=lr(w.length-d,0),Z=we(H);++I<H;)Z[I]=w[d+I];I=-1;for(var re=we(d+1);++I<d;)re[I]=w[I];return re[d]=v(Z),Io(c,this,re)}}function iA(c,d){return d.length<2?c:Zc(c,is(d,0,-1))}function AH(c,d){for(var v=c.length,w=Ir(d.length,v),I=mo(c);w--;){var H=d[w];c[w]=qa(H,v)?I[H]:n}return c}function mC(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var rA=sA(PO),Wh=$4||function(c,d){return _r.setTimeout(c,d)},gC=sA(eH);function oA(c,d,v){var w=d+"";return gC(c,CH(w,IH(yH(w),v)))}function sA(c){var d=0,v=0;return function(){var w=Z4(),I=N-(w-v);if(v=w,I>0){if(++d>=P)return arguments[0]}else d=0;return c.apply(n,arguments)}}function Dg(c,d){var v=-1,w=c.length,I=w-1;for(d=d===n?w:d;++v<d;){var H=Jb(v,I),Z=c[H];c[H]=c[v],c[v]=Z}return c.length=d,c}var aA=PH(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(Yn,function(v,w,I,H){d.push(I?H.replace(Km,"$1"):w||v)}),d});function ua(c){if(typeof c=="string"||ko(c))return c;var d=c+"";return d=="0"&&1/c==-ee?"-0":d}function Jc(c){if(c!=null){try{return rg.call(c)}catch{}try{return c+""}catch{}}return""}function IH(c,d){return Qo(Le,function(v){var w="_."+v[0];d&v[1]&&!Qm(c,w)&&c.push(w)}),c.sort()}function lA(c){if(c instanceof kn)return c.clone();var d=new ts(c.__wrapped__,c.__chain__);return d.__actions__=mo(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function RH(c,d,v){(v?eo(c,d,v):d===n)?d=1:d=lr(gn(d),0);var w=c==null?0:c.length;if(!w||d<1)return[];for(var I=0,H=0,Z=we(dg(w/d));I<w;)Z[H++]=is(c,I,I+=d);return Z}function NH(c){for(var d=-1,v=c==null?0:c.length,w=0,I=[];++d<v;){var H=c[d];H&&(I[w++]=H)}return I}function kH(){var c=arguments.length;if(!c)return[];for(var d=we(c-1),v=arguments[0],w=c;w--;)d[w-1]=arguments[w];return Bl(cn(v)?mo(v):[v],Sr(d,1))}var FH=En(function(c,d){return ji(c)?Lh(c,Sr(d,1,ji,!0)):[]}),LH=En(function(c,d){var v=rs(d);return ji(v)&&(v=n),ji(c)?Lh(c,Sr(d,1,ji,!0),zt(v,2)):[]}),UH=En(function(c,d){var v=rs(d);return ji(v)&&(v=n),ji(c)?Lh(c,Sr(d,1,ji,!0),n,v):[]});function VH(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:gn(d),is(c,d<0?0:d,w)):[]}function BH(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:gn(d),d=w-d,is(c,0,d<0?0:d)):[]}function zH(c,d){return c&&c.length?bg(c,zt(d,3),!0,!0):[]}function HH(c,d){return c&&c.length?bg(c,zt(d,3),!0):[]}function WH(c,d,v,w){var I=c==null?0:c.length;return I?(v&&typeof v!="number"&&eo(c,d,v)&&(v=0,w=I),k5(c,d,v,w)):[]}function cA(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=v==null?0:gn(v);return I<0&&(I=lr(w+I,0)),eg(c,zt(d,3),I)}function uA(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=w-1;return v!==n&&(I=gn(v),I=v<0?lr(w+I,0):Ir(I,w-1)),eg(c,zt(d,3),I,!0)}function dA(c){var d=c==null?0:c.length;return d?Sr(c,1):[]}function jH(c){var d=c==null?0:c.length;return d?Sr(c,ee):[]}function GH(c,d){var v=c==null?0:c.length;return v?(d=d===n?1:gn(d),Sr(c,d)):[]}function $H(c){for(var d=-1,v=c==null?0:c.length,w={};++d<v;){var I=c[d];w[I[0]]=I[1]}return w}function fA(c){return c&&c.length?c[0]:n}function qH(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=v==null?0:gn(v);return I<0&&(I=lr(w+I,0)),ld(c,d,I)}function YH(c){var d=c==null?0:c.length;return d?is(c,0,-1):[]}var XH=En(function(c){var d=Di(c,iC);return d.length&&d[0]===c[0]?qb(d):[]}),ZH=En(function(c){var d=rs(c),v=Di(c,iC);return d===rs(v)?d=n:v.pop(),v.length&&v[0]===c[0]?qb(v,zt(d,2)):[]}),KH=En(function(c){var d=rs(c),v=Di(c,iC);return d=typeof d=="function"?d:n,d&&v.pop(),v.length&&v[0]===c[0]?qb(v,n,d):[]});function JH(c,d){return c==null?"":Y4.call(c,d)}function rs(c){var d=c==null?0:c.length;return d?c[d-1]:n}function QH(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=w;return v!==n&&(I=gn(v),I=I<0?lr(w+I,0):Ir(I,w-1)),d===d?I4(c,d,I):eg(c,$D,I,!0)}function e8(c,d){return c&&c.length?MO(c,gn(d)):n}var t8=En(hA);function hA(c,d){return c&&c.length&&d&&d.length?Kb(c,d):c}function n8(c,d,v){return c&&c.length&&d&&d.length?Kb(c,d,zt(v,2)):c}function i8(c,d,v){return c&&c.length&&d&&d.length?Kb(c,d,n,v):c}var r8=$a(function(c,d){var v=c==null?0:c.length,w=Wb(c,d);return SO(c,Di(d,function(I){return qa(I,v)?+I:I}).sort(FO)),w});function o8(c,d){var v=[];if(!(c&&c.length))return v;var w=-1,I=[],H=c.length;for(d=zt(d,3);++w<H;){var Z=c[w];d(Z,w,c)&&(v.push(Z),I.push(w))}return SO(c,I),v}function _C(c){return c==null?c:J4.call(c)}function s8(c,d,v){var w=c==null?0:c.length;return w?(v&&typeof v!="number"&&eo(c,d,v)?(d=0,v=w):(d=d==null?0:gn(d),v=v===n?w:gn(v)),is(c,d,v)):[]}function a8(c,d){return xg(c,d)}function l8(c,d,v){return eC(c,d,zt(v,2))}function c8(c,d){var v=c==null?0:c.length;if(v){var w=xg(c,d);if(w<v&&Fs(c[w],d))return w}return-1}function u8(c,d){return xg(c,d,!0)}function d8(c,d,v){return eC(c,d,zt(v,2),!0)}function f8(c,d){var v=c==null?0:c.length;if(v){var w=xg(c,d,!0)-1;if(Fs(c[w],d))return w}return-1}function h8(c){return c&&c.length?TO(c):[]}function p8(c,d){return c&&c.length?TO(c,zt(d,2)):[]}function m8(c){var d=c==null?0:c.length;return d?is(c,1,d):[]}function g8(c,d,v){return c&&c.length?(d=v||d===n?1:gn(d),is(c,0,d<0?0:d)):[]}function _8(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:gn(d),d=w-d,is(c,d<0?0:d,w)):[]}function v8(c,d){return c&&c.length?bg(c,zt(d,3),!1,!0):[]}function y8(c,d){return c&&c.length?bg(c,zt(d,3)):[]}var x8=En(function(c){return Gl(Sr(c,1,ji,!0))}),b8=En(function(c){var d=rs(c);return ji(d)&&(d=n),Gl(Sr(c,1,ji,!0),zt(d,2))}),C8=En(function(c){var d=rs(c);return d=typeof d=="function"?d:n,Gl(Sr(c,1,ji,!0),n,d)});function M8(c){return c&&c.length?Gl(c):[]}function w8(c,d){return c&&c.length?Gl(c,zt(d,2)):[]}function E8(c,d){return d=typeof d=="function"?d:n,c&&c.length?Gl(c,n,d):[]}function vC(c){if(!(c&&c.length))return[];var d=0;return c=Vl(c,function(v){if(ji(v))return d=lr(v.length,d),!0}),kb(d,function(v){return Di(c,Ib(v))})}function pA(c,d){if(!(c&&c.length))return[];var v=vC(c);return d==null?v:Di(v,function(w){return Io(d,n,w)})}var S8=En(function(c,d){return ji(c)?Lh(c,d):[]}),P8=En(function(c){return nC(Vl(c,ji))}),T8=En(function(c){var d=rs(c);return ji(d)&&(d=n),nC(Vl(c,ji),zt(d,2))}),D8=En(function(c){var d=rs(c);return d=typeof d=="function"?d:n,nC(Vl(c,ji),n,d)}),O8=En(vC);function A8(c,d){return IO(c||[],d||[],Fh)}function I8(c,d){return IO(c||[],d||[],Bh)}var R8=En(function(c){var d=c.length,v=d>1?c[d-1]:n;return v=typeof v=="function"?(c.pop(),v):n,pA(c,v)});function mA(c){var d=U(c);return d.__chain__=!0,d}function N8(c,d){return d(c),c}function Og(c,d){return d(c)}var k8=$a(function(c){var d=c.length,v=d?c[0]:0,w=this.__wrapped__,I=function(H){return Wb(H,c)};return d>1||this.__actions__.length||!(w instanceof kn)||!qa(v)?this.thru(I):(w=w.slice(v,+v+(d?1:0)),w.__actions__.push({func:Og,args:[I],thisArg:n}),new ts(w,this.__chain__).thru(function(H){return d&&!H.length&&H.push(n),H}))});function F8(){return mA(this)}function L8(){return new ts(this.value(),this.__chain__)}function U8(){this.__values__===n&&(this.__values__=DA(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function V8(){return this}function B8(c){for(var d,v=this;v instanceof mg;){var w=lA(v);w.__index__=0,w.__values__=n,d?I.__wrapped__=w:d=w;var I=w;v=v.__wrapped__}return I.__wrapped__=c,d}function z8(){var c=this.__wrapped__;if(c instanceof kn){var d=c;return this.__actions__.length&&(d=new kn(this)),d=d.reverse(),d.__actions__.push({func:Og,args:[_C],thisArg:n}),new ts(d,this.__chain__)}return this.thru(_C)}function H8(){return AO(this.__wrapped__,this.__actions__)}var W8=Cg(function(c,d,v){ti.call(c,v)?++c[v]:ja(c,v,1)});function j8(c,d,v){var w=cn(c)?jD:N5;return v&&eo(c,d,v)&&(d=n),w(c,zt(d,3))}function G8(c,d){var v=cn(c)?Vl:pO;return v(c,zt(d,3))}var $8=HO(cA),q8=HO(uA);function Y8(c,d){return Sr(Ag(c,d),1)}function X8(c,d){return Sr(Ag(c,d),ee)}function Z8(c,d,v){return v=v===n?1:gn(v),Sr(Ag(c,d),v)}function gA(c,d){var v=cn(c)?Qo:jl;return v(c,zt(d,3))}function _A(c,d){var v=cn(c)?m4:hO;return v(c,zt(d,3))}var K8=Cg(function(c,d,v){ti.call(c,v)?c[v].push(d):ja(c,v,[d])});function J8(c,d,v,w){c=go(c)?c:yd(c),v=v&&!w?gn(v):0;var I=c.length;return v<0&&(v=lr(I+v,0)),Fg(c)?v<=I&&c.indexOf(d,v)>-1:!!I&&ld(c,d,v)>-1}var Q8=En(function(c,d,v){var w=-1,I=typeof d=="function",H=go(c)?we(c.length):[];return jl(c,function(Z){H[++w]=I?Io(d,Z,v):Uh(Z,d,v)}),H}),e6=Cg(function(c,d,v){ja(c,v,d)});function Ag(c,d){var v=cn(c)?Di:xO;return v(c,zt(d,3))}function t6(c,d,v,w){return c==null?[]:(cn(d)||(d=d==null?[]:[d]),v=w?n:v,cn(v)||(v=v==null?[]:[v]),wO(c,d,v))}var n6=Cg(function(c,d,v){c[v?0:1].push(d)},function(){return[[],[]]});function i6(c,d,v){var w=cn(c)?Ob:YD,I=arguments.length<3;return w(c,zt(d,4),v,I,jl)}function r6(c,d,v){var w=cn(c)?g4:YD,I=arguments.length<3;return w(c,zt(d,4),v,I,hO)}function o6(c,d){var v=cn(c)?Vl:pO;return v(c,Ng(zt(d,3)))}function s6(c){var d=cn(c)?cO:J5;return d(c)}function a6(c,d,v){(v?eo(c,d,v):d===n)?d=1:d=gn(d);var w=cn(c)?D5:Q5;return w(c,d)}function l6(c){var d=cn(c)?O5:tH;return d(c)}function c6(c){if(c==null)return 0;if(go(c))return Fg(c)?ud(c):c.length;var d=Rr(c);return d==O||d==Ee?c.size:Xb(c).length}function u6(c,d,v){var w=cn(c)?Ab:nH;return v&&eo(c,d,v)&&(d=n),w(c,zt(d,3))}var d6=En(function(c,d){if(c==null)return[];var v=d.length;return v>1&&eo(c,d[0],d[1])?d=[]:v>2&&eo(d[0],d[1],d[2])&&(d=[d[0]]),wO(c,Sr(d,1),[])}),Ig=G4||function(){return _r.Date.now()};function f6(c,d){if(typeof d!="function")throw new es(r);return c=gn(c),function(){if(--c<1)return d.apply(this,arguments)}}function vA(c,d,v){return d=v?n:d,d=c&&d==null?c.length:d,Ga(c,V,n,n,n,n,d)}function yA(c,d){var v;if(typeof d!="function")throw new es(r);return c=gn(c),function(){return--c>0&&(v=d.apply(this,arguments)),c<=1&&(d=n),v}}var yC=En(function(c,d,v){var w=b;if(v.length){var I=zl(v,_d(yC));w|=E}return Ga(c,w,d,v,I)}),xA=En(function(c,d,v){var w=b|C;if(v.length){var I=zl(v,_d(xA));w|=E}return Ga(d,w,c,v,I)});function bA(c,d,v){d=v?n:d;var w=Ga(c,x,n,n,n,n,n,d);return w.placeholder=bA.placeholder,w}function CA(c,d,v){d=v?n:d;var w=Ga(c,T,n,n,n,n,n,d);return w.placeholder=CA.placeholder,w}function MA(c,d,v){var w,I,H,Z,re,pe,Re=0,ke=!1,je=!1,rt=!0;if(typeof c!="function")throw new es(r);d=os(d)||0,Fi(v)&&(ke=!!v.leading,je="maxWait"in v,H=je?lr(os(v.maxWait)||0,d):H,rt="trailing"in v?!!v.trailing:rt);function Pt(Gi){var Ls=w,Za=I;return w=I=n,Re=Gi,Z=c.apply(Za,Ls),Z}function Ht(Gi){return Re=Gi,re=Wh(An,d),ke?Pt(Gi):Z}function bn(Gi){var Ls=Gi-pe,Za=Gi-Re,HA=d-Ls;return je?Ir(HA,H-Za):HA}function Wt(Gi){var Ls=Gi-pe,Za=Gi-Re;return pe===n||Ls>=d||Ls<0||je&&Za>=H}function An(){var Gi=Ig();if(Wt(Gi))return Ln(Gi);re=Wh(An,bn(Gi))}function Ln(Gi){return re=n,rt&&w?Pt(Gi):(w=I=n,Z)}function Fo(){re!==n&&RO(re),Re=0,w=pe=I=re=n}function to(){return re===n?Z:Ln(Ig())}function Lo(){var Gi=Ig(),Ls=Wt(Gi);if(w=arguments,I=this,pe=Gi,Ls){if(re===n)return Ht(pe);if(je)return RO(re),re=Wh(An,d),Pt(pe)}return re===n&&(re=Wh(An,d)),Z}return Lo.cancel=Fo,Lo.flush=to,Lo}var h6=En(function(c,d){return fO(c,1,d)}),p6=En(function(c,d,v){return fO(c,os(d)||0,v)});function m6(c){return Ga(c,F)}function Rg(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new es(r);var v=function(){var w=arguments,I=d?d.apply(this,w):w[0],H=v.cache;if(H.has(I))return H.get(I);var Z=c.apply(this,w);return v.cache=H.set(I,Z)||H,Z};return v.cache=new(Rg.Cache||Wa),v}Rg.Cache=Wa;function Ng(c){if(typeof c!="function")throw new es(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function g6(c){return yA(2,c)}var _6=iH(function(c,d){d=d.length==1&&cn(d[0])?Di(d[0],Ro(zt())):Di(Sr(d,1),Ro(zt()));var v=d.length;return En(function(w){for(var I=-1,H=Ir(w.length,v);++I<H;)w[I]=d[I].call(this,w[I]);return Io(c,this,w)})}),xC=En(function(c,d){var v=zl(d,_d(xC));return Ga(c,E,n,d,v)}),wA=En(function(c,d){var v=zl(d,_d(wA));return Ga(c,D,n,d,v)}),v6=$a(function(c,d){return Ga(c,B,n,n,n,d)});function y6(c,d){if(typeof c!="function")throw new es(r);return d=d===n?d:gn(d),En(c,d)}function x6(c,d){if(typeof c!="function")throw new es(r);return d=d==null?0:lr(gn(d),0),En(function(v){var w=v[d],I=ql(v,0,d);return w&&Bl(I,w),Io(c,this,I)})}function b6(c,d,v){var w=!0,I=!0;if(typeof c!="function")throw new es(r);return Fi(v)&&(w="leading"in v?!!v.leading:w,I="trailing"in v?!!v.trailing:I),MA(c,d,{leading:w,maxWait:d,trailing:I})}function C6(c){return vA(c,1)}function M6(c,d){return xC(rC(d),c)}function w6(){if(!arguments.length)return[];var c=arguments[0];return cn(c)?c:[c]}function E6(c){return ns(c,h)}function S6(c,d){return d=typeof d=="function"?d:n,ns(c,h,d)}function P6(c){return ns(c,u|h)}function T6(c,d){return d=typeof d=="function"?d:n,ns(c,u|h,d)}function D6(c,d){return d==null||dO(c,d,vr(d))}function Fs(c,d){return c===d||c!==c&&d!==d}var O6=Sg($b),A6=Sg(function(c,d){return c>=d}),Qc=_O(function(){return arguments}())?_O:function(c){return Ui(c)&&ti.call(c,"callee")&&!iO.call(c,"callee")},cn=we.isArray,I6=UD?Ro(UD):B5;function go(c){return c!=null&&kg(c.length)&&!Ya(c)}function ji(c){return Ui(c)&&go(c)}function R6(c){return c===!0||c===!1||Ui(c)&&Qr(c)==Ge}var Yl=q4||AC,N6=VD?Ro(VD):z5;function k6(c){return Ui(c)&&c.nodeType===1&&!jh(c)}function F6(c){if(c==null)return!0;if(go(c)&&(cn(c)||typeof c=="string"||typeof c.splice=="function"||Yl(c)||vd(c)||Qc(c)))return!c.length;var d=Rr(c);if(d==O||d==Ee)return!c.size;if(Hh(c))return!Xb(c).length;for(var v in c)if(ti.call(c,v))return!1;return!0}function L6(c,d){return Vh(c,d)}function U6(c,d,v){v=typeof v=="function"?v:n;var w=v?v(c,d):n;return w===n?Vh(c,d,n,v):!!w}function bC(c){if(!Ui(c))return!1;var d=Qr(c);return d==pt||d==mt||typeof c.message=="string"&&typeof c.name=="string"&&!jh(c)}function V6(c){return typeof c=="number"&&oO(c)}function Ya(c){if(!Fi(c))return!1;var d=Qr(c);return d==Lt||d==Tn||d==He||d==te}function EA(c){return typeof c=="number"&&c==gn(c)}function kg(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ge}function Fi(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function Ui(c){return c!=null&&typeof c=="object"}var SA=BD?Ro(BD):W5;function B6(c,d){return c===d||Yb(c,d,dC(d))}function z6(c,d,v){return v=typeof v=="function"?v:n,Yb(c,d,dC(d),v)}function H6(c){return PA(c)&&c!=+c}function W6(c){if(SH(c))throw new on(i);return vO(c)}function j6(c){return c===null}function G6(c){return c==null}function PA(c){return typeof c=="number"||Ui(c)&&Qr(c)==Me}function jh(c){if(!Ui(c)||Qr(c)!=Y)return!1;var d=lg(c);if(d===null)return!0;var v=ti.call(d,"constructor")&&d.constructor;return typeof v=="function"&&v instanceof v&&rg.call(v)==z4}var CC=zD?Ro(zD):j5;function $6(c){return EA(c)&&c>=-ge&&c<=ge}var TA=HD?Ro(HD):G5;function Fg(c){return typeof c=="string"||!cn(c)&&Ui(c)&&Qr(c)==ie}function ko(c){return typeof c=="symbol"||Ui(c)&&Qr(c)==L}var vd=WD?Ro(WD):$5;function q6(c){return c===n}function Y6(c){return Ui(c)&&Rr(c)==K}function X6(c){return Ui(c)&&Qr(c)==_e}var Z6=Sg(Zb),K6=Sg(function(c,d){return c<=d});function DA(c){if(!c)return[];if(go(c))return Fg(c)?Ns(c):mo(c);if(Ah&&c[Ah])return D4(c[Ah]());var d=Rr(c),v=d==O?Lb:d==Ee?tg:yd;return v(c)}function Xa(c){if(!c)return c===0?c:0;if(c=os(c),c===ee||c===-ee){var d=c<0?-1:1;return d*se}return c===c?c:0}function gn(c){var d=Xa(c),v=d%1;return d===d?v?d-v:d:0}function OA(c){return c?Xc(gn(c),0,J):0}function os(c){if(typeof c=="number")return c;if(ko(c))return de;if(Fi(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=Fi(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=XD(c);var v=Mb.test(c);return v||Eb.test(c)?f4(c.slice(2),v?2:8):Jm.test(c)?de:+c}function AA(c){return ca(c,_o(c))}function J6(c){return c?Xc(gn(c),-ge,ge):c===0?c:0}function Qn(c){return c==null?"":No(c)}var Q6=md(function(c,d){if(Hh(d)||go(d)){ca(d,vr(d),c);return}for(var v in d)ti.call(d,v)&&Fh(c,v,d[v])}),IA=md(function(c,d){ca(d,_o(d),c)}),Lg=md(function(c,d,v,w){ca(d,_o(d),c,w)}),eW=md(function(c,d,v,w){ca(d,vr(d),c,w)}),tW=$a(Wb);function nW(c,d){var v=pd(c);return d==null?v:uO(v,d)}var iW=En(function(c,d){c=hi(c);var v=-1,w=d.length,I=w>2?d[2]:n;for(I&&eo(d[0],d[1],I)&&(w=1);++v<w;)for(var H=d[v],Z=_o(H),re=-1,pe=Z.length;++re<pe;){var Re=Z[re],ke=c[Re];(ke===n||Fs(ke,dd[Re])&&!ti.call(c,Re))&&(c[Re]=H[Re])}return c}),rW=En(function(c){return c.push(n,XO),Io(RA,n,c)});function oW(c,d){return GD(c,zt(d,3),la)}function sW(c,d){return GD(c,zt(d,3),Gb)}function aW(c,d){return c==null?c:jb(c,zt(d,3),_o)}function lW(c,d){return c==null?c:mO(c,zt(d,3),_o)}function cW(c,d){return c&&la(c,zt(d,3))}function uW(c,d){return c&&Gb(c,zt(d,3))}function dW(c){return c==null?[]:vg(c,vr(c))}function fW(c){return c==null?[]:vg(c,_o(c))}function MC(c,d,v){var w=c==null?n:Zc(c,d);return w===n?v:w}function hW(c,d){return c!=null&&JO(c,d,F5)}function wC(c,d){return c!=null&&JO(c,d,L5)}var pW=jO(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=og.call(d)),c[d]=v},SC(vo)),mW=jO(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=og.call(d)),ti.call(c,d)?c[d].push(v):c[d]=[v]},zt),gW=En(Uh);function vr(c){return go(c)?lO(c):Xb(c)}function _o(c){return go(c)?lO(c,!0):q5(c)}function _W(c,d){var v={};return d=zt(d,3),la(c,function(w,I,H){ja(v,d(w,I,H),w)}),v}function vW(c,d){var v={};return d=zt(d,3),la(c,function(w,I,H){ja(v,I,d(w,I,H))}),v}var yW=md(function(c,d,v){yg(c,d,v)}),RA=md(function(c,d,v,w){yg(c,d,v,w)}),xW=$a(function(c,d){var v={};if(c==null)return v;var w=!1;d=Di(d,function(H){return H=$l(H,c),w||(w=H.length>1),H}),ca(c,cC(c),v),w&&(v=ns(v,u|f|h,pH));for(var I=d.length;I--;)tC(v,d[I]);return v});function bW(c,d){return NA(c,Ng(zt(d)))}var CW=$a(function(c,d){return c==null?{}:X5(c,d)});function NA(c,d){if(c==null)return{};var v=Di(cC(c),function(w){return[w]});return d=zt(d),EO(c,v,function(w,I){return d(w,I[0])})}function MW(c,d,v){d=$l(d,c);var w=-1,I=d.length;for(I||(I=1,c=n);++w<I;){var H=c==null?n:c[ua(d[w])];H===n&&(w=I,H=v),c=Ya(H)?H.call(c):H}return c}function wW(c,d,v){return c==null?c:Bh(c,d,v)}function EW(c,d,v,w){return w=typeof w=="function"?w:n,c==null?c:Bh(c,d,v,w)}var kA=qO(vr),FA=qO(_o);function SW(c,d,v){var w=cn(c),I=w||Yl(c)||vd(c);if(d=zt(d,4),v==null){var H=c&&c.constructor;I?v=w?new H:[]:Fi(c)?v=Ya(H)?pd(lg(c)):{}:v={}}return(I?Qo:la)(c,function(Z,re,pe){return d(v,Z,re,pe)}),v}function PW(c,d){return c==null?!0:tC(c,d)}function TW(c,d,v){return c==null?c:OO(c,d,rC(v))}function DW(c,d,v,w){return w=typeof w=="function"?w:n,c==null?c:OO(c,d,rC(v),w)}function yd(c){return c==null?[]:Fb(c,vr(c))}function OW(c){return c==null?[]:Fb(c,_o(c))}function AW(c,d,v){return v===n&&(v=d,d=n),v!==n&&(v=os(v),v=v===v?v:0),d!==n&&(d=os(d),d=d===d?d:0),Xc(os(c),d,v)}function IW(c,d,v){return d=Xa(d),v===n?(v=d,d=0):v=Xa(v),c=os(c),U5(c,d,v)}function RW(c,d,v){if(v&&typeof v!="boolean"&&eo(c,d,v)&&(d=v=n),v===n&&(typeof d=="boolean"?(v=d,d=n):typeof c=="boolean"&&(v=c,c=n)),c===n&&d===n?(c=0,d=1):(c=Xa(c),d===n?(d=c,c=0):d=Xa(d)),c>d){var w=c;c=d,d=w}if(v||c%1||d%1){var I=sO();return Ir(c+I*(d-c+d4("1e-"+((I+"").length-1))),d)}return Jb(c,d)}var NW=gd(function(c,d,v){return d=d.toLowerCase(),c+(v?LA(d):d)});function LA(c){return EC(Qn(c).toLowerCase())}function UA(c){return c=Qn(c),c&&c.replace(he,w4).replace(t4,"")}function kW(c,d,v){c=Qn(c),d=No(d);var w=c.length;v=v===n?w:Xc(gn(v),0,w);var I=v;return v-=d.length,v>=0&&c.slice(v,I)==d}function FW(c){return c=Qn(c),c&&Be.test(c)?c.replace(tt,E4):c}function LW(c){return c=Qn(c),c&&As.test(c)?c.replace(Jr,"\\$&"):c}var UW=gd(function(c,d,v){return c+(v?"-":"")+d.toLowerCase()}),VW=gd(function(c,d,v){return c+(v?" ":"")+d.toLowerCase()}),BW=zO("toLowerCase");function zW(c,d,v){c=Qn(c),d=gn(d);var w=d?ud(c):0;if(!d||w>=d)return c;var I=(d-w)/2;return Eg(fg(I),v)+c+Eg(dg(I),v)}function HW(c,d,v){c=Qn(c),d=gn(d);var w=d?ud(c):0;return d&&w<d?c+Eg(d-w,v):c}function WW(c,d,v){c=Qn(c),d=gn(d);var w=d?ud(c):0;return d&&w<d?Eg(d-w,v)+c:c}function jW(c,d,v){return v||d==null?d=0:d&&(d=+d),K4(Qn(c).replace(id,""),d||0)}function GW(c,d,v){return(v?eo(c,d,v):d===n)?d=1:d=gn(d),Qb(Qn(c),d)}function $W(){var c=arguments,d=Qn(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var qW=gd(function(c,d,v){return c+(v?"_":"")+d.toLowerCase()});function YW(c,d,v){return v&&typeof v!="number"&&eo(c,d,v)&&(d=v=n),v=v===n?J:v>>>0,v?(c=Qn(c),c&&(typeof d=="string"||d!=null&&!CC(d))&&(d=No(d),!d&&cd(c))?ql(Ns(c),0,v):c.split(d,v)):[]}var XW=gd(function(c,d,v){return c+(v?" ":"")+EC(d)});function ZW(c,d,v){return c=Qn(c),v=v==null?0:Xc(gn(v),0,c.length),d=No(d),c.slice(v,v+d.length)==d}function KW(c,d,v){var w=U.templateSettings;v&&eo(c,d,v)&&(d=n),c=Qn(c),d=Lg({},d,w,YO);var I=Lg({},d.imports,w.imports,YO),H=vr(I),Z=Fb(I,H),re,pe,Re=0,ke=d.interpolate||xe,je="__p += '",rt=Ub((d.escape||xe).source+"|"+ke.source+"|"+(ke===nn?od:xe).source+"|"+(d.evaluate||xe).source+"|$","g"),Pt="//# sourceURL="+(ti.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++s4+"]")+`
`;c.replace(rt,function(Wt,An,Ln,Fo,to,Lo){return Ln||(Ln=Fo),je+=c.slice(Re,Lo).replace(be,S4),An&&(re=!0,je+=`' +
__e(`+An+`) +
'`),to&&(pe=!0,je+=`';
`+to+`;
__p += '`),Ln&&(je+=`' +
((__t = (`+Ln+`)) == null ? '' : __t) +
'`),Re=Lo+Wt.length,Wt}),je+=`';
`;var Ht=ti.call(d,"variable")&&d.variable;if(!Ht)je=`with (obj) {
`+je+`
}
`;else if(rd.test(Ht))throw new on(o);je=(pe?je.replace(Dn,""):je).replace(tn,"$1").replace(Jn,"$1;"),je="function("+(Ht||"obj")+`) {
`+(Ht?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+je+`return __p
}`;var bn=BA(function(){return Xn(H,Pt+"return "+je).apply(n,Z)});if(bn.source=je,bC(bn))throw bn;return bn}function JW(c){return Qn(c).toLowerCase()}function QW(c){return Qn(c).toUpperCase()}function ej(c,d,v){if(c=Qn(c),c&&(v||d===n))return XD(c);if(!c||!(d=No(d)))return c;var w=Ns(c),I=Ns(d),H=ZD(w,I),Z=KD(w,I)+1;return ql(w,H,Z).join("")}function tj(c,d,v){if(c=Qn(c),c&&(v||d===n))return c.slice(0,QD(c)+1);if(!c||!(d=No(d)))return c;var w=Ns(c),I=KD(w,Ns(d))+1;return ql(w,0,I).join("")}function nj(c,d,v){if(c=Qn(c),c&&(v||d===n))return c.replace(id,"");if(!c||!(d=No(d)))return c;var w=Ns(c),I=ZD(w,Ns(d));return ql(w,I).join("")}function ij(c,d){var v=G,w=k;if(Fi(d)){var I="separator"in d?d.separator:I;v="length"in d?gn(d.length):v,w="omission"in d?No(d.omission):w}c=Qn(c);var H=c.length;if(cd(c)){var Z=Ns(c);H=Z.length}if(v>=H)return c;var re=v-ud(w);if(re<1)return w;var pe=Z?ql(Z,0,re).join(""):c.slice(0,re);if(I===n)return pe+w;if(Z&&(re+=pe.length-re),CC(I)){if(c.slice(re).search(I)){var Re,ke=pe;for(I.global||(I=Ub(I.source,Qn(Dh.exec(I))+"g")),I.lastIndex=0;Re=I.exec(ke);)var je=Re.index;pe=pe.slice(0,je===n?re:je)}}else if(c.indexOf(No(I),re)!=re){var rt=pe.lastIndexOf(I);rt>-1&&(pe=pe.slice(0,rt))}return pe+w}function rj(c){return c=Qn(c),c&&Se.test(c)?c.replace(ae,R4):c}var oj=gd(function(c,d,v){return c+(v?" ":"")+d.toUpperCase()}),EC=zO("toUpperCase");function VA(c,d,v){return c=Qn(c),d=v?n:d,d===n?T4(c)?F4(c):y4(c):c.match(d)||[]}var BA=En(function(c,d){try{return Io(c,n,d)}catch(v){return bC(v)?v:new on(v)}}),sj=$a(function(c,d){return Qo(d,function(v){v=ua(v),ja(c,v,yC(c[v],c))}),c});function aj(c){var d=c==null?0:c.length,v=zt();return c=d?Di(c,function(w){if(typeof w[1]!="function")throw new es(r);return[v(w[0]),w[1]]}):[],En(function(w){for(var I=-1;++I<d;){var H=c[I];if(Io(H[0],this,w))return Io(H[1],this,w)}})}function lj(c){return R5(ns(c,u))}function SC(c){return function(){return c}}function cj(c,d){return c==null||c!==c?d:c}var uj=WO(),dj=WO(!0);function vo(c){return c}function PC(c){return yO(typeof c=="function"?c:ns(c,u))}function fj(c){return bO(ns(c,u))}function hj(c,d){return CO(c,ns(d,u))}var pj=En(function(c,d){return function(v){return Uh(v,c,d)}}),mj=En(function(c,d){return function(v){return Uh(c,v,d)}});function TC(c,d,v){var w=vr(d),I=vg(d,w);v==null&&!(Fi(d)&&(I.length||!w.length))&&(v=d,d=c,c=this,I=vg(d,vr(d)));var H=!(Fi(v)&&"chain"in v)||!!v.chain,Z=Ya(c);return Qo(I,function(re){var pe=d[re];c[re]=pe,Z&&(c.prototype[re]=function(){var Re=this.__chain__;if(H||Re){var ke=c(this.__wrapped__),je=ke.__actions__=mo(this.__actions__);return je.push({func:pe,args:arguments,thisArg:c}),ke.__chain__=Re,ke}return pe.apply(c,Bl([this.value()],arguments))})}),c}function gj(){return _r._===this&&(_r._=H4),this}function DC(){}function _j(c){return c=gn(c),En(function(d){return MO(d,c)})}var vj=sC(Di),yj=sC(jD),xj=sC(Ab);function zA(c){return hC(c)?Ib(ua(c)):Z5(c)}function bj(c){return function(d){return c==null?n:Zc(c,d)}}var Cj=GO(),Mj=GO(!0);function OC(){return[]}function AC(){return!1}function wj(){return{}}function Ej(){return""}function Sj(){return!0}function Pj(c,d){if(c=gn(c),c<1||c>ge)return[];var v=J,w=Ir(c,J);d=zt(d),c-=J;for(var I=kb(w,d);++v<c;)d(v);return I}function Tj(c){return cn(c)?Di(c,ua):ko(c)?[c]:mo(aA(Qn(c)))}function Dj(c){var d=++B4;return Qn(c)+d}var Oj=wg(function(c,d){return c+d},0),Aj=aC("ceil"),Ij=wg(function(c,d){return c/d},1),Rj=aC("floor");function Nj(c){return c&&c.length?_g(c,vo,$b):n}function kj(c,d){return c&&c.length?_g(c,zt(d,2),$b):n}function Fj(c){return qD(c,vo)}function Lj(c,d){return qD(c,zt(d,2))}function Uj(c){return c&&c.length?_g(c,vo,Zb):n}function Vj(c,d){return c&&c.length?_g(c,zt(d,2),Zb):n}var Bj=wg(function(c,d){return c*d},1),zj=aC("round"),Hj=wg(function(c,d){return c-d},0);function Wj(c){return c&&c.length?Nb(c,vo):0}function jj(c,d){return c&&c.length?Nb(c,zt(d,2)):0}return U.after=f6,U.ary=vA,U.assign=Q6,U.assignIn=IA,U.assignInWith=Lg,U.assignWith=eW,U.at=tW,U.before=yA,U.bind=yC,U.bindAll=sj,U.bindKey=xA,U.castArray=w6,U.chain=mA,U.chunk=RH,U.compact=NH,U.concat=kH,U.cond=aj,U.conforms=lj,U.constant=SC,U.countBy=W8,U.create=nW,U.curry=bA,U.curryRight=CA,U.debounce=MA,U.defaults=iW,U.defaultsDeep=rW,U.defer=h6,U.delay=p6,U.difference=FH,U.differenceBy=LH,U.differenceWith=UH,U.drop=VH,U.dropRight=BH,U.dropRightWhile=zH,U.dropWhile=HH,U.fill=WH,U.filter=G8,U.flatMap=Y8,U.flatMapDeep=X8,U.flatMapDepth=Z8,U.flatten=dA,U.flattenDeep=jH,U.flattenDepth=GH,U.flip=m6,U.flow=uj,U.flowRight=dj,U.fromPairs=$H,U.functions=dW,U.functionsIn=fW,U.groupBy=K8,U.initial=YH,U.intersection=XH,U.intersectionBy=ZH,U.intersectionWith=KH,U.invert=pW,U.invertBy=mW,U.invokeMap=Q8,U.iteratee=PC,U.keyBy=e6,U.keys=vr,U.keysIn=_o,U.map=Ag,U.mapKeys=_W,U.mapValues=vW,U.matches=fj,U.matchesProperty=hj,U.memoize=Rg,U.merge=yW,U.mergeWith=RA,U.method=pj,U.methodOf=mj,U.mixin=TC,U.negate=Ng,U.nthArg=_j,U.omit=xW,U.omitBy=bW,U.once=g6,U.orderBy=t6,U.over=vj,U.overArgs=_6,U.overEvery=yj,U.overSome=xj,U.partial=xC,U.partialRight=wA,U.partition=n6,U.pick=CW,U.pickBy=NA,U.property=zA,U.propertyOf=bj,U.pull=t8,U.pullAll=hA,U.pullAllBy=n8,U.pullAllWith=i8,U.pullAt=r8,U.range=Cj,U.rangeRight=Mj,U.rearg=v6,U.reject=o6,U.remove=o8,U.rest=y6,U.reverse=_C,U.sampleSize=a6,U.set=wW,U.setWith=EW,U.shuffle=l6,U.slice=s8,U.sortBy=d6,U.sortedUniq=h8,U.sortedUniqBy=p8,U.split=YW,U.spread=x6,U.tail=m8,U.take=g8,U.takeRight=_8,U.takeRightWhile=v8,U.takeWhile=y8,U.tap=N8,U.throttle=b6,U.thru=Og,U.toArray=DA,U.toPairs=kA,U.toPairsIn=FA,U.toPath=Tj,U.toPlainObject=AA,U.transform=SW,U.unary=C6,U.union=x8,U.unionBy=b8,U.unionWith=C8,U.uniq=M8,U.uniqBy=w8,U.uniqWith=E8,U.unset=PW,U.unzip=vC,U.unzipWith=pA,U.update=TW,U.updateWith=DW,U.values=yd,U.valuesIn=OW,U.without=S8,U.words=VA,U.wrap=M6,U.xor=P8,U.xorBy=T8,U.xorWith=D8,U.zip=O8,U.zipObject=A8,U.zipObjectDeep=I8,U.zipWith=R8,U.entries=kA,U.entriesIn=FA,U.extend=IA,U.extendWith=Lg,TC(U,U),U.add=Oj,U.attempt=BA,U.camelCase=NW,U.capitalize=LA,U.ceil=Aj,U.clamp=AW,U.clone=E6,U.cloneDeep=P6,U.cloneDeepWith=T6,U.cloneWith=S6,U.conformsTo=D6,U.deburr=UA,U.defaultTo=cj,U.divide=Ij,U.endsWith=kW,U.eq=Fs,U.escape=FW,U.escapeRegExp=LW,U.every=j8,U.find=$8,U.findIndex=cA,U.findKey=oW,U.findLast=q8,U.findLastIndex=uA,U.findLastKey=sW,U.floor=Rj,U.forEach=gA,U.forEachRight=_A,U.forIn=aW,U.forInRight=lW,U.forOwn=cW,U.forOwnRight=uW,U.get=MC,U.gt=O6,U.gte=A6,U.has=hW,U.hasIn=wC,U.head=fA,U.identity=vo,U.includes=J8,U.indexOf=qH,U.inRange=IW,U.invoke=gW,U.isArguments=Qc,U.isArray=cn,U.isArrayBuffer=I6,U.isArrayLike=go,U.isArrayLikeObject=ji,U.isBoolean=R6,U.isBuffer=Yl,U.isDate=N6,U.isElement=k6,U.isEmpty=F6,U.isEqual=L6,U.isEqualWith=U6,U.isError=bC,U.isFinite=V6,U.isFunction=Ya,U.isInteger=EA,U.isLength=kg,U.isMap=SA,U.isMatch=B6,U.isMatchWith=z6,U.isNaN=H6,U.isNative=W6,U.isNil=G6,U.isNull=j6,U.isNumber=PA,U.isObject=Fi,U.isObjectLike=Ui,U.isPlainObject=jh,U.isRegExp=CC,U.isSafeInteger=$6,U.isSet=TA,U.isString=Fg,U.isSymbol=ko,U.isTypedArray=vd,U.isUndefined=q6,U.isWeakMap=Y6,U.isWeakSet=X6,U.join=JH,U.kebabCase=UW,U.last=rs,U.lastIndexOf=QH,U.lowerCase=VW,U.lowerFirst=BW,U.lt=Z6,U.lte=K6,U.max=Nj,U.maxBy=kj,U.mean=Fj,U.meanBy=Lj,U.min=Uj,U.minBy=Vj,U.stubArray=OC,U.stubFalse=AC,U.stubObject=wj,U.stubString=Ej,U.stubTrue=Sj,U.multiply=Bj,U.nth=e8,U.noConflict=gj,U.noop=DC,U.now=Ig,U.pad=zW,U.padEnd=HW,U.padStart=WW,U.parseInt=jW,U.random=RW,U.reduce=i6,U.reduceRight=r6,U.repeat=GW,U.replace=$W,U.result=MW,U.round=zj,U.runInContext=ue,U.sample=s6,U.size=c6,U.snakeCase=qW,U.some=u6,U.sortedIndex=a8,U.sortedIndexBy=l8,U.sortedIndexOf=c8,U.sortedLastIndex=u8,U.sortedLastIndexBy=d8,U.sortedLastIndexOf=f8,U.startCase=XW,U.startsWith=ZW,U.subtract=Hj,U.sum=Wj,U.sumBy=jj,U.template=KW,U.times=Pj,U.toFinite=Xa,U.toInteger=gn,U.toLength=OA,U.toLower=JW,U.toNumber=os,U.toSafeInteger=J6,U.toString=Qn,U.toUpper=QW,U.trim=ej,U.trimEnd=tj,U.trimStart=nj,U.truncate=ij,U.unescape=rj,U.uniqueId=Dj,U.upperCase=oj,U.upperFirst=EC,U.each=gA,U.eachRight=_A,U.first=fA,TC(U,function(){var c={};return la(U,function(d,v){ti.call(U.prototype,v)||(c[v]=d)}),c}(),{chain:!1}),U.VERSION=t,Qo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){U[c].placeholder=U}),Qo(["drop","take"],function(c,d){kn.prototype[c]=function(v){v=v===n?1:lr(gn(v),0);var w=this.__filtered__&&!d?new kn(this):this.clone();return w.__filtered__?w.__takeCount__=Ir(v,w.__takeCount__):w.__views__.push({size:Ir(v,J),type:c+(w.__dir__<0?"Right":"")}),w},kn.prototype[c+"Right"]=function(v){return this.reverse()[c](v).reverse()}}),Qo(["filter","map","takeWhile"],function(c,d){var v=d+1,w=v==S||v==oe;kn.prototype[c]=function(I){var H=this.clone();return H.__iteratees__.push({iteratee:zt(I,3),type:v}),H.__filtered__=H.__filtered__||w,H}}),Qo(["head","last"],function(c,d){var v="take"+(d?"Right":"");kn.prototype[c]=function(){return this[v](1).value()[0]}}),Qo(["initial","tail"],function(c,d){var v="drop"+(d?"":"Right");kn.prototype[c]=function(){return this.__filtered__?new kn(this):this[v](1)}}),kn.prototype.compact=function(){return this.filter(vo)},kn.prototype.find=function(c){return this.filter(c).head()},kn.prototype.findLast=function(c){return this.reverse().find(c)},kn.prototype.invokeMap=En(function(c,d){return typeof c=="function"?new kn(this):this.map(function(v){return Uh(v,c,d)})}),kn.prototype.reject=function(c){return this.filter(Ng(zt(c)))},kn.prototype.slice=function(c,d){c=gn(c);var v=this;return v.__filtered__&&(c>0||d<0)?new kn(v):(c<0?v=v.takeRight(-c):c&&(v=v.drop(c)),d!==n&&(d=gn(d),v=d<0?v.dropRight(-d):v.take(d-c)),v)},kn.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},kn.prototype.toArray=function(){return this.take(J)},la(kn.prototype,function(c,d){var v=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),I=U[w?"take"+(d=="last"?"Right":""):d],H=w||/^find/.test(d);I&&(U.prototype[d]=function(){var Z=this.__wrapped__,re=w?[1]:arguments,pe=Z instanceof kn,Re=re[0],ke=pe||cn(Z),je=function(An){var Ln=I.apply(U,Bl([An],re));return w&&rt?Ln[0]:Ln};ke&&v&&typeof Re=="function"&&Re.length!=1&&(pe=ke=!1);var rt=this.__chain__,Pt=!!this.__actions__.length,Ht=H&&!rt,bn=pe&&!Pt;if(!H&&ke){Z=bn?Z:new kn(this);var Wt=c.apply(Z,re);return Wt.__actions__.push({func:Og,args:[je],thisArg:n}),new ts(Wt,rt)}return Ht&&bn?c.apply(this,re):(Wt=this.thru(je),Ht?w?Wt.value()[0]:Wt.value():Wt)})}),Qo(["pop","push","shift","sort","splice","unshift"],function(c){var d=ng[c],v=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",w=/^(?:pop|shift)$/.test(c);U.prototype[c]=function(){var I=arguments;if(w&&!this.__chain__){var H=this.value();return d.apply(cn(H)?H:[],I)}return this[v](function(Z){return d.apply(cn(Z)?Z:[],I)})}}),la(kn.prototype,function(c,d){var v=U[d];if(v){var w=v.name+"";ti.call(hd,w)||(hd[w]=[]),hd[w].push({name:d,func:v})}}),hd[Mg(n,C).name]=[{name:"wrapper",func:n}],kn.prototype.clone=r5,kn.prototype.reverse=o5,kn.prototype.value=s5,U.prototype.at=k8,U.prototype.chain=F8,U.prototype.commit=L8,U.prototype.next=U8,U.prototype.plant=B8,U.prototype.reverse=z8,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=H8,U.prototype.first=U.prototype.head,Ah&&(U.prototype[Ah]=V8),U},Hl=L4();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_r._=Hl,define(function(){return Hl})):Gc?((Gc.exports=Hl)._=Hl,Pb._=Hl):_r._=Hl}).call(uh)});var Bz=NC((Vz,SD)=>{"use strict";(function(n){typeof Vz=="object"&&typeof SD<"u"?SD.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return function n(t,e,i){function r(a,l){if(!e[a]){if(!t[a]){var u=typeof Gh=="function"&&Gh;if(!l&&u)return u(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=e[a]={exports:{}};t[a][0].call(h.exports,function(m){var p=t[a][1][m];return r(p||m)},h,h.exports,n,t,e,i)}return e[a].exports}for(var o=typeof Gh=="function"&&Gh,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var a,l,u,f,h,m,p,b=[],C=0,y=s.length,x=y,T=i.getTypeOf(s)!=="string";C<s.length;)x=y-C,u=T?(a=s[C++],l=C<y?s[C++]:0,C<y?s[C++]:0):(a=s.charCodeAt(C++),l=C<y?s.charCodeAt(C++):0,C<y?s.charCodeAt(C++):0),f=a>>2,h=(3&a)<<4|l>>4,m=1<x?(15&l)<<2|u>>6:64,p=2<x?63&u:64,b.push(o.charAt(f)+o.charAt(h)+o.charAt(m)+o.charAt(p));return b.join("")},e.decode=function(s){var a,l,u,f,h,m,p=0,b=0,C="data:";if(s.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var y,x=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===o.charAt(64)&&x--,s.charAt(s.length-2)===o.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=r.uint8array?new Uint8Array(0|x):new Array(0|x);p<s.length;)a=o.indexOf(s.charAt(p++))<<2|(f=o.indexOf(s.charAt(p++)))>>4,l=(15&f)<<4|(h=o.indexOf(s.charAt(p++)))>>2,u=(3&h)<<6|(m=o.indexOf(s.charAt(p++))),y[b++]=a,h!==64&&(y[b++]=l),m!==64&&(y[b++]=u);return y}},{"./support":30,"./utils":32}],2:[function(n,t,e){"use strict";var i=n("./external"),r=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function a(l,u,f,h,m){this.compressedSize=l,this.uncompressedSize=u,this.crc32=f,this.compression=h,this.compressedContent=m}a.prototype={getContentWorker:function(){var l=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),u=this;return l.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,u,f){return l.pipe(new o).pipe(new s("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",u)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,t,e){"use strict";var i=n("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},e.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,t,e){"use strict";var i=n("./utils"),r=function(){for(var o,s=[],a=0;a<256;a++){o=a;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[a]=o}return s}();t.exports=function(o,s){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(a,l,u,f){var h=r,m=f+u;a^=-1;for(var p=f;p<m;p++)a=a>>>8^h[255&(a^l[p])];return-1^a}(0|s,o,o.length,0):function(a,l,u,f){var h=r,m=f+u;a^=-1;for(var p=f;p<m;p++)a=a>>>8^h[255&(a^l.charCodeAt(p))];return-1^a}(0|s,o,o.length,0):0}},{"./utils":32}],5:[function(n,t,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(n,t,e){"use strict";var i=null;i=typeof Promise<"u"?Promise:n("lie"),t.exports={Promise:i}},{lie:37}],7:[function(n,t,e){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=n("pako"),o=n("./utils"),s=n("./stream/GenericWorker"),a=i?"uint8array":"array";function l(u,f){s.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}e.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(a,u.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},e.compressWorker=function(u){return new l("Deflate",u)},e.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,t,e){"use strict";function i(h,m){var p,b="";for(p=0;p<m;p++)b+=String.fromCharCode(255&h),h>>>=8;return b}function r(h,m,p,b,C,y){var x,T,E=h.file,D=h.compression,V=y!==a.utf8encode,B=o.transformTo("string",y(E.name)),F=o.transformTo("string",a.utf8encode(E.name)),G=E.comment,k=o.transformTo("string",y(G)),P=o.transformTo("string",a.utf8encode(G)),N=F.length!==E.name.length,S=P.length!==G.length,q="",oe="",ee="",ge=E.dir,se=E.date,de={crc32:0,compressedSize:0,uncompressedSize:0};m&&!p||(de.crc32=h.crc32,de.compressedSize=h.compressedSize,de.uncompressedSize=h.uncompressedSize);var J=0;m&&(J|=8),V||!N&&!S||(J|=2048);var Q=0,Ie=0;ge&&(Q|=16),C==="UNIX"?(Ie=798,Q|=function(Ne,Ce){var He=Ne;return Ne||(He=Ce?16893:33204),(65535&He)<<16}(E.unixPermissions,ge)):(Ie=20,Q|=function(Ne){return 63&(Ne||0)}(E.dosPermissions)),x=se.getUTCHours(),x<<=6,x|=se.getUTCMinutes(),x<<=5,x|=se.getUTCSeconds()/2,T=se.getUTCFullYear()-1980,T<<=4,T|=se.getUTCMonth()+1,T<<=5,T|=se.getUTCDate(),N&&(oe=i(1,1)+i(l(B),4)+F,q+="up"+i(oe.length,2)+oe),S&&(ee=i(1,1)+i(l(k),4)+P,q+="uc"+i(ee.length,2)+ee);var Le="";return Le+=`
\0`,Le+=i(J,2),Le+=D.magic,Le+=i(x,2),Le+=i(T,2),Le+=i(de.crc32,4),Le+=i(de.compressedSize,4),Le+=i(de.uncompressedSize,4),Le+=i(B.length,2),Le+=i(q.length,2),{fileRecord:u.LOCAL_FILE_HEADER+Le+B+q,dirRecord:u.CENTRAL_FILE_HEADER+i(Ie,2)+Le+i(k.length,2)+"\0\0\0\0"+i(Q,4)+i(b,4)+B+q+k}}var o=n("../utils"),s=n("../stream/GenericWorker"),a=n("../utf8"),l=n("../crc32"),u=n("../signature");function f(h,m,p,b){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=p,this.encodeFileName=b,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,s),f.prototype.push=function(h){var m=h.meta.percent||0,p=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,s.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:p?(m+100*(p-b-1))/p:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var m=this.streamFiles&&!h.file.dir;if(m){var p=r(h,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var m=this.streamFiles&&!h.file.dir,p=r(h,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),m)this.push({data:function(b){return u.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var p=this.bytesWritten-h,b=function(C,y,x,T,E){var D=o.transformTo("string",E(T));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(C,2)+i(C,2)+i(y,4)+i(x,4)+i(D.length,2)+D}(this.dirRecords.length,p,h,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var m=this;return h.on("data",function(p){m.processChunk(p)}),h.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),h.on("error",function(p){m.error(p)}),this},f.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var m=this._sources;if(!s.prototype.error.call(this,h))return!1;for(var p=0;p<m.length;p++)try{m[p].error(h)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var h=this._sources,m=0;m<h.length;m++)h[m].lock()},t.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,t,e){"use strict";var i=n("../compressions"),r=n("./ZipFileWorker");e.generateWorker=function(o,s,a){var l=new r(s.streamFiles,a,s.platform,s.encodeFileName),u=0;try{o.forEach(function(f,h){u++;var m=function(y,x){var T=y||x,E=i[T];if(!E)throw new Error(T+" is not a valid compression method !");return E}(h.options.compression,s.compression),p=h.options.compressionOptions||s.compressionOptions||{},b=h.dir,C=h.date;h._compressWorker(m,p).withStreamInfo("file",{name:f,dir:b,date:C,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(l)}),l.entriesCount=u}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,t,e){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new i;for(var o in this)typeof this[o]!="function"&&(r[o]=this[o]);return r}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(r,o){return new i().loadAsync(r,o)},i.external=n("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./external"),o=n("./utf8"),s=n("./zipEntries"),a=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function u(f){return new r.Promise(function(h,m){var p=f.decompressed.getContentWorker().pipe(new a);p.on("error",function(b){m(b)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}t.exports=function(f,h){var m=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(f)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(p){var b=new s(h);return b.load(p),b}).then(function(p){var b=[r.Promise.resolve(p)],C=p.files;if(h.checkCRC32)for(var y=0;y<C.length;y++)b.push(u(C[y]));return r.Promise.all(b)}).then(function(p){for(var b=p.shift(),C=b.files,y=0;y<C.length;y++){var x=C[y],T=x.fileNameStr,E=i.resolve(x.fileNameStr);m.file(E,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:h.createFolders}),x.dir||(m.file(E).unsafeOriginalName=T)}return b.zipComment.length&&(m.comment=b.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../stream/GenericWorker");function o(s,a){r.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}i.inherits(o,r),o.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,t,e){"use strict";var i=n("readable-stream").Readable;function r(o,s,a){i.call(this,s),this._helper=o;var l=this;o.on("data",function(u,f){l.push(u)||l._helper.pause(),a&&a(f)}).on("error",function(u){l.emit("error",u)}).on("end",function(){l.push(null)})}n("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(n,t,e){"use strict";t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,r);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,r)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var r=new Buffer(i);return r.fill(0),r},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,t,e){"use strict";function i(E,D,V){var B,F=o.getTypeOf(D),G=o.extend(V||{},l);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(E=C(E)),G.createFolders&&(B=b(E))&&y.call(this,B,!0);var k=F==="string"&&G.binary===!1&&G.base64===!1;V&&V.binary!==void 0||(G.binary=!k),(D instanceof u&&D.uncompressedSize===0||G.dir||!D||D.length===0)&&(G.base64=!1,G.binary=!0,D="",G.compression="STORE",F="string");var P=null;P=D instanceof u||D instanceof s?D:m.isNode&&m.isStream(D)?new p(E,D):o.prepareContent(E,D,G.binary,G.optimizedBinaryString,G.base64);var N=new f(E,P,G);this.files[E]=N}var r=n("./utf8"),o=n("./utils"),s=n("./stream/GenericWorker"),a=n("./stream/StreamHelper"),l=n("./defaults"),u=n("./compressedObject"),f=n("./zipObject"),h=n("./generate"),m=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),b=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var D=E.lastIndexOf("/");return 0<D?E.substring(0,D):""},C=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},y=function(E,D){return D=D!==void 0?D:l.createFolders,E=C(E),this.files[E]||i.call(this,E,null,{dir:!0,createFolders:D}),this.files[E]};function x(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var D,V,B;for(D in this.files)B=this.files[D],(V=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&E(V,B)},filter:function(E){var D=[];return this.forEach(function(V,B){E(V,B)&&D.push(B)}),D},file:function(E,D,V){if(arguments.length!==1)return E=this.root+E,i.call(this,E,D,V),this;if(x(E)){var B=E;return this.filter(function(G,k){return!k.dir&&B.test(G)})}var F=this.files[this.root+E];return F&&!F.dir?F:null},folder:function(E){if(!E)return this;if(x(E))return this.filter(function(F,G){return G.dir&&E.test(F)});var D=this.root+E,V=y.call(this,D),B=this.clone();return B.root=V.name,B},remove:function(E){E=this.root+E;var D=this.files[E];if(D||(E.slice(-1)!=="/"&&(E+="/"),D=this.files[E]),D&&!D.dir)delete this.files[E];else for(var V=this.filter(function(F,G){return G.name.slice(0,E.length)===E}),B=0;B<V.length;B++)delete this.files[V[B].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var D,V={};try{if((V=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");o.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var B=V.comment||this.comment||"";D=h.generateWorker(this,V,B)}catch(F){(D=new s("error")).error(F)}return new a(D,V.type||"string",V.mimeType)},generateAsync:function(E,D){return this.generateInternalStream(E).accumulate(D)},generateNodeStream:function(E,D){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(D)}};t.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,t,e){"use strict";t.exports=n("stream")},{stream:void 0}],17:[function(n,t,e){"use strict";var i=n("./DataReader");function r(o){i.call(this,o);for(var s=0;s<this.data.length;s++)o[s]=255&o[s]}n("../utils").inherits(r,i),r.prototype.byteAt=function(o){return this.data[this.zero+o]},r.prototype.lastIndexOfSignature=function(o){for(var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===s&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===u)return f-this.zero;return-1},r.prototype.readAndCheckSignature=function(o){var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.readData(4);return s===f[0]&&a===f[1]&&l===f[2]&&u===f[3]},r.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(n,t,e){"use strict";var i=n("../utils");function r(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var s,a=0;for(this.checkOffset(o),s=this.index+o-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=o,a},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},t.exports=r},{"../utils":32}],19:[function(n,t,e){"use strict";var i=n("./Uint8ArrayReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,t,e){"use strict";var i=n("./DataReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},r.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},r.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},r.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(n,t,e){"use strict";var i=n("./ArrayReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../support"),o=n("./ArrayReader"),s=n("./StringReader"),a=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");t.exports=function(u){var f=i.getTypeOf(u);return i.checkSupport(f),f!=="string"||r.uint8array?f==="nodebuffer"?new a(u):r.uint8array?new l(i.transformTo("uint8array",u)):new o(i.transformTo("array",u)):new s(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,t,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,t,e){"use strict";var i=n("./GenericWorker"),r=n("../utils");function o(s){i.call(this,"ConvertWorker to "+s),this.destType=s}r.inherits(o,i),o.prototype.processChunk=function(s){this.push({data:r.transformTo(this.destType,s.data),meta:s.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,t,e){"use strict";var i=n("./GenericWorker"),r=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(s){this.streamInfo.crc32=r(s.data,this.streamInfo.crc32||0),this.push(s)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./GenericWorker");function o(s){r.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}i.inherits(o,r),o.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}r.prototype.processChunk.call(this,s)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./GenericWorker");function o(s){r.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=i.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,t,e){"use strict";function i(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,o){return this._listeners[r].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,o){if(this._listeners[r])for(var s=0;s<this._listeners[r].length;s++)this._listeners[r][s].call(this,o)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var o=this;return r.on("data",function(s){o.processChunk(s)}),r.on("end",function(){o.end()}),r.on("error",function(s){o.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,o){return this.extraStreamInfo[r]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},t.exports=i},{}],29:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./ConvertWorker"),o=n("./GenericWorker"),s=n("../base64"),a=n("../support"),l=n("../external"),u=null;if(a.nodestream)try{u=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(m,p){return new l.Promise(function(b,C){var y=[],x=m._internalType,T=m._outputType,E=m._mimeType;m.on("data",function(D,V){y.push(D),p&&p(V)}).on("error",function(D){y=[],C(D)}).on("end",function(){try{var D=function(V,B,F){switch(V){case"blob":return i.newBlob(i.transformTo("arraybuffer",B),F);case"base64":return s.encode(B);default:return i.transformTo(V,B)}}(T,function(V,B){var F,G=0,k=null,P=0;for(F=0;F<B.length;F++)P+=B[F].length;switch(V){case"string":return B.join("");case"array":return Array.prototype.concat.apply([],B);case"uint8array":for(k=new Uint8Array(P),F=0;F<B.length;F++)k.set(B[F],G),G+=B[F].length;return k;case"nodebuffer":return Buffer.concat(B);default:throw new Error("concat : unsupported type '"+V+"'")}}(x,y),E);b(D)}catch(V){C(V)}y=[]}).resume()})}function h(m,p,b){var C=p;switch(p){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=p,this._mimeType=b,i.checkSupport(C),this._worker=m.pipe(new r(C)),m.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}h.prototype={accumulate:function(m){return f(this,m)},on:function(m,p){var b=this;return m==="data"?this._worker.on(m,function(C){p.call(b,C.data,C.meta)}):this._worker.on(m,function(){i.delay(p,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},m)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,t,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var i=new ArrayBuffer(0);try{e.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),e.blob=r.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!n("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(n,t,e){"use strict";for(var i=n("./utils"),r=n("./support"),o=n("./nodejsUtils"),s=n("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}e.utf8encode=function(h){return r.nodebuffer?o.newBufferFrom(h,"utf-8"):function(m){var p,b,C,y,x,T=m.length,E=0;for(y=0;y<T;y++)(64512&(b=m.charCodeAt(y)))==55296&&y+1<T&&(64512&(C=m.charCodeAt(y+1)))==56320&&(b=65536+(b-55296<<10)+(C-56320),y++),E+=b<128?1:b<2048?2:b<65536?3:4;for(p=r.uint8array?new Uint8Array(E):new Array(E),y=x=0;x<E;y++)(64512&(b=m.charCodeAt(y)))==55296&&y+1<T&&(64512&(C=m.charCodeAt(y+1)))==56320&&(b=65536+(b-55296<<10)+(C-56320),y++),b<128?p[x++]=b:(b<2048?p[x++]=192|b>>>6:(b<65536?p[x++]=224|b>>>12:(p[x++]=240|b>>>18,p[x++]=128|b>>>12&63),p[x++]=128|b>>>6&63),p[x++]=128|63&b);return p}(h)},e.utf8decode=function(h){return r.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(m){var p,b,C,y,x=m.length,T=new Array(2*x);for(p=b=0;p<x;)if((C=m[p++])<128)T[b++]=C;else if(4<(y=a[C]))T[b++]=65533,p+=y-1;else{for(C&=y===2?31:y===3?15:7;1<y&&p<x;)C=C<<6|63&m[p++],y--;1<y?T[b++]=65533:C<65536?T[b++]=C:(C-=65536,T[b++]=55296|C>>10&1023,T[b++]=56320|1023&C)}return T.length!==b&&(T.subarray?T=T.subarray(0,b):T.length=b),i.applyFromCharCode(T)}(h=i.transformTo(r.uint8array?"uint8array":"array",h))},i.inherits(u,s),u.prototype.processChunk=function(h){var m=i.transformTo(r.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var p=m;(m=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),m.set(p,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var b=function(y,x){var T;for((x=x||y.length)>y.length&&(x=y.length),T=x-1;0<=T&&(192&y[T])==128;)T--;return T<0||T===0?x:T+a[y[T]]>x?T:x}(m),C=m;b!==m.length&&(r.uint8array?(C=m.subarray(0,b),this.leftOver=m.subarray(b,m.length)):(C=m.slice(0,b),this.leftOver=m.slice(b,m.length))),this.push({data:e.utf8decode(C),meta:h.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=u,i.inherits(f,s),f.prototype.processChunk=function(h){this.push({data:e.utf8encode(h.data),meta:h.meta})},e.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,t,e){"use strict";var i=n("./support"),r=n("./base64"),o=n("./nodejsUtils"),s=n("./external");function a(p){return p}function l(p,b){for(var C=0;C<p.length;++C)b[C]=255&p.charCodeAt(C);return b}n("setimmediate"),e.newBlob=function(p,b){e.checkSupport("blob");try{return new Blob([p],{type:b})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(p),C.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(p,b,C){var y=[],x=0,T=p.length;if(T<=C)return String.fromCharCode.apply(null,p);for(;x<T;)b==="array"||b==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(x,Math.min(x+C,T)))):y.push(String.fromCharCode.apply(null,p.subarray(x,Math.min(x+C,T)))),x+=C;return y.join("")},stringifyByChar:function(p){for(var b="",C=0;C<p.length;C++)b+=String.fromCharCode(p[C]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(p){var b=65536,C=e.getTypeOf(p),y=!0;if(C==="uint8array"?y=u.applyCanBeUsed.uint8array:C==="nodebuffer"&&(y=u.applyCanBeUsed.nodebuffer),y)for(;1<b;)try{return u.stringifyByChunk(p,C,b)}catch{b=Math.floor(b/2)}return u.stringifyByChar(p)}function h(p,b){for(var C=0;C<p.length;C++)b[C]=p[C];return b}e.applyFromCharCode=f;var m={};m.string={string:a,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,o.allocBuffer(p.length))}},m.array={string:f,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},m.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return h(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:f,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return o.newBufferFrom(p)}},m.nodebuffer={string:f,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:a},e.transformTo=function(p,b){if(b=b||"",!p)return b;e.checkSupport(p);var C=e.getTypeOf(b);return m[C][p](b)},e.resolve=function(p){for(var b=p.split("/"),C=[],y=0;y<b.length;y++){var x=b[y];x==="."||x===""&&y!==0&&y!==b.length-1||(x===".."?C.pop():C.push(x))}return C.join("/")},e.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(p)?"nodebuffer":i.uint8array&&p instanceof Uint8Array?"uint8array":i.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(p){if(!i[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(p){var b,C,y="";for(C=0;C<(p||"").length;C++)y+="\\x"+((b=p.charCodeAt(C))<16?"0":"")+b.toString(16).toUpperCase();return y},e.delay=function(p,b,C){setImmediate(function(){p.apply(C||null,b||[])})},e.inherits=function(p,b){function C(){}C.prototype=b.prototype,p.prototype=new C},e.extend=function(){var p,b,C={};for(p=0;p<arguments.length;p++)for(b in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],b)&&C[b]===void 0&&(C[b]=arguments[p][b]);return C},e.prepareContent=function(p,b,C,y,x){return s.Promise.resolve(b).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new s.Promise(function(E,D){var V=new FileReader;V.onload=function(B){E(B.target.result)},V.onerror=function(B){D(B.target.error)},V.readAsArrayBuffer(T)}):T}).then(function(T){var E=e.getTypeOf(T);return E?(E==="arraybuffer"?T=e.transformTo("uint8array",T):E==="string"&&(x?T=r.decode(T):C&&y!==!0&&(T=function(D){return l(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))}(T))),T):s.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,t,e){"use strict";var i=n("./reader/readerFor"),r=n("./utils"),o=n("./signature"),s=n("./zipEntry"),a=n("./support");function l(u){this.files=[],this.loadOptions=u}l.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(f)+", expected "+r.pretty(u)+")")}},isSignature:function(u,f){var h=this.reader.index;this.reader.setIndex(u);var m=this.reader.readString(4)===f;return this.reader.setIndex(h),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",h=r.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,h,m=this.zip64EndOfCentralSize-44;0<m;)u=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var m=f-h;if(0<m)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(u){this.reader=i(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,t,e){"use strict";var i=n("./reader/readerFor"),r=n("./utils"),o=n("./compressedObject"),s=n("./crc32"),a=n("./utf8"),l=n("./compressions"),u=n("./support");function f(h,m){this.options=h,this.loadOptions=m}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var m,p;if(h.skip(22),this.fileNameLength=h.readInt(2),p=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(b){for(var C in l)if(Object.prototype.hasOwnProperty.call(l,C)&&l[C].magic===b)return l[C];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var m=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(m),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var m,p,b,C=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<C;)m=h.readInt(2),p=h.readInt(2),b=h.readData(p),this.extraFields[m]={id:m,length:p,value:b};h.setIndex(C)},handleUTF8:function(){var h=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var p=r.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var C=r.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var m=i(h.value);return m.readInt(1)!==1||s(this.fileName)!==m.readInt(4)?null:a.utf8decode(m.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var m=i(h.value);return m.readInt(1)!==1||s(this.fileComment)!==m.readInt(4)?null:a.utf8decode(m.readData(h.length-5))}return null}},t.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,t,e){"use strict";function i(m,p,b){this.name=m,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=p,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var r=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),s=n("./utf8"),a=n("./compressedObject"),l=n("./stream/GenericWorker");i.prototype={internalStream:function(m){var p=null,b="string";try{if(!m)throw new Error("No output type specified.");var C=(b=m.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!C&&(p=p.pipe(new s.Utf8EncodeWorker)),!y&&C&&(p=p.pipe(new s.Utf8DecodeWorker))}catch(x){(p=new l("error")).error(x)}return new r(p,b,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof a&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(b,m,p)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)i.prototype[u[h]]=f;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,t,e){(function(i){"use strict";var r,o,s=i.MutationObserver||i.WebKitMutationObserver;if(s){var a=0,l=new s(m),u=i.document.createTextNode("");l.observe(u,{characterData:!0}),r=function(){u.data=a=++a%2}}else if(i.setImmediate||i.MessageChannel===void 0)r="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var p=i.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:function(){setTimeout(m,0)};else{var f=new i.MessageChannel;f.port1.onmessage=m,r=function(){f.port2.postMessage(0)}}var h=[];function m(){var p,b;o=!0;for(var C=h.length;C;){for(b=h,h=[],p=-1;++p<C;)b[p]();C=h.length}o=!1}t.exports=function(p){h.push(p)!==1||o||r()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,t,e){"use strict";var i=n("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,C!==r&&p(this,C)}function f(C,y,x){this.promise=C,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function h(C,y,x){i(function(){var T;try{T=y(x)}catch(E){return o.reject(C,E)}T===C?o.reject(C,new TypeError("Cannot resolve promise with itself")):o.resolve(C,T)})}function m(C){var y=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof y=="function")return function(){y.apply(C,arguments)}}function p(C,y){var x=!1;function T(V){x||(x=!0,o.reject(C,V))}function E(V){x||(x=!0,o.resolve(C,V))}var D=b(function(){y(E,T)});D.status==="error"&&T(D.value)}function b(C,y){var x={};try{x.value=C(y),x.status="success"}catch(T){x.status="error",x.value=T}return x}(t.exports=u).prototype.finally=function(C){if(typeof C!="function")return this;var y=this.constructor;return this.then(function(x){return y.resolve(C()).then(function(){return x})},function(x){return y.resolve(C()).then(function(){throw x})})},u.prototype.catch=function(C){return this.then(null,C)},u.prototype.then=function(C,y){if(typeof C!="function"&&this.state===a||typeof y!="function"&&this.state===s)return this;var x=new this.constructor(r);return this.state!==l?h(x,this.state===a?C:y,this.outcome):this.queue.push(new f(x,C,y)),x},f.prototype.callFulfilled=function(C){o.resolve(this.promise,C)},f.prototype.otherCallFulfilled=function(C){h(this.promise,this.onFulfilled,C)},f.prototype.callRejected=function(C){o.reject(this.promise,C)},f.prototype.otherCallRejected=function(C){h(this.promise,this.onRejected,C)},o.resolve=function(C,y){var x=b(m,y);if(x.status==="error")return o.reject(C,x.value);var T=x.value;if(T)p(C,T);else{C.state=a,C.outcome=y;for(var E=-1,D=C.queue.length;++E<D;)C.queue[E].callFulfilled(y)}return C},o.reject=function(C,y){C.state=s,C.outcome=y;for(var x=-1,T=C.queue.length;++x<T;)C.queue[x].callRejected(y);return C},u.resolve=function(C){return C instanceof this?C:o.resolve(new this(r),C)},u.reject=function(C){var y=new this(r);return o.reject(y,C)},u.all=function(C){var y=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=C.length,T=!1;if(!x)return this.resolve([]);for(var E=new Array(x),D=0,V=-1,B=new this(r);++V<x;)F(C[V],V);return B;function F(G,k){y.resolve(G).then(function(P){E[k]=P,++D!==x||T||(T=!0,o.resolve(B,E))},function(P){T||(T=!0,o.reject(B,P))})}},u.race=function(C){var y=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=C.length,T=!1;if(!x)return this.resolve([]);for(var E=-1,D=new this(r);++E<x;)V=C[E],y.resolve(V).then(function(B){T||(T=!0,o.resolve(D,B))},function(B){T||(T=!0,o.reject(D,B))});var V;return D}},{immediate:36}],38:[function(n,t,e){"use strict";var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,t,e){"use strict";var i=n("./zlib/deflate"),r=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/messages"),a=n("./zlib/zstream"),l=Object.prototype.toString,u=0,f=-1,h=0,m=8;function p(C){if(!(this instanceof p))return new p(C);this.options=r.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},C||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var x=i.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(x!==u)throw new Error(s[x]);if(y.header&&i.deflateSetHeader(this.strm,y.header),y.dictionary){var T;if(T=typeof y.dictionary=="string"?o.string2buf(y.dictionary):l.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(x=i.deflateSetDictionary(this.strm,T))!==u)throw new Error(s[x]);this._dict_set=!0}}function b(C,y){var x=new p(y);if(x.push(C,!0),x.err)throw x.msg||s[x.err];return x.result}p.prototype.push=function(C,y){var x,T,E=this.strm,D=this.options.chunkSize;if(this.ended)return!1;T=y===~~y?y:y===!0?4:0,typeof C=="string"?E.input=o.string2buf(C):l.call(C)==="[object ArrayBuffer]"?E.input=new Uint8Array(C):E.input=C,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new r.Buf8(D),E.next_out=0,E.avail_out=D),(x=i.deflate(E,T))!==1&&x!==u)return this.onEnd(x),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(r.shrinkBuf(E.output,E.next_out))):this.onData(r.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&x!==1);return T===4?(x=i.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u):T!==2||(this.onEnd(u),!(E.avail_out=0))},p.prototype.onData=function(C){this.chunks.push(C)},p.prototype.onEnd=function(C){C===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},e.Deflate=p,e.deflate=b,e.deflateRaw=function(C,y){return(y=y||{}).raw=!0,b(C,y)},e.gzip=function(C,y){return(y=y||{}).gzip=!0,b(C,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,t,e){"use strict";var i=n("./zlib/inflate"),r=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/constants"),a=n("./zlib/messages"),l=n("./zlib/zstream"),u=n("./zlib/gzheader"),f=Object.prototype.toString;function h(p){if(!(this instanceof h))return new h(p);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},p||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||p&&p.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var C=i.inflateInit2(this.strm,b.windowBits);if(C!==s.Z_OK)throw new Error(a[C]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function m(p,b){var C=new h(b);if(C.push(p,!0),C.err)throw C.msg||a[C.err];return C.result}h.prototype.push=function(p,b){var C,y,x,T,E,D,V=this.strm,B=this.options.chunkSize,F=this.options.dictionary,G=!1;if(this.ended)return!1;y=b===~~b?b:b===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof p=="string"?V.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?V.input=new Uint8Array(p):V.input=p,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new r.Buf8(B),V.next_out=0,V.avail_out=B),(C=i.inflate(V,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&F&&(D=typeof F=="string"?o.string2buf(F):f.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,C=i.inflateSetDictionary(this.strm,D)),C===s.Z_BUF_ERROR&&G===!0&&(C=s.Z_OK,G=!1),C!==s.Z_STREAM_END&&C!==s.Z_OK)return this.onEnd(C),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&C!==s.Z_STREAM_END&&(V.avail_in!==0||y!==s.Z_FINISH&&y!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=o.utf8border(V.output,V.next_out),T=V.next_out-x,E=o.buf2string(V.output,x),V.next_out=T,V.avail_out=B-T,T&&r.arraySet(V.output,V.output,x,T,0),this.onData(E)):this.onData(r.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(G=!0)}while((0<V.avail_in||V.avail_out===0)&&C!==s.Z_STREAM_END);return C===s.Z_STREAM_END&&(y=s.Z_FINISH),y===s.Z_FINISH?(C=i.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===s.Z_OK):y!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(V.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},e.Inflate=h,e.inflate=m,e.inflateRaw=function(p,b){return(b=b||{}).raw=!0,m(p,b)},e.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,t,e){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var u in l)l.hasOwnProperty(u)&&(s[u]=l[u])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var r={arraySet:function(s,a,l,u,f){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+u),f);else for(var h=0;h<u;h++)s[f+h]=a[l+h]},flattenChunks:function(s){var a,l,u,f,h,m;for(a=u=0,l=s.length;a<l;a++)u+=s[a].length;for(m=new Uint8Array(u),a=f=0,l=s.length;a<l;a++)h=s[a],m.set(h,f),f+=h.length;return m}},o={arraySet:function(s,a,l,u,f){for(var h=0;h<u;h++)s[f+h]=a[l+h]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},{}],42:[function(n,t,e){"use strict";var i=n("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(u,f){if(f<65537&&(u.subarray&&o||!u.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(u,f));for(var h="",m=0;m<f;m++)h+=String.fromCharCode(u[m]);return h}s[254]=s[254]=1,e.string2buf=function(u){var f,h,m,p,b,C=u.length,y=0;for(p=0;p<C;p++)(64512&(h=u.charCodeAt(p)))==55296&&p+1<C&&(64512&(m=u.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),y+=h<128?1:h<2048?2:h<65536?3:4;for(f=new i.Buf8(y),p=b=0;b<y;p++)(64512&(h=u.charCodeAt(p)))==55296&&p+1<C&&(64512&(m=u.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),h<128?f[b++]=h:(h<2048?f[b++]=192|h>>>6:(h<65536?f[b++]=224|h>>>12:(f[b++]=240|h>>>18,f[b++]=128|h>>>12&63),f[b++]=128|h>>>6&63),f[b++]=128|63&h);return f},e.buf2binstring=function(u){return l(u,u.length)},e.binstring2buf=function(u){for(var f=new i.Buf8(u.length),h=0,m=f.length;h<m;h++)f[h]=u.charCodeAt(h);return f},e.buf2string=function(u,f){var h,m,p,b,C=f||u.length,y=new Array(2*C);for(h=m=0;h<C;)if((p=u[h++])<128)y[m++]=p;else if(4<(b=s[p]))y[m++]=65533,h+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&h<C;)p=p<<6|63&u[h++],b--;1<b?y[m++]=65533:p<65536?y[m++]=p:(p-=65536,y[m++]=55296|p>>10&1023,y[m++]=56320|1023&p)}return l(y,m)},e.utf8border=function(u,f){var h;for((f=f||u.length)>u.length&&(f=u.length),h=f-1;0<=h&&(192&u[h])==128;)h--;return h<0||h===0?f:h+s[u[h]]>f?h:f}},{"./common":41}],43:[function(n,t,e){"use strict";t.exports=function(i,r,o,s){for(var a=65535&i|0,l=i>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;l=l+(a=a+r[s++]|0)|0,--u;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(n,t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,t,e){"use strict";var i=function(){for(var r,o=[],s=0;s<256;s++){r=s;for(var a=0;a<8;a++)r=1&r?3988292384^r>>>1:r>>>1;o[s]=r}return o}();t.exports=function(r,o,s,a){var l=i,u=a+s;r^=-1;for(var f=a;f<u;f++)r=r>>>8^l[255&(r^o[f])];return-1^r}},{}],46:[function(n,t,e){"use strict";var i,r=n("../utils/common"),o=n("./trees"),s=n("./adler32"),a=n("./crc32"),l=n("./messages"),u=0,f=4,h=0,m=-2,p=-1,b=4,C=2,y=8,x=9,T=286,E=30,D=19,V=2*T+1,B=15,F=3,G=258,k=G+F+1,P=42,N=113,S=1,q=2,oe=3,ee=4;function ge(O,Me){return O.msg=l[Me],Me}function se(O){return(O<<1)-(4<O?9:0)}function de(O){for(var Me=O.length;0<=--Me;)O[Me]=0}function J(O){var Me=O.state,W=Me.pending;W>O.avail_out&&(W=O.avail_out),W!==0&&(r.arraySet(O.output,Me.pending_buf,Me.pending_out,W,O.next_out),O.next_out+=W,Me.pending_out+=W,O.total_out+=W,O.avail_out-=W,Me.pending-=W,Me.pending===0&&(Me.pending_out=0))}function Q(O,Me){o._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,Me),O.block_start=O.strstart,J(O.strm)}function Ie(O,Me){O.pending_buf[O.pending++]=Me}function Le(O,Me){O.pending_buf[O.pending++]=Me>>>8&255,O.pending_buf[O.pending++]=255&Me}function Ne(O,Me){var W,Y,j=O.max_chain_length,te=O.strstart,ve=O.prev_length,Ee=O.nice_match,ie=O.strstart>O.w_size-k?O.strstart-(O.w_size-k):0,L=O.window,R=O.w_mask,K=O.prev,_e=O.strstart+G,Te=L[te+ve-1],ye=L[te+ve];O.prev_length>=O.good_match&&(j>>=2),Ee>O.lookahead&&(Ee=O.lookahead);do if(L[(W=Me)+ve]===ye&&L[W+ve-1]===Te&&L[W]===L[te]&&L[++W]===L[te+1]){te+=2,W++;do;while(L[++te]===L[++W]&&L[++te]===L[++W]&&L[++te]===L[++W]&&L[++te]===L[++W]&&L[++te]===L[++W]&&L[++te]===L[++W]&&L[++te]===L[++W]&&L[++te]===L[++W]&&te<_e);if(Y=G-(_e-te),te=_e-G,ve<Y){if(O.match_start=Me,Ee<=(ve=Y))break;Te=L[te+ve-1],ye=L[te+ve]}}while((Me=K[Me&R])>ie&&--j!=0);return ve<=O.lookahead?ve:O.lookahead}function Ce(O){var Me,W,Y,j,te,ve,Ee,ie,L,R,K=O.w_size;do{if(j=O.window_size-O.lookahead-O.strstart,O.strstart>=K+(K-k)){for(r.arraySet(O.window,O.window,K,K,0),O.match_start-=K,O.strstart-=K,O.block_start-=K,Me=W=O.hash_size;Y=O.head[--Me],O.head[Me]=K<=Y?Y-K:0,--W;);for(Me=W=K;Y=O.prev[--Me],O.prev[Me]=K<=Y?Y-K:0,--W;);j+=K}if(O.strm.avail_in===0)break;if(ve=O.strm,Ee=O.window,ie=O.strstart+O.lookahead,L=j,R=void 0,R=ve.avail_in,L<R&&(R=L),W=R===0?0:(ve.avail_in-=R,r.arraySet(Ee,ve.input,ve.next_in,R,ie),ve.state.wrap===1?ve.adler=s(ve.adler,Ee,R,ie):ve.state.wrap===2&&(ve.adler=a(ve.adler,Ee,R,ie)),ve.next_in+=R,ve.total_in+=R,R),O.lookahead+=W,O.lookahead+O.insert>=F)for(te=O.strstart-O.insert,O.ins_h=O.window[te],O.ins_h=(O.ins_h<<O.hash_shift^O.window[te+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[te+F-1])&O.hash_mask,O.prev[te&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=te,te++,O.insert--,!(O.lookahead+O.insert<F)););}while(O.lookahead<k&&O.strm.avail_in!==0)}function He(O,Me){for(var W,Y;;){if(O.lookahead<k){if(Ce(O),O.lookahead<k&&Me===u)return S;if(O.lookahead===0)break}if(W=0,O.lookahead>=F&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+F-1])&O.hash_mask,W=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),W!==0&&O.strstart-W<=O.w_size-k&&(O.match_length=Ne(O,W)),O.match_length>=F)if(Y=o._tr_tally(O,O.strstart-O.match_start,O.match_length-F),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=F){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+F-1])&O.hash_mask,W=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else Y=o._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(Y&&(Q(O,!1),O.strm.avail_out===0))return S}return O.insert=O.strstart<F-1?O.strstart:F-1,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):O.last_lit&&(Q(O,!1),O.strm.avail_out===0)?S:q}function Ge(O,Me){for(var W,Y,j;;){if(O.lookahead<k){if(Ce(O),O.lookahead<k&&Me===u)return S;if(O.lookahead===0)break}if(W=0,O.lookahead>=F&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+F-1])&O.hash_mask,W=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=F-1,W!==0&&O.prev_length<O.max_lazy_match&&O.strstart-W<=O.w_size-k&&(O.match_length=Ne(O,W),O.match_length<=5&&(O.strategy===1||O.match_length===F&&4096<O.strstart-O.match_start)&&(O.match_length=F-1)),O.prev_length>=F&&O.match_length<=O.prev_length){for(j=O.strstart+O.lookahead-F,Y=o._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-F),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=j&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+F-1])&O.hash_mask,W=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=F-1,O.strstart++,Y&&(Q(O,!1),O.strm.avail_out===0))return S}else if(O.match_available){if((Y=o._tr_tally(O,0,O.window[O.strstart-1]))&&Q(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return S}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(Y=o._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<F-1?O.strstart:F-1,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):O.last_lit&&(Q(O,!1),O.strm.avail_out===0)?S:q}function Ve(O,Me,W,Y,j){this.good_length=O,this.max_lazy=Me,this.nice_length=W,this.max_chain=Y,this.func=j}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*V),this.dyn_dtree=new r.Buf16(2*(2*E+1)),this.bl_tree=new r.Buf16(2*(2*D+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(B+1),this.heap=new r.Buf16(2*T+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*T+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pt(O){var Me;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=C,(Me=O.state).pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?P:N,O.adler=Me.wrap===2?0:1,Me.last_flush=u,o._tr_init(Me),h):ge(O,m)}function Lt(O){var Me=pt(O);return Me===h&&function(W){W.window_size=2*W.w_size,de(W.head),W.max_lazy_match=i[W.level].max_lazy,W.good_match=i[W.level].good_length,W.nice_match=i[W.level].nice_length,W.max_chain_length=i[W.level].max_chain,W.strstart=0,W.block_start=0,W.lookahead=0,W.insert=0,W.match_length=W.prev_length=F-1,W.match_available=0,W.ins_h=0}(O.state),Me}function Tn(O,Me,W,Y,j,te){if(!O)return m;var ve=1;if(Me===p&&(Me=6),Y<0?(ve=0,Y=-Y):15<Y&&(ve=2,Y-=16),j<1||x<j||W!==y||Y<8||15<Y||Me<0||9<Me||te<0||b<te)return ge(O,m);Y===8&&(Y=9);var Ee=new mt;return(O.state=Ee).strm=O,Ee.wrap=ve,Ee.gzhead=null,Ee.w_bits=Y,Ee.w_size=1<<Ee.w_bits,Ee.w_mask=Ee.w_size-1,Ee.hash_bits=j+7,Ee.hash_size=1<<Ee.hash_bits,Ee.hash_mask=Ee.hash_size-1,Ee.hash_shift=~~((Ee.hash_bits+F-1)/F),Ee.window=new r.Buf8(2*Ee.w_size),Ee.head=new r.Buf16(Ee.hash_size),Ee.prev=new r.Buf16(Ee.w_size),Ee.lit_bufsize=1<<j+6,Ee.pending_buf_size=4*Ee.lit_bufsize,Ee.pending_buf=new r.Buf8(Ee.pending_buf_size),Ee.d_buf=1*Ee.lit_bufsize,Ee.l_buf=3*Ee.lit_bufsize,Ee.level=Me,Ee.strategy=te,Ee.method=W,Lt(O)}i=[new Ve(0,0,0,0,function(O,Me){var W=65535;for(W>O.pending_buf_size-5&&(W=O.pending_buf_size-5);;){if(O.lookahead<=1){if(Ce(O),O.lookahead===0&&Me===u)return S;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var Y=O.block_start+W;if((O.strstart===0||O.strstart>=Y)&&(O.lookahead=O.strstart-Y,O.strstart=Y,Q(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-k&&(Q(O,!1),O.strm.avail_out===0))return S}return O.insert=0,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):(O.strstart>O.block_start&&(Q(O,!1),O.strm.avail_out),S)}),new Ve(4,4,8,4,He),new Ve(4,5,16,8,He),new Ve(4,6,32,32,He),new Ve(4,4,16,16,Ge),new Ve(8,16,32,32,Ge),new Ve(8,16,128,128,Ge),new Ve(8,32,128,256,Ge),new Ve(32,128,258,1024,Ge),new Ve(32,258,258,4096,Ge)],e.deflateInit=function(O,Me){return Tn(O,Me,y,15,8,0)},e.deflateInit2=Tn,e.deflateReset=Lt,e.deflateResetKeep=pt,e.deflateSetHeader=function(O,Me){return O&&O.state?O.state.wrap!==2?m:(O.state.gzhead=Me,h):m},e.deflate=function(O,Me){var W,Y,j,te;if(!O||!O.state||5<Me||Me<0)return O?ge(O,m):m;if(Y=O.state,!O.output||!O.input&&O.avail_in!==0||Y.status===666&&Me!==f)return ge(O,O.avail_out===0?-5:m);if(Y.strm=O,W=Y.last_flush,Y.last_flush=Me,Y.status===P)if(Y.wrap===2)O.adler=0,Ie(Y,31),Ie(Y,139),Ie(Y,8),Y.gzhead?(Ie(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),Ie(Y,255&Y.gzhead.time),Ie(Y,Y.gzhead.time>>8&255),Ie(Y,Y.gzhead.time>>16&255),Ie(Y,Y.gzhead.time>>24&255),Ie(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),Ie(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(Ie(Y,255&Y.gzhead.extra.length),Ie(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(O.adler=a(O.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),Ie(Y,3),Y.status=N);else{var ve=y+(Y.w_bits-8<<4)<<8;ve|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(ve|=32),ve+=31-ve%31,Y.status=N,Le(Y,ve),Y.strstart!==0&&(Le(Y,O.adler>>>16),Le(Y,65535&O.adler)),O.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(j=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>j&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-j,j)),J(O),j=Y.pending,Y.pending!==Y.pending_buf_size));)Ie(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>j&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-j,j)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){j=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>j&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-j,j)),J(O),j=Y.pending,Y.pending===Y.pending_buf_size)){te=1;break}te=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,Ie(Y,te)}while(te!==0);Y.gzhead.hcrc&&Y.pending>j&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-j,j)),te===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){j=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>j&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-j,j)),J(O),j=Y.pending,Y.pending===Y.pending_buf_size)){te=1;break}te=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,Ie(Y,te)}while(te!==0);Y.gzhead.hcrc&&Y.pending>j&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-j,j)),te===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&J(O),Y.pending+2<=Y.pending_buf_size&&(Ie(Y,255&O.adler),Ie(Y,O.adler>>8&255),O.adler=0,Y.status=N)):Y.status=N),Y.pending!==0){if(J(O),O.avail_out===0)return Y.last_flush=-1,h}else if(O.avail_in===0&&se(Me)<=se(W)&&Me!==f)return ge(O,-5);if(Y.status===666&&O.avail_in!==0)return ge(O,-5);if(O.avail_in!==0||Y.lookahead!==0||Me!==u&&Y.status!==666){var Ee=Y.strategy===2?function(ie,L){for(var R;;){if(ie.lookahead===0&&(Ce(ie),ie.lookahead===0)){if(L===u)return S;break}if(ie.match_length=0,R=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,R&&(Q(ie,!1),ie.strm.avail_out===0))return S}return ie.insert=0,L===f?(Q(ie,!0),ie.strm.avail_out===0?oe:ee):ie.last_lit&&(Q(ie,!1),ie.strm.avail_out===0)?S:q}(Y,Me):Y.strategy===3?function(ie,L){for(var R,K,_e,Te,ye=ie.window;;){if(ie.lookahead<=G){if(Ce(ie),ie.lookahead<=G&&L===u)return S;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=F&&0<ie.strstart&&(K=ye[_e=ie.strstart-1])===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]){Te=ie.strstart+G;do;while(K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&_e<Te);ie.match_length=G-(Te-_e),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=F?(R=o._tr_tally(ie,1,ie.match_length-F),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(R=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),R&&(Q(ie,!1),ie.strm.avail_out===0))return S}return ie.insert=0,L===f?(Q(ie,!0),ie.strm.avail_out===0?oe:ee):ie.last_lit&&(Q(ie,!1),ie.strm.avail_out===0)?S:q}(Y,Me):i[Y.level].func(Y,Me);if(Ee!==oe&&Ee!==ee||(Y.status=666),Ee===S||Ee===oe)return O.avail_out===0&&(Y.last_flush=-1),h;if(Ee===q&&(Me===1?o._tr_align(Y):Me!==5&&(o._tr_stored_block(Y,0,0,!1),Me===3&&(de(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),J(O),O.avail_out===0))return Y.last_flush=-1,h}return Me!==f?h:Y.wrap<=0?1:(Y.wrap===2?(Ie(Y,255&O.adler),Ie(Y,O.adler>>8&255),Ie(Y,O.adler>>16&255),Ie(Y,O.adler>>24&255),Ie(Y,255&O.total_in),Ie(Y,O.total_in>>8&255),Ie(Y,O.total_in>>16&255),Ie(Y,O.total_in>>24&255)):(Le(Y,O.adler>>>16),Le(Y,65535&O.adler)),J(O),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?h:1)},e.deflateEnd=function(O){var Me;return O&&O.state?(Me=O.state.status)!==P&&Me!==69&&Me!==73&&Me!==91&&Me!==103&&Me!==N&&Me!==666?ge(O,m):(O.state=null,Me===N?ge(O,-3):h):m},e.deflateSetDictionary=function(O,Me){var W,Y,j,te,ve,Ee,ie,L,R=Me.length;if(!O||!O.state||(te=(W=O.state).wrap)===2||te===1&&W.status!==P||W.lookahead)return m;for(te===1&&(O.adler=s(O.adler,Me,R,0)),W.wrap=0,R>=W.w_size&&(te===0&&(de(W.head),W.strstart=0,W.block_start=0,W.insert=0),L=new r.Buf8(W.w_size),r.arraySet(L,Me,R-W.w_size,W.w_size,0),Me=L,R=W.w_size),ve=O.avail_in,Ee=O.next_in,ie=O.input,O.avail_in=R,O.next_in=0,O.input=Me,Ce(W);W.lookahead>=F;){for(Y=W.strstart,j=W.lookahead-(F-1);W.ins_h=(W.ins_h<<W.hash_shift^W.window[Y+F-1])&W.hash_mask,W.prev[Y&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=Y,Y++,--j;);W.strstart=Y,W.lookahead=F-1,Ce(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=F-1,W.match_available=0,O.next_in=Ee,O.input=ie,O.avail_in=ve,W.wrap=te,h},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,t,e){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,t,e){"use strict";t.exports=function(i,r){var o,s,a,l,u,f,h,m,p,b,C,y,x,T,E,D,V,B,F,G,k,P,N,S,q;o=i.state,s=i.next_in,S=i.input,a=s+(i.avail_in-5),l=i.next_out,q=i.output,u=l-(r-i.avail_out),f=l+(i.avail_out-257),h=o.dmax,m=o.wsize,p=o.whave,b=o.wnext,C=o.window,y=o.hold,x=o.bits,T=o.lencode,E=o.distcode,D=(1<<o.lenbits)-1,V=(1<<o.distbits)-1;e:do{x<15&&(y+=S[s++]<<x,x+=8,y+=S[s++]<<x,x+=8),B=T[y&D];t:for(;;){if(y>>>=F=B>>>24,x-=F,(F=B>>>16&255)===0)q[l++]=65535&B;else{if(!(16&F)){if(!(64&F)){B=T[(65535&B)+(y&(1<<F)-1)];continue t}if(32&F){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}G=65535&B,(F&=15)&&(x<F&&(y+=S[s++]<<x,x+=8),G+=y&(1<<F)-1,y>>>=F,x-=F),x<15&&(y+=S[s++]<<x,x+=8,y+=S[s++]<<x,x+=8),B=E[y&V];n:for(;;){if(y>>>=F=B>>>24,x-=F,!(16&(F=B>>>16&255))){if(!(64&F)){B=E[(65535&B)+(y&(1<<F)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(k=65535&B,x<(F&=15)&&(y+=S[s++]<<x,(x+=8)<F&&(y+=S[s++]<<x,x+=8)),h<(k+=y&(1<<F)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(y>>>=F,x-=F,(F=l-u)<k){if(p<(F=k-F)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(N=C,(P=0)===b){if(P+=m-F,F<G){for(G-=F;q[l++]=C[P++],--F;);P=l-k,N=q}}else if(b<F){if(P+=m+b-F,(F-=b)<G){for(G-=F;q[l++]=C[P++],--F;);if(P=0,b<G){for(G-=F=b;q[l++]=C[P++],--F;);P=l-k,N=q}}}else if(P+=b-F,F<G){for(G-=F;q[l++]=C[P++],--F;);P=l-k,N=q}for(;2<G;)q[l++]=N[P++],q[l++]=N[P++],q[l++]=N[P++],G-=3;G&&(q[l++]=N[P++],1<G&&(q[l++]=N[P++]))}else{for(P=l-k;q[l++]=q[P++],q[l++]=q[P++],q[l++]=q[P++],2<(G-=3););G&&(q[l++]=q[P++],1<G&&(q[l++]=q[P++]))}break}}break}}while(s<a&&l<f);s-=G=x>>3,y&=(1<<(x-=G<<3))-1,i.next_in=s,i.next_out=l,i.avail_in=s<a?a-s+5:5-(s-a),i.avail_out=l<f?f-l+257:257-(l-f),o.hold=y,o.bits=x}},{}],49:[function(n,t,e){"use strict";var i=n("../utils/common"),r=n("./adler32"),o=n("./crc32"),s=n("./inffast"),a=n("./inftrees"),l=1,u=2,f=0,h=-2,m=1,p=852,b=592;function C(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(P){var N;return P&&P.state?(N=P.state,P.total_in=P.total_out=N.total=0,P.msg="",N.wrap&&(P.adler=1&N.wrap),N.mode=m,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new i.Buf32(p),N.distcode=N.distdyn=new i.Buf32(b),N.sane=1,N.back=-1,f):h}function T(P){var N;return P&&P.state?((N=P.state).wsize=0,N.whave=0,N.wnext=0,x(P)):h}function E(P,N){var S,q;return P&&P.state?(q=P.state,N<0?(S=0,N=-N):(S=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?h:(q.window!==null&&q.wbits!==N&&(q.window=null),q.wrap=S,q.wbits=N,T(P))):h}function D(P,N){var S,q;return P?(q=new y,(P.state=q).window=null,(S=E(P,N))!==f&&(P.state=null),S):h}var V,B,F=!0;function G(P){if(F){var N;for(V=new i.Buf32(512),B=new i.Buf32(32),N=0;N<144;)P.lens[N++]=8;for(;N<256;)P.lens[N++]=9;for(;N<280;)P.lens[N++]=7;for(;N<288;)P.lens[N++]=8;for(a(l,P.lens,0,288,V,0,P.work,{bits:9}),N=0;N<32;)P.lens[N++]=5;a(u,P.lens,0,32,B,0,P.work,{bits:5}),F=!1}P.lencode=V,P.lenbits=9,P.distcode=B,P.distbits=5}function k(P,N,S,q){var oe,ee=P.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new i.Buf8(ee.wsize)),q>=ee.wsize?(i.arraySet(ee.window,N,S-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(q<(oe=ee.wsize-ee.wnext)&&(oe=q),i.arraySet(ee.window,N,S-q,oe,ee.wnext),(q-=oe)?(i.arraySet(ee.window,N,S-q,q,0),ee.wnext=q,ee.whave=ee.wsize):(ee.wnext+=oe,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=oe))),0}e.inflateReset=T,e.inflateReset2=E,e.inflateResetKeep=x,e.inflateInit=function(P){return D(P,15)},e.inflateInit2=D,e.inflate=function(P,N){var S,q,oe,ee,ge,se,de,J,Q,Ie,Le,Ne,Ce,He,Ge,Ve,mt,pt,Lt,Tn,O,Me,W,Y,j=0,te=new i.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return h;(S=P.state).mode===12&&(S.mode=13),ge=P.next_out,oe=P.output,de=P.avail_out,ee=P.next_in,q=P.input,se=P.avail_in,J=S.hold,Q=S.bits,Ie=se,Le=de,Me=f;e:for(;;)switch(S.mode){case m:if(S.wrap===0){S.mode=13;break}for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(2&S.wrap&&J===35615){te[S.check=0]=255&J,te[1]=J>>>8&255,S.check=o(S.check,te,2,0),Q=J=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&J)<<8)+(J>>8))%31){P.msg="incorrect header check",S.mode=30;break}if((15&J)!=8){P.msg="unknown compression method",S.mode=30;break}if(Q-=4,O=8+(15&(J>>>=4)),S.wbits===0)S.wbits=O;else if(O>S.wbits){P.msg="invalid window size",S.mode=30;break}S.dmax=1<<O,P.adler=S.check=1,S.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(S.flags=J,(255&S.flags)!=8){P.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){P.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=J>>8&1),512&S.flags&&(te[0]=255&J,te[1]=J>>>8&255,S.check=o(S.check,te,2,0)),Q=J=0,S.mode=3;case 3:for(;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.head&&(S.head.time=J),512&S.flags&&(te[0]=255&J,te[1]=J>>>8&255,te[2]=J>>>16&255,te[3]=J>>>24&255,S.check=o(S.check,te,4,0)),Q=J=0,S.mode=4;case 4:for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.head&&(S.head.xflags=255&J,S.head.os=J>>8),512&S.flags&&(te[0]=255&J,te[1]=J>>>8&255,S.check=o(S.check,te,2,0)),Q=J=0,S.mode=5;case 5:if(1024&S.flags){for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.length=J,S.head&&(S.head.extra_len=J),512&S.flags&&(te[0]=255&J,te[1]=J>>>8&255,S.check=o(S.check,te,2,0)),Q=J=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(se<(Ne=S.length)&&(Ne=se),Ne&&(S.head&&(O=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),i.arraySet(S.head.extra,q,ee,Ne,O)),512&S.flags&&(S.check=o(S.check,q,Ne,ee)),se-=Ne,ee+=Ne,S.length-=Ne),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(se===0)break e;for(Ne=0;O=q[ee+Ne++],S.head&&O&&S.length<65536&&(S.head.name+=String.fromCharCode(O)),O&&Ne<se;);if(512&S.flags&&(S.check=o(S.check,q,Ne,ee)),se-=Ne,ee+=Ne,O)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(se===0)break e;for(Ne=0;O=q[ee+Ne++],S.head&&O&&S.length<65536&&(S.head.comment+=String.fromCharCode(O)),O&&Ne<se;);if(512&S.flags&&(S.check=o(S.check,q,Ne,ee)),se-=Ne,ee+=Ne,O)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;Q<16;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(J!==(65535&S.check)){P.msg="header crc mismatch",S.mode=30;break}Q=J=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),P.adler=S.check=0,S.mode=12;break;case 10:for(;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}P.adler=S.check=C(J),Q=J=0,S.mode=11;case 11:if(S.havedict===0)return P.next_out=ge,P.avail_out=de,P.next_in=ee,P.avail_in=se,S.hold=J,S.bits=Q,2;P.adler=S.check=1,S.mode=12;case 12:if(N===5||N===6)break e;case 13:if(S.last){J>>>=7&Q,Q-=7&Q,S.mode=27;break}for(;Q<3;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}switch(S.last=1&J,Q-=1,3&(J>>>=1)){case 0:S.mode=14;break;case 1:if(G(S),S.mode=20,N!==6)break;J>>>=2,Q-=2;break e;case 2:S.mode=17;break;case 3:P.msg="invalid block type",S.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){P.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&J,Q=J=0,S.mode=15,N===6)break e;case 15:S.mode=16;case 16:if(Ne=S.length){if(se<Ne&&(Ne=se),de<Ne&&(Ne=de),Ne===0)break e;i.arraySet(oe,q,ee,Ne,ge),se-=Ne,ee+=Ne,de-=Ne,ge+=Ne,S.length-=Ne;break}S.mode=12;break;case 17:for(;Q<14;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(S.nlen=257+(31&J),J>>>=5,Q-=5,S.ndist=1+(31&J),J>>>=5,Q-=5,S.ncode=4+(15&J),J>>>=4,Q-=4,286<S.nlen||30<S.ndist){P.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;Q<3;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.lens[ve[S.have++]]=7&J,J>>>=3,Q-=3}for(;S.have<19;)S.lens[ve[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,W={bits:S.lenbits},Me=a(0,S.lens,0,19,S.lencode,0,S.work,W),S.lenbits=W.bits,Me){P.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Ve=(j=S.lencode[J&(1<<S.lenbits)-1])>>>16&255,mt=65535&j,!((Ge=j>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(mt<16)J>>>=Ge,Q-=Ge,S.lens[S.have++]=mt;else{if(mt===16){for(Y=Ge+2;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(J>>>=Ge,Q-=Ge,S.have===0){P.msg="invalid bit length repeat",S.mode=30;break}O=S.lens[S.have-1],Ne=3+(3&J),J>>>=2,Q-=2}else if(mt===17){for(Y=Ge+3;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}Q-=Ge,O=0,Ne=3+(7&(J>>>=Ge)),J>>>=3,Q-=3}else{for(Y=Ge+7;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}Q-=Ge,O=0,Ne=11+(127&(J>>>=Ge)),J>>>=7,Q-=7}if(S.have+Ne>S.nlen+S.ndist){P.msg="invalid bit length repeat",S.mode=30;break}for(;Ne--;)S.lens[S.have++]=O}}if(S.mode===30)break;if(S.lens[256]===0){P.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,W={bits:S.lenbits},Me=a(l,S.lens,0,S.nlen,S.lencode,0,S.work,W),S.lenbits=W.bits,Me){P.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,W={bits:S.distbits},Me=a(u,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,W),S.distbits=W.bits,Me){P.msg="invalid distances set",S.mode=30;break}if(S.mode=20,N===6)break e;case 20:S.mode=21;case 21:if(6<=se&&258<=de){P.next_out=ge,P.avail_out=de,P.next_in=ee,P.avail_in=se,S.hold=J,S.bits=Q,s(P,Le),ge=P.next_out,oe=P.output,de=P.avail_out,ee=P.next_in,q=P.input,se=P.avail_in,J=S.hold,Q=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Ve=(j=S.lencode[J&(1<<S.lenbits)-1])>>>16&255,mt=65535&j,!((Ge=j>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(Ve&&!(240&Ve)){for(pt=Ge,Lt=Ve,Tn=mt;Ve=(j=S.lencode[Tn+((J&(1<<pt+Lt)-1)>>pt)])>>>16&255,mt=65535&j,!(pt+(Ge=j>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}J>>>=pt,Q-=pt,S.back+=pt}if(J>>>=Ge,Q-=Ge,S.back+=Ge,S.length=mt,Ve===0){S.mode=26;break}if(32&Ve){S.back=-1,S.mode=12;break}if(64&Ve){P.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Ve,S.mode=22;case 22:if(S.extra){for(Y=S.extra;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.length+=J&(1<<S.extra)-1,J>>>=S.extra,Q-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Ve=(j=S.distcode[J&(1<<S.distbits)-1])>>>16&255,mt=65535&j,!((Ge=j>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(!(240&Ve)){for(pt=Ge,Lt=Ve,Tn=mt;Ve=(j=S.distcode[Tn+((J&(1<<pt+Lt)-1)>>pt)])>>>16&255,mt=65535&j,!(pt+(Ge=j>>>24)<=Q);){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}J>>>=pt,Q-=pt,S.back+=pt}if(J>>>=Ge,Q-=Ge,S.back+=Ge,64&Ve){P.msg="invalid distance code",S.mode=30;break}S.offset=mt,S.extra=15&Ve,S.mode=24;case 24:if(S.extra){for(Y=S.extra;Q<Y;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}S.offset+=J&(1<<S.extra)-1,J>>>=S.extra,Q-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){P.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(de===0)break e;if(Ne=Le-de,S.offset>Ne){if((Ne=S.offset-Ne)>S.whave&&S.sane){P.msg="invalid distance too far back",S.mode=30;break}Ce=Ne>S.wnext?(Ne-=S.wnext,S.wsize-Ne):S.wnext-Ne,Ne>S.length&&(Ne=S.length),He=S.window}else He=oe,Ce=ge-S.offset,Ne=S.length;for(de<Ne&&(Ne=de),de-=Ne,S.length-=Ne;oe[ge++]=He[Ce++],--Ne;);S.length===0&&(S.mode=21);break;case 26:if(de===0)break e;oe[ge++]=S.length,de--,S.mode=21;break;case 27:if(S.wrap){for(;Q<32;){if(se===0)break e;se--,J|=q[ee++]<<Q,Q+=8}if(Le-=de,P.total_out+=Le,S.total+=Le,Le&&(P.adler=S.check=S.flags?o(S.check,oe,Le,ge-Le):r(S.check,oe,Le,ge-Le)),Le=de,(S.flags?J:C(J))!==S.check){P.msg="incorrect data check",S.mode=30;break}Q=J=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;Q<32;){if(se===0)break e;se--,J+=q[ee++]<<Q,Q+=8}if(J!==(4294967295&S.total)){P.msg="incorrect length check",S.mode=30;break}Q=J=0}S.mode=29;case 29:Me=1;break e;case 30:Me=-3;break e;case 31:return-4;case 32:default:return h}return P.next_out=ge,P.avail_out=de,P.next_in=ee,P.avail_in=se,S.hold=J,S.bits=Q,(S.wsize||Le!==P.avail_out&&S.mode<30&&(S.mode<27||N!==4))&&k(P,P.output,P.next_out,Le-P.avail_out)?(S.mode=31,-4):(Ie-=P.avail_in,Le-=P.avail_out,P.total_in+=Ie,P.total_out+=Le,S.total+=Le,S.wrap&&Le&&(P.adler=S.check=S.flags?o(S.check,oe,Le,P.next_out-Le):r(S.check,oe,Le,P.next_out-Le)),P.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(Ie==0&&Le===0||N===4)&&Me===f&&(Me=-5),Me)},e.inflateEnd=function(P){if(!P||!P.state)return h;var N=P.state;return N.window&&(N.window=null),P.state=null,f},e.inflateGetHeader=function(P,N){var S;return P&&P.state&&2&(S=P.state).wrap?((S.head=N).done=!1,f):h},e.inflateSetDictionary=function(P,N){var S,q=N.length;return P&&P.state?(S=P.state).wrap!==0&&S.mode!==11?h:S.mode===11&&r(1,N,q,0)!==S.check?-3:k(P,N,q,q)?(S.mode=31,-4):(S.havedict=1,f):h},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,t,e){"use strict";var i=n("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(l,u,f,h,m,p,b,C){var y,x,T,E,D,V,B,F,G,k=C.bits,P=0,N=0,S=0,q=0,oe=0,ee=0,ge=0,se=0,de=0,J=0,Q=null,Ie=0,Le=new i.Buf16(16),Ne=new i.Buf16(16),Ce=null,He=0;for(P=0;P<=15;P++)Le[P]=0;for(N=0;N<h;N++)Le[u[f+N]]++;for(oe=k,q=15;1<=q&&Le[q]===0;q--);if(q<oe&&(oe=q),q===0)return m[p++]=20971520,m[p++]=20971520,C.bits=1,0;for(S=1;S<q&&Le[S]===0;S++);for(oe<S&&(oe=S),P=se=1;P<=15;P++)if(se<<=1,(se-=Le[P])<0)return-1;if(0<se&&(l===0||q!==1))return-1;for(Ne[1]=0,P=1;P<15;P++)Ne[P+1]=Ne[P]+Le[P];for(N=0;N<h;N++)u[f+N]!==0&&(b[Ne[u[f+N]]++]=N);if(V=l===0?(Q=Ce=b,19):l===1?(Q=r,Ie-=257,Ce=o,He-=257,256):(Q=s,Ce=a,-1),P=S,D=p,ge=N=J=0,T=-1,E=(de=1<<(ee=oe))-1,l===1&&852<de||l===2&&592<de)return 1;for(;;){for(B=P-ge,G=b[N]<V?(F=0,b[N]):b[N]>V?(F=Ce[He+b[N]],Q[Ie+b[N]]):(F=96,0),y=1<<P-ge,S=x=1<<ee;m[D+(J>>ge)+(x-=y)]=B<<24|F<<16|G|0,x!==0;);for(y=1<<P-1;J&y;)y>>=1;if(y!==0?(J&=y-1,J+=y):J=0,N++,--Le[P]==0){if(P===q)break;P=u[f+b[N]]}if(oe<P&&(J&E)!==T){for(ge===0&&(ge=oe),D+=S,se=1<<(ee=P-ge);ee+ge<q&&!((se-=Le[ee+ge])<=0);)ee++,se<<=1;if(de+=1<<ee,l===1&&852<de||l===2&&592<de)return 1;m[T=J&E]=oe<<24|ee<<16|D-p|0}}return J!==0&&(m[D+J]=P-ge<<24|64<<16|0),C.bits=oe,0}},{"../utils/common":41}],51:[function(n,t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,t,e){"use strict";var i=n("../utils/common"),r=0,o=1;function s(j){for(var te=j.length;0<=--te;)j[te]=0}var a=0,l=29,u=256,f=u+1+l,h=30,m=19,p=2*f+1,b=15,C=16,y=7,x=256,T=16,E=17,D=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(f+2));s(k);var P=new Array(2*h);s(P);var N=new Array(512);s(N);var S=new Array(256);s(S);var q=new Array(l);s(q);var oe,ee,ge,se=new Array(h);function de(j,te,ve,Ee,ie){this.static_tree=j,this.extra_bits=te,this.extra_base=ve,this.elems=Ee,this.max_length=ie,this.has_stree=j&&j.length}function J(j,te){this.dyn_tree=j,this.max_code=0,this.stat_desc=te}function Q(j){return j<256?N[j]:N[256+(j>>>7)]}function Ie(j,te){j.pending_buf[j.pending++]=255&te,j.pending_buf[j.pending++]=te>>>8&255}function Le(j,te,ve){j.bi_valid>C-ve?(j.bi_buf|=te<<j.bi_valid&65535,Ie(j,j.bi_buf),j.bi_buf=te>>C-j.bi_valid,j.bi_valid+=ve-C):(j.bi_buf|=te<<j.bi_valid&65535,j.bi_valid+=ve)}function Ne(j,te,ve){Le(j,ve[2*te],ve[2*te+1])}function Ce(j,te){for(var ve=0;ve|=1&j,j>>>=1,ve<<=1,0<--te;);return ve>>>1}function He(j,te,ve){var Ee,ie,L=new Array(b+1),R=0;for(Ee=1;Ee<=b;Ee++)L[Ee]=R=R+ve[Ee-1]<<1;for(ie=0;ie<=te;ie++){var K=j[2*ie+1];K!==0&&(j[2*ie]=Ce(L[K]++,K))}}function Ge(j){var te;for(te=0;te<f;te++)j.dyn_ltree[2*te]=0;for(te=0;te<h;te++)j.dyn_dtree[2*te]=0;for(te=0;te<m;te++)j.bl_tree[2*te]=0;j.dyn_ltree[2*x]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function Ve(j){8<j.bi_valid?Ie(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function mt(j,te,ve,Ee){var ie=2*te,L=2*ve;return j[ie]<j[L]||j[ie]===j[L]&&Ee[te]<=Ee[ve]}function pt(j,te,ve){for(var Ee=j.heap[ve],ie=ve<<1;ie<=j.heap_len&&(ie<j.heap_len&&mt(te,j.heap[ie+1],j.heap[ie],j.depth)&&ie++,!mt(te,Ee,j.heap[ie],j.depth));)j.heap[ve]=j.heap[ie],ve=ie,ie<<=1;j.heap[ve]=Ee}function Lt(j,te,ve){var Ee,ie,L,R,K=0;if(j.last_lit!==0)for(;Ee=j.pending_buf[j.d_buf+2*K]<<8|j.pending_buf[j.d_buf+2*K+1],ie=j.pending_buf[j.l_buf+K],K++,Ee===0?Ne(j,ie,te):(Ne(j,(L=S[ie])+u+1,te),(R=V[L])!==0&&Le(j,ie-=q[L],R),Ne(j,L=Q(--Ee),ve),(R=B[L])!==0&&Le(j,Ee-=se[L],R)),K<j.last_lit;);Ne(j,x,te)}function Tn(j,te){var ve,Ee,ie,L=te.dyn_tree,R=te.stat_desc.static_tree,K=te.stat_desc.has_stree,_e=te.stat_desc.elems,Te=-1;for(j.heap_len=0,j.heap_max=p,ve=0;ve<_e;ve++)L[2*ve]!==0?(j.heap[++j.heap_len]=Te=ve,j.depth[ve]=0):L[2*ve+1]=0;for(;j.heap_len<2;)L[2*(ie=j.heap[++j.heap_len]=Te<2?++Te:0)]=1,j.depth[ie]=0,j.opt_len--,K&&(j.static_len-=R[2*ie+1]);for(te.max_code=Te,ve=j.heap_len>>1;1<=ve;ve--)pt(j,L,ve);for(ie=_e;ve=j.heap[1],j.heap[1]=j.heap[j.heap_len--],pt(j,L,1),Ee=j.heap[1],j.heap[--j.heap_max]=ve,j.heap[--j.heap_max]=Ee,L[2*ie]=L[2*ve]+L[2*Ee],j.depth[ie]=(j.depth[ve]>=j.depth[Ee]?j.depth[ve]:j.depth[Ee])+1,L[2*ve+1]=L[2*Ee+1]=ie,j.heap[1]=ie++,pt(j,L,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],function(ye,st){var et,nt,ln,Fe,lt,It,Ot=st.dyn_tree,ht=st.max_code,Dn=st.stat_desc.static_tree,tn=st.stat_desc.has_stree,Jn=st.stat_desc.extra_bits,ae=st.stat_desc.extra_base,tt=st.stat_desc.max_length,Se=0;for(Fe=0;Fe<=b;Fe++)ye.bl_count[Fe]=0;for(Ot[2*ye.heap[ye.heap_max]+1]=0,et=ye.heap_max+1;et<p;et++)tt<(Fe=Ot[2*Ot[2*(nt=ye.heap[et])+1]+1]+1)&&(Fe=tt,Se++),Ot[2*nt+1]=Fe,ht<nt||(ye.bl_count[Fe]++,lt=0,ae<=nt&&(lt=Jn[nt-ae]),It=Ot[2*nt],ye.opt_len+=It*(Fe+lt),tn&&(ye.static_len+=It*(Dn[2*nt+1]+lt)));if(Se!==0){do{for(Fe=tt-1;ye.bl_count[Fe]===0;)Fe--;ye.bl_count[Fe]--,ye.bl_count[Fe+1]+=2,ye.bl_count[tt]--,Se-=2}while(0<Se);for(Fe=tt;Fe!==0;Fe--)for(nt=ye.bl_count[Fe];nt!==0;)ht<(ln=ye.heap[--et])||(Ot[2*ln+1]!==Fe&&(ye.opt_len+=(Fe-Ot[2*ln+1])*Ot[2*ln],Ot[2*ln+1]=Fe),nt--)}}(j,te),He(L,Te,j.bl_count)}function O(j,te,ve){var Ee,ie,L=-1,R=te[1],K=0,_e=7,Te=4;for(R===0&&(_e=138,Te=3),te[2*(ve+1)+1]=65535,Ee=0;Ee<=ve;Ee++)ie=R,R=te[2*(Ee+1)+1],++K<_e&&ie===R||(K<Te?j.bl_tree[2*ie]+=K:ie!==0?(ie!==L&&j.bl_tree[2*ie]++,j.bl_tree[2*T]++):K<=10?j.bl_tree[2*E]++:j.bl_tree[2*D]++,L=ie,Te=(K=0)===R?(_e=138,3):ie===R?(_e=6,3):(_e=7,4))}function Me(j,te,ve){var Ee,ie,L=-1,R=te[1],K=0,_e=7,Te=4;for(R===0&&(_e=138,Te=3),Ee=0;Ee<=ve;Ee++)if(ie=R,R=te[2*(Ee+1)+1],!(++K<_e&&ie===R)){if(K<Te)for(;Ne(j,ie,j.bl_tree),--K!=0;);else ie!==0?(ie!==L&&(Ne(j,ie,j.bl_tree),K--),Ne(j,T,j.bl_tree),Le(j,K-3,2)):K<=10?(Ne(j,E,j.bl_tree),Le(j,K-3,3)):(Ne(j,D,j.bl_tree),Le(j,K-11,7));L=ie,Te=(K=0)===R?(_e=138,3):ie===R?(_e=6,3):(_e=7,4)}}s(se);var W=!1;function Y(j,te,ve,Ee){Le(j,(a<<1)+(Ee?1:0),3),function(ie,L,R,K){Ve(ie),K&&(Ie(ie,R),Ie(ie,~R)),i.arraySet(ie.pending_buf,ie.window,L,R,ie.pending),ie.pending+=R}(j,te,ve,!0)}e._tr_init=function(j){W||(function(){var te,ve,Ee,ie,L,R=new Array(b+1);for(ie=Ee=0;ie<l-1;ie++)for(q[ie]=Ee,te=0;te<1<<V[ie];te++)S[Ee++]=ie;for(S[Ee-1]=ie,ie=L=0;ie<16;ie++)for(se[ie]=L,te=0;te<1<<B[ie];te++)N[L++]=ie;for(L>>=7;ie<h;ie++)for(se[ie]=L<<7,te=0;te<1<<B[ie]-7;te++)N[256+L++]=ie;for(ve=0;ve<=b;ve++)R[ve]=0;for(te=0;te<=143;)k[2*te+1]=8,te++,R[8]++;for(;te<=255;)k[2*te+1]=9,te++,R[9]++;for(;te<=279;)k[2*te+1]=7,te++,R[7]++;for(;te<=287;)k[2*te+1]=8,te++,R[8]++;for(He(k,f+1,R),te=0;te<h;te++)P[2*te+1]=5,P[2*te]=Ce(te,5);oe=new de(k,V,u+1,f,b),ee=new de(P,B,0,h,b),ge=new de(new Array(0),F,0,m,y)}(),W=!0),j.l_desc=new J(j.dyn_ltree,oe),j.d_desc=new J(j.dyn_dtree,ee),j.bl_desc=new J(j.bl_tree,ge),j.bi_buf=0,j.bi_valid=0,Ge(j)},e._tr_stored_block=Y,e._tr_flush_block=function(j,te,ve,Ee){var ie,L,R=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=function(K){var _e,Te=4093624447;for(_e=0;_e<=31;_e++,Te>>>=1)if(1&Te&&K.dyn_ltree[2*_e]!==0)return r;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return o;for(_e=32;_e<u;_e++)if(K.dyn_ltree[2*_e]!==0)return o;return r}(j)),Tn(j,j.l_desc),Tn(j,j.d_desc),R=function(K){var _e;for(O(K,K.dyn_ltree,K.l_desc.max_code),O(K,K.dyn_dtree,K.d_desc.max_code),Tn(K,K.bl_desc),_e=m-1;3<=_e&&K.bl_tree[2*G[_e]+1]===0;_e--);return K.opt_len+=3*(_e+1)+5+5+4,_e}(j),ie=j.opt_len+3+7>>>3,(L=j.static_len+3+7>>>3)<=ie&&(ie=L)):ie=L=ve+5,ve+4<=ie&&te!==-1?Y(j,te,ve,Ee):j.strategy===4||L===ie?(Le(j,2+(Ee?1:0),3),Lt(j,k,P)):(Le(j,4+(Ee?1:0),3),function(K,_e,Te,ye){var st;for(Le(K,_e-257,5),Le(K,Te-1,5),Le(K,ye-4,4),st=0;st<ye;st++)Le(K,K.bl_tree[2*G[st]+1],3);Me(K,K.dyn_ltree,_e-1),Me(K,K.dyn_dtree,Te-1)}(j,j.l_desc.max_code+1,j.d_desc.max_code+1,R+1),Lt(j,j.dyn_ltree,j.dyn_dtree)),Ge(j),Ee&&Ve(j)},e._tr_tally=function(j,te,ve){return j.pending_buf[j.d_buf+2*j.last_lit]=te>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&te,j.pending_buf[j.l_buf+j.last_lit]=255&ve,j.last_lit++,te===0?j.dyn_ltree[2*ve]++:(j.matches++,te--,j.dyn_ltree[2*(S[ve]+u+1)]++,j.dyn_dtree[2*Q(te)]++),j.last_lit===j.lit_bufsize-1},e._tr_align=function(j){Le(j,2,3),Ne(j,x,k),function(te){te.bi_valid===16?(Ie(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)}(j)}},{"../utils/common":41}],53:[function(n,t,e){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,t,e){(function(i){(function(r,o){"use strict";if(!r.setImmediate){var s,a,l,u,f=1,h={},m=!1,p=r.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(r);b=b&&b.setTimeout?b:r,s={}.toString.call(r.process)==="[object process]"?function(T){process.nextTick(function(){y(T)})}:function(){if(r.postMessage&&!r.importScripts){var T=!0,E=r.onmessage;return r.onmessage=function(){T=!1},r.postMessage("","*"),r.onmessage=E,T}}()?(u="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",x,!1):r.attachEvent("onmessage",x),function(T){r.postMessage(u+T,"*")}):r.MessageChannel?((l=new MessageChannel).port1.onmessage=function(T){y(T.data)},function(T){l.port2.postMessage(T)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,function(T){var E=p.createElement("script");E.onreadystatechange=function(){y(T),E.onreadystatechange=null,a.removeChild(E),E=null},a.appendChild(E)}):function(T){setTimeout(y,0,T)},b.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var E=new Array(arguments.length-1),D=0;D<E.length;D++)E[D]=arguments[D+1];var V={callback:T,args:E};return h[f]=V,s(f),f++},b.clearImmediate=C}function C(T){delete h[T]}function y(T){if(m)setTimeout(y,0,T);else{var E=h[T];if(E){m=!0;try{(function(D){var V=D.callback,B=D.args;switch(B.length){case 0:V();break;case 1:V(B[0]);break;case 2:V(B[0],B[1]);break;case 3:V(B[0],B[1],B[2]);break;default:V.apply(o,B)}})(E)}finally{C(T),m=!1}}}}function x(T){T.source===r&&typeof T.data=="string"&&T.data.indexOf(u)===0&&y(+T.data.slice(u.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var zz=NC((PD,TD)=>{"use strict";(function(n,t){typeof define=="function"&&define.amd?define([],t):typeof PD<"u"?t():(t(),n.FileSaver={})})(PD,function(){"use strict";function n(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,l,u){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){s(f.response,l,u)},f.onerror=function(){console.error("could not download file")},f.send()}function e(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,u){var f=r.URL||r.webkitURL,h=document.createElement("a");l=l||a.name||"download",h.download=l,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?i(h):e(h.href)?t(a,l,u):i(h,h.target="_blank")):(h.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,u){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,u),l);else if(e(a))t(a,l,u);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){i(f)})}}:function(a,l,u,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return t(a,l,u);var h=a.type==="application/octet-stream",m=/constructor/i.test(r.HTMLElement)||r.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&m||o)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var x=b.result;x=p?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=x:location=x,f=null},b.readAsDataURL(a)}else{var C=r.URL||r.webkitURL,y=C.createObjectURL(a);f?f.location=y:location.href=y,f=null,setTimeout(function(){C.revokeObjectURL(y)},4e4)}});r.saveAs=s.saveAs=s,typeof TD<"u"&&(TD.exports=s)})});function GA(n,t){return Object.is(n,t)}var cr=null,Bg=!1,zg=1,Ja=Symbol("SIGNAL");function Wn(n){let t=cr;return cr=n,t}function $A(){return cr}var qh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function UC(n){if(Bg)throw new Error("");if(cr===null)return;cr.consumerOnSignalRead(n);let t=cr.nextProducerIndex++;if(Gg(cr),t<cr.producerNode.length&&cr.producerNode[t]!==n&&$h(cr)){let e=cr.producerNode[t];jg(e,cr.producerIndexOfThis[t])}cr.producerNode[t]!==n&&(cr.producerNode[t]=n,cr.producerIndexOfThis[t]=$h(cr)?ZA(n,cr,t):0),cr.producerLastReadVersion[t]=n.version}function Jj(){zg++}function qA(n){if(!($h(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===zg)){if(!n.producerMustRecompute(n)&&!BC(n)){n.dirty=!1,n.lastCleanEpoch=zg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=zg}}function YA(n){if(n.liveConsumerNode===void 0)return;let t=Bg;Bg=!0;try{for(let e of n.liveConsumerNode)e.dirty||Qj(e)}finally{Bg=t}}function XA(){return cr?.consumerAllowSignalWrites!==!1}function Qj(n){n.dirty=!0,YA(n),n.consumerMarkedDirty?.(n)}function Wg(n){return n&&(n.nextProducerIndex=0),Wn(n)}function VC(n,t){if(Wn(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if($h(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)jg(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function BC(n){Gg(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(qA(e),i!==e.version))return!0}return!1}function zC(n){if(Gg(n),$h(n))for(let t=0;t<n.producerNode.length;t++)jg(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ZA(n,t,e){if(KA(n),n.liveConsumerNode.length===0&&JA(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=ZA(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function jg(n,t){if(KA(n),n.liveConsumerNode.length===1&&JA(n))for(let i=0;i<n.producerNode.length;i++)jg(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Gg(r),r.producerIndexOfThis[i]=t}}function $h(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function JA(n){return n.producerNode!==void 0}function QA(n){let t=Object.create(eG);t.computation=n;let e=()=>{if(qA(t),UC(t),t.value===Hg)throw t.error;return t.value};return e[Ja]=t,e}var FC=Symbol("UNSET"),LC=Symbol("COMPUTING"),Hg=Symbol("ERRORED"),eG=$t(We({},qh),{value:FC,dirty:!0,error:null,equal:GA,producerMustRecompute(n){return n.value===FC||n.value===LC},producerRecomputeValue(n){if(n.value===LC)throw new Error("Detected cycle in computations.");let t=n.value;n.value=LC;let e=Wg(n),i;try{i=n.computation()}catch(r){i=Hg,n.error=r}finally{VC(n,e)}if(t!==FC&&t!==Hg&&i!==Hg&&n.equal(t,i)){n.value=t;return}n.value=i,n.version++}});function tG(){throw new Error}var eI=tG;function tI(){eI()}function nI(n){eI=n}var nG=null;function iI(n){let t=Object.create(oI);t.value=n;let e=()=>(UC(t),t.value);return e[Ja]=t,e}function HC(n,t){XA()||tI(),n.equal(n.value,t)||(n.value=t,iG(n))}function rI(n,t){XA()||tI(),HC(n,t(n.value))}var oI=$t(We({},qh),{equal:GA,value:void 0});function iG(n){n.version++,Jj(),YA(n),nG?.()}function Ut(n){return typeof n=="function"}function xd(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var $g=xd(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function eu(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Vi=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Ut(i))try{i()}catch(o){t=o instanceof $g?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{sI(o)}catch(s){t=t??[],s instanceof $g?t=[...t,...s.errors]:t.push(s)}}if(t)throw new $g(t)}}add(t){var e;if(t&&t!==this)if(this.closed)sI(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&eu(e,t)}remove(t){let{_finalizers:e}=this;e&&eu(e,t),t instanceof n&&t._removeParent(this)}};Vi.EMPTY=(()=>{let n=new Vi;return n.closed=!0,n})();var WC=Vi.EMPTY;function qg(n){return n instanceof Vi||n&&"closed"in n&&Ut(n.remove)&&Ut(n.add)&&Ut(n.unsubscribe)}function sI(n){Ut(n)?n():n.unsubscribe()}var Us={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bd={setTimeout(n,t,...e){let{delegate:i}=bd;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=bd;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Yg(n){bd.setTimeout(()=>{let{onUnhandledError:t}=Us;if(t)t(n);else throw n})}function Yh(){}var aI=jC("C",void 0,void 0);function lI(n){return jC("E",void 0,n)}function cI(n){return jC("N",n,void 0)}function jC(n,t,e){return{kind:n,value:t,error:e}}var tu=null;function Cd(n){if(Us.useDeprecatedSynchronousErrorHandling){let t=!tu;if(t&&(tu={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=tu;if(tu=null,e)throw i}}else n()}function uI(n){Us.useDeprecatedSynchronousErrorHandling&&tu&&(tu.errorThrown=!0,tu.error=n)}var nu=class extends Vi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,qg(t)&&t.add(this)):this.destination=sG}static create(t,e,i){return new Qa(t,e,i)}next(t){this.isStopped?$C(cI(t),this):this._next(t)}error(t){this.isStopped?$C(lI(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$C(aI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rG=Function.prototype.bind;function GC(n,t){return rG.call(n,t)}var qC=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Xg(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Xg(i)}else Xg(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Xg(e)}}},Qa=class extends nu{constructor(t,e,i){super();let r;if(Ut(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Us.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&GC(t.next,o),error:t.error&&GC(t.error,o),complete:t.complete&&GC(t.complete,o)}):r=t}this.destination=new qC(r)}};function Xg(n){Us.useDeprecatedSynchronousErrorHandling?uI(n):Yg(n)}function oG(n){throw n}function $C(n,t){let{onStoppedNotification:e}=Us;e&&bd.setTimeout(()=>e(n,t))}var sG={closed:!0,next:Yh,error:oG,complete:Yh};var Md=typeof Symbol=="function"&&Symbol.observable||"@@observable";function no(n){return n}function YC(...n){return XC(n)}function XC(n){return n.length===0?no:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Jt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=lG(e)?e:new Qa(e,i,r);return Cd(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=dI(i),new i((r,o)=>{let s=new Qa({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Md](){return this}pipe(...e){return XC(e)(this)}toPromise(e){return e=dI(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function dI(n){var t;return(t=n??Us.Promise)!==null&&t!==void 0?t:Promise}function aG(n){return n&&Ut(n.next)&&Ut(n.error)&&Ut(n.complete)}function lG(n){return n&&n instanceof nu||aG(n)&&qg(n)}function ZC(n){return Ut(n?.lift)}function fn(n){return t=>{if(ZC(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Cn(n,t,e,i,r){return new KC(n,t,e,i,r)}var KC=class extends nu{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function wd(){return fn((n,t)=>{let e=null;n._refCount++;let i=Cn(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Ed=class extends Jt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ZC(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Vi;let e=this.getSubject();t.add(this.source.subscribe(Cn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Vi.EMPTY)}return t}refCount(){return wd()(this)}};var fI=xd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var On=(()=>{class n extends Jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Zg(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new fI}next(e){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?WC:(this.currentObservers=null,o.push(e),new Vi(()=>{this.currentObservers=null,eu(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new Jt;return e.source=this,e}}return n.create=(t,e)=>new Zg(t,e),n})(),Zg=class extends On{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:WC}};var Ei=class extends On{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Xh={now(){return(Xh.delegate||Date).now()},delegate:void 0};var Zh=class extends On{constructor(t=1/0,e=1/0,i=Xh){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Kg=class extends Vi{constructor(t,e){super()}schedule(t,e=0){return this}};var Kh={setInterval(n,t,...e){let{delegate:i}=Kh;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Kh;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var Jg=class extends Kg{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return Kh.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Kh.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,eu(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Sd=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Sd.now=Xh.now;var Qg=class extends Sd{constructor(t,e=Sd.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var JC=new Qg(Jg),hI=JC;var io=new Jt(n=>n.complete());function e0(n){return n&&Ut(n.schedule)}function QC(n){return n[n.length-1]}function t0(n){return Ut(QC(n))?n.pop():void 0}function da(n){return e0(QC(n))?n.pop():void 0}function pI(n,t){return typeof QC(n)=="number"?n.pop():t}var Jh=function(){return Jh=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Jh.apply(this,arguments)};function gI(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,t||[])).next())})}function mI(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function iu(n){return this instanceof iu?(this.v=n,this):new iu(n)}function _I(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(p){return function(b){return Promise.resolve(b).then(p,h)}}function a(p,b){i[p]&&(r[p]=function(C){return new Promise(function(y,x){o.push([p,C,y,x])>1||l(p,C)})},b&&(r[p]=b(r[p])))}function l(p,b){try{u(i[p](b))}catch(C){m(o[0][3],C)}}function u(p){p.value instanceof iu?Promise.resolve(p.value.v).then(f,h):m(o[0][2],p)}function f(p){l("next",p)}function h(p){l("throw",p)}function m(p,b){p(b),o.shift(),o.length&&l(o[0][0],o[0][1])}}function vI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof mI=="function"?mI(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Pd=n=>n&&typeof n.length=="number"&&typeof n!="function";function n0(n){return Ut(n?.then)}function i0(n){return Ut(n[Md])}function r0(n){return Symbol.asyncIterator&&Ut(n?.[Symbol.asyncIterator])}function o0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var s0=cG();function a0(n){return Ut(n?.[s0])}function l0(n){return _I(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield iu(e.read());if(r)return yield iu(void 0);yield yield iu(i)}}finally{e.releaseLock()}})}function c0(n){return Ut(n?.getReader)}function pi(n){if(n instanceof Jt)return n;if(n!=null){if(i0(n))return uG(n);if(Pd(n))return dG(n);if(n0(n))return fG(n);if(r0(n))return yI(n);if(a0(n))return hG(n);if(c0(n))return pG(n)}throw o0(n)}function uG(n){return new Jt(t=>{let e=n[Md]();if(Ut(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dG(n){return new Jt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function fG(n){return new Jt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Yg)})}function hG(n){return new Jt(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function yI(n){return new Jt(t=>{mG(n,t).catch(e=>t.error(e))})}function pG(n){return yI(l0(n))}function mG(n,t){var e,i,r,o;return gI(this,void 0,void 0,function*(){try{for(e=vI(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function yo(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function u0(n,t=0){return fn((e,i)=>{e.subscribe(Cn(i,r=>yo(i,n,()=>i.next(r),t),()=>yo(i,n,()=>i.complete(),t),r=>yo(i,n,()=>i.error(r),t)))})}function d0(n,t=0){return fn((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function xI(n,t){return pi(n).pipe(d0(t),u0(t))}function bI(n,t){return pi(n).pipe(d0(t),u0(t))}function CI(n,t){return new Jt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function MI(n,t){return new Jt(e=>{let i;return yo(e,t,()=>{i=n[s0](),yo(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Ut(i?.return)&&i.return()})}function f0(n,t){if(!n)throw new Error("Iterable cannot be null");return new Jt(e=>{yo(e,t,()=>{let i=n[Symbol.asyncIterator]();yo(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function wI(n,t){return f0(l0(n),t)}function EI(n,t){if(n!=null){if(i0(n))return xI(n,t);if(Pd(n))return CI(n,t);if(n0(n))return bI(n,t);if(r0(n))return f0(n,t);if(a0(n))return MI(n,t);if(c0(n))return wI(n,t)}throw o0(n)}function ai(n,t){return t?EI(n,t):pi(n)}function Rt(...n){let t=da(n);return ai(n,t)}function In(n,t){let e=Ut(n)?n:()=>n,i=r=>r.error(e());return new Jt(t?r=>t.schedule(i,0,r):i)}function eM(n){return!!n&&(n instanceof Jt||Ut(n.lift)&&Ut(n.subscribe))}var el=xd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function SI(n){return n instanceof Date&&!isNaN(n)}function Tt(n,t){return fn((e,i)=>{let r=0;e.subscribe(Cn(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:gG}=Array;function _G(n,t){return gG(t)?n(...t):n(t)}function Td(n){return Tt(t=>_G(n,t))}var{isArray:vG}=Array,{getPrototypeOf:yG,prototype:xG,keys:bG}=Object;function h0(n){if(n.length===1){let t=n[0];if(vG(t))return{args:t,keys:null};if(CG(t)){let e=bG(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function CG(n){return n&&typeof n=="object"&&yG(n)===xG}function p0(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function ru(...n){let t=da(n),e=t0(n),{args:i,keys:r}=h0(n);if(i.length===0)return ai([],t);let o=new Jt(MG(i,t,r?s=>p0(r,s):no));return e?o.pipe(Td(e)):o}function MG(n,t,e=no){return i=>{PI(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)PI(t,()=>{let u=ai(n[l],t),f=!1;u.subscribe(Cn(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function PI(n,t,e){n?yo(e,n,t):t()}function TI(n,t,e,i,r,o,s,a){let l=[],u=0,f=0,h=!1,m=()=>{h&&!l.length&&!u&&t.complete()},p=C=>u<i?b(C):l.push(C),b=C=>{o&&t.next(C),u++;let y=!1;pi(e(C,f++)).subscribe(Cn(t,x=>{r?.(x),o?p(x):t.next(x)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<i;){let x=l.shift();s?yo(t,s,()=>b(x)):b(x)}m()}catch(x){t.error(x)}}))};return n.subscribe(Cn(t,p,()=>{h=!0,m()})),()=>{a?.()}}function mi(n,t,e=1/0){return Ut(t)?mi((i,r)=>Tt((o,s)=>t(i,o,r,s))(pi(n(i,r))),e):(typeof t=="number"&&(e=t),fn((i,r)=>TI(i,r,n,e)))}function fa(n=1/0){return mi(no,n)}function DI(){return fa(1)}function Dd(...n){return DI()(ai(n,da(n)))}function m0(n){return new Jt(t=>{pi(n()).subscribe(t)})}function tM(...n){let t=t0(n),{args:e,keys:i}=h0(n),r=new Jt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;pi(e[f]).subscribe(Cn(o,m=>{h||(h=!0,u--),a[f]=m},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?p0(i,a):a),o.complete())}))}});return t?r.pipe(Td(t)):r}var wG=["addListener","removeListener"],EG=["addEventListener","removeEventListener"],SG=["on","off"];function Xl(n,t,e,i){if(Ut(e)&&(i=e,e=void 0),i)return Xl(n,t,e).pipe(Td(i));let[r,o]=DG(n)?EG.map(s=>a=>n[s](t,a,e)):PG(n)?wG.map(OI(n,t)):TG(n)?SG.map(OI(n,t)):[];if(!r&&Pd(n))return mi(s=>Xl(s,t,e))(pi(n));if(!r)throw new TypeError("Invalid event target");return new Jt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function OI(n,t){return e=>i=>n[e](t,i)}function PG(n){return Ut(n.addListener)&&Ut(n.removeListener)}function TG(n){return Ut(n.on)&&Ut(n.off)}function DG(n){return Ut(n.addEventListener)&&Ut(n.removeEventListener)}function Qh(n=0,t,e=hI){let i=-1;return t!=null&&(e0(t)?e=t:i=t),new Jt(r=>{let o=SI(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function nM(n=0,t=JC){return n<0&&(n=0),Qh(n,n,t)}function ss(...n){let t=da(n),e=pI(n,1/0),i=n;return i.length?i.length===1?pi(i[0]):fa(e)(ai(i,t)):io}function gi(n,t){return fn((e,i)=>{let r=0;e.subscribe(Cn(i,o=>n.call(t,o,r++)&&i.next(o)))})}function _n(n){return fn((t,e)=>{let i=null,r=!1,o;i=t.subscribe(Cn(e,void 0,void 0,s=>{o=pi(n(s,_n(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function g0(n,t,e,i,r){return(o,s)=>{let a=e,l=t,u=0;o.subscribe(Cn(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function AI(n,t){return fn(g0(n,t,arguments.length>=2,!1,!0))}function tl(n,t){return Ut(t)?mi(n,t,1):mi(n,1)}function iM(n){return AI((t,e,i)=>!n||n(e,i)?t+1:t,0)}function Zl(n){return fn((t,e)=>{let i=!1;t.subscribe(Cn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Nr(n){return n<=0?()=>io:fn((t,e)=>{let i=0;t.subscribe(Cn(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function rM(n){return Tt(()=>n)}function oM(n,t=no){return n=n??OG,fn((e,i)=>{let r,o=!0;e.subscribe(Cn(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function OG(n,t){return n===t}function _0(n=AG){return fn((t,e)=>{let i=!1;t.subscribe(Cn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function AG(){return new el}function Kl(n){return fn((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Vs(n,t){let e=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):no,Nr(1),e?Zl(t):_0(()=>new el))}function Jl(n){return n<=0?()=>io:fn((t,e)=>{let i=[];t.subscribe(Cn(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function sM(n,t){let e=arguments.length>=2;return i=>i.pipe(n?gi((r,o)=>n(r,o,i)):no,Jl(1),e?Zl(t):_0(()=>new el))}function Od(){return fn((n,t)=>{let e,i=!1;n.subscribe(Cn(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function aM(n,t){return fn(g0(n,t,arguments.length>=2,!0))}function as(n={}){let{connector:t=()=>new On,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},p=()=>{m(),s=l=void 0,f=h=!1},b=()=>{let C=s;p(),C?.unsubscribe()};return fn((C,y)=>{u++,!h&&!f&&m();let x=l=l??t();y.add(()=>{u--,u===0&&!h&&!f&&(a=lM(b,r))}),x.subscribe(y),!s&&u>0&&(s=new Qa({next:T=>x.next(T),error:T=>{h=!0,m(),a=lM(p,e,T),x.error(T)},complete:()=>{f=!0,m(),a=lM(p,i),x.complete()}}),pi(C).subscribe(s))})(o)}}function lM(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Qa({next:()=>{i.unsubscribe(),n()}});return pi(t(...e)).subscribe(i)}function ou(...n){let t=da(n);return fn((e,i)=>{(t?Dd(n,e,t):Dd(n,e)).subscribe(i)})}function ur(n,t){return fn((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(Cn(i,l=>{r?.unsubscribe();let u=0,f=o++;pi(n(l,f)).subscribe(r=Cn(i,h=>i.next(t?t(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function cM(n,t){return Ut(t)?ur(()=>n,t):ur(()=>n)}function xo(n){return fn((t,e)=>{pi(n).subscribe(Cn(e,()=>e.complete(),Yh)),!e.closed&&t.subscribe(e)})}function _i(n,t,e){let i=Ut(n)||t||e?{next:n,error:t,complete:e}:n;return i?fn((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Cn(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):no}var w2="https://g.co/ng/security#xss",Ct=class extends Error{constructor(t,e){super(s_(t,e)),this.code=t}};function s_(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}function up(n){return{toString:n}.toString()}var v0="__parameters__";function IG(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function E2(n,t,e){return up(()=>{let i=IG(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(v0)?l[v0]:Object.defineProperty(l,v0,{value:[]})[v0];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var nl=globalThis;function vi(n){for(let t in n)if(n[t]===vi)return t;throw Error("Could not find renamed property on target object.")}function RG(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function oo(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(oo).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function II(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var NG=vi({__forward_ref__:vi});function yr(n){return n.__forward_ref__=yr,n.toString=function(){return oo(this())},n}function ro(n){return S2(n)?n():n}function S2(n){return typeof n=="function"&&n.hasOwnProperty(NG)&&n.__forward_ref__===yr}function Ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $i(n){return{providers:n.providers||[],imports:n.imports||[]}}function a_(n){return RI(n,T2)||RI(n,D2)}function P2(n){return a_(n)!==null}function RI(n,t){return n.hasOwnProperty(t)?n[t]:null}function kG(n){let t=n&&(n[T2]||n[D2]);return t||null}function NI(n){return n&&(n.hasOwnProperty(kI)||n.hasOwnProperty(FG))?n[kI]:null}var T2=vi({\u0275prov:vi}),kI=vi({\u0275inj:vi}),D2=vi({ngInjectableDef:vi}),FG=vi({ngInjectorDef:vi}),_t=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Ue({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function O2(n){return n&&!!n.\u0275providers}var LG=vi({\u0275cmp:vi}),UG=vi({\u0275dir:vi}),VG=vi({\u0275pipe:vi}),BG=vi({\u0275mod:vi}),R0=vi({\u0275fac:vi}),np=vi({__NG_ELEMENT_ID__:vi}),FI=vi({__NG_ENV_ID__:vi});function lu(n){return typeof n=="string"?n:n==null?"":String(n)}function zG(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():lu(n)}function HG(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new Ct(-200,n)}function Dw(n,t){throw new Ct(-201,!1)}var Sn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Sn||{}),SM;function A2(){return SM}function bo(n){let t=SM;return SM=n,t}function I2(n,t,e){let i=a_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Sn.Optional)return null;if(t!==void 0)return t;Dw(n,"Injector")}var WG={},ip=WG,PM="__NG_DI_FLAG__",N0="ngTempTokenPath",jG="ngTokenPath",GG=/\n/gm,$G="\u0275",LI="__source",kd;function qG(){return kd}function Ql(n){let t=kd;return kd=n,t}function YG(n,t=Sn.Default){if(kd===void 0)throw new Ct(-203,!1);return kd===null?I2(n,void 0,t):kd.get(n,t&Sn.Optional?null:void 0,t)}function qe(n,t=Sn.Default){return(A2()||YG)(ro(n),t)}function ze(n,t=Sn.Default){return qe(n,l_(t))}function l_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function TM(n){let t=[];for(let e=0;e<n.length;e++){let i=ro(n[e]);if(Array.isArray(i)){if(i.length===0)throw new Ct(900,!1);let r,o=Sn.Default;for(let s=0;s<i.length;s++){let a=i[s],l=XG(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(qe(r,o))}else t.push(qe(i))}return t}function R2(n,t){return n[PM]=t,n.prototype[PM]=t,n}function XG(n){return n[PM]}function ZG(n,t,e,i){let r=n[N0];throw t[LI]&&r.unshift(t[LI]),n.message=KG(`
`+n.message,r,e,i),n[jG]=r,n[N0]=null,n}function KG(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==$G?n.slice(2):n;let r=oo(t);if(Array.isArray(t))r=t.map(oo).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):oo(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(GG,`
  `)}`}var dp=R2(E2("Optional"),8);var c_=R2(E2("SkipSelf"),4);function cu(n,t){let e=n.hasOwnProperty(R0);return e?n[R0]:null}function JG(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function QG(n){return n.flat(Number.POSITIVE_INFINITY)}function Ow(n,t){n.forEach(e=>Array.isArray(e)?Ow(e,t):t(e))}function N2(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function k0(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function e7(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function t7(n,t,e){let i=fp(n,t);return i>=0?n[i|1]=e:(i=~i,e7(n,i,t,e)),i}function uM(n,t){let e=fp(n,t);if(e>=0)return n[e|1]}function fp(n,t){return n7(n,t,1)}function n7(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Ld={},Uo=[],uu=new _t(""),k2=new _t("",-1),F2=new _t(""),F0=class{get(t,e=ip){if(e===ip){let i=new Error(`NullInjectorError: No provider for ${oo(t)}!`);throw i.name="NullInjectorError",i}return e}},L2=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(L2||{}),ma=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ma||{}),tc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(tc||{});function i7(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function DM(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];r7(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function U2(n){return n===3||n===4||n===6}function r7(n){return n.charCodeAt(0)===64}function rp(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?UI(n,e,r,null,t[++i]):UI(n,e,r,null,null))}}return n}function UI(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var V2="ng-template";function o7(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&i7(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Aw(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function Aw(n){return n.type===4&&n.value!==V2}function s7(n,t,e){let i=n.type===4&&!e?V2:n.value;return t===i}function a7(n,t,e){let i=4,r=n.attrs,o=r!==null?u7(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Bs(i)&&!Bs(l))return!1;if(s&&Bs(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!s7(n,l,e)||l===""&&t.length===1){if(Bs(i))return!1;s=!0}}else if(i&8){if(r===null||!o7(n,r,l,e)){if(Bs(i))return!1;s=!0}}else{let u=t[++a],f=l7(l,r,Aw(n),e);if(f===-1){if(Bs(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(Bs(i))return!1;s=!0}}}}return Bs(i)||s}function Bs(n){return(n&1)===0}function l7(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return d7(t,n)}function c7(n,t,e=!1){for(let i=0;i<t.length;i++)if(a7(n,t[i],e))return!0;return!1}function u7(n){for(let t=0;t<n.length;t++){let e=n[t];if(U2(e))return t}return n.length}function d7(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function VI(n,t){return n?":not("+t.trim()+")":t}function f7(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Bs(s)&&(t+=VI(o,r),r=""),i=s,o=o||!Bs(i);e++}return r!==""&&(t+=VI(o,r)),t}function h7(n){return n.map(f7).join(",")}function p7(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!Bs(r))break;r=o}i++}return{attrs:t,classes:e}}function $e(n){return up(()=>{let t=j2(n),e=$t(We({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===L2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ma.Emulated,styles:n.styles||Uo,_:null,schemas:n.schemas||null,tView:null,id:""});G2(e);let i=n.dependencies;return e.directiveDefs=zI(i,!1),e.pipeDefs=zI(i,!0),e.id=_7(e),e})}function m7(n){return nc(n)||B2(n)}function g7(n){return n!==null}function qi(n){return up(()=>({type:n.type,bootstrap:n.bootstrap||Uo,declarations:n.declarations||Uo,imports:n.imports||Uo,exports:n.exports||Uo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function BI(n,t){if(n==null)return Ld;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=tc.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==tc.None?[i,a]:i,t[o]=s):e[o]=i}return e}function en(n){return up(()=>{let t=j2(n);return G2(t),t})}function ac(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function nc(n){return n[LG]||null}function B2(n){return n[UG]||null}function z2(n){return n[VG]||null}function H2(n){let t=nc(n)||B2(n)||z2(n);return t!==null?t.standalone:!1}function W2(n,t){let e=n[BG]||null;if(!e&&t===!0)throw new Error(`Type ${oo(n)} does not have '\u0275mod' property.`);return e}function j2(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Ld,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Uo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:BI(n.inputs,t),outputs:BI(n.outputs),debugInfo:null}}function G2(n){n.features?.forEach(t=>t(n))}function zI(n,t){if(!n)return null;let e=t?z2:m7;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(g7)}function _7(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function lc(n){return{\u0275providers:n}}function Iw(...n){return{\u0275providers:$2(!0,n),\u0275fromNgModule:!0}}function $2(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return Ow(t,s=>{let a=s;OM(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&q2(r,o),e}function q2(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Rw(r,o=>{t(o,i)})}}function OM(n,t,e,i){if(n=ro(n),!n)return!1;let r=null,o=NI(n),s=!o&&nc(n);if(!o&&!s){let l=n.ngModule;if(o=NI(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)OM(u,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Ow(o.imports,f=>{OM(f,t,e,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&q2(u,t)}if(!a){let u=cu(r)||(()=>new r);t({provide:r,useFactory:u,deps:Uo},r),t({provide:F2,useValue:r,multi:!0},r),t({provide:uu,useValue:()=>qe(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;Rw(l,f=>{t(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function Rw(n,t){for(let e of n)O2(e)&&(e=e.\u0275providers),Array.isArray(e)?Rw(e,t):t(e)}var v7=vi({provide:String,useValue:vi});function Y2(n){return n!==null&&typeof n=="object"&&v7 in n}function y7(n){return!!(n&&n.useExisting)}function x7(n){return!!(n&&n.useFactory)}function Ud(n){return typeof n=="function"}function b7(n){return!!n.useClass}var u_=new _t(""),P0={},C7={},dM;function Nw(){return dM===void 0&&(dM=new F0),dM}var so=class{},op=class extends so{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,IM(t,s=>this.processProvider(s)),this.records.set(k2,Ad(void 0,this)),r.has("environment")&&this.records.set(so,Ad(void 0,this));let o=this.records.get(u_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(F2,Uo,Sn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Wn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Wn(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Ql(this),i=bo(void 0),r;try{return t()}finally{Ql(e),bo(i)}}get(t,e=ip,i=Sn.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(FI))return t[FI](this);i=l_(i);let r,o=Ql(this),s=bo(void 0);try{if(!(i&Sn.SkipSelf)){let l=this.records.get(t);if(l===void 0){let u=P7(t)&&a_(t);u&&this.injectableDefInScope(u)?l=Ad(AM(t),P0):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Sn.Self?Nw():this.parent;return e=i&Sn.Optional&&e===ip?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[N0]=a[N0]||[]).unshift(oo(t)),o)throw a;return ZG(a,t,"R3InjectorError",this.source)}else throw a}finally{bo(s),Ql(o)}}resolveInjectorInitializers(){let t=Wn(null),e=Ql(this),i=bo(void 0),r;try{let o=this.get(uu,Uo,Sn.Self);for(let s of o)s()}finally{Ql(e),bo(i),Wn(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(oo(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ct(205,!1)}processProvider(t){t=ro(t);let e=Ud(t)?t:ro(t&&t.provide),i=w7(t);if(!Ud(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Ad(void 0,P0,!0),r.factory=()=>TM(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=Wn(null);try{return e.value===P0&&(e.value=C7,e.value=e.factory()),typeof e.value=="object"&&e.value&&S7(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Wn(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=ro(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function AM(n){let t=a_(n),e=t!==null?t.factory:cu(n);if(e!==null)return e;if(n instanceof _t)throw new Ct(204,!1);if(n instanceof Function)return M7(n);throw new Ct(204,!1)}function M7(n){if(n.length>0)throw new Ct(204,!1);let e=kG(n);return e!==null?()=>e.factory(n):()=>new n}function w7(n){if(Y2(n))return Ad(void 0,n.useValue);{let t=X2(n);return Ad(t,P0)}}function X2(n,t,e){let i;if(Ud(n)){let r=ro(n);return cu(r)||AM(r)}else if(Y2(n))i=()=>ro(n.useValue);else if(x7(n))i=()=>n.useFactory(...TM(n.deps||[]));else if(y7(n))i=()=>qe(ro(n.useExisting));else{let r=ro(n&&(n.useClass||n.provide));if(E7(n))i=()=>new r(...TM(n.deps));else return cu(r)||AM(r)}return i}function Ad(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function E7(n){return!!n.deps}function S7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function P7(n){return typeof n=="function"||typeof n=="object"&&n instanceof _t}function IM(n,t){for(let e of n)Array.isArray(e)?IM(e,t):e&&O2(e)?IM(e.\u0275providers,t):t(e)}function us(n,t){n instanceof op&&n.assertNotDestroyed();let e,i=Ql(n),r=bo(void 0);try{return t()}finally{Ql(i),bo(r)}}function Z2(){return A2()!==void 0||qG()!=null}function T7(n){if(!Z2())throw new Ct(-203,!1)}function D7(n){return typeof n=="function"}var Vo=0,un=1,Qt=2,Pr=3,zs=4,$s=5,ga=6,L0=7,Ws=8,Vd=9,_a=10,Si=11,sp=12,HI=13,qd=14,cs=15,du=16,Id=17,il=18,d_=19,K2=20,ec=21,fM=22,ls=23,Ji=25,J2=1,ap=6,rl=7,U0=8,Bd=9,Co=10,V0=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(V0||{});function Hs(n){return Array.isArray(n)&&typeof n[J2]=="object"}function ya(n){return Array.isArray(n)&&n[J2]===!0}function kw(n){return(n.flags&4)!==0}function hp(n){return n.componentOffset>-1}function f_(n){return(n.flags&1)===1}function ic(n){return!!n.template}function B0(n){return(n[Qt]&512)!==0}var RM=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function Q2(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function xr(){return eR}function eR(n){return n.type.prototype.ngOnChanges&&(n.setInput=A7),O7}xr.ngInherit=!0;function O7(){let n=nR(this),t=n?.current;if(t){let e=n.previous;if(e===Ld)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function A7(n,t,e,i,r){let o=this.declaredInputs[i],s=nR(n)||I7(n,{previous:Ld,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new RM(u&&u.currentValue,e,l===Ld),Q2(n,t,r,e)}var tR="__ngSimpleChanges__";function nR(n){return n[tR]||null}function I7(n,t){return n[tR]=t}var WI=null;var ha=function(n,t,e){WI?.(n,t,e)},R7="svg",N7="math";function js(n){for(;Array.isArray(n);)n=n[Vo];return n}function iR(n,t){return js(t[n])}function Bo(n,t){return js(t[n.index])}function rR(n,t){return n.data[t]}function h_(n,t){return n[t]}function cc(n,t){let e=t[n];return Hs(e)?e:e[Vo]}function k7(n){return(n[Qt]&4)===4}function Fw(n){return(n[Qt]&128)===128}function F7(n){return ya(n[Pr])}function zd(n,t){return t==null?null:n[t]}function oR(n){n[Id]=0}function sR(n){n[Qt]&1024||(n[Qt]|=1024,Fw(n)&&m_(n))}function L7(n,t){for(;n>0;)t=t[qd],n--;return t}function p_(n){return!!(n[Qt]&9216||n[ls]?.dirty)}function NM(n){n[_a].changeDetectionScheduler?.notify(8),n[Qt]&64&&(n[Qt]|=1024),p_(n)&&m_(n)}function m_(n){n[_a].changeDetectionScheduler?.notify(0);let t=fu(n);for(;t!==null&&!(t[Qt]&8192||(t[Qt]|=8192,!Fw(t)));)t=fu(t)}function aR(n,t){if((n[Qt]&256)===256)throw new Ct(911,!1);n[ec]===null&&(n[ec]=[]),n[ec].push(t)}function U7(n,t){if(n[ec]===null)return;let e=n[ec].indexOf(t);e!==-1&&n[ec].splice(e,1)}function fu(n){let t=n[Pr];return ya(t)?t[Pr]:t}var vn={lFrame:_R(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var lR=!1;function V7(){return vn.lFrame.elementDepthCount}function B7(){vn.lFrame.elementDepthCount++}function z7(){vn.lFrame.elementDepthCount--}function cR(){return vn.bindingsEnabled}function pp(){return vn.skipHydrationRootTNode!==null}function H7(n){return vn.skipHydrationRootTNode===n}function W7(n){vn.skipHydrationRootTNode=n}function j7(){vn.skipHydrationRootTNode=null}function sn(){return vn.lFrame.lView}function dr(){return vn.lFrame.tView}function Oe(n){return vn.lFrame.contextLView=n,n[Ws]}function Ae(n){return vn.lFrame.contextLView=null,n}function Tr(){let n=uR();for(;n!==null&&n.type===64;)n=n.parent;return n}function uR(){return vn.lFrame.currentTNode}function G7(){let n=vn.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function yu(n,t){let e=vn.lFrame;e.currentTNode=n,e.isParent=t}function Lw(){return vn.lFrame.isParent}function dR(){vn.lFrame.isParent=!1}function $7(){return vn.lFrame.contextLView}function fR(){return lR}function jI(n){lR=n}function ds(){let n=vn.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function q7(){return vn.lFrame.bindingIndex}function Y7(n){return vn.lFrame.bindingIndex=n}function g_(){return vn.lFrame.bindingIndex++}function hR(n){let t=vn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function X7(){return vn.lFrame.inI18n}function Z7(n,t){let e=vn.lFrame;e.bindingIndex=e.bindingRootIndex=n,kM(t)}function K7(){return vn.lFrame.currentDirectiveIndex}function kM(n){vn.lFrame.currentDirectiveIndex=n}function J7(n){let t=vn.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function pR(){return vn.lFrame.currentQueryIndex}function Uw(n){vn.lFrame.currentQueryIndex=n}function Q7(n){let t=n[un];return t.type===2?t.declTNode:t.type===1?n[$s]:null}function mR(n,t,e){if(e&Sn.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&Sn.Host);)if(r=Q7(o),r===null||(o=o[qd],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=vn.lFrame=gR();return i.currentTNode=t,i.lView=n,!0}function Vw(n){let t=gR(),e=n[un];vn.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function gR(){let n=vn.lFrame,t=n===null?null:n.child;return t===null?_R(n):t}function _R(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function vR(){let n=vn.lFrame;return vn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var yR=vR;function Bw(){let n=vR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function e9(n){return(vn.lFrame.contextLView=L7(n,vn.lFrame.contextLView))[Ws]}function xu(){return vn.lFrame.selectedIndex}function hu(n){vn.lFrame.selectedIndex=n}function __(){let n=vn.lFrame;return rR(n.tView,n.selectedIndex)}function xR(){return vn.lFrame.currentNamespace}var bR=!0;function v_(){return bR}function uc(n){bR=n}function t9(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=eR(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function y_(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),u&&((n.viewHooks??=[]).push(e,u),(n.viewCheckHooks??=[]).push(e,u)),f!=null&&(n.destroyHooks??=[]).push(e,f)}}function T0(n,t,e){CR(n,t,3,e)}function D0(n,t,e,i){(n[Qt]&3)===e&&CR(n,t,e,i)}function hM(n,t){let e=n[Qt];(e&3)===t&&(e&=16383,e+=1,n[Qt]=e)}function CR(n,t,e,i){let r=i!==void 0?n[Id]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Id]+=65536),(a<o||o==-1)&&(n9(n,e,t,l),n[Id]=(n[Id]&4294901760)+l+2),l++}function GI(n,t){ha(4,n,t);let e=Wn(null);try{t.call(n)}finally{Wn(e),ha(5,n,t)}}function n9(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[Qt]>>14<n[Id]>>16&&(n[Qt]&3)===t&&(n[Qt]+=16384,GI(a,o)):GI(a,o)}var Fd=-1,pu=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function i9(n){return n instanceof pu}function r9(n){return(n.flags&8)!==0}function o9(n){return(n.flags&16)!==0}var pM={},FM=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=l_(i);let r=this.injector.get(t,pM,i);return r!==pM||e===pM?r:this.parentInjector.get(t,e,i)}};function MR(n){return n!==Fd}function z0(n){return n&32767}function s9(n){return n>>16}function H0(n,t){let e=s9(n),i=t;for(;e>0;)i=i[qd],e--;return i}var LM=!0;function W0(n){let t=LM;return LM=n,t}var a9=256,wR=a9-1,ER=5,l9=0,pa={};function c9(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(np)&&(i=e[np]),i==null&&(i=e[np]=l9++);let r=i&wR,o=1<<r;t.data[n+(r>>ER)]|=o}function j0(n,t){let e=SR(n,t);if(e!==-1)return e;let i=t[un];i.firstCreatePass&&(n.injectorIndex=t.length,mM(i.data,n),mM(t,null),mM(i.blueprint,null));let r=zw(n,t),o=n.injectorIndex;if(MR(r)){let s=z0(r),a=H0(r,t),l=a[un].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function mM(n,t){n.push(0,0,0,0,0,0,0,0,t)}function SR(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function zw(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=AR(r),i===null)return Fd;if(e++,r=r[qd],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Fd}function UM(n,t,e){c9(n,t,e)}function u9(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(U2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function PR(n,t,e){if(e&Sn.Optional||n!==void 0)return n;Dw(t,"NodeInjector")}function TR(n,t,e,i){if(e&Sn.Optional&&i===void 0&&(i=null),!(e&(Sn.Self|Sn.Host))){let r=n[Vd],o=bo(void 0);try{return r?r.get(t,i,e&Sn.Optional):I2(t,i,e&Sn.Optional)}finally{bo(o)}}return PR(i,t,e)}function DR(n,t,e,i=Sn.Default,r){if(n!==null){if(t[Qt]&2048&&!(i&Sn.Self)){let s=p9(n,t,e,i,pa);if(s!==pa)return s}let o=OR(n,t,e,i,pa);if(o!==pa)return o}return TR(t,e,i,r)}function OR(n,t,e,i,r){let o=f9(e);if(typeof o=="function"){if(!mR(t,n,i))return i&Sn.Host?PR(r,e,i):TR(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Sn.Optional))Dw(e);else return s}finally{yR()}}else if(typeof o=="number"){let s=null,a=SR(n,t),l=Fd,u=i&Sn.Host?t[cs][$s]:null;for((a===-1||i&Sn.SkipSelf)&&(l=a===-1?zw(n,t):t[a+8],l===Fd||!qI(i,!1)?a=-1:(s=t[un],a=z0(l),t=H0(l,t)));a!==-1;){let f=t[un];if($I(o,a,f.data)){let h=d9(a,t,e,s,i,u);if(h!==pa)return h}l=t[a+8],l!==Fd&&qI(i,t[un].data[a+8]===u)&&$I(o,a,t)?(s=f,a=z0(l),t=H0(l,t)):a=-1}}return r}function d9(n,t,e,i,r,o){let s=t[un],a=s.data[n+8],l=i==null?hp(a)&&LM:i!=s&&(a.type&3)!==0,u=r&Sn.Host&&o===a,f=O0(a,s,e,l,u);return f!==null?mu(t,s,f,a):pa}function O0(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,m=r?a+f:u;for(let p=h;p<m;p++){let b=s[p];if(p<l&&e===b||p>=l&&b.type===e)return p}if(r){let p=s[l];if(p&&ic(p)&&p.type===e)return l}return null}function mu(n,t,e,i){let r=n[e],o=t.data;if(i9(r)){let s=r;s.resolving&&HG(zG(o[e]));let a=W0(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?bo(s.injectImpl):null,f=mR(n,i,Sn.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&t9(e,o[e],t)}finally{u!==null&&bo(u),W0(a),s.resolving=!1,yR()}}return r}function f9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(np)?n[np]:void 0;return typeof t=="number"?t>=0?t&wR:h9:t}function $I(n,t,e){let i=1<<n;return!!(e[t+(n>>ER)]&i)}function qI(n,t){return!(n&Sn.Self)&&!(n&Sn.Host&&t)}var au=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return DR(this._tNode,this._lView,t,l_(i),e)}};function h9(){return new au(Tr(),sn())}function kr(n){return up(()=>{let t=n.prototype.constructor,e=t[R0]||VM(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[R0]||VM(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function VM(n){return S2(n)?()=>{let t=VM(ro(n));return t&&t()}:cu(n)}function p9(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Qt]&2048&&!(s[Qt]&512);){let a=OR(o,s,e,i|Sn.Self,pa);if(a!==pa)return a;let l=o.parent;if(!l){let u=s[K2];if(u){let f=u.get(e,pa,i);if(f!==pa)return f}l=AR(s),s=s[qd]}o=l}return r}function AR(n){let t=n[un],e=t.type;return e===2?t.declTNode:e===1?n[$s]:null}function Hw(n){return u9(Tr(),n)}function YI(n,t=null,e=null,i){let r=IR(n,t,e,i);return r.resolveInjectorInitializers(),r}function IR(n,t=null,e=null,i,r=new Set){let o=[e||Uo,Iw(n)];return i=i||(typeof n=="object"?void 0:oo(n)),new op(o,t||Nw(),i||null,r)}var Mo=class n{static{this.THROW_IF_NOT_FOUND=ip}static{this.NULL=new F0}static create(t,e){if(Array.isArray(t))return YI({name:""},e,t,"");{let i=t.name??"";return YI({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ue({token:n,providedIn:"any",factory:()=>qe(k2)})}static{this.__NG_ELEMENT_ID__=-1}};var m9=new _t("");m9.__NG_ELEMENT_ID__=n=>{let t=Tr();if(t===null)throw new Ct(204,!1);if(t.type&2)return t.value;if(n&Sn.Optional)return null;throw new Ct(204,!1)};var g9="ngOriginalError";function gM(n){return n[g9]}var RR=!0,Ww=(()=>{class n{static{this.__NG_ELEMENT_ID__=_9}static{this.__NG_ENV_ID__=e=>e}}return n})(),BM=class extends Ww{constructor(t){super(),this._lView=t}onDestroy(t){return aR(this._lView,t),()=>U7(this._lView,t)}};function _9(){return new BM(sn())}var sl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ei(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();var zM=class extends On{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,Z2()&&(this.destroyRef=ze(Ww,{optional:!0})??void 0,this.pendingTasks=ze(sl,{optional:!0})??void 0)}emit(t){let e=Wn(null);try{super.next(t)}finally{Wn(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof Vi&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(e),i!==void 0&&this.pendingTasks?.remove(i)})}}},yt=zM;function G0(...n){}function NR(n){let t,e;function i(){n=G0;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function XI(n){return queueMicrotask(()=>n()),()=>{n=G0}}var jw="isAngularZone",$0=jw+"_ID",v9=0,jn=class n{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=RR}=t;if(typeof Zone>"u")throw new Ct(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,b9(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ct(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ct(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,y9,G0,G0);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},y9={};function Gw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function x9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){NR(()=>{n.callbackScheduled=!1,HM(n),n.isCheckStableRunning=!0,Gw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),HM(n)}function b9(n){let t=()=>{x9(n)},e=v9++;n._inner=n._inner.fork({name:"angular",properties:{[jw]:!0,[$0]:e,[$0+e]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(C9(l))return i.invokeTask(o,s,a,l);try{return ZI(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),KI(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return ZI(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!M9(l)&&t(),KI(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,HM(n),Gw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function HM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KI(n){n._nesting--,Gw(n)}var WM=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function C9(n){return kR(n,"__ignore_ng_zone__")}function M9(n){return kR(n,"__scheduler_tick__")}function kR(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var ol=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&gM(t);for(;e&&gM(e);)e=gM(e);return e||null}},w9=new _t("",{providedIn:"root",factory:()=>{let n=ze(jn),t=ze(ol);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function E9(){return Yd(Tr(),sn())}function Yd(n,t){return new li(Bo(n,t))}var li=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=E9}}return n})();function S9(n){return n instanceof li?n.nativeElement:n}function P9(){return this._results[Symbol.iterator]()}var jM=class n{get changes(){return this._changes??=new yt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=P9)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=QG(t);(this._changesDetected=!JG(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},T9="ngSkipHydration",D9="ngskiphydration";function FR(n){let t=n.mergedAttrs;if(t===null)return!1;for(let e=0;e<t.length;e+=2){let i=t[e];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===D9)return!0}return!1}function LR(n){return n.hasAttribute(T9)}function q0(n){return(n.flags&128)===128}function O9(n){if(q0(n))return!0;let t=n.parent;for(;t;){if(q0(n)||FR(t))return!0;t=t.parent}return!1}var UR=new Map,A9=0;function I9(){return A9++}function R9(n){UR.set(n[d_],n)}function GM(n){UR.delete(n[d_])}var JI="__ngContext__";function rc(n,t){Hs(t)?(n[JI]=t[d_],R9(t)):n[JI]=t}function VR(n){return zR(n[sp])}function BR(n){return zR(n[zs])}function zR(n){for(;n!==null&&!ya(n);)n=n[zs];return n}var $M;function HR(n){$M=n}function mp(){if($M!==void 0)return $M;if(typeof document<"u")return document;throw new Ct(210,!1)}var x_=new _t("",{providedIn:"root",factory:()=>N9}),N9="ng",$w=new _t(""),Fr=new _t("",{providedIn:"platform",factory:()=>"unknown"});var qw=new _t("",{providedIn:"root",factory:()=>mp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function k9(){let n=new Xd;return ze(Fr)==="browser"&&(n.store=F9(mp(),ze(x_))),n}var Xd=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:k9})}get(e,i){return this.store[e]!==void 0?this.store[e]:i}set(e,i){this.store[e]=i}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(e,i){this.onSerializeCallbacks[e]=i}toJson(){for(let e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function F9(n,t){let e=n.getElementById(t+"-state");if(e?.textContent)try{return JSON.parse(e.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var WR="h",jR="b",qM=function(n){return n.FirstChild="f",n.NextSibling="n",n}(qM||{}),L9="e",U9="t",Yw="c",GR="x",Y0="r",V9="i",B9="n",$R="d";var z9="__nghData__",qR=z9,_M="ngh",H9="nghm",YR=()=>null;function W9(n,t,e=!1){let i=n.getAttribute(_M);if(i==null)return null;let[r,o]=i.split("|");if(i=e?o:r,!i)return null;let s=o?`|${o}`:"",a=e?r:s,l={};if(i!==""){let f=t.get(Xd,null,{optional:!0});f!==null&&(l=f.get(qR,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return e&&(u.firstChild=n,b_(u,0,n.nextSibling)),a?n.setAttribute(_M,a):n.removeAttribute(_M),u}function j9(){YR=W9}function Xw(n,t,e=!1){return YR(n,t,e)}function G9(n){let t=n._lView;return t[un].type===2?null:(B0(t)&&(t=t[Ji]),t)}function $9(n){return n.textContent?.replace(/\s/gm,"")}function q9(n){let t=mp(),e=t.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=$9(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=e.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function b_(n,t,e){n.segmentHeads??={},n.segmentHeads[t]=e}function YM(n,t){return n.segmentHeads?.[t]??null}function Y9(n,t){let e=n.data,i=e[L9]?.[t]??null;return i===null&&e[Yw]?.[t]&&(i=Zw(n,t)),i}function XR(n,t){return n.data[Yw]?.[t]??null}function Zw(n,t){let e=XR(n,t)??[],i=0;for(let r of e)i+=r[Y0]*(r[GR]??1);return i}function X9(n){if(typeof n.disconnectedNodes>"u"){let t=n.data[$R];n.disconnectedNodes=t?new Set(t):null}return n.disconnectedNodes}function gp(n,t){if(typeof n.disconnectedNodes>"u"){let e=n.data[$R];n.disconnectedNodes=e?new Set(e):null}return!!X9(n)?.has(t)}var y0=new _t(""),ZR=!1,KR=new _t("",{providedIn:"root",factory:()=>ZR});var x0;function Z9(){if(x0===void 0&&(x0=null,nl.trustedTypes))try{x0=nl.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return x0}function C_(n){return Z9()?.createHTML(n)||n}var b0;function JR(){if(b0===void 0&&(b0=null,nl.trustedTypes))try{b0=nl.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return b0}function QI(n){return JR()?.createHTML(n)||n}function e2(n){return JR()?.createScriptURL(n)||n}var X0=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${w2})`}};function Zd(n){return n instanceof X0?n.changingThisBreaksApplicationSecurity:n}function M_(n,t){let e=K9(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${w2})`)}return e===t}function K9(n){return n instanceof X0&&n.getTypeName()||null}function J9(n){let t=new ZM(n);return Q9()?new XM(t):t}var XM=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(C_(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},ZM=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=C_(t),e}};function Q9(){try{return!!new window.DOMParser().parseFromString(C_(""),"text/html")}catch{return!1}}var e$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Kw(n){return n=String(n),n.match(e$)?n:"unsafe:"+n}function al(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function _p(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var QR=al("area,br,col,hr,img,wbr"),eN=al("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tN=al("rp,rt"),t$=_p(tN,eN),n$=_p(eN,al("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),i$=_p(tN,al("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),t2=_p(QR,n$,i$,t$),nN=al("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),r$=al("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),o$=al("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),s$=_p(nN,r$,o$),a$=al("script,style,template"),KM=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=u$(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=c$(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=n2(t).toLowerCase();if(!t2.hasOwnProperty(e))return this.sanitizedSomething=!0,!a$.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!s$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;nN[a]&&(l=Kw(l)),this.buf.push(" ",s,'="',i2(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=n2(t).toLowerCase();t2.hasOwnProperty(e)&&!QR.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(i2(t))}};function l$(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function c$(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw iN(t);return t}function u$(n){let t=n.firstChild;if(t&&l$(n,t))throw iN(t);return t}function n2(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function iN(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var d$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f$=/([^\#-~ |!])/g;function i2(n){return n.replace(/&/g,"&amp;").replace(d$,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(f$,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var C0;function rN(n,t){let e=null;try{C0=C0||J9(n);let i=t?String(t):"";e=C0.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=C0.getInertBodyElement(i)}while(i!==o);let a=new KM().sanitizeChildren(r2(e)||e);return C_(a)}finally{if(e){let i=r2(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function r2(n){return"content"in n&&h$(n)?n.content:null}function h$(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var vp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(vp||{});function w_(n){let t=Jw();return t?QI(t.sanitize(vp.HTML,n)||""):M_(n,"HTML")?QI(Zd(n)):rN(mp(),lu(n))}function Kd(n){let t=Jw();return t?t.sanitize(vp.URL,n)||"":M_(n,"URL")?Zd(n):Kw(lu(n))}function p$(n){let t=Jw();if(t)return e2(t.sanitize(vp.RESOURCE_URL,n)||"");if(M_(n,"ResourceURL"))return e2(Zd(n));throw new Ct(904,!1)}function m$(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?p$:Kd}function oN(n,t,e){return m$(t,e)(n)}function Jw(){let n=sn();return n&&n[_a].sanitizer}var g$=/^>|^->|<!--|-->|--!>|<!-$/g,_$=/(<|>)/g,v$="\u200B$1\u200B";function y$(n){return n.replace(g$,t=>t.replace(_$,v$))}function x$(n){return n.ownerDocument.body}function sN(n){return n instanceof Function?n():n}function ep(n){return(n??ze(Mo)).get(Fr)==="browser"}var va=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(va||{}),b$;function Qw(n,t){return b$(n,t)}function Rd(n,t,e,i,r){if(i!=null){let o,s=!1;ya(i)?o=i:Hs(i)&&(s=!0,i=i[Vo]);let a=js(i);n===0&&e!==null?r==null?fN(t,e,a):Z0(t,e,a,r||null,!0):n===1&&e!==null?Z0(t,e,a,r||null,!0):n===2?n1(t,a,s):n===3&&t.destroyNode(a),o!=null&&F$(t,n,o,e,r)}}function aN(n,t){return n.createText(t)}function C$(n,t,e){n.setValue(t,e)}function lN(n,t){return n.createComment(y$(t))}function e1(n,t,e){return n.createElement(t,e)}function M$(n,t){cN(n,t),t[Vo]=null,t[$s]=null}function w$(n,t,e,i,r,o){i[Vo]=r,i[$s]=t,S_(n,i,e,1,r,o)}function cN(n,t){t[_a].changeDetectionScheduler?.notify(9),S_(n,t,t[Si],2,null,null)}function E$(n){let t=n[sp];if(!t)return vM(n[un],n);for(;t;){let e=null;if(Hs(t))e=t[sp];else{let i=t[Co];i&&(e=i)}if(!e){for(;t&&!t[zs]&&t!==n;)Hs(t)&&vM(t[un],t),t=t[Pr];t===null&&(t=n),Hs(t)&&vM(t[un],t),e=t&&t[zs]}t=e}}function S$(n,t,e,i){let r=Co+i,o=e.length;i>0&&(e[r-1][zs]=t),i<o-Co?(t[zs]=e[r],N2(e,Co+i,t)):(e.push(t),t[zs]=null),t[Pr]=e;let s=t[du];s!==null&&e!==s&&uN(s,t);let a=t[il];a!==null&&a.insertView(n),NM(t),t[Qt]|=128}function uN(n,t){let e=n[Bd],i=t[Pr];if(Hs(i))n[Qt]|=V0.HasTransplantedViews;else{let r=i[Pr][cs];t[cs]!==r&&(n[Qt]|=V0.HasTransplantedViews)}e===null?n[Bd]=[t]:e.push(t)}function t1(n,t){let e=n[Bd],i=e.indexOf(t);e.splice(i,1)}function JM(n,t){if(n.length<=Co)return;let e=Co+t,i=n[e];if(i){let r=i[du];r!==null&&r!==n&&t1(r,i),t>0&&(n[e-1][zs]=i[zs]);let o=k0(n,Co+t);M$(i[un],i);let s=o[il];s!==null&&s.detachView(o[un]),i[Pr]=null,i[zs]=null,i[Qt]&=-129}return i}function dN(n,t){if(!(t[Qt]&256)){let e=t[Si];e.destroyNode&&S_(n,t,e,3,null,null),E$(t)}}function vM(n,t){if(t[Qt]&256)return;let e=Wn(null);try{t[Qt]&=-129,t[Qt]|=256,t[ls]&&zC(t[ls]),T$(n,t),P$(n,t),t[un].type===1&&t[Si].destroy();let i=t[du];if(i!==null&&ya(t[Pr])){i!==t[Pr]&&t1(i,t);let r=t[il];r!==null&&r.detachView(n)}GM(t)}finally{Wn(e)}}function P$(n,t){let e=n.cleanup,i=t[L0];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[L0]=null);let r=t[ec];if(r!==null){t[ec]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function T$(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof pu)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];ha(4,a,l);try{l.call(a)}finally{ha(5,a,l)}}else{ha(4,r,o);try{o.call(r)}finally{ha(5,r,o)}}}}}function D$(n,t,e){return O$(n,t.parent,e)}function O$(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[Vo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===ma.None||o===ma.Emulated)return null}return Bo(i,e)}}function Z0(n,t,e,i,r){n.insertBefore(t,e,i,r)}function fN(n,t,e){n.appendChild(t,e)}function o2(n,t,e,i,r){i!==null?Z0(n,t,e,i,r):fN(n,t,e)}function hN(n,t){return n.parentNode(t)}function A$(n,t){return n.nextSibling(t)}function I$(n,t,e){return N$(n,t,e)}function R$(n,t,e){return n.type&40?Bo(n,e):null}var N$=R$,s2;function E_(n,t,e,i){let r=D$(n,i,t),o=t[Si],s=i.parent||t[$s],a=I$(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)o2(o,r,e[l],a,!1);else o2(o,r,e,a,!1);s2!==void 0&&s2(o,i,t,e,r)}function tp(n,t){if(t!==null){let e=t.type;if(e&3)return Bo(t,n);if(e&4)return QM(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return tp(n,i);{let r=n[t.index];return ya(r)?QM(-1,r):js(r)}}else{if(e&128)return tp(n,t.next);if(e&32)return Qw(t,n)()||js(n[t.index]);{let i=pN(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=fu(n[cs]);return tp(r,i)}else return tp(n,t.next)}}}return null}function pN(n,t){if(t!==null){let i=n[cs][$s],r=t.projection;return i.projection[r]}return null}function QM(n,t){let e=Co+n+1;if(e<t.length){let i=t[e],r=i[un].firstChild;if(r!==null)return tp(i,r)}return t[rl]}function n1(n,t,e){n.removeChild(null,t,e)}function mN(n){n.textContent=""}function i1(n,t,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(s&&t===0&&(a&&rc(js(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)i1(n,t,e.child,i,r,o,!1),Rd(t,n,r,a,o);else if(l&32){let u=Qw(e,i),f;for(;f=u();)Rd(t,n,r,f,o);Rd(t,n,r,a,o)}else l&16?k$(n,t,i,e,r,o):Rd(t,n,r,a,o);e=s?e.projectionNext:e.next}}function S_(n,t,e,i,r,o){i1(e,i,n.firstChild,t,r,o,!1)}function k$(n,t,e,i,r,o){let s=e[cs],l=s[$s].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Rd(t,n,r,f,o)}else{let u=l,f=s[Pr];q0(i)&&(u.flags|=128),i1(n,t,u,f,r,o,!0)}}function F$(n,t,e,i,r){let o=e[rl],s=js(e);o!==s&&Rd(t,n,i,o,r);for(let a=Co;a<e.length;a++){let l=e[a];S_(l[un],l,n,t,i,o)}}function L$(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:va.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=va.Important),n.setStyle(e,i,r,o))}}function U$(n,t,e){n.setAttribute(t,"style",e)}function gN(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function _N(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&DM(n,t,i),r!==null&&gN(n,t,r),o!==null&&U$(n,t,o)}var qs={};function A(n=1){vN(dr(),sn(),xu()+n,!1)}function vN(n,t,e,i){if(!i)if((t[Qt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&T0(t,o,e)}else{let o=n.preOrderHooks;o!==null&&D0(t,o,0,e)}hu(e)}function $(n,t=Sn.Default){let e=sn();if(e===null)return qe(n,t);let i=Tr();return DR(i,e,ro(n),t)}function yN(){let n="invalid";throw new Error(n)}function xN(n,t,e,i,r,o){let s=Wn(null);try{let a=null;r&tc.SignalBased&&(a=t[i][Ja]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&tc.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):Q2(t,a,i,o)}finally{Wn(s)}}function V$(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)hu(~r);else{let o=r,s=e[++i],a=e[++i];Z7(s,o);let l=t[o];a(2,l)}}}finally{hu(-1)}}function P_(n,t,e,i,r,o,s,a,l,u,f){let h=t.blueprint.slice();return h[Vo]=r,h[Qt]=i|4|128|8|64,(u!==null||n&&n[Qt]&2048)&&(h[Qt]|=2048),oR(h),h[Pr]=h[qd]=n,h[Ws]=e,h[_a]=s||n&&n[_a],h[Si]=a||n&&n[Si],h[Vd]=l||n&&n[Vd]||null,h[$s]=o,h[d_]=I9(),h[ga]=f,h[K2]=u,h[cs]=t.type==2?n[cs]:h,h}function yp(n,t,e,i,r){let o=n.data[t];if(o===null)o=B$(n,t,e,i,r),X7()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=G7();o.injectorIndex=s===null?-1:s.injectorIndex}return yu(o,!0),o}function B$(n,t,e,i,r){let o=uR(),s=Lw(),a=s?o:o&&o.parent,l=n.data[t]=q$(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function bN(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function CN(n,t,e,i,r){let o=xu(),s=i&2;try{hu(-1),s&&t.length>Ji&&vN(n,t,Ji,!1),ha(s?2:0,r),e(i,r)}finally{hu(o),ha(s?3:1,r)}}function r1(n,t,e){if(kw(t)){let i=Wn(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Wn(i)}}}function o1(n,t,e){cR()&&(Q$(n,t,e,Bo(e,t)),(e.flags&64)===64&&SN(n,t,e))}function s1(n,t,e=Bo){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function MN(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=a1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function a1(n,t,e,i,r,o,s,a,l,u,f){let h=Ji+i,m=h+r,p=z$(h,m),b=typeof u=="function"?u():u;return p[un]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:f}}function z$(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:qs);return e}function H$(n,t,e,i){let o=i.get(KR,ZR)||e===ma.ShadowDom,s=n.selectRootElement(t,o);return W$(s),s}function W$(n){wN(n)}var wN=()=>null;function j$(n){LR(n)?mN(n):q9(n)}function G$(){wN=j$}function $$(n,t,e,i){let r=DN(t);r.push(e),n.firstCreatePass&&ON(n).push(i,r.length-1)}function q$(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return pp()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function a2(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=tc.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}n===0?l2(i,e,u,a,l):l2(i,e,u,a)}return i}function l2(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function Y$(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,u=null;for(let f=i;f<r;f++){let h=o[f],m=e?e.get(h):null,p=m?m.inputs:null,b=m?m.outputs:null;l=a2(0,h.inputs,f,l,p),u=a2(1,h.outputs,f,u,b);let C=l!==null&&s!==null&&!Aw(t)?uq(l,f,s):null;a.push(C)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}function X$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function l1(n,t,e,i,r,o,s,a){let l=Bo(t,e),u=t.inputs,f;!a&&u!=null&&(f=u[i])?(u1(n,e,f,i,r),hp(t)&&Z$(e,t.index)):t.type&3?(i=X$(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function Z$(n,t){let e=cc(t,n);e[Qt]&16||(e[Qt]|=64)}function c1(n,t,e,i){if(cR()){let r=i===null?null:{"":-1},o=tq(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&EN(n,t,e,s,r,a),r&&nq(e,i,r)}e.mergedAttrs=rp(e.mergedAttrs,e.attrs)}function EN(n,t,e,i,r,o){for(let u=0;u<i.length;u++)UM(j0(e,t),n,i[u].type);rq(e,n.data.length,i.length);for(let u=0;u<i.length;u++){let f=i[u];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,l=bN(n,t,i.length,null);for(let u=0;u<i.length;u++){let f=i[u];e.mergedAttrs=rp(e.mergedAttrs,f.hostAttrs),oq(n,e,t,l,f),iq(l,f,r),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let h=f.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}Y$(n,e,o)}function K$(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;J$(s)!=a&&s.push(a),s.push(e,i,o)}}function J$(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function Q$(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;hp(e)&&sq(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||j0(e,t),rc(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let l=n.data[a],u=mu(t,n,a,e);if(rc(u,t),s!==null&&cq(t,a-r,u,l,e,s),ic(l)){let f=cc(e.index,t);f[Ws]=mu(t,n,a,e)}}}function SN(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=K7();try{hu(o);for(let a=i;a<r;a++){let l=n.data[a],u=t[a];kM(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&eq(l,u)}}finally{hu(-1),kM(s)}}function eq(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function tq(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(c7(t,s.selectors,!1))if(i||(i=[]),ic(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;ew(n,t,l)}else i.unshift(s),ew(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function ew(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function nq(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new Ct(-301,!1);i.push(t[r],o)}}}function iq(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;ic(t)&&(e[""]=n)}}function rq(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function oq(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=cu(r.type,!0)),s=new pu(o,ic(r),$);n.blueprint[i]=s,e[i]=s,K$(n,t,i,bN(n,e,r.hostVars,qs),r)}function sq(n,t,e){let i=Bo(t,n),r=MN(e),o=n[_a].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=T_(n,P_(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function aq(n,t,e,i,r,o){let s=Bo(n,t);lq(t[Si],s,o,n.value,e,i,r)}function lq(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?lu(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function cq(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],f=s[a++],h=s[a++];xN(i,e,l,u,f,h)}}function uq(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function PN(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function TN(n,t){let e=n.contentQueries;if(e!==null){let i=Wn(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];Uw(o),a.contentQueries(2,t[s],s)}}}finally{Wn(i)}}}function T_(n,t){return n[sp]?n[HI][zs]=t:n[sp]=t,n[HI]=t,t}function tw(n,t,e){Uw(0);let i=Wn(null);try{t(n,e)}finally{Wn(i)}}function DN(n){return n[L0]??=[]}function ON(n){return n.cleanup??=[]}function AN(n,t){let e=n[Vd],i=e?e.get(ol,null):null;i&&i.handleError(t)}function u1(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],u=t[s],f=n.data[s];xN(f,u,i,a,l,r)}}function IN(n,t,e){let i=iR(t,n);C$(n[Si],i,e)}function dq(n,t){let e=cc(t,n),i=e[un];fq(i,e);let r=e[Vo];r!==null&&e[ga]===null&&(e[ga]=Xw(r,e[Vd])),d1(i,e,e[Ws])}function fq(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function d1(n,t,e){Vw(t);try{let i=n.viewQuery;i!==null&&tw(1,i,e);let r=n.template;r!==null&&CN(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[il]?.finishViewCreation(n),n.staticContentQueries&&TN(n,t),n.staticViewQueries&&tw(2,n.viewQuery,e);let o=n.components;o!==null&&hq(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Qt]&=-5,Bw()}}function hq(n,t){for(let e=0;e<t.length;e++)dq(n,t[e])}function pq(n,t,e,i){let r=Wn(null);try{let o=t.tView,a=n[Qt]&4096?4096:16,l=P_(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[t.index];l[du]=u;let f=n[il];return f!==null&&(l[il]=f.createEmbeddedView(o)),d1(o,l,e),l}finally{Wn(r)}}function c2(n,t){return!t||t.firstChild===null||q0(n)}function mq(n,t,e,i=!0){let r=t[un];if(S$(r,t,n,e),i){let s=QM(e,n),a=t[Si],l=hN(a,n[rl]);l!==null&&w$(r,n[$s],a,t,l,s)}let o=t[ga];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function K0(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(js(o)),ya(o)&&gq(o,i);let s=e.type;if(s&8)K0(n,t,e.child,i);else if(s&32){let a=Qw(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=pN(t,e);if(Array.isArray(a))i.push(...a);else{let l=fu(t[cs]);K0(l[un],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function gq(n,t){for(let e=Co;e<n.length;e++){let i=n[e],r=i[un].firstChild;r!==null&&K0(i[un],i,r,t)}n[rl]!==n[Vo]&&t.push(n[rl])}var RN=[];function _q(n){return n[ls]??vq(n)}function vq(n){let t=RN.pop()??Object.create(xq);return t.lView=n,t}function yq(n){n.lView[ls]!==n&&(n.lView=null,RN.push(n))}var xq=$t(We({},qh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{m_(n.lView)},consumerOnSignalRead(){this.lView[ls]=this}});function bq(n){let t=n[ls]??Object.create(Cq);return t.lView=n,t}var Cq=$t(We({},qh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let t=fu(n.lView);for(;t&&!NN(t[un]);)t=fu(t);t&&sR(t)},consumerOnSignalRead(){this.lView[ls]=this}});function NN(n){return n.type!==2}var Mq=100;function kN(n,t=!0,e=0){let i=n[_a],r=i.rendererFactory,o=!1;o||r.begin?.();try{wq(n,e)}catch(s){throw t&&AN(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function wq(n,t){let e=fR();try{jI(!0),nw(n,t);let i=0;for(;p_(n);){if(i===Mq)throw new Ct(103,!1);i++,nw(n,1)}}finally{jI(e)}}function Eq(n,t,e,i){let r=t[Qt];if((r&256)===256)return;let o=!1,s=!1;!o&&t[_a].inlineEffectRunner?.flush(),Vw(t);let a=!0,l=null,u=null;o||(NN(n)?(u=_q(t),l=Wg(u)):$A()===null?(a=!1,u=bq(t),l=Wg(u)):t[ls]&&(zC(t[ls]),t[ls]=null));try{oR(t),Y7(n.bindingStartIndex),e!==null&&CN(n,t,e,2,i);let f=(r&3)===3;if(!o)if(f){let p=n.preOrderCheckHooks;p!==null&&T0(t,p,null)}else{let p=n.preOrderHooks;p!==null&&D0(t,p,0,null),hM(t,0)}if(s||Sq(t),FN(t,0),n.contentQueries!==null&&TN(n,t),!o)if(f){let p=n.contentCheckHooks;p!==null&&T0(t,p)}else{let p=n.contentHooks;p!==null&&D0(t,p,1),hM(t,1)}V$(n,t);let h=n.components;h!==null&&UN(t,h,0);let m=n.viewQuery;if(m!==null&&tw(2,m,i),!o)if(f){let p=n.viewCheckHooks;p!==null&&T0(t,p)}else{let p=n.viewHooks;p!==null&&D0(t,p,2),hM(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[fM]){for(let p of t[fM])p();t[fM]=null}o||(t[Qt]&=-73)}catch(f){throw o||m_(t),f}finally{u!==null&&(VC(u,l),a&&yq(u)),Bw()}}function FN(n,t){for(let e=VR(n);e!==null;e=BR(e))for(let i=Co;i<e.length;i++){let r=e[i];LN(r,t)}}function Sq(n){for(let t=VR(n);t!==null;t=BR(t)){if(!(t[Qt]&V0.HasTransplantedViews))continue;let e=t[Bd];for(let i=0;i<e.length;i++){let r=e[i];sR(r)}}}function Pq(n,t,e){let i=cc(t,n);LN(i,e)}function LN(n,t){Fw(n)&&nw(n,t)}function nw(n,t){let i=n[un],r=n[Qt],o=n[ls],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&BC(o)),s||=!1,o&&(o.dirty=!1),n[Qt]&=-9217,s)Eq(i,n,i.template,n[Ws]);else if(r&8192){FN(n,1);let a=i.components;a!==null&&UN(n,a,1)}}function UN(n,t,e){for(let i=0;i<t.length;i++)Pq(n,t[i],e)}function f1(n,t){let e=fR()?64:1088;for(n[_a].changeDetectionScheduler?.notify(t);n;){n[Qt]|=e;let i=fu(n);if(B0(n)&&!i)return n;n=i}return null}var gu=class{get rootNodes(){let t=this._lView,e=t[un];return K0(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ws]}set context(t){this._lView[Ws]=t}get destroyed(){return(this._lView[Qt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Pr];if(ya(t)){let e=t[U0],i=e?e.indexOf(this):-1;i>-1&&(JM(t,i),k0(e,i))}this._attachedToViewContainer=!1}dN(this._lView[un],this._lView)}onDestroy(t){aR(this._lView,t)}markForCheck(){f1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Qt]&=-129}reattach(){NM(this._lView),this._lView[Qt]|=128}detectChanges(){this._lView[Qt]|=1024,kN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=B0(this._lView),e=this._lView[du];e!==null&&!t&&t1(e,this._lView),cN(this._lView[un],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ct(902,!1);this._appRef=t;let e=B0(this._lView),i=this._lView[du];i!==null&&!e&&uN(i,this._lView),NM(this._lView)}},_u=(()=>{class n{static{this.__NG_ELEMENT_ID__=Oq}}return n})(),Tq=_u,Dq=class extends Tq{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=pq(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new gu(r)}};function Oq(){return D_(Tr(),sn())}function D_(n,t){return n.type&4?new Dq(t,n,Yd(n,t)):null}var Aq=new RegExp(`^(\\d+)*(${jR}|${WR})*(.*)`);function Iq(n){let t=n.match(Aq),[e,i,r,o]=t,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function Rq(n){return!n.prev&&n.parent?.type===8}function yM(n){return n.index-Ji}function Nq(n,t){let e=n.i18nNodes;if(e)return e.get(t)}function O_(n,t,e,i){let r=yM(i),o=Nq(n,r);if(o===void 0){let s=n.data[B9];if(s?.[r])o=Fq(s[r],e);else if(t.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(Rq(i)){let u=yM(i.parent);o=YM(n,u)}else{let u=Bo(l,e);if(a)o=u.firstChild;else{let f=yM(l),h=YM(n,f);if(l.type===2&&h){let p=Zw(n,f)+1;o=A_(p,h)}else o=u.nextSibling}}}}return o}function A_(n,t){let e=t;for(let i=0;i<n;i++)e=e.nextSibling;return e}function kq(n,t){let e=n;for(let i=0;i<t.length;i+=2){let r=t[i],o=t[i+1];for(let s=0;s<o;s++)switch(r){case qM.FirstChild:e=e.firstChild;break;case qM.NextSibling:e=e.nextSibling;break}}return e}function Fq(n,t){let[e,...i]=Iq(n),r;if(e===WR)r=t[cs][Vo];else if(e===jR)r=x$(t[cs][Vo]);else{let o=Number(e);r=js(t[o+Ji])}return kq(r,i)}var Lq=!1;function Uq(n){Lq=n}function Vq(n){let t=n[ga];if(t){let{i18nNodes:e,dehydratedIcuData:i}=t;if(e&&i){let r=n[Si];for(let o of i.values())Bq(r,e,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function Bq(n,t,e){for(let i of e.node.cases[e.case]){let r=t.get(i.index-Ji);r&&n1(n,r,!1)}}function VN(n){let t=n[ap]??[],i=n[Pr][Si];for(let r of t)zq(r,i);n[ap]=Uo}function zq(n,t){let e=0,i=n.firstChild;if(i){let r=n.data[Y0];for(;e<r;){let o=i.nextSibling;n1(t,i,!1),i=o,e++}}}function BN(n){VN(n);let t=n[Vo];Hs(t)&&J0(t);for(let e=Co;e<n.length;e++)J0(n[e])}function J0(n){Vq(n);let t=n[un];for(let e=Ji;e<t.bindingStartIndex;e++)if(ya(n[e])){let i=n[e];BN(i)}else Hs(n[e])&&J0(n[e])}function Hq(n){let t=n._views;for(let e of t){let i=G9(e);i!==null&&i[Vo]!==null&&(Hs(i)?J0(i):BN(i))}}function Wq(n,t){let e=[];for(let i of t)for(let r=0;r<(i[GR]??1);r++){let o={data:i,firstChild:null};i[Y0]>0&&(o.firstChild=n,n=A_(i[Y0],n)),e.push(o)}return[n,e]}var zN=()=>null;function jq(n,t){let e=n[ap];return!t||e===null||e.length===0?null:e[0].data[V9]===t?e.shift():(VN(n),null)}function Gq(){zN=jq}function u2(n,t){return zN(n,t)}var Hd=class{},I_=new _t("",{providedIn:"root",factory:()=>!1});var HN=new _t(""),WN=new _t(""),iw=class{},Q0=class{};function $q(n){let t=Error(`No component factory found for ${oo(n)}.`);return t[qq]=n,t}var qq="ngComponent";var rw=class{resolveComponentFactory(t){throw $q(t)}},oc=class{static{this.NULL=new rw}},Wd=class{},Oi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Yq()}}return n})();function Yq(){let n=sn(),t=Tr(),e=cc(t.index,n);return(Hs(e)?e:n)[Si]}var Xq=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>null})}}return n})();function e_(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=II(r,a);else if(o==2){let l=a,u=t[++s];i=II(i,l+": "+u+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var t_=class extends oc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=nc(t);return new jd(e,this.ngModule)}};function d2(n,t){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:tc.None;t?e.push({propName:s,templateName:i,isSignal:(a&tc.SignalBased)!==0}):e.push({propName:s,templateName:i})}return e}function Zq(n){let t=n.toLowerCase();return t==="svg"?R7:t==="math"?N7:null}var jd=class extends Q0{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=d2(t.inputs,!0);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return d2(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=h7(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=Wn(null);try{r=r||this.ngModule;let s=r instanceof so?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new FM(t,s):t,l=a.get(Wd,null);if(l===null)throw new Ct(407,!1);let u=a.get(Xq,null),f=a.get(Hd,null),h={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:f},m=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",b=i?H$(m,i,this.componentDef.encapsulation,a):e1(m,p,Zq(p)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let y=null;b!==null&&(y=Xw(b,a,!0));let x=a1(0,null,null,1,0,null,null,null,null,null,null),T=P_(null,x,null,C,null,null,h,m,a,null,y);Vw(T);let E,D,V=null;try{let B=this.componentDef,F,G=null;B.findHostDirectiveDefs?(F=[],G=new Map,B.findHostDirectiveDefs(B,F,G),F.push(B)):F=[B];let k=Kq(T,b);V=Jq(k,b,B,F,T,h,m),D=rR(x,Ji),b&&tY(m,B,b,i),e!==void 0&&nY(D,this.ngContentSelectors,e),E=eY(V,B,F,G,T,[iY]),d1(x,T,null)}catch(B){throw V!==null&&GM(V),GM(T),B}finally{Bw()}return new ow(this.componentType,E,Yd(D,T),T,D)}finally{Wn(o)}}},ow=class extends iw{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new gu(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;u1(o[un],o,r,t,e),this.previousInputValues.set(t,e);let s=cc(this._tNode.index,o);f1(s,1)}}get injector(){return new au(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function Kq(n,t){let e=n[un],i=Ji;return n[i]=t,yp(e,i,2,"#host",null)}function Jq(n,t,e,i,r,o,s){let a=r[un];Qq(i,n,t,s);let l=null;t!==null&&(l=Xw(t,r[Vd]));let u=o.rendererFactory.createRenderer(t,e),f=16;e.signals?f=4096:e.onPush&&(f=64);let h=P_(r,MN(e),null,f,r[n.index],n,o,u,null,null,l);return a.firstCreatePass&&ew(a,n,i.length-1),T_(r,h),r[n.index]=h}function Qq(n,t,e,i){for(let r of n)t.mergedAttrs=rp(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(e_(t,t.mergedAttrs,!0),e!==null&&_N(i,e,t))}function eY(n,t,e,i,r,o){let s=Tr(),a=r[un],l=Bo(s,r);EN(a,r,s,e,null,i);for(let f=0;f<e.length;f++){let h=s.directiveStart+f,m=mu(r,a,h,s);rc(m,r)}SN(a,r,s),l&&rc(l,r);let u=mu(r,a,s.directiveStart+s.componentOffset,s);if(n[Ws]=r[Ws]=u,o!==null)for(let f of o)f(u,t);return r1(a,s,r),u}function tY(n,t,e,i){if(i)DM(n,e,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=p7(t.selectors[0]);r&&DM(n,e,r),o&&o.length>0&&gN(n,e,o.join(" "))}}function nY(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function iY(){let n=Tr();y_(sn()[un],n)}var zo=(()=>{class n{static{this.__NG_ELEMENT_ID__=rY}}return n})();function rY(){let n=Tr();return GN(n,sn())}var oY=zo,jN=class extends oY{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new au(this._hostTNode,this._hostLView)}get parentInjector(){let t=zw(this._hostTNode,this._hostLView);if(MR(t)){let e=H0(t,this._hostLView),i=z0(t),r=e[un].data[i+8];return new au(r,e)}else return new au(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=f2(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Co}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=u2(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,c2(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!D7(t),a;if(s)a=e;else{let b=e||{};a=b.index,i=b.injector,r=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let l=s?t:new jd(nc(t)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let C=(s?u:this.parentInjector).get(so,null);C&&(o=C)}let f=nc(l.componentType??{}),h=u2(this._lContainer,f?.id??null),m=h?.firstChild??null,p=l.create(u,r,m,o);return this.insertImpl(p.hostView,a,c2(this._hostTNode,h)),p}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(F7(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[Pr],u=new jN(l,l[$s],l[Pr]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return mq(s,r,o,i),t.attachToViewContainerRef(),N2(xM(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=f2(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=JM(this._lContainer,e);i&&(k0(xM(this._lContainer),e),dN(i[un],i))}detach(t){let e=this._adjustIndex(t,-1),i=JM(this._lContainer,e);return i&&k0(xM(this._lContainer),e)!=null?new gu(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function f2(n){return n[U0]}function xM(n){return n[U0]||(n[U0]=[])}function GN(n,t){let e,i=t[n.index];return ya(i)?e=i:(e=PN(i,t,null,n),t[n.index]=e,T_(t,e)),$N(e,t,n,i),new jN(e,n,t)}function sY(n,t){let e=n[Si],i=e.createComment(""),r=Bo(t,n),o=hN(e,r);return Z0(e,o,i,A$(e,r),!1),i}var $N=qN,h1=()=>!1;function aY(n,t,e){return h1(n,t,e)}function qN(n,t,e,i){if(n[rl])return;let r;e.type&8?r=js(i):r=sY(t,e),n[rl]=r}function lY(n,t,e){if(n[rl]&&n[ap])return!0;let i=e[ga],r=t.index-Ji;if(!i||O9(t)||gp(i,r))return!1;let s=YM(i,r),a=i.data[Yw]?.[r],[l,u]=Wq(s,a);return n[rl]=l,n[ap]=u,!0}function cY(n,t,e,i){h1(n,e,t)||qN(n,t,e,i)}function uY(){$N=cY,h1=lY}var sw=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},aw=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)p1(t,e).matches!==null&&this.queries[e].setDirty()}},lw=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=vY(t):this.predicate=t}},cw=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},uw=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,dY(e,o)),this.matchTNodeWithReadOption(t,e,O0(e,t,o,!1,!1))}else i===_u?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,O0(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===li||r===zo||r===_u&&e.type&4)this.addMatch(e.index,-2);else{let o=O0(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function dY(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function fY(n,t){return n.type&11?Yd(n,t):n.type&4?D_(n,t):null}function hY(n,t,e,i){return e===-1?fY(t,n):e===-2?pY(n,t,i):mu(n,n[un],e,t)}function pY(n,t,e){if(e===li)return Yd(t,n);if(e===_u)return D_(t,n);if(e===zo)return GN(t,n)}function YN(n,t,e,i){let r=t[il].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(hY(t,f,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function dw(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=YN(n,t,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=t[-l];for(let h=Co;h<f.length;h++){let m=f[h];m[du]===m[Pr]&&dw(m[un],m,u,i)}if(f[Bd]!==null){let h=f[Bd];for(let m=0;m<h.length;m++){let p=h[m];dw(p[un],p,u,i)}}}}}return i}function mY(n,t){return n[il].queries[t].queryList}function gY(n,t,e){let i=new jM((e&4)===4);return $$(n,t,i,i.destroy),(t[il]??=new aw).queries.push(new sw(i))-1}function _Y(n,t,e,i){let r=dr();if(r.firstCreatePass){let o=Tr();yY(r,new lw(t,e,i),o.index),xY(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return gY(r,sn(),e)}function vY(n){return n.split(",").map(t=>t.trim())}function yY(n,t,e){n.queries===null&&(n.queries=new cw),n.queries.track(new uw(t,e))}function xY(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function p1(n,t){return n.queries.getByIndex(t)}function bY(n,t){let e=n[un],i=p1(e,t);return i.crossesNgTemplate?dw(e,n,t,[]):YN(e,n,i,t)}var h2=new Set;function ll(n){h2.has(n)||(h2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function CY(n){return typeof n=="function"&&n[Ja]!==void 0}function Jd(n,t){ll("NgSignals");let e=iI(n),i=e[Ja];return t?.equal&&(i.equal=t.equal),e.set=r=>HC(i,r),e.update=r=>rI(i,r),e.asReadonly=MY.bind(e),e}function MY(){let n=this[Ja];if(n.readonlyFn===void 0){let t=()=>this();t[Ja]=n,n.readonlyFn=t}return n.readonlyFn}function XN(n){return CY(n)&&typeof n.set=="function"}function wY(n){return Object.getPrototypeOf(n.prototype).constructor}function Yi(n){let t=wY(n.type),e=!0,i=[n];for(;t;){let r;if(ic(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ct(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=M0(n.inputs),s.inputTransforms=M0(n.inputTransforms),s.declaredInputs=M0(n.declaredInputs),s.outputs=M0(n.outputs);let a=r.hostBindings;a&&DY(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&PY(n,l),u&&TY(n,u),EY(n,r),RG(n.outputs,r.outputs),ic(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Yi&&(e=!1)}}t=Object.getPrototypeOf(t)}SY(i)}function EY(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function SY(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=rp(r.hostAttrs,e=rp(e,r.hostAttrs))}}function M0(n){return n===Ld?{}:n===Uo?[]:n}function PY(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function TY(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function DY(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function m1(n){let t=n.inputConfig,e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];Array.isArray(r)&&r[3]&&(e[i]=r[3])}n.inputTransforms=e}var sc=class{},lp=class{};var fw=class extends sc{constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new t_(this);let o=W2(t);this._bootstrapComponents=sN(o.bootstrap),this._r3Injector=IR(t,e,[{provide:sc,useValue:this},{provide:oc,useValue:this.componentFactoryResolver},...i],oo(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},hw=class extends lp{constructor(t){super(),this.moduleType=t}create(t){return new fw(this.moduleType,t,[])}};var n_=class extends sc{constructor(t){super(),this.componentFactoryResolver=new t_(this),this.instance=null;let e=new op([...t.providers,{provide:sc,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],t.parent||Nw(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function R_(n,t,e=null){return new n_({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}function ZN(n){return g1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function OY(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function g1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function cl(n,t,e){return n[t]=e}function N_(n,t){return n[t]}function Gs(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Gd(n,t,e,i){let r=Gs(n,t,e);return Gs(n,t+1,i)||r}function KN(n,t,e,i,r){let o=Gd(n,t,e,i);return Gs(n,t+2,r)||o}function k_(n,t,e,i,r,o){let s=Gd(n,t,e,i);return Gd(n,t+2,r,o)||s}function xp(n){return(n.flags&32)===32}function AY(n,t,e,i,r,o,s,a,l){let u=t.consts,f=yp(t,n,4,s||null,a||null);c1(t,e,f,zd(u,l)),y_(t,f);let h=f.tView=a1(2,f,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,f),h.queries=t.queries.embeddedTView(f)),f}function IY(n,t,e,i,r,o,s,a,l,u){let f=e+Ji,h=t.firstCreatePass?AY(f,t,n,i,r,o,s,a,l):t.data[f];yu(h,!1);let m=JN(t,n,h,e);v_()&&E_(t,n,m,h),rc(m,n);let p=PN(m,n,m,h);return n[f]=p,T_(n,p),aY(p,h,n),f_(h)&&o1(t,n,h),l!=null&&s1(n,h,u),h}function Pe(n,t,e,i,r,o,s,a){let l=sn(),u=dr(),f=zd(u.consts,o);return IY(l,u,n,t,e,i,r,f,s,a),Pe}var JN=QN;function QN(n,t,e,i){return uc(!0),t[Si].createComment("")}function RY(n,t,e,i){let r=t[ga],o=!r||pp()||xp(e)||gp(r,i);if(uc(o),o)return QN(n,t,e,i);let s=r.data[U9]?.[i]??null;s!==null&&e.tView!==null&&e.tView.ssrId===null&&(e.tView.ssrId=s);let a=O_(r,n,t,e);b_(r,i,a);let l=Zw(r,i);return A_(l,a)}function NY(){JN=RY}var Nd=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Nd||{}),ek=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})(),pw=class n{constructor(){this.ngZone=ze(jn),this.scheduler=ze(Hd),this.errorHandler=ze(ol,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Nd.EarlyRead,Nd.Write,Nd.MixedReadWrite,Nd.Read]}execute(){this.executing=!0;for(let t of n.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[t]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(i){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}},mw=class{constructor(t,e,i,r){this.impl=t,this.hooks=e,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function _1(n,t){!t?.injector&&T7(_1);let e=t?.injector??ze(Mo);return ep(e)?(ll("NgAfterNextRender"),FY(n,e,t,!0)):LY}function kY(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function FY(n,t,e,i){let r=t.get(ek);r.impl??=t.get(pw);let o=e?.phase??Nd.MixedReadWrite,s=e?.manualCleanup!==!0?t.get(Ww):null,a=new mw(r.impl,kY(n,o),i,s);return r.impl.register(a),a}var LY={destroy(){}};function Xi(n,t,e,i){let r=sn(),o=g_();if(Gs(r,o,t)){let s=dr(),a=__();aq(a,r,n,t,e,i)}return Xi}function tk(n,t,e,i){return Gs(n,g_(),e)?t+lu(e)+i:qs}function UY(n,t,e,i,r,o){let s=q7(),a=Gd(n,s,e,r);return hR(2),a?t+lu(e)+i+lu(r)+o:qs}function w0(n,t){return n<<17|t<<2}function vu(n){return n>>17&32767}function VY(n){return(n&2)==2}function BY(n,t){return n&131071|t<<17}function gw(n){return n|2}function $d(n){return(n&131068)>>2}function bM(n,t){return n&-131069|t<<2}function zY(n){return(n&1)===1}function _w(n){return n|1}function HY(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=vu(s),l=$d(s);n[i]=e;let u=!1,f;if(Array.isArray(e)){let h=e;f=h[1],(f===null||fp(h,f)>0)&&(u=!0)}else f=e;if(r)if(l!==0){let m=vu(n[a+1]);n[i+1]=w0(m,a),m!==0&&(n[m+1]=bM(n[m+1],i)),n[a+1]=BY(n[a+1],i)}else n[i+1]=w0(a,0),a!==0&&(n[a+1]=bM(n[a+1],i)),a=i;else n[i+1]=w0(l,0),a===0?a=i:n[l+1]=bM(n[l+1],i),l=i;u&&(n[i+1]=gw(n[i+1])),p2(n,f,i,!0),p2(n,f,i,!1),WY(t,f,n,i,o),s=w0(a,l),o?t.classBindings=s:t.styleBindings=s}function WY(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&fp(o,t)>=0&&(e[i+1]=_w(e[i+1]))}function p2(n,t,e,i){let r=n[e+1],o=t===null,s=i?vu(r):$d(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];jY(l,t)&&(a=!0,n[s+1]=i?_w(u):gw(u)),s=i?vu(u):$d(u)}a&&(n[e+1]=i?gw(r):_w(r))}function jY(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?fp(n,t)>=0:!1}function X(n,t,e){let i=sn(),r=g_();if(Gs(i,r,t)){let o=dr(),s=__();l1(o,s,i,n,t,i[Si],e,!1)}return X}function m2(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";u1(n,e,o[s],s,i)}function ul(n,t,e){return nk(n,t,e,!1),ul}function wo(n,t){return nk(n,t,null,!0),wo}function nk(n,t,e,i){let r=sn(),o=dr(),s=hR(2);if(o.firstUpdatePass&&$Y(o,n,s,i),t!==qs&&Gs(r,s,t)){let a=o.data[xu()];KY(o,a,r,r[Si],n,r[s+1]=JY(t,e),i,s)}}function GY(n,t){return t>=n.expandoStartIndex}function $Y(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[xu()],s=GY(n,e);QY(o,i)&&t===null&&!s&&(t=!1),t=qY(r,o,t,i),HY(r,o,t,e,s,i)}}function qY(n,t,e,i){let r=J7(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=CM(null,n,t,e,i),e=cp(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=CM(r,n,t,e,i),o===null){let l=YY(n,t,i);l!==void 0&&Array.isArray(l)&&(l=CM(null,n,t,l[1],i),l=cp(l,t.attrs,i),XY(n,t,i,l))}else o=ZY(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function YY(n,t,e){let i=e?t.classBindings:t.styleBindings;if($d(i)!==0)return n[vu(i)]}function XY(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[vu(r)]=i}function ZY(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=cp(i,s,e)}return cp(i,t.attrs,e)}function CM(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=cp(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function cp(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),t7(n,s,e?!0:t[++o]))}return n===void 0?null:n}function KY(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let l=n.data,u=l[a+1],f=zY(u)?g2(l,t,e,r,$d(u),s):void 0;if(!i_(f)){i_(o)||VY(u)&&(o=g2(l,null,e,r,a,s));let h=iR(xu(),e);L$(i,s,h,r,o)}}function g2(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,m=e[r+1];m===qs&&(m=h?Uo:void 0);let p=h?uM(m,i):f===i?m:void 0;if(u&&!i_(p)&&(p=uM(l,i)),i_(p)&&(a=p,s))return a;let b=n[r+1];r=s?vu(b):$d(b)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=uM(l,i))}return a}function i_(n){return n!==void 0}function JY(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=oo(Zd(n)))),n}function QY(n,t){return(n.flags&(t?8:16))!==0}function eX(n,t,e,i,r,o){let s=t.consts,a=zd(s,r),l=yp(t,n,2,i,a);return c1(t,e,l,zd(s,o)),l.attrs!==null&&e_(l,l.attrs,!1),l.mergedAttrs!==null&&e_(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function g(n,t,e,i){let r=sn(),o=dr(),s=Ji+n,a=r[Si],l=o.firstCreatePass?eX(s,o,r,t,e,i):o.data[s],u=ik(o,r,l,a,t,n);r[s]=u;let f=f_(l);return yu(l,!0),_N(a,u,l),!xp(l)&&v_()&&E_(o,r,u,l),V7()===0&&rc(u,r),B7(),f&&(o1(o,r,l),r1(o,l,r)),i!==null&&s1(r,l),g}function _(){let n=Tr();Lw()?dR():(n=n.parent,yu(n,!1));let t=n;H7(t)&&j7(),z7();let e=dr();return e.firstCreatePass&&(y_(e,n),kw(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&r9(t)&&m2(e,t,sn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&o9(t)&&m2(e,t,sn(),t.stylesWithoutHost,!1),_}function me(n,t,e,i){return g(n,t,e,i),_(),me}var ik=(n,t,e,i,r,o)=>(uc(!0),e1(i,r,xR()));function tX(n,t,e,i,r,o){let s=t[ga],a=!s||pp()||xp(e)||gp(s,o);if(uc(a),a)return e1(i,r,xR());let l=O_(s,n,t,e);return XR(s,o)&&b_(s,o,l.nextSibling),s&&(FR(e)||LR(l))&&hp(e)&&(W7(e),mN(l)),l}function nX(){ik=tX}function iX(n,t,e,i,r){let o=t.consts,s=zd(o,i),a=yp(t,n,8,"ng-container",s);s!==null&&e_(a,s,!0);let l=zd(o,r);return c1(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function bu(n,t,e){let i=sn(),r=dr(),o=n+Ji,s=r.firstCreatePass?iX(o,r,i,t,e):r.data[o];yu(s,!0);let a=rk(r,i,s,n);return i[o]=a,v_()&&E_(r,i,a,s),rc(a,i),f_(s)&&(o1(r,i,s),r1(r,s,i)),e!=null&&s1(i,s),bu}function Cu(){let n=Tr(),t=dr();return Lw()?dR():(n=n.parent,yu(n,!1)),t.firstCreatePass&&(y_(t,n),kw(n)&&t.queries.elementEnd(n)),Cu}function v1(n,t,e){return bu(n,t,e),Cu(),v1}var rk=(n,t,e,i)=>(uc(!0),lN(t[Si],""));function rX(n,t,e,i){let r,o=t[ga],s=!o||pp()||gp(o,i)||xp(e);if(uc(s),s)return lN(t[Si],"");let a=O_(o,n,t,e),l=Y9(o,i);return b_(o,i,a),r=A_(l,a),r}function oX(){rk=rX}function dt(){return sn()}var su=void 0;function sX(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&i===0?1:5}var aX=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",sX],MM={};function Ho(n){let t=lX(n),e=_2(t);if(e)return e;let i=t.split("-")[0];if(e=_2(i),e)return e;if(i==="en")return aX;throw new Ct(701,!1)}function ok(n){return Ho(n)[Bi.PluralCase]}function _2(n){return n in MM||(MM[n]=nl.ng&&nl.ng.common&&nl.ng.common.locales&&nl.ng.common.locales[n]),MM[n]}var Bi=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bi||{});function lX(n){return n.toLowerCase().replace(/_/g,"-")}var r_="en-US";var cX=r_;function uX(n){typeof n=="string"&&(cX=n.toLowerCase().replace(/_/g,"-"))}var dX=(n,t,e)=>{};function le(n,t,e,i){let r=sn(),o=dr(),s=Tr();return sk(o,r,r[Si],s,n,t,i),le}function fX(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[L0],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function sk(n,t,e,i,r,o,s){let a=f_(i),u=n.firstCreatePass&&ON(n),f=t[Ws],h=DN(t),m=!0;if(i.type&3||s){let C=Bo(i,t),y=s?s(C):C,x=h.length,T=s?D=>s(js(D[i.index])):i.index,E=null;if(!s&&a&&(E=fX(n,t,r,i.index)),E!==null){let D=E.__ngLastListenerFn__||E;D.__ngNextListenerFn__=o,E.__ngLastListenerFn__=o,m=!1}else{o=y2(i,t,f,o),dX(C,r,o);let D=e.listen(y,r,o);h.push(o,D),u&&u.push(r,T,x,x+1)}}else o=y2(i,t,f,o);let p=i.outputs,b;if(m&&p!==null&&(b=p[r])){let C=b.length;if(C)for(let y=0;y<C;y+=2){let x=b[y],T=b[y+1],V=t[x][T].subscribe(o),B=h.length;h.push(o,V),u&&u.push(r,i.index,B,-(B+1))}}}function v2(n,t,e,i){let r=Wn(null);try{return ha(6,t,e),e(i)!==!1}catch(o){return AN(n,o),!1}finally{ha(7,t,e),Wn(r)}}function y2(n,t,e,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?cc(n.index,t):t;f1(s,5);let a=v2(t,e,i,o),l=r.__ngNextListenerFn__;for(;l;)a=v2(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function ce(n=1){return e9(n)}function Mu(n,t,e,i,r){let o=sn(),s=tk(o,t,e,i);if(s!==qs){let a=dr(),l=__();l1(a,l,o,n,s,o[Si],r,!1)}return Mu}function ak(n,t,e,i){_Y(n,t,e,i)}function lk(n){let t=sn(),e=dr(),i=pR();Uw(i+1);let r=p1(e,i);if(n.dirty&&k7(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=bY(t,i);n.reset(o,S9),n.notifyOnChanges()}return!0}return!1}function ck(){return mY(sn(),pR())}function hX(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Ai(n){let t=$7();return h_(t,Ji+n)}function M(n,t=""){let e=sn(),i=dr(),r=n+Ji,o=i.firstCreatePass?yp(i,r,1,t,null):i.data[r],s=uk(i,e,o,t,n);e[r]=s,v_()&&E_(i,e,s,o),yu(o,!1)}var uk=(n,t,e,i,r)=>(uc(!0),aN(t[Si],i));function pX(n,t,e,i,r){let o=t[ga],s=!o||pp()||xp(e)||gp(o,r);return uc(s),s?aN(t[Si],i):O_(o,n,t,e)}function mX(){uk=pX}function Ye(n){return xt("",n,""),Ye}function xt(n,t,e){let i=sn(),r=tk(i,n,t,e);return r!==qs&&IN(i,xu(),r),xt}function y1(n,t,e,i,r){let o=sn(),s=UY(o,n,t,e,i,r);return s!==qs&&IN(o,xu(),s),y1}function Xe(n,t,e){XN(t)&&(t=t());let i=sn(),r=g_();if(Gs(i,r,t)){let o=dr(),s=__();l1(o,s,i,n,t,i[Si],e,!1)}return Xe}function Ke(n,t){let e=XN(n);return e&&n.set(t),e}function Ze(n,t){let e=sn(),i=dr(),r=Tr();return sk(i,e,e[Si],r,n,t),Ze}function gX(n,t,e){let i=dr();if(i.firstCreatePass){let r=ic(n);vw(e,i.data,i.blueprint,r,!0),vw(t,i.data,i.blueprint,r,!1)}}function vw(n,t,e,i,r){if(n=ro(n),Array.isArray(n))for(let o=0;o<n.length;o++)vw(n[o],t,e,i,r);else{let o=dr(),s=sn(),a=Tr(),l=Ud(n)?n:ro(n.provide),u=X2(n),f=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(Ud(n)||!n.multi){let p=new pu(u,r,$),b=EM(l,t,r?f:f+m,h);b===-1?(UM(j0(a,s),o,l),wM(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(p),s.push(p)):(e[b]=p,s[b]=p)}else{let p=EM(l,t,f+m,h),b=EM(l,t,f,f+m),C=p>=0&&e[p],y=b>=0&&e[b];if(r&&!y||!r&&!C){UM(j0(a,s),o,l);let x=yX(r?vX:_X,e.length,r,i,u);!r&&y&&(e[b].providerFactory=x),wM(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(x),s.push(x)}else{let x=dk(e[r?b:p],u,!r&&i);wM(o,n,p>-1?p:b,x)}!r&&i&&y&&e[b].componentProviders++}}}function wM(n,t,e,i){let r=Ud(t),o=b7(t);if(r||o){let l=(o?ro(t.useClass):t).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let f=u.indexOf(e);f===-1?u.push(e,[i,l]):u[f+1].push(i,l)}else u.push(e,l)}}}function dk(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function EM(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function _X(n,t,e,i){return yw(this.multi,[])}function vX(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=mu(e,e[un],this.providerFactory.index,i);o=a.slice(0,s),yw(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],yw(r,o);return o}function yw(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function yX(n,t,e,i,r){let o=new pu(n,e,$);return o.multi=[],o.index=t,o.componentProviders=0,dk(o,r,i&&!e),o}function zi(n,t=[]){return e=>{e.providersResolver=(i,r)=>gX(i,r?r(n):n,t)}}var xX=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=$2(!1,e.type),r=i.length>0?R_([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ue({token:n,providedIn:"environment",factory:()=>new n(qe(so))})}}return n})();function Je(n){ll("NgStandalone"),n.getStandaloneInjector=t=>t.get(xX).getOrCreateStandaloneInjector(n)}function Hi(n,t,e){let i=ds()+n,r=sn();return r[i]===qs?cl(r,i,e?t.call(e):t()):N_(r,i)}function ni(n,t,e,i){return _k(sn(),ds(),n,t,e,i)}function xa(n,t,e,i,r){return vk(sn(),ds(),n,t,e,i,r)}function x1(n,t,e,i,r,o){return yk(sn(),ds(),n,t,e,i,r,o)}function fk(n,t,e,i,r,o,s){return bX(sn(),ds(),n,t,e,i,r,o,s)}function hk(n,t,e,i,r,o,s,a){let l=ds()+n,u=sn(),f=k_(u,l,e,i,r,o);return Gs(u,l+4,s)||f?cl(u,l+5,a?t.call(a,e,i,r,o,s):t(e,i,r,o,s)):N_(u,l+5)}function pk(n,t,e,i,r,o,s,a,l){let u=ds()+n,f=sn(),h=k_(f,u,e,i,r,o);return Gd(f,u+4,s,a)||h?cl(f,u+6,l?t.call(l,e,i,r,o,s,a):t(e,i,r,o,s,a)):N_(f,u+6)}function mk(n,t,e,i,r,o,s,a,l,u){let f=ds()+n,h=sn(),m=k_(h,f,e,i,r,o);return KN(h,f+4,s,a,l)||m?cl(h,f+7,u?t.call(u,e,i,r,o,s,a,l):t(e,i,r,o,s,a,l)):N_(h,f+7)}function gk(n,t,e,i){return CX(sn(),ds(),n,t,e,i)}function bp(n,t){let e=n[t];return e===qs?void 0:e}function _k(n,t,e,i,r,o){let s=t+e;return Gs(n,s,r)?cl(n,s+1,o?i.call(o,r):i(r)):bp(n,s+1)}function vk(n,t,e,i,r,o,s){let a=t+e;return Gd(n,a,r,o)?cl(n,a+2,s?i.call(s,r,o):i(r,o)):bp(n,a+2)}function yk(n,t,e,i,r,o,s,a){let l=t+e;return KN(n,l,r,o,s)?cl(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):bp(n,l+3)}function bX(n,t,e,i,r,o,s,a,l){let u=t+e;return k_(n,u,r,o,s,a)?cl(n,u+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):bp(n,u+4)}function CX(n,t,e,i,r,o){let s=t+e,a=!1;for(let l=0;l<r.length;l++)Gs(n,s++,r[l])&&(a=!0);return a?cl(n,s,i.apply(o,r)):bp(n,s)}function Lr(n,t){let e=dr(),i,r=n+Ji;e.firstCreatePass?(i=MX(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=cu(i.type,!0)),s,a=bo($);try{let l=W0(!1),u=o();return W0(l),hX(e,sn(),r,u),u}finally{bo(a)}}function MX(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function b1(n,t,e){let i=n+Ji,r=sn(),o=h_(r,i);return C1(r,i)?_k(r,ds(),t,o.transform,e,o):o.transform(e)}function dl(n,t,e,i){let r=n+Ji,o=sn(),s=h_(o,r);return C1(o,r)?vk(o,ds(),t,s.transform,e,i,s):s.transform(e,i)}function Qd(n,t,e,i,r){let o=n+Ji,s=sn(),a=h_(s,o);return C1(s,o)?yk(s,ds(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function C1(n,t){return n[un].data[t].pure}function Ys(n,t){return D_(n,t)}var F_=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var xk=new _t("");function dc(n){return!!n&&typeof n.then=="function"}function M1(n){return!!n&&typeof n.subscribe=="function"}var L_=new _t(""),bk=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=ze(L_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(dc(o))e.push(o);else if(M1(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wu=new _t("");function wX(){nI(()=>{throw new Ct(600,!1)})}function EX(n){return n.isBoundToModule}var SX=10;function PX(n,t,e){try{let i=e();return dc(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var ba=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ze(w9),this.afterRenderManager=ze(ek),this.zonelessEnabled=ze(I_),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new On,this.afterTick=new On,this.componentTypes=[],this.components=[],this.isStable=ze(sl).hasPendingTasks.pipe(Tt(e=>!e)),this._injector=ze(so)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof Q0;if(!this._injector.get(bk).done){let m=!r&&H2(e),p=!1;throw new Ct(405,p)}let s;r?s=e:s=this._injector.get(oc).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=EX(s)?void 0:this._injector.get(sc),l=i||s.selector,u=s.create(Mo.NULL,[],l,a),f=u.location.nativeElement,h=u.injector.get(xk,null);return h?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),A0(this.components,u),h?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Ct(101,!1);let e=Wn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Wn(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(Wd,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<SX;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)TX(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>p_(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;A0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(wu,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>A0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ct(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A0(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var E0;function U_(n){E0??=new WeakMap;let t=E0.get(n);if(t)return t;let e=n.isStable.pipe(Vs(i=>i)).toPromise().then(()=>{});return E0.set(n,e),n.onDestroy(()=>E0?.delete(n)),e}function TX(n,t,e,i){if(!e&&!p_(n))return;kN(n,t,e&&!i?0:1)}var xw=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},V_=(()=>{class n{compileModuleSync(e){return new hw(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=W2(e),o=sN(r.declarations).reduce((s,a)=>{let l=nc(a);return l&&s.push(new jd(l)),s},[]);return new xw(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var DX=(()=>{class n{constructor(){this.zone=ze(jn),this.changeDetectionScheduler=ze(Hd),this.applicationRef=ze(ba)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OX=new _t("",{factory:()=>!1});function Ck({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new jn($t(We({},wk()),{scheduleInRootZone:e})),[{provide:jn,useFactory:n},{provide:uu,multi:!0,useFactory:()=>{let i=ze(DX,{optional:!0});return()=>i.initialize()}},{provide:uu,multi:!0,useFactory:()=>{let i=ze(AX);return()=>{i.initialize()}}},t===!0?{provide:HN,useValue:!0}:[],{provide:WN,useValue:e??RR}]}function Mk(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=Ck({ngZoneFactory:()=>{let r=wk(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&ll("NgZone_CoalesceEvent"),new jn(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return lc([{provide:OX,useValue:!0},{provide:I_,useValue:!1},i])}function wk(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var AX=(()=>{class n{constructor(){this.subscription=new Vi,this.initialized=!1,this.zone=ze(jn),this.pendingTasks=ze(sl)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{jn.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{jn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IX=(()=>{class n{constructor(){this.appRef=ze(ba),this.taskService=ze(sl),this.ngZone=ze(jn),this.zonelessEnabled=ze(I_),this.disableScheduling=ze(HN,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Vi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ze(WN,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof WM||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?XI:NR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,XI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RX(){return typeof $localize<"u"&&$localize.locale||r_}var Ca=new _t("",{providedIn:"root",factory:()=>ze(Ca,Sn.Optional|Sn.SkipSelf)||RX()});var bw=new _t("");function S0(n){return!n.moduleRef}function NX(n){let t=S0(n)?n.r3Injector:n.moduleRef.injector,e=t.get(jn);return e.run(()=>{S0(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(ol,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),S0(n)){let o=()=>t.destroy(),s=n.platformInjector.get(bw);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(bw);s.add(o),n.moduleRef.onDestroy(()=>{A0(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return PX(i,e,()=>{let o=t.get(bk);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Ca,r_);if(uX(s||r_),S0(n)){let a=t.get(ba);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return kX(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function kX(n,t){let e=n.injector.get(ba);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new Ct(-403,!1);t.push(n)}var I0=null;function FX(n=[],t){return Mo.create({name:t,providers:[{provide:u_,useValue:"platform"},{provide:bw,useValue:new Set([()=>I0=null])},...n]})}function LX(n=[]){if(I0)return I0;let t=FX(n);return I0=t,wX(),UX(t),t}function UX(n){n.get($w,null)?.forEach(e=>e())}var Xs=(()=>{class n{static{this.__NG_ELEMENT_ID__=VX}}return n})();function VX(n){return BX(Tr(),sn(),(n&16)===16)}function BX(n,t,e){if(hp(n)&&!e){let i=cc(n.index,t);return new gu(i,i)}else if(n.type&175){let i=t[cs];return new gu(i,t)}return null}var Cw=class{constructor(){}supports(t){return ZN(t)}create(t){return new Mw(t)}},zX=(n,t)=>t,Mw=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||zX}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<x2(i,r,o)?e:i,a=x2(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let m=0;m<u;m++){let p=m<o.length?o[m]:o[m]=0,b=p+m;f<=b&&b<u&&(o[m]=p+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!ZN(t))throw new Ct(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,OY(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new ww(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new o_),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new o_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},ww=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ew=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},o_=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Ew,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function x2(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var Sw=class{constructor(){}supports(t){return t instanceof Map||g1(t)}create(){return new Pw}},Pw=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||g1(t)))throw new Ct(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new Tw(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},Tw=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function b2(){return new w1([new Cw])}var w1=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:b2})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||b2()),deps:[[n,new c_,new dp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new Ct(901,!1)}}return n})();function C2(){return new E1([new Sw])}var E1=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:C2})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||C2()),deps:[[n,new c_,new dp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new Ct(901,!1)}}return n})();function Ek(n){try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=LX(i),o=[Ck({}),{provide:Hd,useExisting:IX},...e||[]],s=new n_({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return NX({r3Injector:s.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}}var M2=!1;function HX(){M2||(M2=!0,j9(),nX(),mX(),oX(),NY(),uY(),Gq(),G$())}function WX(n,t){return U_(n)}function Sk(){return lc([{provide:y0,useFactory:()=>{let n=!0;return ep()&&(n=!!ze(Xd,{optional:!0})?.get(qR,null)),n&&ll("NgHydration"),n}},{provide:uu,useValue:()=>{Uq(!1),ep()&&ze(y0)&&(jX(),HX())},multi:!0},{provide:KR,useFactory:()=>ep()&&ze(y0)},{provide:wu,useFactory:()=>{if(ep()&&ze(y0)){let n=ze(ba),t=ze(Mo);return()=>{WX(n,t).then(()=>{Hq(n)})}}return()=>{}},multi:!0}])}function jX(){let n=mp(),t;for(let e of n.body.childNodes)if(e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===H9){t=e;break}if(!t)throw new Ct(-507,!1)}function fc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ef(n,t){ll("NgSignals");let e=QA(n);return t?.equal&&(e[Ja].equal=t.equal),e}function fs(n){let t=Wn(null);try{return n()}finally{Wn(t)}}function Pk(n){let t=nc(n);if(!t)return null;let e=new jd(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var Nk=null;function ml(){return Nk}function kk(n){Nk??=n}var Y_=class{};var Zi=new _t(""),L1=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(GX),providedIn:"platform"})}}return n})(),Fk=new _t(""),GX=(()=>{class n extends L1{constructor(){super(),this._doc=ze(Zi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ml().getBaseHref(this._doc)}onPopState(e){let i=ml().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=ml().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function U1(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function Tk(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function hl(n){return n&&n[0]!=="?"?"?"+n:n}var gl=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(V1),providedIn:"root"})}}return n})(),Lk=new _t(""),V1=(()=>{class n extends gl{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ze(Zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return U1(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+hl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(qe(L1),qe(Lk,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Uk=(()=>{class n extends gl{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=U1(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(qe(L1),qe(Lk,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),rf=(()=>{class n{constructor(e){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=YX(Tk(Dk(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+hl(i))}normalize(e){return n.stripTrailingSlash(qX(this._basePath,Dk(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=hl}static{this.joinWithSlash=U1}static{this.stripTrailingSlash=Tk}static{this.\u0275fac=function(i){return new(i||n)(qe(gl))}}static{this.\u0275prov=Ue({token:n,factory:()=>$X(),providedIn:"root"})}}return n})();function $X(){return new rf(qe(gl))}function qX(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function Dk(n){return n.replace(/\/index.html$/,"")}function YX(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var tf=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(tf||{}),ao=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ao||{}),yi=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(yi||{}),Wo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Wo||{}),hc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function XX(n){return Ho(n)[Bi.LocaleId]}function ZX(n,t,e){let i=Ho(n),r=[i[Bi.DayPeriodsFormat],i[Bi.DayPeriodsStandalone]],o=hs(r,t);return hs(o,e)}function KX(n,t,e){let i=Ho(n),r=[i[Bi.DaysFormat],i[Bi.DaysStandalone]],o=hs(r,t);return hs(o,e)}function JX(n,t,e){let i=Ho(n),r=[i[Bi.MonthsFormat],i[Bi.MonthsStandalone]],o=hs(r,t);return hs(o,e)}function QX(n,t){let i=Ho(n)[Bi.Eras];return hs(i,t)}function B_(n,t){let e=Ho(n);return hs(e[Bi.DateFormat],t)}function z_(n,t){let e=Ho(n);return hs(e[Bi.TimeFormat],t)}function H_(n,t){let i=Ho(n)[Bi.DateTimeFormat];return hs(i,t)}function Z_(n,t){let e=Ho(n),i=e[Bi.NumberSymbols][t];if(typeof i>"u"){if(t===hc.CurrencyDecimal)return e[Bi.NumberSymbols][hc.Decimal];if(t===hc.CurrencyGroup)return e[Bi.NumberSymbols][hc.Group]}return i}var eZ=ok;function Vk(n){if(!n[Bi.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Bi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function tZ(n){let t=Ho(n);return Vk(t),(t[Bi.ExtraData][2]||[]).map(i=>typeof i=="string"?S1(i):[S1(i[0]),S1(i[1])])}function nZ(n,t,e){let i=Ho(n);Vk(i);let r=[i[Bi.ExtraData][0],i[Bi.ExtraData][1]],o=hs(r,t)||[];return hs(o,e)||[]}function hs(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function S1(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var iZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,W_={},rZ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,pl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(pl||{}),Kn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Kn||{}),Zn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Zn||{});function er(n,t,e,i){let r=hZ(n);t=fl(e,t)||t;let s=[],a;for(;t;)if(a=rZ.exec(t),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;t=f}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=zk(i,l),r=fZ(r,i,!0));let u="";return s.forEach(f=>{let h=uZ(f);u+=h?h(r,e,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function X_(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function fl(n,t){let e=XX(n);if(W_[e]??={},W_[e][t])return W_[e][t];let i="";switch(t){case"shortDate":i=B_(n,Wo.Short);break;case"mediumDate":i=B_(n,Wo.Medium);break;case"longDate":i=B_(n,Wo.Long);break;case"fullDate":i=B_(n,Wo.Full);break;case"shortTime":i=z_(n,Wo.Short);break;case"mediumTime":i=z_(n,Wo.Medium);break;case"longTime":i=z_(n,Wo.Long);break;case"fullTime":i=z_(n,Wo.Full);break;case"short":let r=fl(n,"shortTime"),o=fl(n,"shortDate");i=j_(H_(n,Wo.Short),[r,o]);break;case"medium":let s=fl(n,"mediumTime"),a=fl(n,"mediumDate");i=j_(H_(n,Wo.Medium),[s,a]);break;case"long":let l=fl(n,"longTime"),u=fl(n,"longDate");i=j_(H_(n,Wo.Long),[l,u]);break;case"full":let f=fl(n,"fullTime"),h=fl(n,"fullDate");i=j_(H_(n,Wo.Full),[f,h]);break}return i&&(W_[e][t]=i),i}function j_(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Zs(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function oZ(n,t){return Zs(n,3).substring(0,t)}function Qi(n,t,e=0,i=!1,r=!1){return function(o,s){let a=sZ(n,o);if((e>0||a>-e)&&(a+=e),n===Kn.Hours)a===0&&e===-12&&(a=12);else if(n===Kn.FractionalSeconds)return oZ(a,t);let l=Z_(s,hc.MinusSign);return Zs(a,t,l,i,r)}}function sZ(n,t){switch(n){case Kn.FullYear:return t.getFullYear();case Kn.Month:return t.getMonth();case Kn.Date:return t.getDate();case Kn.Hours:return t.getHours();case Kn.Minutes:return t.getMinutes();case Kn.Seconds:return t.getSeconds();case Kn.FractionalSeconds:return t.getMilliseconds();case Kn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ci(n,t,e=ao.Format,i=!1){return function(r,o){return aZ(r,o,n,t,e,i)}}function aZ(n,t,e,i,r,o){switch(e){case Zn.Months:return JX(t,r,i)[n.getMonth()];case Zn.Days:return KX(t,r,i)[n.getDay()];case Zn.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=tZ(t),f=nZ(t,r,i),h=u.findIndex(m=>{if(Array.isArray(m)){let[p,b]=m,C=s>=p.hours&&a>=p.minutes,y=s<b.hours||s===b.hours&&a<b.minutes;if(p.hours<b.hours){if(C&&y)return!0}else if(C||y)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(h!==-1)return f[h]}return ZX(t,r,i)[s<12?0:1];case Zn.Eras:return QX(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function G_(n){return function(t,e,i){let r=-1*i,o=Z_(e,hc.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case pl.Short:return(r>=0?"+":"")+Zs(s,2,o)+Zs(Math.abs(r%60),2,o);case pl.ShortGMT:return"GMT"+(r>=0?"+":"")+Zs(s,1,o);case pl.Long:return"GMT"+(r>=0?"+":"")+Zs(s,2,o)+":"+Zs(Math.abs(r%60),2,o);case pl.Extended:return i===0?"Z":(r>=0?"+":"")+Zs(s,2,o)+":"+Zs(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var lZ=0,q_=4;function cZ(n){let t=X_(n,lZ,1).getDay();return X_(n,0,1+(t<=q_?q_:q_+7)-t)}function Bk(n){let t=n.getDay(),e=t===0?-3:q_-t;return X_(n.getFullYear(),n.getMonth(),n.getDate()+e)}function P1(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=Bk(e),s=cZ(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Zs(r,n,Z_(i,hc.MinusSign))}}function $_(n,t=!1){return function(e,i){let o=Bk(e).getFullYear();return Zs(o,n,Z_(i,hc.MinusSign),t)}}var T1={};function uZ(n){if(T1[n])return T1[n];let t;switch(n){case"G":case"GG":case"GGG":t=Ci(Zn.Eras,yi.Abbreviated);break;case"GGGG":t=Ci(Zn.Eras,yi.Wide);break;case"GGGGG":t=Ci(Zn.Eras,yi.Narrow);break;case"y":t=Qi(Kn.FullYear,1,0,!1,!0);break;case"yy":t=Qi(Kn.FullYear,2,0,!0,!0);break;case"yyy":t=Qi(Kn.FullYear,3,0,!1,!0);break;case"yyyy":t=Qi(Kn.FullYear,4,0,!1,!0);break;case"Y":t=$_(1);break;case"YY":t=$_(2,!0);break;case"YYY":t=$_(3);break;case"YYYY":t=$_(4);break;case"M":case"L":t=Qi(Kn.Month,1,1);break;case"MM":case"LL":t=Qi(Kn.Month,2,1);break;case"MMM":t=Ci(Zn.Months,yi.Abbreviated);break;case"MMMM":t=Ci(Zn.Months,yi.Wide);break;case"MMMMM":t=Ci(Zn.Months,yi.Narrow);break;case"LLL":t=Ci(Zn.Months,yi.Abbreviated,ao.Standalone);break;case"LLLL":t=Ci(Zn.Months,yi.Wide,ao.Standalone);break;case"LLLLL":t=Ci(Zn.Months,yi.Narrow,ao.Standalone);break;case"w":t=P1(1);break;case"ww":t=P1(2);break;case"W":t=P1(1,!0);break;case"d":t=Qi(Kn.Date,1);break;case"dd":t=Qi(Kn.Date,2);break;case"c":case"cc":t=Qi(Kn.Day,1);break;case"ccc":t=Ci(Zn.Days,yi.Abbreviated,ao.Standalone);break;case"cccc":t=Ci(Zn.Days,yi.Wide,ao.Standalone);break;case"ccccc":t=Ci(Zn.Days,yi.Narrow,ao.Standalone);break;case"cccccc":t=Ci(Zn.Days,yi.Short,ao.Standalone);break;case"E":case"EE":case"EEE":t=Ci(Zn.Days,yi.Abbreviated);break;case"EEEE":t=Ci(Zn.Days,yi.Wide);break;case"EEEEE":t=Ci(Zn.Days,yi.Narrow);break;case"EEEEEE":t=Ci(Zn.Days,yi.Short);break;case"a":case"aa":case"aaa":t=Ci(Zn.DayPeriods,yi.Abbreviated);break;case"aaaa":t=Ci(Zn.DayPeriods,yi.Wide);break;case"aaaaa":t=Ci(Zn.DayPeriods,yi.Narrow);break;case"b":case"bb":case"bbb":t=Ci(Zn.DayPeriods,yi.Abbreviated,ao.Standalone,!0);break;case"bbbb":t=Ci(Zn.DayPeriods,yi.Wide,ao.Standalone,!0);break;case"bbbbb":t=Ci(Zn.DayPeriods,yi.Narrow,ao.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ci(Zn.DayPeriods,yi.Abbreviated,ao.Format,!0);break;case"BBBB":t=Ci(Zn.DayPeriods,yi.Wide,ao.Format,!0);break;case"BBBBB":t=Ci(Zn.DayPeriods,yi.Narrow,ao.Format,!0);break;case"h":t=Qi(Kn.Hours,1,-12);break;case"hh":t=Qi(Kn.Hours,2,-12);break;case"H":t=Qi(Kn.Hours,1);break;case"HH":t=Qi(Kn.Hours,2);break;case"m":t=Qi(Kn.Minutes,1);break;case"mm":t=Qi(Kn.Minutes,2);break;case"s":t=Qi(Kn.Seconds,1);break;case"ss":t=Qi(Kn.Seconds,2);break;case"S":t=Qi(Kn.FractionalSeconds,1);break;case"SS":t=Qi(Kn.FractionalSeconds,2);break;case"SSS":t=Qi(Kn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=G_(pl.Short);break;case"ZZZZZ":t=G_(pl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=G_(pl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=G_(pl.Long);break;default:return null}return T1[n]=t,t}function zk(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function dZ(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function fZ(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),o=zk(t,r);return dZ(n,i*(o-r))}function hZ(n){if(Ok(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return X_(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(iZ))return pZ(i)}let t=new Date(n);if(!Ok(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function pZ(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,u),t}function Ok(n){return n instanceof Date&&!isNaN(n.valueOf())}var Hk=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:function(i){let r=null;return i?r=new i:r=(o=>new gZ(o))(qe(Ca)),r},providedIn:"root"})}}return n})();function mZ(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}var gZ=(()=>{class n extends Hk{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(eZ(i||this.locale)(e)){case tf.Zero:return"zero";case tf.One:return"one";case tf.Two:return"two";case tf.Few:return"few";case tf.Many:return"many";default:return"other"}}static{this.\u0275fac=function(i){return new(i||n)(qe(Ca))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function K_(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var D1=/\s+/,Ak=[],Eo=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=Ak,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(D1):Ak}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(D1):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(D1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)($(li),$(Oi))}}static{this.\u0275dir=en({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var O1=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mn=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new O1(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),Ik(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);Ik(o,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)($(zo),$(_u),$(w1))}}static{this.\u0275dir=en({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Ik(n,t){n.context.$implicit=t.item}var Zt=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new A1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Rk("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Rk("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)($(zo),$(_u))}}static{this.\u0275dir=en({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),A1=class{constructor(){this.$implicit=null,this.ngIf=null}};function Rk(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${oo(t)}'.`)}var Wk=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:va.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)($(li),$(E1),$(Oi))}}static{this.\u0275dir=en({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),_l=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)($(zo))}}static{this.\u0275dir=en({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[xr]})}}return n})();function B1(n,t){return new Ct(2100,!1)}var I1=class{createSubscription(t,e){return fs(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){fs(()=>t.unsubscribe())}},R1=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},_Z=new R1,vZ=new I1,jk=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(dc(e))return _Z;if(M1(e))return vZ;throw B1(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)($(Xs,16))}}static{this.\u0275pipe=ac({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var yZ="mediumDate",xZ=new _t(""),bZ=new _t(""),Eu=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let s=i??this.defaultOptions?.dateFormat??yZ,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return er(e,s,o||this.locale,a)}catch(s){throw B1(n,s.message)}}static{this.\u0275fac=function(i){return new(i||n)($(Ca,16),$(xZ,24),$(bZ,24))}}static{this.\u0275pipe=ac({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),CZ=/#/g,J_=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(e==null)return"";if(typeof i!="object"||i===null)throw B1(n,i);let o=mZ(e,Object.keys(i),this._localization,r);return i[o].replace(CZ,e.toString())}static{this.\u0275fac=function(i){return new(i||n)($(Hk,16))}}static{this.\u0275pipe=ac({name:"i18nPlural",type:n,pure:!0,standalone:!0})}}return n})();var vt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})(),z1="browser",MZ="server";function of(n){return n===z1}function Cp(n){return n===MZ}var Gk=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>of(ze(Fr))?new N1(ze(Zi),window):new k1})}}return n})(),N1=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=wZ(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function wZ(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var k1=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},nf=class{};var wp=class{},Ep=class{},Ma=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var W1=class{encodeKey(t){return $k(t)}encodeValue(t){return $k(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function EZ(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var SZ=/%(\d[a-f0-9])/gi,PZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $k(n){return encodeURIComponent(n).replace(SZ,(t,e)=>PZ[e]??t)}function Q_(n){return`${n}`}var ps=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new W1,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=EZ(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Q_):[Q_(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Q_(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Q_(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var j1=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function TZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function qk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Yk(n){return typeof Blob<"u"&&n instanceof Blob}function Xk(n){return typeof FormData<"u"&&n instanceof FormData}function DZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Mp=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(TZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ma,this.context??=new j1,!this.params)this.params=new ps,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||qk(this.body)||Yk(this.body)||Xk(this.body)||DZ(this.body)?this.body:this.body instanceof ps?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Xk(this.body)?null:Yk(this.body)?this.body.type||null:qk(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ps?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((m,p)=>m.set(p,t.setHeaders[p]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((m,p)=>m.set(p,t.setParams[p]),f)),new n(e,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},mc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mc||{}),Sp=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new Ma,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},tv=class n extends Sp{constructor(t={}){super(t),this.type=mc.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Su=class n extends Sp{constructor(t={}){super(t),this.type=mc.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},pc=class extends Sp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},aF=200,OZ=204;function H1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Gn=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Mp)o=e;else{let l;r.headers instanceof Ma?l=r.headers:l=new Ma(r.headers);let u;r.params&&(r.params instanceof ps?u=r.params:u=new ps({fromObject:r.params})),o=new Mp(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Rt(o).pipe(tl(l=>this.handler.handle(l)));if(e instanceof Mp||r.observe==="events")return s;let a=s.pipe(gi(l=>l instanceof Su));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Tt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Tt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Tt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(Tt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new ps().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,H1(r,i))}post(e,i,r={}){return this.request("POST",e,H1(r,i))}put(e,i,r={}){return this.request("PUT",e,H1(r,i))}static{this.\u0275fac=function(i){return new(i||n)(qe(wp))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),AZ=/^\)\]\}',?\n/,IZ="X-Request-URL";function Zk(n){if(n.url)return n.url;let t=IZ.toLocaleLowerCase();return n.headers.get(t)}var G1=(()=>{class n{constructor(){this.fetchImpl=ze($1,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=ze(jn)}handle(e){return new Jt(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(q1,o=>i.error(new pc({error:o}))),()=>r.abort()})}doRequest(e,i,r){return Ka(this,null,function*(){let o=this.createRequestInit(e),s;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,We({signal:i},o)));RZ(p),r.next({type:mc.Sent}),s=yield p}catch(p){r.error(new pc({error:p,status:p.status??0,statusText:p.statusText,url:e.urlWithParams,headers:p.headers}));return}let a=new Ma(s.headers),l=s.statusText,u=Zk(s)??e.urlWithParams,f=s.status,h=null;if(e.reportProgress&&r.next(new tv({headers:a,status:f,statusText:l,url:u})),s.body){let p=s.headers.get("content-length"),b=[],C=s.body.getReader(),y=0,x,T,E=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Ka(this,null,function*(){for(;;){let{done:V,value:B}=yield C.read();if(V)break;if(b.push(B),y+=B.length,e.reportProgress){T=e.responseType==="text"?(T??"")+(x??=new TextDecoder).decode(B,{stream:!0}):void 0;let F=()=>r.next({type:mc.DownloadProgress,total:p?+p:void 0,loaded:y,partialText:T});E?E.run(F):F()}}}));let D=this.concatChunks(b,y);try{let V=s.headers.get("Content-Type")??"";h=this.parseBody(e,D,V)}catch(V){r.error(new pc({error:V,headers:new Ma(s.headers),status:s.status,statusText:s.statusText,url:Zk(s)??e.urlWithParams}));return}}f===0&&(f=h?aF:0),f>=200&&f<300?(r.next(new Su({body:h,headers:a,status:f,statusText:l,url:u})),r.complete()):r.error(new pc({error:h,headers:a,status:f,statusText:l,url:u}))})}parseBody(e,i,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(i).replace(AZ,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>i[o]=s.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),$1=class{};function q1(){}function RZ(n){n.then(q1,q1)}function lF(n,t){return t(n)}function NZ(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function kZ(n,t,e){return(i,r)=>us(e,()=>t(i,o=>n(o,r)))}var Y1=new _t(""),X1=new _t(""),cF=new _t(""),uF=new _t("",{providedIn:"root",factory:()=>!0});function FZ(){let n=null;return(t,e)=>{n===null&&(n=(ze(Y1,{optional:!0})??[]).reduceRight(NZ,lF));let i=ze(sl);if(ze(uF)){let o=i.add();return n(t,e).pipe(Kl(()=>i.remove(o)))}else return n(t,e)}}var Kk=(()=>{class n extends wp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=ze(sl),this.contributeToStability=ze(uF)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(X1),...this.injector.get(cF,[])]));this.chain=i.reduceRight((r,o)=>kZ(r,o,this.injector),lF)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Kl(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(qe(Ep),qe(so))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();var LZ=/^\)\]\}',?\n/;function UZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Jk=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ct(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ai(i.\u0275loadImpl()):Rt(null)).pipe(ur(()=>new Jt(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((C,y)=>s.setRequestHeader(C,y.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let C=e.detectContentTypeHeader();C!==null&&s.setRequestHeader("Content-Type",C)}if(e.responseType){let C=e.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let C=s.statusText||"OK",y=new Ma(s.getAllResponseHeaders()),x=UZ(s)||e.url;return l=new tv({headers:y,status:s.status,statusText:C,url:x}),l},f=()=>{let{headers:C,status:y,statusText:x,url:T}=u(),E=null;y!==OZ&&(E=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=E?aF:0);let D=y>=200&&y<300;if(e.responseType==="json"&&typeof E=="string"){let V=E;E=E.replace(LZ,"");try{E=E!==""?JSON.parse(E):null}catch(B){E=V,D&&(D=!1,E={error:B,text:E})}}D?(o.next(new Su({body:E,headers:C,status:y,statusText:x,url:T||void 0})),o.complete()):o.error(new pc({error:E,headers:C,status:y,statusText:x,url:T||void 0}))},h=C=>{let{url:y}=u(),x=new pc({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(x)},m=!1,p=C=>{m||(o.next(u()),m=!0);let y={type:mc.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(y.total=C.total),e.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),o.next(y)},b=C=>{let y={type:mc.UploadProgress,loaded:C.loaded};C.lengthComputable&&(y.total=C.total),o.next(y)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:mc.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(qe(nf))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),dF=new _t(""),VZ="XSRF-TOKEN",BZ=new _t("",{providedIn:"root",factory:()=>VZ}),zZ="X-XSRF-TOKEN",HZ=new _t("",{providedIn:"root",factory:()=>zZ}),nv=class{},WZ=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=K_(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi),qe(Fr),qe(BZ))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function jZ(n,t){let e=n.url.toLowerCase();if(!ze(dF)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=ze(nv).getToken(),r=ze(HZ);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var Z1=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Z1||{});function fF(n,t){return{\u0275kind:n,\u0275providers:t}}function K1(...n){let t=[Gn,Jk,Kk,{provide:wp,useExisting:Kk},{provide:Ep,useFactory:()=>ze(G1,{optional:!0})??ze(Jk)},{provide:X1,useValue:jZ,multi:!0},{provide:dF,useValue:!0},{provide:nv,useClass:WZ}];for(let e of n)t.push(...e.\u0275providers);return lc(t)}var Qk=new _t("");function GZ(){return fF(Z1.LegacyInterceptors,[{provide:Qk,useFactory:FZ},{provide:X1,useExisting:Qk,multi:!0}])}function hF(){return fF(Z1.Fetch,[G1,{provide:Ep,useExisting:G1}])}var pF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({providers:[K1(GZ())]})}}return n})();var $Z=new _t(""),eF="b",tF="h",nF="s",iF="st",rF="u",oF="rt",ev=new _t(""),qZ=["GET","HEAD"];function YZ(n,t){let p=ze(ev),{isCacheActive:e}=p,i=Vg(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!e||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!qZ.includes(o)||!i.includeRequestsWithAuthHeaders&&XZ(n)||i.filter?.(n)===!1)return t(n);let s=ze(Xd),a=ze($Z,{optional:!0}),l=Cp(ze(Fr));if(a&&!l)throw new Ct(2803,!1);let u=l&&a?QZ(n.url,a):n.url,f=KZ(n,u),h=s.get(f,null),m=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(m=r.includeHeaders),h){let{[eF]:b,[oF]:C,[tF]:y,[nF]:x,[iF]:T,[rF]:E}=h,D=b;switch(C){case"arraybuffer":D=new TextEncoder().encode(b).buffer;break;case"blob":D=new Blob([b]);break}let V=new Ma(y);return Rt(new Su({body:D,headers:V,status:x,statusText:T,url:E}))}return t(n).pipe(_i(b=>{b instanceof Su&&l&&s.set(f,{[eF]:b.body,[tF]:ZZ(b.headers,m),[nF]:b.status,[iF]:b.statusText,[rF]:u,[oF]:n.responseType})}))}function XZ(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function ZZ(n,t){if(!t)return{};let e={};for(let i of t){let r=n.getAll(i);r!==null&&(e[i]=r)}return e}function sF(n){return[...n.keys()].sort().map(t=>`${t}=${n.getAll(t)}`).join("&")}function KZ(n,t){let{params:e,method:i,responseType:r}=n,o=sF(e),s=n.serializeBody();s instanceof URLSearchParams?s=sF(s):typeof s!="string"&&(s="");let a=[i,r,t,s,o].join("|"),l=JZ(a);return l}function JZ(n){let t=0;for(let e of n)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function mF(n){return[{provide:ev,useFactory:()=>(ll("NgHttpTransferCache"),We({isCacheActive:!0},n))},{provide:cF,useValue:YZ,multi:!0,deps:[Xd,ev]},{provide:wu,multi:!0,useFactory:()=>{let t=ze(ba),e=ze(ev);return()=>{U_(t).then(()=>{e.isCacheActive=!1})}}}]}function QZ(n,t){let e=new URL(n,"resolve://").origin,i=t[e];return i?n.replace(e,i):n}var eE=class extends Y_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},tE=class n extends eE{static makeCurrent(){kk(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=eK();return e==null?null:tK(e)}resetBaseElement(){Pp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return K_(document.cookie,t)}},Pp=null;function eK(){return Pp=Pp||document.querySelector("base"),Pp?Pp.getAttribute("href"):null}function tK(n){return new URL(n,document.baseURI).pathname}var nK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),nE=new _t(""),yF=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new Ct(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(qe(nE),qe(jn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),iv=class{constructor(t){this._doc=t}},J1="ng-app-id",xF=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cp(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${J1}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(J1),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(J1,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi),qe(x_),qe(qw,8),qe(Fr))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),Q1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},oE=/%COMP%/g,bF="%COMP%",iK=`_nghost-${bF}`,rK=`_ngcontent-${bF}`,oK=!0,sK=new _t("",{providedIn:"root",factory:()=>oK});function aK(n){return rK.replace(oE,n)}function lK(n){return iK.replace(oE,n)}function CF(n,t){return t.map(e=>e.replace(oE,n))}var gF=(()=>{class n{constructor(e,i,r,o,s,a,l,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Cp(a),this.defaultRenderer=new Tp(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ma.ShadowDom&&(i=$t(We({},i),{encapsulation:ma.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof rv?r.applyToHost(e):r instanceof Dp&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ma.Emulated:o=new rv(l,u,i,this.appId,f,s,a,h);break;case ma.ShadowDom:return new iE(l,u,e,i,s,a,this.nonce,h);default:o=new Dp(l,u,i,f,s,a,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(qe(yF),qe(xF),qe(x_),qe(sK),qe(Zi),qe(Fr),qe(jn),qe(qw))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),Tp=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Q1[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(_F(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(_F(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Ct(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=Q1[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Q1[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(va.DashCase|va.Important)?t.style.setProperty(e,i,r&va.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&va.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=ml().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function _F(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var iE=class extends Tp{constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=CF(r.id,r.styles);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Dp=class extends Tp{constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?CF(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rv=class extends Dp{constructor(t,e,i,r,o,s,a,l){let u=r+"-"+i.id;super(t,e,i,o,s,a,l,u),this.contentAttr=aK(u),this.hostAttr=lK(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},cK=(()=>{class n extends iv{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),vF=["alt","control","meta","shift"],uK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},dK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fK=(()=>{class n extends iv{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ml().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),vF.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=uK[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),vF.forEach(s=>{if(s!==r){let a=dK[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function MF(n,t){return Ek(We({rootComponent:n},hK(t)))}function hK(n){return{appProviders:[...vK,...n?.providers??[]],platformProviders:_K}}function pK(){tE.makeCurrent()}function mK(){return new ol}function gK(){return HR(document),document}var _K=[{provide:Fr,useValue:z1},{provide:$w,useValue:pK,multi:!0},{provide:Zi,useFactory:gK,deps:[]}];var vK=[{provide:u_,useValue:"root"},{provide:ol,useFactory:mK,deps:[]},{provide:nE,useClass:cK,multi:!0,deps:[Zi,jn,Fr]},{provide:nE,useClass:fK,multi:!0,deps:[Zi]},gF,xF,yF,{provide:Wd,useExisting:gF},{provide:nf,useClass:nK,deps:[]},[]];var wF=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(qe(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rE=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(rE||{});function EF(...n){let t=[],e=new Set,i=e.has(rE.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of n)e.add(o),r.length&&t.push(r);return lc([[],Sk(),e.has(rE.NoHttpTransferCache)||i?[]:mF({}),t])}var SF=(()=>{class n{constructor(){console.log("AuthInterceptor instantiated")}intercept(e,i){let o=["/login","/register","/delete-user","/activate-patient-user"].some(l=>e.url.includes(l)),s=e.headers.has("X-Skip-Interceptor");console.log("Request URL:",e.url),console.log("Is Non-Auth URL:",o),console.log("Skip Interceptor:",s);let a="";if(typeof window<"u"&&localStorage&&(a=localStorage.getItem("token")||"",console.log("Auth Token:",a)),a&&!o&&!s){let l=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return console.log("Auth Request Headers:",l.headers),i.handle(l)}return i.handle(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();var yn="primary",jp=Symbol("RouteTitle"),uE=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function df(n){return new uE(n)}function xK(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function bK(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!wa(n[e],t[e]))return!1;return!0}function wa(n,t){let e=n?dE(n):void 0,i=t?dE(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!LF(n[r],t[r]))return!1;return!0}function dE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LF(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function UF(n){return n.length>0?n[n.length-1]:null}function _c(n){return eM(n)?n:dc(n)?ai(Promise.resolve(n)):Rt(n)}var CK={exact:BF,subset:zF},VF={exact:MK,subset:wK,ignored:()=>!0};function PF(n,t,e){return CK[e.paths](n.root,t.root,e.matrixParams)&&VF[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function MK(n,t){return wa(n,t)}function BF(n,t,e){if(!Tu(n.segments,t.segments)||!av(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!BF(n.children[i],t.children[i],e))return!1;return!0}function wK(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>LF(n[e],t[e]))}function zF(n,t,e){return HF(n,t,t.segments,e)}function HF(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Tu(r,e)||t.hasChildren()||!av(r,e,i))}else if(n.segments.length===e.length){if(!Tu(n.segments,e)||!av(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!zF(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Tu(n.segments,r)||!av(n.segments,r,i)||!n.children[yn]?!1:HF(n.children[yn],t,o,i)}}function av(n,t,e){return t.every((i,r)=>VF[e](n[r].parameters,i.parameters))}var yl=class{constructor(t=new ei([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=df(this.queryParams),this._queryParamMap}toString(){return PK.serialize(this)}},ei=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lv(this)}},Pu=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=df(this.parameters),this._parameterMap}toString(){return jF(this)}};function EK(n,t){return Tu(n,t)&&n.every((e,i)=>wa(e.parameters,t[i].parameters))}function Tu(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function SK(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===yn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==yn&&(e=e.concat(t(r,i)))}),e}var Gp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>new ff,providedIn:"root"})}}return n})(),ff=class{parse(t){let e=new hE(t);return new yl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Op(t.root,!0)}`,i=OK(t.queryParams),r=typeof t.fragment=="string"?`#${TK(t.fragment)}`:"";return`${e}${i}${r}`}},PK=new ff;function lv(n){return n.segments.map(t=>jF(t)).join("/")}function Op(n,t){if(!n.hasChildren())return lv(n);if(t){let e=n.children[yn]?Op(n.children[yn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==yn&&i.push(`${r}:${Op(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=SK(n,(i,r)=>r===yn?[Op(n.children[yn],!1)]:[`${r}:${Op(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[yn]!=null?`${lv(n)}/${e[0]}`:`${lv(n)}/(${e.join("//")})`}}function WF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ov(n){return WF(n).replace(/%3B/gi,";")}function TK(n){return encodeURI(n)}function fE(n){return WF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cv(n){return decodeURIComponent(n)}function TF(n){return cv(n.replace(/\+/g,"%20"))}function jF(n){return`${fE(n.path)}${DK(n.parameters)}`}function DK(n){return Object.entries(n).map(([t,e])=>`;${fE(t)}=${fE(e)}`).join("")}function OK(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${ov(e)}=${ov(r)}`).join("&"):`${ov(e)}=${ov(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var AK=/^[^\/()?;#]+/;function sE(n){let t=n.match(AK);return t?t[0]:""}var IK=/^[^\/()?;=#]+/;function RK(n){let t=n.match(IK);return t?t[0]:""}var NK=/^[^=?&#]+/;function kK(n){let t=n.match(NK);return t?t[0]:""}var FK=/^[^&#]+/;function LK(n){let t=n.match(FK);return t?t[0]:""}var hE=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ei([],{}):new ei([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[yn]=new ei(t,e)),i}parseSegment(){let t=sE(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ct(4009,!1);return this.capture(t),new Pu(cv(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=RK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=sE(this.remaining);r&&(i=r,this.capture(i))}t[cv(e)]=cv(i)}parseQueryParam(t){let e=kK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=LK(this.remaining);s&&(i=s,this.capture(i))}let r=TF(e),o=TF(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=sE(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ct(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=yn);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[yn]:new ei([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ct(4011,!1)}};function GF(n){return n.segments.length>0?new ei([],{[yn]:n}):n}function $F(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=$F(r);if(i===yn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new ei(n.segments,t);return UK(e)}function UK(n){if(n.numberOfChildren===1&&n.children[yn]){let t=n.children[yn];return new ei(n.segments.concat(t.segments),t.children)}return n}function Du(n){return n instanceof yl}function VK(n,t,e=null,i=null){let r=qF(n);return YF(r,t,e,i)}function qF(n){let t;function e(o){let s={};for(let l of o.children){let u=e(l);s[l.outlet]=u}let a=new ei(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=GF(i);return t??r}function YF(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return aE(r,r,r,e,i);let o=BK(t);if(o.toRoot())return aE(r,r,new ei([],{}),e,i);let s=zK(o,r,n),a=s.processChildren?Rp(s.segmentGroup,s.index,o.commands):ZF(s.segmentGroup,s.index,o.commands);return aE(r,s.segmentGroup,a,e,i)}function uv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fp(n){return typeof n=="object"&&n!=null&&n.outlets}function aE(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===t?s=e:s=XF(n,t,e);let a=GF($F(s));return new yl(a,o,r)}function XF(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=XF(o,t,e)}),new ei(n.segments,i)}var dv=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&uv(i[0]))throw new Ct(4003,!1);let r=i.find(Fp);if(r&&r!==UF(i))throw new Ct(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new dv(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new dv(e,t,i)}var lf=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function zK(n,t,e){if(n.isAbsolute)return new lf(t,!0,0);if(!e)return new lf(t,!1,NaN);if(e.parent===null)return new lf(e,!0,0);let i=uv(n.commands[0])?0:1,r=e.segments.length-1+i;return HK(e,r,n.numberOfDoubleDots)}function HK(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ct(4005,!1);r=i.segments.length}return new lf(i,!1,r-o)}function WK(n){return Fp(n[0])?n[0].outlets:{[yn]:n}}function ZF(n,t,e){if(n??=new ei([],{}),n.segments.length===0&&n.hasChildren())return Rp(n,t,e);let i=jK(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new ei(n.segments.slice(0,i.pathIndex),{});return o.children[yn]=new ei(n.segments.slice(i.pathIndex),n.children),Rp(o,0,r)}else return i.match&&r.length===0?new ei(n.segments,{}):i.match&&!n.hasChildren()?pE(n,t,e):i.match?Rp(n,0,r):pE(n,t,e)}function Rp(n,t,e){if(e.length===0)return new ei(n.segments,{});{let i=WK(e),r={};if(Object.keys(i).some(o=>o!==yn)&&n.children[yn]&&n.numberOfChildren===1&&n.children[yn].segments.length===0){let o=Rp(n.children[yn],t,e);return new ei(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=ZF(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new ei(n.segments,r)}}function jK(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(Fp(a))break;let l=`${a}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!OF(l,u,s))return o;i+=2}else{if(!OF(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function pE(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Fp(o)){let l=GK(o.outlets);return new ei(i,l)}if(r===0&&uv(e[0])){let l=n.segments[t];i.push(new Pu(l.path,DF(e[0]))),r++;continue}let s=Fp(o)?o.outlets[yn]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&uv(a)?(i.push(new Pu(s,DF(a))),r+=2):(i.push(new Pu(s,{})),r++)}return new ei(i,{})}function GK(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=pE(new ei([],{}),0,i))}),t}function DF(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function OF(n,t,e){return n==e.path&&wa(t,e.parameters)}var Np="imperative",br=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(br||{}),ms=class{constructor(t,e){this.id=t,this.url=e}},hf=class extends ms{constructor(t,e,i="imperative",r=null){super(t,e),this.type=br.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Js=class extends ms{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=br.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Go=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Go||{}),fv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(fv||{}),vl=class extends ms{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=br.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gc=class extends ms{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=br.NavigationSkipped}},Lp=class extends ms{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=br.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hv=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mE=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gE=class extends ms{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=br.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_E=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vE=class extends ms{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=br.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yE=class{constructor(t){this.route=t,this.type=br.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xE=class{constructor(t){this.route=t,this.type=br.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bE=class{constructor(t){this.snapshot=t,this.type=br.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},CE=class{constructor(t){this.snapshot=t,this.type=br.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ME=class{constructor(t){this.snapshot=t,this.type=br.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wE=class{constructor(t){this.snapshot=t,this.type=br.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pv=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=br.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Up=class{},pf=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function $K(n,t){return n.providers&&!n._injector&&(n._injector=R_(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Ks(n){return n.outlet||yn}function qK(n,t){let e=n.filter(i=>Ks(i)===t);return e.push(...n.filter(i=>Ks(i)!==t)),e}function $p(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var EE=class{get injector(){return $p(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new qp(this.rootInjector),this.attachRef=null}},qp=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new EE(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(qe(so))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mv=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=SE(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=SE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=PE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return PE(t,this._root).map(e=>e.value)}};function SE(n,t){if(n===t.value)return t;for(let e of t.children){let i=SE(n,e);if(i)return i}return null}function PE(n,t){if(n===t.value)return[t];for(let e of t.children){let i=PE(n,e);if(i.length)return i.unshift(t),i}return[]}var jo=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function af(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var gv=class extends mv{constructor(t,e){super(t),this.snapshot=e,FE(this,t)}toString(){return this.snapshot.toString()}};function KF(n){let t=YK(n),e=new Ei([new Pu("",{})]),i=new Ei({}),r=new Ei({}),o=new Ei({}),s=new Ei(""),a=new tr(e,i,o,s,r,yn,n,t.root);return a.snapshot=t.root,new gv(new jo(a,[]),t)}function YK(n){let t={},e={},i={},r="",o=new cf([],t,i,r,e,yn,n,null,{});return new vv("",new jo(o,[]))}var tr=class{constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Tt(u=>u[jp]))??Rt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Tt(t=>df(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Tt(t=>df(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _v(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:We(We({},t.params),n.params),data:We(We({},t.data),n.data),resolve:We(We(We(We({},n.data),t.data),r?.data),n._resolvedData)}:i={params:We({},n.params),data:We({},n.data),resolve:We(We({},n.data),n._resolvedData??{})},r&&QF(r)&&(i.resolve[jp]=r.title),i}var cf=class{get title(){return this.data?.[jp]}constructor(t,e,i,r,o,s,a,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=df(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=df(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},vv=class extends mv{constructor(t,e){super(e),this.url=t,FE(this,e)}toString(){return JF(this._root)}};function FE(n,t){t.value._routerState=n,t.children.forEach(e=>FE(n,e))}function JF(n){let t=n.children.length>0?` { ${n.children.map(JF).join(", ")} } `:"";return`${n.value}${t}`}function lE(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,wa(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),wa(t.params,e.params)||n.paramsSubject.next(e.params),bK(t.url,e.url)||n.urlSubject.next(e.url),wa(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function TE(n,t){let e=wa(n.params,t.params)&&EK(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||TE(n.parent,t.parent))}function QF(n){return typeof n.title=="string"||n.title===null}var LE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=yn,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=ze(qp),this.location=ze(zo),this.changeDetector=ze(Xs),this.inputBinder=ze(Cv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ct(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ct(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ct(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Ct(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new DE(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xr]})}}return n})(),DE=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===tr?this.route:t===qp?this.childContexts:this.parent.get(t,e)}},Cv=new _t(""),AF=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=ru([i.queryParams,i.params,i.data]).pipe(ur(([o,s,a],l)=>(a=We(We(We({},o),s),a),l===0?Rt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=Pk(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function XK(n,t,e){let i=Vp(n,t._root,e?e._root:void 0);return new gv(i,t)}function Vp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=ZK(n,t,e);return new jo(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Vp(n,a)),s}}let i=KK(t.value),r=t.children.map(o=>Vp(n,o));return new jo(i,r)}}function ZK(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Vp(n,i,r);return Vp(n,i)})}function KK(n){return new tr(new Ei(n.url),new Ei(n.params),new Ei(n.queryParams),new Ei(n.fragment),new Ei(n.data),n.outlet,n.component,n)}var Bp=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},e3="ngNavigationCancelingError";function yv(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Du(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=t3(!1,Go.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function t3(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[e3]=!0,e.cancellationCode=t,e}function JK(n){return n3(n)&&Du(n.url)}function n3(n){return!!n&&n[e3]}var QK=(n,t,e,i)=>Tt(r=>(new OE(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),OE=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),lE(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=af(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=af(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=af(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=af(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new wE(o.value.snapshot))}),t.children.length&&this.forwardEvent(new CE(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(lE(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),lE(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},xv=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},uf=class{constructor(t,e){this.component=t,this.route=e}};function eJ(n,t,e){let i=n._root,r=t?t._root:null;return Ap(i,r,e,[i.value])}function tJ(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function gf(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!P2(n)?n:t.get(n):i}function Ap(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=af(t);return n.children.forEach(s=>{nJ(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>kp(a,e.getContext(s),r)),r}function nJ(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=iJ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new xv(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ap(n,t,a?a.children:null,i,r):Ap(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new uf(a.outlet.component,s))}else s&&kp(t,a,r),r.canActivateChecks.push(new xv(i)),o.component?Ap(n,null,a?a.children:null,i,r):Ap(n,null,e,i,r);return r}function iJ(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Tu(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Tu(n.url,t.url)||!wa(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TE(n,t)||!wa(n.queryParams,t.queryParams);case"paramsChange":default:return!TE(n,t)}}function kp(n,t,e){let i=af(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?kp(s,t.children.getContext(o),e):kp(s,null,e):kp(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new uf(t.outlet.component,r)):e.canDeactivateChecks.push(new uf(null,r)):e.canDeactivateChecks.push(new uf(null,r))}function Yp(n){return typeof n=="function"}function rJ(n){return typeof n=="boolean"}function oJ(n){return n&&Yp(n.canLoad)}function sJ(n){return n&&Yp(n.canActivate)}function aJ(n){return n&&Yp(n.canActivateChild)}function lJ(n){return n&&Yp(n.canDeactivate)}function cJ(n){return n&&Yp(n.canMatch)}function i3(n){return n instanceof el||n?.name==="EmptyError"}var sv=Symbol("INITIAL_VALUE");function mf(){return ur(n=>ru(n.map(t=>t.pipe(Nr(1),ou(sv)))).pipe(Tt(t=>{for(let e of t)if(e!==!0){if(e===sv)return sv;if(e===!1||uJ(e))return e}return!0}),gi(t=>t!==sv),Nr(1)))}function uJ(n){return Du(n)||n instanceof Bp}function dJ(n,t){return mi(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Rt($t(We({},e),{guardsResult:!0})):fJ(s,i,r,n).pipe(mi(a=>a&&rJ(a)?hJ(i,o,n,t):Rt(a)),Tt(a=>$t(We({},e),{guardsResult:a})))})}function fJ(n,t,e,i){return ai(n).pipe(mi(r=>vJ(r.component,r.route,e,t,i)),Vs(r=>r!==!0,!0))}function hJ(n,t,e,i){return ai(t).pipe(tl(r=>Dd(mJ(r.route.parent,i),pJ(r.route,i),_J(n,r.path,e),gJ(n,r.route,e))),Vs(r=>r!==!0,!0))}function pJ(n,t){return n!==null&&t&&t(new ME(n)),Rt(!0)}function mJ(n,t){return n!==null&&t&&t(new bE(n)),Rt(!0)}function gJ(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Rt(!0);let r=i.map(o=>m0(()=>{let s=$p(t)??e,a=gf(o,s),l=sJ(a)?a.canActivate(t,n):us(s,()=>a(t,n));return _c(l).pipe(Vs())}));return Rt(r).pipe(mf())}function _J(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>tJ(s)).filter(s=>s!==null).map(s=>m0(()=>{let a=s.guards.map(l=>{let u=$p(s.node)??e,f=gf(l,u),h=aJ(f)?f.canActivateChild(i,n):us(u,()=>f(i,n));return _c(h).pipe(Vs())});return Rt(a).pipe(mf())}));return Rt(o).pipe(mf())}function vJ(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Rt(!0);let s=o.map(a=>{let l=$p(t)??r,u=gf(a,l),f=lJ(u)?u.canDeactivate(n,t,e,i):us(l,()=>u(n,t,e,i));return _c(f).pipe(Vs())});return Rt(s).pipe(mf())}function yJ(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Rt(!0);let o=r.map(s=>{let a=gf(s,n),l=oJ(a)?a.canLoad(t,e):us(n,()=>a(t,e));return _c(l)});return Rt(o).pipe(mf(),r3(i))}function r3(n){return YC(_i(t=>{if(typeof t!="boolean")throw yv(n,t)}),Tt(t=>t===!0))}function xJ(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Rt(!0);let o=r.map(s=>{let a=gf(s,n),l=cJ(a)?a.canMatch(t,e):us(n,()=>a(t,e));return _c(l)});return Rt(o).pipe(mf(),r3(i))}var zp=class{constructor(t){this.segmentGroup=t||null}},Hp=class extends Error{constructor(t){super(),this.urlTree=t}};function sf(n){return In(new zp(n))}function bJ(n){return In(new Ct(4e3,!1))}function CJ(n){return In(t3(!1,Go.GuardRejected))}var AE=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Rt(i);if(r.numberOfChildren>1||!r.children[yn])return bJ(`${t.redirectTo}`);r=r.children[yn]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:m,params:p,data:b,title:C}=r,y=us(o,()=>a({params:p,data:b,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:m,title:C}));if(y instanceof yl)throw new Hp(y);e=y}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Hp(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new yl(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new ei(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Ct(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},IE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function MJ(n,t,e,i,r){let o=o3(n,t,e);return o.matched?(i=$K(t,i),xJ(i,t,e,r).pipe(Tt(s=>s===!0?o:We({},IE)))):Rt(o)}function o3(n,t,e){if(t.path==="**")return wJ(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?We({},IE):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||xK)(e,n,t);if(!r)return We({},IE);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?We(We({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function wJ(n){return{matched:!0,parameters:n.length>0?UF(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function IF(n,t,e,i){return e.length>0&&PJ(n,e,i)?{segmentGroup:new ei(t,SJ(i,new ei(e,n.children))),slicedSegments:[]}:e.length===0&&TJ(n,e,i)?{segmentGroup:new ei(n.segments,EJ(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new ei(n.segments,n.children),slicedSegments:e}}function EJ(n,t,e,i){let r={};for(let o of e)if(Mv(n,t,o)&&!i[Ks(o)]){let s=new ei([],{});r[Ks(o)]=s}return We(We({},i),r)}function SJ(n,t){let e={};e[yn]=t;for(let i of n)if(i.path===""&&Ks(i)!==yn){let r=new ei([],{});e[Ks(i)]=r}return e}function PJ(n,t,e){return e.some(i=>Mv(n,t,i)&&Ks(i)!==yn)}function TJ(n,t,e){return e.some(i=>Mv(n,t,i))}function Mv(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function DJ(n,t,e){return t.length===0&&!n.children[e]}var RE=class{};function OJ(n,t,e,i,r,o,s="emptyOnly"){return new NE(n,t,e,i,r,s,o).recognize()}var AJ=31,NE=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new AE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ct(4002,`'${t.segmentGroup}'`)}recognize(){let t=IF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Tt(({children:e,rootSnapshot:i})=>{let r=new jo(i,e),o=new vv("",r),s=VK(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new cf([],Object.freeze({}),Object.freeze(We({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),yn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,yn,e).pipe(Tt(i=>({children:i,rootSnapshot:e})),_n(i=>{if(i instanceof Hp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zp?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(Tt(s=>s instanceof jo?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ai(o).pipe(tl(s=>{let a=i.children[s],l=qK(e,s);return this.processSegmentGroup(t,l,a,s,r)}),aM((s,a)=>(s.push(...a),s)),Zl(null),sM(),mi(s=>{if(s===null)return sf(i);let a=s3(s);return IJ(a),Rt(a)}))}processSegment(t,e,i,r,o,s,a){return ai(e).pipe(tl(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,o,s,a).pipe(_n(u=>{if(u instanceof zp)return Rt(null);throw u}))),Vs(l=>!!l),_n(l=>{if(i3(l))return DJ(i,r,o)?Rt(new RE):sf(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,l){return Ks(i)!==s&&(s===yn||!Mv(r,o,i))?sf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,l):sf(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:m}=o3(e,r,o);if(!l)return sf(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AJ&&(this.allowRedirects=!1));let p=new cf(o,u,Object.freeze(We({},this.urlTree.queryParams)),this.urlTree.fragment,RF(r),Ks(r),r.component??r._loadedComponent??null,r,NF(r)),b=_v(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(b.params),p.data=Object.freeze(b.data);let C=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,p,t);return this.applyRedirects.lineralizeSegments(r,C).pipe(mi(y=>this.processSegment(t,i,e,y.concat(m),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=MJ(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(ur(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ur(({routes:u})=>{let f=i._loadedInjector??t,{parameters:h,consumedSegments:m,remainingSegments:p}=l,b=new cf(m,h,Object.freeze(We({},this.urlTree.queryParams)),this.urlTree.fragment,RF(i),Ks(i),i.component??i._loadedComponent??null,i,NF(i)),C=_v(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(C.params),b.data=Object.freeze(C.data);let{segmentGroup:y,slicedSegments:x}=IF(e,m,p,u);if(x.length===0&&y.hasChildren())return this.processChildren(f,u,y,b).pipe(Tt(E=>new jo(b,E)));if(u.length===0&&x.length===0)return Rt(new jo(b,[]));let T=Ks(i)===o;return this.processSegment(f,u,y,x,T?yn:o,!0,b).pipe(Tt(E=>new jo(b,E instanceof jo?[E]:[])))}))):sf(e)))}getChildConfig(t,e,i){return e.children?Rt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Rt({routes:e._loadedRoutes,injector:e._loadedInjector}):yJ(t,e,i,this.urlSerializer).pipe(mi(r=>r?this.configLoader.loadChildren(t,e).pipe(_i(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):CJ(e))):Rt({routes:[],injector:t})}};function IJ(n){n.sort((t,e)=>t.value.outlet===yn?-1:e.value.outlet===yn?1:t.value.outlet.localeCompare(e.value.outlet))}function RJ(n){let t=n.value.routeConfig;return t&&t.path===""}function s3(n){let t=[],e=new Set;for(let i of n){if(!RJ(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=s3(i.children);t.push(new jo(i.value,r))}return t.filter(i=>!e.has(i))}function RF(n){return n.data||{}}function NF(n){return n.resolve||{}}function NJ(n,t,e,i,r,o){return mi(s=>OJ(n,t,e,i,s.extractedUrl,r,o).pipe(Tt(({state:a,tree:l})=>$t(We({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function kJ(n,t){return mi(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Rt(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of a3(l))s.add(u);let a=0;return ai(s).pipe(tl(l=>o.has(l)?FJ(l,i,n,t):(l.data=_v(l,l.parent,n).resolve,Rt(void 0))),_i(()=>a++),Jl(1),mi(l=>a===s.size?Rt(e):io))})}function a3(n){let t=n.children.map(e=>a3(e)).flat();return[n,...t]}function FJ(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!QF(r)&&(o[jp]=r.title),LJ(o,n,t,i).pipe(Tt(s=>(n._resolvedData=s,n.data=_v(n,n.parent,e).resolve,null)))}function LJ(n,t,e,i){let r=dE(n);if(r.length===0)return Rt({});let o={};return ai(r).pipe(mi(s=>UJ(n[s],t,e,i).pipe(Vs(),_i(a=>{if(a instanceof Bp)throw yv(new ff,a);o[s]=a}))),Jl(1),rM(o),_n(s=>i3(s)?io:In(s)))}function UJ(n,t,e,i){let r=$p(t)??i,o=gf(n,r),s=o.resolve?o.resolve(t,e):us(r,()=>o(t,e));return _c(s)}function cE(n){return ur(t=>{let e=n(t);return e?ai(e).pipe(Tt(()=>t)):Rt(t)})}var l3=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===yn);return i}getResolvedTitleForRoute(e){return e.data[jp]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(VJ),providedIn:"root"})}}return n})(),VJ=(()=>{class n extends l3{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(qe(wF))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xp=new _t("",{providedIn:"root",factory:()=>({})}),BJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["ng-component"]],standalone:!0,features:[Je],decls:1,vars:0,template:function(i,r){i&1&&me(0,"router-outlet")},dependencies:[LE],encapsulation:2})}}return n})();function UE(n){let t=n.children&&n.children.map(UE),e=t?$t(We({},n),{children:t}):We({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==yn&&(e.component=BJ),e}var Wp=new _t(""),VE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ze(V_)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Rt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=_c(e.loadComponent()).pipe(Tt(c3),_i(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Kl(()=>{this.componentLoaders.delete(e)})),r=new Ed(i,()=>new On).pipe(wd());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Rt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=zJ(i,this.compiler,e,this.onLoadEndListener).pipe(Kl(()=>{this.childrenLoaders.delete(i)})),s=new Ed(o,()=>new On).pipe(wd());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zJ(n,t,e,i){return _c(n.loadChildren()).pipe(Tt(c3),mi(r=>r instanceof lp||Array.isArray(r)?Rt(r):ai(t.compileModuleAsync(r))),Tt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Wp,[],{optional:!0,self:!0}).flat()),{routes:s.map(UE),injector:o}}))}function HJ(n){return n&&typeof n=="object"&&"default"in n}function c3(n){return HJ(n)?n.default:n}var BE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(WJ),providedIn:"root"})}}return n})(),WJ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),u3=new _t(""),d3=new _t("");function jJ(n,t,e){let i=n.get(d3),r=n.get(Zi);return n.get(jn).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=r.startViewTransition(()=>(o(),GJ(n))),{onViewTransitionCreated:l}=i;return l&&us(n,()=>l({transition:a,from:t,to:e})),s})}function GJ(n){return new Promise(t=>{_1({read:()=>setTimeout(t)},{injector:n})})}var $J=new _t(""),zE=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new On,this.transitionAbortSubject=new On,this.configLoader=ze(VE),this.environmentInjector=ze(so),this.urlSerializer=ze(Gp),this.rootContexts=ze(qp),this.location=ze(rf),this.inputBindingEnabled=ze(Cv,{optional:!0})!==null,this.titleStrategy=ze(l3),this.options=ze(Xp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ze(BE),this.createViewTransition=ze(u3,{optional:!0}),this.navigationErrorHandler=ze($J,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Rt(void 0),this.rootComponentType=null;let e=r=>this.events.next(new yE(r)),i=r=>this.events.next(new xE(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next($t(We(We({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Ei({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Np,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gi(o=>o.id!==0),Tt(o=>$t(We({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ur(o=>{let s=!1,a=!1;return Rt(o).pipe(ur(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Go.SupersededByNewNavigation),io;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?$t(We({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&f!=="reload"){let h="";return this.events.next(new gc(l.id,this.urlSerializer.serialize(l.rawUrl),h,fv.IgnoredSameUrlNavigation)),l.resolve(!1),io}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Rt(l).pipe(ur(h=>{let m=this.transitions?.getValue();return this.events.next(new hf(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?io:Promise.resolve(h)}),NJ(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),_i(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=$t(We({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new hv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:m,source:p,restoredState:b,extras:C}=l,y=new hf(h,this.urlSerializer.serialize(m),p,b);this.events.next(y);let x=KF(this.rootComponentType).snapshot;return this.currentTransition=o=$t(We({},l),{targetSnapshot:x,urlAfterRedirects:m,extras:$t(We({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Rt(o)}else{let h="";return this.events.next(new gc(l.id,this.urlSerializer.serialize(l.extractedUrl),h,fv.IgnoredByUrlHandlingStrategy)),l.resolve(!1),io}}),_i(l=>{let u=new mE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Tt(l=>(this.currentTransition=o=$t(We({},l),{guards:eJ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),dJ(this.environmentInjector,l=>this.events.next(l)),_i(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw yv(this.urlSerializer,l.guardsResult);let u=new gE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),gi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Go.GuardRejected),!1)),cE(l=>{if(l.guards.canActivateChecks.length)return Rt(l).pipe(_i(u=>{let f=new _E(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),ur(u=>{let f=!1;return Rt(u).pipe(kJ(this.paramsInheritanceStrategy,this.environmentInjector),_i({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Go.NoDataFromResolver)}}))}),_i(u=>{let f=new vE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),cE(l=>{let u=f=>{let h=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(f.routeConfig).pipe(_i(m=>{f.component=m}),Tt(()=>{})));for(let m of f.children)h.push(...u(m));return h};return ru(u(l.targetSnapshot.root)).pipe(Zl(null),Nr(1))}),cE(()=>this.afterPreactivation()),ur(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?ai(f).pipe(Tt(()=>o)):Rt(o)}),Tt(l=>{let u=XK(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=$t(We({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),_i(()=>{this.events.next(new Up)}),QK(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Nr(1),_i({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Js(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),xo(this.transitionAbortSubject.pipe(_i(l=>{throw l}))),Kl(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Go.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_n(l=>{if(a=!0,n3(l))this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),JK(l)?this.events.next(new pf(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Lp(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=us(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(f instanceof Bp){let{message:h,cancellationCode:m}=yv(this.urlSerializer,f);this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),h,m)),this.events.next(new pf(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(u);let h=e.errorHandler(l);o.resolve(!!h)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return io}))}))}cancelNavigationTransition(e,i,r){let o=new vl(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qJ(n){return n!==Np}var YJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(XJ),providedIn:"root"})}}return n})(),kE=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},XJ=(()=>{class n extends kE{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),f3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:()=>ze(ZJ),providedIn:"root"})}}return n})(),ZJ=(()=>{class n extends f3{constructor(){super(...arguments),this.location=ze(rf),this.urlSerializer=ze(Gp),this.options=ze(Xp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ze(BE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=KF(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof hf)this.stateMemento=this.createStateMemento();else if(e instanceof gc)this.rawUrlTree=i.initialUrl;else if(e instanceof hv){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof Up?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof vl&&(e.code===Go.GuardRejected||e.code===Go.NoDataFromResolver)?this.restoreHistory(i):e instanceof Lp?this.restoreHistory(i,!0):e instanceof Js&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof yl?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=We(We({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=We(We({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ip=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ip||{});function h3(n,t){n.events.pipe(gi(e=>e instanceof Js||e instanceof vl||e instanceof Lp||e instanceof gc),Tt(e=>e instanceof Js||e instanceof gc?Ip.COMPLETE:(e instanceof vl?e.code===Go.Redirect||e.code===Go.SupersededByNewNavigation:!1)?Ip.REDIRECTING:Ip.FAILED),gi(e=>e!==Ip.REDIRECTING),Nr(1)).subscribe(()=>{t()})}function KJ(n){throw n}var JJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=ze(F_),this.stateManager=ze(f3),this.options=ze(Xp,{optional:!0})||{},this.pendingTasks=ze(sl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ze(zE),this.urlSerializer=ze(Gp),this.location=ze(rf),this.urlHandlingStrategy=ze(BE),this._events=new On,this.errorHandler=this.options.errorHandler||KJ,this.navigated=!1,this.routeReuseStrategy=ze(YJ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ze(Wp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ze(Cv,{optional:!0}),this.eventsSubscription=new Vi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vl&&i.code!==Go.Redirect&&i.code!==Go.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Js)this.navigated=!0;else if(i instanceof pf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=We({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qJ(r.source)},s);this.scheduleNavigation(a,Np,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}tQ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Np,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=We({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(UE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=We(We({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let m=r?r.snapshot:this.routerState.snapshot.root;h=qF(m)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return YF(h,e,f,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Du(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Np,null,i)}navigate(e,i={skipLocationChange:!1}){return eQ(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=We({},JJ):i===!1?r=We({},QJ):r=i,Du(e))return PF(this.currentUrlTree,e,r);let o=this.parseUrl(e);return PF(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,m)=>{a=h,l=m});let f=this.pendingTasks.add();return h3(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function eQ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Ct(4008,!1)}function tQ(n){return!(n instanceof Up)&&!(n instanceof pf)}var jt=(()=>{class n{constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new On,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof Js&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Du(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:oN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Du(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(tr),Hw("tabindex"),$(Oi),$(li),$(gl))}}static{this.\u0275dir=en({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&le("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Xi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fc],replaceUrl:[2,"replaceUrl","replaceUrl",fc],routerLink:"routerLink"},standalone:!0,features:[m1,xr]})}}return n})(),Ea=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,o,s){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new yt,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Js&&this.update()})}ngAfterContentInit(){Rt(this.links.changes,Rt(null)).pipe(fa()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=ai(e).pipe(fa()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=nQ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(li),$(Oi),$(Xs),$(jt,8))}}static{this.\u0275dir=en({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&ak(o,jt,5),i&2){let s;lk(s=ck())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[xr]})}}return n})();function nQ(n){return!!n.paths}var bv=class{};var iQ=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(gi(e=>e instanceof Js),tl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=R_(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ai(r).pipe(fa())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Rt(null);let o=r.pipe(mi(s=>s===null?Rt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return ai([o,s]).pipe(fa())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(qe(Mt),qe(V_),qe(so),qe(bv),qe(VE))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),p3=new _t(""),rQ=(()=>{class n{constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof hf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Js?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof gc&&e.code===fv.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof pv&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pv(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){yN()}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function m3(n,...t){return lc([{provide:Wp,multi:!0,useValue:n},[],{provide:tr,useFactory:g3,deps:[Mt]},{provide:wu,multi:!0,useFactory:_3},t.map(e=>e.\u0275providers)])}function g3(n){return n.routerState.root}function Zp(n,t){return{\u0275kind:n,\u0275providers:t}}function _3(){let n=ze(Mo);return t=>{let e=n.get(ba);if(t!==e.components[0])return;let i=n.get(Mt),r=n.get(v3);n.get(HE)===1&&i.initialNavigation(),n.get(y3,null,Sn.Optional)?.setUpPreloading(),n.get(p3,null,Sn.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var v3=new _t("",{factory:()=>new On}),HE=new _t("",{providedIn:"root",factory:()=>1});function oQ(){return Zp(2,[{provide:HE,useValue:0},{provide:L_,multi:!0,deps:[Mo],useFactory:t=>{let e=t.get(Fk,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Mt),o=t.get(v3);h3(r,()=>{i(!0)}),t.get(zE).afterPreactivation=()=>(i(!0),o.closed?Rt(void 0):o),r.initialNavigation()}))}}])}function sQ(){return Zp(3,[{provide:L_,multi:!0,useFactory:()=>{let t=ze(Mt);return()=>{t.setUpLocationChangeListener()}}},{provide:HE,useValue:2}])}var y3=new _t("");function aQ(n){return Zp(0,[{provide:y3,useExisting:iQ},{provide:bv,useExisting:n}])}function lQ(){return Zp(8,[AF,{provide:Cv,useExisting:AF}])}function cQ(n){let t=[{provide:u3,useValue:jJ},{provide:d3,useValue:We({skipNextTransition:!!n?.skipInitialTransition},n)}];return Zp(9,t)}var kF=new _t("ROUTER_FORROOT_GUARD"),uQ=[rf,{provide:Gp,useClass:ff},Mt,qp,{provide:tr,useFactory:g3,deps:[Mt]},VE,[]],kt=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[uQ,[],{provide:Wp,multi:!0,useValue:e},{provide:kF,useFactory:pQ,deps:[[Mt,new dp,new c_]]},{provide:Xp,useValue:i||{}},i?.useHash?fQ():hQ(),dQ(),i?.preloadingStrategy?aQ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?mQ(i):[],i?.bindToComponentInputs?lQ().\u0275providers:[],i?.enableViewTransitions?cQ().\u0275providers:[],gQ()]}}static forChild(e){return{ngModule:n,providers:[{provide:Wp,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(qe(kF,8))}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})();function dQ(){return{provide:p3,useFactory:()=>{let n=ze(Gk),t=ze(jn),e=ze(Xp),i=ze(zE),r=ze(Gp);return e.scrollOffset&&n.setOffset(e.scrollOffset),new rQ(r,i,n,t,e)}}}function fQ(){return{provide:gl,useClass:Uk}}function hQ(){return{provide:gl,useClass:V1}}function pQ(n){return"guarded"}function mQ(n){return[n.initialNavigation==="disabled"?sQ().\u0275providers:[],n.initialNavigation==="enabledBlocking"?oQ().\u0275providers:[]]}var FF=new _t("");function gQ(){return[{provide:FF,useFactory:_3},{provide:wu,multi:!0,useExisting:FF}]}var D3=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)($(Oi),$(li))}}static{this.\u0275dir=en({type:n})}}return n})(),Rv=(()=>{class n extends D3{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,features:[Yi]})}}return n})(),xf=new _t(""),_Q={provide:xf,useExisting:yr(()=>nm),multi:!0},nm=(()=>{class n extends Rv{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&le("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[zi([_Q]),Yi]})}}return n})(),vQ={provide:xf,useExisting:yr(()=>Nt),multi:!0};function yQ(){let n=ml()?ml().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var xQ=new _t(""),Nt=(()=>{class n extends D3{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!yQ())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)($(Oi),$(li),$(xQ,8))}}static{this.\u0275dir=en({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&le("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[zi([vQ]),Yi]})}}return n})();function vc(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function O3(n){return n!=null&&typeof n.length=="number"}var Qs=new _t(""),bf=new _t(""),bQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Gt=class{static min(t){return CQ(t)}static max(t){return MQ(t)}static required(t){return A3(t)}static requiredTrue(t){return I3(t)}static email(t){return wQ(t)}static minLength(t){return R3(t)}static maxLength(t){return N3(t)}static pattern(t){return k3(t)}static nullValidator(t){return Ev(t)}static compose(t){return z3(t)}static composeAsync(t){return H3(t)}};function CQ(n){return t=>{if(vc(t.value)||vc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function MQ(n){return t=>{if(vc(t.value)||vc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function A3(n){return vc(n.value)?{required:!0}:null}function I3(n){return n.value===!0?null:{required:!0}}function wQ(n){return vc(n.value)||bQ.test(n.value)?null:{email:!0}}function R3(n){return t=>vc(t.value)||!O3(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function N3(n){return t=>O3(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function k3(n){if(!n)return Ev;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(vc(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Ev(n){return null}function F3(n){return n!=null}function L3(n){return dc(n)?ai(n):n}function U3(n){let t={};return n.forEach(e=>{t=e!=null?We(We({},t),e):t}),Object.keys(t).length===0?null:t}function V3(n,t){return t.map(e=>e(n))}function EQ(n){return!n.validate}function B3(n){return n.map(t=>EQ(t)?t:e=>t.validate(e))}function z3(n){if(!n)return null;let t=n.filter(F3);return t.length==0?null:function(e){return U3(V3(e,t))}}function YE(n){return n!=null?z3(B3(n)):null}function H3(n){if(!n)return null;let t=n.filter(F3);return t.length==0?null:function(e){let i=V3(e,t).map(L3);return tM(i).pipe(Tt(U3))}}function XE(n){return n!=null?H3(B3(n)):null}function x3(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function W3(n){return n._rawValidators}function j3(n){return n._rawAsyncValidators}function WE(n){return n?Array.isArray(n)?n:[n]:[]}function Sv(n,t){return Array.isArray(n)?n.includes(t):n===t}function b3(n,t){let e=WE(t);return WE(n).forEach(r=>{Sv(e,r)||e.push(r)}),e}function C3(n,t){return WE(t).filter(e=>!Sv(n,e))}var Pv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=YE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=XE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},lo=class extends Pv{get formDirective(){return null}get path(){return null}},Ou=class extends Pv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Tv=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},SQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Pye=$t(We({},SQ),{"[class.ng-submitted]":"isSubmitted"}),Ft=(()=>{class n extends Tv{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)($(Ou,2))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&wo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Yi]})}}return n})(),qt=(()=>{class n extends Tv{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)($(lo,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&wo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Yi]})}}return n})();var Kp="VALID",wv="INVALID",_f="PENDING",Jp="DISABLED",yc=class{},Dv=class extends yc{constructor(t,e){super(),this.value=t,this.source=e}},em=class extends yc{constructor(t,e){super(),this.pristine=t,this.source=e}},tm=class extends yc{constructor(t,e){super(),this.touched=t,this.source=e}},vf=class extends yc{constructor(t,e){super(),this.status=t,this.source=e}},jE=class extends yc{constructor(t){super(),this.source=t}},GE=class extends yc{constructor(t){super(),this.source=t}};function ZE(n){return(Nv(n)?n.validators:n)||null}function PQ(n){return Array.isArray(n)?YE(n):n||null}function KE(n,t){return(Nv(t)?t.asyncValidators:n)||null}function TQ(n){return Array.isArray(n)?XE(n):n||null}function Nv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function G3(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Ct(1e3,"");if(!i[e])throw new Ct(1001,"")}function $3(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Ct(1002,"")})}var yf=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ef(()=>this.statusReactive()),this.statusReactive=Jd(void 0),this._pristine=ef(()=>this.pristineReactive()),this.pristineReactive=Jd(!0),this._touched=ef(()=>this.touchedReactive()),this.touchedReactive=Jd(!1),this._events=new On,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return fs(this.statusReactive)}set status(t){fs(()=>this.statusReactive.set(t))}get valid(){return this.status===Kp}get invalid(){return this.status===wv}get pending(){return this.status==_f}get disabled(){return this.status===Jp}get enabled(){return this.status!==Jp}get pristine(){return fs(this.pristineReactive)}set pristine(t){fs(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return fs(this.touchedReactive)}set touched(t){fs(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(b3(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(b3(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(C3(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(C3(t,this._rawAsyncValidators))}hasValidator(t){return Sv(this._rawValidators,t)}hasAsyncValidator(t){return Sv(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched($t(We({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new tm(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new tm(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty($t(We({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new em(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new em(!0,i))}markAsPending(t={}){this.status=_f;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new vf(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending($t(We({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Jp,this.errors=null,this._forEachChild(r=>{r.disable($t(We({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Dv(this.value,i)),this._events.next(new vf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($t(We({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Kp,this._forEachChild(i=>{i.enable($t(We({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors($t(We({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kp||this.status===_f)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Dv(this.value,e)),this._events.next(new vf(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity($t(We({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jp:Kp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=_f,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=L3(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new vf(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?Jp:this.errors?wv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_f)?_f:this._anyControlsHaveStatus(wv)?wv:Kp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new em(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new tm(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nv(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=PQ(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=TQ(this._rawAsyncValidators)}},gs=class extends yf{constructor(t,e,i){super(ZE(e),KE(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){$3(this,!0,t),Object.keys(t).forEach(i=>{G3(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var $E=class extends gs{};var im=new _t("CallSetDisabledState",{providedIn:"root",factory:()=>kv}),kv="always";function Fv(n,t){return[...t.path,n]}function Ov(n,t,e=kv){JE(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),OQ(n,t),IQ(n,t),AQ(n,t),DQ(n,t)}function M3(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Iv(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Av(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function DQ(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function JE(n,t){let e=W3(n);t.validator!==null?n.setValidators(x3(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=j3(n);t.asyncValidator!==null?n.setAsyncValidators(x3(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Av(t._rawValidators,r),Av(t._rawAsyncValidators,r)}function Iv(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=W3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=j3(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Av(t._rawValidators,i),Av(t._rawAsyncValidators,i),e}function OQ(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&q3(n,t)})}function AQ(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&q3(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function q3(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function IQ(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Y3(n,t){n==null,JE(n,t)}function RQ(n,t){return Iv(n,t)}function X3(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function NQ(n){return Object.getPrototypeOf(n.constructor)===Rv}function Z3(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function K3(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Nt?e=o:NQ(o)?i=o:r=o}),r||i||e||null}function kQ(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var FQ={provide:lo,useExisting:yr(()=>$n)},Qp=Promise.resolve(),$n=(()=>{class n extends lo{get submitted(){return fs(this.submittedReactive)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ef(()=>this.submittedReactive()),this.submittedReactive=Jd(!1),this._directives=new Set,this.ngSubmit=new yt,this.form=new gs({},YE(e),XE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Qp.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Ov(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Qp.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Qp.then(()=>{let i=this._findContainer(e.path),r=new gs({});Y3(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Qp.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Qp.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Z3(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)($(Qs,10),$(bf,10),$(im,8))}}static{this.\u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&le("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([FQ]),Yi]})}}return n})();function w3(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function E3(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Un=class extends yf{constructor(t=null,e,i){super(ZE(e),KE(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nv(e)&&(e.nonNullable||e.initialValueIsDefault)&&(E3(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){w3(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){w3(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){E3(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var LQ=n=>n instanceof Un,UQ=(()=>{class n extends lo{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Fv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,features:[Yi]})}}return n})();var VQ={provide:Ou,useExisting:yr(()=>Pn)},S3=Promise.resolve(),Pn=(()=>{class n extends Ou{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Un,this._registered=!1,this.name="",this.update=new yt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=K3(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),X3(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ov(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){S3.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&fc(i);S3.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Fv(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)($(lo,9),$(Qs,10),$(bf,10),$(xf,10),$(Xs,8),$(im,8))}}static{this.\u0275dir=en({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zi([VQ]),Yi,xr]})}}return n})(),Yt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var J3=new _t("");var BQ={provide:lo,useExisting:yr(()=>Cr)},Cr=(()=>{class n extends lo{get submitted(){return fs(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ef(()=>this._submittedReactive()),this._submittedReactive=Jd(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new yt,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Iv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Ov(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){M3(e.control||null,e,!1),kQ(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Z3(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new jE(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new GE(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(M3(i||null,e),LQ(r)&&(Ov(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Y3(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&RQ(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){JE(this.form,this),this._oldForm&&Iv(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)($(Qs,10),$(bf,10),$(im,8))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&le("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zi([BQ]),Yi,xr]})}}return n})(),zQ={provide:lo,useExisting:yr(()=>Q3)},Q3=(()=>{class n extends UQ{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){eL(this._parent)}static{this.\u0275fac=function(i){return new(i||n)($(lo,13),$(Qs,10),$(bf,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[zi([zQ]),Yi]})}}return n})(),HQ={provide:lo,useExisting:yr(()=>Cf)},Cf=(()=>{class n extends lo{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Fv(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){eL(this._parent)}static{this.\u0275fac=function(i){return new(i||n)($(lo,13),$(Qs,10),$(bf,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[zi([HQ]),Yi]})}}return n})();function eL(n){return!(n instanceof Q3)&&!(n instanceof Cr)&&!(n instanceof Cf)}var WQ={provide:Ou,useExisting:yr(()=>Dr)},Dr=(()=>{class n extends Ou{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new yt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=K3(this,o)}ngOnChanges(e){this._added||this._setUpControl(),X3(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Fv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)($(lo,13),$(Qs,10),$(bf,10),$(xf,10),$(J3,8))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[zi([WQ]),Yi,xr]})}}return n})(),jQ={provide:xf,useExisting:yr(()=>Wi),multi:!0};function tL(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function GQ(n){return n.split(":")[0]}var Wi=(()=>{class n extends Rv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=tL(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=GQ(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&le("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zi([jQ]),Yi]})}}return n})(),Ii=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(tL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)($(li),$(Oi),$(Wi,9))}}static{this.\u0275dir=en({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),$Q={provide:xf,useExisting:yr(()=>nL),multi:!0};function P3(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function qQ(n){return n.split(":")[0]}var nL=(()=>{class n extends Rv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=qQ(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&le("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[zi([$Q]),Yi]})}}return n})(),Ri=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(P3(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(P3(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)($(li),$(Oi),$(nL,9))}}static{this.\u0275dir=en({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function iL(n){return typeof n=="number"?n:parseInt(n,10)}var Lv=(()=>{class n{constructor(){this._validator=Ev}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ev,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,features:[xr]})}}return n})();var YQ={provide:Qs,useExisting:yr(()=>hn),multi:!0},XQ={provide:Qs,useExisting:yr(()=>QE),multi:!0},hn=(()=>{class n extends Lv{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fc,this.createValidator=e=>A3}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("required",r._enabled?"":null)},inputs:{required:"required"},features:[zi([YQ]),Yi]})}}return n})(),QE=(()=>{class n extends hn{constructor(){super(...arguments),this.createValidator=e=>I3}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("required",r._enabled?"":null)},features:[zi([XQ]),Yi]})}}return n})();var ZQ={provide:Qs,useExisting:yr(()=>rm),multi:!0},rm=(()=>{class n extends Lv{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>iL(e),this.createValidator=e=>R3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[zi([ZQ]),Yi]})}}return n})(),KQ={provide:Qs,useExisting:yr(()=>om),multi:!0},om=(()=>{class n extends Lv{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>iL(e),this.createValidator=e=>N3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[zi([KQ]),Yi]})}}return n})(),JQ={provide:Qs,useExisting:yr(()=>xl),multi:!0},xl=(()=>{class n extends Lv{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>k3(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=kr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Xi("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[zi([JQ]),Yi]})}}return n})();var rL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({})}}return n})(),qE=class extends yf{constructor(t,e,i){super(ZE(e),KE(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){$3(this,!1,t),t.forEach((i,r)=>{G3(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function T3(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Sa=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return T3(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new gs(r,o)}record(e,i=null){let r=this._reduceControls(e);return new $E(r,i)}control(e,i,r){let o={};return this.useNonNullable?(T3(i)?o=i:(o.validators=i,o.asyncValidators=r),new Un(e,$t(We({},o),{nonNullable:!0}))):new Un(e,i,r)}array(e,i,r){let o=e.map(s=>this._createControl(s));return new qE(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof Un)return e;if(e instanceof yf)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Dt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:im,useValue:e.callSetDisabledState??kv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({imports:[rL]})}}return n})(),nr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:J3,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:im,useValue:e.callSetDisabledState??kv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=qi({type:n})}static{this.\u0275inj=$i({imports:[rL]})}}return n})();var xc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}login(e,i){let r={email:e,password:i};return this.http.post(`${this.apiUrl}/login`,r,{observe:"response",responseType:"text"})}getRoleFromToken(e){return JSON.parse(atob(e.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]}sendTokenToBackend(e){let i={"X-Skip-Interceptor":"true"};return this.http.post(`${this.apiUrl}/Google`,{token:e},{headers:i,observe:"response",responseType:"text"})}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QQ(n,t){n&1&&(g(0,"p"),M(1," Email is required. "),_())}function eee(n,t){n&1&&(g(0,"p"),M(1," Please enter a valid email address. "),_())}function tee(n,t){if(n&1&&(g(0,"div",20),Pe(1,QQ,2,0,"p",21)(2,eee,2,0,"p",21),_()),n&2){let e,i,r=ce();A(),X("ngIf",(e=r.loginForm.get("email"))==null||e.errors==null?null:e.errors.required),A(),X("ngIf",(i=r.loginForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function nee(n,t){n&1&&(g(0,"p"),M(1," Password is required. "),_())}function iee(n,t){if(n&1&&(g(0,"div",20),Pe(1,nee,2,0,"p",21),_()),n&2){let e,i=ce();A(),X("ngIf",(e=i.loginForm.get("password"))==null||e.errors==null?null:e.errors.required)}}function ree(n,t){if(n&1&&(g(0,"div",20)(1,"p"),M(2),_()()),n&2){let e=ce();A(2),Ye(e.loginError)}}var oL=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i,this.passwordFieldType="password",this.loginForm=new gs({email:new Un("",[Gt.required,Gt.email]),password:new Un("",Gt.required)}),this.loginError=null}ngOnInit(){if(typeof document<"u"){let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>this.initializeGoogleSignIn(),document.head.appendChild(e)}}initializeGoogleSignIn(){google.accounts.id.initialize({client_id:"421903046401-5q20kb0ijen3tah9r68ngg2m1kmv66bj.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this)}),google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"})}handleCredentialResponse(e){console.log("Encoded JWT ID token: "+e.credential),this.sendTokenToBackend(e.credential)}sendTokenToBackend(e){this.loginService.sendTokenToBackend(e).subscribe(i=>{let r=i.body;if(r){localStorage.setItem("token",r);let s=JSON.parse(atob(r.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];s==="Admin"?this.router.navigate(["/panel-admin"]):s==="Patient"?this.router.navigate(["/patient-panel"]):s==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",s),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},i=>{i.status===401&&this.router.navigate(["/register"],{queryParams:{token:e}}),console.error("Login failed",i),this.loginError="Invalid email or password"})}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loginService.login(this.loginForm.value.email,this.loginForm.value.password).subscribe(e=>{let i=e.body;if(i){localStorage.setItem("token",i);let o=JSON.parse(atob(i.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];o==="Admin"?this.router.navigate(["/panel-admin"]):o==="Patient"?this.router.navigate(["/patient-panel"]):o==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",o),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},e=>{console.error("Login failed",e),this.loginError="Invalid email or password"})}static{this.\u0275fac=function(i){return new(i||n)($(xc),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-login"]],standalone:!0,features:[Je],decls:36,vars:6,consts:[[1,"login-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"login-left"],[1,"top"],["src","logo.png","alt","logo"],[3,"ngSubmit","formGroup"],["id","google-signin-button"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["class","error-message",4,"ngIf"],["for","password"],[1,"input-container"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["type","submit",1,"btn","btn-signin"],["routerLink","/register",1,"button"],[1,"login-right"],[1,"login-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"error-message"],[4,"ngIf"]],template:function(i,r){if(i&1&&(g(0,"div",0)(1,"a",1),me(2,"img",2),_(),g(3,"div",3)(4,"div",4),me(5,"img",5),g(6,"h2"),M(7,"Hospital Management App"),_()(),g(8,"form",6),le("ngSubmit",function(){return r.onSubmit()}),me(9,"div",7),g(10,"option"),M(11,"\u23AF\u23AF\u23AF Or Login with your email \u23AF\u23AF\u23AF"),_(),g(12,"label",8),M(13,"Email"),_(),me(14,"input",9),Pe(15,tee,3,2,"div",10),g(16,"label",11),M(17,"Password"),_(),g(18,"div",12),me(19,"input",13),g(20,"img",14),le("click",function(){return r.togglePasswordVisibility()}),_()(),Pe(21,iee,2,1,"div",10)(22,ree,3,1,"div",10),g(23,"button",15),M(24,"Login"),_()(),g(25,"p"),M(26," Don't have an account? "),g(27,"a",16),M(28,"Sign Up Now"),_()()(),g(29,"div",17)(30,"div",18)(31,"h3"),M(32,"Why should I login?"),_(),g(33,"p"),M(34," By logging in, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),_(),me(35,"img",19),_()()()),i&2){let o,s;A(8),X("formGroup",r.loginForm),A(7),X("ngIf",((o=r.loginForm.get("email"))==null?null:o.invalid)&&(((o=r.loginForm.get("email"))==null?null:o.dirty)||((o=r.loginForm.get("email"))==null?null:o.touched))),A(4),X("type",r.passwordFieldType),A(),X("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(),X("ngIf",((s=r.loginForm.get("password"))==null?null:s.invalid)&&(((s=r.loginForm.get("password"))==null?null:s.dirty)||((s=r.loginForm.get("password"))==null?null:s.touched))),A(),X("ngIf",r.loginError)}},dependencies:[Dt,Yt,Ii,Ri,Nt,Ft,qt,hn,nr,Cr,Dr,kt,jt,vt,Zt],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{display:flex;height:100vh}.login-left[_ngcontent-%COMP%], .login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.login-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.login-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.login-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.login-left[_ngcontent-%COMP%]   #google-signin-button[_ngcontent-%COMP%]{margin-top:1rem;background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-right[_ngcontent-%COMP%]{background-image:url(https://online-learning-college.com/wp-content/uploads/2023/01/Qualifications-to-Become-a-Doctor--scaled.jpg);background-size:cover;background-position:center;color:#000}.login-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.login-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.login-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}']})}}return n})();var Au=class extends Error{};Au.prototype.name="InvalidTokenError";function oee(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function see(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return oee(t)}catch{return atob(t)}}function Pa(n,t){if(typeof n!="string")throw new Au("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,i=n.split(".")[e];if(typeof i!="string")throw new Au(`Invalid token specified: missing part #${e+1}`);let r;try{r=see(i)}catch(o){throw new Au(`Invalid token specified: invalid base64 for part #${e+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new Au(`Invalid token specified: invalid json for part #${e+1} (${o.message})`)}}var sL=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}register(e,i,r,o){let s={email:e,phoneNumber:i+r,password:o};return console.log("Registering user",s),this.http.post(`${this.apiUrl}/RegisterUserAsPatient`,s,{observe:"response",responseType:"text"}).pipe(_i(a=>{let l=a.body;l&&localStorage.setItem("authToken",l)}))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aL=(()=>{class n{constructor(e,i,r){this.registerService=e,this.router=i,this.route=r,this.passwordFieldType="password",this.confirmPasswordFieldType="password",this.isModalVisible=!1,this.registerForm=new gs({email:new Un("",[Gt.required,Gt.email]),identifier:new Un("",Gt.required),phoneNumber:new Un("",Gt.required),password:new Un("",Gt.required),confirmPassword:new Un("",Gt.required),acceptPolicy:new Un(!1,Gt.requiredTrue)})}ngOnInit(){this.route.queryParams.subscribe(e=>{if(Object.keys(e).length>0&&(console.log("Query parameters:",e),e.token)){let i=Pa(e.token);i&&i.email&&this.registerForm.get("email")?.setValue(i.email)}})}togglePasswordVisibility(e){e==="password"?this.passwordFieldType=this.passwordFieldType==="password"?"text":"password":e==="confirm-password"&&(this.confirmPasswordFieldType=this.confirmPasswordFieldType==="password"?"text":"password")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}if(this.registerForm.value.password!==this.registerForm.value.confirmPassword){alert("Passwords do not match");return}this.registerService.register(this.registerForm.value.email,this.registerForm.value.identifier,this.registerForm.value.phoneNumber,this.registerForm.value.password).subscribe(e=>{console.log("Registration successful",e),this.router.navigate(["/login"])},e=>{console.error("Registration failed",e),alert("Registration failed - "+e.error)})}openPrivacyPolicy(e){e.preventDefault(),this.isModalVisible=!0,console.log("Modal opened:",this.isModalVisible)}closeModal(){this.isModalVisible=!1,console.log("Modal closed:",this.isModalVisible)}static{this.\u0275fac=function(i){return new(i||n)($(sL),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-register"]],standalone:!0,features:[Je],decls:204,vars:8,consts:[[1,"register-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"register-left"],[1,"top"],["src","logo.png","alt","Hospital Management App Logo"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","identifier"],[1,"identifier-container"],["type","text","id","identifier","formControlName","identifier","placeholder","+1","required","",1,"identifier-input"],["type","tel","id","phone","formControlName","phoneNumber","placeholder","123456789","required",""],[1,"input-container"],["for","password"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["for","confirm-password"],["id","confirm-password","formControlName","confirmPassword","placeholder","******","required","",3,"type"],["type","checkbox","id","acceptPolicy","formControlName","acceptPolicy","required",""],["for","acceptPolicy"],["routerLink","/#",3,"click"],["type","submit",1,"btn","btn-register",3,"disabled"],["routerLink","/login"],[1,"register-right"],[1,"register-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"modal-container"],[1,"modal-content"],[3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"a",1),me(2,"img",2),_(),g(3,"div",3)(4,"div",4),me(5,"img",5),g(6,"h2"),M(7,"Hospital Management App"),_()(),g(8,"form",6),le("ngSubmit",function(){return r.onSubmit()}),g(9,"label",7),M(10,"Email"),_(),me(11,"input",8),g(12,"label",9),M(13,"Phone Number"),_(),g(14,"div",10),me(15,"input",11)(16,"input",12),_(),g(17,"div",13)(18,"label",14),M(19,"Password"),_(),me(20,"input",15),g(21,"img",16),le("click",function(){return r.togglePasswordVisibility("password")}),_()(),g(22,"div",13)(23,"label",17),M(24,"Confirm Password"),_(),me(25,"input",18),g(26,"img",16),le("click",function(){return r.togglePasswordVisibility("confirm-password")}),_()(),g(27,"div",13),me(28,"input",19),g(29,"label",20),M(30," I accept the "),g(31,"a",21),le("click",function(s){return r.openPrivacyPolicy(s)}),M(32,"Privacy Policy"),_()()(),g(33,"button",22),M(34,"Register"),_()(),g(35,"p"),M(36,"Already have an account? "),g(37,"a",23),M(38,"Login Now"),_()()(),g(39,"div",24)(40,"div",25)(41,"h3"),M(42,"Why should I register?"),_(),g(43,"p"),M(44," By registering, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),_(),me(45,"img",26),_()()(),g(46,"div",27)(47,"div",28)(48,"h1"),M(49,"Privacy Policy"),_(),g(50,"p"),M(51,"Last updated: 11 de Dezembro de 2024"),_(),g(52,"section")(53,"h2"),M(54,"Introdu\xE7\xE3o"),_(),g(55,"p"),M(56," No mundo da sa\xFAde, a confidencialidade \xE9 fundamental. A prote\xE7\xE3o de dados de sa\xFAde \xE9 um direito fundamental de cada paciente, consagrado no Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD) (Artigo 4\xBA, n\xBA Artigo 32\xBA). A gest\xE3o manual ou sistemas desatualizados podem levar \xE0 perda de dados, acesso n\xE3o autorizado e incumprimento do RGPD. As consequ\xEAncias podem ser graves: multas elevadas, processos judiciais e danos \xE0 reputa\xE7\xE3o. A nossa equipa \xE9 composta pelos especialistas em seguran\xE7a inform\xE1tica e gest\xE3o de dados, Vasco Sousa, Jo\xE3o Pereira e Tiago Sousa e pela advogada especializada em prote\xE7\xE3o de dados, Maria Medina e hoje estamos aqui com o objetivo de apresentar o Hospital Management App, um sistema inovador que garante a gest\xE3o eficiente e segura de recursos e a marca\xE7\xE3o de consultas cir\xFArgicas, com total respeito pela privacidade dos seus pacientes (Artigo 13 e 14\xBA). O Hospital Management App foi concebido com base nos princ\xEDpios de prote\xE7\xE3o de dados desde a conce\xE7\xE3o e por defeito (Artigo 25\xBA) Este minimiza a recolha e o tratamento de dados, utilizando a pseudonimiza\xE7\xE3o para proteger a identidade dos pacientes, encripta todos os dados, garantindo a sua confidencialidade e integridade, controla o acesso aos dados, permitindo apenas a utilizadores autorizados aceder \xE0 informa\xE7\xE3o necess\xE1ria para o desempenho das suas fun\xE7\xF5es e mant\xE9m registos detalhados de todas as opera\xE7\xF5es de tratamento, permitindo auditorias e a demonstra\xE7\xE3o de conformidade com o RGPD (Artigo 24\xBA e 28\xBA) Com o Hospital Management App, pode ter a certeza de que est\xE1 a otimizar os seus processos, reduzindo custos e protegendo os dados sens\xEDveis dos seus pacientes, em total conformidade com o RGPD "),_()(),g(57,"section")(58,"h2"),M(59,"Respons\xE1vel pelo Tratamento de Dados"),_(),g(60,"p")(61,"strong"),M(62,"Nome da Empresa/Organiza\xE7\xE3o:"),_(),M(63," Hospital Management App"),me(64,"br"),g(65,"strong"),M(66,"Contato:"),_(),M(67," 1211503@isep.ipp.pt"),me(68,"br"),g(69,"strong"),M(70,"Encarregado de Prote\xE7\xE3o de Dados:"),_(),M(71," Jo\xE3o Pereira "),_()(),g(72,"section")(73,"h2"),M(74,"Dados Pessoais Coletados"),_(),g(75,"ul")(76,"li"),M(77,"Identifica\xE7\xE3o (nome, email, NIF)"),_(),g(78,"li"),M(79,"Dados de contato (n\xFAmero de telem\xF3vel pessoal e de emerg\xEAncia, e-mail)"),_(),g(80,"li"),M(81,"Dados m\xE9dicos (hist\xF3rico de sa\xFAde, alergias)"),_()()(),g(82,"section")(83,"h2"),M(84,"Processamento dos Dados pessoais"),_(),g(85,"p"),M(86,"Os dados passam por diversos tipos de processamento, incluindo:"),_(),g(87,"ul")(88,"li"),M(89,"Recolha: Os dados s\xE3o obtidos atrav\xE9s de diferentes meios, como formul\xE1rios de registo, prontu\xE1rios m\xE9dicos ou sistemas de agendamento."),_(),g(90,"li"),M(91,"Registo: Os dados recolhidos s\xE3o inseridos no Hospital Management App, nos campos apropriados de cada funcionalidade."),_(),g(92,"li"),M(93,"Organiza\xE7\xE3o: Os dados s\xE3o estruturados e categorizados dentro do sistema, de forma l\xF3gica e eficiente, facilitando a sua consulta e utiliza\xE7\xE3o. "),_(),g(94,"li"),M(95,"Consulta: Os dados s\xE3o acedidos e visualizados pelos utilizadores autorizados do Hospital Management App, de acordo com as suas fun\xE7\xF5es e permiss\xF5es. "),_(),g(96,"li"),M(97,"Utiliza\xE7\xE3o: Os dados s\xE3o utilizados para as finalidades espec\xEDficas para as quais foram recolhidos, como a gest\xE3o de informa\xE7\xF5es, o planeamento e agendamento cir\xFArgico, a visualiza\xE7\xE3o do hospital, a garantia da continuidade das opera\xE7\xF5es e a conformidade com o RGPD."),_(),g(98,"li"),M(99,"Quando aplic\xE1vel, apagamento: Os dados s\xE3o eliminados do sistema quando deixam de ser necess\xE1rios para as finalidades para as quais foram recolhidos, ou quando o titular dos dados exerce o seu direito de apagamento (direito a ser esquecido)"),_(),g(100,"p"),M(101,"Todas estas opera\xE7\xF5es respeitam os princ\xEDpios do RGPD, como a limita\xE7\xE3o das finalidades e a integridade e confidencialidade dos dados (Artigo 5.\xBA)"),_()()(),g(102,"section")(103,"h2"),M(104,"Finalidades do Tratamento"),_(),g(105,"p"),M(106,"Utilizamos os seus dados pessoais para:"),_(),g(107,"ul")(108,"li"),M(109,"Gest\xE3o de Informa\xE7\xF5es Essenciais"),_(),g(110,"li"),M(111,"Planeamento e Agendamento Cir\xFArgico"),_()()(),g(112,"section")(113,"h2"),M(114,"Base Legal para o Tratamento"),_(),g(115,"p"),M(116,"O tratamento de dados pessoais pode ser baseado nas seguintes bases legais:"),_(),g(117,"ul")(118,"li"),M(119,"Execu\xE7\xE3o de um contrato"),_(),g(120,"li"),M(121,"Cumprimento de uma obriga\xE7\xE3o legal"),_(),g(122,"li"),M(123,"Consentimento expl\xEDcito (para finalidades espec\xEDficas, como marketing)"),_(),g(124,"li"),M(125,"Interesses leg\xEDtimos da aplica\xE7\xE3o"),_()()(),g(126,"section")(127,"h2"),M(128,"Compartilhamento de Dados"),_(),g(129,"p"),M(130,"Os seus dados podem ser compartilhados com:"),_(),g(131,"ul")(132,"li"),M(133,"Parceiros e prestadores de servi\xE7os que auxiliam na execu\xE7\xE3o das nossas atividades"),_(),g(134,"li"),M(135,"Autoridades legais, quando exigido por lei"),_(),g(136,"li"),M(137,"Familiares quando se encontrar com limita\xE7\xF5es f\xEDsicas e ps\xEDcol\xF3gicas"),_()()(),g(138,"section")(139,"h2"),M(140,"Reten\xE7\xE3o de Dados"),_(),g(141,"p"),M(142," Os seus dados pessoais ser\xE3o armazenados apenas pelo tempo necess\xE1rio para cumprir as finalidades descritas nesta Pol\xEDtica ou conforme exigido por lei. Ap\xF3s o per\xEDodo de reten\xE7\xE3o, os dados ser\xE3o apagados ou anonimizados. "),_()(),g(143,"section")(144,"h2"),M(145,"Direitos do Titular dos Dados"),_(),g(146,"p"),M(147,"Voc\xEA possui os seguintes direitos em rela\xE7\xE3o aos seus dados pessoais:"),_(),g(148,"ul")(149,"li"),M(150,"Acesso aos dados tratados"),_(),g(151,"li"),M(152,"Retifica\xE7\xE3o de dados incorretos ou desatualizados"),_(),g(153,"li"),M(154,"Exclus\xE3o dos dados (direito ao esquecimento)"),_(),g(155,"li"),M(156,"Restri\xE7\xE3o do tratamento"),_(),g(157,"li"),M(158,"Portabilidade dos dados"),_(),g(159,"li"),M(160,"Oposi\xE7\xE3o ao tratamento em determinadas circunst\xE2ncias"),_(),g(161,"li"),M(162,"Retirada do consentimento, quando aplic\xE1vel"),_()(),g(163,"p"),M(164,"Para exercer os seus direitos, entre em contato connosco pelo e-mail "),g(165,"strong"),M(166,"1211503@isep.ipp.pt"),_(),M(167,". "),_()(),g(168,"section")(169,"h2"),M(170,"Transfer\xEAncia Internacional de Dados"),_(),g(171,"p"),M(172," Se houver necessidade de transfer\xEAncia de dados para fora do Espa\xE7o Econ\xF4mico Europeu (EEE), garantiremos que os seus dados estar\xE3o protegidos com medidas adequadas, como cl\xE1usulas contratuais padr\xE3o ou outras bases legais reconhecidas pelo RGPD. "),_()(),g(173,"section")(174,"h2"),M(175,"Seguran\xE7a dos Dados"),_(),g(176,"p"),M(177," Implementamos medidas t\xE9cnicas e organizacionais para proteger os seus dados pessoais contra acessos n\xE3o autorizados, perda, altera\xE7\xE3o ou destrui\xE7\xE3o. "),_()(),g(178,"section")(179,"h2"),M(180,"Altera\xE7\xF5es \xE0 Pol\xEDtica de Privacidade"),_(),g(181,"p"),M(182," Podemos atualizar esta Pol\xEDtica de Privacidade periodicamente. Notificaremos sobre mudan\xE7as significativas, caso necess\xE1rio. "),_()(),g(183,"section")(184,"h2"),M(185,"Reclama\xE7\xF5es"),_(),g(186,"p"),M(187," Se acreditar que os seus direitos foram violados, pode entrar em contato connosco para esclarecimentos. Al\xE9m disso, voc\xEA tem o direito de apresentar uma reclama\xE7\xE3o junto \xE0 autoridade supervisora do seu pa\xEDs. "),_()(),g(188,"section")(189,"h2"),M(190,"Contato"),_(),g(191,"p"),M(192," Para quaisquer d\xFAvidas, entre em contato conosco: "),_(),g(193,"ul")(194,"li")(195,"strong"),M(196,"E-mail:"),_(),M(197," 1211503@isep.ipp.pt"),_(),g(198,"li")(199,"strong"),M(200,"Telefone:"),_(),M(201," +351912345678"),_()()(),g(202,"button",29),le("click",function(){return r.closeModal()}),M(203,"Close"),_()()()),i&2&&(A(8),X("formGroup",r.registerForm),A(12),X("type",r.passwordFieldType),A(),X("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(4),X("type",r.confirmPasswordFieldType),A(),X("src",r.confirmPasswordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(7),X("disabled",!r.registerForm.valid),A(13),wo("active",r.isModalVisible))},dependencies:[Dt,Yt,Nt,nm,Ft,qt,hn,QE,nr,Cr,Dr,kt,jt,vt],styles:['.register-container[_ngcontent-%COMP%]{display:flex;height:100vh}.register-left[_ngcontent-%COMP%], .register-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.register-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.register-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.register-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.identifier-container[_ngcontent-%COMP%]{display:flex;gap:2px}.identifier-input[_ngcontent-%COMP%]{width:50px}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.register-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]{background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;margin-right:.3rem}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]:hover{background-color:#0056b3}.register-right[_ngcontent-%COMP%]{background-image:url("https://www.verywellhealth.com/thmb/GXgk5oXpQWDe0N_-UHh3Aa_wCqk=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-519516073-962e173b7e2149d69c4f66915fd491f6.jpg");background-size:cover;background-position:center;color:#000}.register-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.register-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.register-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.register-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:none;justify-content:center;align-items:center}.modal-container.active[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:500px;max-width:90%;height:500px;overflow-y:auto}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}input[type=checkbox][_ngcontent-%COMP%]{display:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;padding-left:25px;cursor:pointer;font-size:14px;-webkit-user-select:none;user-select:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:16px;height:16px;border:2px solid #ccc;background-color:#fff;transition:background-color .3s,border-color .3s}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#4caf50;border-color:#4caf50}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:50%;transform:translateY(-50%) rotate(45deg);width:5px;height:10px;border:solid white;border-width:0 2px 2px 0}']})}}return n})();var lL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-home"]],standalone:!0,features:[Je],decls:91,vars:0,consts:[[1,"hero"],["src","hero.gif","alt","Hero Background",1,"hero-background"],[1,"logo"],["src","logo.png","alt","Hospital Logo"],[1,"buttons"],["routerLink","/login",1,"btn"],["routerLink","/register",1,"btn"],["src","arrow.png","alt","Hero Image","onclick","document.querySelector('.articles-container').scrollIntoView({ behavior: 'smooth' });",1,"hero-img"],[1,"articles-container"],[1,"articles"],["src","lifestyle.jpg","alt","Article 1 Image"],["routerLink","/"],["src","meds.jpg","alt","Article 2 Image"],["src","stress.jpg","alt","Article 3 Image"],[1,"footer"],[1,"container"],[1,"row"],[1,"footer-col"],["routerLink","/about-us"],["routerLink","/our-services"],["routerLink","/privacy-policy"],["routerLink","/faq"],["routerLink","/patient-portal"],["routerLink","/doctor-directory"],["routerLink","/health-library"],["routerLink","/emergency-services"],[1,"social"],["href","mailto:support@hospital.com"],["href","tel:+1234567890"]],template:function(i,r){i&1&&(g(0,"body")(1,"div",0),me(2,"img",1),g(3,"div",2),me(4,"img",3),g(5,"p"),M(6,"Hospital Management App"),_()(),g(7,"div",4)(8,"a",5),M(9,"Login"),_(),g(10,"a",6),M(11,"Register"),_()(),me(12,"img",7),_(),g(13,"div",8)(14,"h1"),M(15,"Health & Wellness Articles"),_(),g(16,"section",9)(17,"article"),me(18,"img",10),g(19,"h2"),M(20,"5 Tips for a Healthy Lifestyle"),_(),g(21,"p"),M(22,"Discover essential tips to maintain a healthy lifestyle, including diet, exercise, and mental well-being."),_(),g(23,"a",11),M(24,"Read more"),_()(),g(25,"article"),me(26,"img",12),g(27,"h2"),M(28,"Understanding Common Medications"),_(),g(29,"p"),M(30,"Learn about the most commonly prescribed medications, their uses, and potential side effects."),_(),g(31,"a",11),M(32,"Read more"),_()(),g(33,"article"),me(34,"img",13),g(35,"h2"),M(36,"How to Manage Stress Effectively"),_(),g(37,"p"),M(38,"Explore various techniques and strategies to manage stress and improve your overall well-being."),_(),g(39,"a",11),M(40,"Read more"),_()()()()(),g(41,"footer",14)(42,"div",15)(43,"div",16)(44,"div",17)(45,"h4"),M(46,"company"),_(),g(47,"ul")(48,"li")(49,"a",18),M(50,"About Us"),_()(),g(51,"li")(52,"a",19),M(53,"Our Services"),_()(),g(54,"li")(55,"a",20),M(56,"Privacy Policy"),_()()()(),g(57,"div",17)(58,"h4"),M(59,"get help"),_(),g(60,"ul")(61,"li")(62,"a",21),M(63,"FAQ"),_()()()(),g(64,"div",17)(65,"h4"),M(66,"resources"),_(),g(67,"ul")(68,"li")(69,"a",22),M(70,"Patient Portal"),_()(),g(71,"li")(72,"a",23),M(73,"Doctor Directory"),_()(),g(74,"li")(75,"a",24),M(76,"Health Library"),_()(),g(77,"li")(78,"a",25),M(79,"Emergency Services"),_()()()(),g(80,"div",17)(81,"h4"),M(82,"contact us"),_(),g(83,"div",26)(84,"ul")(85,"li")(86,"a",27),M(87,"support@hospital.com"),_()(),g(88,"li")(89,"a",28),M(90,"+351 912345678"),_()()()()()()()())},dependencies:[kt,jt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;box-sizing:border-box;height:100%}.hero[_ngcontent-%COMP%]{position:relative;text-align:center;padding:50px 20px;color:#fff;opacity:.9;height:100vh}.hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;display:flex;align-items:center;max-width:500px;max-height:60px;margin:10px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:20px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5em;font-family:Poppins,sans-serif;padding:0;margin:0;max-width:440px}.buttons[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;max-width:500px;margin:10px;display:flex;align-items:center;justify-content:center}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;margin:0 10px;border:2px solid #ffffff;transition:all .3s;border-radius:0;width:95px;font-family:Poppins,sans-serif;font-size:.8em}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff;color:#333;border-radius:0}.hero-img[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-50%);margin-bottom:1.5rem;height:40px;cursor:pointer;animation:_ngcontent-%COMP%_piscar 3s infinite}h1[_ngcontent-%COMP%]{margin:0;font-size:2.5em;font-family:Poppins,sans-serif}p[_ngcontent-%COMP%]{font-size:1.2em;font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_piscar{0%,to{opacity:1}50%{opacity:0}}.articles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex-wrap:wrap;padding:20px;height:100vh}.articles-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2em;font-family:Poppins,sans-serif;margin-bottom:2rem;color:#fff}.articles[_ngcontent-%COMP%]{width:50vw;height:fit-content;display:grid;grid-template-columns:repeat(3,minmax(200px,1fr));gap:30px;padding:10px;place-items:center}article[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin:2vh 1vw;padding:2vh 1vw;width:100%;height:100%;transition:transform .3s;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden}article[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:5px;flex-shrink:0;margin-bottom:5px}article[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}article[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;color:#333;margin:5px 0;flex-shrink:0;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;flex-grow:1;margin:5px 0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:5px;color:#007bff;text-decoration:none;flex-shrink:0}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#go-to-article[_ngcontent-%COMP%]{position:absolute;top:10px;scroll-margin-top:60px}.container[_ngcontent-%COMP%]{max-width:1170px;margin:auto}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer[_ngcontent-%COMP%]{background-color:#153e4c;padding:70px 0}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]{width:25%;padding:0 15px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;color:#fff;text-transform:capitalize;margin-bottom:35px;font-weight:500;position:relative}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:-10px;background-color:#e91e63;height:2px;box-sizing:border-box;width:50px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#bbb;text-decoration:none;font-weight:300;display:block;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;padding-left:8px}@media (max-width: 767px){.footer-col[_ngcontent-%COMP%]{width:50%;margin-bottom:30px}}@media (max-width: 574px){.footer-col[_ngcontent-%COMP%]{width:100%}}']})}}return n})();var cL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-not-found"]],standalone:!0,features:[Je],decls:7,vars:0,consts:[[1,"container"],[1,"screen"],["src","404-image.png","alt","Page not found image"],[1,"center"],["routerLink","/",1,"button"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1),me(2,"img",2),g(3,"div",3)(4,"a",4)(5,"span"),M(6," Go to Home Page "),_()()()()())},dependencies:[kt,jt],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.screen[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#123646;box-shadow:0 4px 8px #0000001a;border-radius:8px;height:fit-content;width:50%}img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}p[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:1em}a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-weight:700}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.image-container[_ngcontent-%COMP%]{margin-top:20px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}a.button[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;position:relative;height:50px;padding:0 30px;border:3px solid #ffffff;background:#37b0b4;-webkit-user-select:none;user-select:none;white-space:nowrap;transition:all .05s linear;font-family:inherit;text-decoration:none;color:inherit}a.button[_ngcontent-%COMP%]:before, a.button[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#37b0b4;transition:all .2s linear}a.button[_ngcontent-%COMP%]:before{width:calc(100% + 6px);height:calc(100% - 16px);top:8px;left:-3px}a.button[_ngcontent-%COMP%]:after{width:calc(100% - 16px);height:calc(100% + 6px);top:-3px;left:8px}a.button[_ngcontent-%COMP%]:hover{cursor:crosshair}a.button[_ngcontent-%COMP%]:active{transform:scale(.95)}a.button[_ngcontent-%COMP%]:hover:before{height:calc(100% - 32px);top:16px}a.button[_ngcontent-%COMP%]:hover:after{width:calc(100% - 32px);left:16px}a.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;z-index:3;position:relative;font-weight:600;display:flex;justify-content:center;align-items:center}']})}}return n})();var ui=(()=>{class n{constructor(){this.panelIdSource=new Ei("default-panel"),this.panelId$=this.panelIdSource.asObservable()}setPanelId(e){this.panelIdSource.next(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ta=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user",this.settingsIdSource=new Ei("default-settings"),this.settingsId$=this.settingsIdSource.asObservable()}setSettingsId(e){this.settingsIdSource.next(e)}deleteAccount(e){return this.http.post(`${this.apiUrl}/RequestDelete`,JSON.stringify(e),{headers:{"Content-Type":"application/json"},observe:"response"})}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api",this.profileIdSource=new Ei("default-profile"),this.profileId$=this.profileIdSource.asObservable()}setProfileId(e){this.profileIdSource.next(e)}getCode(e){let i={email:e};return this.http.get(`${this.apiUrl}/User/GetCode`,{params:i})}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var eS=n=>["/",n],lee=()=>["/patient-policy"],Vt=(()=>{class n{constructor(e,i,r){this.panelService=e,this.settingsService=i,this.profileService=r,this.panelId="",this.settingsId="",this.profileId="",this.name="",this.role="",this.privacyId=""}ngOnInit(){this.panelService.panelId$.subscribe(i=>{this.panelId=i}),this.settingsService.settingsId$.subscribe(i=>{this.settingsId=i}),this.profileService.profileId$.subscribe(i=>{this.profileId=i});let e=localStorage.getItem("token");if(e){console.log("Token:",e);let i=Pa(e);console.log("Decoded Token:",i),this.name=i["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],this.role=i["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],console.log("Name:",this.name),console.log("Role:",this.role)}}logout(){localStorage.removeItem("token")}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(Ta),$(bc))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-sidebar"]],standalone:!0,features:[Je],decls:50,vars:13,consts:[[1,"sidebar"],[1,"sidebar-header"],["src","logo.png","alt","logo"],[1,"sidebar-links"],[1,"menu-separator"],[3,"routerLink"],["src","dashboard.png","alt","icon"],["routerLink","/notifications"],["src","notifications.png","alt","icon"],["src","profile.png","alt","icon"],["src","settings.png","alt","icon"],["src","insurance.png","alt","icon",1,"colored-icon"],["routerLink","/",3,"click"],["src","logout.png","alt","icon"],[1,"user-account"],[1,"user-profile"],["src","user.png","alt","Profile Image"],[1,"user-detail"]],template:function(i,r){i&1&&(g(0,"aside",0)(1,"div",1),me(2,"img",2),g(3,"h2"),M(4,"Hospital Management App"),_()(),g(5,"ul",3)(6,"h4")(7,"span"),M(8,"Main Menu"),_(),me(9,"div",4),_(),g(10,"li")(11,"a",5),me(12,"img",6),M(13,"User Panel"),_()(),g(14,"h4")(15,"span"),M(16,"General"),_(),me(17,"div",4),_(),g(18,"li")(19,"a",7),me(20,"img",8),M(21,"Notifications"),_()(),g(22,"h4")(23,"span"),M(24,"Account"),_(),me(25,"div",4),_(),g(26,"li")(27,"a",5),me(28,"img",9),M(29,"Profile"),_()(),g(30,"li")(31,"a",5),me(32,"img",10),M(33,"Settings"),_()(),g(34,"li")(35,"a",5),me(36,"img",11),M(37,"Privacy Policy "),_()(),g(38,"li")(39,"a",12),le("click",function(){return r.logout()}),me(40,"img",13),M(41,"Logout"),_()()(),g(42,"div",14)(43,"div",15),me(44,"img",16),g(45,"div",17)(46,"h3"),M(47),_(),g(48,"span"),M(49),_()()()()()),i&2&&(A(11),X("routerLink",ni(6,eS,r.panelId)),A(16),X("routerLink",ni(8,eS,r.profileId)),A(4),X("routerLink",ni(10,eS,r.settingsId)),A(4),X("routerLink",Hi(12,lee)),A(12),Ye(r.name),A(2),Ye(r.role))},dependencies:[kt,jt],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;width:85px;display:flex;overflow-x:hidden;flex-direction:column;background:#0b0d16;padding:25px 20px;transition:all .4s ease;z-index:1000}.sidebar[_ngcontent-%COMP%]:hover{width:400px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:600;white-space:nowrap;margin-left:23px}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-weight:500;white-space:nowrap;margin:10px 0;position:relative}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover}.sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;width:100%;height:1px;transform:scaleX(1);transform:translateY(-50%);background:#4f52ba;transform-origin:right;transition-delay:.2s}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{transition-delay:0s;transform:scaleX(0)}.sidebar-links[_ngcontent-%COMP%]{list-style:none;margin-top:20px;height:80%;overflow-y:auto;scrollbar-width:none}.sidebar-links[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0 20px;color:#fff;font-weight:500;white-space:nowrap;padding:15px 10px;text-decoration:none;transition:.2s ease}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#161a2d;background:#fff;border-radius:4px}.user-account[_ngcontent-%COMP%]{margin-top:auto;padding:12px 10px;margin-left:-10px}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;color:#161a2d}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.user-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.user-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.775rem;font-weight:600}.user-detail[_ngcontent-%COMP%]{margin-left:23px;white-space:nowrap}.sidebar[_ngcontent-%COMP%]:hover   .user-account[_ngcontent-%COMP%]{background:#fff;border-radius:4px}.colored-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover;filter:invert(50%) sepia(100%) saturate(500%) hue-rotate(200deg)}"]})}}return n})();var _s=(()=>{class n{deleteOperationType(e){throw new Error("Method not implemented.")}constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}getSpecializations(){return this.http.get(`${this.apiUrl}/Specialization`)}createOperationType(e){return this.http.post(`${this.apiUrl}/OperationType`,e)}getStaffs(e){return this.http.get(`${this.apiUrl}/Specialization/staff/${encodeURIComponent(e)}`).pipe(_n(i=>(console.error("Error fetching staff:",i),In(()=>new Error("Failed to fetch staff members")))))}editOperationType(e,i){return this.http.put(`${this.apiUrl}/OperationType/${e}`,i)}getOperationTypeByName(e){return this.http.get(`${this.apiUrl}/OperationType/name/${e}`)}deactivateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/deactivate/${e}`,{},{responseType:"text"}).pipe(_n(i=>(console.error("Deactivation failed:",i),In(()=>i))))}activateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/activate/${e}`,{},{responseType:"text"}).pipe(_n(i=>(console.error("Activation failed:",i),In(()=>i))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var cee=()=>["/create-operation-type"],uee=()=>["/panel-admin"],dee=n=>({deactivated:n}),fee=n=>["/update-operation-type",n];function hee(n,t){if(n&1&&(g(0,"td"),M(1),_()),n&2){let e=ce(2).$implicit;Xi("rowspan",e.specializations.length),A(),xt(" ",e.name," ")}}function pee(n,t){if(n&1&&(g(0,"td"),M(1),_()),n&2){let e=ce(2).$implicit;Xi("rowspan",e.specializations.length),A(),xt(" ",e.estimatedDuration," ")}}function mee(n,t){if(n&1&&(g(0,"div"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" \u{1F464} ",e.fullName," ")}}function gee(n,t){if(n&1&&(g(0,"div",10),Pe(1,mee,2,1,"div",4),_()),n&2){let e=ce().$implicit,i=ce(2);A(),X("ngForOf",i.staffs[e.specOption])}}function _ee(n,t){if(n&1){let e=dt();g(0,"a",14),le("click",function(){Oe(e);let r=ce(3).$implicit,o=ce();return Ae(o.deactivateOperationType(r.name))}),M(1,"Deactivate"),_()}}function vee(n,t){if(n&1){let e=dt();g(0,"a",15),le("click",function(){Oe(e);let r=ce(3).$implicit,o=ce();return Ae(o.activateOperationType(r.name))}),M(1,"Activate"),_()}}function yee(n,t){if(n&1&&(g(0,"td")(1,"a",11),M(2,"Edit"),_(),Pe(3,_ee,2,0,"a",12)(4,vee,2,0,"a",13),_()),n&2){let e=ce(2).$implicit;Xi("rowspan",e.specializations.length),A(),X("routerLink",ni(4,fee,e.name)),A(2),X("ngIf",!e.isDeactivated),A(),X("ngIf",e.isDeactivated)}}function xee(n,t){if(n&1){let e=dt();bu(0),g(1,"tr",6),Pe(2,hee,2,2,"td",7)(3,pee,2,2,"td",7),g(4,"td"),M(5),_(),g(6,"td")(7,"button",8),le("click",function(){let r=Oe(e).$implicit,o=ce().$implicit,s=ce();return Ae(s.loadStaffForSpecialization(o.name,r.specOption))}),M(8," Show Staff "),_(),Pe(9,gee,2,1,"div",9),_(),Pe(10,yee,5,6,"td",7),_(),Cu()}if(n&2){let e=t.$implicit,i=t.index,r=ce().$implicit,o=ce();A(),X("ngClass",ni(6,dee,r.isDeactivated)),A(),X("ngIf",i===0),A(),X("ngIf",i===0),A(2),Ye(e.specOption),A(4),X("ngIf",o.isStaffVisible(r.name,e.specOption)),A(),X("ngIf",i===0)}}function bee(n,t){if(n&1&&(bu(0),Pe(1,xee,11,8,"ng-container",4),Cu()),n&2){let e=t.$implicit;A(),X("ngForOf",e.specializations)}}var uL=(()=>{class n{constructor(e,i){this.operationTypeService=e,this.panelService=i,this.operationTypes=[],this.staffs={},this.visibleStaffs={}}ngOnInit(){this.fetchOperationTypes(),this.panelService.setPanelId("panel-admin")}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.operationTypes=e,console.log("Operation types fetched:",e)},e=>{console.error("Error fetching operation types",e)})}loadStaffForSpecialization(e,i){this.staffs[i]?this.toggleStaffVisibility(e,i):this.operationTypeService.getStaffs(i).subscribe({next:r=>{Array.isArray(r)&&(this.staffs[i]=r.map(o=>$t(We({},o),{fullName:o.fullName||`${o.firstName} ${o.lastName}`}))),this.toggleStaffVisibility(e,i)},error:r=>{console.error("Error fetching staff:",r),this.staffs[i]=[]}})}toggleStaffVisibility(e,i){this.visibleStaffs[e]||(this.visibleStaffs[e]={}),this.visibleStaffs[e][i]=!this.visibleStaffs[e][i]}isStaffVisible(e,i){return this.visibleStaffs[e]&&this.visibleStaffs[e][i]}onEdit(e){console.log("Editing operation type:",e),this.operationTypeService.editOperationType(e.name,e).subscribe(()=>{alert("Operation type updated successfully"),this.fetchOperationTypes()},i=>{console.error("Error updating operation type",i),alert("Error updating operation type")})}deactivateOperationType(e){window.confirm(`Are you sure you want to deactivate the operation type: ${e}?`)&&this.operationTypeService.deactivateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!0,alert("Operation type deactivated successfully"))},r=>{console.error("Error deactivating operation type:",r)})}activateOperationType(e){window.confirm(`Are you sure you want to activate the operation type: ${e}?`)&&this.operationTypeService.activateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!1,alert("Operation type activated successfully"))},r=>{console.error("Error activating operation type:",r)})}static{this.\u0275fac=function(i){return new(i||n)($(_s),$(ui))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-operation-types"]],standalone:!0,features:[Je],decls:24,vars:5,consts:[[1,"operationType-container"],[1,"operation-title"],[1,"btn","btn-create",3,"routerLink"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-back",3,"routerLink"],[3,"ngClass"],[4,"ngIf"],[1,"btn","btn-info",3,"click"],["class","staff-members",4,"ngIf"],[1,"staff-members"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)","class","btn btn-delete",3,"click",4,"ngIf"],["href","javascript:void(0)","class","btn btn-activate",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-activate",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h2",1),M(3,"Operation Types"),_(),g(4,"div")(5,"a",2),M(6,"Create Operation Type"),_(),g(7,"table",3)(8,"thead")(9,"tr")(10,"th"),M(11,"Operation Type"),_(),g(12,"th"),M(13,"Estimated Time"),_(),g(14,"th"),M(15,"Specialization"),_(),g(16,"th"),M(17,"Staff Members"),_(),g(18,"th"),M(19,"Actions"),_()()(),g(20,"tbody"),Pe(21,bee,2,1,"ng-container",4),_()(),g(22,"a",5),M(23,"Back to Dashboard"),_()()()),i&2&&(A(5),X("routerLink",Hi(3,cee)),A(16),X("ngForOf",r.operationTypes),A(),X("routerLink",Hi(4,uee)))},dependencies:[vt,Eo,Mn,Zt,kt,jt,Vt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;max-width:1400px;font-family:Arial,sans-serif;background-color:#f8f8f8;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;align-items:center}.operation-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:2rem;color:#333}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;border-radius:4px;cursor:pointer;text-decoration:none;border:none;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]{background-color:#ff6f61;color:#fff;margin-top:20px}.btn-create[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;margin-bottom:20px}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#555}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.btn-update[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;padding:6px 12px;font-size:14px;text-decoration:none;border-radius:4px}.btn-update[_ngcontent-%COMP%]{background-color:orange;color:#fff}.btn-update[_ngcontent-%COMP%]:hover{background-color:#ff8c00}.btn-delete[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#e53935}.btn-activate[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover{background-color:#45a049}.router-outlet[_ngcontent-%COMP%]{margin-top:40px}@media (max-width: 768px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:8px}.btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}.operation-title[_ngcontent-%COMP%]{font-size:1.5rem}}.staff-members[_ngcontent-%COMP%]{margin-top:10px;background-color:#f9f9f9;border-radius:6px;padding:10px;box-shadow:0 2px 4px #0000001a}.staff-members[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#555}.deactivated[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.deactivated[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through}']})}}return n})();var Cee=()=>["/operation-types"];function Mee(n,t){if(n&1){let e=dt();g(0,"div",17)(1,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.onSpecializationChange(o,r))}),_(),g(2,"label",19),M(3),_()()}if(n&2){let e=t.$implicit,i=ce();A(),Mu("id","specialization-",e.id,""),X("checked",i.operationType.specializations.includes(e.specOption)),A(),Mu("for","specialization-",e.id,""),A(),Ye(e.specOption)}}function wee(n,t){n&1&&(g(0,"div",20)(1,"p",21),M(2,"You must add at least one specialization to the operation type."),_()())}var dL=(()=>{class n{constructor(e,i){this.router=e,this.operationTypeService=i,this.operationType={name:"",estimatedDuration:"",specializations:[]},this.availableSpecializations=[],i.getSpecializations().subscribe(r=>{this.availableSpecializations=r},r=>{console.error("Error fetching specializations",r)})}onSpecializationChange(e,i){if(i.target.checked)this.operationType.specializations.push(e.specOption);else{let r=this.operationType.specializations.indexOf(e.specOption);r!==-1&&this.operationType.specializations.splice(r,1)}}onSubmit(){this.operationTypeService.createOperationType(this.operationType).subscribe(()=>{alert("Operation type created successfully"),this.operationType={name:"",estimatedDuration:"",specializations:[]},this.router.navigate(["/operation-types"])},e=>{console.error("Error creating operation type",e),alert("Error creating operation type")})}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(_s))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-operation-type"]],standalone:!0,features:[Je],decls:26,vars:7,consts:[["operationForm","ngForm"],[1,"operationType-container"],[1,"operation-title"],[1,"form-and-table-container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","estimatedTime"],["type","text","id","estimatedTime","name","estimatedTime","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","specializations"],[1,"checkboxes-container"],["class","checkbox-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"checkbox-group"],["type","checkbox",3,"change","id","checked"],[3,"for"],[1,"error-message"],[1,"text-danger"]],template:function(i,r){if(i&1){let o=dt();g(0,"div",1),me(1,"app-sidebar"),g(2,"h2",2),M(3,"Create Operation Type"),_(),g(4,"div",3)(5,"div",4)(6,"form",5,0),le("ngSubmit",function(){return Oe(o),Ae(r.onSubmit())}),g(8,"div",6)(9,"label",7),M(10,"Name"),_(),g(11,"input",8),Ze("ngModelChange",function(a){return Oe(o),Ke(r.operationType.name,a)||(r.operationType.name=a),Ae(a)}),_()(),g(12,"div",6)(13,"label",9),M(14,"Estimated Time"),_(),g(15,"input",10),Ze("ngModelChange",function(a){return Oe(o),Ke(r.operationType.estimatedDuration,a)||(r.operationType.estimatedDuration=a),Ae(a)}),_()(),g(16,"div",6)(17,"label",11),M(18,"Available Specializations"),_(),g(19,"div",12),Pe(20,Mee,4,6,"div",13),_(),Pe(21,wee,3,0,"div",14),_(),g(22,"button",15),M(23,"Create"),_(),g(24,"a",16),M(25,"Back"),_()()()()()}if(i&2){let o=Ai(7);A(11),Xe("ngModel",r.operationType.name),A(4),Xe("ngModel",r.operationType.estimatedDuration),A(5),X("ngForOf",r.availableSpecializations),A(),X("ngIf",r.operationType.specializations.length===0),A(),X("disabled",!o.valid||r.operationType.specializations.length===0),A(2),X("routerLink",Hi(6,Cee))}},dependencies:[vt,Mn,Zt,Dt,Yt,Nt,Ft,qt,hn,Pn,$n,kt,jt,Vt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;padding:30px;background-color:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;font-family:Arial,sans-serif}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:25px;color:#333}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;font-size:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#444;margin-bottom:8px}.form-control[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:8px;box-sizing:border-box;transition:all .3s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.form-control[_ngcontent-%COMP%]:required{border-color:#ff4d4d;background-color:#fff6f6}.form-control[_ngcontent-%COMP%]:required:focus{border-color:#ff1a1a}.form-control[_ngcontent-%COMP%]:valid{border-color:#28a745;background-color:#e6ffe6}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border-color:#ff4d4d}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]:after{content:"*";color:#ff4d4d;font-size:18px;margin-left:5px}.btn[_ngcontent-%COMP%]{padding:12px 25px;font-size:16px;text-align:center;text-decoration:none;cursor:pointer;border-radius:8px;border:none;transition:background-color .3s ease}.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-back[_ngcontent-%COMP%]{background-color:#a5342c;color:#fff}.btn-back[_ngcontent-%COMP%]:hover{background-color:#5a6268}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}@media (max-width: 600px){.operationType-container[_ngcontent-%COMP%]{padding:20px}.operation-title[_ngcontent-%COMP%]{font-size:24px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.btn[_ngcontent-%COMP%]{width:100%}}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px;cursor:pointer;transform:scale(1.3);transition:transform .3s ease-in-out;margin-left:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;color:#444;margin-left:5px;cursor:pointer}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{transform:scale(1.4)}.error-message[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#ff4d4d}']})}}return n})();var ir=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/staff",this.apiURLSpecializaction="https://localhost:5001/api/specialization",this.apiURLUser="https://localhost:5001/api/user"}createStaff(e){return this.http.post(`${this.apiUrl}`,e,{observe:"response",responseType:"text"})}getSpecialization(){return this.http.get(`${this.apiURLSpecializaction}`)}getStaffTypes(){return this.http.get(`${this.apiUrl}/staff-types`)}searchStaffProfiles(e){return this.http.get(`${this.apiUrl}/search`,{params:e})}deactivateStaff(e){return this.http.put(`${this.apiUrl}/deactivate/${e}`,{})}updateStaff(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}getStaffById(e){return this.http.get(`${this.apiUrl}/${e}`)}getAllStaffs(){return this.http.get(`${this.apiUrl}`)}confirmUpdates(e){let i=new ps;return e.phoneNumber&&(i=i.append("phoneNumber",e.phoneNumber)),e.email&&(i=i.append("email",e.email)),i=i.append("token",e.token),this.http.put(`${this.apiUrl}/ConfirmUpdates`,{},{params:i})}activateStaff(e){let i=`${this.apiURLUser}/RegisterUser`;return this.http.post(i,e)}activateUser(e,i){let r={token:e,newPassword:i};return this.http.post(`${this.apiURLUser}/Activate`,null,{params:r})}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Eee(n,t){if(n&1&&(g(0,"option",28),M(1),_()),n&2){let e=t.$implicit;X("value",e),A(),Ye(e)}}function See(n,t){if(n&1&&(g(0,"option",28),M(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),xt(" ",e.specOption," ")}}function Pee(n,t){if(n&1&&(g(0,"div",29),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}var fL=(()=>{class n{constructor(e,i){this.service=e,this.router=i,this.createStaffForm=new gs({firstName:new Un("",[Gt.required]),lastName:new Un("",[Gt.required]),fullName:new Un("",[Gt.required]),email:new Un("",[Gt.required,Gt.email]),identifier:new Un("",[Gt.required]),phoneNumber:new Un("",[Gt.required]),staffType:new Un("",[Gt.required]),specializationName:new Un("",[Gt.required])}),this.newStaff={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",staffType:"",specializationName:""},this.staffTypes=[],this.specializations=[],this.errorMessage="",this.NumberPhone=""}ngOnInit(){this.loadSpecializations(),this.loadStaffTypes()}loadSpecializations(){this.service.getSpecialization().subscribe({next:e=>{console.log(`Data specilazation:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffTypes(){this.service.getStaffTypes().subscribe({next:e=>{console.log(`Data staff types:
`,e),this.staffTypes=e},error:e=>{console.error("Error loading staff types",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff types ")}})}onSubmit(){if(this.createStaffForm.invalid){this.errorMessage="",this.createStaffForm.markAllAsTouched();return}this.newStaff={firstName:this.createStaffForm.value.firstName.trim(),lastName:this.createStaffForm.value.lastName.trim(),fullName:this.createStaffForm.value.fullName.trim(),email:this.createStaffForm.value.email.trim(),phoneNumber:this.createStaffForm.value.identifier.trim()+this.createStaffForm.value.phoneNumber.trim(),staffType:this.createStaffForm.value.staffType.trim(),specializationName:this.createStaffForm.value.specializationName.trim()},this.createStaffForm.valid&&this.service.createStaff(this.newStaff).subscribe({next:e=>{console.log("Staff created successfully",e),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:e=>{if(console.error("Error creating staff",e),e.status===400){let i=JSON.parse(e.error);this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Creating failed - "+e.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-staff"]],standalone:!0,features:[Je],decls:46,vars:4,consts:[[1,"create-staff-container"],[1,"create-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","First Name","required",""],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name","required",""],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Full Name","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],[1,"form-group"],["for","staffType"],["id","staffType","formControlName","staffType","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","specializationName"],["id","specializationName","formControlName","specializationName","required",""],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(me(0,"app-sidebar"),g(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),M(5,"Go Back"),_(),g(6,"h2"),M(7,"Create Staff"),_()(),g(8,"form",4),le("ngSubmit",function(){return r.onSubmit()}),g(9,"label",5),M(10,"First Name"),_(),me(11,"input",6),g(12,"label",7),M(13,"Last Name"),_(),me(14,"input",8),g(15,"label",9),M(16,"Full Name"),_(),me(17,"input",10),g(18,"label",11),M(19,"Email"),_(),me(20,"input",12),g(21,"label",13),M(22,"Phone Number"),_(),g(23,"div",14)(24,"div",15),me(25,"input",16),_(),g(26,"div",17),me(27,"input",18),_()(),g(28,"div",14)(29,"div",19)(30,"label",20),M(31,"Staff Type"),_(),g(32,"select",21)(33,"option",22),M(34,"Select Staff Type"),_(),Pe(35,Eee,2,2,"option",23),_()(),g(36,"div",19)(37,"label",24),M(38,"Specialization Name"),_(),g(39,"select",25)(40,"option",22),M(41,"Select Specialization"),_(),Pe(42,See,2,2,"option",23),_()()(),Pe(43,Pee,2,1,"div",26),g(44,"button",27),M(45,"Create Staff"),_()()()()),i&2&&(A(8),X("formGroup",r.createStaffForm),A(27),X("ngForOf",r.staffTypes),A(7),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,hn,vt,Mn,Zt,Vt,nr,Cr,Dr,kt,jt],styles:[".create-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.create-staff-container[_ngcontent-%COMP%]   .create-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem 2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#333;margin:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;color:#fff;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var hL=(()=>{class n{constructor(e,i,r,o){this.router=e,this.panelService=i,this.settingsService=r,this.profileService=o}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile")}onSubmit(){let e=localStorage.getItem("token");e?this.settingsService.deleteAccount(e).subscribe(i=>{console.log("Request Finished With Success",i),localStorage.removeItem("token"),this.router.navigate(["/login"]),alert("To complete the account deletion process, please check your email for further instructions.")},i=>{console.error("Account deletion failed",i),alert("Account deletion failed - "+i.error)}):(this.router.navigate(["/login"]),alert("No token found. Please log in again."))}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(ui),$(Ta),$(bc))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-settings"]],standalone:!0,features:[Je],decls:21,vars:0,consts:[[1,"settings-container"],[1,"settings-content"],[1,"header"],[1,"settings-details"],["id","theme-settings",1,"box"],["type","radio","name","theme","value","light"],["type","radio","name","theme","value","dark","checked",""],["id","account-settings",1,"box"],[1,"delete-account",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Settings"),_()(),g(6,"div",3)(7,"section",4)(8,"h2"),M(9,"Theme"),_(),g(10,"label"),me(11,"input",5),M(12," Light "),_(),g(13,"label"),me(14,"input",6),M(15," Dark "),_()(),g(16,"section",7)(17,"h2"),M(18,"Account"),_(),g(19,"button",8),le("click",function(){return r.onSubmit()}),M(20," Request Account Delete "),_()()()()())},dependencies:[Vt],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.settings-container[_ngcontent-%COMP%]{display:flex;background-color:#161a2d;font-family:Poppins,sans-serif;color:#fff;height:100vh;margin-left:85px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]{flex:1;padding:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]{margin-top:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{background-color:#161a2d;border:1px solid #515253;border-radius:6px;padding:20px;margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;border-bottom:1px solid #515253;padding-bottom:10px;margin-bottom:15px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:1rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:8px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]{background-color:#d73a49;color:#fff;padding:10px 20px;font-size:1rem;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]:hover{background-color:#b92534}"]})}}return n})();var rr=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Admin")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Mt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var tS=n=>({"is-invalid":n}),Tee=()=>["/operation-types"];function Dee(n,t){n&1&&(g(0,"div",15),M(1," Name is required. "),_())}function Oee(n,t){n&1&&(g(0,"div",15),M(1," Estimated Duration is required. "),_())}function Aee(n,t){if(n&1){let e=dt();g(0,"div",16),me(1,"input",17),g(2,"button",18),le("click",function(){let r=Oe(e).index,o=ce();return Ae(o.removeSpecialization(r))}),M(3,"Remove"),_()()}if(n&2){let e=t.$implicit,i=t.index;A(),X("formControlName",i)("ngClass",ni(2,tS,e.invalid&&e.touched))}}function Iee(n,t){n&1&&(g(0,"div",19),M(1," At least one specialization is required. "),_())}var pL=(()=>{class n{constructor(e,i,r,o){this.route=e,this.router=i,this.fb=r,this.operationTypeService=o,this.operationTypeName=""}ngOnInit(){this.updateForm=this.fb.group({name:[""],estimatedDuration:[""],specializations:this.fb.array([],Gt.required)}),this.operationTypeName=this.route.snapshot.paramMap.get("name"),this.loadOperationType()}loadOperationType(){this.operationTypeService.getOperationTypeByName(this.operationTypeName).subscribe(e=>{this.updateForm.patchValue({name:e.name,estimatedDuration:e.estimatedDuration});let i=this.updateForm.get("specializations");e.specializations.map(o=>o.specOption).forEach(o=>{i.push(this.fb.control(o,Gt.required))})},e=>{console.error("Error fetching operation type",e)})}updateOperationType(){if(this.updateForm.valid){let e=this.updateForm.value,i={name:e.name,estimatedDuration:e.estimatedDuration,specializations:e.specializations};this.operationTypeService.editOperationType(this.operationTypeName,i).subscribe(()=>{alert("Operation type updated successfully"),this.router.navigate(["/operation-types"])},r=>{console.error("Error updating operation type",r)})}}get specializations(){return this.updateForm.get("specializations")}addSpecialization(){this.specializations.push(this.fb.control("",Gt.required))}removeSpecialization(e){this.specializations.removeAt(e)}static{this.\u0275fac=function(i){return new(i||n)($(tr),$(Mt),$(Sa),$(_s))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-operation-type"]],standalone:!0,features:[Je],decls:26,vars:13,consts:[[1,"update-operation-type-container"],[1,"operation-title",2,"text-align","center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","estimatedDuration"],["type","text","id","estimatedDuration","formControlName","estimatedDuration",1,"form-control",3,"ngClass"],["formArrayName","specializations",1,"form-group"],["class","input-group mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-addSpecialization",3,"click"],["class","invalid-feedback d-block",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-secondary",3,"routerLink"],[1,"invalid-feedback"],[1,"input-group","mb-2"],["type","text","placeholder","Specialization",1,"form-control",3,"formControlName","ngClass"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback","d-block"]],template:function(i,r){if(i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h2",1),M(3,"Update Operation Type"),_(),g(4,"form",2),le("ngSubmit",function(){return r.updateOperationType()}),g(5,"div",3)(6,"label",4),M(7,"Name"),_(),me(8,"input",5),Pe(9,Dee,2,0,"div",6),_(),g(10,"div",3)(11,"label",7),M(12,"Estimated Duration"),_(),me(13,"input",8),Pe(14,Oee,2,0,"div",6),_(),g(15,"div",9)(16,"label"),M(17,"Specializations"),_(),Pe(18,Aee,4,4,"div",10),g(19,"button",11),le("click",function(){return r.addSpecialization()}),M(20,"Add Specialization"),_(),Pe(21,Iee,2,0,"div",12),_(),g(22,"button",13),M(23,"Update"),_(),g(24,"a",14),M(25,"Cancel"),_()()()),i&2){let o,s,a,l;A(4),X("formGroup",r.updateForm),A(4),X("ngClass",ni(8,tS,((o=r.updateForm.get("name"))==null?null:o.touched)&&((o=r.updateForm.get("name"))==null?null:o.invalid))),A(),X("ngIf",((s=r.updateForm.get("name"))==null?null:s.touched)&&((s=r.updateForm.get("name"))==null?null:s.invalid)),A(4),X("ngClass",ni(10,tS,((a=r.updateForm.get("estimatedDuration"))==null?null:a.touched)&&((a=r.updateForm.get("estimatedDuration"))==null?null:a.invalid))),A(),X("ngIf",((l=r.updateForm.get("estimatedDuration"))==null?null:l.touched)&&((l=r.updateForm.get("estimatedDuration"))==null?null:l.invalid)),A(4),X("ngForOf",r.specializations.controls),A(3),X("ngIf",r.specializations.invalid&&r.specializations.touched),A(3),X("routerLink",Hi(12,Tee))}},dependencies:[Dt,Yt,Nt,Ft,qt,nr,Cr,Dr,Cf,kt,jt,Vt,vt,Eo,Mn,Zt],styles:['@charset "UTF-8";.update-operation-type-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:30px;background-color:#fdfdfd;border-radius:12px;box-shadow:0 6px 12px #0000001a;border:1px solid #e6e6e6}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;font-weight:700;color:#333;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:15px;font-weight:500;color:#555;margin-bottom:6px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #ccc;border-radius:6px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#0069d9;outline:none;box-shadow:0 0 5px #007bff4d}.is-invalid[_ngcontent-%COMP%]{border-color:#e63946;box-shadow:0 0 5px #e639464d}.invalid-feedback[_ngcontent-%COMP%]{color:#e63946;font-size:14px;margin-top:5px}button.btn[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease}button.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 4px 8px #007bff33}.btn-secondary[_ngcontent-%COMP%]{background-color:#e63946;color:#fff;margin-top:30px;text-align:center}button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;box-shadow:0 4px 8px #6c757d33}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}a[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;font-size:15px;color:#007bff;font-weight:600;text-decoration:none;text-align:center}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-addSpecialization[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-top:10px}']})}}return n})();var YP="170";var Ree=0,mL=1,Nee=2;var kU=1,XP=2,Pl=3,Ia=0,To=1,Yo=2,Dc=0,Wf=1,gL=2,_L=3,vL=4,kee=5,Vu=100,Fee=101,Lee=102,Uee=103,Vee=104,Bee=200,zee=201,Hee=202,Wee=203,NS=204,kS=205,jee=206,Gee=207,$ee=208,qee=209,Yee=210,Xee=211,Zee=212,Kee=213,Jee=214,FS=0,LS=1,US=2,qf=3,VS=4,BS=5,zS=6,HS=7,FU=0,Qee=1,ete=2,Oc=0,tte=1,nte=2,ite=3,rte=4,ote=5,ste=6,ate=7,yL="attached",lte="detached",xL=300,Yf=301,Xf=302,WS=303,jS=304,$y=306,sr=1e3,Dl=1001,bm=1002,Hr=1003,ZP=1004;var Vf=1005;var wr=1006,_m=1007;var Po=1008;var Il=1009,LU=1010,UU=1011,Cm=1012,KP=1013,Hu=1014,ra=1015,Rm=1016,JP=1017,QP=1018,Zf=1020,VU=35902,BU=1021,zU=1022,ys=1023,HU=1024,WU=1025,jf=1026,Kf=1027,eT=1028,tT=1029,jU=1030,nT=1031;var iT=1033,hy=33776,py=33777,my=33778,gy=33779,GS=35840,$S=35841,qS=35842,YS=35843,XS=36196,ZS=37492,KS=37496,JS=37808,QS=37809,eP=37810,tP=37811,nP=37812,iP=37813,rP=37814,oP=37815,sP=37816,aP=37817,lP=37818,cP=37819,uP=37820,dP=37821,_y=36492,fP=36494,hP=36495,GU=36283,pP=36284,mP=36285,gP=36286,rT=2200,cte=2201,ute=2202,Jf=2300,Qf=2301,nS=2302,Bf=2400,zf=2401,vy=2402,oT=2500,dte=2501,$U=0,qy=1,Nm=2,fte=3200,hte=3201;var qU=0,pte=1,Tc="",Li="srgb",$r="srgb-linear",Yy="linear",di="srgb";var wf=7680;var bL=519,mte=512,gte=513,_te=514,YU=515,vte=516,yte=517,xte=518,bte=519,_P=35044;var CL="300 es",Ol=2e3,yy=2001,Rl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let r=this._listeners[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ML=1234567,vm=Math.PI/180,eh=180/Math.PI;function oa(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[t&255]+Vr[t>>8&255]+"-"+Vr[t>>16&15|64]+Vr[t>>24&255]+"-"+Vr[e&63|128]+Vr[e>>8&255]+"-"+Vr[e>>16&255]+Vr[e>>24&255]+Vr[i&255]+Vr[i>>8&255]+Vr[i>>16&255]+Vr[i>>24&255]).toLowerCase()}function zr(n,t,e){return Math.max(t,Math.min(e,n))}function sT(n,t){return(n%t+t)%t}function Cte(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function Mte(n,t,e){return n!==t?(e-n)/(t-n):0}function ym(n,t,e){return(1-e)*n+e*t}function wte(n,t,e,i){return ym(n,t,1-Math.exp(-e*i))}function Ete(n,t=1){return t-Math.abs(sT(n,t*2)-t)}function Ste(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function Pte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function Tte(n,t){return n+Math.floor(Math.random()*(t-n+1))}function Dte(n,t){return n+Math.random()*(t-n)}function Ote(n){return n*(.5-Math.random())}function Ate(n){n!==void 0&&(ML=n);let t=ML+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Ite(n){return n*vm}function Rte(n){return n*eh}function Nte(n){return(n&n-1)===0&&n!==0}function kte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Fte(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Lte(n,t,e,i,r){let o=Math.cos,s=Math.sin,a=o(e/2),l=s(e/2),u=o((t+i)/2),f=s((t+i)/2),h=o((t-i)/2),m=s((t-i)/2),p=o((i-t)/2),b=s((i-t)/2);switch(r){case"XYX":n.set(a*f,l*h,l*m,a*u);break;case"YZY":n.set(l*m,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*m,a*f,a*u);break;case"XZX":n.set(a*f,l*b,l*p,a*u);break;case"YXY":n.set(l*p,a*f,l*b,a*u);break;case"ZYZ":n.set(l*b,l*p,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ia(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ii(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Or={DEG2RAD:vm,RAD2DEG:eh,generateUUID:oa,clamp:zr,euclideanModulo:sT,mapLinear:Cte,inverseLerp:Mte,lerp:ym,damp:wte,pingpong:Ete,smoothstep:Ste,smootherstep:Pte,randInt:Tte,randFloat:Dte,randFloatSpread:Ote,seededRandom:Ate,degToRad:Ite,radToDeg:Rte,isPowerOfTwo:Nte,ceilPowerOfTwo:kte,floorPowerOfTwo:Fte,setQuaternionFromProperEuler:Lte,normalize:ii,denormalize:ia},dn=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(zr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},xn=class n{constructor(t,e,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,l,u)}set(t,e,i,r,o,s,a,l,u){let f=this.elements;return f[0]=t,f[1]=r,f[2]=a,f[3]=e,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],m=i[2],p=i[5],b=i[8],C=r[0],y=r[3],x=r[6],T=r[1],E=r[4],D=r[7],V=r[2],B=r[5],F=r[8];return o[0]=s*C+a*T+l*V,o[3]=s*y+a*E+l*B,o[6]=s*x+a*D+l*F,o[1]=u*C+f*T+h*V,o[4]=u*y+f*E+h*B,o[7]=u*x+f*D+h*F,o[2]=m*C+p*T+b*V,o[5]=m*y+p*E+b*B,o[8]=m*x+p*D+b*F,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8];return e*s*f-e*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],h=f*s-a*u,m=a*l-f*o,p=u*o-s*l,b=e*h+i*m+r*p;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);let C=1/b;return t[0]=h*C,t[1]=(r*u-f*i)*C,t[2]=(a*i-r*s)*C,t[3]=m*C,t[4]=(f*e-r*l)*C,t[5]=(r*o-a*e)*C,t[6]=p*C,t[7]=(i*l-u*e)*C,t[8]=(s*e-i*o)*C,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+t,-r*u,r*l,-r*(-u*s+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(iS.makeScale(t,e)),this}rotate(t){return this.premultiply(iS.makeRotation(-t)),this}translate(t,e){return this.premultiply(iS.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},iS=new xn;function XU(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function Mm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ute(){let n=Mm("canvas");return n.style.display="block",n}var wL={};function mm(n){n in wL||(wL[n]=!0,console.warn(n))}function Vte(n,t,e){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}function Bte(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function zte(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var Fn={enabled:!0,workingColorSpace:$r,spaces:{},convert:function(n,t,e){return this.enabled===!1||t===e||!t||!e||(this.spaces[t].transfer===di&&(n.r=Al(n.r),n.g=Al(n.g),n.b=Al(n.b)),this.spaces[t].primaries!==this.spaces[e].primaries&&(n.applyMatrix3(this.spaces[t].toXYZ),n.applyMatrix3(this.spaces[e].fromXYZ)),this.spaces[e].transfer===di&&(n.r=Gf(n.r),n.g=Gf(n.g),n.b=Gf(n.b))),n},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Tc?Yy:this.spaces[n].transfer},getLuminanceCoefficients:function(n,t=this.workingColorSpace){return n.fromArray(this.spaces[t].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,t,e){return n.copy(this.spaces[t].toXYZ).multiply(this.spaces[e].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Al(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Gf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var EL=[.64,.33,.3,.6,.15,.06],SL=[.2126,.7152,.0722],PL=[.3127,.329],TL=new xn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),DL=new xn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Fn.define({[$r]:{primaries:EL,whitePoint:PL,transfer:Yy,toXYZ:TL,fromXYZ:DL,luminanceCoefficients:SL,workingColorSpaceConfig:{unpackColorSpace:Li},outputColorSpaceConfig:{drawingBufferColorSpace:Li}},[Li]:{primaries:EL,whitePoint:PL,transfer:di,toXYZ:TL,fromXYZ:DL,luminanceCoefficients:SL,outputColorSpaceConfig:{drawingBufferColorSpace:Li}}});var Ef,vP=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Ef===void 0&&(Ef=Mm("canvas")),Ef.width=t.width,Ef.height=t.height;let i=Ef.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Ef}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=Mm("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Al(o[s]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Al(e[i]/255)*255):e[i]=Al(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Hte=0,xy=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Hte++}),this.uuid=oa(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(rS(r[s].image)):o.push(rS(r[s]))}else o=rS(r);i.url=o}return e||(t.images[this.uuid]=i),i}};function rS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?vP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Wte=0,Ms=(()=>{class n extends Rl{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Dl,o=Dl,s=wr,a=Po,l=ys,u=Il,f=n.DEFAULT_ANISOTROPY,h=Tc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wte++}),this.uuid=oa(),this.name="",this.source=new xy(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new dn(0,0),this.repeat=new dn(1,1),this.center=new dn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==xL)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sr:e.x=e.x-Math.floor(e.x);break;case Dl:e.x=e.x<0?0:1;break;case bm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sr:e.y=e.y-Math.floor(e.y);break;case Dl:e.y=e.y<0?0:1;break;case bm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=xL,n.DEFAULT_ANISOTROPY=1,n})(),pn=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,o,l=t.elements,u=l[0],f=l[4],h=l[8],m=l[1],p=l[5],b=l[9],C=l[2],y=l[6],x=l[10];if(Math.abs(f-m)<.01&&Math.abs(h-C)<.01&&Math.abs(b-y)<.01){if(Math.abs(f+m)<.1&&Math.abs(h+C)<.1&&Math.abs(b+y)<.1&&Math.abs(u+p+x-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let E=(u+1)/2,D=(p+1)/2,V=(x+1)/2,B=(f+m)/4,F=(h+C)/4,G=(b+y)/4;return E>D&&E>V?E<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(E),r=B/i,o=F/i):D>V?D<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(D),i=B/r,o=G/r):V<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(V),i=F/o,r=G/o),this.set(i,r,o,e),this}let T=Math.sqrt((y-b)*(y-b)+(h-C)*(h-C)+(m-f)*(m-f));return Math.abs(T)<.001&&(T=1),this.x=(y-b)/T,this.y=(h-C)/T,this.z=(m-f)/T,this.w=Math.acos((u+p+x-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},yP=class extends Rl{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new pn(0,0,t,e),this.scissorTest=!1,this.viewport=new pn(0,0,t,e);let r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let o=new Ms(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new xy(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Nl=class extends yP{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},by=class extends Ms{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=Hr,this.minFilter=Hr,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var xP=class extends Ms{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=Hr,this.minFilter=Hr,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Wr=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],m=o[s+0],p=o[s+1],b=o[s+2],C=o[s+3];if(a===0){t[e+0]=l,t[e+1]=u,t[e+2]=f,t[e+3]=h;return}if(a===1){t[e+0]=m,t[e+1]=p,t[e+2]=b,t[e+3]=C;return}if(h!==C||l!==m||u!==p||f!==b){let y=1-a,x=l*m+u*p+f*b+h*C,T=x>=0?1:-1,E=1-x*x;if(E>Number.EPSILON){let V=Math.sqrt(E),B=Math.atan2(V,x*T);y=Math.sin(y*B)/V,a=Math.sin(a*B)/V}let D=a*T;if(l=l*y+m*D,u=u*y+p*D,f=f*y+b*D,h=h*y+C*D,y===1-a){let V=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=V,u*=V,f*=V,h*=V}}t[e]=l,t[e+1]=u,t[e+2]=f,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],m=o[s+1],p=o[s+2],b=o[s+3];return t[e]=a*b+f*h+l*p-u*m,t[e+1]=l*b+f*m+u*h-a*p,t[e+2]=u*b+f*p+a*m-l*h,t[e+3]=f*b-a*h-l*m-u*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),m=l(i/2),p=l(r/2),b=l(o/2);switch(s){case"XYZ":this._x=m*f*h+u*p*b,this._y=u*p*h-m*f*b,this._z=u*f*b+m*p*h,this._w=u*f*h-m*p*b;break;case"YXZ":this._x=m*f*h+u*p*b,this._y=u*p*h-m*f*b,this._z=u*f*b-m*p*h,this._w=u*f*h+m*p*b;break;case"ZXY":this._x=m*f*h-u*p*b,this._y=u*p*h+m*f*b,this._z=u*f*b+m*p*h,this._w=u*f*h-m*p*b;break;case"ZYX":this._x=m*f*h-u*p*b,this._y=u*p*h+m*f*b,this._z=u*f*b-m*p*h,this._w=u*f*h+m*p*b;break;case"YZX":this._x=m*f*h+u*p*b,this._y=u*p*h+m*f*b,this._z=u*f*b-m*p*h,this._w=u*f*h-m*p*b;break;case"XZY":this._x=m*f*h-u*p*b,this._y=u*p*h-m*f*b,this._z=u*f*b+m*p*h,this._w=u*f*h+m*p*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],l=e[9],u=e[2],f=e[6],h=e[10],m=i+a+h;if(m>0){let p=.5/Math.sqrt(m+1);this._w=.25/p,this._x=(f-l)*p,this._y=(o-u)*p,this._z=(s-r)*p}else if(i>a&&i>h){let p=2*Math.sqrt(1+i-a-h);this._w=(f-l)/p,this._x=.25*p,this._y=(r+s)/p,this._z=(o+u)/p}else if(a>h){let p=2*Math.sqrt(1+a-i-h);this._w=(o-u)/p,this._x=(r+s)/p,this._y=.25*p,this._z=(l+f)/p}else{let p=2*Math.sqrt(1+h-i-a);this._w=(s-r)/p,this._x=(o+u)/p,this._y=(l+f)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(zr(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,o=t._z,s=t._w,a=e._x,l=e._y,u=e._z,f=e._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let p=1-e;return this._w=p*s+e*this._w,this._x=p*i+e*this._x,this._y=p*r+e*this._y,this._z=p*o+e*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-e)*f)/u,m=Math.sin(e*f)/u;return this._w=s*h+this._w*m,this._x=i*h+this._x*m,this._y=r*h+this._y*m,this._z=o*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},ne=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(OL.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(OL.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*r,this.y=o[1]*e+o[4]*i+o[7]*r,this.z=o[2]*e+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,o=t.x,s=t.y,a=t.z,l=t.w,u=2*(s*r-a*i),f=2*(a*e-o*r),h=2*(o*i-s*e);return this.x=e+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r,this.y=o[1]*e+o[5]*i+o[9]*r,this.z=o[2]*e+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,o=t.z,s=e.x,a=e.y,l=e.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return oS.copy(this).projectOnVector(t),this.sub(oS)}reflect(t){return this.sub(oS.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(zr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},oS=new ne,OL=new Wr,Ki=class{constructor(t=new ne(1/0,1/0,1/0),e=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(ea.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(ea.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=ea.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,ea):ea.fromBufferAttribute(o,s),ea.applyMatrix4(t.matrixWorld),this.expandByPoint(ea);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Bv.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Bv.copy(i.boundingBox)),Bv.applyMatrix4(t.matrixWorld),this.union(Bv)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ea),ea.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(am),zv.subVectors(this.max,am),Sf.subVectors(t.a,am),Pf.subVectors(t.b,am),Tf.subVectors(t.c,am),Cc.subVectors(Pf,Sf),Mc.subVectors(Tf,Pf),Iu.subVectors(Sf,Tf);let e=[0,-Cc.z,Cc.y,0,-Mc.z,Mc.y,0,-Iu.z,Iu.y,Cc.z,0,-Cc.x,Mc.z,0,-Mc.x,Iu.z,0,-Iu.x,-Cc.y,Cc.x,0,-Mc.y,Mc.x,0,-Iu.y,Iu.x,0];return!sS(e,Sf,Pf,Tf,zv)||(e=[1,0,0,0,1,0,0,0,1],!sS(e,Sf,Pf,Tf,zv))?!1:(Hv.crossVectors(Cc,Mc),e=[Hv.x,Hv.y,Hv.z],sS(e,Sf,Pf,Tf,zv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ea).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(ea).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(bl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},bl=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],ea=new ne,Bv=new Ki,Sf=new ne,Pf=new ne,Tf=new ne,Cc=new ne,Mc=new ne,Iu=new ne,am=new ne,zv=new ne,Hv=new ne,Ru=new ne;function sS(n,t,e,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Ru.fromArray(n,o);let a=r.x*Math.abs(Ru.x)+r.y*Math.abs(Ru.y)+r.z*Math.abs(Ru.z),l=t.dot(Ru),u=e.dot(Ru),f=i.dot(Ru);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var jte=new Ki,lm=new ne,aS=new ne,Xo=class{constructor(t=new ne,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):jte.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;lm.subVectors(t,this.center);let e=lm.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(lm,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(aS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(lm.copy(t.center).add(aS)),this.expandByPoint(lm.copy(t.center).sub(aS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Cl=new ne,lS=new ne,Wv=new ne,wc=new ne,cS=new ne,jv=new ne,uS=new ne,Wu=class{constructor(t=new ne,e=new ne(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Cl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Cl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Cl.copy(this.origin).addScaledVector(this.direction,e),Cl.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){lS.copy(t).add(e).multiplyScalar(.5),Wv.copy(e).sub(t).normalize(),wc.copy(this.origin).sub(lS);let o=t.distanceTo(e)*.5,s=-this.direction.dot(Wv),a=wc.dot(this.direction),l=-wc.dot(Wv),u=wc.lengthSq(),f=Math.abs(1-s*s),h,m,p,b;if(f>0)if(h=s*l-a,m=s*a-l,b=o*f,h>=0)if(m>=-b)if(m<=b){let C=1/f;h*=C,m*=C,p=h*(h+s*m+2*a)+m*(s*h+m+2*l)+u}else m=o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;else m=-o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;else m<=-b?(h=Math.max(0,-(-s*o+a)),m=h>0?-o:Math.min(Math.max(-o,-l),o),p=-h*h+m*(m+2*l)+u):m<=b?(h=0,m=Math.min(Math.max(-o,-l),o),p=m*(m+2*l)+u):(h=Math.max(0,-(s*o+a)),m=h>0?o:Math.min(Math.max(-o,-l),o),p=-h*h+m*(m+2*l)+u);else m=s>0?-o:o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(lS).addScaledVector(Wv,m),p}intersectSphere(t,e){Cl.subVectors(t.center,this.origin);let i=Cl.dot(this.direction),r=Cl.dot(Cl)-i*i,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,m=this.origin;return u>=0?(i=(t.min.x-m.x)*u,r=(t.max.x-m.x)*u):(i=(t.max.x-m.x)*u,r=(t.min.x-m.x)*u),f>=0?(o=(t.min.y-m.y)*f,s=(t.max.y-m.y)*f):(o=(t.max.y-m.y)*f,s=(t.min.y-m.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(t.min.z-m.z)*h,l=(t.max.z-m.z)*h):(a=(t.max.z-m.z)*h,l=(t.min.z-m.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,Cl)!==null}intersectTriangle(t,e,i,r,o){cS.subVectors(e,t),jv.subVectors(i,t),uS.crossVectors(cS,jv);let s=this.direction.dot(uS),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;wc.subVectors(this.origin,t);let l=a*this.direction.dot(jv.crossVectors(wc,jv));if(l<0)return null;let u=a*this.direction.dot(cS.cross(wc));if(u<0||l+u>s)return null;let f=-a*wc.dot(uS);return f<0?null:this.at(f/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},an=class n{constructor(t,e,i,r,o,s,a,l,u,f,h,m,p,b,C,y){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,l,u,f,h,m,p,b,C,y)}set(t,e,i,r,o,s,a,l,u,f,h,m,p,b,C,y){let x=this.elements;return x[0]=t,x[4]=e,x[8]=i,x[12]=r,x[1]=o,x[5]=s,x[9]=a,x[13]=l,x[2]=u,x[6]=f,x[10]=h,x[14]=m,x[3]=p,x[7]=b,x[11]=C,x[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/Df.setFromMatrixColumn(t,0).length(),o=1/Df.setFromMatrixColumn(t,1).length(),s=1/Df.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(t.order==="XYZ"){let m=s*f,p=s*h,b=a*f,C=a*h;e[0]=l*f,e[4]=-l*h,e[8]=u,e[1]=p+b*u,e[5]=m-C*u,e[9]=-a*l,e[2]=C-m*u,e[6]=b+p*u,e[10]=s*l}else if(t.order==="YXZ"){let m=l*f,p=l*h,b=u*f,C=u*h;e[0]=m+C*a,e[4]=b*a-p,e[8]=s*u,e[1]=s*h,e[5]=s*f,e[9]=-a,e[2]=p*a-b,e[6]=C+m*a,e[10]=s*l}else if(t.order==="ZXY"){let m=l*f,p=l*h,b=u*f,C=u*h;e[0]=m-C*a,e[4]=-s*h,e[8]=b+p*a,e[1]=p+b*a,e[5]=s*f,e[9]=C-m*a,e[2]=-s*u,e[6]=a,e[10]=s*l}else if(t.order==="ZYX"){let m=s*f,p=s*h,b=a*f,C=a*h;e[0]=l*f,e[4]=b*u-p,e[8]=m*u+C,e[1]=l*h,e[5]=C*u+m,e[9]=p*u-b,e[2]=-u,e[6]=a*l,e[10]=s*l}else if(t.order==="YZX"){let m=s*l,p=s*u,b=a*l,C=a*u;e[0]=l*f,e[4]=C-m*h,e[8]=b*h+p,e[1]=h,e[5]=s*f,e[9]=-a*f,e[2]=-u*f,e[6]=p*h+b,e[10]=m-C*h}else if(t.order==="XZY"){let m=s*l,p=s*u,b=a*l,C=a*u;e[0]=l*f,e[4]=-h,e[8]=u*f,e[1]=m*h+C,e[5]=s*f,e[9]=p*h-b,e[2]=b*h-p,e[6]=a*f,e[10]=C*h+m}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Gte,t,$te)}lookAt(t,e,i){let r=this.elements;return $o.subVectors(t,e),$o.lengthSq()===0&&($o.z=1),$o.normalize(),Ec.crossVectors(i,$o),Ec.lengthSq()===0&&(Math.abs(i.z)===1?$o.x+=1e-4:$o.z+=1e-4,$o.normalize(),Ec.crossVectors(i,$o)),Ec.normalize(),Gv.crossVectors($o,Ec),r[0]=Ec.x,r[4]=Gv.x,r[8]=$o.x,r[1]=Ec.y,r[5]=Gv.y,r[9]=$o.y,r[2]=Ec.z,r[6]=Gv.z,r[10]=$o.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],m=i[9],p=i[13],b=i[2],C=i[6],y=i[10],x=i[14],T=i[3],E=i[7],D=i[11],V=i[15],B=r[0],F=r[4],G=r[8],k=r[12],P=r[1],N=r[5],S=r[9],q=r[13],oe=r[2],ee=r[6],ge=r[10],se=r[14],de=r[3],J=r[7],Q=r[11],Ie=r[15];return o[0]=s*B+a*P+l*oe+u*de,o[4]=s*F+a*N+l*ee+u*J,o[8]=s*G+a*S+l*ge+u*Q,o[12]=s*k+a*q+l*se+u*Ie,o[1]=f*B+h*P+m*oe+p*de,o[5]=f*F+h*N+m*ee+p*J,o[9]=f*G+h*S+m*ge+p*Q,o[13]=f*k+h*q+m*se+p*Ie,o[2]=b*B+C*P+y*oe+x*de,o[6]=b*F+C*N+y*ee+x*J,o[10]=b*G+C*S+y*ge+x*Q,o[14]=b*k+C*q+y*se+x*Ie,o[3]=T*B+E*P+D*oe+V*de,o[7]=T*F+E*N+D*ee+V*J,o[11]=T*G+E*S+D*ge+V*Q,o[15]=T*k+E*q+D*se+V*Ie,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],o=t[12],s=t[1],a=t[5],l=t[9],u=t[13],f=t[2],h=t[6],m=t[10],p=t[14],b=t[3],C=t[7],y=t[11],x=t[15];return b*(+o*l*h-r*u*h-o*a*m+i*u*m+r*a*p-i*l*p)+C*(+e*l*p-e*u*m+o*s*m-r*s*p+r*u*f-o*l*f)+y*(+e*u*h-e*a*p-o*s*h+i*s*p+o*a*f-i*u*f)+x*(-r*a*f-e*l*h+e*a*m+r*s*h-i*s*m+i*l*f)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],h=t[9],m=t[10],p=t[11],b=t[12],C=t[13],y=t[14],x=t[15],T=h*y*u-C*m*u+C*l*p-a*y*p-h*l*x+a*m*x,E=b*m*u-f*y*u-b*l*p+s*y*p+f*l*x-s*m*x,D=f*C*u-b*h*u+b*a*p-s*C*p-f*a*x+s*h*x,V=b*h*l-f*C*l-b*a*m+s*C*m+f*a*y-s*h*y,B=e*T+i*E+r*D+o*V;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let F=1/B;return t[0]=T*F,t[1]=(C*m*o-h*y*o-C*r*p+i*y*p+h*r*x-i*m*x)*F,t[2]=(a*y*o-C*l*o+C*r*u-i*y*u-a*r*x+i*l*x)*F,t[3]=(h*l*o-a*m*o-h*r*u+i*m*u+a*r*p-i*l*p)*F,t[4]=E*F,t[5]=(f*y*o-b*m*o+b*r*p-e*y*p-f*r*x+e*m*x)*F,t[6]=(b*l*o-s*y*o-b*r*u+e*y*u+s*r*x-e*l*x)*F,t[7]=(s*m*o-f*l*o+f*r*u-e*m*u-s*r*p+e*l*p)*F,t[8]=D*F,t[9]=(b*h*o-f*C*o-b*i*p+e*C*p+f*i*x-e*h*x)*F,t[10]=(s*C*o-b*a*o+b*i*u-e*C*u-s*i*x+e*a*x)*F,t[11]=(f*a*o-s*h*o-f*i*u+e*h*u+s*i*p-e*a*p)*F,t[12]=V*F,t[13]=(f*C*r-b*h*r+b*i*m-e*C*m-f*i*y+e*h*y)*F,t[14]=(b*a*r-s*C*r-b*i*l+e*C*l+s*i*y-e*a*y)*F,t[15]=(s*h*r-f*a*r+f*i*l-e*h*l-s*i*m+e*a*m)*F,this}scale(t){let e=this.elements,i=t.x,r=t.y,o=t.z;return e[0]*=i,e[4]*=r,e[8]*=o,e[1]*=i,e[5]*=r,e[9]*=o,e[2]*=i,e[6]*=r,e[10]*=o,e[3]*=i,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),o=1-i,s=t.x,a=t.y,l=t.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,o,s){return this.set(1,i,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,o=e._x,s=e._y,a=e._z,l=e._w,u=o+o,f=s+s,h=a+a,m=o*u,p=o*f,b=o*h,C=s*f,y=s*h,x=a*h,T=l*u,E=l*f,D=l*h,V=i.x,B=i.y,F=i.z;return r[0]=(1-(C+x))*V,r[1]=(p+D)*V,r[2]=(b-E)*V,r[3]=0,r[4]=(p-D)*B,r[5]=(1-(m+x))*B,r[6]=(y+T)*B,r[7]=0,r[8]=(b+E)*F,r[9]=(y-T)*F,r[10]=(1-(m+C))*F,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,o=Df.set(r[0],r[1],r[2]).length(),s=Df.set(r[4],r[5],r[6]).length(),a=Df.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],ta.copy(this);let u=1/o,f=1/s,h=1/a;return ta.elements[0]*=u,ta.elements[1]*=u,ta.elements[2]*=u,ta.elements[4]*=f,ta.elements[5]*=f,ta.elements[6]*=f,ta.elements[8]*=h,ta.elements[9]*=h,ta.elements[10]*=h,e.setFromRotationMatrix(ta),i.x=o,i.y=s,i.z=a,this}makePerspective(t,e,i,r,o,s,a=Ol){let l=this.elements,u=2*o/(e-t),f=2*o/(i-r),h=(e+t)/(e-t),m=(i+r)/(i-r),p,b;if(a===Ol)p=-(s+o)/(s-o),b=-2*s*o/(s-o);else if(a===yy)p=-s/(s-o),b=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=b,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,i,r,o,s,a=Ol){let l=this.elements,u=1/(e-t),f=1/(i-r),h=1/(s-o),m=(e+t)*u,p=(i+r)*f,b,C;if(a===Ol)b=(s+o)*h,C=-2*h;else if(a===yy)b=o*h,C=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=C,l[14]=-b,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Df=new ne,ta=new an,Gte=new ne(0,0,0),$te=new ne(1,1,1),Ec=new ne,Gv=new ne,$o=new ne,AL=new an,IL=new Wr,ju=(()=>{class n{constructor(e=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,o=this._order){return this._x=e,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let o=e.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],m=o[2],p=o[6],b=o[10];switch(i){case"XYZ":this._y=Math.asin(zr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,b),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-zr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,b),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(zr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-m,b),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-zr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(p,b),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(zr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,b));break;case"XZY":this._z=Math.asin(-zr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return AL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(AL,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return IL.setFromEuler(this),this.setFromQuaternion(IL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),wm=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},qte=0,RL=new ne,Of=new Wr,Ml=new an,$v=new ne,cm=new ne,Yte=new ne,Xte=new Wr,NL=new ne(1,0,0),kL=new ne(0,1,0),FL=new ne(0,0,1),LL={type:"added"},Zte={type:"removed"},Af={type:"childadded",child:null},dS={type:"childremoved",child:null},hr=(()=>{class n extends Rl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qte++}),this.uuid=oa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new ne,i=new ju,r=new Wr,o=new ne(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new an},normalMatrix:{value:new xn}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new wm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Of.setFromAxisAngle(e,i),this.quaternion.multiply(Of),this}rotateOnWorldAxis(e,i){return Of.setFromAxisAngle(e,i),this.quaternion.premultiply(Of),this}rotateX(e){return this.rotateOnAxis(NL,e)}rotateY(e){return this.rotateOnAxis(kL,e)}rotateZ(e){return this.rotateOnAxis(FL,e)}translateOnAxis(e,i){return RL.copy(e).applyQuaternion(this.quaternion),this.position.add(RL.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(NL,e)}translateY(e){return this.translateOnAxis(kL,e)}translateZ(e){return this.translateOnAxis(FL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ml.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?$v.copy(e):$v.set(e,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),cm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ml.lookAt(cm,$v,this.up):Ml.lookAt($v,cm,this.up),this.quaternion.setFromRotationMatrix(Ml),o&&(Ml.extractRotation(o.matrixWorld),Of.setFromRotationMatrix(Ml),this.quaternion.premultiply(Of.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(LL),Af.child=e,this.dispatchEvent(Af),Af.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(Zte),dS.child=e,this.dispatchEvent(dS),dS.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ml.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ml.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ml),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(LL),Af.child=e,this.dispatchEvent(Af),Af.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cm,e,Yte),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(cm,Xte,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let m=u[f];s(e.shapes,m)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(e.materials,this.material[u]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(e.animations,u))}}if(i){let l=a(e.geometries),u=a(e.materials),f=a(e.textures),h=a(e.images),m=a(e.shapes),p=a(e.skeletons),b=a(e.animations),C=a(e.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),m.length>0&&(r.shapes=m),p.length>0&&(r.skeletons=p),b.length>0&&(r.animations=b),C.length>0&&(r.nodes=C)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new ne(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),na=new ne,wl=new ne,fS=new ne,El=new ne,If=new ne,Rf=new ne,UL=new ne,hS=new ne,pS=new ne,mS=new ne,gS=new pn,_S=new pn,vS=new pn,Bu=class n{constructor(t=new ne,e=new ne,i=new ne){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),na.subVectors(t,e),r.cross(na);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,i,r,o){na.subVectors(r,e),wl.subVectors(i,e),fS.subVectors(t,e);let s=na.dot(na),a=na.dot(wl),l=na.dot(fS),u=wl.dot(wl),f=wl.dot(fS),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let m=1/h,p=(u*l-a*f)*m,b=(s*f-a*l)*m;return o.set(1-p-b,b,p)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,El)===null?!1:El.x>=0&&El.y>=0&&El.x+El.y<=1}static getInterpolation(t,e,i,r,o,s,a,l){return this.getBarycoord(t,e,i,r,El)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,El.x),l.addScaledVector(s,El.y),l.addScaledVector(a,El.z),l)}static getInterpolatedAttribute(t,e,i,r,o,s){return gS.setScalar(0),_S.setScalar(0),vS.setScalar(0),gS.fromBufferAttribute(t,e),_S.fromBufferAttribute(t,i),vS.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(gS,o.x),s.addScaledVector(_S,o.y),s.addScaledVector(vS,o.z),s}static isFrontFacing(t,e,i,r){return na.subVectors(i,e),wl.subVectors(t,e),na.cross(wl).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return na.subVectors(this.c,this.b),wl.subVectors(this.a,this.b),na.cross(wl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,o){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,o)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,o=this.c,s,a;If.subVectors(r,i),Rf.subVectors(o,i),hS.subVectors(t,i);let l=If.dot(hS),u=Rf.dot(hS);if(l<=0&&u<=0)return e.copy(i);pS.subVectors(t,r);let f=If.dot(pS),h=Rf.dot(pS);if(f>=0&&h<=f)return e.copy(r);let m=l*h-f*u;if(m<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(i).addScaledVector(If,s);mS.subVectors(t,o);let p=If.dot(mS),b=Rf.dot(mS);if(b>=0&&p<=b)return e.copy(o);let C=p*u-l*b;if(C<=0&&u>=0&&b<=0)return a=u/(u-b),e.copy(i).addScaledVector(Rf,a);let y=f*b-p*h;if(y<=0&&h-f>=0&&p-b>=0)return UL.subVectors(o,r),a=(h-f)/(h-f+(p-b)),e.copy(r).addScaledVector(UL,a);let x=1/(y+C+m);return s=C*x,a=m*x,e.copy(i).addScaledVector(If,s).addScaledVector(Rf,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ZU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sc={h:0,s:0,l:0},qv={h:0,s:0,l:0};function yS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var Bt=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Li){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Fn.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Fn.workingColorSpace){return this.r=t,this.g=e,this.b=i,Fn.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Fn.workingColorSpace){if(t=sT(t,1),e=zr(e,0,1),i=zr(i,0,1),e===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=yS(s,o,t+1/3),this.g=yS(s,o,t),this.b=yS(s,o,t-1/3)}return Fn.toWorkingColorSpace(this,r),this}setStyle(t,e=Li){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Li){let i=ZU[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Al(t.r),this.g=Al(t.g),this.b=Al(t.b),this}copyLinearToSRGB(t){return this.r=Gf(t.r),this.g=Gf(t.g),this.b=Gf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Li){return Fn.fromWorkingColorSpace(Br.copy(this),t),Math.round(zr(Br.r*255,0,255))*65536+Math.round(zr(Br.g*255,0,255))*256+Math.round(zr(Br.b*255,0,255))}getHexString(t=Li){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Fn.workingColorSpace){Fn.fromWorkingColorSpace(Br.copy(this),e);let i=Br.r,r=Br.g,o=Br.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,e=Fn.workingColorSpace){return Fn.fromWorkingColorSpace(Br.copy(this),e),t.r=Br.r,t.g=Br.g,t.b=Br.b,t}getStyle(t=Li){Fn.fromWorkingColorSpace(Br.copy(this),t);let e=Br.r,i=Br.g,r=Br.b;return t!==Li?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Sc),this.setHSL(Sc.h+t,Sc.s+e,Sc.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Sc),t.getHSL(qv);let i=ym(Sc.h,qv.h,e),r=ym(Sc.s,qv.s,e),o=ym(Sc.l,qv.l,e);return this.setHSL(i,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*r,this.g=o[1]*e+o[4]*i+o[7]*r,this.b=o[2]*e+o[5]*i+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Br=new Bt;Bt.NAMES=ZU;var Kte=0,jr=class extends Rl{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kte++}),this.uuid=oa(),this.name="",this.blending=Wf,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=NS,this.blendDst=kS,this.blendEquation=Vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=qf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wf,this.stencilZFail=wf,this.stencilZPass=wf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Wf&&(i.blending=this.blending),this.side!==Ia&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==NS&&(i.blendSrc=this.blendSrc),this.blendDst!==kS&&(i.blendDst=this.blendDst),this.blendEquation!==Vu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==qf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bL&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==wf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==wf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},Ra=class extends jr{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ju,this.combine=FU,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var or=new ne,Yv=new dn,Pi=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=_P,this.updateRanges=[],this.gpuType=ra,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Yv.fromBufferAttribute(this,e),Yv.applyMatrix3(t),this.setXY(e,Yv.x,Yv.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix3(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix4(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyNormalMatrix(t),this.setXYZ(e,or.x,or.y,or.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.transformDirection(t),this.setXYZ(e,or.x,or.y,or.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=ia(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=ii(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ia(e,this.array)),e}setX(t,e){return this.normalized&&(e=ii(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ia(e,this.array)),e}setY(t,e){return this.normalized&&(e=ii(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ia(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ii(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ia(e,this.array)),e}setW(t,e){return this.normalized&&(e=ii(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=ii(e,this.array),i=ii(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=ii(e,this.array),i=ii(i,this.array),r=ii(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=ii(e,this.array),i=ii(i,this.array),r=ii(r,this.array),o=ii(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==_P&&(t.usage=this.usage),t}};var Cy=class extends Pi{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var My=class extends Pi{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var xs=class extends Pi{constructor(t,e,i){super(new Float32Array(t),e,i)}},Jte=0,vs=new an,xS=new hr,Nf=new ne,qo=new Ki,um=new Ki,Mr=new ne,Do=class n extends Rl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jte++}),this.uuid=oa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(XU(t)?My:Cy)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new xn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return vs.makeRotationFromQuaternion(t),this.applyMatrix4(vs),this}rotateX(t){return vs.makeRotationX(t),this.applyMatrix4(vs),this}rotateY(t){return vs.makeRotationY(t),this.applyMatrix4(vs),this}rotateZ(t){return vs.makeRotationZ(t),this.applyMatrix4(vs),this}translate(t,e,i){return vs.makeTranslation(t,e,i),this.applyMatrix4(vs),this}scale(t,e,i){return vs.makeScale(t,e,i),this.applyMatrix4(vs),this}lookAt(t){return xS.lookAt(t),xS.updateMatrix(),this.applyMatrix4(xS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Nf).negate(),this.translate(Nf.x,Nf.y,Nf.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,o=t.length;r<o;r++){let s=t[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new xs(i,3))}else{for(let i=0,r=e.count;i<r;i++){let o=t[i];e.setXYZ(i,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ki);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let o=e[i];qo.setFromBufferAttribute(o),this.morphTargetsRelative?(Mr.addVectors(this.boundingBox.min,qo.min),this.boundingBox.expandByPoint(Mr),Mr.addVectors(this.boundingBox.max,qo.max),this.boundingBox.expandByPoint(Mr)):(this.boundingBox.expandByPoint(qo.min),this.boundingBox.expandByPoint(qo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Xo);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ne,1/0);return}if(t){let i=this.boundingSphere.center;if(qo.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let a=e[o];um.setFromBufferAttribute(a),this.morphTargetsRelative?(Mr.addVectors(qo.min,um.min),qo.expandByPoint(Mr),Mr.addVectors(qo.max,um.max),qo.expandByPoint(Mr)):(qo.expandByPoint(um.min),qo.expandByPoint(um.max))}qo.getCenter(i);let r=0;for(let o=0,s=t.count;o<s;o++)Mr.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(Mr));if(e)for(let o=0,s=e.length;o<s;o++){let a=e[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Mr.fromBufferAttribute(a,u),l&&(Nf.fromBufferAttribute(t,u),Mr.add(Nf)),r=Math.max(r,i.distanceToSquared(Mr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Pi(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let G=0;G<i.count;G++)a[G]=new ne,l[G]=new ne;let u=new ne,f=new ne,h=new ne,m=new dn,p=new dn,b=new dn,C=new ne,y=new ne;function x(G,k,P){u.fromBufferAttribute(i,G),f.fromBufferAttribute(i,k),h.fromBufferAttribute(i,P),m.fromBufferAttribute(o,G),p.fromBufferAttribute(o,k),b.fromBufferAttribute(o,P),f.sub(u),h.sub(u),p.sub(m),b.sub(m);let N=1/(p.x*b.y-b.x*p.y);isFinite(N)&&(C.copy(f).multiplyScalar(b.y).addScaledVector(h,-p.y).multiplyScalar(N),y.copy(h).multiplyScalar(p.x).addScaledVector(f,-b.x).multiplyScalar(N),a[G].add(C),a[k].add(C),a[P].add(C),l[G].add(y),l[k].add(y),l[P].add(y))}let T=this.groups;T.length===0&&(T=[{start:0,count:t.count}]);for(let G=0,k=T.length;G<k;++G){let P=T[G],N=P.start,S=P.count;for(let q=N,oe=N+S;q<oe;q+=3)x(t.getX(q+0),t.getX(q+1),t.getX(q+2))}let E=new ne,D=new ne,V=new ne,B=new ne;function F(G){V.fromBufferAttribute(r,G),B.copy(V);let k=a[G];E.copy(k),E.sub(V.multiplyScalar(V.dot(k))).normalize(),D.crossVectors(B,k);let N=D.dot(l[G])<0?-1:1;s.setXYZW(G,E.x,E.y,E.z,N)}for(let G=0,k=T.length;G<k;++G){let P=T[G],N=P.start,S=P.count;for(let q=N,oe=N+S;q<oe;q+=3)F(t.getX(q+0)),F(t.getX(q+1)),F(t.getX(q+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Pi(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let m=0,p=i.count;m<p;m++)i.setXYZ(m,0,0,0);let r=new ne,o=new ne,s=new ne,a=new ne,l=new ne,u=new ne,f=new ne,h=new ne;if(t)for(let m=0,p=t.count;m<p;m+=3){let b=t.getX(m+0),C=t.getX(m+1),y=t.getX(m+2);r.fromBufferAttribute(e,b),o.fromBufferAttribute(e,C),s.fromBufferAttribute(e,y),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,b),l.fromBufferAttribute(i,C),u.fromBufferAttribute(i,y),a.add(f),l.add(f),u.add(f),i.setXYZ(b,a.x,a.y,a.z),i.setXYZ(C,l.x,l.y,l.z),i.setXYZ(y,u.x,u.y,u.z)}else for(let m=0,p=e.count;m<p;m+=3)r.fromBufferAttribute(e,m+0),o.fromBufferAttribute(e,m+1),s.fromBufferAttribute(e,m+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Mr.fromBufferAttribute(t,e),Mr.normalize(),t.setXYZ(e,Mr.x,Mr.y,Mr.z)}toNonIndexed(){function t(a,l){let u=a.array,f=a.itemSize,h=a.normalized,m=new u.constructor(l.length*f),p=0,b=0;for(let C=0,y=l.length;C<y;C++){a.isInterleavedBufferAttribute?p=l[C]*a.data.stride+a.offset:p=l[C]*f;for(let x=0;x<f;x++)m[b++]=u[p++]}return new Pi(m,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=t(l,i);e.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let m=u[f],p=t(m,i);l.push(p)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let l in i){let u=i[l];t.data.attributes[l]=u.toJSON(t.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,m=u.length;h<m;h++){let p=u[h];f.push(p.toJSON(t.data))}f.length>0&&(r[l]=f,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let r=t.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(e))}let o=t.morphAttributes;for(let u in o){let f=[],h=o[u];for(let m=0,p=h.length;m<p;m++)f.push(h[m].clone(e));this.morphAttributes[u]=f}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},VL=new an,Nu=new Wu,Xv=new Xo,BL=new ne,Zv=new ne,Kv=new ne,Jv=new ne,bS=new ne,Qv=new ne,zL=new ne,ey=new ne,Mi=class extends hr{constructor(t=new Do,e=new Ra){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(o&&a){Qv.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(bS.fromBufferAttribute(h,t),s?Qv.addScaledVector(bS,f):Qv.addScaledVector(bS.sub(e),f))}e.add(Qv)}return e}raycast(t,e){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Xv.copy(i.boundingSphere),Xv.applyMatrix4(o),Nu.copy(t.ray).recast(t.near),!(Xv.containsPoint(Nu.origin)===!1&&(Nu.intersectSphere(Xv,BL)===null||Nu.origin.distanceToSquared(BL)>(t.far-t.near)**2))&&(VL.copy(o).invert(),Nu.copy(t.ray).applyMatrix4(VL),!(i.boundingBox!==null&&Nu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Nu)))}_computeIntersections(t,e,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,m=o.groups,p=o.drawRange;if(a!==null)if(Array.isArray(s))for(let b=0,C=m.length;b<C;b++){let y=m[b],x=s[y.materialIndex],T=Math.max(y.start,p.start),E=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));for(let D=T,V=E;D<V;D+=3){let B=a.getX(D),F=a.getX(D+1),G=a.getX(D+2);r=ty(this,x,t,i,u,f,h,B,F,G),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=y.materialIndex,e.push(r))}}else{let b=Math.max(0,p.start),C=Math.min(a.count,p.start+p.count);for(let y=b,x=C;y<x;y+=3){let T=a.getX(y),E=a.getX(y+1),D=a.getX(y+2);r=ty(this,s,t,i,u,f,h,T,E,D),r&&(r.faceIndex=Math.floor(y/3),e.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let b=0,C=m.length;b<C;b++){let y=m[b],x=s[y.materialIndex],T=Math.max(y.start,p.start),E=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));for(let D=T,V=E;D<V;D+=3){let B=D,F=D+1,G=D+2;r=ty(this,x,t,i,u,f,h,B,F,G),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=y.materialIndex,e.push(r))}}else{let b=Math.max(0,p.start),C=Math.min(l.count,p.start+p.count);for(let y=b,x=C;y<x;y+=3){let T=y,E=y+1,D=y+2;r=ty(this,s,t,i,u,f,h,T,E,D),r&&(r.faceIndex=Math.floor(y/3),e.push(r))}}}};function Qte(n,t,e,i,r,o,s,a){let l;if(t.side===To?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,t.side===Ia,a),l===null)return null;ey.copy(a),ey.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo(ey);return u<e.near||u>e.far?null:{distance:u,point:ey.clone(),object:n}}function ty(n,t,e,i,r,o,s,a,l,u){n.getVertexPosition(a,Zv),n.getVertexPosition(l,Kv),n.getVertexPosition(u,Jv);let f=Qte(n,t,e,i,Zv,Kv,Jv,zL);if(f){let h=new ne;Bu.getBarycoord(zL,Zv,Kv,Jv,h),r&&(f.uv=Bu.getInterpolatedAttribute(r,a,l,u,h,new dn)),o&&(f.uv1=Bu.getInterpolatedAttribute(o,a,l,u,h,new dn)),s&&(f.normal=Bu.getInterpolatedAttribute(s,a,l,u,h,new ne),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let m={a,b:l,c:u,normal:new ne,materialIndex:0};Bu.getNormal(Zv,Kv,Jv,m.normal),f.face=m,f.barycoord=h}return f}var Em=class n extends Do{constructor(t=1,e=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],m=0,p=0;b("z","y","x",-1,-1,i,e,t,s,o,0),b("z","y","x",1,-1,i,e,-t,s,o,1),b("x","z","y",1,1,t,i,e,r,s,2),b("x","z","y",1,-1,t,i,-e,r,s,3),b("x","y","z",1,-1,t,e,i,r,o,4),b("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new xs(u,3)),this.setAttribute("normal",new xs(f,3)),this.setAttribute("uv",new xs(h,2));function b(C,y,x,T,E,D,V,B,F,G,k){let P=D/F,N=V/G,S=D/2,q=V/2,oe=B/2,ee=F+1,ge=G+1,se=0,de=0,J=new ne;for(let Q=0;Q<ge;Q++){let Ie=Q*N-q;for(let Le=0;Le<ee;Le++){let Ne=Le*P-S;J[C]=Ne*T,J[y]=Ie*E,J[x]=oe,u.push(J.x,J.y,J.z),J[C]=0,J[y]=0,J[x]=B>0?1:-1,f.push(J.x,J.y,J.z),h.push(Le/F),h.push(1-Q/G),se+=1}}for(let Q=0;Q<G;Q++)for(let Ie=0;Ie<F;Ie++){let Le=m+Ie+ee*Q,Ne=m+Ie+ee*(Q+1),Ce=m+(Ie+1)+ee*(Q+1),He=m+(Ie+1)+ee*Q;l.push(Le,Ne,He),l.push(Ne,Ce,He),de+=6}a.addGroup(p,de,k),p+=de,m+=se}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function th(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function uo(n){let t={};for(let e=0;e<n.length;e++){let i=th(n[e]);for(let r in i)t[r]=i[r]}return t}function ene(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function KU(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Fn.workingColorSpace}var tne={clone:th,merge:uo},nne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ine=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Na=class extends jr{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nne,this.fragmentShader=ine,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=th(t.uniforms),this.uniformsGroups=ene(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},wy=class extends hr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an,this.coordinateSystem=Ol}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Pc=new ne,HL=new dn,WL=new dn,fr=class extends wy{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=eh*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(vm*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return eh*2*Math.atan(Math.tan(vm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Pc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Pc.x,Pc.y).multiplyScalar(-t/Pc.z),Pc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Pc.x,Pc.y).multiplyScalar(-t/Pc.z)}getViewSize(t,e){return this.getViewBounds(t,HL,WL),e.subVectors(WL,HL)}setViewOffset(t,e,i,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(vm*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,e-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},kf=-90,Ff=1,bP=class extends hr{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new fr(kf,Ff,t,e);r.layers=this.layers,this.add(r);let o=new fr(kf,Ff,t,e);o.layers=this.layers,this.add(o);let s=new fr(kf,Ff,t,e);s.layers=this.layers,this.add(s);let a=new fr(kf,Ff,t,e);a.layers=this.layers,this.add(a);let l=new fr(kf,Ff,t,e);l.layers=this.layers,this.add(l);let u=new fr(kf,Ff,t,e);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,o,s,a,l]=e;for(let u of e)this.remove(u);if(t===Ol)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===yy)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let u of e)this.add(u),u.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=t.getRenderTarget(),m=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),b=t.xr.enabled;t.xr.enabled=!1;let C=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,o),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,l),t.setRenderTarget(i,4,r),t.render(e,u),i.texture.generateMipmaps=C,t.setRenderTarget(i,5,r),t.render(e,f),t.setRenderTarget(h,m,p),t.xr.enabled=b,i.texture.needsPMREMUpdate=!0}},Ey=class extends Ms{constructor(t,e,i,r,o,s,a,l,u,f){t=t!==void 0?t:[],e=e!==void 0?e:Yf,super(t,e,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},CP=class extends Nl{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Ey(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:wr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Em(5,5,5),o=new Na({name:"CubemapFromEquirect",uniforms:th(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:To,blending:Dc});o.uniforms.tEquirect.value=e;let s=new Mi(r,o),a=e.minFilter;return e.minFilter===Po&&(e.minFilter=wr),new bP(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,r){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,r);t.setRenderTarget(o)}},CS=new ne,rne=new ne,one=new xn,Tl=class{constructor(t=new ne(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=CS.subVectors(i,e).cross(rne.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(CS),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||one.getNormalMatrix(t),r=this.coplanarPoint(CS).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},ku=new Xo,ny=new ne,Sm=class{constructor(t=new Tl,e=new Tl,i=new Tl,r=new Tl,o=new Tl,s=new Tl){this.planes=[t,e,i,r,o,s]}set(t,e,i,r,o,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Ol){let i=this.planes,r=t.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],m=r[7],p=r[8],b=r[9],C=r[10],y=r[11],x=r[12],T=r[13],E=r[14],D=r[15];if(i[0].setComponents(l-o,m-u,y-p,D-x).normalize(),i[1].setComponents(l+o,m+u,y+p,D+x).normalize(),i[2].setComponents(l+s,m+f,y+b,D+T).normalize(),i[3].setComponents(l-s,m-f,y-b,D-T).normalize(),i[4].setComponents(l-a,m-h,y-C,D-E).normalize(),e===Ol)i[5].setComponents(l+a,m+h,y+C,D+E).normalize();else if(e===yy)i[5].setComponents(a,h,C,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),ku.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),ku.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(ku)}intersectsSprite(t){return ku.center.set(0,0,0),ku.radius=.7071067811865476,ku.applyMatrix4(t.matrixWorld),this.intersectsSphere(ku)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(ny.x=r.normal.x>0?t.max.x:t.min.x,ny.y=r.normal.y>0?t.max.y:t.min.y,ny.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ny)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function JU(){let n=null,t=!1,e=null,i=null;function r(o,s){e(o,s),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function sne(n){let t=new WeakMap;function e(a,l){let u=a.array,f=a.usage,h=u.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,u,f),a.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((p,b)=>p.start-b.start);let m=0;for(let p=1;p<h.length;p++){let b=h[m],C=h[p];C.start<=b.start+b.count+1?b.count=Math.max(b.count,C.start+C.count-b.start):(++m,h[m]=C)}h.length=m+1;for(let p=0,b=h.length;p<b;p++){let C=h[p];n.bufferSubData(u,C.start*f.BYTES_PER_ELEMENT,f,C.start,C.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=t.get(a);l&&(n.deleteBuffer(l.buffer),t.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=t.get(a);(!f||f.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=t.get(a);if(u===void 0)t.set(a,e(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var bs=class n extends Do{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let o=t/2,s=e/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=t/a,m=e/l,p=[],b=[],C=[],y=[];for(let x=0;x<f;x++){let T=x*m-s;for(let E=0;E<u;E++){let D=E*h-o;b.push(D,-T,0),C.push(0,0,1),y.push(E/a),y.push(1-x/l)}}for(let x=0;x<l;x++)for(let T=0;T<a;T++){let E=T+u*x,D=T+u*(x+1),V=T+1+u*(x+1),B=T+1+u*x;p.push(E,D,B),p.push(D,V,B)}this.setIndex(p),this.setAttribute("position",new xs(b,3)),this.setAttribute("normal",new xs(C,3)),this.setAttribute("uv",new xs(y,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}},ane=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,cne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,une=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dne=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,hne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mne=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,gne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,_ne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Cne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Mne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,wne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Ene=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Sne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Pne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Tne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Dne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,One=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ane=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ine=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Rne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Nne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,kne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Fne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Lne="gl_FragColor = linearToOutputTexel( gl_FragColor );",Une=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Vne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Bne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Hne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Wne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Gne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$ne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,qne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Yne=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Xne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Zne=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Kne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Jne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Qne=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,eie=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tie=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iie=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,rie=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,oie=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,sie=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,aie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,cie=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,uie=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,die=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fie=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,hie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_ie=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,yie=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,xie=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,bie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Cie=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Mie=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,wie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Eie=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Sie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Pie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Tie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Die=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Oie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Aie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Iie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Rie=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Nie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,kie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Fie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Lie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Uie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Vie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Bie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Hie=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Wie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Gie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$ie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,qie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Yie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Xie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Zie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Kie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jie=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ere=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,tre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,nre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ire=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ore=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,sre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,are=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ure=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dre=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,hre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,pre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_re=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,bre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Mre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wre=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ere=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Pre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Tre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Dre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ore=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Are=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ire=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rre=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nre=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fre=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lre=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ure=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Vre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wn={alphahash_fragment:ane,alphahash_pars_fragment:lne,alphamap_fragment:cne,alphamap_pars_fragment:une,alphatest_fragment:dne,alphatest_pars_fragment:fne,aomap_fragment:hne,aomap_pars_fragment:pne,batching_pars_vertex:mne,batching_vertex:gne,begin_vertex:_ne,beginnormal_vertex:vne,bsdfs:yne,iridescence_fragment:xne,bumpmap_pars_fragment:bne,clipping_planes_fragment:Cne,clipping_planes_pars_fragment:Mne,clipping_planes_pars_vertex:wne,clipping_planes_vertex:Ene,color_fragment:Sne,color_pars_fragment:Pne,color_pars_vertex:Tne,color_vertex:Dne,common:One,cube_uv_reflection_fragment:Ane,defaultnormal_vertex:Ine,displacementmap_pars_vertex:Rne,displacementmap_vertex:Nne,emissivemap_fragment:kne,emissivemap_pars_fragment:Fne,colorspace_fragment:Lne,colorspace_pars_fragment:Une,envmap_fragment:Vne,envmap_common_pars_fragment:Bne,envmap_pars_fragment:zne,envmap_pars_vertex:Hne,envmap_physical_pars_fragment:Qne,envmap_vertex:Wne,fog_vertex:jne,fog_pars_vertex:Gne,fog_fragment:$ne,fog_pars_fragment:qne,gradientmap_pars_fragment:Yne,lightmap_pars_fragment:Xne,lights_lambert_fragment:Zne,lights_lambert_pars_fragment:Kne,lights_pars_begin:Jne,lights_toon_fragment:eie,lights_toon_pars_fragment:tie,lights_phong_fragment:nie,lights_phong_pars_fragment:iie,lights_physical_fragment:rie,lights_physical_pars_fragment:oie,lights_fragment_begin:sie,lights_fragment_maps:aie,lights_fragment_end:lie,logdepthbuf_fragment:cie,logdepthbuf_pars_fragment:uie,logdepthbuf_pars_vertex:die,logdepthbuf_vertex:fie,map_fragment:hie,map_pars_fragment:pie,map_particle_fragment:mie,map_particle_pars_fragment:gie,metalnessmap_fragment:_ie,metalnessmap_pars_fragment:vie,morphinstance_vertex:yie,morphcolor_vertex:xie,morphnormal_vertex:bie,morphtarget_pars_vertex:Cie,morphtarget_vertex:Mie,normal_fragment_begin:wie,normal_fragment_maps:Eie,normal_pars_fragment:Sie,normal_pars_vertex:Pie,normal_vertex:Tie,normalmap_pars_fragment:Die,clearcoat_normal_fragment_begin:Oie,clearcoat_normal_fragment_maps:Aie,clearcoat_pars_fragment:Iie,iridescence_pars_fragment:Rie,opaque_fragment:Nie,packing:kie,premultiplied_alpha_fragment:Fie,project_vertex:Lie,dithering_fragment:Uie,dithering_pars_fragment:Vie,roughnessmap_fragment:Bie,roughnessmap_pars_fragment:zie,shadowmap_pars_fragment:Hie,shadowmap_pars_vertex:Wie,shadowmap_vertex:jie,shadowmask_pars_fragment:Gie,skinbase_vertex:$ie,skinning_pars_vertex:qie,skinning_vertex:Yie,skinnormal_vertex:Xie,specularmap_fragment:Zie,specularmap_pars_fragment:Kie,tonemapping_fragment:Jie,tonemapping_pars_fragment:Qie,transmission_fragment:ere,transmission_pars_fragment:tre,uv_pars_fragment:nre,uv_pars_vertex:ire,uv_vertex:rre,worldpos_vertex:ore,background_vert:sre,background_frag:are,backgroundCube_vert:lre,backgroundCube_frag:cre,cube_vert:ure,cube_frag:dre,depth_vert:fre,depth_frag:hre,distanceRGBA_vert:pre,distanceRGBA_frag:mre,equirect_vert:gre,equirect_frag:_re,linedashed_vert:vre,linedashed_frag:yre,meshbasic_vert:xre,meshbasic_frag:bre,meshlambert_vert:Cre,meshlambert_frag:Mre,meshmatcap_vert:wre,meshmatcap_frag:Ere,meshnormal_vert:Sre,meshnormal_frag:Pre,meshphong_vert:Tre,meshphong_frag:Dre,meshphysical_vert:Ore,meshphysical_frag:Are,meshtoon_vert:Ire,meshtoon_frag:Rre,points_vert:Nre,points_frag:kre,shadow_vert:Fre,shadow_frag:Lre,sprite_vert:Ure,sprite_frag:Vre},ot={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},envMapRotation:{value:new xn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new dn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new dn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},Oa={basic:{uniforms:uo([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:uo([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:uo([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:uo([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:uo([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new Bt(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:uo([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:uo([ot.points,ot.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:uo([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:uo([ot.common,ot.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:uo([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:uo([ot.sprite,ot.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new xn}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:uo([ot.common,ot.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:uo([ot.lights,ot.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};Oa.physical={uniforms:uo([Oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new dn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new dn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new dn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};var iy={r:0,b:0,g:0},Fu=new ju,Bre=new an;function zre(n,t,e,i,r,o,s){let a=new Bt(0),l=o===!0?0:1,u,f,h=null,m=0,p=null;function b(T){let E=T.isScene===!0?T.background:null;return E&&E.isTexture&&(E=(T.backgroundBlurriness>0?e:t).get(E)),E}function C(T){let E=!1,D=b(T);D===null?x(a,l):D&&D.isColor&&(x(D,1),E=!0);let V=n.xr.getEnvironmentBlendMode();V==="additive"?i.buffers.color.setClear(0,0,0,1,s):V==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(T,E){let D=b(E);D&&(D.isCubeTexture||D.mapping===$y)?(f===void 0&&(f=new Mi(new Em(1,1,1),new Na({name:"BackgroundCubeMaterial",uniforms:th(Oa.backgroundCube.uniforms),vertexShader:Oa.backgroundCube.vertexShader,fragmentShader:Oa.backgroundCube.fragmentShader,side:To,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(V,B,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Fu.copy(E.backgroundRotation),Fu.x*=-1,Fu.y*=-1,Fu.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Fu.y*=-1,Fu.z*=-1),f.material.uniforms.envMap.value=D,f.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Bre.makeRotationFromEuler(Fu)),f.material.toneMapped=Fn.getTransfer(D.colorSpace)!==di,(h!==D||m!==D.version||p!==n.toneMapping)&&(f.material.needsUpdate=!0,h=D,m=D.version,p=n.toneMapping),f.layers.enableAll(),T.unshift(f,f.geometry,f.material,0,0,null)):D&&D.isTexture&&(u===void 0&&(u=new Mi(new bs(2,2),new Na({name:"BackgroundMaterial",uniforms:th(Oa.background.uniforms),vertexShader:Oa.background.vertexShader,fragmentShader:Oa.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=D,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=Fn.getTransfer(D.colorSpace)!==di,D.matrixAutoUpdate===!0&&D.updateMatrix(),u.material.uniforms.uvTransform.value.copy(D.matrix),(h!==D||m!==D.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,h=D,m=D.version,p=n.toneMapping),u.layers.enableAll(),T.unshift(u,u.geometry,u.material,0,0,null))}function x(T,E){T.getRGB(iy,KU(n)),i.buffers.color.setClear(iy.r,iy.g,iy.b,E,s)}return{getClearColor:function(){return a},setClearColor:function(T,E=1){a.set(T),l=E,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,x(a,l)},render:C,addToRenderList:y}}function Hre(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null),o=r,s=!1;function a(P,N,S,q,oe){let ee=!1,ge=h(q,S,N);o!==ge&&(o=ge,u(o.object)),ee=p(P,q,S,oe),ee&&b(P,q,S,oe),oe!==null&&t.update(oe,n.ELEMENT_ARRAY_BUFFER),(ee||s)&&(s=!1,D(P,N,S,q),oe!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(oe).buffer))}function l(){return n.createVertexArray()}function u(P){return n.bindVertexArray(P)}function f(P){return n.deleteVertexArray(P)}function h(P,N,S){let q=S.wireframe===!0,oe=i[P.id];oe===void 0&&(oe={},i[P.id]=oe);let ee=oe[N.id];ee===void 0&&(ee={},oe[N.id]=ee);let ge=ee[q];return ge===void 0&&(ge=m(l()),ee[q]=ge),ge}function m(P){let N=[],S=[],q=[];for(let oe=0;oe<e;oe++)N[oe]=0,S[oe]=0,q[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:S,attributeDivisors:q,object:P,attributes:{},index:null}}function p(P,N,S,q){let oe=o.attributes,ee=N.attributes,ge=0,se=S.getAttributes();for(let de in se)if(se[de].location>=0){let Q=oe[de],Ie=ee[de];if(Ie===void 0&&(de==="instanceMatrix"&&P.instanceMatrix&&(Ie=P.instanceMatrix),de==="instanceColor"&&P.instanceColor&&(Ie=P.instanceColor)),Q===void 0||Q.attribute!==Ie||Ie&&Q.data!==Ie.data)return!0;ge++}return o.attributesNum!==ge||o.index!==q}function b(P,N,S,q){let oe={},ee=N.attributes,ge=0,se=S.getAttributes();for(let de in se)if(se[de].location>=0){let Q=ee[de];Q===void 0&&(de==="instanceMatrix"&&P.instanceMatrix&&(Q=P.instanceMatrix),de==="instanceColor"&&P.instanceColor&&(Q=P.instanceColor));let Ie={};Ie.attribute=Q,Q&&Q.data&&(Ie.data=Q.data),oe[de]=Ie,ge++}o.attributes=oe,o.attributesNum=ge,o.index=q}function C(){let P=o.newAttributes;for(let N=0,S=P.length;N<S;N++)P[N]=0}function y(P){x(P,0)}function x(P,N){let S=o.newAttributes,q=o.enabledAttributes,oe=o.attributeDivisors;S[P]=1,q[P]===0&&(n.enableVertexAttribArray(P),q[P]=1),oe[P]!==N&&(n.vertexAttribDivisor(P,N),oe[P]=N)}function T(){let P=o.newAttributes,N=o.enabledAttributes;for(let S=0,q=N.length;S<q;S++)N[S]!==P[S]&&(n.disableVertexAttribArray(S),N[S]=0)}function E(P,N,S,q,oe,ee,ge){ge===!0?n.vertexAttribIPointer(P,N,S,oe,ee):n.vertexAttribPointer(P,N,S,q,oe,ee)}function D(P,N,S,q){C();let oe=q.attributes,ee=S.getAttributes(),ge=N.defaultAttributeValues;for(let se in ee){let de=ee[se];if(de.location>=0){let J=oe[se];if(J===void 0&&(se==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),se==="instanceColor"&&P.instanceColor&&(J=P.instanceColor)),J!==void 0){let Q=J.normalized,Ie=J.itemSize,Le=t.get(J);if(Le===void 0)continue;let Ne=Le.buffer,Ce=Le.type,He=Le.bytesPerElement,Ge=Ce===n.INT||Ce===n.UNSIGNED_INT||J.gpuType===KP;if(J.isInterleavedBufferAttribute){let Ve=J.data,mt=Ve.stride,pt=J.offset;if(Ve.isInstancedInterleavedBuffer){for(let Lt=0;Lt<de.locationSize;Lt++)x(de.location+Lt,Ve.meshPerAttribute);P.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let Lt=0;Lt<de.locationSize;Lt++)y(de.location+Lt);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Lt=0;Lt<de.locationSize;Lt++)E(de.location+Lt,Ie/de.locationSize,Ce,Q,mt*He,(pt+Ie/de.locationSize*Lt)*He,Ge)}else{if(J.isInstancedBufferAttribute){for(let Ve=0;Ve<de.locationSize;Ve++)x(de.location+Ve,J.meshPerAttribute);P.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let Ve=0;Ve<de.locationSize;Ve++)y(de.location+Ve);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Ve=0;Ve<de.locationSize;Ve++)E(de.location+Ve,Ie/de.locationSize,Ce,Q,Ie*He,Ie/de.locationSize*Ve*He,Ge)}}else if(ge!==void 0){let Q=ge[se];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(de.location,Q);break;case 3:n.vertexAttrib3fv(de.location,Q);break;case 4:n.vertexAttrib4fv(de.location,Q);break;default:n.vertexAttrib1fv(de.location,Q)}}}}T()}function V(){G();for(let P in i){let N=i[P];for(let S in N){let q=N[S];for(let oe in q)f(q[oe].object),delete q[oe];delete N[S]}delete i[P]}}function B(P){if(i[P.id]===void 0)return;let N=i[P.id];for(let S in N){let q=N[S];for(let oe in q)f(q[oe].object),delete q[oe];delete N[S]}delete i[P.id]}function F(P){for(let N in i){let S=i[N];if(S[P.id]===void 0)continue;let q=S[P.id];for(let oe in q)f(q[oe].object),delete q[oe];delete S[P.id]}}function G(){k(),s=!0,o!==r&&(o=r,u(o.object))}function k(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:G,resetDefaultState:k,dispose:V,releaseStatesOfGeometry:B,releaseStatesOfProgram:F,initAttributes:C,enableAttribute:y,disableUnusedAttributes:T}}function Wre(n,t,e){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),e.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),e.update(f,i,h))}function a(u,f,h){if(h===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let p=0;for(let b=0;b<h;b++)p+=f[b];e.update(p,i,1)}function l(u,f,h,m){if(h===0)return;let p=t.get("WEBGL_multi_draw");if(p===null)for(let b=0;b<u.length;b++)s(u[b],f[b],m[b]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,f,0,m,0,h);let b=0;for(let C=0;C<h;C++)b+=f[C]*m[C];e.update(b,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function jre(n,t,e,i){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let F=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(F){return!(F!==ys&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(F){let G=F===Rm&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==Il&&i.convert(F)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==ra&&!G)}function l(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=e.precision!==void 0?e.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=e.logarithmicDepthBuffer===!0,m=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),V=b>0,B=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:m,maxTextures:p,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:y,maxAttributes:x,maxVertexUniforms:T,maxVaryings:E,maxFragmentUniforms:D,vertexTextures:V,maxSamples:B}}function Gre(n){let t=this,e=null,i=0,r=!1,o=!1,s=new Tl,a=new xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){let p=h.length!==0||m||i!==0||r;return r=m,i=h.length,p},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,m){e=f(h,m,0)},this.setState=function(h,m,p){let b=h.clippingPlanes,C=h.clipIntersection,y=h.clipShadows,x=n.get(h);if(!r||b===null||b.length===0||o&&!y)o?f(null):u();else{let T=o?0:i,E=T*4,D=x.clippingState||null;l.value=D,D=f(b,m,E,p);for(let V=0;V!==E;++V)D[V]=e[V];x.clippingState=D,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function f(h,m,p,b){let C=h!==null?h.length:0,y=null;if(C!==0){if(y=l.value,b!==!0||y===null){let x=p+C*4,T=m.matrixWorldInverse;a.getNormalMatrix(T),(y===null||y.length<x)&&(y=new Float32Array(x));for(let E=0,D=p;E!==C;++E,D+=4)s.copy(h[E]).applyMatrix4(T,a),s.normal.toArray(y,D),y[D+3]=s.constant}l.value=y,l.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,y}}function $re(n){let t=new WeakMap;function e(s,a){return a===WS?s.mapping=Yf:a===jS&&(s.mapping=Xf),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===WS||a===jS)if(t.has(s)){let l=t.get(s).texture;return e(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new CP(l.height);return u.fromEquirectangularTexture(n,s),t.set(s,u),s.addEventListener("dispose",r),e(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}var ka=class extends wy{constructor(t=-1,e=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-t,s=i+t,a=r+e,l=r-e;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},Hf=4,jL=[.125,.215,.35,.446,.526,.582],zu=20,MS=new ka,GL=new Bt,wS=null,ES=0,SS=0,PS=!1,Uu=(1+Math.sqrt(5))/2,Lf=1/Uu,$L=[new ne(-Uu,Lf,0),new ne(Uu,Lf,0),new ne(-Lf,0,Uu),new ne(Lf,0,Uu),new ne(0,Uu,-Lf),new ne(0,Uu,Lf),new ne(-1,1,-1),new ne(1,1,-1),new ne(-1,1,1),new ne(1,1,1)],Sy=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){wS=this._renderer.getRenderTarget(),ES=this._renderer.getActiveCubeFace(),SS=this._renderer.getActiveMipmapLevel(),PS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=YL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(wS,ES,SS),this._renderer.xr.enabled=PS,t.scissorTest=!1,ry(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Yf||t.mapping===Xf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),wS=this._renderer.getRenderTarget(),ES=this._renderer.getActiveCubeFace(),SS=this._renderer.getActiveMipmapLevel(),PS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:wr,minFilter:wr,generateMipmaps:!1,type:Rm,format:ys,colorSpace:$r,depthBuffer:!1},r=qL(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qL(t,e,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=qre(o)),this._blurMaterial=Yre(o,t,e)}return r}_compileMaterial(t){let e=new Mi(this._lodPlanes[0],t);this._renderer.compile(e,MS)}_sceneToCubeUV(t,e,i,r){let a=new fr(90,1,e,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,m=f.toneMapping;f.getClearColor(GL),f.toneMapping=Oc,f.autoClear=!1;let p=new Ra({name:"PMREM.Background",side:To,depthWrite:!1,depthTest:!1}),b=new Mi(new Em,p),C=!1,y=t.background;y?y.isColor&&(p.color.copy(y),t.background=null,C=!0):(p.color.copy(GL),C=!0);for(let x=0;x<6;x++){let T=x%3;T===0?(a.up.set(0,l[x],0),a.lookAt(u[x],0,0)):T===1?(a.up.set(0,0,l[x]),a.lookAt(0,u[x],0)):(a.up.set(0,l[x],0),a.lookAt(0,0,u[x]));let E=this._cubeSize;ry(r,T*E,x>2?E:0,E,E),f.setRenderTarget(r),C&&f.render(b,a),f.render(t,a)}b.geometry.dispose(),b.material.dispose(),f.toneMapping=m,f.autoClear=h,t.background=y}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===Yf||t.mapping===Xf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=XL()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=YL());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Mi(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;let l=this._cubeSize;ry(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(s,MS)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=$L[(r-o-1)%$L.length];this._blur(t,o-1,o,s,a)}e.autoClear=i}_blur(t,e,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",o),this._halfBlur(s,t,i,i,r,"longitudinal",o)}_halfBlur(t,e,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new Mi(this._lodPlanes[r],u),m=u.uniforms,p=this._sizeLods[i]-1,b=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*zu-1),C=o/b,y=isFinite(o)?1+Math.floor(f*C):zu;y>zu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${zu}`);let x=[],T=0;for(let F=0;F<zu;++F){let G=F/C,k=Math.exp(-G*G/2);x.push(k),F===0?T+=k:F<y&&(T+=2*k)}for(let F=0;F<x.length;F++)x[F]=x[F]/T;m.envMap.value=t.texture,m.samples.value=y,m.weights.value=x,m.latitudinal.value=s==="latitudinal",a&&(m.poleAxis.value=a);let{_lodMax:E}=this;m.dTheta.value=b,m.mipInt.value=E-i;let D=this._sizeLods[r],V=3*D*(r>E-Hf?r-E+Hf:0),B=4*(this._cubeSize-D);ry(e,V,B,3*D,2*D),l.setRenderTarget(e),l.render(h,MS)}};function qre(n){let t=[],e=[],i=[],r=n,o=n-Hf+1+jL.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);e.push(a);let l=1/a;s>n-Hf?l=jL[s-n+Hf-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,m=[f,f,h,f,h,h,f,f,h,h,f,h],p=6,b=6,C=3,y=2,x=1,T=new Float32Array(C*b*p),E=new Float32Array(y*b*p),D=new Float32Array(x*b*p);for(let B=0;B<p;B++){let F=B%3*2/3-1,G=B>2?0:-1,k=[F,G,0,F+2/3,G,0,F+2/3,G+1,0,F,G,0,F+2/3,G+1,0,F,G+1,0];T.set(k,C*b*B),E.set(m,y*b*B);let P=[B,B,B,B,B,B];D.set(P,x*b*B)}let V=new Do;V.setAttribute("position",new Pi(T,C)),V.setAttribute("uv",new Pi(E,y)),V.setAttribute("faceIndex",new Pi(D,x)),t.push(V),r>Hf&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function qL(n,t,e){let i=new Nl(n,t,e);return i.texture.mapping=$y,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ry(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function Yre(n,t,e){let i=new Float32Array(zu),r=new ne(0,1,0);return new Na({name:"SphericalGaussianBlur",defines:{n:zu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:aT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function YL(){return new Na({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:aT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function XL(){return new Na({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:aT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function aT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Xre(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===WS||l===jS,f=l===Yf||l===Xf;if(u||f){let h=t.get(a),m=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return e===null&&(e=new Sy(n)),h=u?e.fromEquirectangular(a,h):e.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(h!==void 0)return h.texture;{let p=a.image;return u&&p&&p.height>0||f&&p&&r(p)?(e===null&&(e=new Sy(n)),h=u?e.fromEquirectangular(a):e.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function Zre(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&mm("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Kre(n,t,e,i){let r={},o=new WeakMap;function s(h){let m=h.target;m.index!==null&&t.remove(m.index);for(let b in m.attributes)t.remove(m.attributes[b]);for(let b in m.morphAttributes){let C=m.morphAttributes[b];for(let y=0,x=C.length;y<x;y++)t.remove(C[y])}m.removeEventListener("dispose",s),delete r[m.id];let p=o.get(m);p&&(t.remove(p),o.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,e.memory.geometries--}function a(h,m){return r[m.id]===!0||(m.addEventListener("dispose",s),r[m.id]=!0,e.memory.geometries++),m}function l(h){let m=h.attributes;for(let b in m)t.update(m[b],n.ARRAY_BUFFER);let p=h.morphAttributes;for(let b in p){let C=p[b];for(let y=0,x=C.length;y<x;y++)t.update(C[y],n.ARRAY_BUFFER)}}function u(h){let m=[],p=h.index,b=h.attributes.position,C=0;if(p!==null){let T=p.array;C=p.version;for(let E=0,D=T.length;E<D;E+=3){let V=T[E+0],B=T[E+1],F=T[E+2];m.push(V,B,B,F,F,V)}}else if(b!==void 0){let T=b.array;C=b.version;for(let E=0,D=T.length/3-1;E<D;E+=3){let V=E+0,B=E+1,F=E+2;m.push(V,B,B,F,F,V)}}else return;let y=new(XU(m)?My:Cy)(m,1);y.version=C;let x=o.get(h);x&&t.remove(x),o.set(h,y)}function f(h){let m=o.get(h);if(m){let p=h.index;p!==null&&m.version<p.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function Jre(n,t,e){let i;function r(m){i=m}let o,s;function a(m){o=m.type,s=m.bytesPerElement}function l(m,p){n.drawElements(i,p,o,m*s),e.update(p,i,1)}function u(m,p,b){b!==0&&(n.drawElementsInstanced(i,p,o,m*s,b),e.update(p,i,b))}function f(m,p,b){if(b===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,o,m,0,b);let y=0;for(let x=0;x<b;x++)y+=p[x];e.update(y,i,1)}function h(m,p,b,C){if(b===0)return;let y=t.get("WEBGL_multi_draw");if(y===null)for(let x=0;x<m.length;x++)u(m[x]/s,p[x],C[x]);else{y.multiDrawElementsInstancedWEBGL(i,p,0,o,m,0,C,0,b);let x=0;for(let T=0;T<b;T++)x+=p[T]*C[T];e.update(x,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function Qre(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(e.calls++,s){case n.TRIANGLES:e.triangles+=a*(o/3);break;case n.LINES:e.lines+=a*(o/2);break;case n.LINE_STRIP:e.lines+=a*(o-1);break;case n.LINE_LOOP:e.lines+=a*o;break;case n.POINTS:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function eoe(n,t,e){let i=new WeakMap,r=new pn;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,m=i.get(a);if(m===void 0||m.count!==h){let P=function(){G.dispose(),i.delete(a),a.removeEventListener("dispose",P)};var p=P;m!==void 0&&m.texture.dispose();let b=a.morphAttributes.position!==void 0,C=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],E=a.morphAttributes.color||[],D=0;b===!0&&(D=1),C===!0&&(D=2),y===!0&&(D=3);let V=a.attributes.position.count*D,B=1;V>t.maxTextureSize&&(B=Math.ceil(V/t.maxTextureSize),V=t.maxTextureSize);let F=new Float32Array(V*B*4*h),G=new by(F,V,B,h);G.type=ra,G.needsUpdate=!0;let k=D*4;for(let N=0;N<h;N++){let S=x[N],q=T[N],oe=E[N],ee=V*B*4*N;for(let ge=0;ge<S.count;ge++){let se=ge*k;b===!0&&(r.fromBufferAttribute(S,ge),F[ee+se+0]=r.x,F[ee+se+1]=r.y,F[ee+se+2]=r.z,F[ee+se+3]=0),C===!0&&(r.fromBufferAttribute(q,ge),F[ee+se+4]=r.x,F[ee+se+5]=r.y,F[ee+se+6]=r.z,F[ee+se+7]=0),y===!0&&(r.fromBufferAttribute(oe,ge),F[ee+se+8]=r.x,F[ee+se+9]=r.y,F[ee+se+10]=r.z,F[ee+se+11]=oe.itemSize===4?r.w:1)}}m={count:h,texture:G,size:new dn(V,B)},i.set(a,m),a.addEventListener("dispose",P)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,e);else{let b=0;for(let y=0;y<u.length;y++)b+=u[y];let C=a.morphTargetsRelative?1:1-b;l.getUniforms().setValue(n,"morphTargetBaseInfluence",C),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,e),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:o}}function toe(n,t,e,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=t.get(l,f);if(r.get(h)!==u&&(t.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(e.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&e.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let m=l.skeleton;r.get(m)!==u&&(m.update(),r.set(m,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:o,dispose:s}}var Py=class extends Ms{constructor(t,e,i,r,o,s,a,l,u,f=jf){if(f!==jf&&f!==Kf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===jf&&(i=Hu),i===void 0&&f===Kf&&(i=Zf),super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:Hr,this.minFilter=l!==void 0?l:Hr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},QU=new Ms,ZL=new Py(1,1),eV=new by,tV=new xP,nV=new Ey,KL=[],JL=[],QL=new Float32Array(16),eU=new Float32Array(9),tU=new Float32Array(4);function ah(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,o=KL[r];if(o===void 0&&(o=new Float32Array(r),KL[r]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,n[s].toArray(o,a)}return o}function pr(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function mr(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Xy(n,t){let e=JL[t];e===void 0&&(e=new Int32Array(t),JL[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function noe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function ioe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2fv(this.addr,t),mr(e,t)}}function roe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(pr(e,t))return;n.uniform3fv(this.addr,t),mr(e,t)}}function ooe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4fv(this.addr,t),mr(e,t)}}function soe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;tU.set(i),n.uniformMatrix2fv(this.addr,!1,tU),mr(e,i)}}function aoe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;eU.set(i),n.uniformMatrix3fv(this.addr,!1,eU),mr(e,i)}}function loe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(pr(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),mr(e,t)}else{if(pr(e,i))return;QL.set(i),n.uniformMatrix4fv(this.addr,!1,QL),mr(e,i)}}function coe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function uoe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2iv(this.addr,t),mr(e,t)}}function doe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(pr(e,t))return;n.uniform3iv(this.addr,t),mr(e,t)}}function foe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4iv(this.addr,t),mr(e,t)}}function hoe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function poe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(pr(e,t))return;n.uniform2uiv(this.addr,t),mr(e,t)}}function moe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(pr(e,t))return;n.uniform3uiv(this.addr,t),mr(e,t)}}function goe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(pr(e,t))return;n.uniform4uiv(this.addr,t),mr(e,t)}}function _oe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(ZL.compareFunction=YU,o=ZL):o=QU,e.setTexture2D(t||o,r)}function voe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||tV,r)}function yoe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||nV,r)}function xoe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||eV,r)}function boe(n){switch(n){case 5126:return noe;case 35664:return ioe;case 35665:return roe;case 35666:return ooe;case 35674:return soe;case 35675:return aoe;case 35676:return loe;case 5124:case 35670:return coe;case 35667:case 35671:return uoe;case 35668:case 35672:return doe;case 35669:case 35673:return foe;case 5125:return hoe;case 36294:return poe;case 36295:return moe;case 36296:return goe;case 35678:case 36198:case 36298:case 36306:case 35682:return _oe;case 35679:case 36299:case 36307:return voe;case 35680:case 36300:case 36308:case 36293:return yoe;case 36289:case 36303:case 36311:case 36292:return xoe}}function Coe(n,t){n.uniform1fv(this.addr,t)}function Moe(n,t){let e=ah(t,this.size,2);n.uniform2fv(this.addr,e)}function woe(n,t){let e=ah(t,this.size,3);n.uniform3fv(this.addr,e)}function Eoe(n,t){let e=ah(t,this.size,4);n.uniform4fv(this.addr,e)}function Soe(n,t){let e=ah(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function Poe(n,t){let e=ah(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function Toe(n,t){let e=ah(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function Doe(n,t){n.uniform1iv(this.addr,t)}function Ooe(n,t){n.uniform2iv(this.addr,t)}function Aoe(n,t){n.uniform3iv(this.addr,t)}function Ioe(n,t){n.uniform4iv(this.addr,t)}function Roe(n,t){n.uniform1uiv(this.addr,t)}function Noe(n,t){n.uniform2uiv(this.addr,t)}function koe(n,t){n.uniform3uiv(this.addr,t)}function Foe(n,t){n.uniform4uiv(this.addr,t)}function Loe(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture2D(t[s]||QU,o[s])}function Uoe(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||tV,o[s])}function Voe(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||nV,o[s])}function Boe(n,t,e){let i=this.cache,r=t.length,o=Xy(e,r);pr(i,o)||(n.uniform1iv(this.addr,o),mr(i,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||eV,o[s])}function zoe(n){switch(n){case 5126:return Coe;case 35664:return Moe;case 35665:return woe;case 35666:return Eoe;case 35674:return Soe;case 35675:return Poe;case 35676:return Toe;case 5124:case 35670:return Doe;case 35667:case 35671:return Ooe;case 35668:case 35672:return Aoe;case 35669:case 35673:return Ioe;case 5125:return Roe;case 36294:return Noe;case 36295:return koe;case 36296:return Foe;case 35678:case 36198:case 36298:case 36306:case 35682:return Loe;case 35679:case 36299:case 36307:return Uoe;case 35680:case 36300:case 36308:case 36293:return Voe;case 36289:case 36303:case 36311:case 36292:return Boe}}var MP=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=boe(e.type)}},wP=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=zoe(e.type)}},EP=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(t,e[a.id],i)}}},TS=/(\w+)(\])?(\[|\.)?/g;function nU(n,t){n.seq.push(t),n.map[t.id]=t}function Hoe(n,t,e){let i=n.name,r=i.length;for(TS.lastIndex=0;;){let o=TS.exec(i),s=TS.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){nU(e,u===void 0?new MP(a,n,t):new wP(a,n,t));break}else{let h=e.map[a];h===void 0&&(h=new EP(a),nU(e,h)),e=h}}}var $f=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=t.getActiveUniform(e,r),s=t.getUniformLocation(e,o.name);Hoe(o,s,this)}}setValue(t,e,i,r){let o=this.map[e];o!==void 0&&o.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let o=0,s=e.length;o!==s;++o){let a=e[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&i.push(s)}return i}};function iU(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var Woe=37297,joe=0;function Goe(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return i.join(`
`)}var rU=new xn;function $oe(n){Fn._getMatrix(rU,Fn.workingColorSpace,n);let t=`mat3( ${rU.elements.map(e=>e.toFixed(4))} )`;switch(Fn.getTransfer(n)){case Yy:return[t,"LinearTransferOETF"];case di:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function oU(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return e.toUpperCase()+`

`+r+`

`+Goe(n.getShaderSource(t),s)}else return r}function qoe(n,t){let e=$oe(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function Yoe(n,t){let e;switch(t){case tte:e="Linear";break;case nte:e="Reinhard";break;case ite:e="Cineon";break;case rte:e="ACESFilmic";break;case ste:e="AgX";break;case ate:e="Neutral";break;case ote:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var oy=new ne;function Xoe(){Fn.getLuminanceCoefficients(oy);let n=oy.x.toFixed(4),t=oy.y.toFixed(4),e=oy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Zoe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(gm).join(`
`)}function Koe(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function Joe(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(t,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:n.getAttribLocation(t,s),locationSize:a}}return e}function gm(n){return n!==""}function sU(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function aU(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Qoe=/^[ \t]*#include +<([\w\d./]+)>/gm;function SP(n){return n.replace(Qoe,tse)}var ese=new Map;function tse(n,t){let e=wn[t];if(e===void 0){let i=ese.get(t);if(i!==void 0)e=wn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return SP(e)}var nse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lU(n){return n.replace(nse,ise)}function ise(n,t,e,i){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function cU(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function rse(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===kU?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===XP?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Pl&&(t="SHADOWMAP_TYPE_VSM"),t}function ose(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Yf:case Xf:t="ENVMAP_TYPE_CUBE";break;case $y:t="ENVMAP_TYPE_CUBE_UV";break}return t}function sse(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Xf:t="ENVMAP_MODE_REFRACTION";break}return t}function ase(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case FU:t="ENVMAP_BLENDING_MULTIPLY";break;case Qee:t="ENVMAP_BLENDING_MIX";break;case ete:t="ENVMAP_BLENDING_ADD";break}return t}function lse(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function cse(n,t,e,i){let r=n.getContext(),o=e.defines,s=e.vertexShader,a=e.fragmentShader,l=rse(e),u=ose(e),f=sse(e),h=ase(e),m=lse(e),p=Zoe(e),b=Koe(o),C=r.createProgram(),y,x,T=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(y=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(gm).join(`
`),y.length>0&&(y+=`
`),x=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b].filter(gm).join(`
`),x.length>0&&(x+=`
`)):(y=[cU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gm).join(`
`),x=[cU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,b,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+f:"",e.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Oc?"#define TONE_MAPPING":"",e.toneMapping!==Oc?wn.tonemapping_pars_fragment:"",e.toneMapping!==Oc?Yoe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",wn.colorspace_pars_fragment,qoe("linearToOutputTexel",e.outputColorSpace),Xoe(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(gm).join(`
`)),s=SP(s),s=sU(s,e),s=aU(s,e),a=SP(a),a=sU(a,e),a=aU(a,e),s=lU(s),a=lU(a),e.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,y=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,x=["#define varying in",e.glslVersion===CL?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===CL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);let E=T+y+s,D=T+x+a,V=iU(r,r.VERTEX_SHADER,E),B=iU(r,r.FRAGMENT_SHADER,D);r.attachShader(C,V),r.attachShader(C,B),e.index0AttributeName!==void 0?r.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(C,0,"position"),r.linkProgram(C);function F(N){if(n.debug.checkShaderErrors){let S=r.getProgramInfoLog(C).trim(),q=r.getShaderInfoLog(V).trim(),oe=r.getShaderInfoLog(B).trim(),ee=!0,ge=!0;if(r.getProgramParameter(C,r.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,C,V,B);else{let se=oU(r,V,"vertex"),de=oU(r,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(C,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+S+`
`+se+`
`+de)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(q===""||oe==="")&&(ge=!1);ge&&(N.diagnostics={runnable:ee,programLog:S,vertexShader:{log:q,prefix:y},fragmentShader:{log:oe,prefix:x}})}r.deleteShader(V),r.deleteShader(B),G=new $f(r,C),k=Joe(r,C)}let G;this.getUniforms=function(){return G===void 0&&F(this),G};let k;this.getAttributes=function(){return k===void 0&&F(this),k};let P=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=r.getProgramParameter(C,Woe)),P},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=joe++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=V,this.fragmentShader=B,this}var use=0,PP=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new TP(t),e.set(t,i)),i}},TP=class{constructor(t){this.id=use++,this.code=t,this.usedTimes=0}};function dse(n,t,e,i,r,o,s){let a=new wm,l=new PP,u=new Set,f=[],h=r.logarithmicDepthBuffer,m=r.vertexTextures,p=r.precision,b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(k){return u.add(k),k===0?"uv":`uv${k}`}function y(k,P,N,S,q){let oe=S.fog,ee=q.geometry,ge=k.isMeshStandardMaterial?S.environment:null,se=(k.isMeshStandardMaterial?e:t).get(k.envMap||ge),de=se&&se.mapping===$y?se.image.height:null,J=b[k.type];k.precision!==null&&(p=r.getMaxPrecision(k.precision),p!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",p,"instead."));let Q=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Ie=Q!==void 0?Q.length:0,Le=0;ee.morphAttributes.position!==void 0&&(Le=1),ee.morphAttributes.normal!==void 0&&(Le=2),ee.morphAttributes.color!==void 0&&(Le=3);let Ne,Ce,He,Ge;if(J){let Yn=Oa[J];Ne=Yn.vertexShader,Ce=Yn.fragmentShader}else Ne=k.vertexShader,Ce=k.fragmentShader,l.update(k),He=l.getVertexShaderID(k),Ge=l.getFragmentShaderID(k);let Ve=n.getRenderTarget(),mt=n.state.buffers.depth.getReversed(),pt=q.isInstancedMesh===!0,Lt=q.isBatchedMesh===!0,Tn=!!k.map,O=!!k.matcap,Me=!!se,W=!!k.aoMap,Y=!!k.lightMap,j=!!k.bumpMap,te=!!k.normalMap,ve=!!k.displacementMap,Ee=!!k.emissiveMap,ie=!!k.metalnessMap,L=!!k.roughnessMap,R=k.anisotropy>0,K=k.clearcoat>0,_e=k.dispersion>0,Te=k.iridescence>0,ye=k.sheen>0,st=k.transmission>0,et=R&&!!k.anisotropyMap,nt=K&&!!k.clearcoatMap,ln=K&&!!k.clearcoatNormalMap,Fe=K&&!!k.clearcoatRoughnessMap,lt=Te&&!!k.iridescenceMap,It=Te&&!!k.iridescenceThicknessMap,Ot=ye&&!!k.sheenColorMap,ht=ye&&!!k.sheenRoughnessMap,Dn=!!k.specularMap,tn=!!k.specularColorMap,Jn=!!k.specularIntensityMap,ae=st&&!!k.transmissionMap,tt=st&&!!k.thicknessMap,Se=!!k.gradientMap,Be=!!k.alphaMap,ft=k.alphaTest>0,ct=!!k.alphaHash,nn=!!k.extensions,Ti=Oc;k.toneMapped&&(Ve===null||Ve.isXRRenderTarget===!0)&&(Ti=n.toneMapping);let gr={shaderID:J,shaderType:k.type,shaderName:k.name,vertexShader:Ne,fragmentShader:Ce,defines:k.defines,customVertexShaderID:He,customFragmentShaderID:Ge,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:p,batching:Lt,batchingColor:Lt&&q._colorsTexture!==null,instancing:pt,instancingColor:pt&&q.instanceColor!==null,instancingMorph:pt&&q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Ve===null?n.outputColorSpace:Ve.isXRRenderTarget===!0?Ve.texture.colorSpace:$r,alphaToCoverage:!!k.alphaToCoverage,map:Tn,matcap:O,envMap:Me,envMapMode:Me&&se.mapping,envMapCubeUVHeight:de,aoMap:W,lightMap:Y,bumpMap:j,normalMap:te,displacementMap:m&&ve,emissiveMap:Ee,normalMapObjectSpace:te&&k.normalMapType===pte,normalMapTangentSpace:te&&k.normalMapType===qU,metalnessMap:ie,roughnessMap:L,anisotropy:R,anisotropyMap:et,clearcoat:K,clearcoatMap:nt,clearcoatNormalMap:ln,clearcoatRoughnessMap:Fe,dispersion:_e,iridescence:Te,iridescenceMap:lt,iridescenceThicknessMap:It,sheen:ye,sheenColorMap:Ot,sheenRoughnessMap:ht,specularMap:Dn,specularColorMap:tn,specularIntensityMap:Jn,transmission:st,transmissionMap:ae,thicknessMap:tt,gradientMap:Se,opaque:k.transparent===!1&&k.blending===Wf&&k.alphaToCoverage===!1,alphaMap:Be,alphaTest:ft,alphaHash:ct,combine:k.combine,mapUv:Tn&&C(k.map.channel),aoMapUv:W&&C(k.aoMap.channel),lightMapUv:Y&&C(k.lightMap.channel),bumpMapUv:j&&C(k.bumpMap.channel),normalMapUv:te&&C(k.normalMap.channel),displacementMapUv:ve&&C(k.displacementMap.channel),emissiveMapUv:Ee&&C(k.emissiveMap.channel),metalnessMapUv:ie&&C(k.metalnessMap.channel),roughnessMapUv:L&&C(k.roughnessMap.channel),anisotropyMapUv:et&&C(k.anisotropyMap.channel),clearcoatMapUv:nt&&C(k.clearcoatMap.channel),clearcoatNormalMapUv:ln&&C(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&C(k.clearcoatRoughnessMap.channel),iridescenceMapUv:lt&&C(k.iridescenceMap.channel),iridescenceThicknessMapUv:It&&C(k.iridescenceThicknessMap.channel),sheenColorMapUv:Ot&&C(k.sheenColorMap.channel),sheenRoughnessMapUv:ht&&C(k.sheenRoughnessMap.channel),specularMapUv:Dn&&C(k.specularMap.channel),specularColorMapUv:tn&&C(k.specularColorMap.channel),specularIntensityMapUv:Jn&&C(k.specularIntensityMap.channel),transmissionMapUv:ae&&C(k.transmissionMap.channel),thicknessMapUv:tt&&C(k.thicknessMap.channel),alphaMapUv:Be&&C(k.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(te||R),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ee.attributes.uv&&(Tn||Be),fog:!!oe,useFog:k.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:mt,skinning:q.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:Le,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:k.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ti,decodeVideoTexture:Tn&&k.map.isVideoTexture===!0&&Fn.getTransfer(k.map.colorSpace)===di,decodeVideoTextureEmissive:Ee&&k.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(k.emissiveMap.colorSpace)===di,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Yo,flipSided:k.side===To,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionClipCullDistance:nn&&k.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(nn&&k.extensions.multiDraw===!0||Lt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()};return gr.vertexUv1s=u.has(1),gr.vertexUv2s=u.has(2),gr.vertexUv3s=u.has(3),u.clear(),gr}function x(k){let P=[];if(k.shaderID?P.push(k.shaderID):(P.push(k.customVertexShaderID),P.push(k.customFragmentShaderID)),k.defines!==void 0)for(let N in k.defines)P.push(N),P.push(k.defines[N]);return k.isRawShaderMaterial===!1&&(T(P,k),E(P,k),P.push(n.outputColorSpace)),P.push(k.customProgramCacheKey),P.join()}function T(k,P){k.push(P.precision),k.push(P.outputColorSpace),k.push(P.envMapMode),k.push(P.envMapCubeUVHeight),k.push(P.mapUv),k.push(P.alphaMapUv),k.push(P.lightMapUv),k.push(P.aoMapUv),k.push(P.bumpMapUv),k.push(P.normalMapUv),k.push(P.displacementMapUv),k.push(P.emissiveMapUv),k.push(P.metalnessMapUv),k.push(P.roughnessMapUv),k.push(P.anisotropyMapUv),k.push(P.clearcoatMapUv),k.push(P.clearcoatNormalMapUv),k.push(P.clearcoatRoughnessMapUv),k.push(P.iridescenceMapUv),k.push(P.iridescenceThicknessMapUv),k.push(P.sheenColorMapUv),k.push(P.sheenRoughnessMapUv),k.push(P.specularMapUv),k.push(P.specularColorMapUv),k.push(P.specularIntensityMapUv),k.push(P.transmissionMapUv),k.push(P.thicknessMapUv),k.push(P.combine),k.push(P.fogExp2),k.push(P.sizeAttenuation),k.push(P.morphTargetsCount),k.push(P.morphAttributeCount),k.push(P.numDirLights),k.push(P.numPointLights),k.push(P.numSpotLights),k.push(P.numSpotLightMaps),k.push(P.numHemiLights),k.push(P.numRectAreaLights),k.push(P.numDirLightShadows),k.push(P.numPointLightShadows),k.push(P.numSpotLightShadows),k.push(P.numSpotLightShadowsWithMaps),k.push(P.numLightProbes),k.push(P.shadowMapType),k.push(P.toneMapping),k.push(P.numClippingPlanes),k.push(P.numClipIntersection),k.push(P.depthPacking)}function E(k,P){a.disableAll(),P.supportsVertexTextures&&a.enable(0),P.instancing&&a.enable(1),P.instancingColor&&a.enable(2),P.instancingMorph&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),P.dispersion&&a.enable(20),P.batchingColor&&a.enable(21),k.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.reverseDepthBuffer&&a.enable(4),P.skinning&&a.enable(5),P.morphTargets&&a.enable(6),P.morphNormals&&a.enable(7),P.morphColors&&a.enable(8),P.premultipliedAlpha&&a.enable(9),P.shadowMapEnabled&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),P.decodeVideoTextureEmissive&&a.enable(20),P.alphaToCoverage&&a.enable(21),k.push(a.mask)}function D(k){let P=b[k.type],N;if(P){let S=Oa[P];N=tne.clone(S.uniforms)}else N=k.uniforms;return N}function V(k,P){let N;for(let S=0,q=f.length;S<q;S++){let oe=f[S];if(oe.cacheKey===P){N=oe,++N.usedTimes;break}}return N===void 0&&(N=new cse(n,P,k,o),f.push(N)),N}function B(k){if(--k.usedTimes===0){let P=f.indexOf(k);f[P]=f[f.length-1],f.pop(),k.destroy()}}function F(k){l.remove(k)}function G(){l.dispose()}return{getParameters:y,getProgramCacheKey:x,getUniforms:D,acquireProgram:V,releaseProgram:B,releaseShaderCache:F,programs:f,dispose:G}}function fse(){let n=new WeakMap;function t(s){return n.has(s)}function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:o}}function hse(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function uU(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function dU(){let n=[],t=0,e=[],i=[],r=[];function o(){t=0,e.length=0,i.length=0,r.length=0}function s(h,m,p,b,C,y){let x=n[t];return x===void 0?(x={id:h.id,object:h,geometry:m,material:p,groupOrder:b,renderOrder:h.renderOrder,z:C,group:y},n[t]=x):(x.id=h.id,x.object=h,x.geometry=m,x.material=p,x.groupOrder=b,x.renderOrder=h.renderOrder,x.z=C,x.group=y),t++,x}function a(h,m,p,b,C,y){let x=s(h,m,p,b,C,y);p.transmission>0?i.push(x):p.transparent===!0?r.push(x):e.push(x)}function l(h,m,p,b,C,y){let x=s(h,m,p,b,C,y);p.transmission>0?i.unshift(x):p.transparent===!0?r.unshift(x):e.unshift(x)}function u(h,m){e.length>1&&e.sort(h||hse),i.length>1&&i.sort(m||uU),r.length>1&&r.sort(m||uU)}function f(){for(let h=t,m=n.length;h<m;h++){let p=n[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:e,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function pse(){let n=new WeakMap;function t(i,r){let o=n.get(i),s;return o===void 0?(s=new dU,n.set(i,[s])):r>=o.length?(s=new dU,o.push(s)):s=o[r],s}function e(){n=new WeakMap}return{get:t,dispose:e}}function mse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new ne,color:new Bt};break;case"SpotLight":e={position:new ne,direction:new ne,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new ne,color:new Bt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new ne,skyColor:new Bt,groundColor:new Bt};break;case"RectAreaLight":e={color:new Bt,position:new ne,halfWidth:new ne,halfHeight:new ne};break}return n[t.id]=e,e}}}function gse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dn};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dn};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new dn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var _se=0;function vse(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function yse(n){let t=new mse,e=gse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new ne);let r=new ne,o=new an,s=new an;function a(u){let f=0,h=0,m=0;for(let k=0;k<9;k++)i.probe[k].set(0,0,0);let p=0,b=0,C=0,y=0,x=0,T=0,E=0,D=0,V=0,B=0,F=0;u.sort(vse);for(let k=0,P=u.length;k<P;k++){let N=u[k],S=N.color,q=N.intensity,oe=N.distance,ee=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)f+=S.r*q,h+=S.g*q,m+=S.b*q;else if(N.isLightProbe){for(let ge=0;ge<9;ge++)i.probe[ge].addScaledVector(N.sh.coefficients[ge],q);F++}else if(N.isDirectionalLight){let ge=t.get(N);if(ge.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){let se=N.shadow,de=e.get(N);de.shadowIntensity=se.intensity,de.shadowBias=se.bias,de.shadowNormalBias=se.normalBias,de.shadowRadius=se.radius,de.shadowMapSize=se.mapSize,i.directionalShadow[p]=de,i.directionalShadowMap[p]=ee,i.directionalShadowMatrix[p]=N.shadow.matrix,T++}i.directional[p]=ge,p++}else if(N.isSpotLight){let ge=t.get(N);ge.position.setFromMatrixPosition(N.matrixWorld),ge.color.copy(S).multiplyScalar(q),ge.distance=oe,ge.coneCos=Math.cos(N.angle),ge.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),ge.decay=N.decay,i.spot[C]=ge;let se=N.shadow;if(N.map&&(i.spotLightMap[V]=N.map,V++,se.updateMatrices(N),N.castShadow&&B++),i.spotLightMatrix[C]=se.matrix,N.castShadow){let de=e.get(N);de.shadowIntensity=se.intensity,de.shadowBias=se.bias,de.shadowNormalBias=se.normalBias,de.shadowRadius=se.radius,de.shadowMapSize=se.mapSize,i.spotShadow[C]=de,i.spotShadowMap[C]=ee,D++}C++}else if(N.isRectAreaLight){let ge=t.get(N);ge.color.copy(S).multiplyScalar(q),ge.halfWidth.set(N.width*.5,0,0),ge.halfHeight.set(0,N.height*.5,0),i.rectArea[y]=ge,y++}else if(N.isPointLight){let ge=t.get(N);if(ge.color.copy(N.color).multiplyScalar(N.intensity),ge.distance=N.distance,ge.decay=N.decay,N.castShadow){let se=N.shadow,de=e.get(N);de.shadowIntensity=se.intensity,de.shadowBias=se.bias,de.shadowNormalBias=se.normalBias,de.shadowRadius=se.radius,de.shadowMapSize=se.mapSize,de.shadowCameraNear=se.camera.near,de.shadowCameraFar=se.camera.far,i.pointShadow[b]=de,i.pointShadowMap[b]=ee,i.pointShadowMatrix[b]=N.shadow.matrix,E++}i.point[b]=ge,b++}else if(N.isHemisphereLight){let ge=t.get(N);ge.skyColor.copy(N.color).multiplyScalar(q),ge.groundColor.copy(N.groundColor).multiplyScalar(q),i.hemi[x]=ge,x++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_FLOAT_1,i.rectAreaLTC2=ot.LTC_FLOAT_2):(i.rectAreaLTC1=ot.LTC_HALF_1,i.rectAreaLTC2=ot.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=m;let G=i.hash;(G.directionalLength!==p||G.pointLength!==b||G.spotLength!==C||G.rectAreaLength!==y||G.hemiLength!==x||G.numDirectionalShadows!==T||G.numPointShadows!==E||G.numSpotShadows!==D||G.numSpotMaps!==V||G.numLightProbes!==F)&&(i.directional.length=p,i.spot.length=C,i.rectArea.length=y,i.point.length=b,i.hemi.length=x,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=D+V-B,i.spotLightMap.length=V,i.numSpotLightShadowsWithMaps=B,i.numLightProbes=F,G.directionalLength=p,G.pointLength=b,G.spotLength=C,G.rectAreaLength=y,G.hemiLength=x,G.numDirectionalShadows=T,G.numPointShadows=E,G.numSpotShadows=D,G.numSpotMaps=V,G.numLightProbes=F,i.version=_se++)}function l(u,f){let h=0,m=0,p=0,b=0,C=0,y=f.matrixWorldInverse;for(let x=0,T=u.length;x<T;x++){let E=u[x];if(E.isDirectionalLight){let D=i.directional[h];D.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(y),h++}else if(E.isSpotLight){let D=i.spot[p];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(y),D.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(y),p++}else if(E.isRectAreaLight){let D=i.rectArea[b];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(y),s.identity(),o.copy(E.matrixWorld),o.premultiply(y),s.extractRotation(o),D.halfWidth.set(E.width*.5,0,0),D.halfHeight.set(0,E.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),b++}else if(E.isPointLight){let D=i.point[m];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(y),m++}else if(E.isHemisphereLight){let D=i.hemi[C];D.direction.setFromMatrixPosition(E.matrixWorld),D.direction.transformDirection(y),C++}}}return{setup:a,setupView:l,state:i}}function fU(n){let t=new yse(n),e=[],i=[];function r(f){u.camera=f,e.length=0,i.length=0}function o(f){e.push(f)}function s(f){i.push(f)}function a(){t.setup(e)}function l(f){t.setupView(e,f)}let u={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function xse(n){let t=new WeakMap;function e(r,o=0){let s=t.get(r),a;return s===void 0?(a=new fU(n),t.set(r,[a])):o>=s.length?(a=new fU(n),s.push(a)):a=s[o],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var DP=class extends jr{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=fte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},OP=class extends jr{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},bse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Cse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Mse(n,t,e){let i=new Sm,r=new dn,o=new dn,s=new pn,a=new DP({depthPacking:hte}),l=new OP,u={},f=e.maxTextureSize,h={[Ia]:To,[To]:Ia,[Yo]:Yo},m=new Na({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new dn},radius:{value:4}},vertexShader:bse,fragmentShader:Cse}),p=m.clone();p.defines.HORIZONTAL_PASS=1;let b=new Do;b.setAttribute("position",new Pi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let C=new Mi(b,m),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kU;let x=this.type;this.render=function(B,F,G){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||B.length===0)return;let k=n.getRenderTarget(),P=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),S=n.state;S.setBlending(Dc),S.buffers.color.setClear(1,1,1,1),S.buffers.depth.setTest(!0),S.setScissorTest(!1);let q=x!==Pl&&this.type===Pl,oe=x===Pl&&this.type!==Pl;for(let ee=0,ge=B.length;ee<ge;ee++){let se=B[ee],de=se.shadow;if(de===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(de.autoUpdate===!1&&de.needsUpdate===!1)continue;r.copy(de.mapSize);let J=de.getFrameExtents();if(r.multiply(J),o.copy(de.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/J.x),r.x=o.x*J.x,de.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/J.y),r.y=o.y*J.y,de.mapSize.y=o.y)),de.map===null||q===!0||oe===!0){let Ie=this.type!==Pl?{minFilter:Hr,magFilter:Hr}:{};de.map!==null&&de.map.dispose(),de.map=new Nl(r.x,r.y,Ie),de.map.texture.name=se.name+".shadowMap",de.camera.updateProjectionMatrix()}n.setRenderTarget(de.map),n.clear();let Q=de.getViewportCount();for(let Ie=0;Ie<Q;Ie++){let Le=de.getViewport(Ie);s.set(o.x*Le.x,o.y*Le.y,o.x*Le.z,o.y*Le.w),S.viewport(s),de.updateMatrices(se,Ie),i=de.getFrustum(),D(F,G,de.camera,se,this.type)}de.isPointLightShadow!==!0&&this.type===Pl&&T(de,G),de.needsUpdate=!1}x=this.type,y.needsUpdate=!1,n.setRenderTarget(k,P,N)};function T(B,F){let G=t.update(C);m.defines.VSM_SAMPLES!==B.blurSamples&&(m.defines.VSM_SAMPLES=B.blurSamples,p.defines.VSM_SAMPLES=B.blurSamples,m.needsUpdate=!0,p.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Nl(r.x,r.y)),m.uniforms.shadow_pass.value=B.map.texture,m.uniforms.resolution.value=B.mapSize,m.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(F,null,G,m,C,null),p.uniforms.shadow_pass.value=B.mapPass.texture,p.uniforms.resolution.value=B.mapSize,p.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(F,null,G,p,C,null)}function E(B,F,G,k){let P=null,N=G.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(N!==void 0)P=N;else if(P=G.isPointLight===!0?l:a,n.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){let S=P.uuid,q=F.uuid,oe=u[S];oe===void 0&&(oe={},u[S]=oe);let ee=oe[q];ee===void 0&&(ee=P.clone(),oe[q]=ee,F.addEventListener("dispose",V)),P=ee}if(P.visible=F.visible,P.wireframe=F.wireframe,k===Pl?P.side=F.shadowSide!==null?F.shadowSide:F.side:P.side=F.shadowSide!==null?F.shadowSide:h[F.side],P.alphaMap=F.alphaMap,P.alphaTest=F.alphaTest,P.map=F.map,P.clipShadows=F.clipShadows,P.clippingPlanes=F.clippingPlanes,P.clipIntersection=F.clipIntersection,P.displacementMap=F.displacementMap,P.displacementScale=F.displacementScale,P.displacementBias=F.displacementBias,P.wireframeLinewidth=F.wireframeLinewidth,P.linewidth=F.linewidth,G.isPointLight===!0&&P.isMeshDistanceMaterial===!0){let S=n.properties.get(P);S.light=G}return P}function D(B,F,G,k,P){if(B.visible===!1)return;if(B.layers.test(F.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&P===Pl)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,B.matrixWorld);let q=t.update(B),oe=B.material;if(Array.isArray(oe)){let ee=q.groups;for(let ge=0,se=ee.length;ge<se;ge++){let de=ee[ge],J=oe[de.materialIndex];if(J&&J.visible){let Q=E(B,J,k,P);B.onBeforeShadow(n,B,F,G,q,Q,de),n.renderBufferDirect(G,null,q,Q,B,de),B.onAfterShadow(n,B,F,G,q,Q,de)}}}else if(oe.visible){let ee=E(B,oe,k,P);B.onBeforeShadow(n,B,F,G,q,ee,null),n.renderBufferDirect(G,null,q,ee,B,null),B.onAfterShadow(n,B,F,G,q,ee,null)}}let S=B.children;for(let q=0,oe=S.length;q<oe;q++)D(S[q],F,G,k,P)}function V(B){B.target.removeEventListener("dispose",V);for(let G in u){let k=u[G],P=B.target.uuid;P in k&&(k[P].dispose(),delete k[P])}}}var wse={[FS]:LS,[US]:zS,[VS]:HS,[qf]:BS,[LS]:FS,[zS]:US,[HS]:VS,[BS]:qf};function Ese(n,t){function e(){let ae=!1,tt=new pn,Se=null,Be=new pn(0,0,0,0);return{setMask:function(ft){Se!==ft&&!ae&&(n.colorMask(ft,ft,ft,ft),Se=ft)},setLocked:function(ft){ae=ft},setClear:function(ft,ct,nn,Ti,gr){gr===!0&&(ft*=Ti,ct*=Ti,nn*=Ti),tt.set(ft,ct,nn,Ti),Be.equals(tt)===!1&&(n.clearColor(ft,ct,nn,Ti),Be.copy(tt))},reset:function(){ae=!1,Se=null,Be.set(-1,0,0,0)}}}function i(){let ae=!1,tt=!1,Se=null,Be=null,ft=null;return{setReversed:function(ct){if(tt!==ct){let nn=t.get("EXT_clip_control");tt?nn.clipControlEXT(nn.LOWER_LEFT_EXT,nn.ZERO_TO_ONE_EXT):nn.clipControlEXT(nn.LOWER_LEFT_EXT,nn.NEGATIVE_ONE_TO_ONE_EXT);let Ti=ft;ft=null,this.setClear(Ti)}tt=ct},getReversed:function(){return tt},setTest:function(ct){ct?Ve(n.DEPTH_TEST):mt(n.DEPTH_TEST)},setMask:function(ct){Se!==ct&&!ae&&(n.depthMask(ct),Se=ct)},setFunc:function(ct){if(tt&&(ct=wse[ct]),Be!==ct){switch(ct){case FS:n.depthFunc(n.NEVER);break;case LS:n.depthFunc(n.ALWAYS);break;case US:n.depthFunc(n.LESS);break;case qf:n.depthFunc(n.LEQUAL);break;case VS:n.depthFunc(n.EQUAL);break;case BS:n.depthFunc(n.GEQUAL);break;case zS:n.depthFunc(n.GREATER);break;case HS:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Be=ct}},setLocked:function(ct){ae=ct},setClear:function(ct){ft!==ct&&(tt&&(ct=1-ct),n.clearDepth(ct),ft=ct)},reset:function(){ae=!1,Se=null,Be=null,ft=null,tt=!1}}}function r(){let ae=!1,tt=null,Se=null,Be=null,ft=null,ct=null,nn=null,Ti=null,gr=null;return{setTest:function(Yn){ae||(Yn?Ve(n.STENCIL_TEST):mt(n.STENCIL_TEST))},setMask:function(Yn){tt!==Yn&&!ae&&(n.stencilMask(Yn),tt=Yn)},setFunc:function(Yn,Jr,As){(Se!==Yn||Be!==Jr||ft!==As)&&(n.stencilFunc(Yn,Jr,As),Se=Yn,Be=Jr,ft=As)},setOp:function(Yn,Jr,As){(ct!==Yn||nn!==Jr||Ti!==As)&&(n.stencilOp(Yn,Jr,As),ct=Yn,nn=Jr,Ti=As)},setLocked:function(Yn){ae=Yn},setClear:function(Yn){gr!==Yn&&(n.clearStencil(Yn),gr=Yn)},reset:function(){ae=!1,tt=null,Se=null,Be=null,ft=null,ct=null,nn=null,Ti=null,gr=null}}}let o=new e,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},m=new WeakMap,p=[],b=null,C=!1,y=null,x=null,T=null,E=null,D=null,V=null,B=null,F=new Bt(0,0,0),G=0,k=!1,P=null,N=null,S=null,q=null,oe=null,ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ge=!1,se=0,de=n.getParameter(n.VERSION);de.indexOf("WebGL")!==-1?(se=parseFloat(/^WebGL (\d)/.exec(de)[1]),ge=se>=1):de.indexOf("OpenGL ES")!==-1&&(se=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),ge=se>=2);let J=null,Q={},Ie=n.getParameter(n.SCISSOR_BOX),Le=n.getParameter(n.VIEWPORT),Ne=new pn().fromArray(Ie),Ce=new pn().fromArray(Le);function He(ae,tt,Se,Be){let ft=new Uint8Array(4),ct=n.createTexture();n.bindTexture(ae,ct),n.texParameteri(ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let nn=0;nn<Se;nn++)ae===n.TEXTURE_3D||ae===n.TEXTURE_2D_ARRAY?n.texImage3D(tt,0,n.RGBA,1,1,Be,0,n.RGBA,n.UNSIGNED_BYTE,ft):n.texImage2D(tt+nn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ft);return ct}let Ge={};Ge[n.TEXTURE_2D]=He(n.TEXTURE_2D,n.TEXTURE_2D,1),Ge[n.TEXTURE_CUBE_MAP]=He(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ge[n.TEXTURE_2D_ARRAY]=He(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ge[n.TEXTURE_3D]=He(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),Ve(n.DEPTH_TEST),s.setFunc(qf),j(!1),te(mL),Ve(n.CULL_FACE),W(Dc);function Ve(ae){f[ae]!==!0&&(n.enable(ae),f[ae]=!0)}function mt(ae){f[ae]!==!1&&(n.disable(ae),f[ae]=!1)}function pt(ae,tt){return h[ae]!==tt?(n.bindFramebuffer(ae,tt),h[ae]=tt,ae===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=tt),ae===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=tt),!0):!1}function Lt(ae,tt){let Se=p,Be=!1;if(ae){Se=m.get(tt),Se===void 0&&(Se=[],m.set(tt,Se));let ft=ae.textures;if(Se.length!==ft.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let ct=0,nn=ft.length;ct<nn;ct++)Se[ct]=n.COLOR_ATTACHMENT0+ct;Se.length=ft.length,Be=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Be=!0);Be&&n.drawBuffers(Se)}function Tn(ae){return b!==ae?(n.useProgram(ae),b=ae,!0):!1}let O={[Vu]:n.FUNC_ADD,[Fee]:n.FUNC_SUBTRACT,[Lee]:n.FUNC_REVERSE_SUBTRACT};O[Uee]=n.MIN,O[Vee]=n.MAX;let Me={[Bee]:n.ZERO,[zee]:n.ONE,[Hee]:n.SRC_COLOR,[NS]:n.SRC_ALPHA,[Yee]:n.SRC_ALPHA_SATURATE,[$ee]:n.DST_COLOR,[jee]:n.DST_ALPHA,[Wee]:n.ONE_MINUS_SRC_COLOR,[kS]:n.ONE_MINUS_SRC_ALPHA,[qee]:n.ONE_MINUS_DST_COLOR,[Gee]:n.ONE_MINUS_DST_ALPHA,[Xee]:n.CONSTANT_COLOR,[Zee]:n.ONE_MINUS_CONSTANT_COLOR,[Kee]:n.CONSTANT_ALPHA,[Jee]:n.ONE_MINUS_CONSTANT_ALPHA};function W(ae,tt,Se,Be,ft,ct,nn,Ti,gr,Yn){if(ae===Dc){C===!0&&(mt(n.BLEND),C=!1);return}if(C===!1&&(Ve(n.BLEND),C=!0),ae!==kee){if(ae!==y||Yn!==k){if((x!==Vu||D!==Vu)&&(n.blendEquation(n.FUNC_ADD),x=Vu,D=Vu),Yn)switch(ae){case Wf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gL:n.blendFunc(n.ONE,n.ONE);break;case _L:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vL:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}else switch(ae){case Wf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gL:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case _L:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vL:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ae);break}T=null,E=null,V=null,B=null,F.set(0,0,0),G=0,y=ae,k=Yn}return}ft=ft||tt,ct=ct||Se,nn=nn||Be,(tt!==x||ft!==D)&&(n.blendEquationSeparate(O[tt],O[ft]),x=tt,D=ft),(Se!==T||Be!==E||ct!==V||nn!==B)&&(n.blendFuncSeparate(Me[Se],Me[Be],Me[ct],Me[nn]),T=Se,E=Be,V=ct,B=nn),(Ti.equals(F)===!1||gr!==G)&&(n.blendColor(Ti.r,Ti.g,Ti.b,gr),F.copy(Ti),G=gr),y=ae,k=!1}function Y(ae,tt){ae.side===Yo?mt(n.CULL_FACE):Ve(n.CULL_FACE);let Se=ae.side===To;tt&&(Se=!Se),j(Se),ae.blending===Wf&&ae.transparent===!1?W(Dc):W(ae.blending,ae.blendEquation,ae.blendSrc,ae.blendDst,ae.blendEquationAlpha,ae.blendSrcAlpha,ae.blendDstAlpha,ae.blendColor,ae.blendAlpha,ae.premultipliedAlpha),s.setFunc(ae.depthFunc),s.setTest(ae.depthTest),s.setMask(ae.depthWrite),o.setMask(ae.colorWrite);let Be=ae.stencilWrite;a.setTest(Be),Be&&(a.setMask(ae.stencilWriteMask),a.setFunc(ae.stencilFunc,ae.stencilRef,ae.stencilFuncMask),a.setOp(ae.stencilFail,ae.stencilZFail,ae.stencilZPass)),Ee(ae.polygonOffset,ae.polygonOffsetFactor,ae.polygonOffsetUnits),ae.alphaToCoverage===!0?Ve(n.SAMPLE_ALPHA_TO_COVERAGE):mt(n.SAMPLE_ALPHA_TO_COVERAGE)}function j(ae){P!==ae&&(ae?n.frontFace(n.CW):n.frontFace(n.CCW),P=ae)}function te(ae){ae!==Ree?(Ve(n.CULL_FACE),ae!==N&&(ae===mL?n.cullFace(n.BACK):ae===Nee?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):mt(n.CULL_FACE),N=ae}function ve(ae){ae!==S&&(ge&&n.lineWidth(ae),S=ae)}function Ee(ae,tt,Se){ae?(Ve(n.POLYGON_OFFSET_FILL),(q!==tt||oe!==Se)&&(n.polygonOffset(tt,Se),q=tt,oe=Se)):mt(n.POLYGON_OFFSET_FILL)}function ie(ae){ae?Ve(n.SCISSOR_TEST):mt(n.SCISSOR_TEST)}function L(ae){ae===void 0&&(ae=n.TEXTURE0+ee-1),J!==ae&&(n.activeTexture(ae),J=ae)}function R(ae,tt,Se){Se===void 0&&(J===null?Se=n.TEXTURE0+ee-1:Se=J);let Be=Q[Se];Be===void 0&&(Be={type:void 0,texture:void 0},Q[Se]=Be),(Be.type!==ae||Be.texture!==tt)&&(J!==Se&&(n.activeTexture(Se),J=Se),n.bindTexture(ae,tt||Ge[ae]),Be.type=ae,Be.texture=tt)}function K(){let ae=Q[J];ae!==void 0&&ae.type!==void 0&&(n.bindTexture(ae.type,null),ae.type=void 0,ae.texture=void 0)}function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Te(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ye(){try{n.texSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function st(){try{n.texSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function nt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function ln(){try{n.texStorage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function lt(){try{n.texImage2D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function It(){try{n.texImage3D.apply(n,arguments)}catch(ae){console.error("THREE.WebGLState:",ae)}}function Ot(ae){Ne.equals(ae)===!1&&(n.scissor(ae.x,ae.y,ae.z,ae.w),Ne.copy(ae))}function ht(ae){Ce.equals(ae)===!1&&(n.viewport(ae.x,ae.y,ae.z,ae.w),Ce.copy(ae))}function Dn(ae,tt){let Se=u.get(tt);Se===void 0&&(Se=new WeakMap,u.set(tt,Se));let Be=Se.get(ae);Be===void 0&&(Be=n.getUniformBlockIndex(tt,ae.name),Se.set(ae,Be))}function tn(ae,tt){let Be=u.get(tt).get(ae);l.get(tt)!==Be&&(n.uniformBlockBinding(tt,Be,ae.__bindingPointIndex),l.set(tt,Be))}function Jn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},J=null,Q={},h={},m=new WeakMap,p=[],b=null,C=!1,y=null,x=null,T=null,E=null,D=null,V=null,B=null,F=new Bt(0,0,0),G=0,k=!1,P=null,N=null,S=null,q=null,oe=null,Ne.set(0,0,n.canvas.width,n.canvas.height),Ce.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:Ve,disable:mt,bindFramebuffer:pt,drawBuffers:Lt,useProgram:Tn,setBlending:W,setMaterial:Y,setFlipSided:j,setCullFace:te,setLineWidth:ve,setPolygonOffset:Ee,setScissorTest:ie,activeTexture:L,bindTexture:R,unbindTexture:K,compressedTexImage2D:_e,compressedTexImage3D:Te,texImage2D:lt,texImage3D:It,updateUBOMapping:Dn,uniformBlockBinding:tn,texStorage2D:ln,texStorage3D:Fe,texSubImage2D:ye,texSubImage3D:st,compressedTexSubImage2D:et,compressedTexSubImage3D:nt,scissor:Ot,viewport:ht,reset:Jn}}function hU(n,t,e,i){let r=Sse(i);switch(e){case BU:return n*t;case HU:return n*t;case WU:return n*t*2;case eT:return n*t/r.components*r.byteLength;case tT:return n*t/r.components*r.byteLength;case jU:return n*t*2/r.components*r.byteLength;case nT:return n*t*2/r.components*r.byteLength;case zU:return n*t*3/r.components*r.byteLength;case ys:return n*t*4/r.components*r.byteLength;case iT:return n*t*4/r.components*r.byteLength;case hy:case py:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case my:case gy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case $S:case YS:return Math.max(n,16)*Math.max(t,8)/4;case GS:case qS:return Math.max(n,8)*Math.max(t,8)/2;case XS:case ZS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case KS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case JS:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case QS:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case eP:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case tP:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case nP:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case iP:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case rP:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case oP:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case sP:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case aP:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case lP:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case cP:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case uP:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case dP:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case _y:case fP:case hP:return Math.ceil(n/4)*Math.ceil(t/4)*16;case GU:case pP:return Math.ceil(n/4)*Math.ceil(t/4)*8;case mP:case gP:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Sse(n){switch(n){case Il:case LU:return{byteLength:1,components:1};case Cm:case UU:case Rm:return{byteLength:2,components:1};case JP:case QP:return{byteLength:2,components:4};case Hu:case KP:case ra:return{byteLength:4,components:1};case VU:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function Pse(n,t,e,i,r,o,s){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new dn,f=new WeakMap,h,m=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(L,R){return p?new OffscreenCanvas(L,R):Mm("canvas")}function C(L,R,K){let _e=1,Te=ie(L);if((Te.width>K||Te.height>K)&&(_e=K/Math.max(Te.width,Te.height)),_e<1)if(typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&L instanceof ImageBitmap||typeof VideoFrame<"u"&&L instanceof VideoFrame){let ye=Math.floor(_e*Te.width),st=Math.floor(_e*Te.height);h===void 0&&(h=b(ye,st));let et=R?b(ye,st):h;return et.width=ye,et.height=st,et.getContext("2d").drawImage(L,0,0,ye,st),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+ye+"x"+st+")."),et}else return"data"in L&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),L;return L}function y(L){return L.generateMipmaps}function x(L){n.generateMipmap(L)}function T(L){return L.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:L.isWebGL3DRenderTarget?n.TEXTURE_3D:L.isWebGLArrayRenderTarget||L.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(L,R,K,_e,Te=!1){if(L!==null){if(n[L]!==void 0)return n[L];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+L+"'")}let ye=R;if(R===n.RED&&(K===n.FLOAT&&(ye=n.R32F),K===n.HALF_FLOAT&&(ye=n.R16F),K===n.UNSIGNED_BYTE&&(ye=n.R8)),R===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.R8UI),K===n.UNSIGNED_SHORT&&(ye=n.R16UI),K===n.UNSIGNED_INT&&(ye=n.R32UI),K===n.BYTE&&(ye=n.R8I),K===n.SHORT&&(ye=n.R16I),K===n.INT&&(ye=n.R32I)),R===n.RG&&(K===n.FLOAT&&(ye=n.RG32F),K===n.HALF_FLOAT&&(ye=n.RG16F),K===n.UNSIGNED_BYTE&&(ye=n.RG8)),R===n.RG_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RG8UI),K===n.UNSIGNED_SHORT&&(ye=n.RG16UI),K===n.UNSIGNED_INT&&(ye=n.RG32UI),K===n.BYTE&&(ye=n.RG8I),K===n.SHORT&&(ye=n.RG16I),K===n.INT&&(ye=n.RG32I)),R===n.RGB_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RGB8UI),K===n.UNSIGNED_SHORT&&(ye=n.RGB16UI),K===n.UNSIGNED_INT&&(ye=n.RGB32UI),K===n.BYTE&&(ye=n.RGB8I),K===n.SHORT&&(ye=n.RGB16I),K===n.INT&&(ye=n.RGB32I)),R===n.RGBA_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RGBA8UI),K===n.UNSIGNED_SHORT&&(ye=n.RGBA16UI),K===n.UNSIGNED_INT&&(ye=n.RGBA32UI),K===n.BYTE&&(ye=n.RGBA8I),K===n.SHORT&&(ye=n.RGBA16I),K===n.INT&&(ye=n.RGBA32I)),R===n.RGB&&K===n.UNSIGNED_INT_5_9_9_9_REV&&(ye=n.RGB9_E5),R===n.RGBA){let st=Te?Yy:Fn.getTransfer(_e);K===n.FLOAT&&(ye=n.RGBA32F),K===n.HALF_FLOAT&&(ye=n.RGBA16F),K===n.UNSIGNED_BYTE&&(ye=st===di?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ye}function D(L,R){let K;return L?R===null||R===Hu||R===Zf?K=n.DEPTH24_STENCIL8:R===ra?K=n.DEPTH32F_STENCIL8:R===Cm&&(K=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):R===null||R===Hu||R===Zf?K=n.DEPTH_COMPONENT24:R===ra?K=n.DEPTH_COMPONENT32F:R===Cm&&(K=n.DEPTH_COMPONENT16),K}function V(L,R){return y(L)===!0||L.isFramebufferTexture&&L.minFilter!==Hr&&L.minFilter!==wr?Math.log2(Math.max(R.width,R.height))+1:L.mipmaps!==void 0&&L.mipmaps.length>0?L.mipmaps.length:L.isCompressedTexture&&Array.isArray(L.image)?R.mipmaps.length:1}function B(L){let R=L.target;R.removeEventListener("dispose",B),G(R),R.isVideoTexture&&f.delete(R)}function F(L){let R=L.target;R.removeEventListener("dispose",F),P(R)}function G(L){let R=i.get(L);if(R.__webglInit===void 0)return;let K=L.source,_e=m.get(K);if(_e){let Te=_e[R.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&k(L),Object.keys(_e).length===0&&m.delete(K)}i.remove(L)}function k(L){let R=i.get(L);n.deleteTexture(R.__webglTexture);let K=L.source,_e=m.get(K);delete _e[R.__cacheKey],s.memory.textures--}function P(L){let R=i.get(L);if(L.depthTexture&&(L.depthTexture.dispose(),i.remove(L.depthTexture)),L.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(R.__webglFramebuffer[_e]))for(let Te=0;Te<R.__webglFramebuffer[_e].length;Te++)n.deleteFramebuffer(R.__webglFramebuffer[_e][Te]);else n.deleteFramebuffer(R.__webglFramebuffer[_e]);R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer[_e])}else{if(Array.isArray(R.__webglFramebuffer))for(let _e=0;_e<R.__webglFramebuffer.length;_e++)n.deleteFramebuffer(R.__webglFramebuffer[_e]);else n.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&n.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let _e=0;_e<R.__webglColorRenderbuffer.length;_e++)R.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(R.__webglColorRenderbuffer[_e]);R.__webglDepthRenderbuffer&&n.deleteRenderbuffer(R.__webglDepthRenderbuffer)}let K=L.textures;for(let _e=0,Te=K.length;_e<Te;_e++){let ye=i.get(K[_e]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),s.memory.textures--),i.remove(K[_e])}i.remove(L)}let N=0;function S(){N=0}function q(){let L=N;return L>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+L+" texture units while this GPU supports only "+r.maxTextures),N+=1,L}function oe(L){let R=[];return R.push(L.wrapS),R.push(L.wrapT),R.push(L.wrapR||0),R.push(L.magFilter),R.push(L.minFilter),R.push(L.anisotropy),R.push(L.internalFormat),R.push(L.format),R.push(L.type),R.push(L.generateMipmaps),R.push(L.premultiplyAlpha),R.push(L.flipY),R.push(L.unpackAlignment),R.push(L.colorSpace),R.join()}function ee(L,R){let K=i.get(L);if(L.isVideoTexture&&ve(L),L.isRenderTargetTexture===!1&&L.version>0&&K.__version!==L.version){let _e=L.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(K,L,R);return}}e.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+R)}function ge(L,R){let K=i.get(L);if(L.version>0&&K.__version!==L.version){Ce(K,L,R);return}e.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+R)}function se(L,R){let K=i.get(L);if(L.version>0&&K.__version!==L.version){Ce(K,L,R);return}e.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+R)}function de(L,R){let K=i.get(L);if(L.version>0&&K.__version!==L.version){He(K,L,R);return}e.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+R)}let J={[sr]:n.REPEAT,[Dl]:n.CLAMP_TO_EDGE,[bm]:n.MIRRORED_REPEAT},Q={[Hr]:n.NEAREST,[ZP]:n.NEAREST_MIPMAP_NEAREST,[Vf]:n.NEAREST_MIPMAP_LINEAR,[wr]:n.LINEAR,[_m]:n.LINEAR_MIPMAP_NEAREST,[Po]:n.LINEAR_MIPMAP_LINEAR},Ie={[mte]:n.NEVER,[bte]:n.ALWAYS,[gte]:n.LESS,[YU]:n.LEQUAL,[_te]:n.EQUAL,[xte]:n.GEQUAL,[vte]:n.GREATER,[yte]:n.NOTEQUAL};function Le(L,R){if(R.type===ra&&t.has("OES_texture_float_linear")===!1&&(R.magFilter===wr||R.magFilter===_m||R.magFilter===Vf||R.magFilter===Po||R.minFilter===wr||R.minFilter===_m||R.minFilter===Vf||R.minFilter===Po)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(L,n.TEXTURE_WRAP_S,J[R.wrapS]),n.texParameteri(L,n.TEXTURE_WRAP_T,J[R.wrapT]),(L===n.TEXTURE_3D||L===n.TEXTURE_2D_ARRAY)&&n.texParameteri(L,n.TEXTURE_WRAP_R,J[R.wrapR]),n.texParameteri(L,n.TEXTURE_MAG_FILTER,Q[R.magFilter]),n.texParameteri(L,n.TEXTURE_MIN_FILTER,Q[R.minFilter]),R.compareFunction&&(n.texParameteri(L,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(L,n.TEXTURE_COMPARE_FUNC,Ie[R.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===Hr||R.minFilter!==Vf&&R.minFilter!==Po||R.type===ra&&t.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||i.get(R).__currentAnisotropy){let K=t.get("EXT_texture_filter_anisotropic");n.texParameterf(L,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),i.get(R).__currentAnisotropy=R.anisotropy}}}function Ne(L,R){let K=!1;L.__webglInit===void 0&&(L.__webglInit=!0,R.addEventListener("dispose",B));let _e=R.source,Te=m.get(_e);Te===void 0&&(Te={},m.set(_e,Te));let ye=oe(R);if(ye!==L.__cacheKey){Te[ye]===void 0&&(Te[ye]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,K=!0),Te[ye].usedTimes++;let st=Te[L.__cacheKey];st!==void 0&&(Te[L.__cacheKey].usedTimes--,st.usedTimes===0&&k(R)),L.__cacheKey=ye,L.__webglTexture=Te[ye].texture}return K}function Ce(L,R,K){let _e=n.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),R.isData3DTexture&&(_e=n.TEXTURE_3D);let Te=Ne(L,R),ye=R.source;e.bindTexture(_e,L.__webglTexture,n.TEXTURE0+K);let st=i.get(ye);if(ye.version!==st.__version||Te===!0){e.activeTexture(n.TEXTURE0+K);let et=Fn.getPrimaries(Fn.workingColorSpace),nt=R.colorSpace===Tc?null:Fn.getPrimaries(R.colorSpace),ln=R.colorSpace===Tc||et===nt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ln);let Fe=C(R.image,!1,r.maxTextureSize);Fe=Ee(R,Fe);let lt=o.convert(R.format,R.colorSpace),It=o.convert(R.type),Ot=E(R.internalFormat,lt,It,R.colorSpace,R.isVideoTexture);Le(_e,R);let ht,Dn=R.mipmaps,tn=R.isVideoTexture!==!0,Jn=st.__version===void 0||Te===!0,ae=ye.dataReady,tt=V(R,Fe);if(R.isDepthTexture)Ot=D(R.format===Kf,R.type),Jn&&(tn?e.texStorage2D(n.TEXTURE_2D,1,Ot,Fe.width,Fe.height):e.texImage2D(n.TEXTURE_2D,0,Ot,Fe.width,Fe.height,0,lt,It,null));else if(R.isDataTexture)if(Dn.length>0){tn&&Jn&&e.texStorage2D(n.TEXTURE_2D,tt,Ot,Dn[0].width,Dn[0].height);for(let Se=0,Be=Dn.length;Se<Be;Se++)ht=Dn[Se],tn?ae&&e.texSubImage2D(n.TEXTURE_2D,Se,0,0,ht.width,ht.height,lt,It,ht.data):e.texImage2D(n.TEXTURE_2D,Se,Ot,ht.width,ht.height,0,lt,It,ht.data);R.generateMipmaps=!1}else tn?(Jn&&e.texStorage2D(n.TEXTURE_2D,tt,Ot,Fe.width,Fe.height),ae&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,lt,It,Fe.data)):e.texImage2D(n.TEXTURE_2D,0,Ot,Fe.width,Fe.height,0,lt,It,Fe.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){tn&&Jn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Ot,Dn[0].width,Dn[0].height,Fe.depth);for(let Se=0,Be=Dn.length;Se<Be;Se++)if(ht=Dn[Se],R.format!==ys)if(lt!==null)if(tn){if(ae)if(R.layerUpdates.size>0){let ft=hU(ht.width,ht.height,R.format,R.type);for(let ct of R.layerUpdates){let nn=ht.data.subarray(ct*ft/ht.data.BYTES_PER_ELEMENT,(ct+1)*ft/ht.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,ct,ht.width,ht.height,1,lt,nn)}R.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ht.width,ht.height,Fe.depth,lt,ht.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Se,Ot,ht.width,ht.height,Fe.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else tn?ae&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,ht.width,ht.height,Fe.depth,lt,It,ht.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Se,Ot,ht.width,ht.height,Fe.depth,0,lt,It,ht.data)}else{tn&&Jn&&e.texStorage2D(n.TEXTURE_2D,tt,Ot,Dn[0].width,Dn[0].height);for(let Se=0,Be=Dn.length;Se<Be;Se++)ht=Dn[Se],R.format!==ys?lt!==null?tn?ae&&e.compressedTexSubImage2D(n.TEXTURE_2D,Se,0,0,ht.width,ht.height,lt,ht.data):e.compressedTexImage2D(n.TEXTURE_2D,Se,Ot,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tn?ae&&e.texSubImage2D(n.TEXTURE_2D,Se,0,0,ht.width,ht.height,lt,It,ht.data):e.texImage2D(n.TEXTURE_2D,Se,Ot,ht.width,ht.height,0,lt,It,ht.data)}else if(R.isDataArrayTexture)if(tn){if(Jn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,tt,Ot,Fe.width,Fe.height,Fe.depth),ae)if(R.layerUpdates.size>0){let Se=hU(Fe.width,Fe.height,R.format,R.type);for(let Be of R.layerUpdates){let ft=Fe.data.subarray(Be*Se/Fe.data.BYTES_PER_ELEMENT,(Be+1)*Se/Fe.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Be,Fe.width,Fe.height,1,lt,It,ft)}R.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,It,Fe.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,Ot,Fe.width,Fe.height,Fe.depth,0,lt,It,Fe.data);else if(R.isData3DTexture)tn?(Jn&&e.texStorage3D(n.TEXTURE_3D,tt,Ot,Fe.width,Fe.height,Fe.depth),ae&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,It,Fe.data)):e.texImage3D(n.TEXTURE_3D,0,Ot,Fe.width,Fe.height,Fe.depth,0,lt,It,Fe.data);else if(R.isFramebufferTexture){if(Jn)if(tn)e.texStorage2D(n.TEXTURE_2D,tt,Ot,Fe.width,Fe.height);else{let Se=Fe.width,Be=Fe.height;for(let ft=0;ft<tt;ft++)e.texImage2D(n.TEXTURE_2D,ft,Ot,Se,Be,0,lt,It,null),Se>>=1,Be>>=1}}else if(Dn.length>0){if(tn&&Jn){let Se=ie(Dn[0]);e.texStorage2D(n.TEXTURE_2D,tt,Ot,Se.width,Se.height)}for(let Se=0,Be=Dn.length;Se<Be;Se++)ht=Dn[Se],tn?ae&&e.texSubImage2D(n.TEXTURE_2D,Se,0,0,lt,It,ht):e.texImage2D(n.TEXTURE_2D,Se,Ot,lt,It,ht);R.generateMipmaps=!1}else if(tn){if(Jn){let Se=ie(Fe);e.texStorage2D(n.TEXTURE_2D,tt,Ot,Se.width,Se.height)}ae&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,lt,It,Fe)}else e.texImage2D(n.TEXTURE_2D,0,Ot,lt,It,Fe);y(R)&&x(_e),st.__version=ye.version,R.onUpdate&&R.onUpdate(R)}L.__version=R.version}function He(L,R,K){if(R.image.length!==6)return;let _e=Ne(L,R),Te=R.source;e.bindTexture(n.TEXTURE_CUBE_MAP,L.__webglTexture,n.TEXTURE0+K);let ye=i.get(Te);if(Te.version!==ye.__version||_e===!0){e.activeTexture(n.TEXTURE0+K);let st=Fn.getPrimaries(Fn.workingColorSpace),et=R.colorSpace===Tc?null:Fn.getPrimaries(R.colorSpace),nt=R.colorSpace===Tc||st===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let ln=R.isCompressedTexture||R.image[0].isCompressedTexture,Fe=R.image[0]&&R.image[0].isDataTexture,lt=[];for(let Be=0;Be<6;Be++)!ln&&!Fe?lt[Be]=C(R.image[Be],!0,r.maxCubemapSize):lt[Be]=Fe?R.image[Be].image:R.image[Be],lt[Be]=Ee(R,lt[Be]);let It=lt[0],Ot=o.convert(R.format,R.colorSpace),ht=o.convert(R.type),Dn=E(R.internalFormat,Ot,ht,R.colorSpace),tn=R.isVideoTexture!==!0,Jn=ye.__version===void 0||_e===!0,ae=Te.dataReady,tt=V(R,It);Le(n.TEXTURE_CUBE_MAP,R);let Se;if(ln){tn&&Jn&&e.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Dn,It.width,It.height);for(let Be=0;Be<6;Be++){Se=lt[Be].mipmaps;for(let ft=0;ft<Se.length;ft++){let ct=Se[ft];R.format!==ys?Ot!==null?tn?ae&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,0,0,ct.width,ct.height,Ot,ct.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,Dn,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,0,0,ct.width,ct.height,Ot,ht,ct.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft,Dn,ct.width,ct.height,0,Ot,ht,ct.data)}}}else{if(Se=R.mipmaps,tn&&Jn){Se.length>0&&tt++;let Be=ie(lt[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,tt,Dn,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(Fe){tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,lt[Be].width,lt[Be].height,Ot,ht,lt[Be].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,Dn,lt[Be].width,lt[Be].height,0,Ot,ht,lt[Be].data);for(let ft=0;ft<Se.length;ft++){let nn=Se[ft].image[Be].image;tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,0,0,nn.width,nn.height,Ot,ht,nn.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,Dn,nn.width,nn.height,0,Ot,ht,nn.data)}}else{tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,Ot,ht,lt[Be]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,Dn,Ot,ht,lt[Be]);for(let ft=0;ft<Se.length;ft++){let ct=Se[ft];tn?ae&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,0,0,Ot,ht,ct.image[Be]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ft+1,Dn,Ot,ht,ct.image[Be])}}}y(R)&&x(n.TEXTURE_CUBE_MAP),ye.__version=Te.version,R.onUpdate&&R.onUpdate(R)}L.__version=R.version}function Ge(L,R,K,_e,Te,ye){let st=o.convert(K.format,K.colorSpace),et=o.convert(K.type),nt=E(K.internalFormat,st,et,K.colorSpace),ln=i.get(R),Fe=i.get(K);if(Fe.__renderTarget=R,!ln.__hasExternalTextures){let lt=Math.max(1,R.width>>ye),It=Math.max(1,R.height>>ye);Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?e.texImage3D(Te,ye,nt,lt,It,R.depth,0,st,et,null):e.texImage2D(Te,ye,nt,lt,It,0,st,et,null)}e.bindFramebuffer(n.FRAMEBUFFER,L),te(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Te,Fe.__webglTexture,0,j(R)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Te,Fe.__webglTexture,ye),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ve(L,R,K){if(n.bindRenderbuffer(n.RENDERBUFFER,L),R.depthBuffer){let _e=R.depthTexture,Te=_e&&_e.isDepthTexture?_e.type:null,ye=D(R.stencilBuffer,Te),st=R.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=j(R);te(R)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,ye,R.width,R.height):K?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,ye,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,ye,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,st,n.RENDERBUFFER,L)}else{let _e=R.textures;for(let Te=0;Te<_e.length;Te++){let ye=_e[Te],st=o.convert(ye.format,ye.colorSpace),et=o.convert(ye.type),nt=E(ye.internalFormat,st,et,ye.colorSpace),ln=j(R);K&&te(R)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ln,nt,R.width,R.height):te(R)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ln,nt,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,nt,R.width,R.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function mt(L,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,L),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let _e=i.get(R.depthTexture);_e.__renderTarget=R,(!_e.__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),ee(R.depthTexture,0);let Te=_e.__webglTexture,ye=j(R);if(R.depthTexture.format===jf)te(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0);else if(R.depthTexture.format===Kf)te(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function pt(L){let R=i.get(L),K=L.isWebGLCubeRenderTarget===!0;if(R.__boundDepthTexture!==L.depthTexture){let _e=L.depthTexture;if(R.__depthDisposeCallback&&R.__depthDisposeCallback(),_e){let Te=()=>{delete R.__boundDepthTexture,delete R.__depthDisposeCallback,_e.removeEventListener("dispose",Te)};_e.addEventListener("dispose",Te),R.__depthDisposeCallback=Te}R.__boundDepthTexture=_e}if(L.depthTexture&&!R.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");mt(R.__webglFramebuffer,L)}else if(K){R.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[_e]),R.__webglDepthbuffer[_e]===void 0)R.__webglDepthbuffer[_e]=n.createRenderbuffer(),Ve(R.__webglDepthbuffer[_e],L,!1);else{let Te=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=R.__webglDepthbuffer[_e];n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,ye)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer===void 0)R.__webglDepthbuffer=n.createRenderbuffer(),Ve(R.__webglDepthbuffer,L,!1);else{let _e=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=R.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Te),n.framebufferRenderbuffer(n.FRAMEBUFFER,_e,n.RENDERBUFFER,Te)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Lt(L,R,K){let _e=i.get(L);R!==void 0&&Ge(_e.__webglFramebuffer,L,L.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&pt(L)}function Tn(L){let R=L.texture,K=i.get(L),_e=i.get(R);L.addEventListener("dispose",F);let Te=L.textures,ye=L.isWebGLCubeRenderTarget===!0,st=Te.length>1;if(st||(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=R.version,s.memory.textures++),ye){K.__webglFramebuffer=[];for(let et=0;et<6;et++)if(R.mipmaps&&R.mipmaps.length>0){K.__webglFramebuffer[et]=[];for(let nt=0;nt<R.mipmaps.length;nt++)K.__webglFramebuffer[et][nt]=n.createFramebuffer()}else K.__webglFramebuffer[et]=n.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){K.__webglFramebuffer=[];for(let et=0;et<R.mipmaps.length;et++)K.__webglFramebuffer[et]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(st)for(let et=0,nt=Te.length;et<nt;et++){let ln=i.get(Te[et]);ln.__webglTexture===void 0&&(ln.__webglTexture=n.createTexture(),s.memory.textures++)}if(L.samples>0&&te(L)===!1){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let et=0;et<Te.length;et++){let nt=Te[et];K.__webglColorRenderbuffer[et]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[et]);let ln=o.convert(nt.format,nt.colorSpace),Fe=o.convert(nt.type),lt=E(nt.internalFormat,ln,Fe,nt.colorSpace,L.isXRRenderTarget===!0),It=j(L);n.renderbufferStorageMultisample(n.RENDERBUFFER,It,lt,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,K.__webglColorRenderbuffer[et])}n.bindRenderbuffer(n.RENDERBUFFER,null),L.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),Ve(K.__webglDepthRenderbuffer,L,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){e.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Le(n.TEXTURE_CUBE_MAP,R);for(let et=0;et<6;et++)if(R.mipmaps&&R.mipmaps.length>0)for(let nt=0;nt<R.mipmaps.length;nt++)Ge(K.__webglFramebuffer[et][nt],L,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,nt);else Ge(K.__webglFramebuffer[et],L,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);y(R)&&x(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(st){for(let et=0,nt=Te.length;et<nt;et++){let ln=Te[et],Fe=i.get(ln);e.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),Le(n.TEXTURE_2D,ln),Ge(K.__webglFramebuffer,L,ln,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,0),y(ln)&&x(n.TEXTURE_2D)}e.unbindTexture()}else{let et=n.TEXTURE_2D;if((L.isWebGL3DRenderTarget||L.isWebGLArrayRenderTarget)&&(et=L.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(et,_e.__webglTexture),Le(et,R),R.mipmaps&&R.mipmaps.length>0)for(let nt=0;nt<R.mipmaps.length;nt++)Ge(K.__webglFramebuffer[nt],L,R,n.COLOR_ATTACHMENT0,et,nt);else Ge(K.__webglFramebuffer,L,R,n.COLOR_ATTACHMENT0,et,0);y(R)&&x(et),e.unbindTexture()}L.depthBuffer&&pt(L)}function O(L){let R=L.textures;for(let K=0,_e=R.length;K<_e;K++){let Te=R[K];if(y(Te)){let ye=T(L),st=i.get(Te).__webglTexture;e.bindTexture(ye,st),x(ye),e.unbindTexture()}}}let Me=[],W=[];function Y(L){if(L.samples>0){if(te(L)===!1){let R=L.textures,K=L.width,_e=L.height,Te=n.COLOR_BUFFER_BIT,ye=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,st=i.get(L),et=R.length>1;if(et)for(let nt=0;nt<R.length;nt++)e.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,st.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglFramebuffer);for(let nt=0;nt<R.length;nt++){if(L.resolveDepthBuffer&&(L.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),L.stencilBuffer&&L.resolveStencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),et){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,st.__webglColorRenderbuffer[nt]);let ln=i.get(R[nt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ln,0)}n.blitFramebuffer(0,0,K,_e,0,0,K,_e,Te,n.NEAREST),l===!0&&(Me.length=0,W.length=0,Me.push(n.COLOR_ATTACHMENT0+nt),L.depthBuffer&&L.resolveDepthBuffer===!1&&(Me.push(ye),W.push(ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,W)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Me))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),et)for(let nt=0;nt<R.length;nt++){e.bindFramebuffer(n.FRAMEBUFFER,st.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,st.__webglColorRenderbuffer[nt]);let ln=i.get(R[nt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,st.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,ln,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,st.__webglMultisampledFramebuffer)}else if(L.depthBuffer&&L.resolveDepthBuffer===!1&&l){let R=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[R])}}}function j(L){return Math.min(r.maxSamples,L.samples)}function te(L){let R=i.get(L);return L.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function ve(L){let R=s.render.frame;f.get(L)!==R&&(f.set(L,R),L.update())}function Ee(L,R){let K=L.colorSpace,_e=L.format,Te=L.type;return L.isCompressedTexture===!0||L.isVideoTexture===!0||K!==$r&&K!==Tc&&(Fn.getTransfer(K)===di?(_e!==ys||Te!==Il)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),R}function ie(L){return typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement?(u.width=L.naturalWidth||L.width,u.height=L.naturalHeight||L.height):typeof VideoFrame<"u"&&L instanceof VideoFrame?(u.width=L.displayWidth,u.height=L.displayHeight):(u.width=L.width,u.height=L.height),u}this.allocateTextureUnit=q,this.resetTextureUnits=S,this.setTexture2D=ee,this.setTexture2DArray=ge,this.setTexture3D=se,this.setTextureCube=de,this.rebindTextures=Lt,this.setupRenderTarget=Tn,this.updateRenderTargetMipmap=O,this.updateMultisampleRenderTarget=Y,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=Ge,this.useMultisampledRTT=te}function Tse(n,t){function e(i,r=Tc){let o,s=Fn.getTransfer(r);if(i===Il)return n.UNSIGNED_BYTE;if(i===JP)return n.UNSIGNED_SHORT_4_4_4_4;if(i===QP)return n.UNSIGNED_SHORT_5_5_5_1;if(i===VU)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===LU)return n.BYTE;if(i===UU)return n.SHORT;if(i===Cm)return n.UNSIGNED_SHORT;if(i===KP)return n.INT;if(i===Hu)return n.UNSIGNED_INT;if(i===ra)return n.FLOAT;if(i===Rm)return n.HALF_FLOAT;if(i===BU)return n.ALPHA;if(i===zU)return n.RGB;if(i===ys)return n.RGBA;if(i===HU)return n.LUMINANCE;if(i===WU)return n.LUMINANCE_ALPHA;if(i===jf)return n.DEPTH_COMPONENT;if(i===Kf)return n.DEPTH_STENCIL;if(i===eT)return n.RED;if(i===tT)return n.RED_INTEGER;if(i===jU)return n.RG;if(i===nT)return n.RG_INTEGER;if(i===iT)return n.RGBA_INTEGER;if(i===hy||i===py||i===my||i===gy)if(s===di)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===hy)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===py)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===my)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===gy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===hy)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===py)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===my)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===gy)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===GS||i===$S||i===qS||i===YS)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===GS)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===$S)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===qS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===YS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===XS||i===ZS||i===KS)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===XS||i===ZS)return s===di?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===KS)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===JS||i===QS||i===eP||i===tP||i===nP||i===iP||i===rP||i===oP||i===sP||i===aP||i===lP||i===cP||i===uP||i===dP)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===JS)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===QS)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===eP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===tP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===nP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===iP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===rP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===oP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===sP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===aP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===lP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===cP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===uP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===dP)return s===di?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===_y||i===fP||i===hP)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===_y)return s===di?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===fP)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===hP)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===GU||i===pP||i===mP||i===gP)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===_y)return o.COMPRESSED_RED_RGTC1_EXT;if(i===pP)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===mP)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===gP)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Zf?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var AP=class extends fr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},ki=class extends hr{constructor(){super(),this.isGroup=!0,this.type="Group"}},Dse={type:"move"},xm=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ki,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ki,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ki,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){s=!0;for(let C of t.hand.values()){let y=e.getJointPose(C,i),x=this._getHandJoint(u,C);y!==null&&(x.matrix.fromArray(y.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=y.radius),x.visible=y!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],m=f.position.distanceTo(h.position),p=.02,b=.005;u.inputState.pinching&&m>p+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&m<=p-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Dse)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new ki;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},Ose=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ase=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,IP=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new Ms,o=t.properties.get(r);o.__webglTexture=e.texture,(e.depthNear!=i.depthNear||e.depthFar!=i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new Na({vertexShader:Ose,fragmentShader:Ase,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Mi(new bs(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},RP=class extends Rl{constructor(t,e){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,m=null,p=null,b=null,C=new IP,y=e.getContextAttributes(),x=null,T=null,E=[],D=[],V=new dn,B=null,F=new fr;F.viewport=new pn;let G=new fr;G.viewport=new pn;let k=[F,G],P=new AP,N=null,S=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ce){let He=E[Ce];return He===void 0&&(He=new xm,E[Ce]=He),He.getTargetRaySpace()},this.getControllerGrip=function(Ce){let He=E[Ce];return He===void 0&&(He=new xm,E[Ce]=He),He.getGripSpace()},this.getHand=function(Ce){let He=E[Ce];return He===void 0&&(He=new xm,E[Ce]=He),He.getHandSpace()};function q(Ce){let He=D.indexOf(Ce.inputSource);if(He===-1)return;let Ge=E[He];Ge!==void 0&&(Ge.update(Ce.inputSource,Ce.frame,u||s),Ge.dispatchEvent({type:Ce.type,data:Ce.inputSource}))}function oe(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",ee);for(let Ce=0;Ce<E.length;Ce++){let He=D[Ce];He!==null&&(D[Ce]=null,E[Ce].disconnect(He))}N=null,S=null,C.reset(),t.setRenderTarget(x),p=null,m=null,h=null,r=null,T=null,Ne.stop(),i.isPresenting=!1,t.setPixelRatio(B),t.setSize(V.width,V.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ce){o=Ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ce){a=Ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Ce){u=Ce},this.getBaseLayer=function(){return m!==null?m:p},this.getBinding=function(){return h},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=function(Ce){return Ka(this,null,function*(){if(r=Ce,r!==null){if(x=t.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",ee),y.xrCompatible!==!0&&(yield e.makeXRCompatible()),B=t.getPixelRatio(),t.getSize(V),r.renderState.layers===void 0){let He={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(r,e,He),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),T=new Nl(p.framebufferWidth,p.framebufferHeight,{format:ys,type:Il,colorSpace:t.outputColorSpace,stencilBuffer:y.stencil})}else{let He=null,Ge=null,Ve=null;y.depth&&(Ve=y.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,He=y.stencil?Kf:jf,Ge=y.stencil?Zf:Hu);let mt={colorFormat:e.RGBA8,depthFormat:Ve,scaleFactor:o};h=new XRWebGLBinding(r,e),m=h.createProjectionLayer(mt),r.updateRenderState({layers:[m]}),t.setPixelRatio(1),t.setSize(m.textureWidth,m.textureHeight,!1),T=new Nl(m.textureWidth,m.textureHeight,{format:ys,type:Il,depthTexture:new Py(m.textureWidth,m.textureHeight,Ge,void 0,void 0,void 0,void 0,void 0,void 0,He),stencilBuffer:y.stencil,colorSpace:t.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),Ne.setContext(r),Ne.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function ee(Ce){for(let He=0;He<Ce.removed.length;He++){let Ge=Ce.removed[He],Ve=D.indexOf(Ge);Ve>=0&&(D[Ve]=null,E[Ve].disconnect(Ge))}for(let He=0;He<Ce.added.length;He++){let Ge=Ce.added[He],Ve=D.indexOf(Ge);if(Ve===-1){for(let pt=0;pt<E.length;pt++)if(pt>=D.length){D.push(Ge),Ve=pt;break}else if(D[pt]===null){D[pt]=Ge,Ve=pt;break}if(Ve===-1)break}let mt=E[Ve];mt&&mt.connect(Ge)}}let ge=new ne,se=new ne;function de(Ce,He,Ge){ge.setFromMatrixPosition(He.matrixWorld),se.setFromMatrixPosition(Ge.matrixWorld);let Ve=ge.distanceTo(se),mt=He.projectionMatrix.elements,pt=Ge.projectionMatrix.elements,Lt=mt[14]/(mt[10]-1),Tn=mt[14]/(mt[10]+1),O=(mt[9]+1)/mt[5],Me=(mt[9]-1)/mt[5],W=(mt[8]-1)/mt[0],Y=(pt[8]+1)/pt[0],j=Lt*W,te=Lt*Y,ve=Ve/(-W+Y),Ee=ve*-W;if(He.matrixWorld.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.translateX(Ee),Ce.translateZ(ve),Ce.matrixWorld.compose(Ce.position,Ce.quaternion,Ce.scale),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert(),mt[10]===-1)Ce.projectionMatrix.copy(He.projectionMatrix),Ce.projectionMatrixInverse.copy(He.projectionMatrixInverse);else{let ie=Lt+ve,L=Tn+ve,R=j-Ee,K=te+(Ve-Ee),_e=O*Tn/L*ie,Te=Me*Tn/L*ie;Ce.projectionMatrix.makePerspective(R,K,_e,Te,ie,L),Ce.projectionMatrixInverse.copy(Ce.projectionMatrix).invert()}}function J(Ce,He){He===null?Ce.matrixWorld.copy(Ce.matrix):Ce.matrixWorld.multiplyMatrices(He.matrixWorld,Ce.matrix),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert()}this.updateCamera=function(Ce){if(r===null)return;let He=Ce.near,Ge=Ce.far;C.texture!==null&&(C.depthNear>0&&(He=C.depthNear),C.depthFar>0&&(Ge=C.depthFar)),P.near=G.near=F.near=He,P.far=G.far=F.far=Ge,(N!==P.near||S!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),N=P.near,S=P.far),F.layers.mask=Ce.layers.mask|2,G.layers.mask=Ce.layers.mask|4,P.layers.mask=F.layers.mask|G.layers.mask;let Ve=Ce.parent,mt=P.cameras;J(P,Ve);for(let pt=0;pt<mt.length;pt++)J(mt[pt],Ve);mt.length===2?de(P,F,G):P.projectionMatrix.copy(F.projectionMatrix),Q(Ce,P,Ve)};function Q(Ce,He,Ge){Ge===null?Ce.matrix.copy(He.matrixWorld):(Ce.matrix.copy(Ge.matrixWorld),Ce.matrix.invert(),Ce.matrix.multiply(He.matrixWorld)),Ce.matrix.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.updateMatrixWorld(!0),Ce.projectionMatrix.copy(He.projectionMatrix),Ce.projectionMatrixInverse.copy(He.projectionMatrixInverse),Ce.isPerspectiveCamera&&(Ce.fov=eh*2*Math.atan(1/Ce.projectionMatrix.elements[5]),Ce.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(m===null&&p===null))return l},this.setFoveation=function(Ce){l=Ce,m!==null&&(m.fixedFoveation=Ce),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Ce)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(P)};let Ie=null;function Le(Ce,He){if(f=He.getViewerPose(u||s),b=He,f!==null){let Ge=f.views;p!==null&&(t.setRenderTargetFramebuffer(T,p.framebuffer),t.setRenderTarget(T));let Ve=!1;Ge.length!==P.cameras.length&&(P.cameras.length=0,Ve=!0);for(let pt=0;pt<Ge.length;pt++){let Lt=Ge[pt],Tn=null;if(p!==null)Tn=p.getViewport(Lt);else{let Me=h.getViewSubImage(m,Lt);Tn=Me.viewport,pt===0&&(t.setRenderTargetTextures(T,Me.colorTexture,m.ignoreDepthValues?void 0:Me.depthStencilTexture),t.setRenderTarget(T))}let O=k[pt];O===void 0&&(O=new fr,O.layers.enable(pt),O.viewport=new pn,k[pt]=O),O.matrix.fromArray(Lt.transform.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale),O.projectionMatrix.fromArray(Lt.projectionMatrix),O.projectionMatrixInverse.copy(O.projectionMatrix).invert(),O.viewport.set(Tn.x,Tn.y,Tn.width,Tn.height),pt===0&&(P.matrix.copy(O.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ve===!0&&P.cameras.push(O)}let mt=r.enabledFeatures;if(mt&&mt.includes("depth-sensing")){let pt=h.getDepthInformation(Ge[0]);pt&&pt.isValid&&pt.texture&&C.init(t,pt,r.renderState)}}for(let Ge=0;Ge<E.length;Ge++){let Ve=D[Ge],mt=E[Ge];Ve!==null&&mt!==void 0&&mt.update(Ve,He,u||s)}Ie&&Ie(Ce,He),He.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:He}),b=null}let Ne=new JU;Ne.setAnimationLoop(Le),this.setAnimationLoop=function(Ce){Ie=Ce},this.dispose=function(){}}},Lu=new ju,Ise=new an;function Rse(n,t){function e(y,x){y.matrixAutoUpdate===!0&&y.updateMatrix(),x.value.copy(y.matrix)}function i(y,x){x.color.getRGB(y.fogColor.value,KU(n)),x.isFog?(y.fogNear.value=x.near,y.fogFar.value=x.far):x.isFogExp2&&(y.fogDensity.value=x.density)}function r(y,x,T,E,D){x.isMeshBasicMaterial||x.isMeshLambertMaterial?o(y,x):x.isMeshToonMaterial?(o(y,x),h(y,x)):x.isMeshPhongMaterial?(o(y,x),f(y,x)):x.isMeshStandardMaterial?(o(y,x),m(y,x),x.isMeshPhysicalMaterial&&p(y,x,D)):x.isMeshMatcapMaterial?(o(y,x),b(y,x)):x.isMeshDepthMaterial?o(y,x):x.isMeshDistanceMaterial?(o(y,x),C(y,x)):x.isMeshNormalMaterial?o(y,x):x.isLineBasicMaterial?(s(y,x),x.isLineDashedMaterial&&a(y,x)):x.isPointsMaterial?l(y,x,T,E):x.isSpriteMaterial?u(y,x):x.isShadowMaterial?(y.color.value.copy(x.color),y.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function o(y,x){y.opacity.value=x.opacity,x.color&&y.diffuse.value.copy(x.color),x.emissive&&y.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(y.map.value=x.map,e(x.map,y.mapTransform)),x.alphaMap&&(y.alphaMap.value=x.alphaMap,e(x.alphaMap,y.alphaMapTransform)),x.bumpMap&&(y.bumpMap.value=x.bumpMap,e(x.bumpMap,y.bumpMapTransform),y.bumpScale.value=x.bumpScale,x.side===To&&(y.bumpScale.value*=-1)),x.normalMap&&(y.normalMap.value=x.normalMap,e(x.normalMap,y.normalMapTransform),y.normalScale.value.copy(x.normalScale),x.side===To&&y.normalScale.value.negate()),x.displacementMap&&(y.displacementMap.value=x.displacementMap,e(x.displacementMap,y.displacementMapTransform),y.displacementScale.value=x.displacementScale,y.displacementBias.value=x.displacementBias),x.emissiveMap&&(y.emissiveMap.value=x.emissiveMap,e(x.emissiveMap,y.emissiveMapTransform)),x.specularMap&&(y.specularMap.value=x.specularMap,e(x.specularMap,y.specularMapTransform)),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest);let T=t.get(x),E=T.envMap,D=T.envMapRotation;E&&(y.envMap.value=E,Lu.copy(D),Lu.x*=-1,Lu.y*=-1,Lu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Lu.y*=-1,Lu.z*=-1),y.envMapRotation.value.setFromMatrix4(Ise.makeRotationFromEuler(Lu)),y.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=x.reflectivity,y.ior.value=x.ior,y.refractionRatio.value=x.refractionRatio),x.lightMap&&(y.lightMap.value=x.lightMap,y.lightMapIntensity.value=x.lightMapIntensity,e(x.lightMap,y.lightMapTransform)),x.aoMap&&(y.aoMap.value=x.aoMap,y.aoMapIntensity.value=x.aoMapIntensity,e(x.aoMap,y.aoMapTransform))}function s(y,x){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,x.map&&(y.map.value=x.map,e(x.map,y.mapTransform))}function a(y,x){y.dashSize.value=x.dashSize,y.totalSize.value=x.dashSize+x.gapSize,y.scale.value=x.scale}function l(y,x,T,E){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,y.size.value=x.size*T,y.scale.value=E*.5,x.map&&(y.map.value=x.map,e(x.map,y.uvTransform)),x.alphaMap&&(y.alphaMap.value=x.alphaMap,e(x.alphaMap,y.alphaMapTransform)),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest)}function u(y,x){y.diffuse.value.copy(x.color),y.opacity.value=x.opacity,y.rotation.value=x.rotation,x.map&&(y.map.value=x.map,e(x.map,y.mapTransform)),x.alphaMap&&(y.alphaMap.value=x.alphaMap,e(x.alphaMap,y.alphaMapTransform)),x.alphaTest>0&&(y.alphaTest.value=x.alphaTest)}function f(y,x){y.specular.value.copy(x.specular),y.shininess.value=Math.max(x.shininess,1e-4)}function h(y,x){x.gradientMap&&(y.gradientMap.value=x.gradientMap)}function m(y,x){y.metalness.value=x.metalness,x.metalnessMap&&(y.metalnessMap.value=x.metalnessMap,e(x.metalnessMap,y.metalnessMapTransform)),y.roughness.value=x.roughness,x.roughnessMap&&(y.roughnessMap.value=x.roughnessMap,e(x.roughnessMap,y.roughnessMapTransform)),x.envMap&&(y.envMapIntensity.value=x.envMapIntensity)}function p(y,x,T){y.ior.value=x.ior,x.sheen>0&&(y.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),y.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(y.sheenColorMap.value=x.sheenColorMap,e(x.sheenColorMap,y.sheenColorMapTransform)),x.sheenRoughnessMap&&(y.sheenRoughnessMap.value=x.sheenRoughnessMap,e(x.sheenRoughnessMap,y.sheenRoughnessMapTransform))),x.clearcoat>0&&(y.clearcoat.value=x.clearcoat,y.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(y.clearcoatMap.value=x.clearcoatMap,e(x.clearcoatMap,y.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,e(x.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(y.clearcoatNormalMap.value=x.clearcoatNormalMap,e(x.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===To&&y.clearcoatNormalScale.value.negate())),x.dispersion>0&&(y.dispersion.value=x.dispersion),x.iridescence>0&&(y.iridescence.value=x.iridescence,y.iridescenceIOR.value=x.iridescenceIOR,y.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(y.iridescenceMap.value=x.iridescenceMap,e(x.iridescenceMap,y.iridescenceMapTransform)),x.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=x.iridescenceThicknessMap,e(x.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),x.transmission>0&&(y.transmission.value=x.transmission,y.transmissionSamplerMap.value=T.texture,y.transmissionSamplerSize.value.set(T.width,T.height),x.transmissionMap&&(y.transmissionMap.value=x.transmissionMap,e(x.transmissionMap,y.transmissionMapTransform)),y.thickness.value=x.thickness,x.thicknessMap&&(y.thicknessMap.value=x.thicknessMap,e(x.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=x.attenuationDistance,y.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(y.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(y.anisotropyMap.value=x.anisotropyMap,e(x.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=x.specularIntensity,y.specularColor.value.copy(x.specularColor),x.specularColorMap&&(y.specularColorMap.value=x.specularColorMap,e(x.specularColorMap,y.specularColorMapTransform)),x.specularIntensityMap&&(y.specularIntensityMap.value=x.specularIntensityMap,e(x.specularIntensityMap,y.specularIntensityMapTransform))}function b(y,x){x.matcap&&(y.matcap.value=x.matcap)}function C(y,x){let T=t.get(x).light;y.referencePosition.value.setFromMatrixPosition(T.matrixWorld),y.nearDistance.value=T.shadow.camera.near,y.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Nse(n,t,e,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,E){let D=E.program;i.uniformBlockBinding(T,D)}function u(T,E){let D=r[T.id];D===void 0&&(b(T),D=f(T),r[T.id]=D,T.addEventListener("dispose",y));let V=E.program;i.updateUBOMapping(T,V);let B=t.render.frame;o[T.id]!==B&&(m(T),o[T.id]=B)}function f(T){let E=h();T.__bindingPointIndex=E;let D=n.createBuffer(),V=T.__size,B=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,V,B),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,D),D}function h(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(T){let E=r[T.id],D=T.uniforms,V=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let B=0,F=D.length;B<F;B++){let G=Array.isArray(D[B])?D[B]:[D[B]];for(let k=0,P=G.length;k<P;k++){let N=G[k];if(p(N,B,k,V)===!0){let S=N.__offset,q=Array.isArray(N.value)?N.value:[N.value],oe=0;for(let ee=0;ee<q.length;ee++){let ge=q[ee],se=C(ge);typeof ge=="number"||typeof ge=="boolean"?(N.__data[0]=ge,n.bufferSubData(n.UNIFORM_BUFFER,S+oe,N.__data)):ge.isMatrix3?(N.__data[0]=ge.elements[0],N.__data[1]=ge.elements[1],N.__data[2]=ge.elements[2],N.__data[3]=0,N.__data[4]=ge.elements[3],N.__data[5]=ge.elements[4],N.__data[6]=ge.elements[5],N.__data[7]=0,N.__data[8]=ge.elements[6],N.__data[9]=ge.elements[7],N.__data[10]=ge.elements[8],N.__data[11]=0):(ge.toArray(N.__data,oe),oe+=se.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,S,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(T,E,D,V){let B=T.value,F=E+"_"+D;if(V[F]===void 0)return typeof B=="number"||typeof B=="boolean"?V[F]=B:V[F]=B.clone(),!0;{let G=V[F];if(typeof B=="number"||typeof B=="boolean"){if(G!==B)return V[F]=B,!0}else if(G.equals(B)===!1)return G.copy(B),!0}return!1}function b(T){let E=T.uniforms,D=0,V=16;for(let F=0,G=E.length;F<G;F++){let k=Array.isArray(E[F])?E[F]:[E[F]];for(let P=0,N=k.length;P<N;P++){let S=k[P],q=Array.isArray(S.value)?S.value:[S.value];for(let oe=0,ee=q.length;oe<ee;oe++){let ge=q[oe],se=C(ge),de=D%V,J=de%se.boundary,Q=de+J;D+=J,Q!==0&&V-Q<se.storage&&(D+=V-Q),S.__data=new Float32Array(se.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=D,D+=se.storage}}}let B=D%V;return B>0&&(D+=V-B),T.__size=D,T.__cache={},this}function C(T){let E={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(E.boundary=4,E.storage=4):T.isVector2?(E.boundary=8,E.storage=8):T.isVector3||T.isColor?(E.boundary=16,E.storage=12):T.isVector4?(E.boundary=16,E.storage=16):T.isMatrix3?(E.boundary=48,E.storage=48):T.isMatrix4?(E.boundary=64,E.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),E}function y(T){let E=T.target;E.removeEventListener("dispose",y);let D=s.indexOf(E.__bindingPointIndex);s.splice(D,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete o[E.id]}function x(){for(let T in r)n.deleteBuffer(r[T]);s=[],r={},o={}}return{bind:l,update:u,dispose:x}}var Ty=class{constructor(t={}){let{canvas:e=Ute(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:m=!1}=t;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=s;let b=new Uint32Array(4),C=new Int32Array(4),y=null,x=null,T=[],E=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Li,this.toneMapping=Oc,this.toneMappingExposure=1;let D=this,V=!1,B=0,F=0,G=null,k=-1,P=null,N=new pn,S=new pn,q=null,oe=new Bt(0),ee=0,ge=e.width,se=e.height,de=1,J=null,Q=null,Ie=new pn(0,0,ge,se),Le=new pn(0,0,ge,se),Ne=!1,Ce=new Sm,He=!1,Ge=!1,Ve=new an,mt=new an,pt=new ne,Lt=new pn,Tn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},O=!1;function Me(){return G===null?de:1}let W=i;function Y(z,he){return e.getContext(z,he)}try{let z={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${YP}`),e.addEventListener("webglcontextlost",Be,!1),e.addEventListener("webglcontextrestored",ft,!1),e.addEventListener("webglcontextcreationerror",ct,!1),W===null){let he="webgl2";if(W=Y(he,z),W===null)throw Y(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let j,te,ve,Ee,ie,L,R,K,_e,Te,ye,st,et,nt,ln,Fe,lt,It,Ot,ht,Dn,tn,Jn,ae;function tt(){j=new Zre(W),j.init(),tn=new Tse(W,j),te=new jre(W,j,t,tn),ve=new Ese(W,j),te.reverseDepthBuffer&&m&&ve.buffers.depth.setReversed(!0),Ee=new Qre(W),ie=new fse,L=new Pse(W,j,ve,ie,te,tn,Ee),R=new $re(D),K=new Xre(D),_e=new sne(W),Jn=new Hre(W,_e),Te=new Kre(W,_e,Ee,Jn),ye=new toe(W,Te,_e,Ee),Ot=new eoe(W,te,L),Fe=new Gre(ie),st=new dse(D,R,K,j,te,Jn,Fe),et=new Rse(D,ie),nt=new pse,ln=new xse(j),It=new zre(D,R,K,ve,ye,p,l),lt=new Mse(D,ye,te),ae=new Nse(W,Ee,te,ve),ht=new Wre(W,j,Ee),Dn=new Jre(W,j,Ee),Ee.programs=st.programs,D.capabilities=te,D.extensions=j,D.properties=ie,D.renderLists=nt,D.shadowMap=lt,D.state=ve,D.info=Ee}tt();let Se=new RP(D,W);this.xr=Se,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){let z=j.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){let z=j.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(z){z!==void 0&&(de=z,this.setSize(ge,se,!1))},this.getSize=function(z){return z.set(ge,se)},this.setSize=function(z,he,xe=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ge=z,se=he,e.width=Math.floor(z*de),e.height=Math.floor(he*de),xe===!0&&(e.style.width=z+"px",e.style.height=he+"px"),this.setViewport(0,0,z,he)},this.getDrawingBufferSize=function(z){return z.set(ge*de,se*de).floor()},this.setDrawingBufferSize=function(z,he,xe){ge=z,se=he,de=xe,e.width=Math.floor(z*xe),e.height=Math.floor(he*xe),this.setViewport(0,0,z,he)},this.getCurrentViewport=function(z){return z.copy(N)},this.getViewport=function(z){return z.copy(Ie)},this.setViewport=function(z,he,xe,be){z.isVector4?Ie.set(z.x,z.y,z.z,z.w):Ie.set(z,he,xe,be),ve.viewport(N.copy(Ie).multiplyScalar(de).round())},this.getScissor=function(z){return z.copy(Le)},this.setScissor=function(z,he,xe,be){z.isVector4?Le.set(z.x,z.y,z.z,z.w):Le.set(z,he,xe,be),ve.scissor(S.copy(Le).multiplyScalar(de).round())},this.getScissorTest=function(){return Ne},this.setScissorTest=function(z){ve.setScissorTest(Ne=z)},this.setOpaqueSort=function(z){J=z},this.setTransparentSort=function(z){Q=z},this.getClearColor=function(z){return z.copy(It.getClearColor())},this.setClearColor=function(){It.setClearColor.apply(It,arguments)},this.getClearAlpha=function(){return It.getClearAlpha()},this.setClearAlpha=function(){It.setClearAlpha.apply(It,arguments)},this.clear=function(z=!0,he=!0,xe=!0){let be=0;if(z){let fe=!1;if(G!==null){let Qe=G.texture.format;fe=Qe===iT||Qe===nT||Qe===tT}if(fe){let Qe=G.texture.type,ut=Qe===Il||Qe===Hu||Qe===Cm||Qe===Zf||Qe===JP||Qe===QP,Et=It.getClearColor(),wt=It.getClearAlpha(),Xt=Et.r,rn=Et.g,St=Et.b;ut?(b[0]=Xt,b[1]=rn,b[2]=St,b[3]=wt,W.clearBufferuiv(W.COLOR,0,b)):(C[0]=Xt,C[1]=rn,C[2]=St,C[3]=wt,W.clearBufferiv(W.COLOR,0,C))}else be|=W.COLOR_BUFFER_BIT}he&&(be|=W.DEPTH_BUFFER_BIT),xe&&(be|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Be,!1),e.removeEventListener("webglcontextrestored",ft,!1),e.removeEventListener("webglcontextcreationerror",ct,!1),nt.dispose(),ln.dispose(),ie.dispose(),R.dispose(),K.dispose(),ye.dispose(),Jn.dispose(),ae.dispose(),st.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",id),Se.removeEventListener("sessionend",Ym),Ba.stop()};function Be(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1;let z=Ee.autoReset,he=lt.enabled,xe=lt.autoUpdate,be=lt.needsUpdate,fe=lt.type;tt(),Ee.autoReset=z,lt.enabled=he,lt.autoUpdate=xe,lt.needsUpdate=be,lt.type=fe}function ct(z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",z.statusMessage)}function nn(z){let he=z.target;he.removeEventListener("dispose",nn),Ti(he)}function Ti(z){gr(z),ie.remove(z)}function gr(z){let he=ie.get(z).programs;he!==void 0&&(he.forEach(function(xe){st.releaseProgram(xe)}),z.isShaderMaterial&&st.releaseShaderCache(z))}this.renderBufferDirect=function(z,he,xe,be,fe,Qe){he===null&&(he=Tn);let ut=fe.isMesh&&fe.matrixWorld.determinant()<0,Et=Mb(z,he,xe,be,fe);ve.setMaterial(be,ut);let wt=xe.index,Xt=1;if(be.wireframe===!0){if(wt=Te.getWireframeAttribute(xe),wt===void 0)return;Xt=2}let rn=xe.drawRange,St=xe.attributes.position,Bn=rn.start*Xt,oi=(rn.start+rn.count)*Xt;Qe!==null&&(Bn=Math.max(Bn,Qe.start*Xt),oi=Math.min(oi,(Qe.start+Qe.count)*Xt)),wt!==null?(Bn=Math.max(Bn,0),oi=Math.min(oi,wt.count)):St!=null&&(Bn=Math.max(Bn,0),oi=Math.min(oi,St.count));let fi=oi-Bn;if(fi<0||fi===1/0)return;Jn.setup(fe,be,Et,xe,wt);let Er,Hn=ht;if(wt!==null&&(Er=_e.get(wt),Hn=Dn,Hn.setIndex(Er)),fe.isMesh)be.wireframe===!0?(ve.setLineWidth(be.wireframeLinewidth*Me()),Hn.setMode(W.LINES)):Hn.setMode(W.TRIANGLES);else if(fe.isLine){let At=be.linewidth;At===void 0&&(At=1),ve.setLineWidth(At*Me()),fe.isLineSegments?Hn.setMode(W.LINES):fe.isLineLoop?Hn.setMode(W.LINE_LOOP):Hn.setMode(W.LINE_STRIP)}else fe.isPoints?Hn.setMode(W.POINTS):fe.isSprite&&Hn.setMode(W.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)Hn.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(j.get("WEBGL_multi_draw"))Hn.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{let At=fe._multiDrawStarts,Oo=fe._multiDrawCounts,qn=fe._multiDrawCount,ho=wt?_e.get(wt).bytesPerElement:1,Is=ie.get(be).currentProgram.getUniforms();for(let Ar=0;Ar<qn;Ar++)Is.setValue(W,"_gl_DrawID",Ar),Hn.render(At[Ar]/ho,Oo[Ar])}else if(fe.isInstancedMesh)Hn.renderInstances(Bn,fi,fe.count);else if(xe.isInstancedBufferGeometry){let At=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,Oo=Math.min(xe.instanceCount,At);Hn.renderInstances(Bn,fi,Oo)}else Hn.render(Bn,fi)};function Yn(z,he,xe){z.transparent===!0&&z.side===Yo&&z.forceSinglePass===!1?(z.side=To,z.needsUpdate=!0,od(z,he,xe),z.side=Ia,z.needsUpdate=!0,od(z,he,xe),z.side=Yo):od(z,he,xe)}this.compile=function(z,he,xe=null){xe===null&&(xe=z),x=ln.get(xe),x.init(he),E.push(x),xe.traverseVisible(function(fe){fe.isLight&&fe.layers.test(he.layers)&&(x.pushLight(fe),fe.castShadow&&x.pushShadow(fe))}),z!==xe&&z.traverseVisible(function(fe){fe.isLight&&fe.layers.test(he.layers)&&(x.pushLight(fe),fe.castShadow&&x.pushShadow(fe))}),x.setupLights();let be=new Set;return z.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;let Qe=fe.material;if(Qe)if(Array.isArray(Qe))for(let ut=0;ut<Qe.length;ut++){let Et=Qe[ut];Yn(Et,xe,fe),be.add(Et)}else Yn(Qe,xe,fe),be.add(Qe)}),E.pop(),x=null,be},this.compileAsync=function(z,he,xe=null){let be=this.compile(z,he,xe);return new Promise(fe=>{function Qe(){if(be.forEach(function(ut){ie.get(ut).currentProgram.isReady()&&be.delete(ut)}),be.size===0){fe(z);return}setTimeout(Qe,10)}j.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let Jr=null;function As(z){Jr&&Jr(z)}function id(){Ba.stop()}function Ym(){Ba.start()}let Ba=new JU;Ba.setAnimationLoop(As),typeof self<"u"&&Ba.setContext(self),this.setAnimationLoop=function(z){Jr=z,Se.setAnimationLoop(z),z===null?Ba.stop():Ba.start()},Se.addEventListener("sessionstart",id),Se.addEventListener("sessionend",Ym),this.render=function(z,he){if(he!==void 0&&he.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(V===!0)return;if(z.matrixWorldAutoUpdate===!0&&z.updateMatrixWorld(),he.parent===null&&he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(he),he=Se.getCamera()),z.isScene===!0&&z.onBeforeRender(D,z,he,G),x=ln.get(z,E.length),x.init(he),E.push(x),mt.multiplyMatrices(he.projectionMatrix,he.matrixWorldInverse),Ce.setFromProjectionMatrix(mt),Ge=this.localClippingEnabled,He=Fe.init(this.clippingPlanes,Ge),y=nt.get(z,T.length),y.init(),T.push(y),Se.enabled===!0&&Se.isPresenting===!0){let Qe=D.xr.getDepthSensingMesh();Qe!==null&&Th(Qe,he,-1/0,D.sortObjects)}Th(z,he,0,D.sortObjects),y.finish(),D.sortObjects===!0&&y.sort(J,Q),O=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,O&&It.addToRenderList(y,z),this.info.render.frame++,He===!0&&Fe.beginShadows();let xe=x.state.shadowsArray;lt.render(xe,z,he),He===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();let be=y.opaque,fe=y.transmissive;if(x.setupLights(),he.isArrayCamera){let Qe=he.cameras;if(fe.length>0)for(let ut=0,Et=Qe.length;ut<Et;ut++){let wt=Qe[ut];Zm(be,fe,z,wt)}O&&It.render(z);for(let ut=0,Et=Qe.length;ut<Et;ut++){let wt=Qe[ut];Xm(y,z,wt,wt.viewport)}}else fe.length>0&&Zm(be,fe,z,he),O&&It.render(z),Xm(y,z,he);G!==null&&(L.updateMultisampleRenderTarget(G),L.updateRenderTargetMipmap(G)),z.isScene===!0&&z.onAfterRender(D,z,he),Jn.resetDefaultState(),k=-1,P=null,E.pop(),E.length>0?(x=E[E.length-1],He===!0&&Fe.setGlobalState(D.clippingPlanes,x.state.camera)):x=null,T.pop(),T.length>0?y=T[T.length-1]:y=null};function Th(z,he,xe,be){if(z.visible===!1)return;if(z.layers.test(he.layers)){if(z.isGroup)xe=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(he);else if(z.isLight)x.pushLight(z),z.castShadow&&x.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||Ce.intersectsSprite(z)){be&&Lt.setFromMatrixPosition(z.matrixWorld).applyMatrix4(mt);let ut=ye.update(z),Et=z.material;Et.visible&&y.push(z,ut,Et,xe,Lt.z,null)}}else if((z.isMesh||z.isLine||z.isPoints)&&(!z.frustumCulled||Ce.intersectsObject(z))){let ut=ye.update(z),Et=z.material;if(be&&(z.boundingSphere!==void 0?(z.boundingSphere===null&&z.computeBoundingSphere(),Lt.copy(z.boundingSphere.center)):(ut.boundingSphere===null&&ut.computeBoundingSphere(),Lt.copy(ut.boundingSphere.center)),Lt.applyMatrix4(z.matrixWorld).applyMatrix4(mt)),Array.isArray(Et)){let wt=ut.groups;for(let Xt=0,rn=wt.length;Xt<rn;Xt++){let St=wt[Xt],Bn=Et[St.materialIndex];Bn&&Bn.visible&&y.push(z,ut,Bn,xe,Lt.z,St)}}else Et.visible&&y.push(z,ut,Et,xe,Lt.z,null)}}let Qe=z.children;for(let ut=0,Et=Qe.length;ut<Et;ut++)Th(Qe[ut],he,xe,be)}function Xm(z,he,xe,be){let fe=z.opaque,Qe=z.transmissive,ut=z.transparent;x.setupLightsView(xe),He===!0&&Fe.setGlobalState(D.clippingPlanes,xe),be&&ve.viewport(N.copy(be)),fe.length>0&&rd(fe,he,xe),Qe.length>0&&rd(Qe,he,xe),ut.length>0&&rd(ut,he,xe),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1)}function Zm(z,he,xe,be){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[be.id]===void 0&&(x.state.transmissionRenderTarget[be.id]=new Nl(1,1,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")||j.has("EXT_color_buffer_float")?Rm:Il,minFilter:Po,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace}));let Qe=x.state.transmissionRenderTarget[be.id],ut=be.viewport||N;Qe.setSize(ut.z,ut.w);let Et=D.getRenderTarget();D.setRenderTarget(Qe),D.getClearColor(oe),ee=D.getClearAlpha(),ee<1&&D.setClearColor(16777215,.5),D.clear(),O&&It.render(xe);let wt=D.toneMapping;D.toneMapping=Oc;let Xt=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),x.setupLightsView(be),He===!0&&Fe.setGlobalState(D.clippingPlanes,be),rd(z,xe,be),L.updateMultisampleRenderTarget(Qe),L.updateRenderTargetMipmap(Qe),j.has("WEBGL_multisampled_render_to_texture")===!1){let rn=!1;for(let St=0,Bn=he.length;St<Bn;St++){let oi=he[St],fi=oi.object,Er=oi.geometry,Hn=oi.material,At=oi.group;if(Hn.side===Yo&&fi.layers.test(be.layers)){let Oo=Hn.side;Hn.side=To,Hn.needsUpdate=!0,Km(fi,xe,be,Er,Hn,At),Hn.side=Oo,Hn.needsUpdate=!0,rn=!0}}rn===!0&&(L.updateMultisampleRenderTarget(Qe),L.updateRenderTargetMipmap(Qe))}D.setRenderTarget(Et),D.setClearColor(oe,ee),Xt!==void 0&&(be.viewport=Xt),D.toneMapping=wt}function rd(z,he,xe){let be=he.isScene===!0?he.overrideMaterial:null;for(let fe=0,Qe=z.length;fe<Qe;fe++){let ut=z[fe],Et=ut.object,wt=ut.geometry,Xt=be===null?ut.material:be,rn=ut.group;Et.layers.test(xe.layers)&&Km(Et,he,xe,wt,Xt,rn)}}function Km(z,he,xe,be,fe,Qe){z.onBeforeRender(D,he,xe,be,fe,Qe),z.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),fe.onBeforeRender(D,he,xe,be,z,Qe),fe.transparent===!0&&fe.side===Yo&&fe.forceSinglePass===!1?(fe.side=To,fe.needsUpdate=!0,D.renderBufferDirect(xe,he,be,fe,z,Qe),fe.side=Ia,fe.needsUpdate=!0,D.renderBufferDirect(xe,he,be,fe,z,Qe),fe.side=Yo):D.renderBufferDirect(xe,he,be,fe,z,Qe),z.onAfterRender(D,he,xe,be,fe,Qe)}function od(z,he,xe){he.isScene!==!0&&(he=Tn);let be=ie.get(z),fe=x.state.lights,Qe=x.state.shadowsArray,ut=fe.state.version,Et=st.getParameters(z,fe.state,Qe,he,xe),wt=st.getProgramCacheKey(Et),Xt=be.programs;be.environment=z.isMeshStandardMaterial?he.environment:null,be.fog=he.fog,be.envMap=(z.isMeshStandardMaterial?K:R).get(z.envMap||be.environment),be.envMapRotation=be.environment!==null&&z.envMap===null?he.environmentRotation:z.envMapRotation,Xt===void 0&&(z.addEventListener("dispose",nn),Xt=new Map,be.programs=Xt);let rn=Xt.get(wt);if(rn!==void 0){if(be.currentProgram===rn&&be.lightsStateVersion===ut)return Jm(z,Et),rn}else Et.uniforms=st.getUniforms(z),z.onBeforeCompile(Et,D),rn=st.acquireProgram(Et,wt),Xt.set(wt,rn),be.uniforms=Et.uniforms;let St=be.uniforms;return(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(St.clippingPlanes=Fe.uniform),Jm(z,Et),be.needsLights=Eb(z),be.lightsStateVersion=ut,be.needsLights&&(St.ambientLightColor.value=fe.state.ambient,St.lightProbe.value=fe.state.probe,St.directionalLights.value=fe.state.directional,St.directionalLightShadows.value=fe.state.directionalShadow,St.spotLights.value=fe.state.spot,St.spotLightShadows.value=fe.state.spotShadow,St.rectAreaLights.value=fe.state.rectArea,St.ltc_1.value=fe.state.rectAreaLTC1,St.ltc_2.value=fe.state.rectAreaLTC2,St.pointLights.value=fe.state.point,St.pointLightShadows.value=fe.state.pointShadow,St.hemisphereLights.value=fe.state.hemi,St.directionalShadowMap.value=fe.state.directionalShadowMap,St.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,St.spotShadowMap.value=fe.state.spotShadowMap,St.spotLightMatrix.value=fe.state.spotLightMatrix,St.spotLightMap.value=fe.state.spotLightMap,St.pointShadowMap.value=fe.state.pointShadowMap,St.pointShadowMatrix.value=fe.state.pointShadowMatrix),be.currentProgram=rn,be.uniformsList=null,rn}function Dh(z){if(z.uniformsList===null){let he=z.currentProgram.getUniforms();z.uniformsList=$f.seqWithValue(he.seq,z.uniforms)}return z.uniformsList}function Jm(z,he){let xe=ie.get(z);xe.outputColorSpace=he.outputColorSpace,xe.batching=he.batching,xe.batchingColor=he.batchingColor,xe.instancing=he.instancing,xe.instancingColor=he.instancingColor,xe.instancingMorph=he.instancingMorph,xe.skinning=he.skinning,xe.morphTargets=he.morphTargets,xe.morphNormals=he.morphNormals,xe.morphColors=he.morphColors,xe.morphTargetsCount=he.morphTargetsCount,xe.numClippingPlanes=he.numClippingPlanes,xe.numIntersection=he.numClipIntersection,xe.vertexAlphas=he.vertexAlphas,xe.vertexTangents=he.vertexTangents,xe.toneMapping=he.toneMapping}function Mb(z,he,xe,be,fe){he.isScene!==!0&&(he=Tn),L.resetTextureUnits();let Qe=he.fog,ut=be.isMeshStandardMaterial?he.environment:null,Et=G===null?D.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:$r,wt=(be.isMeshStandardMaterial?K:R).get(be.envMap||ut),Xt=be.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,rn=!!xe.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),St=!!xe.morphAttributes.position,Bn=!!xe.morphAttributes.normal,oi=!!xe.morphAttributes.color,fi=Oc;be.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(fi=D.toneMapping);let Er=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,Hn=Er!==void 0?Er.length:0,At=ie.get(be),Oo=x.state.lights;if(He===!0&&(Ge===!0||z!==P)){let po=z===P&&be.id===k;Fe.setState(be,z,po)}let qn=!1;be.version===At.__version?(At.needsLights&&At.lightsStateVersion!==Oo.state.version||At.outputColorSpace!==Et||fe.isBatchedMesh&&At.batching===!1||!fe.isBatchedMesh&&At.batching===!0||fe.isBatchedMesh&&At.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&At.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&At.instancing===!1||!fe.isInstancedMesh&&At.instancing===!0||fe.isSkinnedMesh&&At.skinning===!1||!fe.isSkinnedMesh&&At.skinning===!0||fe.isInstancedMesh&&At.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&At.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&At.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&At.instancingMorph===!1&&fe.morphTexture!==null||At.envMap!==wt||be.fog===!0&&At.fog!==Qe||At.numClippingPlanes!==void 0&&(At.numClippingPlanes!==Fe.numPlanes||At.numIntersection!==Fe.numIntersection)||At.vertexAlphas!==Xt||At.vertexTangents!==rn||At.morphTargets!==St||At.morphNormals!==Bn||At.morphColors!==oi||At.toneMapping!==fi||At.morphTargetsCount!==Hn)&&(qn=!0):(qn=!0,At.__version=be.version);let ho=At.currentProgram;qn===!0&&(ho=od(be,he,fe));let Is=!1,Ar=!1,jc=!1,si=ho.getUniforms(),Ao=At.uniforms;if(ve.useProgram(ho.program)&&(Is=!0,Ar=!0,jc=!0),be.id!==k&&(k=be.id,Ar=!0),Is||P!==z){ve.buffers.depth.getReversed()?(Ve.copy(z.projectionMatrix),Bte(Ve),zte(Ve),si.setValue(W,"projectionMatrix",Ve)):si.setValue(W,"projectionMatrix",z.projectionMatrix),si.setValue(W,"viewMatrix",z.matrixWorldInverse);let Rs=si.map.cameraPosition;Rs!==void 0&&Rs.setValue(W,pt.setFromMatrixPosition(z.matrixWorld)),te.logarithmicDepthBuffer&&si.setValue(W,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&si.setValue(W,"isOrthographic",z.isOrthographicCamera===!0),P!==z&&(P=z,Ar=!0,jc=!0)}if(fe.isSkinnedMesh){si.setOptional(W,fe,"bindMatrix"),si.setOptional(W,fe,"bindMatrixInverse");let po=fe.skeleton;po&&(po.boneTexture===null&&po.computeBoneTexture(),si.setValue(W,"boneTexture",po.boneTexture,L))}fe.isBatchedMesh&&(si.setOptional(W,fe,"batchingTexture"),si.setValue(W,"batchingTexture",fe._matricesTexture,L),si.setOptional(W,fe,"batchingIdTexture"),si.setValue(W,"batchingIdTexture",fe._indirectTexture,L),si.setOptional(W,fe,"batchingColorTexture"),fe._colorsTexture!==null&&si.setValue(W,"batchingColorTexture",fe._colorsTexture,L));let za=xe.morphAttributes;if((za.position!==void 0||za.normal!==void 0||za.color!==void 0)&&Ot.update(fe,xe,ho),(Ar||At.receiveShadow!==fe.receiveShadow)&&(At.receiveShadow=fe.receiveShadow,si.setValue(W,"receiveShadow",fe.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(Ao.envMap.value=wt,Ao.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),be.isMeshStandardMaterial&&be.envMap===null&&he.environment!==null&&(Ao.envMapIntensity.value=he.environmentIntensity),Ar&&(si.setValue(W,"toneMappingExposure",D.toneMappingExposure),At.needsLights&&wb(Ao,jc),Qe&&be.fog===!0&&et.refreshFogUniforms(Ao,Qe),et.refreshMaterialUniforms(Ao,be,de,se,x.state.transmissionRenderTarget[z.id]),$f.upload(W,Dh(At),Ao,L)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&($f.upload(W,Dh(At),Ao,L),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&si.setValue(W,"center",fe.center),si.setValue(W,"modelViewMatrix",fe.modelViewMatrix),si.setValue(W,"normalMatrix",fe.normalMatrix),si.setValue(W,"modelMatrix",fe.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){let po=be.uniformsGroups;for(let Rs=0,Ko=po.length;Rs<Ko;Rs++){let sd=po[Rs];ae.update(sd,ho),ae.bind(sd,ho)}}return ho}function wb(z,he){z.ambientLightColor.needsUpdate=he,z.lightProbe.needsUpdate=he,z.directionalLights.needsUpdate=he,z.directionalLightShadows.needsUpdate=he,z.pointLights.needsUpdate=he,z.pointLightShadows.needsUpdate=he,z.spotLights.needsUpdate=he,z.spotLightShadows.needsUpdate=he,z.rectAreaLights.needsUpdate=he,z.hemisphereLights.needsUpdate=he}function Eb(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(z,he,xe){ie.get(z.texture).__webglTexture=he,ie.get(z.depthTexture).__webglTexture=xe;let be=ie.get(z);be.__hasExternalTextures=!0,be.__autoAllocateDepthBuffer=xe===void 0,be.__autoAllocateDepthBuffer||j.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(z,he){let xe=ie.get(z);xe.__webglFramebuffer=he,xe.__useDefaultFramebuffer=he===void 0},this.setRenderTarget=function(z,he=0,xe=0){G=z,B=he,F=xe;let be=!0,fe=null,Qe=!1,ut=!1;if(z){let wt=ie.get(z);if(wt.__useDefaultFramebuffer!==void 0)ve.bindFramebuffer(W.FRAMEBUFFER,null),be=!1;else if(wt.__webglFramebuffer===void 0)L.setupRenderTarget(z);else if(wt.__hasExternalTextures)L.rebindTextures(z,ie.get(z.texture).__webglTexture,ie.get(z.depthTexture).__webglTexture);else if(z.depthBuffer){let St=z.depthTexture;if(wt.__boundDepthTexture!==St){if(St!==null&&ie.has(St)&&(z.width!==St.image.width||z.height!==St.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");L.setupDepthRenderbuffer(z)}}let Xt=z.texture;(Xt.isData3DTexture||Xt.isDataArrayTexture||Xt.isCompressedArrayTexture)&&(ut=!0);let rn=ie.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Array.isArray(rn[he])?fe=rn[he][xe]:fe=rn[he],Qe=!0):z.samples>0&&L.useMultisampledRTT(z)===!1?fe=ie.get(z).__webglMultisampledFramebuffer:Array.isArray(rn)?fe=rn[xe]:fe=rn,N.copy(z.viewport),S.copy(z.scissor),q=z.scissorTest}else N.copy(Ie).multiplyScalar(de).floor(),S.copy(Le).multiplyScalar(de).floor(),q=Ne;if(ve.bindFramebuffer(W.FRAMEBUFFER,fe)&&be&&ve.drawBuffers(z,fe),ve.viewport(N),ve.scissor(S),ve.setScissorTest(q),Qe){let wt=ie.get(z.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+he,wt.__webglTexture,xe)}else if(ut){let wt=ie.get(z.texture),Xt=he||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,wt.__webglTexture,xe||0,Xt)}k=-1},this.readRenderTargetPixels=function(z,he,xe,be,fe,Qe,ut){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=ie.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&ut!==void 0&&(Et=Et[ut]),Et){ve.bindFramebuffer(W.FRAMEBUFFER,Et);try{let wt=z.texture,Xt=wt.format,rn=wt.type;if(!te.textureFormatReadable(Xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!te.textureTypeReadable(rn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}he>=0&&he<=z.width-be&&xe>=0&&xe<=z.height-fe&&W.readPixels(he,xe,be,fe,tn.convert(Xt),tn.convert(rn),Qe)}finally{let wt=G!==null?ie.get(G).__webglFramebuffer:null;ve.bindFramebuffer(W.FRAMEBUFFER,wt)}}},this.readRenderTargetPixelsAsync=function(z,he,xe,be,fe,Qe,ut){return Ka(this,null,function*(){if(!(z&&z.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=ie.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&ut!==void 0&&(Et=Et[ut]),Et){let wt=z.texture,Xt=wt.format,rn=wt.type;if(!te.textureFormatReadable(Xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!te.textureTypeReadable(rn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(he>=0&&he<=z.width-be&&xe>=0&&xe<=z.height-fe){ve.bindFramebuffer(W.FRAMEBUFFER,Et);let St=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,St),W.bufferData(W.PIXEL_PACK_BUFFER,Qe.byteLength,W.STREAM_READ),W.readPixels(he,xe,be,fe,tn.convert(Xt),tn.convert(rn),0);let Bn=G!==null?ie.get(G).__webglFramebuffer:null;ve.bindFramebuffer(W.FRAMEBUFFER,Bn);let oi=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);return W.flush(),yield Vte(W,oi,4),W.bindBuffer(W.PIXEL_PACK_BUFFER,St),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,Qe),W.deleteBuffer(St),W.deleteSync(oi),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(z,he=null,xe=0){z.isTexture!==!0&&(mm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),he=arguments[0]||null,z=arguments[1]);let be=Math.pow(2,-xe),fe=Math.floor(z.image.width*be),Qe=Math.floor(z.image.height*be),ut=he!==null?he.x:0,Et=he!==null?he.y:0;L.setTexture2D(z,0),W.copyTexSubImage2D(W.TEXTURE_2D,xe,0,0,ut,Et,fe,Qe),ve.unbindTexture()},this.copyTextureToTexture=function(z,he,xe=null,be=null,fe=0){z.isTexture!==!0&&(mm("WebGLRenderer: copyTextureToTexture function signature has changed."),be=arguments[0]||null,z=arguments[1],he=arguments[2],fe=arguments[3]||0,xe=null);let Qe,ut,Et,wt,Xt,rn,St,Bn,oi,fi=z.isCompressedTexture?z.mipmaps[fe]:z.image;xe!==null?(Qe=xe.max.x-xe.min.x,ut=xe.max.y-xe.min.y,Et=xe.isBox3?xe.max.z-xe.min.z:1,wt=xe.min.x,Xt=xe.min.y,rn=xe.isBox3?xe.min.z:0):(Qe=fi.width,ut=fi.height,Et=fi.depth||1,wt=0,Xt=0,rn=0),be!==null?(St=be.x,Bn=be.y,oi=be.z):(St=0,Bn=0,oi=0);let Er=tn.convert(he.format),Hn=tn.convert(he.type),At;he.isData3DTexture?(L.setTexture3D(he,0),At=W.TEXTURE_3D):he.isDataArrayTexture||he.isCompressedArrayTexture?(L.setTexture2DArray(he,0),At=W.TEXTURE_2D_ARRAY):(L.setTexture2D(he,0),At=W.TEXTURE_2D),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,he.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,he.unpackAlignment);let Oo=W.getParameter(W.UNPACK_ROW_LENGTH),qn=W.getParameter(W.UNPACK_IMAGE_HEIGHT),ho=W.getParameter(W.UNPACK_SKIP_PIXELS),Is=W.getParameter(W.UNPACK_SKIP_ROWS),Ar=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,fi.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,fi.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,wt),W.pixelStorei(W.UNPACK_SKIP_ROWS,Xt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,rn);let jc=z.isDataArrayTexture||z.isData3DTexture,si=he.isDataArrayTexture||he.isData3DTexture;if(z.isRenderTargetTexture||z.isDepthTexture){let Ao=ie.get(z),za=ie.get(he),po=ie.get(Ao.__renderTarget),Rs=ie.get(za.__renderTarget);ve.bindFramebuffer(W.READ_FRAMEBUFFER,po.__webglFramebuffer),ve.bindFramebuffer(W.DRAW_FRAMEBUFFER,Rs.__webglFramebuffer);for(let Ko=0;Ko<Et;Ko++)jc&&W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,ie.get(z).__webglTexture,fe,rn+Ko),z.isDepthTexture?(si&&W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,ie.get(he).__webglTexture,fe,oi+Ko),W.blitFramebuffer(wt,Xt,Qe,ut,St,Bn,Qe,ut,W.DEPTH_BUFFER_BIT,W.NEAREST)):si?W.copyTexSubImage3D(At,fe,St,Bn,oi+Ko,wt,Xt,Qe,ut):W.copyTexSubImage2D(At,fe,St,Bn,oi+Ko,wt,Xt,Qe,ut);ve.bindFramebuffer(W.READ_FRAMEBUFFER,null),ve.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else si?z.isDataTexture||z.isData3DTexture?W.texSubImage3D(At,fe,St,Bn,oi,Qe,ut,Et,Er,Hn,fi.data):he.isCompressedArrayTexture?W.compressedTexSubImage3D(At,fe,St,Bn,oi,Qe,ut,Et,Er,fi.data):W.texSubImage3D(At,fe,St,Bn,oi,Qe,ut,Et,Er,Hn,fi):z.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,fe,St,Bn,Qe,ut,Er,Hn,fi.data):z.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,fe,St,Bn,fi.width,fi.height,Er,fi.data):W.texSubImage2D(W.TEXTURE_2D,fe,St,Bn,Qe,ut,Er,Hn,fi);W.pixelStorei(W.UNPACK_ROW_LENGTH,Oo),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,qn),W.pixelStorei(W.UNPACK_SKIP_PIXELS,ho),W.pixelStorei(W.UNPACK_SKIP_ROWS,Is),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Ar),fe===0&&he.generateMipmaps&&W.generateMipmap(At),ve.unbindTexture()},this.copyTextureToTexture3D=function(z,he,xe=null,be=null,fe=0){return z.isTexture!==!0&&(mm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),xe=arguments[0]||null,be=arguments[1]||null,z=arguments[2],he=arguments[3],fe=arguments[4]||0),mm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(z,he,xe,be,fe)},this.initRenderTarget=function(z){ie.get(z).__webglFramebuffer===void 0&&L.setupRenderTarget(z)},this.initTexture=function(z){z.isCubeTexture?L.setTextureCube(z,0):z.isData3DTexture?L.setTexture3D(z,0):z.isDataArrayTexture||z.isCompressedArrayTexture?L.setTexture2DArray(z,0):L.setTexture2D(z,0),ve.unbindTexture()},this.resetState=function(){B=0,F=0,G=null,ve.reset(),Jn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ol}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorspace=Fn._getDrawingBufferColorSpace(t),e.unpackColorSpace=Fn._getUnpackColorSpace()}};var Dy=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new Bt(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Pm=class extends hr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ju,this.environmentIntensity=1,this.environmentRotation=new ju,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Tm=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=_P,this.updateRanges=[],this.version=0,this.uuid=oa()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=oa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},co=new ne,Dm=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)co.fromBufferAttribute(this,e),co.applyMatrix4(t),this.setXYZ(e,co.x,co.y,co.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)co.fromBufferAttribute(this,e),co.applyNormalMatrix(t),this.setXYZ(e,co.x,co.y,co.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)co.fromBufferAttribute(this,e),co.transformDirection(t),this.setXYZ(e,co.x,co.y,co.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=ia(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=ii(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=ii(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=ii(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=ii(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=ii(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ia(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ia(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ia(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ia(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=ii(e,this.array),i=ii(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=ii(e,this.array),i=ii(i,this.array),r=ii(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=ii(e,this.array),i=ii(i,this.array),r=ii(r,this.array),o=ii(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return new Pi(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var pU=new ne,mU=new pn,gU=new pn,kse=new ne,_U=new an,sy=new ne,DS=new Xo,vU=new an,OS=new Wu,Oy=class extends Mi{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yL,this.bindMatrix=new an,this.bindMatrixInverse=new an,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ki),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,sy),this.boundingBox.expandByPoint(sy)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Xo),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,sy),this.boundingSphere.expandByPoint(sy)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),DS.copy(this.boundingSphere),DS.applyMatrix4(r),t.ray.intersectsSphere(DS)!==!1&&(vU.copy(r).invert(),OS.copy(t.ray).applyMatrix4(vU),!(this.boundingBox!==null&&OS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,OS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new pn,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===yL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lte?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;mU.fromBufferAttribute(r.attributes.skinIndex,t),gU.fromBufferAttribute(r.attributes.skinWeight,t),pU.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){let s=gU.getComponent(o);if(s!==0){let a=mU.getComponent(o);_U.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(kse.copy(pU).applyMatrix4(_U),s)}}return e.applyMatrix4(this.bindMatrixInverse)}},Om=class extends hr{constructor(){super(),this.isBone=!0,this.type="Bone"}},Ay=class extends Ms{constructor(t=null,e=1,i=1,r,o,s,a,l,u=Hr,f=Hr,h,m){super(null,s,a,l,u,f,r,o,h,m),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yU=new an,Fse=new an,Iy=class n{constructor(t=[],e=[]){this.uuid=oa(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new an)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new an;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=t.length;o<s;o++){let a=t[o]?t[o].matrixWorld:Fse;yU.multiplyMatrices(a,e[o]),yU.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new Ay(e,t,t,ys,ra);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let o=t.bones[i],s=e[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Om),this.bones.push(s),this.boneInverses.push(new an().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,o=e.length;r<o;r++){let s=e[r];t.bones.push(s.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Gu=class extends Pi{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Uf=new an,xU=new an,ay=[],bU=new Ki,Lse=new an,dm=new Mi,fm=new Xo,Ry=class extends Mi{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Gu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Lse)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ki),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Uf),bU.copy(t.boundingBox).applyMatrix4(Uf),this.boundingBox.union(bU)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Xo),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Uf),fm.copy(t.boundingSphere).applyMatrix4(Uf),this.boundingSphere.union(fm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=t*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(dm.geometry=this.geometry,dm.material=this.material,dm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fm.copy(this.boundingSphere),fm.applyMatrix4(i),t.ray.intersectsSphere(fm)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Uf),xU.multiplyMatrices(i,Uf),dm.matrixWorld=xU,dm.raycast(t,ay);for(let s=0,a=ay.length;s<a;s++){let l=ay[s];l.instanceId=o,l.object=this,e.push(l)}ay.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Gu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ay(new Float32Array(r*this.count),r,this.count,eT,ra));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*t;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var $u=class extends jr{static get type(){return"LineBasicMaterial"}constructor(t){super(),this.isLineBasicMaterial=!0,this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},Ny=new ne,ky=new ne,CU=new an,hm=new Wu,ly=new Xo,AS=new ne,MU=new ne,nh=class extends hr{constructor(t=new Do,e=new $u){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,o=e.count;r<o;r++)Ny.fromBufferAttribute(e,r-1),ky.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Ny.distanceTo(ky);t.setAttribute("lineDistance",new xs(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ly.copy(i.boundingSphere),ly.applyMatrix4(r),ly.radius+=o,t.ray.intersectsSphere(ly)===!1)return;CU.copy(r).invert(),hm.copy(t.ray).applyMatrix4(CU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){let p=Math.max(0,s.start),b=Math.min(f.count,s.start+s.count);for(let C=p,y=b-1;C<y;C+=u){let x=f.getX(C),T=f.getX(C+1),E=cy(this,t,hm,l,x,T);E&&e.push(E)}if(this.isLineLoop){let C=f.getX(b-1),y=f.getX(p),x=cy(this,t,hm,l,C,y);x&&e.push(x)}}else{let p=Math.max(0,s.start),b=Math.min(m.count,s.start+s.count);for(let C=p,y=b-1;C<y;C+=u){let x=cy(this,t,hm,l,C,C+1);x&&e.push(x)}if(this.isLineLoop){let C=cy(this,t,hm,l,b-1,p);C&&e.push(C)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function cy(n,t,e,i,r,o){let s=n.geometry.attributes.position;if(Ny.fromBufferAttribute(s,r),ky.fromBufferAttribute(s,o),e.distanceSqToSegment(Ny,ky,AS,MU)>i)return;AS.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(AS);if(!(l<t.near||l>t.far))return{distance:l,point:MU.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}var wU=new ne,EU=new ne,Fy=class extends nh{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,o=e.count;r<o;r+=2)wU.fromBufferAttribute(e,r),EU.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+wU.distanceTo(EU);t.setAttribute("lineDistance",new xs(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},ih=class extends nh{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},Am=class extends jr{static get type(){return"PointsMaterial"}constructor(t){super(),this.isPointsMaterial=!0,this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},SU=new an,NP=new Wu,uy=new Xo,dy=new ne,Ly=class extends hr{constructor(t=new Do,e=new Am){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),uy.copy(i.boundingSphere),uy.applyMatrix4(r),uy.radius+=o,t.ray.intersectsSphere(uy)===!1)return;SU.copy(r).invert(),NP.copy(t.ray).applyMatrix4(SU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let m=Math.max(0,s.start),p=Math.min(u.count,s.start+s.count);for(let b=m,C=p;b<C;b++){let y=u.getX(b);dy.fromBufferAttribute(h,y),PU(dy,y,l,r,t,e,this)}}else{let m=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let b=m,C=p;b<C;b++)dy.fromBufferAttribute(h,b),PU(dy,b,l,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function PU(n,t,e,i,r,o,s){let a=NP.distanceSqToPoint(n);if(a<e){let l=new ne;NP.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}var Fa=class extends jr{static get type(){return"MeshStandardMaterial"}constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qU,this.normalScale=new dn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ju,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Zo=class extends Fa{static get type(){return"MeshPhysicalMaterial"}constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new dn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}};function fy(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function Use(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Vse(n){function t(r,o){return n[r]-n[o]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function TU(n,t,e){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=e[o]*t;for(let l=0;l!==t;++l)r[s++]=n[a+l]}return r}function iV(n,t,e,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),e.push.apply(e,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(e,e.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),e.push(s)),o=n[r++];while(o!==void 0)}var Ac=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],o=e[i-1];e:{t:{let s;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=e[++i],t<r)break t}s=e.length;break n}if(!(t>=o)){let a=e[1];t<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=e[--i-1],t>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;t<e[a]?s=a:i=a+1}if(r=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=i[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},kP=class extends Ac{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bf,endingEnd:Bf}}intervalChanged_(t,e,i){let r=this.parameterPositions,o=t-2,s=t+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case zf:o=t,a=2*e-i;break;case vy:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case zf:s=t,l=2*i-e;break;case vy:s=1,l=i+r[1]-r[0];break;default:s=t-1,l=e}let u=(i-e)*.5,f=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,p=this._weightNext,b=(i-e)/(r-e),C=b*b,y=C*b,x=-m*y+2*m*C-m*b,T=(1+m)*y+(-1.5-2*m)*C+(-.5+m)*b+1,E=(-1-p)*y+(1.5+p)*C+.5*b,D=p*y-p*C;for(let V=0;V!==a;++V)o[V]=x*s[f+V]+T*s[u+V]+E*s[l+V]+D*s[h+V];return o}},Uy=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,f=(i-e)/(r-e),h=1-f;for(let m=0;m!==a;++m)o[m]=s[u+m]*h+s[l+m]*f;return o}},FP=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Cs=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=fy(e,this.TimeBufferType),this.values=fy(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:fy(t.times,Array),values:fy(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new FP(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Uy(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new kP(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Jf:e=this.InterpolantFactoryMethodDiscrete;break;case Qf:e=this.InterpolantFactoryMethodLinear;break;case nS:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jf;case this.InterpolantFactoryMethodLinear:return Qf;case this.InterpolantFactoryMethodSmooth:return nS}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<t;)++o;for(;s!==-1&&i[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),t=!1;break}s=l}if(r!==void 0&&Use(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===nS,o=t.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=t[a],f=t[a+1];if(u!==f&&(a!==1||u!==t[0]))if(r)l=!0;else{let h=a*i,m=h-i,p=h+i;for(let b=0;b!==i;++b){let C=e[h+b];if(C!==e[m+b]||C!==e[p+b]){l=!0;break}}}if(l){if(a!==s){t[s]=t[a];let h=a*i,m=s*i;for(let p=0;p!==i;++p)e[m+p]=e[h+p]}++s}}if(o>0){t[s]=t[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)e[l+u]=e[a+u];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Cs.prototype.TimeBufferType=Float32Array;Cs.prototype.ValueBufferType=Float32Array;Cs.prototype.DefaultInterpolation=Qf;var Ic=class extends Cs{constructor(t,e,i){super(t,e,i)}};Ic.prototype.ValueTypeName="bool";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=Jf;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;var Vy=class extends Cs{};Vy.prototype.ValueTypeName="color";var kl=class extends Cs{};kl.prototype.ValueTypeName="number";var LP=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-e)/(r-e),u=t*a;for(let f=u+a;u!==f;u+=4)Wr.slerpFlat(o,0,s,u-a,s,u,l);return o}},Fl=class extends Cs{InterpolantFactoryMethodLinear(t){return new LP(this.times,this.values,this.getValueSize(),t)}};Fl.prototype.ValueTypeName="quaternion";Fl.prototype.InterpolantFactoryMethodSmooth=void 0;var Rc=class extends Cs{constructor(t,e,i){super(t,e,i)}};Rc.prototype.ValueTypeName="string";Rc.prototype.ValueBufferType=Array;Rc.prototype.DefaultInterpolation=Jf;Rc.prototype.InterpolantFactoryMethodLinear=void 0;Rc.prototype.InterpolantFactoryMethodSmooth=void 0;var Ll=class extends Cs{};Ll.prototype.ValueTypeName="vector";var rh=class{constructor(t="",e=-1,i=[],r=oT){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=oa(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let s=0,a=i.length;s!==a;++s)e.push(zse(i[s]).scale(r));let o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=i.length;o!==s;++o)e.push(Cs.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let o=e.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=Vse(l);l=TU(l,1,f),u=TU(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new kl(".morphTargetInfluences["+e[a].name+"]",l,u).scale(1/i))}return new this(t,-1,s)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){let u=t[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],m=r[h];m||(r[h]=m=[]),m.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,m,p,b,C){if(p.length!==0){let y=[],x=[];iV(p,y,x,b),y.length!==0&&C.push(new h(m,y,x))}},r=[],o=t.name||"default",s=t.fps||30,a=t.blendMode,l=t.length||-1,u=t.hierarchy||[];for(let h=0;h<u.length;h++){let m=u[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){let p={},b;for(b=0;b<m.length;b++)if(m[b].morphTargets)for(let C=0;C<m[b].morphTargets.length;C++)p[m[b].morphTargets[C]]=-1;for(let C in p){let y=[],x=[];for(let T=0;T!==m[b].morphTargets.length;++T){let E=m[b];y.push(E.time),x.push(E.morphTarget===C?1:0)}r.push(new kl(".morphTargetInfluence["+C+"]",y,x))}l=p.length*s}else{let p=".bones["+e[h].name+"]";i(Ll,p+".position",m,"pos",r),i(Fl,p+".quaternion",m,"rot",r),i(Ll,p+".scale",m,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Bse(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return kl;case"vector":case"vector2":case"vector3":case"vector4":return Ll;case"color":return Vy;case"quaternion":return Fl;case"bool":case"boolean":return Ic;case"string":return Rc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function zse(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Bse(n.type);if(n.times===void 0){let e=[],i=[];iV(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var Aa={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},UP=class{constructor(t,e,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,m=u.length;h<m;h+=2){let p=u[h],b=u[h+1];if(p.global&&(p.lastIndex=0),p.test(f))return b}return null}}},Hse=new UP,lh=(()=>{class n{constructor(e){this.manager=e!==void 0?e:Hse,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(o,s){r.load(e,o,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Sl={},VP=class extends Error{constructor(t,e){super(t),this.response=e}},qu=class extends lh{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=Aa.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(Sl[t]!==void 0){Sl[t].push({onLoad:e,onProgress:i,onError:r});return}Sl[t]=[],Sl[t].push({onLoad:e,onProgress:i,onError:r});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Sl[t],h=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=m?parseInt(m):0,b=p!==0,C=0,y=new ReadableStream({start(x){T();function T(){h.read().then(({done:E,value:D})=>{if(E)x.close();else{C+=D.byteLength;let V=new ProgressEvent("progress",{lengthComputable:b,loaded:C,total:p});for(let B=0,F=f.length;B<F;B++){let G=f[B];G.onProgress&&G.onProgress(V)}x.enqueue(D),T()}},E=>{x.error(E)})}}});return new Response(y)}else throw new VP(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),m=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(m);return u.arrayBuffer().then(b=>p.decode(b))}}}).then(u=>{Aa.add(t,u);let f=Sl[t];delete Sl[t];for(let h=0,m=f.length;h<m;h++){let p=f[h];p.onLoad&&p.onLoad(u)}}).catch(u=>{let f=Sl[t];if(f===void 0)throw this.manager.itemError(t),u;delete Sl[t];for(let h=0,m=f.length;h<m;h++){let p=f[h];p.onError&&p.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var BP=class extends lh{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Aa.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;let a=Mm("img");function l(){f(),Aa.add(t,this),e&&e(this),o.manager.itemEnd(t)}function u(h){f(),r&&r(h),o.manager.itemError(t),o.manager.itemEnd(t)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}};var Gr=class extends lh{constructor(t){super(t)}load(t,e,i,r){let o=new Ms,s=new BP(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,e!==void 0&&e(o)},i,r),o}},oh=class extends hr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Bt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};var IS=new an,DU=new ne,OU=new ne,Im=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new dn(512,512),this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sm,this._frameExtents=new dn(1,1),this._viewportCount=1,this._viewports=[new pn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;DU.setFromMatrixPosition(t.matrixWorld),e.position.copy(DU),OU.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(OU),e.updateMatrixWorld(),IS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(IS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},zP=class extends Im{constructor(){super(new fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,i=eh*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||r!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},By=class extends oh{constructor(t,e,i=0,r=Math.PI/3,o=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(hr.DEFAULT_UP),this.updateMatrix(),this.target=new hr,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new zP}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},AU=new an,pm=new ne,RS=new ne,HP=class extends Im{constructor(){super(new fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new dn(4,2),this._viewportCount=6,this._viewports=[new pn(2,1,1,1),new pn(0,1,1,1),new pn(3,1,1,1),new pn(1,1,1,1),new pn(3,0,1,1),new pn(1,0,1,1)],this._cubeDirections=[new ne(1,0,0),new ne(-1,0,0),new ne(0,0,1),new ne(0,0,-1),new ne(0,1,0),new ne(0,-1,0)],this._cubeUps=[new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,1,0),new ne(0,0,1),new ne(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),pm.setFromMatrixPosition(t.matrixWorld),i.position.copy(pm),RS.copy(i.position),RS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(RS),i.updateMatrixWorld(),r.makeTranslation(-pm.x,-pm.y,-pm.z),AU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AU)}},Yu=class extends oh{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new HP}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},WP=class extends Im{constructor(){super(new ka(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},sh=class extends oh{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(hr.DEFAULT_UP),this.updateMatrix(),this.target=new hr,this.shadow=new WP}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},zy=class extends oh{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var Nc=class{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}};var Hy=class extends lh{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Aa.get(t);if(s!==void 0){if(o.manager.itemStart(t),s.then){s.then(u=>{e&&e(u),o.manager.itemEnd(t)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(t,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Aa.add(t,u),e&&e(u),o.manager.itemEnd(t),u}).catch(function(u){r&&r(u),Aa.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});Aa.add(t,l),o.manager.itemStart(t)}};var Wy=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=IU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=IU();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function IU(){return performance.now()}var jP=class{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,o,s;switch(e){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){let i=this.buffer,r=this.valueSize,o=t*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=e}else{s+=e;let a=e/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(t){let e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let e=this.valueSize,i=this.buffer,r=t*e+e,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let l=e*this._origIndex;this._mixBufferRegion(i,r,l,1-o,e)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let l=e,u=e+e;l!==u;++l)if(i[l]!==i[l+e]){a.setValue(i,r);break}}saveOriginalState(){let t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let o=i,s=r;o!==s;++o)e[o]=e[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)t[e+s]=t[i+s]}_slerp(t,e,i,r){Wr.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,o){let s=this._workIndex*o;Wr.multiplyQuaternionsFlat(t,s,t,e,t,i),Wr.slerpFlat(t,e,t,e,t,s,r)}_lerp(t,e,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let l=e+a;t[l]=t[l]*s+t[i+a]*r}}_lerpAdditive(t,e,i,r,o){for(let s=0;s!==o;++s){let a=e+s;t[a]=t[a]+t[i+s]*r}}},lT="\\[\\]\\.:\\/",Wse=new RegExp("["+lT+"]","g"),cT="[^"+lT+"]",jse="[^"+lT.replace("\\.","")+"]",Gse=/((?:WC+[\/:])*)/.source.replace("WC",cT),$se=/(WCOD+)?/.source.replace("WCOD",jse),qse=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cT),Yse=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cT),Xse=new RegExp("^"+Gse+$se+qse+Yse+"$"),Zse=["material","materials","bones","map"],GP=class{constructor(t,e,i){let r=i||Ni.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ni=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Wse,"")}static parseTrackName(e){let i=Xse.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Zse.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[i++]=r[o]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}let a=e[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=GP,n})();Ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ni.prototype.GetterByBindingType=[Ni.prototype._getValue_direct,Ni.prototype._getValue_array,Ni.prototype._getValue_arrayElement,Ni.prototype._getValue_toArray];Ni.prototype.SetterByBindingTypeAndVersioning=[[Ni.prototype._setValue_direct,Ni.prototype._setValue_direct_setNeedsUpdate,Ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_array,Ni.prototype._setValue_array_setNeedsUpdate,Ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_arrayElement,Ni.prototype._setValue_arrayElement_setNeedsUpdate,Ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_fromArray,Ni.prototype._setValue_fromArray_setNeedsUpdate,Ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var $P=class{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;let o=e.tracks,s=o.length,a=new Array(s),l={endingStart:Bf,endingEnd:Bf};for(let u=0;u!==s;++u){let f=o[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cte,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){let r=this._clip.duration,o=t._clip.duration,s=o/r,a=r/o;t.warp(1,s,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){let t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+i,u[0]=t/s,u[1]=e/s,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}let o=this._startTime;if(o!==null){let l=(t-o)*i;l<0||i===0?e=0:(this._startTime=null,e=i*l)}e*=this._updateTimeScale(t);let s=this._updateTime(e),a=this._updateWeight(t);if(a>0){let l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case dte:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulateAdditive(a);break;case oT:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){let e=this._clip.duration,i=this.loop,r=this.time+t,o=this._loopCount,s=i===ute;if(t===0)return o===-1?r:s&&(o&1)===1?e-r:r;if(i===rT){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=e||r<0){let a=Math.floor(r/e);r-=e*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){let u=t<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return e-r}return r}_setEndings(t,e,i){let r=this._interpolantSettings;i?(r.endingStart=zf,r.endingEnd=zf):(t?r.endingStart=this.zeroSlopeAtStart?zf:Bf:r.endingStart=vy,e?r.endingEnd=this.zeroSlopeAtEnd?zf:Bf:r.endingEnd=vy)}_scheduleFading(t,e,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=e,a[1]=o+t,l[1]=i,this}},Kse=new Float32Array(1),jy=class extends Rl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){let i=t._localRoot||this._root,r=t._clip.tracks,o=r.length,s=t._propertyBindings,a=t._interpolants,l=i.uuid,u=this._bindingsByRootAndName,f=u[l];f===void 0&&(f={},u[l]=f);for(let h=0;h!==o;++h){let m=r[h],p=m.name,b=f[p];if(b!==void 0)++b.referenceCount,s[h]=b;else{if(b=s[h],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,p));continue}let C=e&&e._propertyBindings[h].binding.parsedPath;b=new jP(Ni.create(i,p,C),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,p),s[h]=b}a[h].resultBuffer=b.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let i=(t._localRoot||this._root).uuid,r=t._clip.uuid,o=this._actionsByClip[r];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,r,i)}let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){let r=this._actions,o=this._actionsByClip,s=o[e];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=s;else{let a=s.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){let e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;let o=t._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],f=t._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),t._byClipCacheIndex=null;let h=a.actionByRoot,m=(t._localRoot||this._root).uuid;delete h[m],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){let e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackAction(t){let e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_addInactiveBinding(t,e,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[e];s===void 0&&(s={},r[e]=s),s[i]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){let e=this._bindings,i=t.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=e[e.length-1],u=t._cacheIndex;l._cacheIndex=u,e[u]=l,e.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(t){let e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackBinding(t){let e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_lendControlInterpolant(){let t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return i===void 0&&(i=new Uy(new Float32Array(2),new Float32Array(2),1,Kse),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){let e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=i,e[i]=o}clipAction(t,e,i){let r=e||this._root,o=r.uuid,s=typeof t=="string"?rh.findByName(r,t):t,a=s!==null?s.uuid:t,l=this._actionsByClip[a],u=null;if(i===void 0&&(s!==null?i=s.blendMode:i=oT),l!==void 0){let h=l.actionByRoot[o];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;let f=new $P(this,s,e,i);return this._bindAction(f,u),this._addInactiveAction(f,a,o),f}existingAction(t,e){let i=e||this._root,r=i.uuid,o=typeof t=="string"?rh.findByName(i,t):t,s=o?o.uuid:t,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let e=this._actions,i=this._nActiveActions,r=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1;for(let u=0;u!==i;++u)e[u]._update(r,t,o,s);let a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let e=this._actions,i=t.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){let u=s[a];this._deactivateAction(u);let f=u._cacheIndex,h=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=f,e[f]=h,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(t){let e=t.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,l=a[e];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}let r=this._bindingsByRootAndName,o=r[e];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){let i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}};var RU=new an,Gy=class{constructor(t,e,i=0,r=1/0){this.ray=new Wu(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new wm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return RU.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(RU),this}intersectObject(t,e=!0,i=[]){return qP(t,this,i,e),i.sort(NU),i}intersectObjects(t,e=!0,i=[]){for(let r=0,o=t.length;r<o;r++)qP(t[r],this,i,e);return i.sort(NU),i}};function NU(n,t){return n.distance-t.distance}function qP(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)qP(o[s],t,e,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:YP}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=YP);var Yr=class extends dn{constructor(t=0,e=0){super(),this.x=t,this.y=e}get h(){return this.x}set h(t){this.x=t}get v(){return this.y}set v(t){this.y=t}};var km=function(){var n=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(f){f.preventDefault(),i(++n%t.children.length)},!1);function e(f){return t.appendChild(f.dom),f}function i(f){for(var h=0;h<t.children.length;h++)t.children[h].style.display=h===f?"block":"none";n=f}var r=(performance||Date).now(),o=r,s=0,a=e(new km.Panel("FPS","#0ff","#002")),l=e(new km.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new km.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var f=(performance||Date).now();if(l.update(f-r,200),f>=o+1e3&&(a.update(s*1e3/(f-o),100),o=f,s=0,u)){var h=performance.memory;u.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:t,setMode:i}};km.Panel=function(n,t,e){var i=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,l=48*s,u=3*s,f=2*s,h=3*s,m=15*s,p=74*s,b=30*s,C=document.createElement("canvas");C.width=a,C.height=l,C.style.cssText="width:80px;height:48px";var y=C.getContext("2d");return y.font="bold "+9*s+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=e,y.fillRect(0,0,a,l),y.fillStyle=t,y.fillText(n,u,f),y.fillRect(h,m,p,b),y.fillStyle=e,y.globalAlpha=.9,y.fillRect(h,m,p,b),{dom:C,update:function(x,T){i=Math.min(i,x),r=Math.max(r,x),y.fillStyle=e,y.globalAlpha=1,y.fillRect(0,0,a,m),y.fillStyle=t,y.fillText(o(x)+" "+n+" ("+o(i)+"-"+o(r)+")",u,f),y.drawImage(C,h+s,m,p-s,b,h,m,p-s,b),y.fillRect(h+p-s,m,s,b),y.fillStyle=e,y.globalAlpha=.9,y.fillRect(h+p-s,m,s,o((1-x/T)*b))}}};var rV=km;var oV={setDevicePixelRatio:!1},sV={url:"/mazes/Loquitas.json",credits:"Maze designed by Cec\xEDlia Fernandes and Nikita.",scale:new ne(1,1,1)},aV={url:"/models/gltf/RobotExpressive/RobotExpressive.glb",credits:"Model and related code snippets created by <a href='https://www.patreon.com/quaternius' target='_blank' rel='noopener'>Tom\xE1s Laulh\xE9</a>. CC0 1.0. Modified by <a href='https://donmccurdy.com/' target='_blank' rel='noopener'>Don McCurdy</a>.",eyeHeight:.8,scale:new ne(.1,.1,.1),walkingSpeed:3,initialDirection:0,turningSpeed:250,runningFactor:2,keyCodes:{fixedView:"Digit1",firstPersonView:"Digit2",thirdPersonView:"Digit3",topView:"Digit4",viewMode:"KeyV",userInterface:"KeyU",miniMap:"KeyM",help:"KeyH",statistics:"KeyS",run:"KeyR",left:"ArrowLeft",right:"ArrowRight",backward:"ArrowDown",forward:"ArrowUp",jump:"KeyJ",yes:"KeyY",no:"KeyN",wave:"KeyW",punch:"KeyP",thumbsUp:"KeyT"}},lV={ambientLight:{color:16777215,intensity:1},pointLight1:{color:16777215,intensity:1,distance:0,position:new ne(0,0,0)},pointLight2:{color:16777215,intensity:1,distance:0,position:new ne(0,0,0)},directionalLight:{color:16777215,intensity:1,position:new ne(0,0,0),target:new ne(0,0,0)},spotLight:{color:16777215,intensity:1,distance:0,angle:Math.PI/3,penumbra:0,position:new ne(0,0,0),direction:0}},cV={enabled:!1,color:14737632,near:.1,far:14},ch={view:"fixed",multipleViewsViewport:new pn(0,0,1,1),target:new ne(0,0,0),initialOrientation:new Yr(135,-45),orientationMin:new Yr(-180,-90),orientationMax:new Yr(180,0),initialDistance:8,distanceMin:4,distanceMax:16,initialZoom:1,zoomMin:.5,zoomMax:2,initialFov:45,near:.01,far:100},uV={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new ne(.42,.269,1)},dV={url:"/models/gltf/RobotExpressive/hospital_bed.glb",scale:new ne(.5,1,.5),name:""},fV={url:"/models/gltf/RobotExpressive/patient.glb",scale:new ne(.0045,.01,.0045)},hV={url:"/models/gltf/RobotExpressive/exit_doors.glb",scale:new ne(1.35,1.4,1.35)};var Zy=kC(pV());function fo(n,...t){return Zy.mergeWith(n,...t,(e,i,r,o,s)=>{if(Zy.isArray(e))return e.concat(i);{let a=Object.getOwnPropertyDescriptor(o,r);a!==void 0&&!a.writable&&(a.value=i,a.writable=!0,Object.defineProperty(o,r,a),a.writable=!1,Object.defineProperty(o,r,a))}})}var Ky=class{constructor(t){for(let[a,l]of Object.entries(t))this[a]=l;let e=new Gr().load(this.textureUrl);e.colorSpace=Li,e.wrapS=sr,e.wrapT=sr,e.repeat.set(this.size.width,this.size.height),e.magFilter=wr,e.minFilter=Po;let i=null;this.normalMapUrl&&(i=new Gr().load(this.normalMapUrl),i.wrapS=sr,i.wrapT=sr,i.repeat.set(this.size.width,this.size.height));let r=null;this.bumpMapUrl&&(r=new Gr().load(this.bumpMapUrl),r.wrapS=sr,r.wrapT=sr,r.repeat.set(this.size.width,this.size.height));let o=new bs(this.size.width,this.size.height),s=new Fa({color:16777215,map:e,normalMap:i,bumpMap:r,bumpScale:this.bumpScale||.1,roughness:.8,metalness:.2});this.object=new Mi(o,s),this.object.rotation.x=-Math.PI/2,this.object.receiveShadow=this.shadow||!1,this.object.castShadow=this.shadow||!1,this.object.receiveShadow=!0}setShadow(t){this.object.castShadow=t}setTextureRepeat(t,e){this.object.material.map.repeat.set(t,e),this.object.material.normalMap&&this.object.material.normalMap.repeat.set(t,e),this.object.material.bumpMap&&this.object.material.bumpMap.repeat.set(t,e)}updateTexture(t){let e=new Gr().load(t);e.colorSpace=Li,e.wrapS=sr,e.wrapT=sr,this.object.material.map=e}updateNormalMap(t){let e=new Gr().load(t);e.wrapS=sr,e.wrapT=sr,this.object.material.normalMap=e}updateBumpMap(t,e=.1){let i=new Gr().load(t);i.wrapS=sr,i.wrapT=sr,this.object.material.bumpMap=i,this.object.material.bumpScale=e}};var Jy=class{constructor(t){let{textureUrl:e,bumpMapUrl:i,normalMapUrl:r,aoMapUrl:o,width:s=1,height:a=3,thickness:l=.05}=t,u=new Gr().load(e);u.colorSpace=Li,u.magFilter=wr,u.minFilter=Po;let f=i?new Gr().load(i):null,h=r?new Gr().load(r):null,m=o?new Gr().load(o):null,p=new Fa({color:16777215,map:u,bumpMap:f,bumpScale:.1,normalMap:h,aoMap:m,side:Yo});this.object=new ki,this.addFrontBackFaces(s,a,l,p),this.addSideFaces(s,a,l,p),this.addTopFace(s,l,p),this.addBottomFace(s,l,p),this.addTopCover(s,l,p)}addFrontBackFaces(t,e,i,r){let o=new bs(t,e);o.setAttribute("uv2",new Pi(o.attributes.uv.array,2));let s=new Mi(o,r);s.position.set(0,0,i/2),s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new Mi(o,r);a.position.set(0,0,-i/2),a.rotation.y=Math.PI,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addSideFaces(t,e,i,r){let o=new bs(i,e);o.setAttribute("uv2",new Pi(o.attributes.uv.array,2));let s=new Mi(o,r);s.position.set(-t/2,0,0),s.rotation.y=Math.PI/2,s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new Mi(o,r);a.position.set(t/2,0,0),a.rotation.y=-Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addTopFace(t,e,i){let r=new bs(t,e);r.setAttribute("uv2",new Pi(r.attributes.uv.array,2));let o=new Mi(r,i);o.rotation.x=-Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addBottomFace(t,e,i){let r=new bs(t,e);r.setAttribute("uv2",new Pi(r.attributes.uv.array,2));let o=new Mi(r,i);o.rotation.x=Math.PI/2,o.position.set(0,-e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addTopCover(t,e,i){let r=new bs(t,e);r.setAttribute("uv2",new Pi(r.attributes.uv.array,2));let o=new Mi(r,i);o.rotation.x=Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}};function uT(n,t){if(t===$U)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===Nm||t===qy){let e=n.getIndex();if(e===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===Nm)for(let s=1;s<=i;s++)r.push(e.getX(0)),r.push(e.getX(s)),r.push(e.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(e.getX(s)),r.push(e.getX(s+1)),r.push(e.getX(s+2))):(r.push(e.getX(s+2)),r.push(e.getX(s+1)),r.push(e.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var Es=class extends lh{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new _T(e)}),this.register(function(e){return new vT(e)}),this.register(function(e){return new PT(e)}),this.register(function(e){return new TT(e)}),this.register(function(e){return new DT(e)}),this.register(function(e){return new xT(e)}),this.register(function(e){return new bT(e)}),this.register(function(e){return new CT(e)}),this.register(function(e){return new MT(e)}),this.register(function(e){return new gT(e)}),this.register(function(e){return new wT(e)}),this.register(function(e){return new yT(e)}),this.register(function(e){return new ST(e)}),this.register(function(e){return new ET(e)}),this.register(function(e){return new pT(e)}),this.register(function(e){return new OT(e)}),this.register(function(e){return new AT(e)})}load(t,e,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=Nc.extractUrlBase(t);s=Nc.resolveURL(u,this.path)}else s=Nc.extractUrlBase(t);this.manager.itemStart(t);let a=function(u){r?r(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},l=new qu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{o.parse(u,s,function(f){e(f),o.manager.itemEnd(t)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let o,s={},a={},l=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===yV){try{s[Nn.KHR_BINARY_GLTF]=new IT(t)}catch(h){r&&r(h);return}o=JSON.parse(s[Nn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new VT(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],m=o.extensionsRequired||[];switch(h){case Nn.KHR_MATERIALS_UNLIT:s[h]=new mT;break;case Nn.KHR_DRACO_MESH_COMPRESSION:s[h]=new RT(o,this.dracoLoader);break;case Nn.KHR_TEXTURE_TRANSFORM:s[h]=new NT;break;case Nn.KHR_MESH_QUANTIZATION:s[h]=new kT;break;default:m.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,o){i.parse(t,e,r,o)})}};function Jse(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var Nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},pT=class{constructor(t){this.parser=t,this.name=Nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let o=e[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let o=e.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t],u,f=new Bt(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],$r);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new sh(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Yu(f),u.distance=h;break;case"spot":u=new By(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Ul(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(u),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,o=i.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(e.cache,a,l)})}},mT=class{constructor(){this.name=Nn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ra}extendParams(t,e,i){let r=[];t.color=new Bt(1,1,1),t.opacity=1;let o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],$r),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",o.baseColorTexture,Li))}return Promise.all(r)}},gT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(e.emissiveIntensity=o),Promise.resolve()}},_T=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(e.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new dn(a,a)}return Promise.all(o)}},vT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},yT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(e.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(e.iridescenceIOR=s.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},xT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];e.sheenColor=new Bt(0,0,0),e.sheenRoughness=0,e.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],$r)}return s.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(e,"sheenColorMap",s.sheenColorTexture,Li)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},bT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(e.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},CT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return e.attenuationColor=new Bt().setRGB(a[0],a[1],a[2],$r),Promise.all(o)}},MT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},wT=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return e.specularColor=new Bt().setRGB(a[0],a[1],a[2],$r),s.specularColorTexture!==void 0&&o.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,Li)),Promise.all(o)}},ET=class{constructor(t){this.parser=t,this.name=Nn.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return e.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(o)}},ST=class{constructor(t){this.parser=t,this.name=Nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Zo}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(e.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(e.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},PT=class{constructor(t){this.parser=t,this.name=Nn.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,s)}},TT=class{constructor(t){this.parser=t,this.name=Nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},DT=class{constructor(t){this.parser=t,this.name=Nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},OT=class{constructor(t){this.name=Nn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,m=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,m,r.mode,r.filter).then(function(p){return p.buffer}):s.ready.then(function(){let p=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(p),f,h,m,r.mode,r.filter),p})})}else return null}},AT=class{constructor(t){this.name=Nn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==ws.TRIANGLES&&u.mode!==ws.TRIANGLE_STRIP&&u.mode!==ws.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],m=u[0].count,p=[];for(let b of h){let C=new an,y=new ne,x=new Wr,T=new ne(1,1,1),E=new Ry(b.geometry,b.material,m);for(let D=0;D<m;D++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,D),l.ROTATION&&x.fromBufferAttribute(l.ROTATION,D),l.SCALE&&T.fromBufferAttribute(l.SCALE,D),E.setMatrixAt(D,C.compose(y,x,T));for(let D in l)if(D==="_COLOR_0"){let V=l[D];E.instanceColor=new Gu(V.array,V.itemSize,V.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&b.geometry.setAttribute(D,l[D]);hr.prototype.copy.call(E,b),this.parser.assignFinalMaterial(E),p.push(E)}return f.isGroup?(f.clear(),f.add(...p),f):p[0]}))}},yV="glTF",Lm=12,mV={JSON:1313821514,BIN:5130562},IT=class{constructor(t){this.name=Nn.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,Lm),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==yV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Lm,o=new DataView(t,Lm),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===mV.JSON){let u=new Uint8Array(t,Lm+s,a);this.content=i.decode(u)}else if(l===mV.BIN){let u=Lm+s;this.body=t.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},RT=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Nn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=LT[f]||f.toLowerCase();a[h]=s[f]}for(let f in t.attributes){let h=LT[f]||f.toLowerCase();if(s[f]!==void 0){let m=i.accessors[t.attributes[f]],p=dh[m.componentType];u[h]=p.name,l[h]=m.normalized===!0}}return e.getDependency("bufferView",o).then(function(f){return new Promise(function(h,m){r.decodeDracoFile(f,function(p){for(let b in p.attributes){let C=p.attributes[b],y=l[b];y!==void 0&&(C.normalized=y)}h(p)},a,u,$r,m)})})}},NT=class{constructor(){this.name=Nn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},kT=class{constructor(){this.name=Nn.KHR_MESH_QUANTIZATION}},Qy=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)e[s]=i[o+s];return e}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-e,h=(i-e)/f,m=h*h,p=m*h,b=t*u,C=b-u,y=-2*p+3*m,x=p-m,T=1-y,E=x-m+h;for(let D=0;D!==a;D++){let V=s[C+D+a],B=s[C+D+l]*f,F=s[b+D+a],G=s[b+D]*f;o[D]=T*V+E*B+y*F+x*G}return o}},Qse=new Wr,FT=class extends Qy{interpolate_(t,e,i,r){let o=super.interpolate_(t,e,i,r);return Qse.fromArray(o).normalize().toArray(o),o}},ws={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},gV={9728:Hr,9729:wr,9984:ZP,9985:_m,9986:Vf,9987:Po},_V={33071:Dl,33648:bm,10497:sr},dT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},LT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},kc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eae={CUBICSPLINE:void 0,LINEAR:Qf,STEP:Jf},fT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function tae(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Fa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ia})),n.DefaultMaterial}function Xu(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Ul(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function nae(n,t,e){let i=!1,r=!1,o=!1;for(let u=0,f=t.length;u<f;u++){let h=t[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=t.length;u<f;u++){let h=t[u];if(i){let m=h.POSITION!==void 0?e.getDependency("accessor",h.POSITION):n.attributes.position;s.push(m)}if(r){let m=h.NORMAL!==void 0?e.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(m)}if(o){let m=h.COLOR_0!==void 0?e.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(m)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],m=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function iae(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rae(n){let t,e=n.extensions&&n.extensions[Nn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+hT(e.attributes):t=n.indices+":"+hT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+hT(n.targets[i]);return t}function hT(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function UT(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function oae(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var sae=new an,VT=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Jse,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Gr(this.options.manager):this.textureLoader=new Hy(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Xu(o,a,r),Ul(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=e.length;r<o;r++){let s=e[r].joints;for(let a=0,l=s.length;a<l;a++)t[s[a]].isBone=!0}for(let r=0,o=t.length;r<o;r++){let s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let o=t(e[r]);o&&i.push(o)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(e)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Nn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(Nc.resolveURL(e.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,o=e.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let s=dT[r.type],a=dh[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new Pi(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=dT[r.type],u=dh[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,m=r.byteOffset||0,p=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0,C,y;if(p&&p!==h){let x=Math.floor(m/p),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+x+":"+r.count,E=e.cache.get(T);E||(C=new u(a,x*p,r.count*p/f),E=new Tm(C,p/f),e.cache.add(T,E)),y=new Dm(E,l,m%p/f,b)}else a===null?C=new u(r.count*l):C=new u(a,m,r.count*l),y=new Pi(C,l,b);if(r.sparse!==void 0){let x=dT.SCALAR,T=dh[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,D=r.sparse.values.byteOffset||0,V=new T(s[1],E,r.sparse.count*x),B=new u(s[2],D,r.sparse.count*l);a!==null&&(y=new Pi(y.array.slice(),y.itemSize,y.normalized)),y.normalized=!1;for(let F=0,G=V.length;F<G;F++){let k=V[F];if(y.setX(k,B[F*l]),l>=2&&y.setY(k,B[F*l+1]),l>=3&&y.setZ(k,B[F*l+2]),l>=4&&y.setW(k,B[F*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}y.normalized=b}return y})}loadTexture(t){let e=this.json,i=this.options,o=e.textures[t].source,s=e.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,e,i){let r=this,o=this.json,s=o.textures[t],a=o.images[e],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(e,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let m=(o.samplers||{})[s.sampler]||{};return f.magFilter=gV[m.magFilter]||wr,f.minFilter=gV[m.minFilter]||Po,f.wrapS=_V[m.wrapS]||sr,f.wrapT=_V[m.wrapT]||sr,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==Hr&&f.minFilter!==wr,r.associations.set(f,{textures:t}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(t,e){let i=this,r=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(h=>h.clone());let s=r.images[t],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let m=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(m),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(m,p){let b=m;e.isImageBitmapLoader===!0&&(b=function(C){let y=new Ms(C);y.needsUpdate=!0,m(y)}),e.load(Nc.resolveURL(h,o.path),b,void 0,p)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Ul(h,s),h.userData.mimeType=s.mimeType||oae(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[t]=f,f}assignTexture(t,e,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[Nn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Nn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[Nn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),t[e]=s,s})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,o=e.attributes.color!==void 0,s=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Am,jr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new $u,jr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}t.material=i}getMaterialType(){return Fa}loadMaterial(t){let e=this,i=this.json,r=this.extensions,o=i.materials[t],s,a={},l=o.extensions||{},u=[];if(l[Nn.KHR_MATERIALS_UNLIT]){let h=r[Nn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,e))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new Bt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let m=h.baseColorFactor;a.color.setRGB(m[0],m[1],m[2],$r),a.opacity=m[3]}h.baseColorTexture!==void 0&&u.push(e.assignTexture(a,"map",h.baseColorTexture,Li)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(e.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(e.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=Yo);let f=o.alphaMode||fT.OPAQUE;if(f===fT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===fT.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Ra&&(u.push(e.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new dn(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Ra&&(u.push(e.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Ra){let h=o.emissiveFactor;a.emissive=new Bt().setRGB(h[0],h[1],h[2],$r)}return o.emissiveTexture!==void 0&&s!==Ra&&u.push(e.assignTexture(a,"emissiveMap",o.emissiveTexture,Li)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Ul(h,o),e.associations.set(h,{materials:t}),o.extensions&&Xu(r,h,o),h})}createUniqueName(t){let e=Ni.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return vV(l,a,e)})}let s=[];for(let a=0,l=t.length;a<l;a++){let u=t[a],f=rae(u),h=r[f];if(h)s.push(h.promise);else{let m;u.extensions&&u.extensions[Nn.KHR_DRACO_MESH_COMPRESSION]?m=o(u):m=vV(new Do,u,e),r[f]={primitive:u,promise:m},s.push(m)}}return Promise.all(s)}loadMesh(t){let e=this,i=this.json,r=this.extensions,o=i.meshes[t],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?tae(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(e.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let p=0,b=f.length;p<b;p++){let C=f[p],y=s[p],x,T=u[p];if(y.mode===ws.TRIANGLES||y.mode===ws.TRIANGLE_STRIP||y.mode===ws.TRIANGLE_FAN||y.mode===void 0)x=o.isSkinnedMesh===!0?new Oy(C,T):new Mi(C,T),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),y.mode===ws.TRIANGLE_STRIP?x.geometry=uT(x.geometry,qy):y.mode===ws.TRIANGLE_FAN&&(x.geometry=uT(x.geometry,Nm));else if(y.mode===ws.LINES)x=new Fy(C,T);else if(y.mode===ws.LINE_STRIP)x=new nh(C,T);else if(y.mode===ws.LINE_LOOP)x=new ih(C,T);else if(y.mode===ws.POINTS)x=new Ly(C,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(x.geometry.morphAttributes).length>0&&iae(x,o),x.name=e.createUniqueName(o.name||"mesh_"+t),Ul(x,o),y.extensions&&Xu(r,x,y),e.assignFinalMaterial(x),h.push(x)}for(let p=0,b=h.length;p<b;p++)e.associations.set(h[p],{meshes:t,primitives:p});if(h.length===1)return o.extensions&&Xu(r,h[0],o),h[0];let m=new ki;o.extensions&&Xu(r,m,o),e.associations.set(m,{meshes:t});for(let p=0,b=h.length;p<b;p++)m.add(h[p]);return m})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new fr(Or.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new ka(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Ul(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,o=e.joints.length;r<o;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let m=new an;o!==null&&m.fromArray(o.array,u*16),l.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[u])}return new Iy(a,l)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],o=r.name?r.name:"animation_"+t,s=[],a=[],l=[],u=[],f=[];for(let h=0,m=r.channels.length;h<m;h++){let p=r.channels[h],b=r.samplers[p.sampler],C=p.target,y=C.node,x=r.parameters!==void 0?r.parameters[b.input]:b.input,T=r.parameters!==void 0?r.parameters[b.output]:b.output;C.node!==void 0&&(s.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",x)),l.push(this.getDependency("accessor",T)),u.push(b),f.push(C))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let m=h[0],p=h[1],b=h[2],C=h[3],y=h[4],x=[];for(let T=0,E=m.length;T<E;T++){let D=m[T],V=p[T],B=b[T],F=C[T],G=y[T];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();let k=i._createAnimationTracks(D,V,B,F,G);if(k)for(let P=0;P<k.length;P++)x.push(k[P])}return new rh(o,void 0,x)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],o=i._loadNodeShallow(t),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],m=u[2];m!==null&&f.traverse(function(p){p.isSkinnedMesh&&p.bind(m,sae)});for(let p=0,b=h.length;p<b;p++)f.add(h[p]);return f})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let o=e.nodes[t],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){a.push(u)}),this.nodeCache[t]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Om:u.length>1?f=new ki:u.length===1?f=u[0]:f=new hr,f!==u[0])for(let h=0,m=u.length;h<m;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Ul(f,o),o.extensions&&Xu(i,f,o),o.matrix!==void 0){let h=new an;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=t,f}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,o=new ki;i.name&&(o.name=r.createUniqueName(i.name)),Ul(o,i),i.extensions&&Xu(e,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[m,p]of r.associations)(m instanceof jr||m instanceof Ms)&&h.set(m,p);return f.traverse(m=>{let p=r.associations.get(m);p!=null&&h.set(m,p)}),h};return r.associations=u(o),o})}_createAnimationTracks(t,e,i,r,o){let s=[],a=t.name?t.name:t.uuid,l=[];kc[o.path]===kc.weights?t.traverse(function(m){m.morphTargetInfluences&&l.push(m.name?m.name:m.uuid)}):l.push(a);let u;switch(kc[o.path]){case kc.weights:u=kl;break;case kc.rotation:u=Fl;break;case kc.position:case kc.scale:u=Ll;break;default:switch(i.itemSize){case 1:u=kl;break;case 2:case 3:default:u=Ll;break}break}let f=r.interpolation!==void 0?eae[r.interpolation]:Qf,h=this._getArrayFromAccessor(i);for(let m=0,p=l.length;m<p;m++){let b=new u(l[m]+"."+kc[o.path],e.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),s.push(b)}return s}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=UT(e.constructor),r=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o++)r[o]=e[o]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof Fl?FT:Qy;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function aae(n,t,e){let i=t.attributes,r=new Ki;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new ne(l[0],l[1],l[2]),new ne(u[0],u[1],u[2])),a.normalized){let f=UT(dh[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=t.targets;if(o!==void 0){let a=new ne,l=new ne;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let m=e.json.accessors[h.POSITION],p=m.min,b=m.max;if(p!==void 0&&b!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(b[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(b[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(b[2]))),m.normalized){let C=UT(dh[m.componentType]);l.multiplyScalar(C)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new Xo;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function vV(n,t,e){let i=t.attributes,r=[];function o(s,a){return e.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=LT[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(t.indices!==void 0&&!n.index){let s=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(s)}return Fn.workingColorSpace!==$r&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Fn.workingColorSpace}" not supported.`),Ul(n,t),aae(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?nae(n,t.targets,e):n})}var Lxe={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new ne(1,1,2)},Zu=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ki,this.isLoaded=!1,new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ki().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}open(){this.isLoaded&&(this.object.rotation.y=Math.PI/2,this.boundingBox.setFromObject(this.object))}isTrespassing(t){if(this.isLoaded){let e=new Ki().setFromObject(t);return this.boundingBox.intersectsBox(e)}return!1}blockMovementIfTrespassing(t){this.isTrespassing(t)&&(console.log("Movement blocked: Door is in the way!"),t.position.copy(t.previousPosition))}};var ex=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ki,this.tables=[],new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0,o.name=this.name||"Table",o.isTable=!0)}),r.scale.copy(this.scale),this.object.add(r),this.tables.push(this.object)},void 0,i=>{console.error("Error loading the table model:",i)})}addToScene(t){this.tables.forEach(e=>t.add(e))}handleRaycast(t,e){let r=t.intersectObjects(this.tables,!0).find(o=>o.object.isTable);r&&e&&e(r.object)}};var Hxe={url:"/models/gltf/RobotExpressive/patient.glb",scale:new ne(1,1,1)},tx=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ki,new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var nx=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ki,this.isLoaded=!1,new Es().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ki().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}};var ix=class{constructor(t,e,i,r,o,s){this.onLoad=function(l){this.map=l.map,this.doorMap=l.doorMap,this.tableMap=l.tableMap,this.size=l.size,this.doorParameters=e,this.tableParameters=i,this.humanParameters=r,this.exitDoorParameters=o,this.roomParameters=s,this.initialPosition=this.cellToCartesian(l.initialPosition),this.initialDirection=l.initialDirection,this.object=new ki,this.ground=new Ky({textureUrl:l.groundTextureUrl,size:l.size}),this.object.add(this.ground.object),this.wall=new Jy({textureUrl:l.wallTextureUrl});for(let u=0;u<=l.size.height;u++)for(let f=0;f<=l.size.width;f++){let h,m=Math.floor(l.size.height/2),p=Math.floor(l.size.width/2);u<m&&f<p?h=0:u<m&&f>=p?h=1:u>=m&&f<p?h=2:h=3;let b=s[h];if(l.map[u][f]===2||l.map[u][f]===3){let C=this.wall.object.clone();C.position.set(f-l.size.width/2+.5,.5,u-l.size.height/2),this.object.add(C)}if(l.map[u][f]===1||l.map[u][f]===3){let C=this.wall.object.clone();C.rotateY(Math.PI/2),C.position.set(f-l.size.width/2,.5,u-l.size.height/2+.5),this.object.add(C)}if(l.map[u][f]===4&&!b.isOccupied){let C=new Zu(this.doorParameters);C.object.position.set(f-l.size.width/2+.5,.5,u-l.size.height/2),C.object.scale.set(.0035,.00635,0),C.object.translateY(-.6),C.object.translateX(.5),l.doorMap[u][f]===1?C.object.rotateY(-Math.PI/2):l.doorMap[u][f]===2&&(C.object.translateZ(-.029),C.object.rotateY(Math.PI/2)),this.object.add(C.object)}if(l.map[u][f]===4&&b.isOccupied){let C=new Zu(this.doorParameters);C.object.position.set(f-l.size.width/2+.5,.5,u-l.size.height/2),C.object.scale.set(.0035,.00635,0),C.object.translateY(-.6),C.object.translateX(.5),l.map[u][f]===1?C.object.translateZ(.3):l.map[u][f]===2&&C.object.translateZ(-.029),this.object.add(C.object)}if(this.map[u][f]===5){let C=new ex({url:this.tableParameters.url,scale:new ne(.5,1,.5),name:`Table_${u}_${f}`});if(console.log("Table added: "+C.name),C.object.position.set(f-l.size.width/2+.5,.5,u-l.size.height/2),C.object.scale.set(1,.68,1),C.object.translateX(-.6),C.object.translateY(-.2),this.object.add(C.object),b.isOccupied){console.log("Human added: "+b.isOccupied);let y=new tx(this.humanParameters);y.object.position.set(f-l.size.width/2+.5,.5,u-l.size.height/2),y.object.scale.set(1.2,1,1),y.object.rotateY(Math.PI/2),y.object.translateY(.29),y.object.translateZ(-.67),this.object.add(y.object)}}if(this.map[u][f]===6){let C=new nx(this.exitDoorParameters);C.object.position.set(f-l.size.width/2+.5,.5,u-l.size.height/2),C.object.translateX(-.34),C.object.translateY(-1),C.object.translateZ(-.05),this.object.add(C.object)}}this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(l,u){console.log("Resource '"+l+"' "+(100*u.loaded/u.total).toFixed(0)+"% loaded.")},this.onError=function(l,u){console.error("Error loading resource "+l+" ("+u+").")};for(let[l,u]of Object.entries(t))this[l]=u;this.loaded=!1,Aa.enabled=!0;let a=new qu;a.setResponseType("json"),a.load(this.url,l=>this.onLoad(l),l=>this.onProgress(this.url,l),l=>this.onError(this.url,l))}cellToCartesian(t){return new ne((t[1]-this.size.width/2+.5)*this.scale.x,0,(t[0]-this.size.height/2+.5)*this.scale.z)}cartesianToCell(t){return[Math.floor(t.z/this.scale.z+this.size.height/2),Math.floor(t.x/this.scale.x+this.size.width/2)]}distanceToWestWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?t.x-this.cellToCartesian(e).x+this.scale.x/2:1/0}distanceToEastWall(t){let e=this.cartesianToCell(t);return e[1]++,this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).x-this.scale.x/2-t.x:1/0}distanceToNorthWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?t.z-this.cellToCartesian(e).z+this.scale.z/2:1/0}distanceToSouthWall(t){let e=this.cartesianToCell(t);return e[0]++,this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToDoor(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===4&&r.isOccupied?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}getRoomIndex(t){let e=Math.floor(this.size.height/2),i=Math.floor(this.size.width/2);return t[0]<e&&t[1]<i?0:t[0]<e&&t[1]>=i?1:t[0]>=e&&t[1]<i?2:3}};var rx=class{constructor(t){this.onLoad=function(i){this.object=i.scene,this.animations=i.animations,this.setShadow(this.object);let r=new Ki;r.setFromObject(this.object);let o=new ne;r.getSize(o),o.x=3,o.y=4.4,o.z=2.6,this.radius=o.x/2*this.scale.x,this.eyeHeight*=o.y*this.scale.y,this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(i,r){console.log("Resource '"+i+"' "+(100*r.loaded/r.total).toFixed(0)+"% loaded.")},this.onError=function(i,r){console.error("Error loading resource "+i+" ("+r+").")};for(let[i,r]of Object.entries(t))this[i]=r;this.initialDirection=Or.degToRad(this.initialDirection),this.keyStates={fixedView:!1,firstPersonView:!1,thirdPersonView:!1,topView:!1,viewMode:!1,miniMap:!1,statistics:!1,userInterface:!1,help:!1,run:!1,left:!1,right:!1,backward:!1,forward:!1,jump:!1,yes:!1,no:!1,wave:!1,punch:!1,thumbsUp:!1},this.loaded=!1,new Es().load(this.url,i=>this.onLoad(i),i=>this.onProgress(this.url,i),i=>this.onError(this.url,i))}setShadow(t){t.traverseVisible(function(e){e instanceof hr&&(e.castShadow=!0,e.receiveShadow=!1)})}};var ox=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new ki,this.object.ambientLight=new zy(this.ambientLight.color,this.ambientLight.intensity),this.object.add(this.object.ambientLight),this.object.pointLight1=new Yu(this.pointLight1.color,this.pointLight1.intensity,this.pointLight1.distance),this.object.pointLight1.position.set(this.pointLight1.position.x,this.pointLight1.position.y,this.pointLight1.position.z),this.object.pointLight1.castShadow=!0,this.object.pointLight1.shadow.mapSize.width=512,this.object.pointLight1.shadow.mapSize.height=512,this.object.pointLight1.shadow.camera.near=5,this.object.pointLight1.shadow.camera.far=15,this.object.pointLight1.visible=!1,this.object.add(this.object.pointLight1),this.object.pointLight2=new Yu(this.pointLight2.color,this.pointLight2.intensity,this.pointLight2.distance),this.object.pointLight2.position.set(this.pointLight2.position.x,this.pointLight2.position.y,this.pointLight2.position.z),this.object.pointLight2.castShadow=!0,this.object.pointLight2.shadow.mapSize.width=512,this.object.pointLight2.shadow.mapSize.height=512,this.object.pointLight2.shadow.camera.near=5,this.object.pointLight2.shadow.camera.far=15,this.object.pointLight2.visible=!1,this.object.add(this.object.pointLight2),this.object.directionalLight=new sh(this.directionalLight.color,this.directionalLight.intensity),this.object.directionalLight.castShadow=!0,this.object.directionalLight.position.set(this.directionalLight.position.x,this.directionalLight.position.y,this.directionalLight.position.z),this.object.directionalLight.target.position.set(this.directionalLight.target.x,this.directionalLight.target.y,this.directionalLight.target.z),this.object.add(this.object.directionalLight),this.object.add(this.object.directionalLight.target)}};var sx=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new Dy(this.color,this.near,this.far)}};var Fc=class{constructor(t,e,i){for(let[r,o]of Object.entries(t))this[r]=o;this.viewport=this.multipleViewsViewport.clone(),this.target=this.target.clone(),this.initialHalfSize=Math.tan(Or.degToRad(this.initialFov/2))*this.initialDistance,this.playerDirection=0,this.perspective=new fr,this.orthographic=new ka,this.setWindowSize(e,i),this.initialize()}setViewingParameters(){let t=new Yr(this.orientation.h+this.playerDirection,this.orientation.v),e=Math.cos(Or.degToRad(t.h)),i=Math.sin(Or.degToRad(t.h)),r=Math.cos(Or.degToRad(t.v)),o=Math.sin(Or.degToRad(t.v)),s=this.target.x,a=this.target.y,l=this.target.z;this.view!="first-person"&&(s-=this.distance*i*r,a-=this.distance*o,l-=this.distance*e*r),this.perspective.position.set(s,a,l),this.orthographic.position.set(s,a,l);let u=-i*o,f=r,h=-e*o;this.perspective.up.set(u,f,h),this.orthographic.up.set(u,f,h);let m=this.target.clone();this.view=="first-person"&&(m.x+=i*r,m.y+=o,m.z+=e*r),this.perspective.lookAt(m),this.orthographic.lookAt(m)}setProjectionParameters(){let t,e,i,r,o;this.aspectRatio<1?(t=2*Or.radToDeg(Math.atan(Math.tan(Or.degToRad(this.initialFov/2))/this.aspectRatio)),i=this.initialHalfSize,e=-i,r=i/this.aspectRatio,o=-r):(t=this.initialFov,r=this.initialHalfSize,o=-r,i=r*this.aspectRatio,e=-i),this.perspective.fov=t,this.perspective.aspect=this.aspectRatio,this.perspective.near=this.near,this.perspective.far=this.far,this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.left=e,this.orthographic.right=i,this.orthographic.top=r,this.orthographic.bottom=o,this.orthographic.near=this.near,this.orthographic.far=this.far,this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}setActiveProjection(t){this.projection=t,this.projection!="orthographic"?this.object=this.perspective:this.object=this.orthographic}initialize(){this.orientation=this.initialOrientation.clone(),this.distance=this.initialDistance,this.zoom=this.initialZoom,this.setViewingParameters(),this.setProjectionParameters(),this.view!="mini-map"?this.setActiveProjection("perspective"):this.setActiveProjection("orthographic")}getViewport(){let t=Math.min(this.windowWidth,this.windowHeight),e,i,r=this.viewport.width,o=this.viewport.height;return this.view!="mini-map"?(e=this.viewport.x*(1-this.viewport.width),i=this.viewport.y*(1-this.viewport.height),this.windowWidth<this.windowHeight?(e*=t,i*=this.windowHeight,r*=t,o*=this.windowHeight):(e*=this.windowWidth,i*=t,r*=this.windowWidth,o*=t)):(r*=t,o*=t,e=this.viewport.x*(this.windowWidth-r),i=this.viewport.y*(this.windowHeight-o)),new pn(e,i,r,o)}setViewport(t){t?this.viewport=this.multipleViewsViewport.clone():this.viewport=new pn(0,0,1,1);let e=this.getViewport();this.aspectRatio=e.width/e.height,this.setProjectionParameters()}setWindowSize(t,e){this.windowWidth=t,this.windowHeight=e;let i=this.getViewport();this.aspectRatio=i.width/i.height}updateWindowSize(t,e){this.setWindowSize(t,e),this.setProjectionParameters()}setTarget(t){this.target.copy(t),this.setViewingParameters()}updateTarget(t){this.setTarget(this.target.add(t))}setOrientation(t){this.orientation.copy(t).clamp(this.orientationMin,this.orientationMax),this.setViewingParameters()}updateOrientation(t){this.setOrientation(this.orientation.add(t))}setDistance(t){this.distance=Or.clamp(t,this.distanceMin,this.distanceMax),this.setViewingParameters()}updateDistance(t){this.setDistance(this.distance+t)}setZoom(t){this.zoom=Or.clamp(t,this.zoomMin,this.zoomMax),this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}updateZoom(t){this.setZoom(this.zoom+t)}};var ax=class{constructor(t,e){this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.mixer=new jy(t),this.actionInProgress=!1,this.actions={};for(let i=0;i<e.length;i++){let r=e[i],o=this.mixer.clipAction(r);this.actions[r.name]=o,(this.states.indexOf(r.name)>=4||this.emotes.indexOf(r.name)>=0)&&(o.clampWhenFinished=!0,o.loop=rT)}this.activeName="Idle",this.actions[this.activeName].play()}fadeToAction(t,e){if(this.activeName!=t&&!this.actionInProgress){let i=this.activeName;this.activeName=t,this.actions[i].fadeOut(e),this.actions[this.activeName].reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(e).play(),this.activeName!="Idle"&&this.activeName!="Walking"&&this.activeName!="Running"&&(this.mixer.addEventListener("finished",r=>this.actionFinished(r)),this.actionInProgress=!0)}}actionFinished(){this.actionInProgress&&(this.actionInProgress=!1,this.mixer.removeEventListener("finished",this.actionInProgress))}update(t){this.mixer&&this.mixer.update(t)}};var Lc=class n{constructor(t,e,i,r,o="div"){this.parent=t,this.object=e,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id="lil-gui-name-"+ ++n.nextNameID,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){let e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},BT=class extends Lc{constructor(t,e,i){super(t,e,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function zT(n){let t,e;return(t=n.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!e&&"#"+e}var lae={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:zT,toHexString:zT},Vm={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},cae={isPrimitive:!1,match:Array.isArray,fromHexString(n,t,e=1){let i=Vm.fromHexString(n);t[0]=(i>>16&255)/255*e,t[1]=(i>>8&255)/255*e,t[2]=(255&i)/255*e},toHexString:([n,t,e],i=1)=>Vm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},uae={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,t,e=1){let i=Vm.fromHexString(n);t.r=(i>>16&255)/255*e,t.g=(i>>8&255)/255*e,t.b=(255&i)/255*e},toHexString:({r:n,g:t,b:e},i=1)=>Vm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},dae=[lae,Vm,cae,uae],HT=class extends Lc{constructor(t,e,i,r){var o;super(t,e,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(o=this.initialValue,dae.find(s=>s.match(o))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let s=zT(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){let e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Um=class extends Lc{constructor(t,e,i){super(t,e,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},WT=class extends Lc{constructor(t,e,i,r,o,s){super(t,e,i,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){let t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;let t=f=>{let h=parseFloat(this.$input.value);isNaN(h)||(this._snapClampSetValue(h+f),this.$input.value=this.getValue())},e,i,r,o,s,a=!1,l=f=>{if(a){let h=f.clientX-e,m=f.clientY-i;Math.abs(m)>5?(f.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(h)>5&&u()}if(!a){let h=f.clientY-r;s-=h*this._step*this._arrowKeyMultiplier(f),o+s>this._max?s=this._max-o:o+s<this._min&&(s=this._min-o),this._snapClampSetValue(o+s)}r=f.clientY},u=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u)};this.$input.addEventListener("input",()=>{let f=parseFloat(this.$input.value);isNaN(f)||(this._stepExplicit&&(f=this._snap(f)),this.setValue(this._clamp(f)))}),this.$input.addEventListener("keydown",f=>{f.code==="Enter"&&this.$input.blur(),f.code==="ArrowUp"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f))),f.code==="ArrowDown"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f)*-1))}),this.$input.addEventListener("wheel",f=>{this._inputFocused&&(f.preventDefault(),t(this._step*this._normalizeMouseWheel(f)))},{passive:!1}),this.$input.addEventListener("mousedown",f=>{e=f.clientX,i=r=f.clientY,a=!0,o=this.getValue(),s=0,window.addEventListener("mousemove",l),window.addEventListener("mouseup",u)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let t=m=>{let p=this.$slider.getBoundingClientRect(),b=(C=m,y=p.left,x=p.right,T=this._min,E=this._max,(C-y)/(x-y)*(E-T)+T);var C,y,x,T,E;this._snapClampSetValue(b)},e=m=>{t(m.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)},r,o,s=!1,a=m=>{m.preventDefault(),this._setDraggingStyle(!0),t(m.touches[0].clientX),s=!1},l=m=>{if(s){let p=m.touches[0].clientX-r,b=m.touches[0].clientY-o;Math.abs(p)>Math.abs(b)?a(m):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",u))}else m.preventDefault(),t(m.touches[0].clientX)},u=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",u)},f=this._callOnFinishChange.bind(this),h;this.$slider.addEventListener("mousedown",m=>{this._setDraggingStyle(!0),t(m.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",m=>{m.touches.length>1||(this._hasScrollBar?(r=m.touches[0].clientX,o=m.touches[0].clientY,s=!0):a(m),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",u))},{passive:!1}),this.$slider.addEventListener("wheel",m=>{if(Math.abs(m.deltaX)<Math.abs(m.deltaY)&&this._hasScrollBar)return;m.preventDefault();let p=this._normalizeMouseWheel(m)*this._step;this._snapClampSetValue(this.getValue()+p),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(f,400)},{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle("lil-gui-"+e,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:i}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,i=-t.wheelDelta/120,i*=this._stepExplicit?1:10),e+-i}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){let e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){let t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},jT=class extends Lc{constructor(t,e,i,r){super(t,e,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?t:this._names[e],this}},GT=class extends Lc{constructor(t,e,i){super(t,e,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},xV=!1,lx=class n{constructor({parent:t,autoPlace:e=t===void 0,container:i,width:r,title:o="Controls",injectStyles:s=!0,touchStyles:a=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{l.code!=="Enter"&&l.code!=="Space"||(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!xV&&s&&(function(l){let u=document.createElement("style");u.innerHTML=l;let f=document.querySelector("head link[rel=stylesheet], head style");f?document.head.insertBefore(u,f):document.head.appendChild(u)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25BE";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25B8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),xV=!0),i?i.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(t,e,i,r,o){if(Object(i)===i)return new jT(this,t,e,i);let s=t[e];switch(typeof s){case"number":return new WT(this,t,e,i,r,o);case"boolean":return new BT(this,t,e);case"string":return new GT(this,t,e);case"function":return new Um(this,t,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,t,`
	value:`,s)}addColor(t,e,i=1){return new HT(this,t,e,i)}addFolder(t){return new n({parent:this,title:t})}load(t,e=!0){return t.controllers&&this.controllers.forEach(i=>{i instanceof Um||i._name in t.controllers&&i.load(t.controllers[i._name])}),e&&t.folders&&this.folders.forEach(i=>{i._title in t.folders&&i.load(t.folders[i._title])}),this}save(t=!0){let e={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Um)){if(i._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);e.controllers[i._name]=i.save()}}),t&&this.folders.forEach(i=>{if(i._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);e.folders[i._title]=i.save()}),e}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");let i=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}};var cx=class{constructor(t,e,i,r,o,s){function a(oe,ee){oe.color.set(ee)}function l(oe){t.traverseVisible(function(ee){ee.material&&(ee.material instanceof jr?ee.material.needsUpdate=!0:ee.material instanceof Array&&ee.material.forEach(ge=>{ge instanceof jr&&(ge.needsUpdate=!0)}))})}function u(oe,ee){P[ee]=function(){oe.fadeToAction(ee,.2)},k.add(P,ee)}this.gui=new lx({hideable:!1});let f=this.gui.addFolder("Lights"),h=f.addFolder("Ambient light");h.add(i.object.ambientLight,"visible").listen();let m=i.object.ambientLight,p={color:"#"+new Bt(m.color).getHexString()};h.addColor(p,"color").onChange(oe=>a(m,oe)),h.add(i.object.ambientLight,"intensity",0,1,.01);let b=f.addFolder("Directional light");b.add(i.object.directionalLight,"visible").listen();let C=i.object.directionalLight,y={color:"#"+new Bt(C.color).getHexString()};b.addColor(y,"color").onChange(oe=>a(C,oe)),b.add(i.object.directionalLight,"intensity",0,1,.01),b.add(i.object.directionalLight.position,"x",-100,100,.01),b.add(i.object.directionalLight.position,"y",-100,100,.01),b.add(i.object.directionalLight.position,"z",-100,100,.01);let x=f.addFolder("Point light #1");x.close(),x.add(i.object.pointLight1,"visible").listen();let T=i.object.pointLight1,E={color:"#"+new Bt(T.color).getHexString()};x.addColor(E,"color").onChange(oe=>a(T,oe)),x.add(i.object.pointLight1,"intensity",0,100,1),x.add(i.object.pointLight1,"distance",0,20,.01),x.add(i.object.pointLight1.position,"x",-10,10,.01),x.add(i.object.pointLight1.position,"y",0,20,.01),x.add(i.object.pointLight1.position,"z",-10,10,.01);let D=f.addFolder("Point light #2");D.close(),D.add(i.object.pointLight2,"visible").listen();let V=i.object.pointLight2,B={color:"#"+new Bt(V.color).getHexString()};D.addColor(B,"color").onChange(oe=>a(V,oe)),D.add(i.object.pointLight2,"intensity",0,100,1),D.add(i.object.pointLight2,"distance",0,20,.01),D.add(i.object.pointLight2.position,"x",-10,10,.01),D.add(i.object.pointLight2.position,"y",0,20,.01),D.add(i.object.pointLight2.position,"z",-10,10,.01),this.gui.addFolder("Shadows").add(e.shadowMap,"enabled").onChange(oe=>l(oe));let G=this.gui.addFolder("Character"),k=G.addFolder("Emotes"),P=[];for(let oe=0;oe<s.emotes.length;oe++)u(s,s.emotes[oe]);let N=G.addFolder("Expressions"),S=o.getObjectByName("Head_4"),q=Object.keys(S.morphTargetDictionary);for(let oe=0;oe<q.length;oe++)N.add(S.morphTargetInfluences,oe,0,1,.01).name(q[oe])}setVisibility(t){t?this.gui.show():this.gui.hide()}};var ux=class{constructor(t){this.selectedRoom=null,this.isInfoVisible=!1,this.initKeyboardListener(),this.roomParameters=t}getRoomFromTable(t){let e=t.name;console.log("getRoomFromTable:"+e);let r={Table_2_2:0,Table_2_8:1,Table_8_2:2,Table_8_8:3}[e];return r===void 0?(console.error(`Table name ${e} is not recognized`),null):this.roomParameters&&Array.isArray(this.roomParameters)&&this.roomParameters.length>r?this.roomParameters[r]:(console.error("roomParameters is not defined, not an array, or out of range"),null)}selectRoomFromTable(t){let e=this.getRoomFromTable(t);if(!e){console.error(`Room not found for table: ${t}`),this.selectedRoom=null,this.clearRoomInfo();return}this.selectedRoom=e,console.log(`Room selected: ${e.roomNumber}`),this.isInfoVisible&&this.updateRoomInfo()}clearRoomInfo(){let t=document.getElementById("room-info");t&&(t.innerHTML=`
                <h3>Room Information</h3>
                <p>No room selected.</p>
            `,this.isInfoVisible=!1)}toggleRoomInfo(){if(!this.selectedRoom){alert("No room selected!");return}let t=document.getElementById("room-info")||this.createInfoDiv();this.isInfoVisible?(t.style.display="none",this.isInfoVisible=!1):(this.updateRoomInfo(),t.style.display="block",this.isInfoVisible=!0)}updateRoomInfo(){let t=document.getElementById("room-info");if(t&&this.selectedRoom){let e=this.selectedRoom;t.innerHTML=`
                <h3>Room Information</h3>
                <p><strong>Number:</strong> ${e.roomNumber}</p>
                <p><strong>Capacity:</strong> ${e.capacity}</p>
                <p><strong>Occupied:</strong> ${e.isOccupied?"Yes":"No"}</p>
            `}}initKeyboardListener(){document.addEventListener("keydown",t=>{t.key.toLowerCase()==="i"&&this.toggleRoomInfo()})}createInfoDiv(){let t=document.createElement("div");return t.id="room-info",t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.padding="15px",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.borderRadius="5px",t.style.zIndex="1000",t.style.display="none",document.body.appendChild(t),t}};var dx=class{constructor(t,e,i,r,o,s,a,l,u,f,h,m,p,b,C){this.generalParameters=fo({},oV,t),this.mazeParameters=fo({},sV,e),this.playerParameters=fo({},aV,i),this.lightsParameters=fo({},lV,r),this.fogParameters=fo({},cV,o),this.fixedViewCameraParameters=fo({},ch,s),this.firstPersonViewCameraParameters=fo({},ch,a),this.thirdPersonViewCameraParameters=fo({},ch,l),this.topViewCameraParameters=fo({},ch,u),this.miniMapCameraParameters=fo({},ch,f),this.doorParameters=fo({},uV,h),this.tableParameters=fo({},dV,m),this.humanParameters=fo({},fV,p),this.exitDoorParameters=fo({},hV,b),this.roomParameters=C&&C.rooms?C.rooms:[],this.scene2D=new Pm;let y=[new ne(0,0,0),new ne(1,0,0),new ne(1,1,0),new ne(0,1,0)],x=new Do().setFromPoints(y),T=new $u({color:16777215});this.square=new ih(x,T),this.scene2D.add(this.square),this.camera2D=new ka(0,1,1,0,0,1),this.scene3D=new Pm,this.maze=new ix(this.mazeParameters,this.doorParameters,this.tableParameters,this.humanParameters,this.exitDoorParameters,this.roomParameters),this.player=new rx(this.playerParameters),this.lights=new ox(this.lightsParameters),this.fog=new sx(this.fogParameters),this.door=new Zu(this.doorParameters),this.fixedViewCamera=new Fc(this.fixedViewCameraParameters,window.innerWidth,window.innerHeight),this.firstPersonViewCamera=new Fc(this.firstPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.thirdPersonViewCamera=new Fc(this.thirdPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.topViewCamera=new Fc(this.topViewCameraParameters,window.innerWidth,window.innerHeight),this.miniMapCamera=new Fc(this.miniMapCameraParameters,window.innerWidth,window.innerHeight),this.statistics=new rV,this.statistics.dom.style.visibility="hidden",document.body.appendChild(this.statistics.dom),this.renderer=new Ty({antialias:!0}),this.generalParameters.setDevicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=XP,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1,this.gameRunning=!1,this.viewsPanel=document.getElementById("views-panel"),this.view=document.getElementById("view"),this.projection=document.getElementById("projection"),this.horizontal=document.getElementById("horizontal"),this.horizontal.step=1,this.vertical=document.getElementById("vertical"),this.vertical.step=1,this.distance=document.getElementById("distance"),this.distance.step=.1,this.zoom=document.getElementById("zoom"),this.zoom.step=.1,this.reset=document.getElementById("reset"),this.resetAll=document.getElementById("reset-all"),this.helpPanel=document.getElementById("help-panel"),this.helpPanel.style.visibility="hidden",this.subwindowsPanel=document.getElementById("subwindows-panel"),this.multipleViewsCheckBox=document.getElementById("multiple-views"),this.multipleViewsCheckBox.checked=!1,this.userInterfaceCheckBox=document.getElementById("user-interface"),this.userInterfaceCheckBox.checked=!0,this.miniMapCheckBox=document.getElementById("mini-map"),this.miniMapCheckBox.checked=!0,this.helpCheckBox=document.getElementById("help"),this.helpCheckBox.checked=!1,this.statisticsCheckBox=document.getElementById("statistics"),this.statisticsCheckBox.checked=!1,this.sceneContainer=document.getElementById("scene-container"),this.renderer.domElement.id="scene-container",this.buildHelpPanel(),this.setActiveViewCamera(this.fixedViewCamera),this.arrangeViewports(this.multipleViewsCheckBox.checked),window.addEventListener("resize",E=>this.windowResize(E)),document.addEventListener("keydown",E=>this.keyChange(E,!0)),document.addEventListener("keyup",E=>this.keyChange(E,!1)),this.renderer.domElement.addEventListener("mousedown",E=>this.mouseDown(E)),this.renderer.domElement.addEventListener("mousemove",E=>this.mouseMove(E)),this.renderer.domElement.addEventListener("mouseup",E=>this.mouseUp(E)),this.renderer.domElement.addEventListener("wheel",E=>this.mouseWheel(E)),this.renderer.domElement.addEventListener("contextmenu",E=>this.contextMenu(E)),this.renderer.domElement.addEventListener("click",E=>this.mouseClick(E)),this.view.addEventListener("change",E=>this.elementChange(E)),this.projection.addEventListener("change",E=>this.elementChange(E)),this.horizontal.addEventListener("change",E=>this.elementChange(E)),this.vertical.addEventListener("change",E=>this.elementChange(E)),this.distance.addEventListener("change",E=>this.elementChange(E)),this.zoom.addEventListener("change",E=>this.elementChange(E)),this.multipleViewsCheckBox.addEventListener("change",E=>this.elementChange(E)),this.userInterfaceCheckBox.addEventListener("change",E=>this.elementChange(E)),this.helpCheckBox.addEventListener("change",E=>this.elementChange(E)),this.statisticsCheckBox.addEventListener("change",E=>this.elementChange(E)),this.reset.addEventListener("click",E=>this.buttonClick(E)),this.resetAll.addEventListener("click",E=>this.buttonClick(E)),this.activeElement=document.activeElement,this.roomInfoHandler=new ux(this.roomParameters)}mouseClick(t){if(t.target.id==="scene-container"){t.preventDefault();let e=new Gy,i=new dn(t.clientX/window.innerWidth*2-1,-(t.clientY/window.innerHeight)*2+1);e.setFromCamera(i,this.activeViewCamera.object);let r=e.intersectObjects(this.scene3D.children,!0);if(r.length>0){let o=r.find(s=>s.object.isTable);if(o){let s=o.object;console.log("Picked table:",s.name),this.roomInfoHandler.selectRoomFromTable(s),this.moveCameraToTable(s)}else console.log("No table found in the intersection")}}}moveCameraToTable(t){if(this.isCameraAnimating){console.log("Camera is already animating");return}this.isCameraAnimating=!0;let e=new Ki().setFromObject(t);console.log("Bounding Box:",e);let i=e.getCenter(new ne);console.log("Target Position:",i);let r=this.activeViewCamera.object,o=new ne(0,6,0),s=i.clone().add(o);console.log("Final Position:",s);let a=r.position.clone(),l=r.quaternion.clone(),u=new ne(0,1,0),f=new Wr().setFromRotationMatrix(new an().lookAt(s,i,u)),h=r.zoom,m=1,p=1500,b=Date.now(),C=x=>x<.5?2*x*x:-1+(4-2*x)*x,y=()=>{let x=Date.now()-b,T=Math.min(x/p,1),E=C(T);if(r.position.lerpVectors(a,s,E),r.quaternion.slerpQuaternions(l,f,E),r.zoom=Or.lerp(h,m,E),r.updateProjectionMatrix(),this.spotlight){let D=new ne(0,10,0),V=s.clone().add(D);this.spotlight.position.lerpVectors(a.clone().add(D),V,E),this.spotlight.target.position.copy(i),this.spotlight.target.updateMatrixWorld()}T<1?requestAnimationFrame(y):this.isCameraAnimating=!1};y()}buildHelpPanel(){let t=document.getElementById("help-table"),e=0;for(let i in this.player.keyCodes){for(;t.rows[e].cells.length<2;)e++;t.rows[e++].cells[0].innerHTML=this.player.keyCodes[i]}t.rows[e].cells[0].innerHTML=this.maze.credits+"<br>"+this.player.credits}displayPanel(){this.view.options.selectedIndex=["fixed","first-person","third-person","top"].indexOf(this.activeViewCamera.view),this.projection.options.selectedIndex=["perspective","orthographic"].indexOf(this.activeViewCamera.projection),this.horizontal.value=this.activeViewCamera.orientation.h.toFixed(0),this.vertical.value=this.activeViewCamera.orientation.v.toFixed(0),this.distance.value=this.activeViewCamera.distance.toFixed(1),this.zoom.value=this.activeViewCamera.zoom.toFixed(1)}setActiveViewCamera(t){this.activeViewCamera=t,this.horizontal.min=this.activeViewCamera.orientationMin.h.toFixed(0),this.horizontal.max=this.activeViewCamera.orientationMax.h.toFixed(0),this.vertical.min=this.activeViewCamera.orientationMin.v.toFixed(0),this.vertical.max=this.activeViewCamera.orientationMax.v.toFixed(0),this.distance.min=this.activeViewCamera.distanceMin.toFixed(1),this.distance.max=this.activeViewCamera.distanceMax.toFixed(1),this.zoom.min=this.activeViewCamera.zoomMin.toFixed(1),this.zoom.max=this.activeViewCamera.zoomMax.toFixed(1),this.displayPanel()}arrangeViewports(t){this.fixedViewCamera.setViewport(t),this.firstPersonViewCamera.setViewport(t),this.thirdPersonViewCamera.setViewport(t),this.topViewCamera.setViewport(t)}pointerIsOverViewport(t,e){return t.x>=e.x&&t.x<e.x+e.width&&t.y>=e.y&&t.y<e.y+e.height}getPointedViewport(t){let e;if(this.miniMapCheckBox.checked&&(e=this.miniMapCamera.getViewport(),this.pointerIsOverViewport(t,e)))return this.miniMapCamera.view;let i;this.multipleViewsCheckBox.checked?i=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:i=[this.activeViewCamera];for(let r of i)if(e=r.getViewport(),this.pointerIsOverViewport(t,e))return r.view;return"none"}setViewMode(t){this.multipleViewsCheckBox.checked=t,this.arrangeViewports(this.multipleViewsCheckBox.checked)}setUserInterfaceVisibility(t){this.userInterfaceCheckBox.checked=t,this.viewsPanel.style.visibility=t?"visible":"hidden",this.subwindowsPanel.style.visibility=t?"visible":"hidden",this.userInterface.setVisibility(t)}setMiniMapVisibility(t){this.miniMapCheckBox.checked=t}setHelpVisibility(t){this.helpCheckBox.checked=t,this.helpPanel.style.visibility=t?"visible":"hidden"}setStatisticsVisibility(t){this.statisticsCheckBox.checked=t,this.statistics.dom.style.visibility=t?"visible":"hidden"}windowResize(){this.fixedViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.firstPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.thirdPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.topViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.miniMapCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight)}keyChange(t,e){["horizontal","vertical","distance","zoom"].indexOf(t.target.id)<0&&t.target.blur(),document.activeElement==document.body&&((t.code=="Space"||t.code=="ArrowLeft"||t.code=="ArrowRight"||t.code=="ArrowDown"||t.code=="ArrowUp")&&t.preventDefault(),t.code==this.player.keyCodes.fixedView&&e?this.setActiveViewCamera(this.fixedViewCamera):t.code==this.player.keyCodes.firstPersonView&&e?this.setActiveViewCamera(this.firstPersonViewCamera):t.code==this.player.keyCodes.thirdPersonView&&e?this.setActiveViewCamera(this.thirdPersonViewCamera):t.code==this.player.keyCodes.topView&&e&&this.setActiveViewCamera(this.topViewCamera),t.code==this.player.keyCodes.viewMode&&e&&this.setViewMode(!this.multipleViewsCheckBox.checked),t.code==this.player.keyCodes.miniMap&&e&&this.setMiniMapVisibility(!this.miniMapCheckBox.checked),t.code==this.player.keyCodes.help&&e&&this.setHelpVisibility(!this.helpCheckBox.checked),t.code==this.player.keyCodes.statistics&&e&&this.setStatisticsVisibility(!this.statisticsCheckBox.checked),t.code==this.player.keyCodes.run&&(this.player.keyStates.run=e),t.code==this.player.keyCodes.left?this.player.keyStates.left=e:t.code==this.player.keyCodes.right&&(this.player.keyStates.right=e),t.code==this.player.keyCodes.backward?this.player.keyStates.backward=e:t.code==this.player.keyCodes.forward&&(this.player.keyStates.forward=e),t.code==this.player.keyCodes.jump?this.player.keyStates.jump=e:t.code==this.player.keyCodes.yes?this.player.keyStates.yes=e:t.code==this.player.keyCodes.no?this.player.keyStates.no=e:t.code==this.player.keyCodes.wave?this.player.keyStates.wave=e:t.code==this.player.keyCodes.punch?this.player.keyStates.punch=e:t.code==this.player.keyCodes.thumbsUp&&(this.player.keyStates.thumbsUp=e))}mouseDown(t){if(t.buttons==1||t.buttons==2){this.mousePosition=new dn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none")if(e=="mini-map")t.buttons==1&&(this.dragMiniMap=!0);else{let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i,this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i]),t.buttons==1?this.changeCameraDistance=!0:this.changeCameraOrientation=!0}}}mouseMove(t){if((t.buttons==1||t.buttons==2)&&(this.changeCameraDistance||this.changeCameraOrientation||this.dragMiniMap)){let e=new dn(t.clientX,window.innerHeight-t.clientY-1),i=e.clone().sub(this.mousePosition);if(this.mousePosition=e,t.buttons==1){if(this.changeCameraDistance)this.activeViewCamera.updateDistance(-.05*(i.x+i.y)),this.displayPanel();else if(this.dragMiniMap){let r=Math.min(window.innerWidth,window.innerHeight),o=this.miniMapCamera.viewport.width*r,s=this.miniMapCamera.viewport.height*r;this.miniMapCamera.viewport.x+=i.x/(window.innerWidth-o),this.miniMapCamera.viewport.y+=i.y/(window.innerHeight-s)}}else this.changeCameraOrientation&&(this.activeViewCamera.updateOrientation(i.multiply(new dn(-.5,.5))),this.displayPanel())}}mouseUp(t){this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1}mouseWheel(t){t.preventDefault(),this.mousePosition=new dn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none"&&e!="mini-map"){let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i;let r=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i];r.updateZoom(-.001*t.deltaY),this.setActiveViewCamera(r)}}contextMenu(t){t.preventDefault()}elementChange(t){switch(t.target.id){case"view":this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][this.view.options.selectedIndex]);break;case"projection":this.activeViewCamera.setActiveProjection(["perspective","orthographic"][this.projection.options.selectedIndex]),this.displayPanel();break;case"horizontal":case"vertical":case"distance":case"zoom":if(t.target.checkValidity())switch(t.target.id){case"horizontal":case"vertical":this.activeViewCamera.setOrientation(new Yr(this.horizontal.value,this.vertical.value));break;case"distance":this.activeViewCamera.setDistance(this.distance.value);break;case"zoom":this.activeViewCamera.setZoom(this.zoom.value);break}break;case"multiple-views":this.setViewMode(t.target.checked);break;case"user-interface":this.setUserInterfaceVisibility(t.target.checked);break;case"help":this.setHelpVisibility(t.target.checked);break;case"statistics":this.setStatisticsVisibility(t.target.checked);break}}buttonClick(t){switch(t.target.id){case"reset":this.activeViewCamera.initialize();break;case"reset-all":this.fixedViewCamera.initialize(),this.firstPersonViewCamera.initialize(),this.thirdPersonViewCamera.initialize(),this.topViewCamera.initialize();break}this.displayPanel()}finalSequence(){this.fog.enabled=!1,this.thirdPersonViewCamera.setOrientation(new Yr(-180,this.thirdPersonViewCamera.initialOrientation.v)),this.thirdPersonViewCamera.setDistance(this.thirdPersonViewCamera.initialDistance),this.thirdPersonViewCamera.setZoom(2),this.setActiveViewCamera(this.thirdPersonViewCamera),this.setViewMode(!1),this.animations.fadeToAction("Dance",.2)}collision(t){let e=this.maze.distanceToWestWall(t)<this.player.radius||this.maze.distanceToEastWall(t)<this.player.radius||this.maze.distanceToNorthWall(t)<this.player.radius||this.maze.distanceToSouthWall(t)<this.player.radius,i=this.maze.distanceToDoor(t)<this.player.radius;return e||i}openDoor(){let t=this.maze.getDoor();t&&t.position.distanceTo(this.player.position)<this.player.radius&&t.open()}update(){if(!this.gameRunning)this.maze.loaded&&this.player.loaded&&(this.scene3D.add(this.maze.object),this.scene3D.add(this.player.object),this.scene3D.add(this.lights.object),this.clock=new Wy,this.animations=new ax(this.player.object,this.player.animations),this.player.position=this.maze.initialPosition.clone(),this.player.direction=this.maze.initialDirection,this.userInterface=new cx(this.scene3D,this.renderer,this.lights,this.fog,this.player.object,this.animations),this.gameRunning=!0);else{let i=this.clock.getDelta();if(this.animations.update(i),!this.animations.actionInProgress){let r=this.player.walkingSpeed*i,o=this.player.turningSpeed*i;this.player.keyStates.run&&(r*=this.player.runningFactor,o*=this.player.runningFactor),this.player.keyStates.left?this.player.direction+=o:this.player.keyStates.right&&(this.player.direction-=o);let s=Or.degToRad(this.player.direction);if(this.player.keyStates.backward){let a=new ne(-r*Math.sin(s)+this.player.position.x,this.player.position.y,-r*Math.cos(s)+this.player.position.z);this.collision(a)?this.animations.fadeToAction("Death",.2):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else if(this.player.keyStates.forward){let a=new ne(r*Math.sin(s)+this.player.position.x,this.player.position.y,r*Math.cos(s)+this.player.position.z);this.collision(a)?this.animations.fadeToAction("Death",.2):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else this.player.keyStates.jump?this.animations.fadeToAction("Jump",.2):this.player.keyStates.yes?this.animations.fadeToAction("Yes",.2):this.player.keyStates.no?this.animations.fadeToAction("No",.2):this.player.keyStates.wave?this.animations.fadeToAction("Wave",.2):this.player.keyStates.punch?this.animations.fadeToAction("Punch",.2):this.player.keyStates.thumbsUp?this.animations.fadeToAction("ThumbsUp",.2):this.animations.fadeToAction("Idle",this.animations.previousAction=="Death"?.6:.2);this.player.object.position.copy(this.player.position),this.player.object.rotation.y=s-this.player.initialDirection}}this.firstPersonViewCamera.playerDirection=this.player.direction,this.thirdPersonViewCamera.playerDirection=this.player.direction,this.topViewCamera.playerDirection=this.player.direction;let t=new ne(this.player.position.x,this.player.position.y+this.player.eyeHeight,this.player.position.z);this.firstPersonViewCamera.setTarget(t),this.thirdPersonViewCamera.setTarget(t),this.topViewCamera.setTarget(t),this.statistics.update(),this.renderer.clear(),this.fog.enabled?this.scene3D.fog=this.fog.object:this.scene3D.fog=null;let e;this.multipleViewsCheckBox.checked?e=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:e=[this.activeViewCamera];for(let i of e){this.player.object.visible=i!=this.firstPersonViewCamera;let r=i.getViewport();this.renderer.setViewport(r.x,r.y,r.width,r.height),this.renderer.render(this.scene3D,i.object),this.renderer.render(this.scene2D,this.camera2D),this.renderer.clearDepth()}if(this.miniMapCheckBox.checked){this.scene3D.fog=null,this.player.object.visible=!0;let i=this.miniMapCamera.getViewport();this.renderer.setViewport(i.x,i.y,i.width,i.height),this.renderer.render(this.scene3D,this.miniMapCamera.object),this.renderer.render(this.scene2D,this.camera2D)}}dispose(){this.renderer&&this.renderer.dispose(),this.scene&&this.scene.children.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(e=>e.dispose()):t.material.dispose()),this.scene.remove(t)})}};var fx=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/SurgeryRoom/"}getRoomsAvailabilityByDate(e){let r=new Date(e).toISOString().split("T")[0];console.log(r);let o=new ps().set("date",r);return this.http.get(this.apiUrl,{params:o})}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hae(n,t){if(n&1&&(g(0,"tr")(1,"td",35)(2,"p"),M(3),_()()()),n&2){let e=ce();A(3),Ye(e.error)}}var bV=(()=>{class n{constructor(e,i){this.platformId=e,this.hospital3dService=i,this.animationFrameId=null,this.selectedDate=new Date,this.firstRooms=[{roomNumber:"101",type:"Conference",capacity:20,equipment:["Projector","Whiteboard"],isOccupied:!1},{roomNumber:"102",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0},{roomNumber:"103",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!1},{roomNumber:"104",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0}],this.rooms=[],this.loading=!1,this.error=null,this.animate=()=>{of(this.platformId)&&(this.animationFrameId=requestAnimationFrame(this.animate),this.thumbRaiser.update())}}initialize(e=this.firstRooms){this.disposeThumbRaiser(),this.thumbRaiser=new dx({},{scale:new ne(1,.5,1)},{},{ambientLight:{intensity:.5},pointLight1:{intensity:50,distance:20,position:new ne(-3.5,10,2.5)},pointLight2:{intensity:50,distance:20,position:new ne(3.5,10,-2.5)},directionalLight:{intensity:.5,position:new ne(0,10,0)}},{},{view:"fixed",multipleViewsViewport:new pn(0,1,.45,.5)},{view:"first-person",multipleViewsViewport:new pn(1,1,.55,.5),initialOrientation:new Yr(0,-10),initialDistance:2,distanceMin:1,distanceMax:4},{view:"third-person",multipleViewsViewport:new pn(0,0,.55,.5),initialOrientation:new Yr(0,-20),initialDistance:2,distanceMin:1,distanceMax:4},{view:"top",multipleViewsViewport:new pn(1,0,.45,.5),initialOrientation:new Yr(0,-90),initialDistance:4,distanceMin:1,distanceMax:16},{view:"mini-map",multipleViewsViewport:new pn(.99,.02,.3,.3),initialOrientation:new Yr(180,-90),initialZoom:.64},{},{},{},{},{rooms:e}),(!this.thumbRaiser.renderer||!this.thumbRaiser.update)&&console.error("ThumbRaiser properties are not properly initialized");let i=document.getElementById("scene-container");i&&(i.innerHTML="",i.appendChild(this.thumbRaiser.renderer.domElement))}ngOnInit(){of(this.platformId)&&(this.initialize(),this.animate())}ngAfterViewInit(){}ngOnDestroy(){this.disposeThumbRaiser()}disposeThumbRaiser(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.thumbRaiser&&(this.thumbRaiser.dispose(),this.thumbRaiser=null)}checkOperations(){this.selectedDate?(this.loading=!0,this.error=null,this.hospital3dService.getRoomsAvailabilityByDate(this.selectedDate).subscribe(e=>{console.log("Rooms fetched:",e),this.rooms=e;let i=this.rooms;this.update3DVisualization(i),this.loading=!1},e=>{console.error("Error fetching rooms",e),this.error="Error fetching rooms",this.loading=!1})):this.error="No date selected"}onDateChange(e){console.log("Date changed:",this.selectedDate)}update3DVisualization(e){this.disposeThumbRaiser(),this.initialize(e),this.animate()}static{this.\u0275fac=function(i){return new(i||n)($(Fr),$(fx))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-hospital3d"]],standalone:!0,features:[zi([fx]),Je],decls:186,vars:2,consts:[["id","parent"],["id","views-panel"],[1,"views"],["id","view"],["value","fixed"],["value","first"],["value","third"],["value","top"],["type","number","id","horizontal","required",""],["type","number","id","vertical","required",""],["type","button","id","reset","value","Reset view"],["id","projection"],["value","perspective"],["value","orthographic"],["type","number","id","distance","required",""],["type","number","id","zoom","required",""],["type","button","id","reset-all","value","Reset all views"],["colspan","4",2,"text-align","center"],["for","date-picker",2,"margin-right","10px"],["type","datetime-local","id","date-picker",2,"margin-right","10px",3,"ngModelChange","change","ngModel"],[2,"padding","5px 15px",3,"click"],[4,"ngIf"],["id","scene-container"],["id","help-panel"],["id","help-table",1,"help"],["colspan","2",2,"font-size","3.0vmin"],["colspan","2",2,"text-align","left"],["colspan","2",2,"text-align","right"],["id","subwindows-panel"],[1,"subwindows"],["type","checkbox","id","multiple-views"],["type","checkbox","id","user-interface"],["type","checkbox","id","mini-map"],["type","checkbox","id","help"],["type","checkbox","id","statistics"],["colspan","4",2,"text-align","center","color","red"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr")(5,"td")(6,"label"),M(7,"View:"),_(),g(8,"select",3)(9,"option",4),M(10,"Fixed"),_(),g(11,"option",5),M(12,"First-person"),_(),g(13,"option",6),M(14,"Third-person"),_(),g(15,"option",7),M(16,"Top"),_()()(),g(17,"td")(18,"label"),M(19,"Orientation (h):"),_(),me(20,"input",8),_(),g(21,"td")(22,"label"),M(23,"Orientation (v):"),_(),me(24,"input",9),_(),g(25,"td"),me(26,"input",10),_()(),g(27,"tr")(28,"td")(29,"label"),M(30,"Projection:"),_(),g(31,"select",11)(32,"option",12),M(33,"Perspective"),_(),g(34,"option",13),M(35,"Orthographic"),_()()(),g(36,"td")(37,"label"),M(38,"Distance:"),_(),me(39,"input",14),_(),g(40,"td")(41,"label"),M(42,"Zoom:"),_(),me(43,"input",15),_(),g(44,"td"),me(45,"input",16),_()(),g(46,"tr")(47,"td",17)(48,"label",18),M(49,"Select a Date:"),_(),g(50,"input",19),Ze("ngModelChange",function(s){return Ke(r.selectedDate,s)||(r.selectedDate=s),s}),le("change",function(s){return r.onDateChange(s)}),_(),g(51,"button",20),le("click",function(){return r.checkOperations()}),M(52,"Check Operations"),_()()(),Pe(53,hae,4,1,"tr",21),_()()(),me(54,"div",22),g(55,"div",23)(56,"table",24)(57,"tbody")(58,"tr")(59,"th",25),M(60," Help "),_()(),g(61,"tr")(62,"th",26),M(63,"Select active view"),_()(),g(64,"tr"),me(65,"td"),g(66,"td"),M(67,"Fixed view"),_()(),g(68,"tr"),me(69,"td"),g(70,"td"),M(71,"First-person view"),_()(),g(72,"tr"),me(73,"td"),g(74,"td"),M(75,"Third-person view"),_()(),g(76,"tr"),me(77,"td"),g(78,"td"),M(79,"Top view"),_()(),g(80,"tr")(81,"th",26),M(82,"Toggle view mode"),_()(),g(83,"tr"),me(84,"td"),g(85,"td"),M(86,"Single-view mode / multiple-views mode"),_()(),g(87,"tr")(88,"th",26),M(89,"Display / hide subwindows"),_()(),g(90,"tr"),me(91,"td"),g(92,"td"),M(93,"User interface"),_()(),g(94,"tr"),me(95,"td"),g(96,"td"),M(97,"Mini-map"),_()(),g(98,"tr"),me(99,"td"),g(100,"td"),M(101,"Help"),_()(),g(102,"tr"),me(103,"td"),g(104,"td"),M(105,"Statistics"),_()(),g(106,"tr")(107,"th",26),M(108,"Move character"),_()(),g(109,"tr"),me(110,"td"),g(111,"td"),M(112,"Walk / run (modifier key)"),_()(),g(113,"tr"),me(114,"td"),g(115,"td"),M(116,"Turn left slowly / quickly"),_()(),g(117,"tr"),me(118,"td"),g(119,"td"),M(120,"Turn right slowly / quickly"),_()(),g(121,"tr"),me(122,"td"),g(123,"td"),M(124,"Walk / run backward"),_()(),g(125,"tr"),me(126,"td"),g(127,"td"),M(128,"Walk / run forward"),_()(),g(129,"tr")(130,"th",26),M(131,"Emote character"),_()(),g(132,"tr"),me(133,"td"),g(134,"td"),M(135,"Jump"),_()(),g(136,"tr"),me(137,"td"),g(138,"td"),M(139,"Yes"),_()(),g(140,"tr"),me(141,"td"),g(142,"td"),M(143,"No"),_()(),g(144,"tr"),me(145,"td"),g(146,"td"),M(147,"Wave"),_()(),g(148,"tr"),me(149,"td"),g(150,"td"),M(151,"Punch"),_()(),g(152,"tr"),me(153,"td"),g(154,"td"),M(155,"Thumbs up"),_()(),g(156,"tr"),me(157,"td",27),_()()()(),g(158,"div",28)(159,"table",29)(160,"tbody")(161,"tr")(162,"td")(163,"label"),M(164,"Multiple views:"),_(),me(165,"input",30),_()(),g(166,"tr")(167,"td")(168,"label"),M(169,"User interface:"),_(),me(170,"input",31),_()(),g(171,"tr")(172,"td")(173,"label"),M(174,"Mini-map:"),_(),me(175,"input",32),_()(),g(176,"tr")(177,"td")(178,"label"),M(179,"Help:"),_(),me(180,"input",33),_()(),g(181,"tr")(182,"td")(183,"label"),M(184,"Statistics:"),_(),me(185,"input",34),_()()()()()()),i&2&&(A(50),Xe("ngModel",r.selectedDate),A(3),X("ngIf",r.error))},dependencies:[Dt,Ii,Ri,Nt,Ft,Pn,vt,Zt],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;background-color:#f0f0f0}canvas[_ngcontent-%COMP%]{display:block;height:100vh;width:100vw;pointer-events:auto}#scene-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;overflow:hidden;background-color:#000;pointer-events:auto}#parent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}#views-panel[_ngcontent-%COMP%]{position:absolute;top:1vh;left:50%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;text-align:center;font-size:1.5vmin;color:#fff;pointer-events:auto}#help-panel[_ngcontent-%COMP%]{position:absolute;right:1vw;top:1vh;z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}#subwindows-panel[_ngcontent-%COMP%]{position:absolute;bottom:1vh;left:5%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}.left-align[_ngcontent-%COMP%]{text-align:left}"]})}}return n})();var CV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}deleteAccount(e){return this.http.delete(`${this.apiUrl}/DeleteUser/${e}`,{observe:"response"}).pipe(_n(i=>(console.error("Error deleting account:",i),In(i))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var MV=(()=>{class n{constructor(e,i){this.deleteUserService=e,this.router=i}ngOnInit(){}onDelete(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.deleteUserService.deleteAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully deleted.")},r=>{console.error("Account deletion failed",r),alert("Account deletion failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account deletion failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account deletion cancelled.")}static{this.\u0275fac=function(i){return new(i||n)($(CV),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-delete-user"]],standalone:!0,features:[Je],decls:8,vars:0,consts:[[1,"delete-user-container"],[1,"delete-user-box"],[1,"delete-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"p"),M(3,"Are you sure you want to delete your account? This action is irreversible."),_(),g(4,"button",2),le("click",function(){return r.onDelete()}),M(5,"Delete"),_(),g(6,"button",3),le("click",function(){return r.onCancel()}),M(7,"Cancel"),_()()())},styles:[".delete-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.delete-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.delete-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.delete-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function mae(n,t){if(n&1&&(g(0,"div",9),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}var wV=(()=>{class n{constructor(e){this.staffService=e,this.close=new yt,this.username="",this.errorMessage=""}onModalClick(e){e.stopPropagation()}ngOnInit(){console.log("ActiveModalComponent initialized",this.profile)}closeModal(){this.close.emit(!1)}onSubmit(){if(this.username===""){this.errorMessage="Username is required";return}let e={email:this.profile.email,username:this.username,role:this.profile.staffType,staffId:this.profile.id};this.staffService.activateStaff(e).subscribe({next:i=>{console.log("User activated:",i),this.errorMessage="",this.username="",this.close.emit(!0)},error:i=>{if(console.error("Error Activating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Activing staff failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-active-modal"]],inputs:{profile:"profile"},outputs:{close:"close"},standalone:!0,features:[Je],decls:13,vars:2,consts:[[1,"modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","username","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-submitUser"],[1,"error-message"]],template:function(i,r){i&1&&(g(0,"div",0),le("click",function(){return r.closeModal()}),g(1,"div",1),le("click",function(s){return r.onModalClick(s)}),g(2,"div",2)(3,"h2"),M(4,"Activate User"),_()(),g(5,"form",3),le("ngSubmit",function(){return r.onSubmit()}),g(6,"div",4)(7,"label",5),M(8,"Username"),_(),g(9,"input",6),Ze("ngModelChange",function(s){return Ke(r.username,s)||(r.username=s),s}),_()(),Pe(10,mae,2,1,"div",7),g(11,"button",8),M(12,"Submit"),_()()()()),i&2&&(A(9),Xe("ngModel",r.username),A(),X("ngIf",r.errorMessage))},dependencies:[Dt,Yt,Nt,Ft,qt,hn,Pn,$n,vt,Zt,nr,kt],styles:[".modal[_ngcontent-%COMP%]{display:block;position:fixed;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal-content[_ngcontent-%COMP%]{background-color:#fff;margin:15% auto;padding:20px;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px;align-items:center;font-family:Poppins,sans-serif}.modal-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin:0}.modal-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-top:.5rem;border-radius:4px}.modal-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;text-align:center;font-size:small;margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;transition:background-color .5s}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:focus{outline:none}"]})}}return n})();function gae(n,t){if(n&1){let e=dt();g(0,"app-active-modal",25),le("close",function(r){Oe(e);let o=ce();return Ae(o.closeModal(r))}),_()}if(n&2){let e=ce();X("profile",e.modalProfile)}}function _ae(n,t){if(n&1&&(g(0,"option",26),M(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),xt(" ",e.specOption," ")}}function vae(n,t){if(n&1&&(g(0,"div",27),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}function yae(n,t){if(n&1){let e=dt();g(0,"button",32),le("click",function(){Oe(e);let r=ce().$implicit,o=ce();return Ae(o.openModal(r))}),M(1,"Activate"),_()}}function xae(n,t){if(n&1){let e=dt();g(0,"button",33),le("click",function(){Oe(e);let r=ce().$implicit,o=ce();return Ae(o.deactivateStaff(r.id))}),M(1,"Deactivate"),_()}}function bae(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td")(6,"button",28),M(7,"Edit"),_(),Pe(8,yae,2,0,"button",29)(9,xae,2,0,"button",30),g(10,"button",31),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.viewStaffDetails(r))}),M(11,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.fullName),A(2),Ye(e.email),A(2),Mu("routerLink","/update-staff/",e.id,""),A(2),X("ngIf",!e.isActive),A(),X("ngIf",e.isActive)}}function Cae(n,t){if(n&1){let e=dt();g(0,"div",34)(1,"div",35)(2,"h3"),M(3,"Staff Details"),_(),g(4,"button",36),le("click",function(){Oe(e);let r=ce();return Ae(r.clearSelectedStaff())}),me(5,"img",37),_(),g(6,"table",38)(7,"tbody")(8,"tr")(9,"th"),M(10,"License Number"),_(),g(11,"td"),M(12),_()(),g(13,"tr")(14,"th"),M(15,"First Name"),_(),g(16,"td"),M(17),_()(),g(18,"tr")(19,"th"),M(20,"Last Name"),_(),g(21,"td"),M(22),_()(),g(23,"tr")(24,"th"),M(25,"Full Name"),_(),g(26,"td"),M(27),_()(),g(28,"tr")(29,"th"),M(30,"Phone Number"),_(),g(31,"td"),M(32),_()(),g(33,"tr")(34,"th"),M(35,"Email"),_(),g(36,"td"),M(37),_()(),g(38,"tr")(39,"th"),M(40,"Specialization"),_(),g(41,"td"),M(42),_()(),g(43,"tr")(44,"th"),M(45,"Staff Type"),_(),g(46,"td"),M(47),_()(),g(48,"tr")(49,"th"),M(50,"Is Active"),_(),g(51,"td"),M(52),_()()()(),g(53,"button",39),M(54,"View Availability"),_()()()}if(n&2){let e=ce();A(12),Ye(e.selectedStaff.licenseNumber),A(5),Ye(e.selectedStaff.firstName),A(5),Ye(e.selectedStaff.lastName),A(5),Ye(e.selectedStaff.fullName),A(5),Ye(e.selectedStaff.phoneNumber),A(5),Ye(e.selectedStaff.email),A(5),Ye(e.selectedStaff.specializationName),A(5),Ye(e.selectedStaff.staffType),A(5),Ye(e.selectedStaff.isActive?"Yes":"No"),A(),Mu("routerLink","/view-availability/",e.selectedStaff.id,"")}}var EV=(()=>{class n{constructor(e,i){this.fb=e,this.staffService=i,this.isModalOpen=!1,this.staffProfiles=[],this.errorMessage="",this.specializations=[],this.selectedStaff=null,this.showAvailabilityModal=!1,this.availabilitySlots=[],this.username="",this.modalProfile=null,this.searchForm=this.fb.group({firstName:new Un("",[Gt.required]),lastName:new Un("",[Gt.required]),fullName:new Un("",[Gt.required]),email:new Un("",[Gt.required,Gt.email]),specializationName:new Un("",[Gt.required])})}ngOnInit(){this.loadStaffProfiles(),this.loadSpecializations()}loadSpecializations(){this.staffService.getSpecialization().subscribe({next:e=>{console.log(`Data specialization:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}clearFilters(){this.searchForm.reset({firstName:"",lastName:"",fullName:"",email:"",specializationName:""}),this.loadStaffProfiles(),this.errorMessage=""}onSearch(){let e={firstName:this.searchForm.value.firstName?.trim()||"",lastName:this.searchForm.value.lastName?.trim()||"",fullName:this.searchForm.value.fullName?.trim()||"",email:this.searchForm.value.email?.trim()||"",specializationName:this.searchForm.value.specializationName?.trim()||""};if(Object.values(e).every(i=>!i)){this.errorMessage="At least one search parameter is required.";return}if(e.email!==""&&this.searchForm.get("email")?.invalid){this.errorMessage="Invalid email address";return}console.log("Search criteria",e),this.staffService.searchStaffProfiles(e).subscribe({next:i=>{this.errorMessage="",Array.isArray(i)?this.staffProfiles=i:this.staffProfiles=[]},error:i=>{if(console.error("Error search staff",i),this.staffProfiles=[],i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Search Staff - "+i.error)}})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}viewStaffDetails(e){e.specializationName=this.getSpecializationName(e.specializationId),this.selectedStaff=e}clearSelectedStaff(){this.selectedStaff=null}deactivateStaff(e){this.staffService.deactivateStaff(e).subscribe({next:()=>{console.log("Staff Deactivated Successfully"),this.errorMessage="",this.clearFilters()},error:i=>{if(console.error("Error deactivating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Deactive staff failed - "+i.error)}})}openModal(e){this.modalProfile=e,this.isModalOpen=!0}closeModal(e){e&&this.clearFilters(),this.modalProfile=null,this.isModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)($(Sa),$(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-search-staffs"]],inputs:{profile:"profile"},standalone:!0,features:[Je],decls:45,vars:6,consts:[[1,"manage-container"],[3,"profile","close",4,"ngIf"],[1,"screens-container"],[1,"screen"],["type","button","routerLink","/panel-admin",1,"btn-back"],[1,"manage-title"],[1,"content-container"],[1,"filter-container"],[1,"filter-form",3,"ngSubmit","formGroup"],["type","text","name","firstName","placeholder","First Name","formControlName","firstName"],["type","text","name","lastName","placeholder","Last Name","formControlName","lastName"],["type","text","name","fullName","placeholder","Full Name","formControlName","fullName"],["type","email","name","email","placeholder","Email","formControlName","email"],["name","specialization","formControlName","specializationName","title","Specialization"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-filter"],["type","reset",1,"btn","btn-clear",3,"click"],[1,"operation"],["type","button","routerLink","/create-staff",1,"btn","btn-create"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[3,"close","profile"],[3,"value"],[1,"error-message"],["type","button",1,"btn","btn-update",3,"routerLink"],["type","button","class","btn btn-activate",3,"click",4,"ngIf"],["type","button","class","btn btn-deactive",3,"click",4,"ngIf"],["type","button",1,"btn","btn-view",3,"click"],["type","button",1,"btn","btn-activate",3,"click"],["type","button",1,"btn","btn-deactive",3,"click"],[1,"details-screen"],[1,"staff-details"],["type","button",3,"click"],["src","fechar.png","alt","Close"],[1,"table","table-bordered"],["type","button",1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",0),Pe(1,gae,1,1,"app-active-modal",1),me(2,"app-sidebar"),g(3,"div",2)(4,"div",3)(5,"button",4),M(6," Back to DashBoard "),_(),g(7,"h2",5),M(8,"Search Staff Profiles"),_(),g(9,"div",6)(10,"div",7)(11,"form",8),le("ngSubmit",function(){return r.onSearch()}),g(12,"p"),M(13," Filter Fields"),_(),me(14,"input",9)(15,"input",10)(16,"input",11)(17,"input",12),g(18,"select",13)(19,"option",14),M(20,"Select Specialization"),_(),Pe(21,_ae,2,2,"option",15),_(),Pe(22,vae,2,1,"div",16),g(23,"button",17),M(24,"Search"),_(),g(25,"button",18),le("click",function(){return r.clearFilters()}),M(26," Clear Filters "),_()(),g(27,"div",19)(28,"p"),M(29," Others operations"),_(),g(30,"button",20),M(31," Create Staff "),_()()(),g(32,"div",21)(33,"table",22)(34,"thead")(35,"tr")(36,"th"),M(37,"Full Name"),_(),g(38,"th"),M(39,"Email"),_(),g(40,"th"),M(41,"Actions"),_()()(),g(42,"tbody"),Pe(43,bae,12,6,"tr",23),_()()()()(),Pe(44,Cae,55,11,"div",24),_()()),i&2&&(A(),X("ngIf",r.isModalOpen),A(10),X("formGroup",r.searchForm),A(10),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage),A(21),X("ngForOf",r.staffProfiles),A(),X("ngIf",r.selectedStaff))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,vt,Mn,Zt,Vt,wV,nr,Cr,Dr,kt,jt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:40px;margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:10px;width:100%;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:250px;overflow:auto;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #ddd;border-radius:8px;padding:10px;background-color:#fff;box-shadow:0 0 10px #0000001a;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center;font-weight:700;margin:0;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{margin-right:5px;background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]{margin-right:5px;background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{margin-top:1rem;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]{margin-right:5px;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;word-wrap:break-word;vertical-align:middle;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 5px;word-wrap:break-word;vertical-align:middle}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:15px;right:10px;background:none;border:none;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]{position:relative;background-color:#6c757d;color:#fff;display:flex;justify-content:center;align-items:center;margin:0 auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();var hx=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Patient")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Mt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var SV=(()=>{class n{constructor(e,i){this.panelService=e,this.settingsService=i}ngOnInit(){this.panelService.setPanelId("panel-admin")}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(Ta))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-panel-admin"]],standalone:!0,features:[Je],decls:19,vars:0,consts:[[1,"dashboard-container"],[1,"dashboard-content"],[1,"header"],[1,"stats"],["routerLink","/operation-types","routerLinkActive","active",1,"box","box1"],["routerLink","/manage-patients","routerLinkActive","active",1,"box","box2"],["routerLink","/search-staffs","routerLinkActive","active",1,"box","box3"],["routerLink","/operation-rooms","routerLinkActive","active",1,"box","box4"],["routerLink","/specializations","routerLinkActive","active",1,"box","box5"],["routerLink","/manage-allergies-and-conditions","routerLinkActive","active",1,"box","box6"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Admin Panel"),_()(),g(6,"div",3)(7,"button",4),M(8," Manage Operation Types "),_(),g(9,"button",5),M(10," Manage Patients "),_(),g(11,"button",6),M(12," Manage Staffs "),_(),g(13,"button",7),M(14," Manage Operation Rooms "),_(),g(15,"button",8),M(16," Manage Specializations "),_(),g(17,"button",9),M(18," Manage Allergies and Conditions "),_()()()())},dependencies:[Vt,kt,jt,Ea],styles:['@charset "UTF-8";.dashboard-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.dashboard-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4" "box5 box6";grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.4em;font-weight:700;box-shadow:0 4px 8px #0000001a;width:100%;height:100%}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%], .box5[_ngcontent-%COMP%], .box6[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}.box5[_ngcontent-%COMP%]{grid-area:box5}.box5[_ngcontent-%COMP%]:hover{border-color:#b8b528}.box6[_ngcontent-%COMP%]{grid-area:box6}.box6[_ngcontent-%COMP%]:hover{border-color:#92a8d1}a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;text-decoration:none;color:#fff}']})}}return n})();function Mae(n,t){if(n&1&&(g(0,"option",19),M(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),xt(" ",e.specOption," ")}}function wae(n,t){if(n&1&&(g(0,"div",20),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}var PV=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.errorMessage="",this.specializations=[],this.staffName="",this.updateStaffForm=this.fb.group({identifier:new Un("",[Gt.required]),phoneNumber:new Un("",[Gt.required]),email:new Un("",[Gt.required,Gt.email]),addAvailabilitySlots:[""],removeAvailabilitySlots:[""],specializationName:new Un("",[Gt.required])}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadSpecializations().then(()=>{this.loadStaffDetails()})}loadSpecializations(){return new Promise((e,i)=>{this.staffService.getSpecialization().subscribe({next:r=>{console.log(`Data specialization:
`,r),this.specializations=r,e()},error:r=>{console.error("Error loading specializations",r),r.status===401?alert("Unauthorized page access"):alert("Error loading specializations"),i(r)}})})}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.initFromUpdate(e),this.staffName=e.fullName,console.log(`Staff details:
`,e)},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}initFromUpdate(e){let i=e.phoneNumber,r=i.substring(0,4),o=i.substring(4);this.updateStaffForm.patchValue({identifier:r,phoneNumber:o,email:e.email,addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.getSpecializationName(e.specializationId.trim())})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}onSubmit(){if(this.updateStaffForm.invalid){this.errorMessage="",this.updateStaffForm.markAllAsTouched();return}let e={phoneNumber:(this.updateStaffForm.value.identifier?.trim()||"")+(this.updateStaffForm.value.phoneNumber?.trim()||""),email:this.updateStaffForm.value.email?.trim()||"",addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.updateStaffForm.value.specializationName?.trim()||""};console.log(`Update data:
`,e),this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:i=>{if(console.error("Error Updating staff",i),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Sa),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-staff"]],standalone:!0,features:[Je],decls:30,vars:4,consts:[[1,"update-staff-container"],[1,"update-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","specializationName"],["id","specializationName","formControlName","specializationName","title","Specialization","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(me(0,"app-sidebar"),g(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back"),_(),g(6,"h2"),M(7,"Edit Staff "),_(),g(8,"h3"),M(9),_()(),g(10,"form",4),le("ngSubmit",function(){return r.onSubmit()}),g(11,"label",5),M(12,"Phone Number"),_(),g(13,"div",6)(14,"div",7),me(15,"input",8),_(),g(16,"div",9),me(17,"input",10),_()(),g(18,"label",11),M(19,"Email"),_(),me(20,"input",12),g(21,"label",13),M(22,"Specialization"),_(),g(23,"select",14)(24,"option",15),M(25,"Select Specialization"),_(),Pe(26,Mae,2,2,"option",16),_(),Pe(27,wae,2,1,"div",17),g(28,"button",18),M(29,"Update"),_()()()()),i&2&&(A(9),Ye(r.staffName),A(),X("formGroup",r.updateStaffForm),A(16),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,hn,vt,Mn,Zt,Vt,nr,Cr,Dr,kt,jt],styles:[".update-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.update-staff-container[_ngcontent-%COMP%]   .update-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var TV=(()=>{class n{constructor(e,i,r,o){this.router=e,this.panelService=i,this.settingsService=r,this.profileService=o}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile")}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(ui),$(Ta),$(bc))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-panel"]],standalone:!0,features:[Je],decls:11,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"header"],[1,"stats"],[1,"box","box1"],[1,"box","box2"],[1,"box","box3"],[1,"box","box4"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Patient Panel"),_()(),g(6,"div",3),me(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),_()()())},dependencies:[Vt],styles:['.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.5em;font-weight:700;box-shadow:0 4px 8px #0000001a}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}']})}}return n})();var Ss=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}deletePatient(e){return this.http.delete(`${this.apiUrl}/Patient/${e}`,{observe:"response"}).pipe(_n(i=>(console.error("Error deleting patient:",i),In(i))))}getPatientsWithAdvancedFilter(e,i,r,o,s,a,l,u){let f=new URLSearchParams({firstName:e||"",lastName:i||"",fullName:r||"",dateOfBirth:o||"",medicalRecordNumber:s||"",gender:a||"",email:l||"",phoneNumber:u||""});return this.http.get(`${this.apiUrl}/Patient?${f.toString()}`)}getMyProfile(e){return this.http.get(`${this.apiUrl}/Patient/myProfile/${e}`)}createPatient(e){return this.http.post(`${this.apiUrl}/Patient`,e).pipe(_n(i=>(console.error("Error creating patient:",i),In(i))))}updatePatient(e,i){return this.http.put(`${this.apiUrl}/Patient/${e}`,i,{responseType:"json"}).pipe(_n(r=>(console.error("Error updating patient:",r),In(r))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/allergies"}getAllergies(){return console.log("getAllergies called"),this.http.get(`${this.apiUrl}`).pipe(_n(e=>(console.error("Error fetching allergies:",e),Rt([]))))}createAllergy(e){return this.http.post(`${this.apiUrl}/create`,{allergyCode:e.allergyCode,allergyName:e.allergyName,allergyDescription:e.allergyDescription,allergySymptoms:e.allergySymptoms}).pipe(_n(i=>(console.error("Error creating allergy:",i),In(()=>new Error("Failed to create Allergy. Please try again later.")))))}updateAllergy(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{allergyCode:i.allergyCode,allergyName:i.allergyName,allergyDescription:i.allergyDescription,allergySymptoms:i.allergySymptoms}).pipe(_n(r=>(console.error("Error updating allergy:",r),In(()=>new Error("Failed to update allergy. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Zr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/medicalConditions"}getMedicalConditions(){return this.http.get(`${this.apiUrl}/`)}createMedicalConditions(e){return this.http.post(`${this.apiUrl}/create`,{medicalConditionCode:e.medicalConditionCode,medicalConditionName:e.medicalConditionName,medicalConditionDescription:e.medicalConditionDescription,medicalConditionSymptoms:e.medicalConditionSymptoms}).pipe(_n(i=>(console.error("Error creating medical condition:",i),In(()=>new Error("Failed to create medical condition. Please try again later.")))))}updateCondition(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{medicalConditionCode:i.medicalConditionCode,medicalConditionName:i.medicalConditionName,medicalConditionDescription:i.medicalConditionDescription,medicalConditionSymptoms:i.medicalConditionSymptoms}).pipe(_n(r=>(console.error("Error updating medical condition:",r),In(()=>new Error("Failed to update medical condition. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var La=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/patientsMedicalHistory"}getPatientMedicalHistory(e){return this.http.get(`${this.apiUrl}/get/${e}`).pipe(_i(i=>console.log("Medical history response:",i)),_n(i=>(i.status===404&&console.error("Medical history not found:",i),In(()=>i))))}updatePatientMedicalHistory(e,i,r,o,s){let a=`${this.apiUrl}/update/${e}`,l={medicalConditions:r,allergies:i,familyHistory:o,freeText:s};return this.http.put(a,l).pipe(_i(u=>console.log("Update response:",u)),_n(u=>(console.error("Error updating medical history:",u),In(()=>u))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Eae=n=>["/update-patient",n];function Sae(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td")(6,"a",24),M(7,"Edit"),_(),g(8,"a",25),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.deletePatient(r.medicalRecordNumber,r.fullName))}),M(9,"Delete"),_(),g(10,"a",26),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.viewPatientDetails(r.medicalRecordNumber))}),M(11,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.medicalRecordNumber),A(2),Ye(e.fullName),A(2),X("routerLink",ni(3,Eae,e.medicalRecordNumber))}}function Pae(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.allergyName," ")}}function Tae(n,t){n&1&&(g(0,"li"),M(1,"No allergies"),_())}function Dae(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.medicalConditionName," ")}}function Oae(n,t){n&1&&(g(0,"li"),M(1,"No medical conditions"),_())}function Aae(n,t){if(n&1){let e=dt();g(0,"div",27)(1,"div",28)(2,"h3"),M(3,"Patient Details"),_(),g(4,"button",29),le("click",function(){Oe(e);let r=ce();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],Ae(r.selectedMedicalHistory=void 0)}),_(),g(5,"table",30)(6,"tbody")(7,"tr")(8,"th"),M(9,"Medical Record Number"),_(),g(10,"td"),M(11),_()(),g(12,"tr")(13,"th"),M(14,"First Name"),_(),g(15,"td"),M(16),_()(),g(17,"tr")(18,"th"),M(19,"Last Name"),_(),g(20,"td"),M(21),_()(),g(22,"tr")(23,"th"),M(24,"Full Name"),_(),g(25,"td"),M(26),_()(),g(27,"tr")(28,"th"),M(29,"Date of Birth"),_(),g(30,"td"),M(31),_()(),g(32,"tr")(33,"th"),M(34,"Gender"),_(),g(35,"td"),M(36),_()(),g(37,"tr")(38,"th"),M(39,"Email"),_(),g(40,"td"),M(41),_()(),g(42,"tr")(43,"th"),M(44,"Phone Number"),_(),g(45,"td"),M(46),_()(),g(47,"tr")(48,"th"),M(49,"Emergency Contact"),_(),g(50,"td"),M(51),_()(),g(52,"tr")(53,"th"),M(54,"Allergies"),_(),g(55,"td")(56,"form",31),le("submit",function(){Oe(e);let r=ce();return Ae(r.searchAllergies())}),g(57,"input",32),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.allergySearch,r)||(o.allergySearch=r),Ae(r)}),_(),g(58,"button",33),M(59,"Search"),_()(),g(60,"ul",34),Pe(61,Pae,2,1,"li",22)(62,Tae,2,0,"li",35),_()()(),g(63,"tr")(64,"th"),M(65,"Medical Conditions"),_(),g(66,"td")(67,"form",31),le("submit",function(){Oe(e);let r=ce();return Ae(r.searchMedicalConditions())}),g(68,"input",36),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.medicalConditionSearch,r)||(o.medicalConditionSearch=r),Ae(r)}),_(),g(69,"button",33),M(70,"Search"),_()(),g(71,"ul",37),Pe(72,Dae,2,1,"li",22)(73,Oae,2,0,"li",35),_()()(),g(74,"tr")(75,"th"),M(76,"Appointment History"),_(),g(77,"td"),M(78),_()(),g(79,"tr")(80,"th"),M(81,"Is Active"),_(),g(82,"td"),M(83),_()()()()()()}if(n&2){let e=ce();A(11),Ye(e.selectedPatient.medicalRecordNumber),A(5),Ye(e.selectedPatient.firstName),A(5),Ye(e.selectedPatient.lastName),A(5),Ye(e.selectedPatient.fullName),A(5),Ye(e.selectedPatient.dateOfBirth),A(5),Ye(e.selectedPatient.gender===1?"Male":"Female"),A(5),Ye(e.selectedPatient.email),A(5),Ye(e.selectedPatient.phoneNumber),A(5),Ye(e.selectedPatient.emergencyContact),A(6),Xe("ngModel",e.allergySearch),A(4),X("ngForOf",e.filteredAllergies),A(),X("ngIf",e.filteredAllergies.length===0),A(6),Xe("ngModel",e.medicalConditionSearch),A(4),X("ngForOf",e.filteredMedicalConditions),A(),X("ngIf",e.filteredMedicalConditions.length===0),A(5),xt(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),A(5),Ye(e.selectedPatient.isActive?"Yes":"No")}}var DV=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[]}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[]},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(ui),$(Xr),$(Zr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-manage-patients"]],standalone:!0,features:[Je],decls:41,vars:10,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-patient",1,"btn","btn-create"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[3,"submit"],["type","text","placeholder","Search Allergies","name","allergySearch",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-search"],[1,"allergies-list"],[4,"ngIf"],["type","text","placeholder","Search Medical Conditions","name","medicalConditionSearch",3,"ngModelChange","ngModel"],[1,"conditions-list"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Create Patient "),_(),g(6,"h2",4),M(7,"Patients Manager"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.applyFilters(s)}),g(10,"input",7),Ze("ngModelChange",function(s){return Ke(r.filters.firstName,s)||(r.filters.firstName=s),s}),_(),g(11,"input",8),Ze("ngModelChange",function(s){return Ke(r.filters.lastName,s)||(r.filters.lastName=s),s}),_(),g(12,"input",9),Ze("ngModelChange",function(s){return Ke(r.filters.fullName,s)||(r.filters.fullName=s),s}),_(),g(13,"input",10),Ze("ngModelChange",function(s){return Ke(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),_(),g(14,"input",11),Ze("ngModelChange",function(s){return Ke(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),_(),g(15,"select",12),Ze("ngModelChange",function(s){return Ke(r.filters.gender,s)||(r.filters.gender=s),s}),g(16,"option",13),M(17,"Select Gender"),_(),g(18,"option",14),M(19,"Male"),_(),g(20,"option",15),M(21,"Female"),_()(),g(22,"input",16),Ze("ngModelChange",function(s){return Ke(r.filters.email,s)||(r.filters.email=s),s}),_(),g(23,"input",17),Ze("ngModelChange",function(s){return Ke(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),_(),g(24,"button",18),M(25,"Apply Filters"),_(),g(26,"button",19),le("click",function(){return r.clearFilters()}),M(27," Clear Filters "),_()(),g(28,"div",20)(29,"table",21)(30,"thead")(31,"tr")(32,"th"),M(33,"Medical Record Number"),_(),g(34,"th"),M(35,"Name"),_(),g(36,"th"),M(37,"Actions"),_()()(),g(38,"tbody"),Pe(39,Sae,12,5,"tr",22),_()()()()(),Pe(40,Aae,84,17,"div",23),_()()),i&2&&(A(10),Xe("ngModel",r.filters.firstName),A(),Xe("ngModel",r.filters.lastName),A(),Xe("ngModel",r.filters.fullName),A(),Xe("ngModel",r.filters.dateOfBirth),A(),Xe("ngModel",r.filters.medicalRecordNumber),A(),Xe("ngModel",r.filters.gender),A(7),Xe("ngModel",r.filters.email),A(),Xe("ngModel",r.filters.phoneNumber),A(16),X("ngForOf",r.patients),A(),X("ngIf",r.selectedPatient))},dependencies:[Vt,vt,Mn,Zt,Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,xl,Pn,$n,kt,jt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;height:900px;background-color:#f9f9f9;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:500px;height:900px;background-color:#fff;max-width:500px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{max-width:500px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]})}}return n})();var OV=(()=>{class n{constructor(e,i,r){this.patientService=e,this.router=i,this.panelService=r,this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.showMedicalHistoryModal=!1}ngOnInit(){console.log("CreatePatientComponent initialized"),this.panelService.setPanelId("panel-admin")}createPatient(e){e.preventDefault(),this.patientService.createPatient(this.newPatient).subscribe(i=>{console.log("Patient created:",i),this.clearForm(),alert("Patient created successfully"),this.router.navigate(["/patients"])},i=>{console.error("Error creating patient",i),alert("Error creating patient")})}clearForm(){this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""}}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(Mt),$(ui))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-patient"]],standalone:!0,features:[Je],decls:28,vars:8,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}","required","",3,"ngModelChange","ngModel"],["name","genderOptions","required","",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","0"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Create Patient"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.createPatient(s)}),g(10,"input",7),Ze("ngModelChange",function(s){return Ke(r.newPatient.firstName,s)||(r.newPatient.firstName=s),s}),_(),g(11,"input",8),Ze("ngModelChange",function(s){return Ke(r.newPatient.lastName,s)||(r.newPatient.lastName=s),s}),_(),g(12,"input",9),Ze("ngModelChange",function(s){return Ke(r.newPatient.fullName,s)||(r.newPatient.fullName=s),s}),_(),g(13,"input",10),Ze("ngModelChange",function(s){return Ke(r.newPatient.dateOfBirth,s)||(r.newPatient.dateOfBirth=s),s}),_(),g(14,"select",11),Ze("ngModelChange",function(s){return Ke(r.newPatient.genderOptions,s)||(r.newPatient.genderOptions=s),s}),g(15,"option",12),M(16,"Select Gender"),_(),g(17,"option",13),M(18,"Male"),_(),g(19,"option",14),M(20,"Female"),_()(),g(21,"input",15),Ze("ngModelChange",function(s){return Ke(r.newPatient.email,s)||(r.newPatient.email=s),s}),_(),g(22,"input",16),Ze("ngModelChange",function(s){return Ke(r.newPatient.phoneNumber,s)||(r.newPatient.phoneNumber=s),s}),_(),g(23,"input",17),Ze("ngModelChange",function(s){return Ke(r.newPatient.emergencyContact,s)||(r.newPatient.emergencyContact=s),s}),_(),g(24,"button",18),M(25,"Create Patient"),_(),g(26,"button",19),le("click",function(){return r.clearForm()}),M(27," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.newPatient.firstName),A(),Xe("ngModel",r.newPatient.lastName),A(),Xe("ngModel",r.newPatient.fullName),A(),Xe("ngModel",r.newPatient.dateOfBirth),A(),Xe("ngModel",r.newPatient.genderOptions),A(7),Xe("ngModel",r.newPatient.email),A(),Xe("ngModel",r.newPatient.phoneNumber),A(),Xe("ngModel",r.newPatient.emergencyContact))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,hn,xl,Pn,$n,Vt,kt,jt,Ea,vt],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var AV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}activateAccount(e){return localStorage.removeItem("authToken"),this.http.post(`${this.apiUrl}/ActivatePatientUser?token=${e}`,{},{observe:"response"}).pipe(_n(i=>(console.error("Error activating account:",i),In(i))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var IV=(()=>{class n{constructor(e,i){this.activateUserService=e,this.router=i}ngOnInit(){}onActivate(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.activateUserService.activateAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully activated.")},r=>{console.error("Account activation failed",r),alert("Account activation failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account activation failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account activation cancelled.")}static{this.\u0275fac=function(i){return new(i||n)($(AV),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-activate-patient-user"]],standalone:!0,features:[Je],decls:8,vars:0,consts:[[1,"activate-user-container"],[1,"activate-user-box"],[1,"activate-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"p"),M(3,"Are you sure you want to activate your account?"),_(),g(4,"button",2),le("click",function(){return r.onActivate()}),M(5,"Activate"),_(),g(6,"button",3),le("click",function(){return r.onCancel()}),M(7,"Cancel"),_()()())},styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.activate-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.activate-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.activate-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.activate-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-button[_ngcontent-%COMP%]:hover{background-color:#218838}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function Rae(n,t){if(n&1&&(g(0,"div")(1,"p")(2,"strong"),M(3,"New Phone Number:"),_(),M(4),_()()),n&2){let e=ce(2);A(4),xt(" ",e.phoneNumber,"")}}function Nae(n,t){if(n&1&&(g(0,"div")(1,"p")(2,"strong"),M(3,"New Email:"),_(),M(4),_()()),n&2){let e=ce(2);A(4),xt(" ",e.email,"")}}function kae(n,t){if(n&1&&(g(0,"div",7),Pe(1,Rae,5,1,"div",8)(2,Nae,5,1,"div",8),_()),n&2){let e=ce();A(),X("ngIf",e.phoneNumber),A(),X("ngIf",e.email)}}function Fae(n,t){if(n&1&&(g(0,"div",9),M(1),_()),n&2){let e=ce();A(),xt(" ",e.errorMessage," ")}}function Lae(n,t){if(n&1){let e=dt();g(0,"button",10),le("click",function(){Oe(e);let r=ce();return Ae(r.updateContactInfo())}),M(1,"Confirm"),_()}}function Uae(n,t){if(n&1){let e=dt();g(0,"div",11),me(1,"img",12),g(2,"p"),M(3,"Updates confirmed successfully!"),_(),g(4,"button",13),le("click",function(){Oe(e);let r=ce();return Ae(r.goToHome())}),M(5,"Go to Home"),_()()}}var RV=(()=>{class n{constructor(e,i,r){this.route=e,this.router=i,this.staffService=r,this.errorMessage="",this.token="",this.phoneNumber="",this.email="",this.updateSuccessful=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.phoneNumber=e.phoneNumber||"",this.email=e.email||"",this.token=e.token||""})}updateContactInfo(){let e={token:this.token,phoneNumber:this.phoneNumber,email:this.email};this.staffService.confirmUpdates(e).subscribe({next:i=>{console.log("Updates confirmed",i),this.updateSuccessful=!0},error:i=>{this.updateSuccessful=!1,console.error("Error confirming updates",i),this.errorMessage="Failed to confirm updates"}})}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)($(tr),$(Mt),$(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-confirm-updates-staff"]],standalone:!0,features:[Je],decls:9,vars:4,consts:[[1,"confirm-updates-container"],[1,"confirm-updates-middle"],[1,"top"],["class","info-container",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit","class","btn btn-filter",3,"click",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container"],[4,"ngIf"],[1,"error-message"],["type","submit",1,"btn","btn-filter",3,"click"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),M(4,"Confirm Contact Information"),_()(),Pe(5,kae,3,2,"div",3)(6,Fae,2,1,"div",4)(7,Lae,2,0,"button",5)(8,Uae,6,0,"div",6),_()()),i&2&&(A(5),X("ngIf",!r.updateSuccessful),A(),X("ngIf",r.errorMessage),A(),X("ngIf",!r.updateSuccessful),A(),X("ngIf",r.updateSuccessful))},dependencies:[vt,Zt],styles:[".confirm-updates-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.confirm-updates-container[_ngcontent-%COMP%]   .confirm-updates-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.confirm-updates-container[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:small}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.confirm-updates-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var NV=(()=>{class n{constructor(e,i,r,o,s,a){this.patientService=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.medicalHistoryService=a,this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.getPatient()}getPatient(){let e=this.extractMedicalRecordNumberFromUrl();this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.existingPatient=i[0],console.log("Patient fetched:",i)},i=>{console.error("Error fetching patient",i)})}updatePatientDetails(e){e.preventDefault();let i=this.extractMedicalRecordNumberFromUrl();this.patientService.updatePatient(i,this.existingPatient).subscribe(r=>{console.log("Patient updated successfully:",r),alert("Patient updated successfully!"),this.router.navigate(["/manage-patients"])},r=>{console.error("Error updating patient:",r),alert("Error updating patient"+r)})}extractMedicalRecordNumberFromUrl(){let e=window.location.href,i=/\/update-patient\/(\d+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Medical record number not found in URL.")}clearForm(){this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(Mt),$(ui),$(Xr),$(Zr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-patient"]],standalone:!0,features:[Je],decls:20,vars:6,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Update Patient"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.updatePatientDetails(s)}),g(10,"input",7),Ze("ngModelChange",function(s){return Ke(r.existingPatient.firstName,s)||(r.existingPatient.firstName=s),s}),_(),g(11,"input",8),Ze("ngModelChange",function(s){return Ke(r.existingPatient.lastName,s)||(r.existingPatient.lastName=s),s}),_(),g(12,"input",9),Ze("ngModelChange",function(s){return Ke(r.existingPatient.fullName,s)||(r.existingPatient.fullName=s),s}),_(),g(13,"input",10),Ze("ngModelChange",function(s){return Ke(r.existingPatient.email,s)||(r.existingPatient.email=s),s}),_(),g(14,"input",11),Ze("ngModelChange",function(s){return Ke(r.existingPatient.phoneNumber,s)||(r.existingPatient.phoneNumber=s),s}),_(),g(15,"input",12),Ze("ngModelChange",function(s){return Ke(r.existingPatient.emergencyContact,s)||(r.existingPatient.emergencyContact=s),s}),_(),g(16,"button",13),M(17,"Update Patient"),_(),g(18,"button",14),le("click",function(){return r.clearForm()}),M(19," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.existingPatient.firstName),A(),Xe("ngModel",r.existingPatient.lastName),A(),Xe("ngModel",r.existingPatient.fullName),A(),Xe("ngModel",r.existingPatient.email),A(),Xe("ngModel",r.existingPatient.phoneNumber),A(),Xe("ngModel",r.existingPatient.emergencyContact))},dependencies:[Dt,Yt,Nt,Ft,qt,hn,Pn,$n,Vt,kt,jt,vt],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:90vh;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Vae=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return(this.getStyle(t,"position")||"static")==="static"},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){e===void 0&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if(this.getStyle(t,"position")==="fixed")i=t.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var o=this.offsetParent(t);i=this.offset(t,!1),o!==document.documentElement&&(r=this.offset(o,!1)),r.top+=o.clientTop,r.left+=o.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){e===void 0&&(e=!0);var i=t.getBoundingClientRect(),r={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft},o={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r.top,bottom:i.bottom+r.top,left:i.left+r.left,right:i.right+r.left};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o},n.prototype.positionElements=function(t,e,i,r){var o=i.split("-"),s=o[0],a=s===void 0?"top":s,l=o[1],u=l===void 0?"center":l,f=r?this.offset(t,!1):this.position(t,!1),h=this.getAllStyles(e),m=parseFloat(h.marginTop),p=parseFloat(h.marginBottom),b=parseFloat(h.marginLeft),C=parseFloat(h.marginRight),y=0,x=0;switch(a){case"top":y=f.top-(e.offsetHeight+m+p);break;case"bottom":y=f.top+f.height;break;case"left":x=f.left-(e.offsetWidth+b+C);break;case"right":x=f.left+f.width;break}switch(u){case"top":y=f.top;break;case"bottom":y=f.top+f.height-e.offsetHeight;break;case"left":x=f.left;break;case"right":x=f.left+f.width-e.offsetWidth;break;case"center":a==="top"||a==="bottom"?x=f.left+f.width/2-e.offsetWidth/2:y=f.top+f.height/2-e.offsetHeight/2;break}e.style.transform="translate("+Math.round(x)+"px, "+Math.round(y)+"px)";var T=e.getBoundingClientRect(),E=document.documentElement,D=window.innerHeight||E.clientHeight,V=window.innerWidth||E.clientWidth;return T.left>=0&&T.top>=0&&T.right<=V&&T.bottom<=D},n}();var Bae=/\s+/,kV=new Vae;function $T(n,t,e,i,r){var o=Array.isArray(e)?e:e.split(Bae),s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,l=function(y){var x=y.split("-"),T=x[0],E=x[1],D=[];return r&&(D.push(r+"-"+T),E&&D.push(r+"-"+T+"-"+E),D.forEach(function(V){a.add(V)})),D};r&&s.forEach(function(y){a.remove(r+"-"+y)});var u=o.findIndex(function(y){return y==="auto"});u>=0&&s.forEach(function(y){o.find(function(x){return x.search("^"+y)!==-1})==null&&o.splice(u++,1,y)});var f=t.style;f.position="absolute",f.top="0",f.left="0",f["will-change"]="transform";for(var h,m=!1,p=0,b=o;p<b.length;p++){h=b[p];var C=l(h);if(kV.positionElements(n,t,h,i)){m=!0;break}r&&C.forEach(function(y){a.remove(y)})}return m||(h=o[0],l(h),kV.positionElements(n,t,h,i)),h}var sa=function(){return sa=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sa.apply(this,arguments)},qT=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,o;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))},gx=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(gx||{}),zae=[gx.SUNDAY,gx.SATURDAY],YT=7,XT=24,px=60,Bc=60*60*24;function FV(n,t){var e=t.startDate,i=t.seconds,r=t.excluded,o=t.precision;if(r.length<1)return 0;for(var s=n.addSeconds,a=n.getDay,l=n.addDays,u=s(e,i-1),f=a(e),h=a(u),m=0,p=e,b=function(){var C=a(p);r.some(function(y){return y===C})&&(m+=Hae(n,{dayStart:f,dayEnd:h,day:C,precision:o,startDate:e,endDate:u})),p=l(p,1)};p<u;)b();return m}function Hae(n,t){var e=t.precision,i=t.day,r=t.dayStart,o=t.dayEnd,s=t.startDate,a=t.endDate,l=n.differenceInSeconds,u=n.endOfDay,f=n.startOfDay;if(e==="minutes"){if(i===r)return l(u(s),s)+1;if(i===o)return l(a,f(a))+1}return Bc}function Wae(n,t){var e=t.event,i=t.offset,r=t.startOfWeekDate,o=t.excluded,s=t.precision,a=t.totalDaysInView,l=n.max,u=n.differenceInSeconds,f=n.addDays,h=n.endOfDay,m=n.differenceInDays,p=Bc,b=l([e.start,r]);if(e.end)switch(s){case"minutes":p=u(e.end,b);break;default:p=m(f(h(e.end),1),b)*Bc;break}var C=i*Bc,y=C+p,x=a*Bc;return y>x&&(p=x-C),p-=FV(n,{startDate:b,seconds:p,excluded:o,precision:s}),p/Bc}function jae(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,o=t.precision,s=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(e.start<i)return 0;var u=0;switch(o){case"days":u=s(a(e.start),i)*Bc;break;case"minutes":u=l(e.start,i);break}return u-=FV(n,{startDate:i,seconds:u,excluded:r,precision:o}),Math.abs(u/Bc)}function Gae(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,o=n.isSameSecond,s=e.start,a=e.end||e.start;return!!(s>i&&s<r||a>i&&a<r||s<i&&a>r||o(s,i)||o(s,r)||o(a,i)||o(a,r))}function zm(n,t){var e=t.events,i=t.periodStart,r=t.periodEnd;return e.filter(function(o){return Gae(n,{event:o,periodStart:i,periodEnd:r})})}function LV(n,t){var e=t.date,i=t.weekendDays,r=i===void 0?zae:i,o=n.startOfDay,s=n.isSameDay,a=n.getDay,l=o(new Date),u=a(e);return{date:e,day:u,isPast:e<l,isToday:s(e,l),isFuture:e>l,isWeekend:r.indexOf(u)>-1}}function yx(n,t){for(var e=t.viewDate,i=t.weekStartsOn,r=t.excluded,o=r===void 0?[]:r,s=t.weekendDays,a=t.viewStart,l=a===void 0?n.startOfWeek(e,{weekStartsOn:i}):a,u=t.viewEnd,f=u===void 0?n.addDays(l,YT):u,h=n.addDays,m=n.getDay,p=[],b=l;b<f;)o.some(function(C){return m(b)===C})||p.push(LV(n,{date:b,weekendDays:s})),b=h(b,1);return p}function $ae(n,t){for(var e=t.date1,i=t.date2,r=t.excluded,o=e,s=0;o<i;)r.indexOf(n.getDay(o))===-1&&s++,o=n.addDays(o,1);return s}function qae(n,t){var e=t.events,i=e===void 0?[]:e,r=t.excluded,o=r===void 0?[]:r,s=t.precision,a=s===void 0?"days":s,l=t.absolutePositionedEvents,u=l===void 0?!1:l,f=t.viewStart,h=t.viewEnd;f=n.startOfDay(f),h=n.endOfDay(h);var m=n.differenceInSeconds,p=n.differenceInDays,b=$ae(n,{date1:f,date2:h,excluded:o}),C=p(h,f)+1,y=i.filter(function(E){return E.allDay}).map(function(E){var D=jae(n,{event:E,startOfWeek:f,excluded:o,precision:a}),V=Wae(n,{event:E,offset:D,startOfWeekDate:f,excluded:o,precision:a,totalDaysInView:C});return{event:E,offset:D,span:V}}).filter(function(E){return E.offset<b}).filter(function(E){return E.span>0}).map(function(E){return{event:E.event,offset:E.offset,span:E.span,startsBeforeWeek:E.event.start<f,endsAfterWeek:(E.event.end||E.event.start)>h}}).sort(function(E,D){var V=m(E.event.start,D.event.start);return V===0?m(D.event.end||D.event.start,E.event.end||E.event.start):V}),x=[],T=[];return y.forEach(function(E,D){if(T.indexOf(E)===-1){T.push(E);var V=E.span+E.offset,B=y.slice(D+1).filter(function(k){if(k.offset>=V&&V+k.span<=C&&T.indexOf(k)===-1){var P=k.offset-V;return u||(k.offset=P),V+=k.span+P,T.push(k),!0}}),F=qT([E],B,!0),G=F.filter(function(k){return k.event.id}).map(function(k){return k.event.id}).join("-");x.push(sa({row:F},G?{id:G}:{}))}}),x}function Yae(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.hourDuration,s=t.dayStart,a=t.dayEnd,l=t.weekStartsOn,u=t.excluded,f=t.weekendDays,h=t.segmentHeight,m=t.viewStart,p=t.viewEnd,b=t.minimumEventHeight,C=Zae(n,{viewDate:i,hourSegments:r,hourDuration:o,dayStart:s,dayEnd:a}),y=yx(n,{viewDate:i,weekStartsOn:l,excluded:u,weekendDays:f,viewStart:m,viewEnd:p}),x=n.setHours,T=n.setMinutes,E=n.getHours,D=n.getMinutes;return y.map(function(V){var B=Xae(n,{events:e,viewDate:V.date,hourSegments:r,dayStart:s,dayEnd:a,segmentHeight:h,eventWidth:1,hourDuration:o,minimumEventHeight:b}),F=C.map(function(P){var N=P.segments.map(function(S){var q=T(x(V.date,E(S.date)),D(S.date));return sa(sa({},S),{date:q})});return sa(sa({},P),{segments:N})});function G(P,N){var S=Math.max.apply(Math,N.map(function(oe){return oe.left+1})),q=P.filter(function(oe){return oe.left>=S}).filter(function(oe){return mx(N,oe.top,oe.top+oe.height).length>0});return q.length>0?G(P,q):S}var k=B.events.map(function(P){var N=G(B.events,mx(B.events,P.top,P.top+P.height)),S=100/N;return sa(sa({},P),{left:P.left*S,width:S})});return{hours:F,date:V.date,events:k.map(function(P){var N=mx(k.filter(function(S){return S.left>P.left}),P.top,P.top+P.height);return N.length>0?sa(sa({},P),{width:Math.min.apply(Math,N.map(function(S){return S.left}))-P.left}):P})}})}function UV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,l=t.precision,u=l===void 0?"days":l,f=t.absolutePositionedEvents,h=f===void 0?!1:f,m=t.hourSegments,p=t.hourDuration,b=t.dayStart,C=t.dayEnd,y=t.weekendDays,x=t.segmentHeight,T=t.minimumEventHeight,E=t.viewStart,D=E===void 0?n.startOfWeek(r,{weekStartsOn:o}):E,V=t.viewEnd,B=V===void 0?n.endOfWeek(r,{weekStartsOn:o}):V;i||(i=[]);var F=n.startOfDay,G=n.endOfDay;D=F(D),B=G(B);var k=zm(n,{events:i,periodStart:D,periodEnd:B}),P=yx(n,{viewDate:r,weekStartsOn:o,excluded:a,weekendDays:y,viewStart:D,viewEnd:B});return{allDayEventRows:qae(n,{events:k,excluded:a,precision:u,absolutePositionedEvents:h,viewStart:D,viewEnd:B}),period:{events:k,start:P[0].date,end:G(P[P.length-1].date)},hourColumns:Yae(n,{events:i,viewDate:r,hourSegments:m,hourDuration:p,dayStart:b,dayEnd:C,weekStartsOn:o,excluded:a,weekendDays:y,segmentHeight:x,viewStart:D,viewEnd:B,minimumEventHeight:T})}}function VV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,l=t.viewStart,u=l===void 0?n.startOfMonth(r):l,f=t.viewEnd,h=f===void 0?n.endOfMonth(r):f,m=t.weekendDays;i||(i=[]);for(var p=n.startOfWeek,b=n.endOfWeek,C=n.differenceInDays,y=n.startOfDay,x=n.addHours,T=n.endOfDay,E=n.isSameMonth,D=n.getDay,V=p(u,{weekStartsOn:o}),B=b(h,{weekStartsOn:o}),F=zm(n,{events:i,periodStart:V,periodEnd:B}),G=[],k,P=function(de){var J;if(k?(J=y(x(k,XT)),k.getTime()===J.getTime()&&(J=y(x(k,XT+1))),k=J):J=k=V,!a.some(function(Le){return D(J)===Le})){var Q=LV(n,{date:J,weekendDays:m}),Ie=zm(n,{events:F,periodStart:y(J),periodEnd:T(J)});Q.inMonth=E(J,r),Q.events=Ie,Q.badgeTotal=Ie.length,G.push(Q)}},N=0;N<C(B,V)+1;N++)P(N);var S=[],q=YT-a.length;if(q<YT)for(var N=0;N<G.length;N+=q){var oe=G.slice(N,N+q),ee=oe.some(function(J){return u<=J.date&&J.date<h});ee&&(S=qT(qT([],S,!0),oe,!0))}else S=G;for(var ge=Math.floor(S.length/q),se=[],N=0;N<ge;N++)se.push(N*q);return{rowOffsets:se,totalDaysVisibleInWeek:q,days:S,period:{start:S[0].date,end:T(S[S.length-1].date),events:F}}}function mx(n,t,e){return n.filter(function(i){var r=i.top,o=i.top+i.height;return t<o&&o<e||t<r&&r<e?!0:r<=t&&e<=o})}function Xae(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.dayStart,s=t.dayEnd,a=t.eventWidth,l=t.segmentHeight,u=t.hourDuration,f=t.minimumEventHeight,h=n.setMinutes,m=n.setHours,p=n.startOfDay,b=n.startOfMinute,C=n.endOfDay,y=n.differenceInMinutes,x=h(m(p(i),_x(o.hour)),vx(o.minute)),T=h(m(b(C(i)),_x(s.hour)),vx(s.minute));T.setSeconds(59,999);var E=[],D=zm(n,{events:e.filter(function(G){return!G.allDay}),periodStart:x,periodEnd:T}),V=D.sort(function(G,k){return G.start.valueOf()-k.start.valueOf()}).map(function(G){var k=G.start,P=G.end||k,N=k<x,S=P>T,q=r*l/(u||px),oe=0;if(k>x){var ee=n.getTimezoneOffset(k),ge=n.getTimezoneOffset(x),se=ge-ee;oe+=y(k,x)+se}oe*=q,oe=Math.floor(oe);var de=N?x:k,J=S?T:P,Q=n.getTimezoneOffset(de)-n.getTimezoneOffset(J),Ie=y(J,de)+Q;G.end?Ie*=q:Ie=l,f&&Ie<f&&(Ie=f),Ie=Math.floor(Ie);for(var Le=oe+Ie,Ne=mx(E,oe,Le),Ce=0;Ne.some(function(Ge){return Ge.left===Ce});)Ce+=a;var He={event:G,height:Ie,width:a,top:oe,left:Ce,startsBeforeDay:N,endsAfterDay:S};return E.push(He),He}),B=Math.max.apply(Math,V.map(function(G){return G.left+G.width})),F=zm(n,{events:e.filter(function(G){return G.allDay}),periodStart:p(x),periodEnd:C(T)});return{events:V,width:B,allDayEvents:F,period:{events:D,start:x,end:T}}}function _x(n){return Math.max(Math.min(23,n),0)}function vx(n){return Math.max(Math.min(59,n),0)}function Zae(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,o=t.dayStart,s=t.dayEnd,a=n.setMinutes,l=n.setHours,u=n.startOfDay,f=n.startOfMinute,h=n.endOfDay,m=n.addMinutes,p=n.addDays,b=[],C=a(l(u(e),_x(o.hour)),vx(o.minute)),y=a(l(f(h(e)),_x(s.hour)),vx(s.minute)),x=(r||px)/i,T=u(e),E=h(e),D=function(P){return P};n.getTimezoneOffset(T)!==n.getTimezoneOffset(E)&&(T=p(T,1),C=p(C,1),y=p(y,1),D=function(P){return p(P,-1)});for(var V=r?XT*60/r:px,B=0;B<V;B++){for(var F=[],G=0;G<i;G++){var k=m(m(C,B*(r||px)),G*x);k>=C&&k<y&&F.push({date:D(k),displayDate:k,isStart:G===0})}F.length>0&&b.push({segments:F})}return b}var hh=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(hh||{});function BV(n,t){var e=!0;function i(r,o){t(r,o),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(hh.StartPropertyNotDate,r):i(hh.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(hh.EndPropertyNotDate,r),r.start>r.end&&i(hh.EndsBeforeStart,r))}),e):(t(hh.NotArray,n),!1)}function Kae(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}function QT(n,t){return n=Kae(n,t),typeof n=="function"?function(){for(var i=arguments,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=i[s];return!!n.apply(this,o)}:n?function(){return!0}:function(){return!1}}var ZT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol?"symbol":typeof n},HV=function(n){return n!=null&&(typeof n>"u"?"undefined":ZT(n))==="object"&&n.nodeType===1&&ZT(n.style)==="object"&&ZT(n.ownerDocument)==="object"};function WV(n,t){if(t=nD(t,!0),!HV(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function eD(n,t){return WV(n,t)!==-1}function Jae(n,t){for(var e=0;e<t.length;e++)eD(n,t[e])||n.push(t[e]);return t}function Qae(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e=e.map(nD),Jae(n,e)}function ele(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(nD).reduce(function(r,o){var s=WV(n,o);return s!==-1?r.concat(n.splice(s,1)):r},[])}function nD(n,t){if(typeof n=="string")try{return document.querySelector(n)}catch(e){throw e}if(!HV(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function tle(n,t){t=t||{};var e=QT(t.allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,!!e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(r.pageX===null&&r.clientX!==null){var o=r.target&&r.target.ownerDocument||document,s=o.documentElement,a=o.body;n.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}function nle(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}function jV(n){if(n===window)return nle();try{var t=n.getBoundingClientRect();return t.x===void 0&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}function ile(n,t){var e=jV(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}var tD=void 0;typeof Object.create!="function"?tD=function(n){var t=function(){};return function(e,i){if(e!==Object(e)&&e!==null)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,i!==n&&Object.defineProperties(r,i),e===null&&(r.__proto__=null),r}}():tD=Object.create;var rle=tD,Ku=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function ole(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};n!==void 0&&n.addEventListener("mousemove",e);function e(o){for(var s=0;s<Ku.length;s++)t[Ku[s]]=o[Ku[s]]}var i=function(){if(MouseEvent)return function(s,a,l){var u=new MouseEvent("mousemove",KT(t,a));return JT(u,l),s.dispatchEvent(u)};if(typeof document.createEvent=="function")return function(s,a,l){var u=KT(t,a),f=document.createEvent("MouseEvents");return f.initMouseEvent("mousemove",!0,!0,window,0,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget),JT(f,l),s.dispatchEvent(f)};if(typeof document.createEventObject=="function")return function(s,a,l){var u=document.createEventObject(),f=KT(t,a);for(var h in f)u[h]=f[h];return JT(u,l),s.dispatchEvent(u)}}();function r(){n&&n.removeEventListener("mousemove",e,!1),t=null}return{destroy:r,dispatch:i}}function KT(n,t){t=t||{};for(var e=rle(n),i=0;i<Ku.length;i++)t[Ku[i]]!==void 0&&(e[Ku[i]]=t[Ku[i]]);return e}function JT(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var Wm=["webkit","moz","ms","o"],Hm=function(){if(typeof window>"u")return function(){};for(var n=0,t=Wm.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[Wm[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=new Date().getTime(),o=Math.max(0,16-r-e),s=window.setTimeout(function(){return i(r+o)},o);return e=r+o,s}}return window.requestAnimationFrame.bind(window)}(),ph=function(){if(typeof window>"u")return function(){};for(var n=0,t=Wm.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[Wm[n]+"CancelAnimationFrame"]||window[Wm[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function sle(n,t){t===void 0&&(t={});var e=this,i=4,r=!1;if(typeof t.margin!="object"){var o=t.margin||-1;this.margin={left:o,right:o,top:o,bottom:o}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var s={},a=tle(s),l=ole(),u=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),typeof i!="object"&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=QT(t.autoScroll),this.syncMove=QT(t.syncMove,!1),this.destroy=function(N){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",C,!1),window.removeEventListener("touchstart",C,!1),window.removeEventListener("mouseup",y,!1),window.removeEventListener("touchend",y,!1),window.removeEventListener("pointerup",y,!1),window.removeEventListener("mouseleave",T,!1),window.removeEventListener("mousemove",V,!1),window.removeEventListener("touchmove",V,!1),window.removeEventListener("scroll",b,!0),n=[],N&&x()},this.add=function(){for(var N=[],S=arguments.length;S--;)N[S]=arguments[S];return Qae.apply(void 0,[n].concat(N)),this},this.remove=function(){for(var N=[],S=arguments.length;S--;)N[S]=arguments[S];return ele.apply(void 0,[n].concat(N))};var f=null,h;Object.prototype.toString.call(n)!=="[object Array]"&&(n=[n]),function(N){n=[],N.forEach(function(S){S===window?f=window:e.add(S)})}(n),Object.defineProperties(this,{down:{get:function(){return u}},maxSpeed:{get:function(){return i}},point:{get:function(){return s}},scrolling:{get:function(){return r}}});var m=null,p;window.addEventListener("mousedown",C,!1),window.addEventListener("touchstart",C,!1),window.addEventListener("mouseup",y,!1),window.addEventListener("touchend",y,!1),window.addEventListener("pointerup",y,!1),window.addEventListener("mousemove",V,!1),window.addEventListener("touchmove",V,!1),window.addEventListener("mouseleave",T,!1),window.addEventListener("scroll",b,!0);function b(N){for(var S=0;S<n.length;S++)if(n[S]===N.target){r=!0;break}r&&Hm(function(){return r=!1})}function C(){u=!0}function y(){u=!1,x()}function x(){ph(p),ph(h)}function T(){u=!1}function E(N){if(!N)return null;if(m===N||eD(n,N))return N;for(;N=N.parentNode;)if(eD(n,N))return N;return null}function D(){for(var N=null,S=0;S<n.length;S++)zV(s,n[S])&&(N=n[S]);return N}function V(N){if(e.autoScroll()&&!N.dispatched){var S=N.target,q=document.body;m&&!zV(s,m)&&(e.scrollWhenOutside||(m=null)),S&&S.parentNode===q?S=D():(S=E(S),S||(S=D())),S&&S!==m&&(m=S),f&&(ph(h),h=Hm(B)),m&&(ph(p),p=Hm(F))}}function B(){G(f),ph(h),h=Hm(B)}function F(){m&&(G(m),ph(p),p=Hm(F))}function G(N){var S=jV(N),q,oe;s.x<S.left+e.margin.left?q=Math.floor(Math.max(-1,(s.x-S.left)/e.margin.left-1)*e.maxSpeed.left):s.x>S.right-e.margin.right?q=Math.ceil(Math.min(1,(s.x-S.right)/e.margin.right+1)*e.maxSpeed.right):q=0,s.y<S.top+e.margin.top?oe=Math.floor(Math.max(-1,(s.y-S.top)/e.margin.top-1)*e.maxSpeed.top):s.y>S.bottom-e.margin.bottom?oe=Math.ceil(Math.min(1,(s.y-S.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):oe=0,e.syncMove()&&l.dispatch(N,{pageX:s.pageX+q,pageY:s.pageY+oe,clientX:s.x+q,clientY:s.y+oe}),setTimeout(function(){oe&&k(N,oe),q&&P(N,q)})}function k(N,S){N===window?window.scrollTo(N.pageXOffset,N.pageYOffset+S):N.scrollTop+=S}function P(N,S){N===window?window.scrollTo(N.pageXOffset+S,N.pageYOffset):N.scrollLeft+=S}}function ale(n,t){return new sle(n,t)}function zV(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:ile(n,t)}var GV=ale;function iD(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function xx(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}var qV=(()=>{class n{constructor(){this.currentDrag=new On}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),YV=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)($(li))},n.\u0275dir=en({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),XV=(()=>{class n{constructor(e,i,r,o,s,a,l){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=o,this.vcr=s,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new yt,this.dragStart=new yt,this.ghostElementCreated=new yt,this.dragging=new yt,this.dragEnd=new yt,this.pointerDown$=new On,this.pointerMove$=new On,this.pointerUp$=new On,this.eventListenerSubscriptions={},this.destroy$=new On,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();let e=this.pointerDown$.pipe(gi(()=>this.canDrag()),mi(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();let r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText(`
          body * {
           -moz-user-select: none;
           -ms-user-select: none;
           -webkit-user-select: none;
           user-select: none;
          }
        `)),requestAnimationFrame(()=>{this.document.head.appendChild(r)});let o=this.getScrollPosition(),s=new Jt(p=>{let b=this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window";return this.renderer.listen(b,"scroll",C=>p.next(C))}).pipe(ou(o),Tt(()=>this.getScrollPosition())),a=new On,l=new Zh;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});let u=ss(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(as()),f=ru([this.pointerMove$,s]).pipe(Tt(([p,b])=>({currentDrag$:a,transformX:p.clientX-i.clientX,transformY:p.clientY-i.clientY,clientX:p.clientX,clientY:p.clientY,scrollLeft:b.left,scrollTop:b.top,target:p.event.target})),Tt(p=>(this.dragSnapGrid.x&&(p.transformX=Math.round(p.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(p.transformY=Math.round(p.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),p)),Tt(p=>(this.dragAxis.x||(p.transformX=0),this.dragAxis.y||(p.transformY=0),p)),Tt(p=>{let b=p.scrollLeft-o.left,C=p.scrollTop-o.top;return $t(We({},p),{x:p.transformX+b,y:p.transformY+C})}),gi(({x:p,y:b,transformX:C,transformY:y})=>!this.validateDrag||this.validateDrag({x:p,y:b,transform:{x:C,y}})),xo(u),as()),h=f.pipe(Nr(1),as()),m=f.pipe(Jl(1),as());return h.subscribe(({clientX:p,clientY:b,x:C,y})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=GV([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],$t(We({},this.autoScroll),{autoScroll(){return!0}})),iD(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){let x=this.element.nativeElement.getBoundingClientRect(),T=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(T):this.element.nativeElement.parentNode.insertBefore(T,this.element.nativeElement.nextSibling),this.ghostElement=T,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(T,{position:"fixed",top:`${x.top}px`,left:`${x.left}px`,width:`${x.width}px`,height:`${x.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){let E=this.vcr.createEmbeddedView(this.ghostElementTemplate);T.innerHTML="",E.rootNodes.filter(D=>D instanceof Node).forEach(D=>{T.appendChild(D)}),m.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(E))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:p-C,clientY:b-y,element:T})}),m.subscribe(()=>{T.parentElement.removeChild(T),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),m.pipe(mi(p=>{let b=l.pipe(iM(),Nr(1),Tt(C=>$t(We({},p),{dragCancelled:C>0})));return l.complete(),b})).subscribe(({x:p,y:b,dragCancelled:C})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:p,y:b,dragCancelled:C})}),xx(this.renderer,this.element,this.dragActiveClass),a.complete()}),ss(u,m).pipe(Nr(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),f}),as());ss(e.pipe(Nr(1),Tt(i=>[,i])),e.pipe(Od())).pipe(gi(([i,r])=>i?i.x!==r.x||i.y!==r.y:!0),Tt(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:o,clientX:s,clientY:a,transformX:l,transformY:u,target:f})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){let h=`translate3d(${l}px, ${u}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:h,"-webkit-transform":h,"-ms-transform":h,"-moz-transform":h,"-o-transform":h})}}),o.next({clientX:s,clientY:a,dropData:this.dropData,target:f})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){let e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){e.button===0&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){e.button===0&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,o;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,o=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){let s=Xl(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Xl(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&o&&(r=this.shouldBeginDrag(e,l,i)),(!this.touchStartLongPress||!o||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{s.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){let o=this.getScrollPosition(),s={top:Math.abs(o.top-r.top),left:Math.abs(o.left-r.left)},a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-s.left,l=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-s.top,u=a+l,f=this.touchStartLongPress;return(u>f.delta||s.top>0||s.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=f.delay?(this.disableScroll(),!0):!1}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){let e=this.getScrollElement(),i=e.scrollWidth>e.clientWidth,r=e.scrollHeight>e.clientHeight;return i||r}}return n.\u0275fac=function(e){return new(e||n)($(li),$(Oi),$(qV),$(jn),$(zo),$(YV,8),$(Zi))},n.\u0275dir=en({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[xr]}),n})();function $V(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}var rD=(()=>{class n{constructor(e,i,r,o,s){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=o,this.scrollContainer=s,this.dragEnter=new yt,this.dragLeave=new yt,this.dragOver=new yt,this.drop=new yt}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{iD(this.renderer,this.element,this.dragActiveClass);let i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0}),o,s=e.pipe(Tt(({clientX:u,clientY:f,dropData:h,target:m})=>{o={clientX:u,clientY:f,dropData:h,target:m},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);let p=$V(u,f,i.rect),b=!this.validateDrop||this.validateDrop({clientX:u,clientY:f,target:m,dropData:h});return i.scrollContainerRect?p&&b&&$V(u,f,i.scrollContainerRect):p&&b})),a=s.pipe(oM()),l;a.pipe(gi(u=>u)).subscribe(()=>{l=!0,iD(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(o)})}),s.pipe(gi(u=>u)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(o)})}),a.pipe(Od(),gi(([u,f])=>u&&!f)).subscribe(()=>{l=!1,xx(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(o)})}),e.subscribe({complete:()=>{r(),xx(this.renderer,this.element,this.dragActiveClass),l&&(xx(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(o)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)($(li),$(qV),$(jn),$(Oi),$(YV,8))},n.\u0275dir=en({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),jm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({}),n})();var mh=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(mh||{});function ZV(n,t){return{type:mh.Trigger,name:n,definitions:t,options:{}}}function oD(n,t=null){return{type:mh.Animate,styles:t,timings:n}}function sD(n){return{type:mh.Style,styles:n,offset:null}}function aD(n,t,e){return{type:mh.State,name:n,styles:t,options:e}}function lD(n,t,e=null){return{type:mh.Transition,expr:n,animation:t,options:e}}var Ju=typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function cle(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),i==="canvas"?QV(n,t):(i==="input"||i==="select"||i==="textarea")&&JV(n,t),KV("canvas",n,t,QV),KV("input, textarea, select",n,t,JV),t}function KV(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var ule=0;function JV(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${ule++}`)}function QV(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function eB(n,t,e,i){let r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}function dle(n,t){let e=0,i=0,r=n.nativeElement.style,s=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(s&&s.includes("translate")&&(e=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),t==="absolute")return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{let a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}var tB=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function nB(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function bx({edges:n,initialRectangle:t,newRectangle:e}){let i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}var iB="resize-active",fle="resize-ghost-element",hle=50,uD=(()=>{class n{constructor(e,i,r,o){this.platformId=e,this.renderer=i,this.elm=r,this.zone=o,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=tB,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=hle,this.resizeStart=new yt,this.resizing=new yt,this.resizeEnd=new yt,this.mouseup=new On,this.mousedown=new On,this.mousemove=new On,this.destroy$=new On,this.pointerEventListeners=cD.getInstance(i,o)}ngOnInit(){let e=ss(this.pointerEventListeners.pointerDown,this.mousedown),i=ss(this.pointerEventListeners.pointerMove,this.mousemove).pipe(_i(({event:u})=>{o&&u.cancelable&&u.preventDefault()}),as()),r=ss(this.pointerEventListeners.pointerUp,this.mouseup),o,s=()=>{o&&o.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>We(We({},tB),this.resizeCursors);e.pipe(mi(u=>{function f(p){return{clientX:p.clientX-u.clientX,clientY:p.clientY-u.clientY}}let h=()=>{let p={x:1,y:1};return o&&(this.resizeSnapGrid.left&&o.edges.left?p.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&o.edges.right&&(p.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&o.edges.top?p.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&o.edges.bottom&&(p.y=+this.resizeSnapGrid.bottom)),p};function m(p,b){return{x:Math.ceil(p.clientX/b.x),y:Math.ceil(p.clientY/b.y)}}return ss(i.pipe(Nr(1)).pipe(Tt(p=>[,p])),i.pipe(Od())).pipe(Tt(([p,b])=>[p&&f(p),f(b)])).pipe(gi(([p,b])=>{if(!p)return!0;let C=h(),y=m(p,C),x=m(b,C);return y.x!==x.x||y.y!==x.y})).pipe(Tt(([,p])=>{let b=h();return{clientX:Math.round(p.clientX/b.x)*b.x,clientY:Math.round(p.clientY/b.y)*b.y}})).pipe(xo(ss(r,e)))})).pipe(gi(()=>!!o)).pipe(Tt(({clientX:u,clientY:f})=>eB(o.startingRect,o.edges,u,f))).pipe(gi(u=>this.allowNegativeResizes||!!(u.height&&u.width&&u.height>0&&u.width>0))).pipe(gi(u=>this.validateResize?this.validateResize({rectangle:u,edges:bx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:u})}):!0),xo(this.destroy$)).subscribe(u=>{o&&o.clonedNode&&(this.renderer.setStyle(o.clonedNode,"height",`${u.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${u.width}px`),this.renderer.setStyle(o.clonedNode,"top",`${u.top}px`),this.renderer.setStyle(o.clonedNode,"left",`${u.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:bx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:u}),rectangle:u})}),o.currentRect=u}),e.pipe(Tt(({edges:u})=>u||{}),gi(u=>Object.keys(u).length>0),xo(this.destroy$)).subscribe(u=>{o&&s();let f=dle(this.elm,this.ghostElementPositioning);o={edges:u,startingRect:f,currentRect:f};let h=a(),m=nB(o.edges,h);this.renderer.setStyle(document.body,"cursor",m),this.setElementClass(this.elm,iB,!0),this.enableGhostResize&&(o.clonedNode=cle(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(o.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(o.clonedNode,"left",`${o.startingRect.left}px`),this.renderer.setStyle(o.clonedNode,"top",`${o.startingRect.top}px`),this.renderer.setStyle(o.clonedNode,"height",`${o.startingRect.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${o.startingRect.width}px`),this.renderer.setStyle(o.clonedNode,"cursor",nB(o.edges,h)),this.renderer.addClass(o.clonedNode,fle),o.clonedNode.scrollTop=o.startingRect.scrollTop,o.clonedNode.scrollLeft=o.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:bx({edges:u,initialRectangle:f,newRectangle:f}),rectangle:eB(f,{},0,0)})})}),r.pipe(xo(this.destroy$)).subscribe(()=>{o&&(this.renderer.removeClass(this.elm.nativeElement,iB),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:bx({edges:o.edges,initialRectangle:o.startingRect,newRectangle:o.currentRect}),rectangle:o.currentRect})}),s(),o=null)})}ngOnDestroy(){of(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)($(Fr),$(Oi),$(li),$(jn))},n.\u0275dir=en({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})(),cD=class n{constructor(t,e){this.pointerDown=new Jt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ju&&(o=t.listen("document","touchstart",s=>{i.next({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,event:s})}))}),()=>{r(),Ju&&o()}}).pipe(as()),this.pointerMove=new Jt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ju&&(o=t.listen("document","touchmove",s=>{i.next({clientX:s.targetTouches[0].clientX,clientY:s.targetTouches[0].clientY,event:s})}))}),()=>{r(),Ju&&o()}}).pipe(as()),this.pointerUp=new Jt(i=>{let r,o,s;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),Ju&&(o=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),s=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),Ju&&(o(),s())}}).pipe(as())}static getInstance(t,e){return n.instance||(n.instance=new n(t,e)),n.instance}},rB=(()=>{class n{constructor(e,i,r,o){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=o,this.resizeEdges={},this.eventListeners={},this.destroy$=new On}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Ju&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),ss(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",o=>{this.onMousemove(o,o.targetTouches[0].clientX,o.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",o=>{this.onMousemove(o,o.clientX,o.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Xl(this.element.nativeElement,e).pipe(xo(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)($(Oi),$(li),$(jn),$(uD,8))},n.\u0275dir=en({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),dD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({}),n})();var mle=(n,t)=>({event:n,trackByActionId:t}),gle=n=>({action:n});function _le(n,t){if(n&1){let e=dt();g(0,"a",5),Lr(1,"calendarA11y"),le("mwlClick",function(r){let o=Oe(e).$implicit,s=ce(2).event;return Ae(o.onClick({event:s,sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=Oe(e).$implicit,s=ce(2).event;return Ae(o.onClick({event:s,sourceEvent:r}))}),_()}if(n&2){let e=t.$implicit;X("ngClass",e.cssClass)("innerHtml",e.label,w_),Xi("aria-label",dl(1,3,ni(6,gle,e),"actionButtonLabel"))}}function vle(n,t){if(n&1&&(g(0,"span",3),Pe(1,_le,2,8,"a",4),_()),n&2){let e=ce(),i=e.event,r=e.trackByActionId;A(),X("ngForOf",i.actions)("ngForTrackBy",r)}}function yle(n,t){if(n&1&&Pe(0,vle,2,2,"span",2),n&2){let e=t.event;X("ngIf",e.actions)}}function xle(n,t){}var ble=(n,t)=>({event:n,view:t}),Cx=()=>({});function Cle(n,t){if(n&1&&(me(0,"span",2),Lr(1,"calendarEventTitle"),Lr(2,"calendarA11y")),n&2){let e=t.event,i=t.view;X("innerHTML",Qd(1,2,e.title,i,e),w_),Xi("aria-hidden",dl(2,6,Hi(9,Cx),"hideEventTitle"))}}function Mle(n,t){}var wle=(n,t,e)=>({contents:n,placement:t,event:e});function Ele(n,t){if(n&1&&(g(0,"div",2),me(1,"div",3)(2,"div",4),_()),n&2){let e=t.contents,i=t.placement;X("ngClass","cal-tooltip-"+i),A(2),X("innerHtml",e,w_)}}function Sle(n,t){}var hD=(n,t)=>({x:n,y:t}),lB=()=>({delay:300,delta:30});var Ple=(n,t)=>({event:n,locale:t});var Tle=(n,t,e,i,r,o)=>({days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:o});function Dle(n,t){if(n&1){let e=dt();g(0,"div",4),le("mwlClick",function(r){let o=Oe(e).$implicit,s=ce().dayHeaderClicked;return Ae(s.emit({day:o,sourceEvent:r}))})("drop",function(r){let o=Oe(e).$implicit,s=ce().eventDropped;return Ae(s.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){let r=Oe(e).$implicit,o=ce().dragEnter;return Ae(o.emit({date:r.date}))}),g(1,"b"),M(2),Lr(3,"calendarDate"),_(),me(4,"br"),g(5,"span"),M(6),Lr(7,"calendarDate"),_()()}if(n&2){let e=t.$implicit,i=ce().locale;wo("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),X("ngClass",e.cssClass),A(2),Ye(Qd(3,11,e.date,"weekViewColumnHeader",i)),A(4),Ye(Qd(7,15,e.date,"weekViewColumnSubHeader",i))}}function Ole(n,t){if(n&1&&(g(0,"div",2),Pe(1,Dle,8,19,"div",3),_()),n&2){let e=t.days,i=t.trackByWeekDayHeaderDate;A(),X("ngForOf",e)("ngForTrackBy",i)}}function Ale(n,t){}var Ile=(n,t,e,i,r,o,s,a,l)=>({weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:o,tooltipDelay:s,column:a,daysInWeek:l}),Rle=(n,t,e)=>({color:n,backgroundColor:t,borderColor:e});function Nle(n,t){if(n&1){let e=dt();g(0,"div",2),Lr(1,"calendarEventTitle"),Lr(2,"calendarA11y"),le("mwlClick",function(r){let o=Oe(e).eventClicked;return Ae(o.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=Oe(e).eventClicked;return Ae(o.emit({sourceEvent:r}))}),me(3,"mwl-calendar-event-actions",3),M(4," "),me(5,"mwl-calendar-event-title",4),_()}if(n&2){let e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,o=t.tooltipAppendToBody,s=t.tooltipDisabled,a=t.tooltipDelay,l=t.daysInWeek,u=ce();X("ngStyle",x1(20,Rle,e.event.color==null?null:e.event.color.secondaryText,e.event.color==null?null:e.event.color.secondary,e.event.color==null?null:e.event.color.primary))("mwlCalendarTooltip",s?"":Qd(1,13,e.event.title,l===1?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",o)("tooltipDelay",a),Xi("aria-label",dl(2,17,xa(24,Ple,e.tempEvent||e.event,u.locale),"eventDescription")),A(3),X("event",e.tempEvent||e.event)("customTemplate",u.eventActionsTemplate),A(2),X("event",e.tempEvent||e.event)("customTemplate",u.eventTitleTemplate)("view",l===1?"day":"week")}}function kle(n,t){}var Fle=(n,t,e,i,r)=>({segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r});function Lle(n,t){if(n&1&&(g(0,"div",4),M(1),Lr(2,"calendarDate"),_()),n&2){let e=ce(),i=e.segment,r=e.locale,o=e.daysInWeek;A(),xt(" ",Qd(2,1,i.displayDate,o===1?"dayViewHour":"weekViewHour",r)," ")}}function Ule(n,t){if(n&1&&(g(0,"div",2),Lr(1,"calendarA11y"),Pe(2,Lle,3,5,"div",3),_()),n&2){let e=t.segment,i=t.segmentHeight,r=t.isTimeLabel,o=t.daysInWeek;ul("height",i,"px"),wo("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),X("ngClass",e.cssClass),Xi("aria-hidden",dl(1,9,Hi(12,Cx),o===1?"hideDayHourSegment":"hideWeekHourSegment")),A(2),X("ngIf",r)}}function Vle(n,t){}var Ble=(n,t,e,i,r,o,s)=>({columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:o,topPx:s});function zle(n,t){if(n&1&&me(0,"div",3),n&2){let e=ce().topPx;ul("top",e,"px")}}function Hle(n,t){if(n&1&&Pe(0,zle,1,2,"div",2),n&2){let e=t.isVisible;X("ngIf",e)}}function Wle(n,t){}var jle=(n,t)=>({left:n,right:t}),cB=(n,t)=>({event:n,calendarId:t}),Gle=n=>({x:n}),$le=()=>({left:!0}),qle=()=>({right:!0}),Yle=(n,t,e,i)=>({left:n,right:t,top:e,bottom:i}),Xle=()=>({left:!0,top:!0}),Zle=()=>({right:!0,bottom:!0});function Kle(n,t){n&1&&v1(0)}function Jle(n,t){if(n&1){let e=dt();g(0,"div",17),le("drop",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.eventDropped(r,o.date,!0))})("dragEnter",function(){let r=Oe(e).$implicit,o=ce(2);return Ae(o.dateDragEnter(r.date))}),_()}}function Qle(n,t){n&1&&me(0,"div",24),n&2&&X("resizeEdges",Hi(1,$le))}function ece(n,t){n&1&&me(0,"div",25),n&2&&X("resizeEdges",Hi(1,qle))}function tce(n,t){if(n&1){let e=dt();g(0,"div",20,3),le("resizeStart",function(r){let o=Oe(e).$implicit;ce();let s=Ai(1),a=ce(2);return Ae(a.allDayEventResizeStarted(s,o,r))})("resizing",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.allDayEventResizing(o,r,s.dayColumnWidth))})("resizeEnd",function(){let r=Oe(e).$implicit,o=ce(3);return Ae(o.allDayEventResizeEnded(r))})("dragStart",function(){let r=Oe(e).$implicit,o=Ai(1);ce();let s=Ai(1),a=ce(2);return Ae(a.dragStarted(s,o,r,!1))})("dragging",function(){Oe(e);let r=ce(3);return Ae(r.allDayEventDragMove())})("dragEnd",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.dragEnded(o,r,s.dayColumnWidth))}),Pe(2,Qle,1,2,"div",21),g(3,"mwl-calendar-week-view-event",22),le("eventClicked",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),_(),Pe(4,ece,1,2,"div",23),_()}if(n&2){let e=t.$implicit,i=ce(3);ul("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),wo("cal-draggable",e.event.draggable&&i.allDayEventResizes.size===0)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),X("ngClass",e.event==null?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",xa(33,jle,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",xa(36,cB,e.event,i.calendarId))("dragAxis",xa(39,hD,e.event.draggable&&i.allDayEventResizes.size===0,!i.snapDraggedEvents&&e.event.draggable&&i.allDayEventResizes.size===0))("dragSnapGrid",i.snapDraggedEvents?ni(42,Gle,i.dayColumnWidth):Hi(44,Cx))("validateDrag",i.validateDrag)("touchStartLongPress",Hi(45,lB)),A(2),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),A(),X("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),A(),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function nce(n,t){if(n&1&&(g(0,"div",18,2),Pe(2,tce,5,46,"div",19),_()),n&2){let e=t.$implicit,i=ce(2);A(2),X("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function ice(n,t){if(n&1){let e=dt();g(0,"div",12,1),le("dragEnter",function(){Oe(e);let r=ce();return Ae(r.dragEnter("allDay"))})("dragLeave",function(){Oe(e);let r=ce();return Ae(r.dragLeave("allDay"))}),g(2,"div",10)(3,"div",13),Pe(4,Kle,1,0,"ng-container",14),_(),Pe(5,Jle,1,0,"div",15),_(),Pe(6,nce,3,2,"div",16),_()}if(n&2){let e=ce();A(4),X("ngTemplateOutlet",e.allDayEventsLabelTemplate),A(),X("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),A(),X("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function rce(n,t){if(n&1&&me(0,"mwl-calendar-week-view-hour-segment",29),n&2){let e=t.$implicit,i=ce(3);ul("height",i.hourSegmentHeight,"px"),X("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function oce(n,t){if(n&1&&(g(0,"div",27),Pe(1,rce,1,8,"mwl-calendar-week-view-hour-segment",28),_()),n&2){let e=t.$implicit,i=t.odd,r=ce(2);wo("cal-hour-odd",i),A(),X("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function sce(n,t){if(n&1&&(g(0,"div",13),Pe(1,oce,2,4,"div",26),_()),n&2){let e=ce();A(),X("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}function ace(n,t){n&1&&me(0,"div",24),n&2&&X("resizeEdges",Hi(1,Xle))}function lce(n,t){}function cce(n,t){if(n&1){let e=dt();g(0,"mwl-calendar-week-view-event",36),le("eventClicked",function(r){Oe(e);let o=ce().$implicit,s=ce(2);return Ae(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),_()}if(n&2){let e=ce().$implicit,i=ce().$implicit,r=ce();X("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}function uce(n,t){n&1&&me(0,"div",25),n&2&&X("resizeEdges",Hi(1,Zle))}function dce(n,t){if(n&1){let e=dt();g(0,"div",34,3),le("resizeStart",function(r){let o=Oe(e).$implicit,s=ce(2),a=Ai(6);return Ae(s.timeEventResizeStarted(a,o,r))})("resizing",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.timeEventResizing(o,r))})("resizeEnd",function(){let r=Oe(e).$implicit,o=ce(2);return Ae(o.timeEventResizeEnded(r))})("dragStart",function(){let r=Oe(e).$implicit,o=Ai(1),s=ce(2),a=Ai(6);return Ae(s.dragStarted(a,o,r,!0))})("dragging",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.dragMove(o,r))})("dragEnd",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.dragEnded(o,r,s.dayColumnWidth,!0))}),Pe(2,ace,1,2,"div",21)(3,lce,0,0,"ng-template",35)(4,cce,1,12,"ng-template",null,4,Ys)(6,uce,1,2,"div",23),_()}if(n&2){let e=t.$implicit,i=Ai(5),r=ce(2);ul("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),wo("cal-draggable",e.event.draggable&&r.timeEventResizes.size===0)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),X("ngClass",e.event.cssClass)("hidden",e.height===0&&e.width===0)("resizeCursors",r.resizeCursors)("resizeSnapGrid",fk(30,Yle,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",xa(35,cB,e.event,r.calendarId))("dragAxis",xa(38,hD,e.event.draggable&&r.timeEventResizes.size===0,e.event.draggable&&r.timeEventResizes.size===0))("dragSnapGrid",r.snapDraggedEvents?xa(41,hD,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):Hi(44,Cx))("touchStartLongPress",Hi(45,lB))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),A(2),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),A(),X("ngTemplateOutlet",i),A(3),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function fce(n,t){if(n&1){let e=dt();g(0,"mwl-calendar-week-view-hour-segment",38),le("mwlClick",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){let o=Oe(e).$implicit,s=ce(3);return Ae(s.eventDropped(r,o.date,!1))})("dragEnter",function(){let r=Oe(e).$implicit,o=ce(3);return Ae(o.dateDragEnter(r.date))}),_()}if(n&2){let e=t.$implicit,i=ce(3);ul("height",i.hourSegmentHeight,"px"),X("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",i.hourSegmentClicked.observers.length===0)("dragOverClass",!i.dragActive||!i.snapDraggedEvents?"cal-drag-over":null)("isTimeLabel",i.daysInWeek===1)}}function hce(n,t){if(n&1&&(g(0,"div",27),Pe(1,fce,1,10,"mwl-calendar-week-view-hour-segment",37),_()),n&2){let e=t.$implicit,i=t.odd,r=ce(2);wo("cal-hour-odd",i),A(),X("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function pce(n,t){if(n&1&&(g(0,"div",30),me(1,"mwl-calendar-week-view-current-time-marker",31),g(2,"div",32),Pe(3,dce,7,46,"div",33),_(),Pe(4,hce,2,4,"div",26),_()),n&2){let e=t.$implicit,i=ce();A(),X("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),A(2),X("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),A(),X("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}var Mx=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new yt,this.destroy$=new On}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(xo(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new Jt(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)($(Oi),$(li),$(Zi))},n.\u0275dir=en({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),uB=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new yt,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(e.keyCode===13||e.which===13||e.key==="Enter")&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){this.keydownListener!==null&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)($(li),$(jn),$(Oi))},n.\u0275dir=en({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),gh=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`
        ${er(e.date,"EEEE MMMM d",i)},
        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},
         click to expand
      `:`${er(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`
      Beginning of expanded view for ${er(e,"EEEE MMMM dd",i)}
    `}openDayEventsAlert({date:e,locale:i}){return`${er(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(e.allDay===!0)return this.allDayEventDescription({event:e,locale:i});let r=`
      ${er(e.start,"EEEE MMMM dd",i)},
      ${e.title}, from ${er(e.start,"hh:mm a",i)}
    `;return e.end?r+` to ${er(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){let r=`
      ${e.title}, event spans multiple days:
      start time ${er(e.start,"MMMM dd hh:mm a",i)}
    `;return e.end?r+`, stop time ${er(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(qe(J_))},n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),wx=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){let r=Object.getOwnPropertyNames(Object.getPrototypeOf(gh.prototype)).filter(o=>o!=="constructor");throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)($(gh,16),$(Ca,16))},n.\u0275pipe=ac({name:"calendarA11y",type:n,pure:!0}),n})(),mce=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"mwlClick","mwlKeydownEnter","ngClass","innerHtml"]],template:function(e,i){if(e&1&&Pe(0,yle,1,1,"ng-template",null,0,Ys)(2,xle,0,0,"ng-template",1),e&2){let r=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",xa(2,mle,i.event,i.trackByActionId))}},dependencies:[Eo,Mn,Zt,_l,Mx,uB,wx],encapsulation:2}),n})(),td=class{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}},dB=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)($(td,16))},n.\u0275pipe=ac({name:"calendarEventTitle",type:n,pure:!0}),n})(),gce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(e&1&&Pe(0,Cle,3,10,"ng-template",null,0,Ys)(2,Mle,0,0,"ng-template",1),e&2){let r=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",xa(2,ble,i.event,i.view))}},dependencies:[_l,dB,wx],encapsulation:2}),n})(),_ce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(e&1&&Pe(0,Ele,3,2,"ng-template",null,0,Ys)(2,Sle,0,0,"ng-template",1),e&2){let r=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",x1(2,wle,i.contents,i.placement,i.event))}},dependencies:[Eo,_l],encapsulation:2}),n})(),vce=(()=>{class n{constructor(e,i,r,o,s,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=s,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new On,this.tooltipFactory=o.resolveComponentFactory(_ce)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(this.delay===null?Rt("now"):Qh(this.delay)).pipe(xo(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=$T(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),e.indexOf(this.tooltipRef.instance.placement)===-1&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)($(li),$(Mo),$(Oi),$(oc),$(zo),$(Zi))},n.\u0275dir=en({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){e&1&&le("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:[0,"mwlCalendarTooltip","contents"],placement:[0,"tooltipPlacement","placement"],customTemplate:[0,"tooltipTemplate","customTemplate"],event:[0,"tooltipEvent","event"],appendToBody:[0,"tooltipAppendToBody","appendToBody"],delay:[0,"tooltipDelay","delay"]},features:[xr]}),n})(),vD=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(vD||{}),yce=n=>BV(n,(...e)=>console.warn("angular-calendar",...e));function fB(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function xce(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}function bce(n,t){return fB(n,t)&&xce(n,t)}function hB(n,t){return Math.round(n/t)*t}var pB=(n,t)=>t.date.toISOString(),Cce=(n,t)=>t.date.toISOString(),Mce=(n,t)=>t.segments[0].date.toISOString(),wce=(n,t)=>t.event.id?t.event.id:t.event,Ece=(n,t)=>t.event.id?t.event.id:t.event,Sce=60;function Pce(n,t,e){return(e||Sce)/(n*t)}function fD(n,t,e,i,r){let o=hB(n,i||e),s=Pce(t,e,r);return o*s}function oB(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Qu(n,t,e,i){let r=0,o=0,s=e<0?n.subDays:n.addDays,a=t;for(;o<=Math.abs(e);){a=s(t,r);let l=n.getDay(a);i.indexOf(l)===-1&&o++,r++}return a}function Tce(n,t,e){let i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}function Dce(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)}function pD(n,t,e,i=[],r){let o=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e}),s=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(o))>-1&&o<s;)o=n.addDays(o,1);if(r){let a=n.endOfDay(Qu(n,o,r-1,i));return{viewStart:o,viewEnd:a}}else{let a=s;for(;i.indexOf(n.getDay(a))>-1&&a>o;)a=n.subDays(a,1);return{viewStart:o,viewEnd:a}}}function Oce({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}var zc=class{};var Ace=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return er(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return er(e,"d",i)}monthViewTitle({date:e,locale:i}){return er(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return er(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return er(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:o,daysInWeek:s}){let{viewStart:a,viewEnd:l}=pD(this.dateAdapter,e,r,o,s),u=(f,h)=>er(f,"MMM d"+(h?", yyyy":""),i);return`${u(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${u(l,!0)}`}weekViewHour({date:e,locale:i}){return er(e,"h a",i)}dayViewHour({date:e,locale:i}){return er(e,"h a",i)}dayViewTitle({date:e,locale:i}){return er(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(qe(zc))},n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),_h=(()=>{class n extends Ace{}return n.\u0275fac=(()=>{let t;return function(i){return(t||(t=kr(n)))(i||n)}})(),n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),mB=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,o=0,s=[],a){if(typeof this.dateFormatter[i]>"u"){let l=Object.getOwnPropertyNames(Object.getPrototypeOf(_h.prototype)).filter(u=>u!=="constructor");throw new Error(`${i} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:o,excludeDays:s,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)($(_h,16),$(Ca,16))},n.\u0275pipe=ac({name:"calendarDate",type:n,pure:!0}),n})(),$m=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return VV(this.dateAdapter,e)}getWeekViewHeader(e){return yx(this.dateAdapter,e)}getWeekView(e){return UV(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(qe(zc))},n.\u0275prov=Ue({token:n,factory:n.\u0275fac}),n})(),AMe=new _t("Moment");var ed=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(ed||{}),Gm=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||td,i.dateFormatter||_h,i.utils||$m,i.a11y||gh]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({providers:[J_],imports:[vt]}),n})();var IMe=ZV("collapse",[aD("void",sD({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),aD("*",sD({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),lD("* => void",oD("150ms ease-out")),lD("void => *",oD("150ms ease-in"))]);var sB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[vt,jm,Gm,jm]}),n})(),mD=class{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:o}){let s=Oce({x:t,y:e})||r;if(i){let a=Object.assign({},this.startPosition,{left:this.startPosition.left+o.x,right:this.startPosition.right+o.x,top:this.startPosition.top+o.y,bottom:this.startPosition.bottom+o.y});if(s){let l=this.dragContainerElement.getBoundingClientRect(),u=l.top<a.top&&a.top<l.bottom,f=l.top<a.bottom&&a.bottom<l.bottom;return fB(l,a)&&(u||f)}return!1}else return s}},gD=class{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth)?!1:bce(this.resizeContainerElement.getBoundingClientRect(),t)}},Ice=(()=>{class n{constructor(){this.dayHeaderClicked=new yt,this.eventDropped=new yt,this.dragEnter=new yt,this.trackByWeekDayHeaderDate=pB}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"mwlClick","drop","dragEnter","ngClass"]],template:function(e,i){if(e&1&&Pe(0,Ole,2,2,"ng-template",null,0,Ys)(2,Ale,0,0,"ng-template",1),e&2){let r=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",pk(2,Tle,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[Eo,Mn,_l,rD,Mx,mB],encapsulation:2}),n})(),Rce=(()=>{class n{constructor(){this.eventClicked=new yt}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"mwlClick","mwlKeydownEnter","ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(e&1&&Pe(0,Nle,6,27,"ng-template",null,0,Ys)(2,kle,0,0,"ng-template",1),e&2){let r=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",gk(2,Ile,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[_l,Wk,mce,gce,vce,Mx,uB,dB,wx],encapsulation:2}),n})(),Nce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(e&1&&Pe(0,Ule,3,13,"ng-template",null,0,Ys)(2,Vle,0,0,"ng-template",1),e&2){let r=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",hk(2,Fle,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[Eo,Zt,_l,mB,wx],encapsulation:2}),n})(),kce=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new Ei(void 0),this.marker$=this.zone.onStable.pipe(ur(()=>nM(60*1e3)),ou(0),cM(this.columnDate$),Tt(r=>{let o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(r,l)&&l>=o&&l<=s,top:this.dateAdapter.differenceInMinutes(l,o)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)($(zc),$(jn))},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[xr],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(e&1&&(Pe(0,Hle,1,1,"ng-template",null,0,Ys)(2,Wle,0,0,"ng-template",1),Lr(3,"async"),Lr(4,"async")),e&2){let r,o=Ai(1);A(2),X("ngTemplateOutlet",i.customTemplate||o)("ngTemplateOutletContext",mk(6,Ble,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,(r=b1(3,2,i.marker$))==null?null:r.isVisible,(r=b1(4,4,i.marker$))==null?null:r.top))}},dependencies:[Zt,_l,jk],encapsulation:2}),n})(),gB=(()=>{class n{constructor(e,i,r,o,s){this.cdr=e,this.utils=i,this.dateAdapter=o,this.element=s,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new yt,this.eventClicked=new yt,this.eventTimesChanged=new yt,this.beforeViewRender=new yt,this.hourSegmentClicked=new yt,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=pB,this.trackByHourSegment=Cce,this.trackByHour=Mce,this.trackByWeekAllDayEvent=wce,this.trackByWeekTimeEvent=Ece,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){let i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&yce(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&getComputedStyle(this.element.nativeElement).direction==="rtl",this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);let r=new Map,o=[...this.events];this.timeEventResizes.forEach((s,a)=>{let l=this.getTimeEventResizedDates(a,s),u=We(We({},a),l);r.set(u,a);let f=o.indexOf(a);o[f]=u}),this.restoreOriginalEvents(o,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);let i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);let r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:ed.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){let o=this.allDayEventResizes.get(e),s=this.rtl?-1:1;if(typeof i.edges.left<"u"){let a=Math.round(+i.edges.left/r)*s;e.offset=o.originalOffset+a,e.span=o.originalSpan-a}else if(typeof i.edges.right<"u"){let a=Math.round(+i.edges.right/r)*s;e.span=o.originalSpan+a}}allDayEventResizeEnded(e){let i=this.allDayEventResizes.get(e);if(i){let r=i.edge==="left",o;r?o=e.offset-i.originalOffset:o=e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;let s=this.getAllDayEventResizedDates(e.event,o,r);this.eventTimesChanged.emit({newStart:s.start,newEnd:s.end,event:e.event,type:ed.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){Dce(e,i,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:ed.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,o){this.dayColumnWidth=this.getDayColumnWidth(e);let s=new mD(e,i);this.validateDrag=({x:a,y:l,transform:u})=>{let f=this.allDayEventResizes.size===0&&this.timeEventResizes.size===0&&s.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:u});if(f&&this.validateEventTimesChanged){let h=this.getDragMovedEventTimes(r,{x:a,y:l},this.dayColumnWidth,o);return this.validateEventTimesChanged({type:ed.Drag,event:r.event,newStart:h.start,newEnd:h.end})}return f},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&o&&this.view.hourColumns.forEach(a=>{let l=a.events.find(u=>u.event===r.event&&u!==r);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(e,i){let r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),o=e.event,s=We(We({},o),r),a=this.events.map(l=>l===o?s:l);this.restoreOriginalEvents(a,new Map([[s,o]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,o=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;let{start:s,end:a}=this.getDragMovedEventTimes(e,i,r,o);(this.snapDraggedEvents||this.eventDragEnterByType[o?"time":"allDay"]>0)&&Tce(s,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:s,newEnd:a,event:e.event,type:ed.Drag,allDay:!o}))}refreshHeader(){this.days=this.utils.getWeekViewHeader(We({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays},pD(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit(We({header:this.days},this.view))}getWeekView(e){return this.utils.getWeekView(We({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight},pD(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}getDragMovedEventTimes(e,i,r,o){let s=hB(i.x,r)/r*(this.rtl?-1:1),a=o?fD(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(Qu(this.dateAdapter,e.event.start,s,this.excludeDays),a),u;return e.event.end&&(u=this.dateAdapter.addMinutes(Qu(this.dateAdapter,e.event.end,s,this.excludeDays),a)),{start:l,end:u}}restoreOriginalEvents(e,i,r=!0){let o=this.view;r&&(this.view=this.getWeekView(e));let s=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,l)=>{o.hourColumns[l].hours.forEach((u,f)=>{u.segments.forEach((h,m)=>{a.hours[f].segments[m].cssClass=h.cssClass})}),s.forEach(u=>{let f=i.get(u),h=a.events.find(m=>m.event===(r?u:f));if(h)h.event=f,h.tempEvent=u,r||(h.height=0,h.width=0);else{let m={event:f,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:u};a.events.push(m)}})}),i.clear()}getTimeEventResizedDates(e,i){let r={start:e.start,end:oB(this.dateAdapter,e,this.minimumEventHeight)},u=e,{end:o}=u,s=Vg(u,["end"]),a={start:this.dateAdapter.addMinutes(r.end,this.minimumEventHeight*-1),end:oB(this.dateAdapter,s,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof i.edges.left<"u"){let f=Math.round(+i.edges.left/this.dayColumnWidth)*l,h=Qu(this.dateAdapter,r.start,f,this.excludeDays);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.right<"u"){let f=Math.round(+i.edges.right/this.dayColumnWidth)*l,h=Qu(this.dateAdapter,r.end,f,this.excludeDays);h>a.end?r.end=h:r.end=a.end}if(typeof i.edges.top<"u"){let f=fD(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.start,f);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.bottom<"u"){let f=fD(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.end,f);h>a.end?r.end=h:r.end=a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);let o=new gD(e,r,this.rtl);this.validateResize=({rectangle:s,edges:a})=>{let l=o.validateResize({rectangle:We({},s),edges:a});if(l&&this.validateEventTimesChanged){let u;if(!r)u=this.getTimeEventResizedDates(i.event,{rectangle:s,edges:a});else{let f=this.rtl?-1:1;if(typeof a.left<"u"){let h=Math.round(+a.left/r)*f;u=this.getAllDayEventResizedDates(i.event,h,!this.rtl)}else{let h=Math.round(+a.right/r)*f;u=this.getAllDayEventResizedDates(i.event,h,this.rtl)}}return this.validateEventTimesChanged({type:ed.Resize,event:i.event,newStart:u.start,newEnd:u.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let o=e.start,s=e.end||e.start;return r?o=Qu(this.dateAdapter,o,i,this.excludeDays):s=Qu(this.dateAdapter,s,i,this.excludeDays),{start:o,end:s}}}return n.\u0275fac=function(e){return new(e||n)($(Xs),$($m),$(Ca),$(zc),$(li))},n.\u0275cmp=$e({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[xr],decls:8,vars:9,consts:[["dayColumns",""],["allDayEventsContainer",""],["eventRowContainer",""],["event",""],["weekEventTemplate",""],["role","grid",1,"cal-week-view"],[3,"dayHeaderClicked","eventDropped","dragEnter","days","locale","customTemplate"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress"],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag"],[3,"ngTemplateOutlet"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"mwlClick","drop","dragEnter","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel"]],template:function(e,i){if(e&1){let r=dt();g(0,"div",5)(1,"mwl-calendar-week-view-header",6),le("dayHeaderClicked",function(s){return Oe(r),Ae(i.dayHeaderClicked.emit(s))})("eventDropped",function(s){return Oe(r),Ae(i.eventDropped({dropData:s},s.newStart,!0))})("dragEnter",function(s){return Oe(r),Ae(i.dateDragEnter(s.date))}),_(),Pe(2,ice,7,5,"div",7),g(3,"div",8),le("dragEnter",function(){return Oe(r),Ae(i.dragEnter("time"))})("dragLeave",function(){return Oe(r),Ae(i.dragLeave("time"))}),Pe(4,sce,2,2,"div",9),g(5,"div",10,0),Pe(7,pce,5,13,"div",11),_()()()}e&2&&(A(),X("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),A(),X("ngIf",i.view.allDayEventRows.length>0),A(2),X("ngIf",i.view.hourColumns.length>0&&i.daysInWeek!==1),A(),wo("cal-resize-active",i.timeEventResizes.size>0),A(2),X("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[Eo,Mn,Zt,_l,uD,rB,XV,rD,Mx,Ice,Rce,Nce,kce],encapsulation:2}),n})(),_D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[vt,dD,jm,Gm,dD,jm]}),n})();var aB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[vt,Gm,_D]}),n})(),_B=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||td,i.dateFormatter||_h,i.utils||$m,i.a11y||gh]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=qi({type:n}),n.\u0275inj=$i({imports:[Gm,sB,_D,aB,Gm,sB,_D,aB]}),n})();var Lce=Math.pow(10,8)*24*60*60*1e3,kMe=-Lce,Ex=6048e5,vB=864e5,vh=6e4,Sx=36e5,yB=1e3;var Uce=3600;var xB=Uce*24,FMe=xB*7,Vce=xB*365.2425,Bce=Vce/12,LMe=Bce*3,yD=Symbol.for("constructDateFrom");function Kt(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&yD in n?n[yD](t):n instanceof Date?new n.constructor(t):new Date(t)}function it(n,t){return Kt(t||n,n)}function Ua(n,t,e){let i=it(n,e?.in);return isNaN(t)?Kt(e?.in||n,NaN):(t&&i.setDate(i.getDate()+t),i)}function Px(n,t,e){let i=it(n,e?.in);if(isNaN(t))return Kt(e?.in||n,NaN);if(!t)return i;let r=i.getDate(),o=Kt(e?.in||n,i.getTime());o.setMonth(i.getMonth()+t+1,0);let s=o.getDate();return r>=s?o:(i.setFullYear(o.getFullYear(),o.getMonth(),r),i)}function Tx(n,t,e){return Kt(e?.in||n,+it(n)+t)}function Dx(n,t,e){return Tx(n,t*Sx,e)}var zce={};function Ps(){return zce}function Kr(n,t){let e=Ps(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=it(n,t?.in),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function aa(n,t){return Kr(n,$t(We({},t),{weekStartsOn:1}))}function bB(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=Kt(e,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);let o=aa(r),s=Kt(e,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);let a=aa(s);return e.getTime()>=o.getTime()?i+1:e.getTime()>=a.getTime()?i:i-1}function nd(n){let t=it(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Hc(n,...t){let e=Kt.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function Wc(n,t){let e=it(n,t?.in);return e.setHours(0,0,0,0),e}function CB(n,t,e){let[i,r]=Hc(e?.in,n,t),o=Wc(i),s=Wc(r),a=+o-nd(o),l=+s-nd(s);return Math.round((a-l)/vB)}function MB(n,t){let e=bB(n,t),i=Kt(t?.in||n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),aa(i)}function wB(n,t,e){let i=it(n,e?.in);return i.setTime(i.getTime()+t*vh),i}function EB(n,t,e){return Tx(n,t*1e3,e)}function yh(n,t,e){return Ua(n,t*7,e)}function SB(n,t){let e,i=t?.in;return n.forEach(r=>{!i&&typeof r=="object"&&(i=Kt.bind(null,r));let o=it(r,i);(!e||e<o||isNaN(+o))&&(e=o)}),Kt(i,e||NaN)}function PB(n,t,e){let[i,r]=Hc(e?.in,n,t);return+Wc(i)==+Wc(r)}function TB(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function DB(n){return!(!TB(n)&&typeof n!="number"||isNaN(+it(n)))}function AB(n,t,e){let[i,r]=Hc(e?.in,n,t),o=OB(i,r),s=Math.abs(CB(i,r));i.setDate(i.getDate()-o*s);let a=+(OB(i,r)===-o),l=o*(s-a);return l===0?0:l}function OB(n,t){let e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function Ox(n){return t=>{let i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function Ax(n,t){return+it(n)-+it(t)}function IB(n,t,e){let i=Ax(n,t)/vh;return Ox(e?.roundingMethod)(i)}function RB(n,t){let e=it(n,t?.in);return e.setHours(23,59,59,999),e}function NB(n,t){let e=it(n,t?.in),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function kB(n,t,e){let i=Ax(n,t)/1e3;return Ox(e?.roundingMethod)(i)}function FB(n,t){let e=it(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function LB(n,t){let e=Ps(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=it(n,t?.in),o=r.getDay(),s=(o<i?-7:0)+6-(o-i);return r.setDate(r.getDate()+s),r.setHours(23,59,59,999),r}var Hce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UB=(n,t,e)=>{let i,r=Hce[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Ix(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var Wce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Gce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VB={date:Ix({formats:Wce,defaultWidth:"full"}),time:Ix({formats:jce,defaultWidth:"full"}),dateTime:Ix({formats:Gce,defaultWidth:"full"})};var $ce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BB=(n,t,e,i)=>$ce[n];function xh(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;r=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}var qce={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yce={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xce={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zce={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jce={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qce=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},zB={ordinalNumber:Qce,era:xh({values:qce,defaultWidth:"wide"}),quarter:xh({values:Yce,defaultWidth:"wide",argumentCallback:n=>n-1}),month:xh({values:Xce,defaultWidth:"wide"}),day:xh({values:Zce,defaultWidth:"wide"}),dayPeriod:xh({values:Kce,defaultWidth:"wide",formattingValues:Jce,defaultFormattingWidth:"wide"})};function bh(n){return(t,e={})=>{let i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;let s=o[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?tue(a,h=>h.test(s)):eue(a,h=>h.test(s)),u;u=n.valueCallback?n.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;let f=t.slice(s.length);return{value:u,rest:f}}}function eue(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function tue(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function HB(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let r=i[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(r.length);return{value:s,rest:a}}}var nue=/^(\d+)(th|st|nd|rd)?/i,iue=/\d+/i,rue={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},oue={any:[/^b/i,/^(a|c)/i]},sue={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aue={any:[/1/i,/2/i,/3/i,/4/i]},lue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uue={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},due={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fue={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hue={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WB={ordinalNumber:HB({matchPattern:nue,parsePattern:iue,valueCallback:n=>parseInt(n,10)}),era:bh({matchPatterns:rue,defaultMatchWidth:"wide",parsePatterns:oue,defaultParseWidth:"any"}),quarter:bh({matchPatterns:sue,defaultMatchWidth:"wide",parsePatterns:aue,defaultParseWidth:"any",valueCallback:n=>n+1}),month:bh({matchPatterns:lue,defaultMatchWidth:"wide",parsePatterns:cue,defaultParseWidth:"any"}),day:bh({matchPatterns:uue,defaultMatchWidth:"wide",parsePatterns:due,defaultParseWidth:"any"}),dayPeriod:bh({matchPatterns:fue,defaultMatchWidth:"any",parsePatterns:hue,defaultParseWidth:"any"})};var xD={code:"en-US",formatDistance:UB,formatLong:VB,formatRelative:BB,localize:zB,match:WB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rx(n,t){let e=it(n,t?.in),i=+aa(e)-+MB(e);return Math.round(i/Ex)+1}function Nx(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=Ps(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Kt(t?.in||n,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=Kr(s,t),l=Kt(t?.in||n,0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);let u=Kr(l,t);return+e>=+a?i+1:+e>=+u?i:i-1}function jB(n,t){let e=Ps(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=Nx(n,t),o=Kt(t?.in||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),Kr(o,t)}function GB(n,t){let e=it(n,t?.in),i=+Kr(e,t)-+jB(e,t);return Math.round(i/Ex)+1}var $B=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},qB=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},pue=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return $B(n,t);let o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",$B(i,t)).replace("{{time}}",qB(r,t))},bD={p:qB,P:pue};var mue=/^D+$/,gue=/^Y+$/,_ue=["D","DD","YY","YYYY"];function YB(n){return mue.test(n)}function XB(n){return gue.test(n)}function CD(n,t,e){let i=vue(n,t,e);if(console.warn(i),_ue.includes(n))throw new RangeError(i)}function vue(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function ZB(n,t){return it(n,t?.in).getDate()}function KB(n,t){return it(n,t?.in).getDay()}function JB(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=e.getMonth(),o=Kt(e,0);return o.setFullYear(i,r+1,0),o.setHours(0,0,0,0),o.getDate()}function QB(){return Object.assign({},Ps())}function ez(n,t){return it(n,t?.in).getHours()}function tz(n,t){let e=it(n,t?.in).getDay();return e===0?7:e}function nz(n,t){return it(n,t?.in).getMinutes()}function iz(n,t){return it(n,t?.in).getMonth()}function rz(n,t){return it(n,t?.in).getFullYear()}function oz(n,t){let e=yue(t)?new t(0):Kt(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function yue(n){return typeof n=="function"&&n.prototype?.constructor===n}var xue=10,kx=class{subPriority=0;validate(t,e){return!0}},Fx=class extends kx{constructor(t,e,i,r,o){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=r,o&&(this.subPriority=o)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}},Lx=class extends kx{priority=xue;subPriority=-1;constructor(t,e){super(),this.context=t||(i=>Kt(e,i))}set(t,e){return e.timestampIsSet?t:Kt(t,oz(t,this.context))}};var bt=class{run(t,e,i,r){let o=this.parse(t,e,i,r);return o?{setter:new Fx(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,e,i){return!0}};var Ux=class extends bt{priority=140;parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]};var zn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ts={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ri(n,t){return n&&{value:t(n.value),rest:n.rest}}function Vn(n,t){let e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Ds(n,t){let e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};let i=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,s=e[5]?parseInt(e[5],10):0;return{value:i*(r*Sx+o*vh+s*yB),rest:t.slice(e[0].length)}}function Vx(n){return Vn(zn.anyDigitsSigned,n)}function mn(n,t){switch(n){case 1:return Vn(zn.singleDigit,t);case 2:return Vn(zn.twoDigits,t);case 3:return Vn(zn.threeDigits,t);case 4:return Vn(zn.fourDigits,t);default:return Vn(new RegExp("^\\d{1,"+n+"}"),t)}}function Ch(n,t){switch(n){case 1:return Vn(zn.singleDigitSigned,t);case 2:return Vn(zn.twoDigitsSigned,t);case 3:return Vn(zn.threeDigitsSigned,t);case 4:return Vn(zn.fourDigitsSigned,t);default:return Vn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function Mh(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Bx(n,t){let e=t>0,i=e?t:1-t,r;if(i<=50)r=n||100;else{let o=i+50,s=Math.trunc(o/100)*100,a=n>=o%100;r=n+s-(a?100:0)}return e?r:1-r}function zx(n){return n%400===0||n%4===0&&n%100!==0}var Hx=class extends bt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="yy"});switch(e){case"y":return ri(mn(4,t),r);case"yo":return ri(i.ordinalNumber(t,{unit:"year"}),r);default:return ri(mn(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let r=t.getFullYear();if(i.isTwoDigitYear){let s=Bx(i.year,r);return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}let o=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}};var Wx=class extends bt{priority=130;parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="YY"});switch(e){case"Y":return ri(mn(4,t),r);case"Yo":return ri(i.ordinalNumber(t,{unit:"year"}),r);default:return ri(mn(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,r){let o=Nx(t,r);if(i.isTwoDigitYear){let a=Bx(i.year,o);return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),Kr(t,r)}let s=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(s,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),Kr(t,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]};var jx=class extends bt{priority=130;parse(t,e){return e==="R"?Ch(4,t):Ch(e.length,t)}set(t,e,i){let r=Kt(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),aa(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]};var Gx=class extends bt{priority=130;parse(t,e){return e==="u"?Ch(4,t):Ch(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]};var $x=class extends bt{priority=120;parse(t,e,i){switch(e){case"Q":case"QQ":return mn(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]};var qx=class extends bt{priority=120;parse(t,e,i){switch(e){case"q":case"qq":return mn(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]};var Yx=class extends bt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"M":return ri(Vn(zn.month,t),r);case"MM":return ri(mn(2,t),r);case"Mo":return ri(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}};var Xx=class extends bt{priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"L":return ri(Vn(zn.month,t),r);case"LL":return ri(mn(2,t),r);case"Lo":return ri(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]};function sz(n,t,e){let i=it(n,e?.in),r=GB(i,e)-t;return i.setDate(i.getDate()-r*7),it(i,e?.in)}var Zx=class extends bt{priority=100;parse(t,e,i){switch(e){case"w":return Vn(zn.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,r){return Kr(sz(t,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]};function az(n,t,e){let i=it(n,e?.in),r=Rx(i,e)-t;return i.setDate(i.getDate()-r*7),i}var Kx=class extends bt{priority=100;parse(t,e,i){switch(e){case"I":return Vn(zn.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return aa(az(t,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]};var bue=[31,28,31,30,31,30,31,31,30,31,30,31],Cue=[31,29,31,30,31,30,31,31,30,31,30,31],Jx=class extends bt{priority=90;subPriority=1;parse(t,e,i){switch(e){case"d":return Vn(zn.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return mn(e.length,t)}}validate(t,e){let i=t.getFullYear(),r=zx(i),o=t.getMonth();return r?e>=1&&e<=Cue[o]:e>=1&&e<=bue[o]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]};var Qx=class extends bt{priority=90;subpriority=1;parse(t,e,i){switch(e){case"D":case"DD":return Vn(zn.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return mn(e.length,t)}}validate(t,e){let i=t.getFullYear();return zx(i)?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]};function wh(n,t,e){let i=Ps(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=it(n,e?.in),s=o.getDay(),l=(t%7+7)%7,u=7-r,f=t<0||t>6?t-(s+u)%7:(l+u)%7-(s+u)%7;return Ua(o,f,e)}var eb=class extends bt{priority=90;parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=wh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]};var tb=class extends bt{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return ri(mn(e.length,t),o);case"eo":return ri(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=wh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]};var nb=class extends bt{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return ri(mn(e.length,t),o);case"co":return ri(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=wh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]};function lz(n,t,e){let i=it(n,e?.in),r=tz(i,e),o=t-r;return Ua(i,o,e)}var ib=class extends bt{priority=90;parse(t,e,i){let r=o=>o===0?7:o;switch(e){case"i":case"ii":return mn(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return ri(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return ri(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return ri(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return ri(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return t=lz(t,i),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]};var rb=class extends bt{priority=80;parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(Mh(i),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]};var ob=class extends bt{priority=80;parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(Mh(i),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]};var sb=class extends bt{priority=80;parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(Mh(i),0,0,0),t}incompatibleTokens=["a","b","t","T"]};var ab=class extends bt{priority=70;parse(t,e,i){switch(e){case"h":return Vn(zn.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]};var lb=class extends bt{priority=70;parse(t,e,i){switch(e){case"H":return Vn(zn.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]};var cb=class extends bt{priority=70;parse(t,e,i){switch(e){case"K":return Vn(zn.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]};var ub=class extends bt{priority=70;parse(t,e,i){switch(e){case"k":return Vn(zn.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return mn(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){let r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]};var db=class extends bt{priority=60;parse(t,e,i){switch(e){case"m":return Vn(zn.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}incompatibleTokens=["t","T"]};var fb=class extends bt{priority=50;parse(t,e,i){switch(e){case"s":return Vn(zn.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return mn(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}incompatibleTokens=["t","T"]};var hb=class extends bt{priority=30;parse(t,e){let i=r=>Math.trunc(r*Math.pow(10,-e.length+3));return ri(mn(e.length,t),i)}set(t,e,i){return t.setMilliseconds(i),t}incompatibleTokens=["t","T"]};var pb=class extends bt{priority=10;parse(t,e){switch(e){case"X":return Ds(Ts.basicOptionalMinutes,t);case"XX":return Ds(Ts.basic,t);case"XXXX":return Ds(Ts.basicOptionalSeconds,t);case"XXXXX":return Ds(Ts.extendedOptionalSeconds,t);case"XXX":default:return Ds(Ts.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Kt(t,t.getTime()-nd(t)-i)}incompatibleTokens=["t","T","x"]};var mb=class extends bt{priority=10;parse(t,e){switch(e){case"x":return Ds(Ts.basicOptionalMinutes,t);case"xx":return Ds(Ts.basic,t);case"xxxx":return Ds(Ts.basicOptionalSeconds,t);case"xxxxx":return Ds(Ts.extendedOptionalSeconds,t);case"xxx":default:return Ds(Ts.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Kt(t,t.getTime()-nd(t)-i)}incompatibleTokens=["t","T","X"]};var gb=class extends bt{priority=40;parse(t){return Vx(t)}set(t,e,i){return[Kt(t,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"};var _b=class extends bt{priority=20;parse(t){return Vx(t)}set(t,e,i){return[Kt(t,i),{timestampIsSet:!0}]}incompatibleTokens="*"};var cz={G:new Ux,y:new Hx,Y:new Wx,R:new jx,u:new Gx,Q:new $x,q:new qx,M:new Yx,L:new Xx,w:new Zx,I:new Kx,d:new Jx,D:new Qx,E:new eb,e:new tb,c:new nb,i:new ib,a:new rb,b:new ob,B:new sb,h:new ab,H:new lb,K:new cb,k:new ub,m:new db,s:new fb,S:new hb,X:new pb,x:new mb,t:new gb,T:new _b};var Mue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Eue=/^'([^]*?)'?$/,Sue=/''/g,Pue=/\S/,Tue=/[a-zA-Z]/;function uz(n,t,e,i){let r=()=>Kt(i?.in||e,NaN),o=QB(),s=i?.locale??o.locale??xD,a=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return n?r():it(e,i?.in);let u={firstWeekContainsDate:a,weekStartsOn:l,locale:s},f=[new Lx(i?.in,e)],h=t.match(wue).map(y=>{let x=y[0];if(x in bD){let T=bD[x];return T(y,s.formatLong)}return y}).join("").match(Mue),m=[];for(let y of h){!i?.useAdditionalWeekYearTokens&&XB(y)&&CD(y,t,n),!i?.useAdditionalDayOfYearTokens&&YB(y)&&CD(y,t,n);let x=y[0],T=cz[x];if(T){let{incompatibleTokens:E}=T;if(Array.isArray(E)){let V=m.find(B=>E.includes(B.token)||B.token===x);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${y}\` at the same time`)}else if(T.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${y}\` and any other token at the same time`);m.push({token:x,fullToken:y});let D=T.run(n,y,s.match,u);if(!D)return r();f.push(D.setter),n=D.rest}else{if(x.match(Tue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");if(y==="''"?y="'":x==="'"&&(y=Due(y)),n.indexOf(y)===0)n=n.slice(y.length);else return r()}}if(n.length>0&&Pue.test(n))return r();let p=f.map(y=>y.priority).sort((y,x)=>x-y).filter((y,x,T)=>T.indexOf(y)===x).map(y=>f.filter(x=>x.priority===y).sort((x,T)=>T.subPriority-x.subPriority)).map(y=>y[0]),b=it(e,i?.in);if(isNaN(+b))return r();let C={};for(let y of p){if(!y.validate(b,u))return r();let x=y.set(b,C,u);Array.isArray(x)?(b=x[0],Object.assign(C,x[1])):b=x}return b}function Due(n){return n.match(Eue)[1].replace(Sue,"'")}function dz(n,t){let e=it(n,t?.in);return e.setSeconds(0,0),e}function fz(n,t,e){let[i,r]=Hc(e?.in,n,t);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}function MD(n,t){let e=it(n,t?.in);return e.setMilliseconds(0),e}function hz(n,t){return+MD(n)==+MD(t)}function pz(n,t,e){return Ua(n,-t,e)}function mz(n,t,e){let i=it(n,e?.in),r=i.getFullYear(),o=i.getDate(),s=Kt(e?.in||n,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);let a=JB(s);return i.setMonth(t,Math.min(o,a)),i}function gz(n,t,e){let i=it(n,e?.in);return i.setDate(t),i}function _z(n,t,e){let i=it(n,e?.in);return i.setHours(t),i}function vz(n,t,e){let i=it(n,e?.in);return i.setMinutes(t),i}function yz(n,t,e){let i=it(n,e?.in);return isNaN(+i)?Kt(e?.in||n,NaN):(i.setFullYear(t),i)}function xz(n,t,e){return Px(n,-t,e)}function vb(n,t,e){return yh(n,-t,e)}function Oue(n){return new Date(n).getTimezoneOffset()}function bz(){return{addDays:Ua,addHours:Dx,addMinutes:wB,addSeconds:EB,differenceInDays:AB,differenceInMinutes:IB,differenceInSeconds:kB,endOfDay:RB,endOfMonth:NB,endOfWeek:LB,getDay:KB,getMonth:iz,isSameDay:PB,isSameMonth:fz,isSameSecond:hz,max:SB,setHours:_z,setMinutes:vz,startOfDay:Wc,startOfMinute:dz,startOfMonth:FB,startOfWeek:Kr,getHours:ez,getMinutes:nz,getTimezoneOffset:Oue}}function Cz(){return Jh(Jh({},bz()),{addWeeks:yh,addMonths:Px,subDays:pz,subWeeks:vb,subMonths:xz,getISOWeek:Rx,setDate:gz,setMonth:mz,setYear:yz,getDate:ZB,getYear:rz})}function Aue(n,t){if(n&1&&(g(0,"div"),me(1,"input",25),M(2),_()),n&2){let e=t.$implicit,i=t.index;A(),X("formControlName",i),A(),xt(" ",e," ")}}function Iue(n,t){if(n&1&&(g(0,"div",26),M(1),_()),n&2){let e=ce(2);A(),xt(" ",e.errorMessage," ")}}function Rue(n,t){if(n&1){let e=dt();g(0,"div",14)(1,"div",15)(2,"h3"),M(3,"Edit Availability Slots"),_(),g(4,"button",9),le("click",function(){Oe(e);let r=ce();return Ae(r.toggleEditAvailability())}),me(5,"img",16),_(),g(6,"form",17),le("ngSubmit",function(){Oe(e);let r=ce();return Ae(r.onSubmit())}),g(7,"label",18),M(8,"Date"),_(),g(9,"input",19),le("change",function(r){Oe(e);let o=ce();return Ae(o.onUpdateDateChange(r))}),_(),g(10,"label",20),M(11,"Select Hours"),_(),g(12,"div",21),Pe(13,Aue,3,2,"div",22),_(),Pe(14,Iue,2,1,"div",23),g(15,"button",24),M(16,"Confirm"),_()()()()}if(n&2){let e=ce();A(6),X("formGroup",e.availabilityForm),A(3),X("value",e.today),A(4),X("ngForOf",e.hours),A(),X("ngIf",e.errorMessage)}}var Mz=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.staffId="",this.staffName="",this.availabilitySlots=[],this.viewDate=new Date,this.today="",this.view=vD.Week,this.events=[],this.showEditAvailability=!1,this.availabilityType="",this.errorMessage="",this.hours=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],this.addAvailabilitySlots="",this.removeAvailabilitySlots="",this.availabilityForm=this.fb.group({date:[""],selectedHours:this.fb.array(this.hours.map(()=>this.fb.control(!1)))}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadStaffDetails()}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.staffName=e.fullName,this.availabilitySlots=e.availabilitySlots,this.populateEvents()},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}populateEvents(){this.events=this.availabilitySlots.map(e=>{let i=uz(e,"dd/MM/yyyy HH:mm:ss",new Date);return DB(i)?{start:i,end:Dx(i,1),title:"Available",color:{primary:"#1e90ff",secondary:"#D1E8FF"}}:null}).filter(e=>e!==null)}initFromUpdate(){let e=new Date;this.today=e.toISOString().split("T")[0],this.availabilityForm.patchValue({date:this.today}),this.onUpdateDateChange({target:{value:this.today}})}previousWeek(){this.viewDate=vb(this.viewDate,1)}nextWeek(){this.viewDate=yh(this.viewDate,1)}onDateChange(e){this.viewDate=new Date(e.target.value)}toggleEditAvailability(){this.showEditAvailability=!this.showEditAvailability,this.initFromUpdate()}formatDateString(e){let i=new Date(e),r=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),s=i.getFullYear();return`${r}/${o}/${s}`}onUpdateDateChange(e){let i=this.formatDateString(e.target.value);this.availabilityForm.setControl("selectedHours",this.fb.array(this.hours.map(()=>this.fb.control(!1)))),this.availabilitySlots.forEach(r=>{let[o,s]=r.split(" ");if(o===i){let a=this.hours.indexOf(s.slice(0,5));a!==-1&&this.availabilityForm.get("selectedHours").at(a).setValue(!0)}})}onSubmit(){if(this.availabilityForm.value.date===""){this.errorMessage="Please select a date";return}let e=this.availabilityForm.value.date,i=this.availabilityForm.value.selectedHours.map((a,l)=>a?this.hours[l]:null).filter(a=>a!==null),r=this.availabilityForm.value.selectedHours.map((a,l)=>a?null:this.hours[l]).filter(a=>a!==null),o=i.map(a=>`${e} ${a}`).join(","),s=r.map(a=>`${e} ${a}`).join(",");if(o===this.addAvailabilitySlots&&s===this.removeAvailabilitySlots){this.errorMessage="No changes detected in availability slots";return}this.addAvailabilitySlots=o,this.removeAvailabilitySlots=s,this.SubmitAvailabilitySlots()}SubmitAvailabilitySlots(){let e={phoneNumber:"",email:"",addAvailabilitySlots:this.addAvailabilitySlots,removeAvailabilitySlots:this.removeAvailabilitySlots,specializationName:""};this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.loadStaffDetails()},error:i=>{if(console.error("Error Updating staff",i),console.error("Error status",i.status),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Sa),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-view-availability"]],standalone:!0,features:[zi([$m,gh,_h,td,{provide:zc,useFactory:Cz}]),Je],decls:25,vars:11,consts:[[1,"view-availability-staff-container"],[1,"screens-container"],[1,"view-availability-staff-screen"],[1,"top"],["type","button",1,"btn-availability",3,"click"],["type","button","routerLink","/search-staffs",1,"btn-back"],[1,"page-body"],[1,"calendar-body"],[1,"calendar-navigation"],["type","button",3,"click"],["type","date","title","Select date","placeholder","Select date",3,"change","value"],[1,"calendar-container"],[3,"viewDate","events","hourSegments","dayStartHour","dayEndHour"],["class","edit-screen",4,"ngIf"],[1,"edit-screen"],[1,"staff-edit"],["src","fechar.png","alt","Close"],[3,"ngSubmit","formGroup"],["for","date"],["type","date","id","date","formControlName","date","required","",3,"change","value"],["for","hours"],["formArrayName","selectedHours"],[4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],["type","checkbox","title","Select hour",3,"formControlName"],[1,"error-message"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),le("click",function(){return r.toggleEditAvailability()}),M(6,"Edit Availability Slots"),_(),g(7,"button",5),M(8," Go Back"),_(),g(9,"h2"),M(10,"Availability for Staff"),_(),g(11,"h3"),M(12),_()(),g(13,"div",6)(14,"div",7)(15,"div",8)(16,"button",9),le("click",function(){return r.previousWeek()}),M(17,"Previous Week"),_(),g(18,"input",10),Lr(19,"date"),le("change",function(s){return r.onDateChange(s)}),_(),g(20,"button",9),le("click",function(){return r.nextWeek()}),M(21,"Next Week"),_()(),g(22,"div",11),me(23,"mwl-calendar-week-view",12),_()()()(),Pe(24,Rue,17,4,"div",13),_()()),i&2&&(A(12),Ye(r.staffName),A(6),X("value",dl(19,8,r.viewDate,"yyyy-MM-dd")),A(5),X("viewDate",r.viewDate)("events",r.events)("hourSegments",1)("dayStartHour",0)("dayEndHour",24),A(),X("ngIf",r.showEditAvailability))},dependencies:[Dt,Yt,Nt,nm,Ft,qt,hn,vt,Mn,Zt,Eu,Vt,_B,gB,nr,Cr,Dr,Cf,kt,jt],styles:[".view-availability-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;font-family:Poppins,sans-serif}.view-availability-staff-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.view-availability-staff-container[_ngcontent-%COMP%]   .view-availability-staff-screen[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:1000px;height:90vh;display:flex;flex-direction:column;align-items:center;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#28a745;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex:1;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff;margin-bottom:10px;display:flex;flex-direction:column;overflow:hidden;flex:1}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:16px;cursor:pointer;transition:border-color .3s,box-shadow .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:hover{color:#1e90ff}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#1e90ff;box-shadow:0 0 5px #1e90ff80;outline:none}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::placeholder{color:#aaa}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#1e90ff;color:#fff;border:none;border-radius:3px;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1c86ee}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]     .cal-event-title{display:flex;justify-content:center;align-items:center;height:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-day-column[_ngcontent-%COMP%]{min-height:100px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-hour-segment[_ngcontent-%COMP%]{height:50px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]{padding:20px;width:300px;height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]{width:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;font-weight:700}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:4px;margin-bottom:1rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#28a745;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem}"]})}}return n})();var wz=n=>({error:n});function Nue(n,t){if(n&1&&(g(0,"div",13),M(1),_()),n&2){let e=ce(2);A(),xt(" ",e.errorMessage," ")}}function kue(n,t){if(n&1){let e=dt();g(0,"form",5),le("ngSubmit",function(){Oe(e);let r=ce();return Ae(r.activateUser())}),g(1,"div",6)(2,"label",7),M(3,"New Password"),_(),g(4,"input",8),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.newPassword,r)||(o.newPassword=r),Ae(r)}),_(),g(5,"label",9),M(6,"Confirm Password"),_(),g(7,"input",10),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.confirmPassword,r)||(o.confirmPassword=r),Ae(r)}),_()(),Pe(8,Nue,2,1,"div",11),g(9,"button",12),M(10,"Activate"),_()()}if(n&2){let e=ce();A(4),Xe("ngModel",e.newPassword),X("ngClass",ni(5,wz,e.newPasswordError)),A(3),Xe("ngModel",e.confirmPassword),X("ngClass",ni(7,wz,e.confirmPasswordError)),A(),X("ngIf",e.errorMessage)}}function Fue(n,t){if(n&1){let e=dt();g(0,"div",14),me(1,"img",15),g(2,"p"),M(3,"User activated successfully!"),_(),g(4,"button",16),le("click",function(){Oe(e);let r=ce();return Ae(r.goToHome())}),M(5,"Go to Home"),_()()}}var Ez=(()=>{class n{constructor(e,i,r){this.staffService=e,this.router=i,this.route=r,this.token="",this.newPassword="",this.confirmPassword="",this.errorMessage="",this.activationSuccessful=!1,this.newPasswordError=!1,this.confirmPasswordError=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.token=e.token||""})}activateUser(){if(this.newPasswordError=!this.newPassword.trim(),this.confirmPasswordError=!this.confirmPassword.trim(),!(this.newPasswordError||this.confirmPasswordError)){if(this.token=this.token.trim(),this.newPassword=this.newPassword.trim(),this.confirmPassword=this.confirmPassword.trim(),this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match.";return}this.staffService.activateUser(this.token,this.newPassword).subscribe({next:e=>{console.log("User activated",e),this.errorMessage="",this.activationSuccessful=!0},error:e=>{if(console.error("Error activating user",e),e.status===400){let i=e.error;this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Activation failed - "+e.error)}})}}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(Mt),$(tr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-active-staff"]],standalone:!0,features:[Je],decls:7,vars:2,consts:[[1,"activate-user-container"],[1,"activate-user-middle"],[1,"top"],["class","info-container",3,"ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container",3,"ngSubmit"],[1,"form-group"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","placeholder","Enter new password","required","",3,"ngModelChange","ngModel","ngClass"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm password","required","",3,"ngModelChange","ngModel","ngClass"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-submit"],[1,"error-message"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),M(4,"Activate User"),_()(),Pe(5,kue,11,9,"form",3)(6,Fue,6,0,"div",4),_()()),i&2&&(A(5),X("ngIf",!r.activationSuccessful),A(),X("ngIf",r.activationSuccessful))},dependencies:[vt,Eo,Zt,Dt,Yt,Nt,Ft,qt,hn,Pn,$n],styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.activate-user-container[_ngcontent-%COMP%]   .activate-user-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:500px;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border:2px solid red}.activate-user-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.activate-user-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var Va=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Doctor")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Mt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Sz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-doctor-panel"]],standalone:!0,features:[Je],decls:15,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"header"],[1,"stats"],["routerLink","/medical-history-manager","routerLinkActive","active",1,"box","box1"],["routerLink","/patient-manager","routerLinkActive","active",1,"box","box2"],["routerLink","/appointment-manager","routerLinkActive","active",1,"box","box3"],["routerLink","/operation-requests","routerLinkActive","active",1,"box","box4"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),M(5,"Doctor Panel"),_()(),g(6,"div",3)(7,"button",4),M(8," Manage Medical Histories "),_(),g(9,"button",5),M(10," Manage Patients "),_(),g(11,"button",6),M(12," Manage Appointments "),_(),g(13,"button",7),M(14," Manage Operation Requests "),_()()()())},dependencies:[Vt,kt,jt,Ea],styles:['.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.header[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4a4a4a;display:flex;justify-content:center;color:#fff}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.5em;font-weight:700;box-shadow:0 4px 8px #0000001a}.box1[_ngcontent-%COMP%], .box2[_ngcontent-%COMP%], .box3[_ngcontent-%COMP%], .box4[_ngcontent-%COMP%]{border:3px solid #4a4a4a;background-color:#1e223a}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}']})}}return n})();var Os=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}createOperationRequest(e){return console.log(e),this.http.post(`${this.apiUrl}/OperationRequest`,e).pipe(_n(i=>(console.error("Error creating operation request:",i),In(i))))}editOperationRequest(e,i){return console.log(e),this.http.put(`${this.apiUrl}/OperationRequest/${e}`,i,{responseType:"json"}).pipe(_n(r=>(console.error("Error editing operation request:",r),In(r))))}getOperationRequests(){return this.http.get(`${this.apiUrl}/operationRequest`).pipe(_n(e=>(console.error("Error fetching operation requests:",e),In(()=>new Error("Failed to fetch operation requests")))))}deleteOperationRequest(e,i){return this.http.delete(`${this.apiUrl}/OperationRequest/${e}?doctorLicenseNumber=${i}`,{observe:"response"}).pipe(_n(r=>(console.error("Error deleting operation request:",r),In(r))))}getOperationRequestsWithAdvancedFilter(e,i,r,o,s,a){let l=new URLSearchParams({operationRequest:e||"",doctorLicenseNumber:i||"",operationType:r||"",deadlineDate:o||"",patientMedicalRecordNumber:s||"",priority:a||""});return this.http.get(`${this.apiUrl}/OperationRequest?${l.toString()}`)}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Lue=n=>["/update-operation-request",n],Uue=n=>["/create-appointment",n],Vue=n=>["/view-appointment-details",n];function Bue(n,t){if(n&1){let e=dt();bu(0),g(1,"a",12),M(2,"Edit"),_(),g(3,"a",13),le("click",function(){Oe(e);let r=ce().$implicit,o=ce();return Ae(o.deleteOperationRequest(r.id,r.doctorLicenseNumber))}),M(4,"Delete"),_(),g(5,"a",14),M(6,"Create Appointment"),_(),Cu()}if(n&2){let e=ce().$implicit;A(),X("routerLink",ni(2,Lue,e.id)),A(4),X("routerLink",ni(4,Uue,e.id))}}function zue(n,t){if(n&1&&(g(0,"a",14),M(1,"View Appointment Details"),_()),n&2){let e=ce().$implicit;X("routerLink",ni(1,Vue,e.id))}}function Hue(n,t){if(n&1&&(g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td"),M(6),_(),g(7,"td"),M(8),_(),g(9,"td"),M(10),_(),g(11,"td"),M(12),_(),g(13,"td"),Pe(14,Bue,7,6,"ng-container",11)(15,zue,2,3,"ng-template",null,0,Ys),_()()),n&2){let e=t.$implicit,i=t.index,r=Ai(16),o=ce();A(2),Ye(i+1),A(2),Ye(e.patientName),A(2),Ye(e.doctorLicenseNumber),A(2),Ye(e.operationType),A(2),Ye(e.deadlineDate),A(2),Ye(e.priority),A(2),X("ngIf",o.currentView==="Pending")("ngIfElse",r)}}var Pz=(()=>{class n{constructor(e,i,r){this.staffService=e,this.panelService=i,this.operationRequestService=r,this.operationRequests=[],this.operationTypes=[],this.searchTerm="",this.patients=[],this.email="",this.doctors=[],this.staffProfiles=[],this.doctorLicenseNumber="",this.currentView="Pending"}ngOnInit(){this.loadStaffProfiles(),this.panelService.setPanelId("panel-admin"),this.fetchOperationRequests()}toggleView(){this.currentView=this.currentView==="Pending"?"Accepted":"Pending",this.fetchOperationRequests()}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.doctorLicenseNumber===this.doctorLicenseNumber&&i.status===this.currentView),console.log("Filtered operation requests:",this.operationRequests)},e=>{console.error("Error fetching operation requests",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=Pa(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&(this.doctorLicenseNumber=this.doctors[0].licenseNumber,console.log("Doctor license number:",this.doctorLicenseNumber),this.fetchOperationRequests())}console.log("Doctors:",this.doctors)},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}deleteOperationRequest(e,i){window.confirm(`Are you sure you want to delete the operation request: ${e}?`)&&this.operationRequestService.deleteOperationRequest(e,i).subscribe(()=>{alert("Operation request deleted successfully")},o=>{console.error("Error deleting operation Request:",o)})}viewOperationRequestDetails(e){console.log(`Viewing details for operationRequest ${e}`),this.operationRequestService.getOperationRequestsWithAdvancedFilter().subscribe(i=>{this.selectedOperationRequest=e[0],console.log("Operation request fetched:",i)},i=>{console.error("Error fetching operation request",i)})}searchOperationRequests(){this.searchTerm?this.operationRequests=this.operationRequests.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.fetchOperationRequests()}static{this.\u0275fac=function(i){return new(i||n)($(ir),$(ui),$(Os))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-operation-requests"]],standalone:!0,features:[Je],decls:31,vars:2,consts:[["scheduledActions",""],[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-operation-request",1,"btn","btn-create"],[1,"btn","btn-toggle",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],[1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",1),me(1,"app-sidebar"),g(2,"div",2)(3,"div",3)(4,"button",4),M(5," Create Operation Request "),_(),g(6,"button",5),le("click",function(){return r.toggleView()}),M(7),_(),g(8,"h2",6),M(9,"Operation Request Manager"),_(),g(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),M(16,"Operation Request"),_(),g(17,"th"),M(18,"Patient"),_(),g(19,"th"),M(20,"Doctor"),_(),g(21,"th"),M(22,"Operation Type"),_(),g(23,"th"),M(24,"Deadline"),_(),g(25,"th"),M(26,"Priority"),_(),g(27,"th"),M(28,"Actions"),_()()(),g(29,"tbody"),Pe(30,Hue,17,8,"tr",10),_()()()()()()()),i&2&&(A(7),xt(" ",r.currentView==="Pending"?"Show Accepted Requests":"Show Pending Requests"," "),A(23),X("ngForOf",r.operationRequests))},dependencies:[vt,Mn,Zt,kt,jt,Vt,Dt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;height:90vh;background-color:#f9f9f9;width:1500px;max-width:2000px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#ffc107;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:150%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var Wue=()=>["/operation-requests"];function jue(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Deadline date is required."),_()())}function Gue(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Priority is required."),_()())}function $ue(n,t){if(n&1&&(g(0,"option",24),M(1),_()),n&2){let e=t.$implicit;X("value",e.medicalRecordNumber),A(),y1(" ",e.medicalRecordNumber," - ",e.fullName," ")}}function que(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Patient selection is required."),_()())}function Yue(n,t){if(n&1&&(g(0,"option"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.name," ")}}function Xue(n,t){n&1&&(g(0,"div")(1,"small",23),M(2,"Operation type selection is required."),_()())}var Tz=(()=>{class n{constructor(e,i,r,o,s,a){this.fb=e,this.operationRequestService=i,this.router=r,this.patientService=o,this.operationTypeService=s,this.staffService=a,this.patients=[],this.operationTypes=[],this.doctors=[],this.staffProfiles=[],this.email="",this.operationRequestForm=this.fb.group({deadlineDate:["",Gt.required],priority:["",Gt.required],patientMedicalRecordNumber:["",Gt.required],doctorLicenseNumber:[""],operationType:["",Gt.required]})}ngOnInit(){this.operationRequestForm=this.fb.group({deadlineDate:["",Gt.required],priority:["",Gt.required],patientMedicalRecordNumber:["",Gt.required],doctorLicenseNumber:[""],operationType:["",Gt.required]}),this.fetchPatients(),this.loadStaffProfiles()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{let i=this.doctors.length>0?this.doctors[0].specializationId:null;i?(e.forEach(r=>{r.specializations.forEach(o=>{console.log("Operation type specialization ID:",o.id.value)})}),this.operationTypes=e.filter(r=>r.specializations.some(o=>o.id.value===i))):this.operationTypes=e,console.log("Filtered operation types:",this.operationTypes)},e=>{console.error("Error fetching operation types",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=Pa(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&this.operationRequestForm.patchValue({doctorLicenseNumber:this.doctors[0].licenseNumber})}console.log("Doctors:",this.doctors),this.fetchOperationTypes()},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}onSubmit(){this.operationRequestForm.valid?this.operationRequestService.createOperationRequest(this.operationRequestForm.value).subscribe(e=>{alert("Operation requested successfully"),this.router.navigate(["/operation-requests"])},e=>{console.error("Error requesting operation",e),alert("There was an error requesting the operation. Please try again.")}):alert("Please fill in all required fields.")}static{this.\u0275fac=function(i){return new(i||n)($(Sa),$(Os),$(Mt),$(Ss),$(_s),$(ir))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-operation-request"]],standalone:!0,features:[Je],decls:45,vars:10,consts:[[1,"operationRequest-container"],[1,"form-and-table-container"],[1,"form-container"],[1,"operation-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","deadlineDate"],["type","date","id","deadlineDate","formControlName","deadlineDate","placeholder","YYYY-MM-DD"],[4,"ngIf"],["for","priority"],["id","priority","formControlName","priority"],["value","","disabled","","selected",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["for","patientMedicalRecordNumber"],["id","patientMedicalRecordNumber","formControlName","patientMedicalRecordNumber"],[3,"value",4,"ngFor","ngForOf"],["for","operationType"],["id","operationType","formControlName","operationType"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"error"],[3,"value"]],template:function(i,r){if(i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),M(5,"Create Operation Request"),_(),g(6,"form",4),le("ngSubmit",function(){return r.onSubmit()}),g(7,"div",5)(8,"label",6),M(9,"Deadline Date:"),_(),me(10,"input",7),Pe(11,jue,3,0,"div",8),_(),g(12,"div",5)(13,"label",9),M(14,"Priority:"),_(),g(15,"select",10)(16,"option",11),M(17,"Select priority"),_(),g(18,"option",12),M(19,"Elective Surgery"),_(),g(20,"option",13),M(21,"Urgent Surgery"),_(),g(22,"option",14),M(23,"Emergency Surgery"),_()(),Pe(24,Gue,3,0,"div",8),_(),g(25,"div",5)(26,"label",15),M(27,"Select Patient:"),_(),g(28,"select",16)(29,"option",11),M(30,"Select patient"),_(),Pe(31,$ue,2,3,"option",17),_(),Pe(32,que,3,0,"div",8),_(),g(33,"div",5)(34,"label",18),M(35,"Select Operation Type:"),_(),g(36,"select",19)(37,"option",11),M(38,"Select operation type"),_(),Pe(39,Yue,2,1,"option",20),_(),Pe(40,Xue,3,0,"div",8),_(),g(41,"button",21),M(42," Create Request "),_(),g(43,"a",22),M(44,"Back"),_()()()()()),i&2){let o,s,a,l;A(6),X("formGroup",r.operationRequestForm),A(5),X("ngIf",((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.invalid)&&((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.touched)),A(13),X("ngIf",((s=r.operationRequestForm.get("priority"))==null?null:s.invalid)&&((s=r.operationRequestForm.get("priority"))==null?null:s.touched)),A(7),X("ngForOf",r.patients),A(),X("ngIf",((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.invalid)&&((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.touched)),A(7),X("ngForOf",r.operationTypes),A(),X("ngIf",((l=r.operationRequestForm.get("operationType"))==null?null:l.invalid)&&((l=r.operationRequestForm.get("operationType"))==null?null:l.touched)),A(),X("disabled",r.operationRequestForm.invalid),A(2),X("routerLink",Hi(9,Wue))}},dependencies:[vt,Mn,Zt,nr,Yt,Ii,Ri,Nt,Wi,Ft,qt,Cr,Dr,kt,jt,Vt],styles:[".operationRequest-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box;padding:20px}.operationRequest-container[_ngcontent-%COMP%]   .form-and-table-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:30px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:600px;background-color:#fff;border:1px solid #e0e0e0;border-radius:12px;box-shadow:0 4px 20px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .operation-title[_ngcontent-%COMP%]{margin-bottom:25px;font-size:24px;font-weight:600;color:#333;text-align:center}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#555;font-size:14px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #cccccc;border-radius:6px;padding:12px;font-size:16px;color:#555;box-sizing:border-box;transition:border-color .3s,box-shadow .3s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80;outline:none}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:13px;margin-top:5px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px;padding:12px 24px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-left:135px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;position:absolute;top:10px;right:10px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Sh=(()=>{class n{constructor(e){this.http=e,this.url="http://localhost:4000/api/specializations"}getSpecializations(){return this.http.get(this.url)}createSpecialization(e){return this.http.post(`${this.url}/create`,e)}updateSpecialization(e,i){return this.http.put(`${this.url}/update/${e}`,i)}deleteSpecialization(e){return this.http.delete(`${this.url}/delete/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zue(n,t){n&1&&(g(0,"small",8),M(1," Specialization Type is required and must be between 3 and 50 characters. "),_())}var qm=(()=>{class n{constructor(e){this.specializationService=e,this.specialization={specializationType:""},this.specializationCreated=new yt}onSubmit(){this.specializationService.createSpecialization(this.specialization).subscribe({next:()=>{alert("Specialization created successfully!"),this.specializationCreated.emit()},error:e=>{console.error("Error creating specialization:",e),alert("Failed to create specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Sh))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-specialization"]],outputs:{specializationCreated:"specializationCreated"},standalone:!0,features:[Je],decls:15,vars:3,consts:[["specializationForm","ngForm"],[1,"create-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","3","maxlength","50","aria-label","Specialization Type",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"]],template:function(i,r){if(i&1){let o=dt();g(0,"div",1)(1,"h2"),M(2,"Create Specialization"),_(),g(3,"form",2,0),le("ngSubmit",function(){return Oe(o),Ae(r.onSubmit())}),g(5,"fieldset")(6,"legend"),M(7,"Specialization Details"),_(),g(8,"div",3)(9,"label",4),M(10,"Specialization Type"),_(),g(11,"input",5),Ze("ngModelChange",function(a){return Oe(o),Ke(r.specialization.specializationType,a)||(r.specialization.specializationType=a),Ae(a)}),_(),Pe(12,Zue,2,0,"small",6),_(),g(13,"button",7),M(14," Submit "),_()()()()}if(i&2){let o=Ai(4);A(11),Xe("ngModel",r.specialization.specializationType),A(),X("ngIf",(o.form.controls.specializationType==null?null:o.form.controls.specializationType.invalid)&&(o.form.controls.specializationType==null?null:o.form.controls.specializationType.touched)),A(),X("disabled",!o.form.valid)}},dependencies:[Dt,Yt,Nt,Ft,qt,hn,rm,om,Pn,$n,vt,Zt],styles:[".create-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.create-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff80}"]})}}return n})();function Kue(n,t){n&1&&(g(0,"p",10),M(1," Specialization Type is required. "),_())}function Jue(n,t){n&1&&(g(0,"p",10),M(1," Specialization Type must be at least 1 character long. "),_())}function Que(n,t){if(n&1&&(g(0,"div"),Pe(1,Kue,2,0,"p",9)(2,Jue,2,0,"p",9),_()),n&2){let e,i;ce();let r=Ai(4);A(),X("ngIf",(e=r.form.get("specializationType"))==null||e.errors==null?null:e.errors.required),A(),X("ngIf",(i=r.form.get("specializationType"))==null||i.errors==null?null:i.errors.minlength)}}var Dz=(()=>{class n{constructor(e,i){this.route=e,this.specializationService=i,this.specializationId="",this.specializationUpdated=new yt,this.specialization={specializationType:""}}ngOnInit(){console.log("Specialization ID:",this.specializationId)}onSubmit(){this.specializationService.updateSpecialization(this.specializationId,this.specialization).subscribe({next:()=>{alert("Specialization updated successfully!"),this.specializationUpdated.emit()},error:e=>{console.error("Error updating specialization:",e),alert("Failed to update specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Mt),$(Sh))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-specialization"]],inputs:{specializationId:"specializationId"},outputs:{specializationUpdated:"specializationUpdated"},standalone:!0,features:[Je],decls:17,vars:3,consts:[["specializationForm","ngForm"],[1,"update-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","1","aria-label","Specialization Type","aria-describedby","specializationTypeHelp specializationTypeError",1,"form-control",3,"ngModelChange","ngModel"],["id","specializationTypeHelp",1,"form-text","text-muted"],[4,"ngIf"],["type","submit","aria-disabled","!specializationForm.form.valid",1,"btn","btn-primary",3,"disabled"],["id","specializationTypeError","class","error-text",4,"ngIf"],["id","specializationTypeError",1,"error-text"]],template:function(i,r){if(i&1){let o=dt();g(0,"div",1)(1,"h2"),M(2,"Update Specialization"),_(),g(3,"form",2,0),le("ngSubmit",function(){return Oe(o),Ae(r.onSubmit())}),g(5,"fieldset")(6,"legend"),M(7,"Specialization Details"),_(),g(8,"div",3)(9,"label",4),M(10,"Specialization Type"),_(),g(11,"input",5),Ze("ngModelChange",function(a){return Oe(o),Ke(r.specialization.specializationType,a)||(r.specialization.specializationType=a),Ae(a)}),_(),g(12,"small",6),M(13," Enter the type of specialization (e.g., Doctor, Nurse). "),_(),Pe(14,Que,3,2,"div",7),_(),g(15,"button",8),M(16," Update "),_()()()()}if(i&2){let o,s=Ai(4);A(11),Xe("ngModel",r.specialization.specializationType),A(3),X("ngIf",s.submitted||((o=s.form.get("specializationType"))==null?null:o.touched)),A(),X("disabled",!s.form.valid)}},dependencies:[Dt,Yt,Nt,Ft,qt,hn,rm,Pn,$n,vt,Zt],styles:[".update-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 6px #0000001a}.update-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:14px;border:1px solid #ced4da;border-radius:4px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:none}.form-text[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#dc3545}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:none;border-radius:4px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[aria-disabled=true][_ngcontent-%COMP%]{background-color:silver;cursor:not-allowed}"]})}}return n})();function ede(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",10),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openUpdateSpecialization(r.id))}),M(5," Edit "),_(),g(6,"button",11),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.deleteSpecialization(r.id,r.specializationType))}),M(7," Delete "),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.specializationType),A(2),Xi("aria-label","Edit "+e.specializationType),A(2),Xi("aria-label","Delete "+e.specializationType)}}function tde(n,t){if(n&1){let e=dt();g(0,"div",12),le("click",function(r){Oe(e);let o=ce();return Ae(o.closeModal(r))}),g(1,"div",13),le("click",function(r){return Oe(e),Ae(r.stopPropagation())}),g(2,"button",14),le("click",function(){Oe(e);let r=ce();return Ae(r.closeModal())}),M(3,"X"),_(),g(4,"app-create-specialization",15),le("specializationCreated",function(){Oe(e);let r=ce();return Ae(r.refreshSpecializations())}),_()()()}}function nde(n,t){if(n&1){let e=dt();g(0,"div",12),le("click",function(r){Oe(e);let o=ce();return Ae(o.closeUpdateModal(r))}),g(1,"div",13),le("click",function(r){return Oe(e),Ae(r.stopPropagation())}),g(2,"button",14),le("click",function(){Oe(e);let r=ce();return Ae(r.closeUpdateModal())}),M(3,"X"),_(),g(4,"app-update-specialization",16),le("specializationUpdated",function(){Oe(e);let r=ce();return Ae(r.refreshSpecializations())}),_()()()}if(n&2){let e=ce();A(4),X("specializationId",e.selectedSpecializationId)}}var Oz=(()=>{class n{constructor(e,i){this.specializationService=e,this.router=i,this.specializations=[],this.isModalOpen=!1,this.isUpdateModalOpen=!1}ngOnInit(){this.fetchSpecializations()}fetchSpecializations(){this.specializationService.getSpecializations().subscribe({next:e=>{console.log("API Response:",e),e.isSuccess&&Array.isArray(e._value)?(this.specializations=e._value,console.log("Specializations:",this.specializations)):(this.specializations=[],console.error("Unexpected API response format:",e))},error:e=>{console.error("Error fetching specializations:",e)}})}openCreateSpecialization(){this.isModalOpen=!0,this.router.navigate(["specializations/create-specialization"])}closeModal(e){e&&e.stopPropagation(),this.isModalOpen=!1,this.router.navigate(["specializations"])}openUpdateSpecialization(e){this.selectedSpecializationId=e,this.isUpdateModalOpen=!0,this.router.navigate(["specializations/update-specialization",e])}closeUpdateModal(e){e&&e.stopPropagation(),this.isUpdateModalOpen=!1,this.router.navigate(["specializations"])}refreshSpecializations(){this.fetchSpecializations(),this.closeModal(),this.closeUpdateModal()}deleteSpecialization(e,i){confirm(`Are you sure you want to delete the specialization "${i}"?`)&&this.specializationService.deleteSpecialization(e).subscribe({next:()=>{alert("Specialization deleted successfully!"),this.refreshSpecializations()},error:r=>{console.error("Error deleting specialization:",r),alert("Failed to delete specialization.")}})}viewSpecializationDetails(e){console.log(`Viewing specialization details for ID: ${e}`)}static{this.\u0275fac=function(i){return new(i||n)($(Sh),$(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-specialization"]],standalone:!0,features:[Je],decls:21,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["type","button",1,"btn","btn-create",3,"click"],[1,"manage-title","text-center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal-container",3,"click",4,"ngIf"],["type","button",1,"btn","btn-update",3,"click"],["type","button",1,"btn","btn-delete",3,"click"],[1,"modal-container",3,"click"],[1,"modal-content",3,"click"],["type","button","aria-label","Close modal",1,"btn","btn-close",3,"click"],[3,"specializationCreated"],[3,"specializationUpdated","specializationId"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),le("click",function(){return r.openCreateSpecialization()}),M(5," Create Specialization "),_(),g(6,"h2",4),M(7," Specializations Manager "),_(),g(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th"),M(14,"Specialization"),_(),g(15,"th"),M(16,"Actions"),_()()(),g(17,"tbody"),Pe(18,ede,8,3,"tr",8),_()()()()()(),Pe(19,tde,5,0,"div",9)(20,nde,5,1,"div",9),_()),i&2&&(A(18),X("ngForOf",r.specializations),A(),X("ngIf",r.isModalOpen),A(),X("ngIf",r.isUpdateModalOpen))},dependencies:[vt,Mn,Zt,kt,Vt,qm,Dz],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;margin:0;padding:0;box-sizing:border-box}.manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;padding:20px}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:100%;max-width:1100px;height:auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 10px #0000001a;position:relative}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:15px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{font-size:12px;padding:8px 16px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:1.5rem;text-align:center}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:1.25rem}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;flex-direction:column}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:90%;margin:0 auto;border-collapse:collapse;font-size:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:6px;text-align:left}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;padding:4px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 10px}}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{padding:10px}}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;max-width:600px;width:100%;box-shadow:0 4px 6px #0000001a;position:relative;transition:transform .3s ease,opacity .3s ease}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{padding:15px;max-width:90%}}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#dc3545;border:none;color:#fff;padding:5px 10px;border-radius:50%;cursor:pointer;font-size:16px;transition:background-color .3s}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#c82333}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{font-size:14px;padding:4px 8px}}"]})}}return n})();var yb=(()=>{class n{constructor(e){this.allergyService=e,this.allergy={allergyCode:"",allergyName:"",allergyDescription:"",allergySymptoms:""},this.allergyCreated=new yt}onSubmit(){this.allergyService.createAllergy(this.allergy).subscribe({next:()=>{alert("Allergy created successfully!"),this.allergyCreated.emit()},error:e=>{console.error("Error creating allergy:",e),alert("Failed to create allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Xr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-allergies"]],outputs:{allergyCreated:"allergyCreated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Create Allergy"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.allergy.allergyCode),A(3),Xe("ngModel",r.allergy.allergyName),A(3),Xe("ngModel",r.allergy.allergyDescription),A(3),Xe("ngModel",r.allergy.allergySymptoms))},dependencies:[Dt,Yt,Nt,Ft,qt,hn,Pn,$n],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var xb=(()=>{class n{constructor(e){this.conditionService=e,this.medicalCondition={medicalConditionCode:"",medicalConditionName:"",medicalConditionDescription:"",medicalConditionSymptoms:""},this.conditionCreated=new yt}onSubmit(){this.conditionService.createMedicalConditions(this.medicalCondition).subscribe({next:()=>{alert("Medical Condition created successfully!"),this.conditionCreated.emit()},error:e=>{console.error("Error creating condition:",e),alert("Failed to create condition.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Zr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-conditions"]],outputs:{conditionCreated:"conditionCreated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","condition-code"],["type","text","id","condition-code","name","condition-code","required","",3,"ngModelChange","ngModel"],["for","condition-name"],["type","text","id","condition-name","name","condition-name","required","",3,"ngModelChange","ngModel"],["for","condition-description"],["type","text","id","condition-description","name","condition-description","required","",3,"ngModelChange","ngModel"],["for","condition-sypmtoms"],["type","text","id","condition-symptoms","name","condition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Create Medical Condition"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.medicalCondition.medicalConditionCode),A(3),Xe("ngModel",r.medicalCondition.medicalConditionName),A(3),Xe("ngModel",r.medicalCondition.medicalConditionDescription),A(3),Xe("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[Dt,Yt,Nt,Ft,qt,hn,Pn,$n],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var bb=(()=>{class n{constructor(e){this.allergyService=e,this.allergyUpdated=new yt}onSubmit(){let e=this.allergy.id;console.log("Allergy:",this.allergy),console.log("Allergy ID:",e),this.allergyService.updateAllergy(e,this.allergy).subscribe({next:()=>{alert("Allergy updated successfully!"),this.allergyUpdated.emit()},error:i=>{console.error("Error updating allergy:",i),alert("Failed to update allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Xr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-allergies"]],inputs:{allergy:"allergy"},outputs:{allergyUpdated:"allergyUpdated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Update Allergy"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.allergy.allergyCode),A(3),Xe("ngModel",r.allergy.allergyName),A(3),Xe("ngModel",r.allergy.allergyDescription),A(3),Xe("ngModel",r.allergy.allergySymptoms))},dependencies:[Dt,Yt,Nt,Ft,qt,hn,Pn,$n],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var Cb=(()=>{class n{constructor(e){this.medicalConditionService=e,this.conditionUpdated=new yt}onSubmit(){let e=this.medicalCondition.id;this.medicalConditionService.updateCondition(e,this.medicalCondition).subscribe({next:()=>{alert("Condition updated successfully!"),this.conditionUpdated.emit()},error:i=>{console.error("Error creating condition:",i),alert("Failed to update condition.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Zr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-conditions"]],inputs:{medicalCondition:"medicalCondition"},outputs:{conditionUpdated:"conditionUpdated"},standalone:!0,features:[Je],decls:17,vars:4,consts:[[3,"submit"],["for","medicalCondition-code"],["type","text","id","medicalCondition-code","name","medicalCondition-code","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-name"],["type","text","id","medicalCondition-name","name","medicalCondition-name","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-description"],["type","text","id","medicalCondition-description","name","medicalCondition-description","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-symptoms"],["type","text","id","medicalCondition-symptoms","name","medicalCondition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),M(1,"Update Condition"),_(),g(2,"form",0),le("submit",function(){return r.onSubmit()}),g(3,"label",1),M(4,"Code:"),_(),g(5,"input",2),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),_(),g(6,"label",3),M(7,"Name:"),_(),g(8,"input",4),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),_(),g(9,"label",5),M(10,"Description:"),_(),g(11,"input",6),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),_(),g(12,"label",7),M(13,"Symptoms:"),_(),g(14,"input",8),Ze("ngModelChange",function(s){return Ke(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),_(),g(15,"button",9),M(16,"Submit"),_()()),i&2&&(A(5),Xe("ngModel",r.medicalCondition.medicalConditionCode),A(3),Xe("ngModel",r.medicalCondition.medicalConditionName),A(3),Xe("ngModel",r.medicalCondition.medicalConditionDescription),A(3),Xe("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[Dt,Yt,Nt,Ft,qt,hn,Pn,$n],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();function ide(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openDetailsModal(r,"allergy"))}),M(5,"View Details"),_(),g(6,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openUpdateModal(r,"allergy"))}),M(7,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.allergyName)}}function rde(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openDetailsModal(r,"condition"))}),M(5,"View Details"),_(),g(6,"button",9),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.openUpdateModal(r,"condition"))}),M(7,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.medicalConditionName)}}function ode(n,t){if(n&1){let e=dt();g(0,"app-create-allergies",18),le("allergyCreated",function(){Oe(e);let r=ce(2);return Ae(r.handleAllergyCreated())}),_()}}function sde(n,t){if(n&1){let e=dt();g(0,"app-create-conditions",19),le("conditionCreated",function(){Oe(e);let r=ce(2);return Ae(r.handleConditionCreated())}),_()}}function ade(n,t){if(n&1){let e=dt();g(0,"app-update-allergies",20),le("allergyUpdated",function(){Oe(e);let r=ce(2);return Ae(r.handleAllergyUpdated())}),_()}if(n&2){let e=ce(2);X("allergy",e.selectedItem)}}function lde(n,t){if(n&1){let e=dt();g(0,"app-update-conditions",21),le("conditionUpdated",function(){Oe(e);let r=ce(2);return Ae(r.handleConditionUpdated())}),_()}if(n&2){let e=ce(2);X("medicalCondition",e.selectedItem)}}function cde(n,t){if(n&1&&(g(0,"div")(1,"h2"),M(2),_(),g(3,"p")(4,"strong"),M(5,"Code:"),_(),M(6),_(),g(7,"p")(8,"strong"),M(9,"Description:"),_(),M(10),_(),g(11,"p")(12,"strong"),M(13,"Symptoms:"),_(),M(14),_()()),n&2){let e=ce(2);A(2),xt("",e.selectedItemType==="allergy"?e.selectedItem.allergyName:e.selectedItem.medicalConditionName," Details"),A(4),xt(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyCode:e.selectedItem.medicalConditionCode,""),A(4),xt(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyDescription:e.selectedItem.medicalConditionDescription,""),A(4),xt(" ",e.selectedItemType==="allergy"?e.selectedItem.allergySymptoms:e.selectedItem.medicalConditionSymptoms,"")}}function ude(n,t){if(n&1){let e=dt();g(0,"div",10)(1,"div",11)(2,"span",12),le("click",function(){Oe(e);let r=ce();return Ae(r.closeModal())}),M(3,"\xD7"),_(),Pe(4,ode,1,0,"app-create-allergies",13)(5,sde,1,0,"app-create-conditions",14)(6,ade,1,1,"app-update-allergies",15)(7,lde,1,1,"app-update-conditions",16)(8,cde,15,4,"div",17),_()()}if(n&2){let e=ce();A(4),X("ngIf",e.modalType==="create-allergies"),A(),X("ngIf",e.modalType==="create-conditions"),A(),X("ngIf",e.modalType==="update-allergies"),A(),X("ngIf",e.modalType==="update-conditions"),A(),X("ngIf",e.modalType==="details")}}var Az=(()=>{class n{constructor(e,i,r,o,s){this.renderer=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.modalType=null,this.allergies=[],this.medicalConditions=[],this.selectedItem=null,this.selectedItemType=null}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.fetchAllergies(),this.fetchMedicalConditions()}openModal(e){this.modalType=e,this.renderer.addClass(document.body,"modal-active"),this.router.navigate([`/manage-allergies-and-conditions/${e}`])}closeModal(){this.modalType=null,this.selectedItem=null,this.selectedItemType=null,this.renderer.removeClass(document.body,"modal-active"),this.router.navigate(["/manage-allergies-and-conditions"]),this.refreshPage()}openDetailsModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType="details",this.renderer.addClass(document.body,"modal-active")}openUpdateModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType=i==="allergy"?"update-allergies":"update-conditions",this.renderer.addClass(document.body,"modal-active"),i==="allergy"?this.router.navigate([`/manage-allergies-and-conditions/update-allergies/${e.id}`]):this.router.navigate([`/manage-allergies-and-conditions/update-conditions/${e.id}`])}handleAllergyCreated(){this.closeModal()}handleConditionCreated(){this.closeModal()}handleAllergyUpdated(){this.closeModal()}handleConditionUpdated(){this.closeModal()}refreshPage(){this.fetchAllergies(),this.fetchMedicalConditions()}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}static{this.\u0275fac=function(i){return new(i||n)($(Oi),$(Mt),$(ui),$(Xr),$(Zr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-manage-allergies-and-conditions"]],standalone:!0,features:[Je],decls:34,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"btn","btn-create",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[3,"allergyCreated",4,"ngIf"],[3,"conditionCreated",4,"ngIf"],[3,"allergy","allergyUpdated",4,"ngIf"],[3,"medicalCondition","conditionUpdated",4,"ngIf"],[4,"ngIf"],[3,"allergyCreated"],[3,"conditionCreated"],[3,"allergyUpdated","allergy"],[3,"conditionUpdated","medicalCondition"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),le("click",function(){return r.openModal("create-allergies")}),M(5,"Create"),_(),g(6,"h2",4),M(7,"Allergies"),_(),g(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),M(13,"Allergies"),_(),g(14,"th"),M(15,"Actions"),_()()(),g(16,"tbody"),Pe(17,ide,8,1,"tr",7),_()()()(),g(18,"div",2)(19,"button",3),le("click",function(){return r.openModal("create-conditions")}),M(20,"Create"),_(),g(21,"h2",4),M(22,"Medical Conditions"),_(),g(23,"div",5)(24,"table",6)(25,"thead")(26,"tr")(27,"th"),M(28,"Conditions"),_(),g(29,"th"),M(30,"Actions"),_()()(),g(31,"tbody"),Pe(32,rde,8,1,"tr",7),_()()()()(),Pe(33,ude,9,5,"div",8),_()),i&2&&(A(17),X("ngForOf",r.allergies),A(15),X("ngForOf",r.medicalConditions),A(),X("ngIf",r.modalType))},dependencies:[vt,Mn,Zt,Dt,kt,Vt,yb,xb,bb,Cb],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:800px;height:600px;background-color:#f9f9f9;max-width:800px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:12px;width:80%;max-width:500px;position:relative;box-shadow:0 4px 8px #0000001a}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:24px;cursor:pointer;color:#333;transition:color .3s}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#007bff}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:24px;color:#333}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;margin:10px 0}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}"]})}}return n})();function dde(n,t){if(n&1){let e=dt();g(0,"div",17)(1,"span"),M(2),_(),g(3,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.onAllergyChange(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(2),Ye(e.allergyName),A(),X("value",e.id)("checked",i.medicalHistory.allergies.includes(e.id))}}function fde(n,t){if(n&1){let e=dt();g(0,"div",17)(1,"span"),M(2),_(),g(3,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.onMedicalConditionChange(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(2),Ye(e.medicalConditionName),A(),X("value",e.id)("checked",i.medicalHistory.medicalConditions.includes(e.id))}}function hde(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td")(4,"button",9),le("click",function(){let r=Oe(e).index,o=ce();return Ae(o.editFamilyHistory(r))}),M(5,"Edit"),_(),g(6,"button",9),le("click",function(){let r=Oe(e).index,o=ce();return Ae(o.removeFamilyHistory(r))}),M(7," Remove "),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e)}}function pde(n,t){if(n&1){let e=dt();g(0,"div",24)(1,"span"),M(2),_(),g(3,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce(2);return Ae(s.onFamilyHistoryConditionChange(r,o.medicalConditionName))}),_()()}if(n&2){let e=t.$implicit,i=ce(2);A(2),Ye(e.medicalConditionName),A(),X("value",e.medicalConditionName)("checked",i.newFamilyHistory.conditions.includes(e.medicalConditionName))}}function mde(n,t){if(n&1){let e=dt();g(0,"div",19)(1,"div",20)(2,"span",21),le("click",function(){Oe(e);let r=ce();return Ae(r.closeFamilyConditionsModal())}),M(3,"\xD7"),_(),g(4,"h2"),M(5,"Select Family Conditions"),_(),g(6,"div",22),Pe(7,pde,4,3,"div",23),_(),g(8,"button",15),le("click",function(){Oe(e);let r=ce();return Ae(r.closeFamilyConditionsModal())}),M(9," Save "),_()()()}if(n&2){let e=ce();A(7),X("ngForOf",e.medicalConditions)}}function gde(n,t){if(n&1){let e=dt();g(0,"div",19)(1,"div",25)(2,"span",26),le("click",function(){Oe(e);let r=ce();return Ae(r.closeUpdateFamilyHistoryModal())}),M(3,"\xD7"),_(),g(4,"h2"),M(5,"Edit Family History"),_(),g(6,"div",7)(7,"input",27),Ze("ngModelChange",function(r){Oe(e);let o=ce();return Ke(o.newFamilyHistory.relationship,r)||(o.newFamilyHistory.relationship=r),Ae(r)}),_(),g(8,"button",9),le("click",function(){Oe(e);let r=ce();return Ae(r.openFamilyConditionsModal())}),M(9," Select Conditions "),_()(),g(10,"button",28),le("click",function(){Oe(e);let r=ce();return Ae(r.updateFamilyHistory())}),M(11," Save "),_()()()}if(n&2){let e=ce();A(7),Xe("ngModel",e.newFamilyHistory.relationship),A(3),X("disabled",!e.newFamilyHistory.relationship||e.newFamilyHistory.conditions.length===0)}}var Iz=(()=>{class n{constructor(e,i,r,o){this.allergyService=e,this.panelService=i,this.medicalHistoryService=r,this.medicalConditionService=o,this.medicalHistory={id:"",patientMedicalRecordNumber:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.newFamilyHistory={relationship:"",conditions:[]},this.selectedFamilyHistory=null,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen=!1}ngOnInit(){console.log("ngOnInit called"),this.panelService.setPanelId("panel-admin"),this.fetchAllergies(),this.fetchMedicalConditions();let e=this.extractMedicalRecordNumberFromUrl();this.fetchMedicalHistory(e)}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(console.log("Family History:",i.familyHistory),this.medicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:i.familyHistory===""?[]:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.medicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){console.log("filterSelectedAllergies called"),this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){console.log("filterSelectedMedicalConditions called"),this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){console.log("searchAllergies called with allergySearch:",this.allergySearch),this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase())),console.log("Filtered allergies after search:",this.filteredAllergies)}searchMedicalConditions(){console.log("searchMedicalConditions called with medicalConditionSearch:",this.medicalConditionSearch),this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase())),console.log("Filtered medical conditions after search:",this.filteredMedicalConditions)}extractMedicalRecordNumberFromUrl(){console.log("extractMedicalRecordNumberFromUrl called");let e=window.location.href,i=/\/update-medical-history\/(\d+)/,r=e.match(i);if(r&&r[1])return console.log("Medical record number extracted from URL:",r[1]),r[1];throw new Error("Medical record number not found in URL.")}fetchAllergies(){console.log("fetchAllergies called"),this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){console.log("fetchMedicalConditions called"),this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}onAllergyChange(e,i){if(console.log("onAllergyChange called with event:",e,"and allergyId:",i),e.target.checked)this.medicalHistory.allergies.push(i);else{let r=this.medicalHistory.allergies.indexOf(i);r>-1&&this.medicalHistory.allergies.splice(r,1)}console.log("Updated allergies:",this.medicalHistory.allergies)}onMedicalConditionChange(e,i){if(console.log("onMedicalConditionChange called with event:",e,"and medicalConditionId:",i),e.target.checked)this.medicalHistory.medicalConditions.push(i);else{let r=this.medicalHistory.medicalConditions.indexOf(i);r>-1&&this.medicalHistory.medicalConditions.splice(r,1)}console.log("Updated medical conditions:",this.medicalHistory.medicalConditions)}openFamilyConditionsModal(){console.log("openFamilyConditionsModal called"),this.wasUpdateFamilyHistoryModalOpen=this.showUpdateFamilyHistoryModal,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!0,console.log("Family conditions modal opened")}closeFamilyConditionsModal(){console.log("closeFamilyConditionsModal called"),this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen&&(this.showUpdateFamilyHistoryModal=!0),console.log("Family conditions modal closed")}addFamilyHistory(){console.log("addFamilyHistory called with newFamilyHistory:",this.newFamilyHistory);let e=this.newFamilyHistory.conditions.join("; "),i=`${this.newFamilyHistory.relationship}: ${e}`;this.medicalHistory.familyHistory.includes(i)||this.medicalHistory.familyHistory.push(i),this.newFamilyHistory={relationship:"",conditions:[]},console.log("Updated family history:",this.medicalHistory.familyHistory)}removeFamilyHistory(e){console.log("removeFamilyHistory called with index:",e),this.medicalHistory.familyHistory.splice(e,1),this.selectedFamilyHistory=null,console.log("Updated family history:",this.medicalHistory.familyHistory)}onFamilyHistoryConditionChange(e,i){if(console.log("onFamilyHistoryConditionChange called with event:",e,"and condition:",i),e.target.checked)this.newFamilyHistory.conditions.includes(i)||this.newFamilyHistory.conditions.push(i);else{let r=this.newFamilyHistory.conditions.indexOf(i);r>-1&&this.newFamilyHistory.conditions.splice(r,1)}console.log("Updated new family history conditions:",this.newFamilyHistory.conditions)}editFamilyHistory(e){console.log("editFamilyHistory called with index:",e),this.selectedFamilyHistory=e;let i=this.parseFamilyHistory([this.medicalHistory.familyHistory[e]])[0];this.newFamilyHistory={relationship:i.relationship,conditions:i.conditions},this.showUpdateFamilyHistoryModal=!0,console.log("Editing family history:",this.newFamilyHistory)}closeUpdateFamilyHistoryModal(){console.log("closeUpdateFamilyHistoryModal called"),this.showUpdateFamilyHistoryModal=!1,this.newFamilyHistory={relationship:"",conditions:[]},console.log("Update family history modal closed")}updateFamilyHistory(){if(console.log("updateFamilyHistory called"),this.selectedFamilyHistory!==null){let e=`${this.newFamilyHistory.relationship}: ${this.newFamilyHistory.conditions.join("; ")}`;this.medicalHistory.familyHistory.includes(e)||(this.medicalHistory.familyHistory[this.selectedFamilyHistory]=e),this.closeUpdateFamilyHistoryModal(),console.log("Updated family history:",this.medicalHistory.familyHistory)}}submitMedicalHistory(){console.log("submitMedicalHistory called with medicalHistory:",this.medicalHistory),this.medicalHistoryService.updatePatientMedicalHistory(this.medicalHistory.patientMedicalRecordNumber,this.medicalHistory.allergies,this.medicalHistory.medicalConditions,this.medicalHistory.familyHistory,this.medicalHistory.freeText).subscribe(e=>{console.log("Medical history updated:",e),alert("Medical history updated successfully")},e=>{console.error("Error updating medical history:",e),alert("Error updating medical history")})}static{this.\u0275fac=function(i){return new(i||n)($(Xr),$(ui),$(La),$(Zr))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-medical-history"]],standalone:!0,features:[Je],decls:42,vars:8,consts:[[1,"content"],[1,"medical-history-container"],[1,"top-section"],[1,"box"],[1,"multi-select-list"],["class","multi-select-item",4,"ngFor","ngForOf"],[1,"middle-section"],[1,"family-history-input"],["type","text","placeholder","Relationship","name","newRelationship","required","",3,"ngModelChange","ngModel"],["type","button",3,"click"],["type","button",3,"click","disabled"],[1,"family-history-table"],[4,"ngFor","ngForOf"],[1,"bottom-section"],["placeholder","Free Text Field","name","freeTextField",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click"],["class","modal",4,"ngIf"],[1,"multi-select-item"],["type","checkbox",3,"change","value","checked"],[1,"modal"],[1,"family-conditions-modal-content"],[1,"family-conditions-close",3,"click"],[1,"family-conditions-multi-select-list"],["class","family-conditions-multi-select-item",4,"ngFor","ngForOf"],[1,"family-conditions-multi-select-item"],[1,"update-family-history-modal-content"],[1,"update-family-history-close",3,"click"],["type","text","placeholder","Relationship","name","editRelationship","required","",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click","disabled"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"h2"),M(4,"Medical History"),_(),g(5,"div",2)(6,"div",3)(7,"h3"),M(8,"Allergies"),_(),g(9,"div",4),Pe(10,dde,4,3,"div",5),_()(),g(11,"div",3)(12,"h3"),M(13,"Medical Conditions"),_(),g(14,"div",4),Pe(15,fde,4,3,"div",5),_()()(),g(16,"div",6)(17,"h3"),M(18,"Family History"),_(),g(19,"div",7)(20,"input",8),Ze("ngModelChange",function(s){return Ke(r.newFamilyHistory.relationship,s)||(r.newFamilyHistory.relationship=s),s}),_(),g(21,"button",9),le("click",function(){return r.openFamilyConditionsModal()}),M(22," Select Conditions "),_(),g(23,"button",10),le("click",function(){return r.addFamilyHistory()}),M(24," Add Family History "),_()(),g(25,"table",11)(26,"thead")(27,"tr")(28,"th"),M(29,"Family History"),_(),g(30,"th"),M(31,"Actions"),_()()(),g(32,"tbody"),Pe(33,hde,8,1,"tr",12),_()()(),g(34,"div",13)(35,"h3"),M(36,"Free Text Field"),_(),g(37,"textarea",14),Ze("ngModelChange",function(s){return Ke(r.medicalHistory.freeText,s)||(r.medicalHistory.freeText=s),s}),_()(),g(38,"button",15),le("click",function(){return r.submitMedicalHistory()}),M(39,"Save"),_()(),Pe(40,mde,10,1,"div",16)(41,gde,12,2,"div",16),_()),i&2&&(A(10),X("ngForOf",r.allergies),A(5),X("ngForOf",r.medicalConditions),A(5),Xe("ngModel",r.newFamilyHistory.relationship),A(3),X("disabled",!r.newFamilyHistory.relationship||r.newFamilyHistory.conditions.length===0),A(10),X("ngForOf",r.medicalHistory.familyHistory),A(4),Xe("ngModel",r.medicalHistory.freeText),A(3),X("ngIf",r.showFamilyConditionsModal),A(),X("ngIf",r.showUpdateFamilyHistoryModal))},dependencies:[Dt,Nt,Ft,hn,Pn,vt,Mn,Zt,Vt],styles:[".content[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100vh;overflow-y:auto;box-sizing:border-box;align-items:center}.medical-history-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;height:fit-content;margin:0 auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.medical-history-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:0}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 1px 3px #0000001a}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;position:relative}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:calc(100% - 16px);table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;max-height:150px;overflow-y:scroll;width:100%}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left;font-size:14px;box-sizing:border-box}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar{width:16px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:8px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b3b3b3}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:14px;cursor:pointer;transition:background-color .3s;margin-right:5px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c82333}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px;resize:none;overflow-y:auto}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]{display:block;margin:10px auto;background-color:#17a2b8;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;inset:0;width:100%;height:100%;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-family-history-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:2}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:hover, .update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.update-family-history-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.family-conditions-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:100}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:hover, .family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.family-conditions-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var _de=n=>["/update-medical-history",n];function vde(n,t){if(n&1){let e=dt();g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td")(6,"a",24),M(7,"Edit"),_(),g(8,"a",25),le("click",function(){let r=Oe(e).$implicit,o=ce();return Ae(o.viewPatientDetails(r.medicalRecordNumber))}),M(9,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Ye(e.medicalRecordNumber),A(2),Ye(e.fullName),A(2),X("routerLink",ni(3,_de,e.medicalRecordNumber))}}function yde(n,t){if(n&1){let e=dt();g(0,"div",26)(1,"div",27)(2,"h3"),M(3,"Patient Details"),_(),g(4,"button",28),le("click",function(){Oe(e);let r=ce();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],Ae(r.selectedMedicalHistory=void 0)}),_(),g(5,"table",29)(6,"tbody")(7,"tr")(8,"th"),M(9,"Medical Record Number"),_(),g(10,"td"),M(11),_()(),g(12,"tr")(13,"th"),M(14,"First Name"),_(),g(15,"td"),M(16),_()(),g(17,"tr")(18,"th"),M(19,"Last Name"),_(),g(20,"td"),M(21),_()(),g(22,"tr")(23,"th"),M(24,"Full Name"),_(),g(25,"td"),M(26),_()(),g(27,"tr")(28,"th"),M(29,"Date of Birth"),_(),g(30,"td"),M(31),_()(),g(32,"tr")(33,"th"),M(34,"Gender"),_(),g(35,"td"),M(36),_()(),g(37,"tr")(38,"th"),M(39,"Email"),_(),g(40,"td"),M(41),_()(),g(42,"tr")(43,"th"),M(44,"Phone Number"),_(),g(45,"td"),M(46),_()(),g(47,"tr")(48,"th"),M(49,"Emergency Contact"),_(),g(50,"td"),M(51),_()(),g(52,"tr")(53,"th"),M(54,"Appointment History"),_(),g(55,"td"),M(56),_()(),g(57,"tr")(58,"th"),M(59,"Is Active"),_(),g(60,"td"),M(61),_()(),g(62,"tr")(63,"th"),M(64,"Medical History"),_(),g(65,"td")(66,"button",30),le("click",function(){Oe(e);let r=ce();return Ae(r.openMedicalHistoryModal())}),M(67," View Medical History "),_()()()()()()()}if(n&2){let e=ce();A(11),Ye(e.selectedPatient.medicalRecordNumber),A(5),Ye(e.selectedPatient.firstName),A(5),Ye(e.selectedPatient.lastName),A(5),Ye(e.selectedPatient.fullName),A(5),Ye(e.selectedPatient.dateOfBirth),A(5),Ye(e.selectedPatient.gender===1?"Male":"Female"),A(5),Ye(e.selectedPatient.email),A(5),Ye(e.selectedPatient.phoneNumber),A(5),Ye(e.selectedPatient.emergencyContact),A(5),xt(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),A(5),Ye(e.selectedPatient.isActive?"Yes":"No")}}function xde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e," ")}}function bde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.allergyName," ")}}function Cde(n,t){n&1&&(g(0,"li"),M(1,"No allergies"),_())}function Mde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.medicalConditionName," ")}}function wde(n,t){n&1&&(g(0,"li"),M(1," No medical conditions "),_())}function Ede(n,t){if(n&1){let e=dt();g(0,"div",31)(1,"div",32)(2,"span",33),le("click",function(){Oe(e);let r=ce();return Ae(r.closeMedicalHistoryModal())}),M(3,"\xD7"),_(),g(4,"h3"),M(5,"Medical History"),_(),g(6,"table",29)(7,"tbody")(8,"tr")(9,"th"),M(10,"Free Text"),_(),g(11,"td"),M(12),_()(),g(13,"tr")(14,"th"),M(15,"Family History"),_(),g(16,"td")(17,"ul"),Pe(18,xde,2,1,"li",21),_()()(),g(19,"tr")(20,"th"),M(21,"Allergies"),_(),g(22,"td")(23,"ul",34),Pe(24,bde,2,1,"li",21)(25,Cde,2,0,"li",35),_()()(),g(26,"tr")(27,"th"),M(28,"Medical Conditions"),_(),g(29,"td")(30,"ul",36),Pe(31,Mde,2,1,"li",21)(32,wde,2,0,"li",35),_()()()()()()()}if(n&2){let e=ce();A(12),Ye(e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.freeText),A(6),X("ngForOf",e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.familyHistory),A(6),X("ngForOf",e.selectedAllergies),A(),X("ngIf",e.selectedAllergies.length===0),A(6),X("ngForOf",e.selectedMedicalConditions),A(),X("ngIf",e.selectedMedicalConditions.length===0)}}var Rz=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}openMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!0}closeMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)($(Ss),$(ui),$(Xr),$(Zr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-medical-history-manager"]],standalone:!0,features:[Je],decls:40,vars:11,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],["class","modal",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[1,"allergies-list"],[4,"ngIf"],[1,"conditions-list"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),M(5,"Patients Manager"),_(),g(6,"div",4)(7,"form",5),le("submit",function(s){return r.applyFilters(s)}),g(8,"input",6),Ze("ngModelChange",function(s){return Ke(r.filters.firstName,s)||(r.filters.firstName=s),s}),_(),g(9,"input",7),Ze("ngModelChange",function(s){return Ke(r.filters.lastName,s)||(r.filters.lastName=s),s}),_(),g(10,"input",8),Ze("ngModelChange",function(s){return Ke(r.filters.fullName,s)||(r.filters.fullName=s),s}),_(),g(11,"input",9),Ze("ngModelChange",function(s){return Ke(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),_(),g(12,"input",10),Ze("ngModelChange",function(s){return Ke(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),_(),g(13,"select",11),Ze("ngModelChange",function(s){return Ke(r.filters.gender,s)||(r.filters.gender=s),s}),g(14,"option",12),M(15,"Select Gender"),_(),g(16,"option",13),M(17,"Male"),_(),g(18,"option",14),M(19,"Female"),_()(),g(20,"input",15),Ze("ngModelChange",function(s){return Ke(r.filters.email,s)||(r.filters.email=s),s}),_(),g(21,"input",16),Ze("ngModelChange",function(s){return Ke(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),_(),g(22,"button",17),M(23,"Apply Filters"),_(),g(24,"button",18),le("click",function(){return r.clearFilters()}),M(25," Clear Filters "),_()(),g(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th"),M(31,"Medical Record Number"),_(),g(32,"th"),M(33,"Name"),_(),g(34,"th"),M(35,"Actions"),_()()(),g(36,"tbody"),Pe(37,vde,10,5,"tr",21),_()()()()(),Pe(38,yde,68,11,"div",22),_(),Pe(39,Ede,33,6,"div",23),_()),i&2&&(A(8),Xe("ngModel",r.filters.firstName),A(),Xe("ngModel",r.filters.lastName),A(),Xe("ngModel",r.filters.fullName),A(),Xe("ngModel",r.filters.dateOfBirth),A(),Xe("ngModel",r.filters.medicalRecordNumber),A(),Xe("ngModel",r.filters.gender),A(7),Xe("ngModel",r.filters.email),A(),Xe("ngModel",r.filters.phoneNumber),A(16),X("ngForOf",r.patients),A(),X("ngIf",r.selectedPatient),A(),X("ngIf",r.isMedicalHistoryModalOpen))},dependencies:[Vt,vt,Mn,Zt,Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,xl,Pn,$n,kt,jt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{background-color:#3588d1;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0;margin-top:5px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover{background-color:#70b1e2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #888;width:600px;height:fit-content;max-height:600px;border-radius:10px;box-shadow:0 0 20px #0003;position:relative}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;overflow-y:auto}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var Nz=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-policy"]],standalone:!0,features:[Je],decls:156,vars:0,consts:[[1,"policy-container"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h1"),M(3,"Privacy Policy"),_(),g(4,"p"),M(5,"Last updated: 11 de Dezembro de 2024"),_(),g(6,"section")(7,"h2"),M(8,"Introdu\xE7\xE3o"),_(),g(9,"p"),M(10," No mundo da sa\xFAde, a confidencialidade \xE9 fundamental. A prote\xE7\xE3o de dados de sa\xFAde \xE9 um direito fundamental de cada paciente, consagrado no Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD) (Artigo 4\xBA, n\xBA Artigo 32\xBA). A gest\xE3o manual ou sistemas desatualizados podem levar \xE0 perda de dados, acesso n\xE3o autorizado e incumprimento do RGPD. As consequ\xEAncias podem ser graves: multas elevadas, processos judiciais e danos \xE0 reputa\xE7\xE3o. A nossa equipa \xE9 composta pelos especialistas em seguran\xE7a inform\xE1tica e gest\xE3o de dados, Vasco Sousa, Jo\xE3o Pereira e Tiago Sousa e pela advogada especializada em prote\xE7\xE3o de dados, Maria Medina e hoje estamos aqui com o objetivo de apresentar o Hospital Management App, um sistema inovador que garante a gest\xE3o eficiente e segura de recursos e a marca\xE7\xE3o de consultas cir\xFArgicas, com total respeito pela privacidade dos seus pacientes (Artigo 13 e 14\xBA). O Hospital Management App foi concebido com base nos princ\xEDpios de prote\xE7\xE3o de dados desde a conce\xE7\xE3o e por defeito (Artigo 25\xBA) Este minimiza a recolha e o tratamento de dados, utilizando a pseudonimiza\xE7\xE3o para proteger a identidade dos pacientes, encripta todos os dados, garantindo a sua confidencialidade e integridade, controla o acesso aos dados, permitindo apenas a utilizadores autorizados aceder \xE0 informa\xE7\xE3o necess\xE1ria para o desempenho das suas fun\xE7\xF5es e mant\xE9m registos detalhados de todas as opera\xE7\xF5es de tratamento, permitindo auditorias e a demonstra\xE7\xE3o de conformidade com o RGPD (Artigo 24\xBA e 28\xBA) Com o Hospital Management App, pode ter a certeza de que est\xE1 a otimizar os seus processos, reduzindo custos e protegendo os dados sens\xEDveis dos seus pacientes, em total conformidade com o RGPD "),_()(),g(11,"section")(12,"h2"),M(13,"Respons\xE1vel pelo Tratamento de Dados"),_(),g(14,"p")(15,"strong"),M(16,"Nome da Empresa/Organiza\xE7\xE3o:"),_(),M(17," Hospital Management App"),me(18,"br"),g(19,"strong"),M(20,"Contato:"),_(),M(21," 1211503@isep.ipp.pt"),me(22,"br"),g(23,"strong"),M(24,"Encarregado de Prote\xE7\xE3o de Dados:"),_(),M(25," Jo\xE3o Pereira "),_()(),g(26,"section")(27,"h2"),M(28,"Dados Pessoais Coletados"),_(),g(29,"ul")(30,"li"),M(31,"Identifica\xE7\xE3o (nome, email, NIF)"),_(),g(32,"li"),M(33,"Dados de contato (n\xFAmero de telem\xF3vel pessoal e de emerg\xEAncia, e-mail)"),_(),g(34,"li"),M(35,"Dados m\xE9dicos (hist\xF3rico de sa\xFAde, alergias)"),_()()(),g(36,"section")(37,"h2"),M(38,"Processamento dos Dados pessoais"),_(),g(39,"p"),M(40,"Os dados passam por diversos tipos de processamento, incluindo:"),_(),g(41,"ul")(42,"li"),M(43,"Recolha: Os dados s\xE3o obtidos atrav\xE9s de diferentes meios, como formul\xE1rios de registo, prontu\xE1rios m\xE9dicos ou sistemas de agendamento."),_(),g(44,"li"),M(45,"Registo: Os dados recolhidos s\xE3o inseridos no Hospital Management App, nos campos apropriados de cada funcionalidade."),_(),g(46,"li"),M(47,"Organiza\xE7\xE3o: Os dados s\xE3o estruturados e categorizados dentro do sistema, de forma l\xF3gica e eficiente, facilitando a sua consulta e utiliza\xE7\xE3o. "),_(),g(48,"li"),M(49,"Consulta: Os dados s\xE3o acedidos e visualizados pelos utilizadores autorizados do Hospital Management App, de acordo com as suas fun\xE7\xF5es e permiss\xF5es. "),_(),g(50,"li"),M(51,"Utiliza\xE7\xE3o: Os dados s\xE3o utilizados para as finalidades espec\xEDficas para as quais foram recolhidos, como a gest\xE3o de informa\xE7\xF5es, o planeamento e agendamento cir\xFArgico, a visualiza\xE7\xE3o do hospital, a garantia da continuidade das opera\xE7\xF5es e a conformidade com o RGPD."),_(),g(52,"li"),M(53,"Quando aplic\xE1vel, apagamento: Os dados s\xE3o eliminados do sistema quando deixam de ser necess\xE1rios para as finalidades para as quais foram recolhidos, ou quando o titular dos dados exerce o seu direito de apagamento (direito a ser esquecido)"),_(),g(54,"p"),M(55,"Todas estas opera\xE7\xF5es respeitam os princ\xEDpios do RGPD, como a limita\xE7\xE3o das finalidades e a integridade e confidencialidade dos dados (Artigo 5.\xBA)"),_()()(),g(56,"section")(57,"h2"),M(58,"Finalidades do Tratamento"),_(),g(59,"p"),M(60,"Utilizamos os seus dados pessoais para:"),_(),g(61,"ul")(62,"li"),M(63,"Gest\xE3o de Informa\xE7\xF5es Essenciais"),_(),g(64,"li"),M(65,"Planeamento e Agendamento Cir\xFArgico"),_()()(),g(66,"section")(67,"h2"),M(68,"Base Legal para o Tratamento"),_(),g(69,"p"),M(70,"O tratamento de dados pessoais pode ser baseado nas seguintes bases legais:"),_(),g(71,"ul")(72,"li"),M(73,"Execu\xE7\xE3o de um contrato"),_(),g(74,"li"),M(75,"Cumprimento de uma obriga\xE7\xE3o legal"),_(),g(76,"li"),M(77,"Consentimento expl\xEDcito (para finalidades espec\xEDficas, como marketing)"),_(),g(78,"li"),M(79,"Interesses leg\xEDtimos da aplica\xE7\xE3o"),_()()(),g(80,"section")(81,"h2"),M(82,"Compartilhamento de Dados"),_(),g(83,"p"),M(84,"Os seus dados podem ser compartilhados com:"),_(),g(85,"ul")(86,"li"),M(87,"Parceiros e prestadores de servi\xE7os que auxiliam na execu\xE7\xE3o das nossas atividades"),_(),g(88,"li"),M(89,"Autoridades legais, quando exigido por lei"),_(),g(90,"li"),M(91,"Familiares quando se encontrar com limita\xE7\xF5es f\xEDsicas e ps\xEDcol\xF3gicas"),_()()(),g(92,"section")(93,"h2"),M(94,"Reten\xE7\xE3o de Dados"),_(),g(95,"p"),M(96," Os seus dados pessoais ser\xE3o armazenados apenas pelo tempo necess\xE1rio para cumprir as finalidades descritas nesta Pol\xEDtica ou conforme exigido por lei. Ap\xF3s o per\xEDodo de reten\xE7\xE3o, os dados ser\xE3o apagados ou anonimizados. "),_()(),g(97,"section")(98,"h2"),M(99,"Direitos do Titular dos Dados"),_(),g(100,"p"),M(101,"Voc\xEA possui os seguintes direitos em rela\xE7\xE3o aos seus dados pessoais:"),_(),g(102,"ul")(103,"li"),M(104,"Acesso aos dados tratados"),_(),g(105,"li"),M(106,"Retifica\xE7\xE3o de dados incorretos ou desatualizados"),_(),g(107,"li"),M(108,"Exclus\xE3o dos dados (direito ao esquecimento)"),_(),g(109,"li"),M(110,"Restri\xE7\xE3o do tratamento"),_(),g(111,"li"),M(112,"Portabilidade dos dados"),_(),g(113,"li"),M(114,"Oposi\xE7\xE3o ao tratamento em determinadas circunst\xE2ncias"),_(),g(115,"li"),M(116,"Retirada do consentimento, quando aplic\xE1vel"),_()(),g(117,"p"),M(118,"Para exercer os seus direitos, entre em contato connosco pelo e-mail "),g(119,"strong"),M(120,"1211503@isep.ipp.pt"),_(),M(121,". "),_()(),g(122,"section")(123,"h2"),M(124,"Transfer\xEAncia Internacional de Dados"),_(),g(125,"p"),M(126," Se houver necessidade de transfer\xEAncia de dados para fora do Espa\xE7o Econ\xF4mico Europeu (EEE), garantiremos que os seus dados estar\xE3o protegidos com medidas adequadas, como cl\xE1usulas contratuais padr\xE3o ou outras bases legais reconhecidas pelo RGPD. "),_()(),g(127,"section")(128,"h2"),M(129,"Seguran\xE7a dos Dados"),_(),g(130,"p"),M(131," Implementamos medidas t\xE9cnicas e organizacionais para proteger os seus dados pessoais contra acessos n\xE3o autorizados, perda, altera\xE7\xE3o ou destrui\xE7\xE3o. "),_()(),g(132,"section")(133,"h2"),M(134,"Altera\xE7\xF5es \xE0 Pol\xEDtica de Privacidade"),_(),g(135,"p"),M(136," Podemos atualizar esta Pol\xEDtica de Privacidade periodicamente. Notificaremos sobre mudan\xE7as significativas, caso necess\xE1rio. "),_()(),g(137,"section")(138,"h2"),M(139,"Reclama\xE7\xF5es"),_(),g(140,"p"),M(141," Se acreditar que os seus direitos foram violados, pode entrar em contato connosco para esclarecimentos. Al\xE9m disso, voc\xEA tem o direito de apresentar uma reclama\xE7\xE3o junto \xE0 autoridade supervisora do seu pa\xEDs. "),_()(),g(142,"section")(143,"h2"),M(144,"Contato"),_(),g(145,"p"),M(146," Para quaisquer d\xFAvidas, entre em contato conosco: "),_(),g(147,"ul")(148,"li")(149,"strong"),M(150,"E-mail:"),_(),M(151," 1211503@isep.ipp.pt"),_(),g(152,"li")(153,"strong"),M(154,"Telefone:"),_(),M(155," +351912345678"),_()()()())},dependencies:[Vt],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;font-family:Poppins,sans-serif,Arial,sans-serif;background-color:#f9f9f9;overflow:hidden}.policy-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;height:100vh;padding:20px;overflow-y:auto;background-color:#fff;color:#333;border-radius:8px;box-shadow:0 4px 10px #0000001a;max-width:900px;margin:auto;border:1px solid rgba(0,0,0,.1)}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;color:#007bff;text-align:center;font-weight:700}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:25px;padding:10px 15px;background-color:#f9f9f9;border-radius:8px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:10px;color:#004085;font-weight:600}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;margin-bottom:15px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;margin-left:20px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 1024px){.policy-container[_ngcontent-%COMP%]{max-width:100%;padding:15px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.policy-container[_ngcontent-%COMP%]{padding:10px;margin:10px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.policy-container[_ngcontent-%COMP%]{padding:8px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem}}"]})}}return n})();var kz=(()=>{class n{constructor(e,i,r){this.operationRequestService=e,this.router=i,this.panelService=r,this.existingOperationRequest={priority:"",deadlineDate:""}}ngOnInit(){this.panelService.setPanelId("panel-admin");let e=this.extractOperationRequestFromUrl();this.getOperationRequest(e)}getOperationRequest(e){this.operationRequestService.getOperationRequests().subscribe(i=>{console.log("Operation requests fetched:",i);let r=i.find(o=>o.id===e);r?(this.existingOperationRequest=$t(We({},r),{deadlineDate:this.formatDate(r.deadlineDate)}),console.log("Operation request fetched:",r)):console.error("Operation request not found with id:",e)},i=>{console.error("Error fetching operation request",i)})}updateOperationRequest(e){e.preventDefault();let i=new Date;if(new Date(this.existingOperationRequest.deadlineDate)<=i){alert("The deadline date must be higher than today.");return}let o=this.extractOperationRequestFromUrl();console.log("Updating operation request:",o),this.operationRequestService.editOperationRequest(o,this.existingOperationRequest).subscribe(s=>{console.log("Operation request updated successfully:",s),alert("Operation request updated successfully!"),this.router.navigate(["/manage-patients"])},s=>{console.error("Error updating operation request:",s),alert("Error updating operation request: "+JSON.stringify(s))})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/update-operation-request\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Operation Request not found in URL.")}formatDate(e){let[i,r,o]=e.split("/");return`${o}-${r}-${i}`}clearForm(){this.existingOperationRequest={priority:"",deadlineDate:""}}static{this.\u0275fac=function(i){return new(i||n)($(Os),$(Mt),$(ui))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-operation-request"]],standalone:!0,features:[Je],decls:24,vars:2,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","type","button",1,"btn","btn-back"],[1,"update-title"],[1,"content-container"],[1,"update-form",3,"submit"],["name","priority","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["type","date","placeholder","Deadline Date","name","deadlineDate","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7," Update OperationRequest "),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.updateOperationRequest(s)}),g(10,"select",7),Ze("ngModelChange",function(s){return Ke(r.existingOperationRequest.priority,s)||(r.existingOperationRequest.priority=s),s}),g(11,"option",8),M(12,"Select Priority"),_(),g(13,"option",9),M(14,"Elective Surgery"),_(),g(15,"option",10),M(16,"Urgent Surgery"),_(),g(17,"option",11),M(18,"Emergency Surgery"),_()(),g(19,"input",12),Ze("ngModelChange",function(s){return Ke(r.existingOperationRequest.deadlineDate,s)||(r.existingOperationRequest.deadlineDate=s),s}),_(),g(20,"button",13),M(21," Update OperationRequest "),_(),g(22,"button",14),le("click",function(){return r.clearForm()}),M(23," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.existingOperationRequest.priority),A(9),Xe("ngModel",r.existingOperationRequest.deadlineDate))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,hn,Pn,$n,Vt,kt,jt,vt],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:35;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Ph=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/appointments"}createAppointment(e){return console.log("Creating appointment:",e),this.http.post(`${this.apiUrl}/create`,e).pipe(_n(i=>(console.error("Error creating appointment:",i),In(()=>new Error("Failed to create appointment. Please try again later.")))))}getAppointments(){return console.log("getAppointments called"),this.http.get(`${this.apiUrl}`).pipe(_n(e=>(console.error("Error fetching appointments:",e),In(()=>new Error("Failed to fetch appointments. Please try again later.")))))}getAppointmentById(e){return console.log("getAppointmentById called"),this.http.get(`${this.apiUrl}/${e}`).pipe(_n(i=>(console.error("Error fetching appointment:",i),In(()=>new Error("Failed to fetch appointment. Please try again later.")))))}updateAppointment(e,i){return console.log("Updating appointment:",i),this.http.put(`${this.apiUrl}/update/${e}`,i).pipe(_n(r=>(console.error("Error updating appointment:",r),In(()=>new Error("Failed to update appointment. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(Gn))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sde(n,t){if(n&1&&(g(0,"option",16),M(1),_()),n&2){let e=t.$implicit;X("value",e.id),A(),Ye(e.name)}}function Pde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit;A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)}}function Tde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit;A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)}}var Fz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.operationRequests=[],this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.fetchOperationRequests()}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{console.log(this.selectedOperationRequest.operationType),this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],console.log("Filtered operation types:",this.selectedOperationType),this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)}),console.log("Fetched doctors list:",this.doctors),console.log("Fetched nurses list:",this.nurses)):console.error("No staff list found for the selected operation type")}createAppointment(e){e.preventDefault(),console.log("Creating appointment with data:",this.newAppointment),this.appointmentService.createAppointment(this.newAppointment).subscribe(i=>{console.log("Appointment created:",i),this.clearForm(),alert("Appointment created successfully"),this.router.navigate(["/appointment-manager"])},i=>{console.error("Error creating appointment",i),alert("Error creating appointment")})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/create-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Appointment not found in URL.")}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.id===this.extractOperationRequestFromUrl()),console.log("Filtered operation requests:",this.operationRequests),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.newAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.newAppointment.team.push(i);else{let o=this.newAppointment.team.indexOf(i);o>-1&&this.newAppointment.team.splice(o,1)}console.log("Updated team:",this.newAppointment.team)}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Mt),$(_s),$(Os))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-create-appointment"]],standalone:!0,features:[Je],decls:28,vars:5,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Create Appointment"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.createAppointment(s)}),g(10,"select",7),Ze("ngModelChange",function(s){return Ke(r.newAppointment.roomId,s)||(r.newAppointment.roomId=s),s}),g(11,"option",8),M(12,"Select Room"),_(),Pe(13,Sde,2,2,"option",9),_(),g(14,"input",10),Ze("ngModelChange",function(s){return Ke(r.newAppointment.dateTime,s)||(r.newAppointment.dateTime=s),s}),_(),g(15,"div",11)(16,"div",12)(17,"label"),M(18,"Doctors:"),_(),Pe(19,Pde,3,2,"div",13),_(),g(20,"div",12)(21,"label"),M(22,"Nurses:"),_(),Pe(23,Tde,3,2,"div",13),_()(),g(24,"button",14),M(25,"Create Appointment"),_(),g(26,"button",15),le("click",function(){return r.clearForm()}),M(27," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.newAppointment.roomId),A(3),X("ngForOf",r.rooms),A(),Xe("ngModel",r.newAppointment.dateTime),A(5),X("ngForOf",r.doctors),A(4),X("ngForOf",r.nurses))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,hn,Pn,$n,Vt,kt,jt,Ea,vt,Mn],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var Dde=n=>["/update-appointment",n];function Ode(n,t){if(n&1&&(g(0,"tr")(1,"td"),M(2),_(),g(3,"td"),M(4),_(),g(5,"td"),M(6),_(),g(7,"td"),M(8),_(),g(9,"td"),M(10),Lr(11,"date"),_(),g(12,"td"),M(13),_(),g(14,"td"),M(15),_(),g(16,"td"),M(17),_(),g(18,"td"),M(19),_(),g(20,"td")(21,"a",8),M(22,"Edit"),_()()()),n&2){let e=t.$implicit,i=ce();A(2),Ye(e.operationRequest==null?null:e.operationRequest.patientName),A(2),Ye(e.operationRequest==null?null:e.operationRequest.doctorLicenseNumber),A(2),Ye(e.operationRequest==null?null:e.operationRequest.priority),A(2),Ye(e.roomId),A(2),Ye(dl(11,10,e.dateTime,"dd/MM/yyyy - HH:mm")),A(3),Ye(e.status),A(2),Ye(i.getDoctorNames(e.teamDetails)),A(2),Ye(i.getNurseNames(e.teamDetails)),A(2),Ye(e.operationRequest==null?null:e.operationRequest.operationType),A(2),X("routerLink",ni(13,Dde,e.id))}}var Lz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.operationRequestService=i,this.staffService=r,this.datePipe=o,this.filters={},this.appointments=[],this.operationRequests=[],this.staffList=[],this.statusTypes=["Pending","Confirmed","Cancelled"]}ngOnInit(){this.fetchAppointments()}fetchAppointments(){this.appointmentService.getAppointments().subscribe(e=>{e.isSuccess&&e._value?(this.appointments=e._value,console.log("Appointments fetched:",this.appointments),this.fetchOperationRequests()):console.error("Failed to fetch appointments:",e.error)},e=>{console.error("Error fetching appointments",e)})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e,this.mergeAppointmentWithOperationRequests()},e=>{console.error("Error fetching operation requests",e)})}mergeAppointmentWithOperationRequests(){this.appointments=this.appointments.map(e=>{let i=this.operationRequests.find(r=>r.id===e.requestId);return $t(We({},e),{operationRequest:i})}),console.log("Merged appointments:",this.appointments),this.fetchStaffList()}fetchStaffList(){let e=this.appointments.flatMap(r=>r.team),i=[...new Set(e)];Promise.all(i.map(r=>this.staffService.getStaffById(r).toPromise())).then(r=>{this.staffList=r,this.mergeAppointmentWithStaffList()}).catch(r=>{console.error("Error fetching staff list",r)})}mergeAppointmentWithStaffList(){this.appointments=this.appointments.map(e=>{let i=e.team.map(r=>this.staffList.find(o=>o.id===r)).filter(r=>r!==void 0);return $t(We({},e),{teamDetails:i})}),console.log("Merged appointments with staff list:",this.appointments)}getTeamNames(e,i){return e?e.filter(r=>r.staffType===i).map(r=>`${r.fullName} (${r.licenseNumber})`).join(", "):""}getDoctorNames(e){return this.getTeamNames(e,"Doctor")}getNurseNames(e){return this.getTeamNames(e,"Nurse")}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Os),$(ir),$(Eu))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-appointment-manager"]],standalone:!0,features:[zi([Eu]),Je],decls:33,vars:1,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-update",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),M(5,"Appointments Manager"),_(),g(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),M(12,"Patient Name"),_(),g(13,"th"),M(14,"Doctor License Number"),_(),g(15,"th"),M(16,"Priority"),_(),g(17,"th"),M(18,"Room ID"),_(),g(19,"th"),M(20,"Date and Time"),_(),g(21,"th"),M(22,"Status"),_(),g(23,"th"),M(24,"Doctors"),_(),g(25,"th"),M(26,"Nurses"),_(),g(27,"th"),M(28,"Operation Type"),_(),g(29,"th"),M(30,"Actions"),_()()(),g(31,"tbody"),Pe(32,Ode,23,15,"tr",7),_()()()()()()()),i&2&&(A(32),X("ngForOf",r.appointments))},dependencies:[Dt,nr,vt,Mn,Eu,kt,jt,Vt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:100%;max-width:1400px;height:auto;background-color:#f9f9f9;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;max-width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;max-width:600px;margin-top:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}"]})}}return n})();function Ade(n,t){if(n&1&&(g(0,"option",16),M(1),_()),n&2){let e=t.$implicit;X("value",e.id),A(),Ye(e.name)}}function Ide(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}function Rde(n,t){if(n&1){let e=dt();g(0,"div",17),M(1),g(2,"input",18),le("change",function(r){let o=Oe(e).$implicit,s=ce();return Ae(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ce();A(),xt(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}var Uz=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.operationRequests=[],this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.loadAppointment()}loadAppointment(){let e=this.getAppointmentIdFromRoute();this.appointmentService.getAppointmentById(e).subscribe(i=>{i.isSuccess?(console.log("Appointment loaded:",i._value),this.existingAppointment=i._value,this.existingAppointment.dateTime=new Date(this.existingAppointment.dateTime).toISOString().slice(0,16),this.fetchOperationRequests()):console.error("Error loading appointment",i.error)},i=>{console.error("Error loading appointment",i)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)})):console.error("No staff list found for the selected operation type")}updateAppointment(e){e.preventDefault();let i={roomId:this.existingAppointment.roomId,dateTime:this.existingAppointment.dateTime,team:this.existingAppointment.team},r=this.getAppointmentIdFromRoute();this.appointmentService.updateAppointment(r,i).subscribe(o=>{this.clearForm(),alert("Appointment updated successfully"),this.router.navigate(["/appointment-manager"])},o=>{console.error("Error updating appointment",o),alert("Error updating appointment")})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests:",e),console.log("Existing appointment:",this.existingAppointment),console.log("Existing appointment request ID:",this.existingAppointment.requestId),this.existingAppointment.requestId?(this.operationRequests=e.filter(i=>i.id===this.existingAppointment.requestId),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.existingAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")):console.error("Existing appointment request ID is undefined")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.existingAppointment.team.push(i);else{let o=this.existingAppointment.team.indexOf(i);o>-1&&this.existingAppointment.team.splice(o,1)}}getAppointmentIdFromRoute(){let e=window.location.href,i=/\/update-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return console.log("Appointment ID:",r[1]),r[1];throw new Error("Appointment not found in URL.")}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Mt),$(_s),$(Os))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-update-appointment"]],standalone:!0,features:[Je],decls:28,vars:5,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/appointment-manager","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value","checked"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),M(5," Go Back "),_(),g(6,"h2",4),M(7,"Update Appointment"),_(),g(8,"div",5)(9,"form",6),le("submit",function(s){return r.updateAppointment(s)}),g(10,"select",7),Ze("ngModelChange",function(s){return Ke(r.existingAppointment.roomId,s)||(r.existingAppointment.roomId=s),s}),g(11,"option",8),M(12,"Select Room"),_(),Pe(13,Ade,2,2,"option",9),_(),g(14,"input",10),Ze("ngModelChange",function(s){return Ke(r.existingAppointment.dateTime,s)||(r.existingAppointment.dateTime=s),s}),_(),g(15,"div",11)(16,"div",12)(17,"label"),M(18,"Doctors:"),_(),Pe(19,Ide,3,3,"div",13),_(),g(20,"div",12)(21,"label"),M(22,"Nurses:"),_(),Pe(23,Rde,3,3,"div",13),_()(),g(24,"button",14),M(25,"Update Appointment"),_(),g(26,"button",15),le("click",function(){return r.clearForm()}),M(27," Clear Form "),_()()()()()()),i&2&&(A(10),Xe("ngModel",r.existingAppointment.roomId),A(3),X("ngForOf",r.rooms),A(),Xe("ngModel",r.existingAppointment.dateTime),A(5),X("ngForOf",r.doctors),A(4),X("ngForOf",r.nurses))},dependencies:[Dt,Yt,Ii,Ri,Nt,Wi,Ft,qt,hn,Pn,$n,Vt,kt,jt,Ea,vt,Mn],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var Hz=kC(Bz()),Wz=kC(zz());var Nde=n=>({show:n});function kde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.allergyName," ")}}function Fde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e.medicalConditionName," ")}}function Lde(n,t){if(n&1&&(g(0,"li"),M(1),_()),n&2){let e=t.$implicit;A(),xt(" ",e," ")}}var jz=(()=>{class n{constructor(e,i,r,o,s,a,l){this.panelService=e,this.settingsService=i,this.profileService=r,this.patientService=o,this.allergyService=s,this.medicalConditionService=a,this.medicalHistoryService=l,this.patientProfile={firstName:"",lastName:"",dateOfBirth:"",gender:0,email:"",phoneNumber:"",emergencyContact:"",fullName:"",id:"",isActive:!1,medicalHistory:"",medicalRecordNumber:""},this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],this.checkCode="",this.isModalOpen=!1}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile"),this.fetchAllergies(),this.fetchMedicalConditions(),this.getPatientProfile()}getPatientProfile(){let e=localStorage.getItem("token");if(e){let r=Pa(e)["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"];this.patientService.getMyProfile(r).subscribe(o=>{console.log(o),this.patientProfile=o[0],this.fetchMedicalHistory(this.patientProfile.medicalRecordNumber)})}}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}downloadProfile(){return Ka(this,null,function*(){let e={fullName:this.patientProfile.fullName,email:this.patientProfile.email,phoneNumber:this.patientProfile.phoneNumber,dateOfBirth:this.patientProfile.dateOfBirth,emergencyContact:this.patientProfile.emergencyContact,gender:this.patientProfile.gender===0?"Male":"Female",medicalRecordNumber:this.patientProfile.medicalRecordNumber,allergies:this.selectedAllergies.map(s=>s.allergyName),medicalConditions:this.selectedMedicalConditions.map(s=>s.medicalConditionName),familyHistory:this.selectedMedicalHistory?.familyHistory||[],freeText:this.selectedMedicalHistory?.freeText||"None"},i=JSON.stringify(e,null,2),r=new Hz.default;r.file("profile.json",i);let o=yield r.generateAsync({type:"blob"});(0,Wz.saveAs)(o,"patient_profile.zip")})}openModal(){this.isModalOpen=!0,this.profileService.getCode(this.patientProfile.email).subscribe(e=>{this.checkCode=e},e=>{console.error("Error fetching code",e)})}verifyCode(){this.code=parseInt(this.code1.toString()+this.code2.toString()+this.code3.toString()+this.code4.toString()+this.code5.toString()+this.code6.toString()),this.code.toString()===this.checkCode.toString()?(this.isModalOpen=!1,this.downloadProfile()):alert("Invalid code"),this.code1=void 0,this.code2=void 0,this.code3=void 0,this.code4=void 0,this.code5=void 0,this.code6=void 0}closeModal(){this.isModalOpen=!1}moveFocus(e,i){if(e.target.value.length===1){let r=document.getElementById(i);r&&r.focus()}}handleBackspace(e,i){if(e.key==="Backspace"&&e.target.value===""){let r=document.getElementById(i);r&&r.focus()}}allowOnlyNumbers(e){let i=e.which?e.which:e.keyCode;(i<48||i>57)&&e.preventDefault()}handlePaste(e){let i=e.clipboardData?.getData("text");if(i&&/^\d{6}$/.test(i)){e.preventDefault();let r=i.split("");this.code1=parseInt(r[0],10),this.code2=parseInt(r[1],10),this.code3=parseInt(r[2],10),this.code4=parseInt(r[3],10),this.code5=parseInt(r[4],10),this.code6=parseInt(r[5],10),setTimeout(()=>{let o=document.getElementById("code6");o&&o.focus()},0)}}static{this.\u0275fac=function(i){return new(i||n)($(ui),$(Ta),$(bc),$(Ss),$(Xr),$(Zr),$(La))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-patient-profile"]],standalone:!0,features:[Je],decls:73,vars:20,consts:[[1,"profile-container"],[1,"profile-screen"],[1,"profile-header"],[1,"profile-name"],[1,"download-button",3,"click"],[1,"profile-details"],[4,"ngFor","ngForOf"],["id","codeModal",1,"modal",3,"ngClass"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"code-inputs"],["id","code1","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code2","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code3","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code4","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code5","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code6","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","keydown","paste","ngModel"],[1,"btn-submit",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1",3),M(5),_(),g(6,"button",4),le("click",function(){return r.openModal()}),M(7,"Download Profile"),_()(),g(8,"div",5)(9,"h2"),M(10,"Personal Information"),_(),g(11,"p")(12,"strong"),M(13,"Email:"),_(),M(14),_(),g(15,"p")(16,"strong"),M(17,"Phone:"),_(),M(18),_(),g(19,"p")(20,"strong"),M(21,"Date of Birth:"),_(),M(22),_(),g(23,"p")(24,"strong"),M(25,"Emergency Contact:"),_(),M(26),_(),g(27,"p")(28,"strong"),M(29,"Gender:"),_(),M(30),_(),g(31,"p")(32,"strong"),M(33,"Medical Record Number:"),_(),M(34),_()(),g(35,"div",5)(36,"h2"),M(37,"Medical History"),_(),g(38,"p")(39,"strong"),M(40,"Allergies:"),_()(),g(41,"ul"),Pe(42,kde,2,1,"li",6),_(),g(43,"p")(44,"strong"),M(45,"Medical Conditions:"),_()(),g(46,"ul"),Pe(47,Fde,2,1,"li",6),_(),g(48,"p")(49,"strong"),M(50,"Family History:"),_()(),g(51,"ul"),Pe(52,Lde,2,1,"li",6),_(),g(53,"p")(54,"strong"),M(55,"Free Text:"),_(),M(56),_()()()(),g(57,"div",7)(58,"div",8)(59,"div",9)(60,"h2",10),M(61,"Enter Verification Code"),_(),g(62,"span",11),le("click",function(){return r.closeModal()}),M(63,"\xD7"),_()(),g(64,"div",12)(65,"input",13),Ze("ngModelChange",function(s){return Ke(r.code1,s)||(r.code1=s),s}),le("input",function(s){return r.moveFocus(s,"code2")})("keydown",function(s){return r.handleBackspace(s,"code1"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(66,"input",14),Ze("ngModelChange",function(s){return Ke(r.code2,s)||(r.code2=s),s}),le("input",function(s){return r.moveFocus(s,"code3")})("keydown",function(s){return r.handleBackspace(s,"code1"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(67,"input",15),Ze("ngModelChange",function(s){return Ke(r.code3,s)||(r.code3=s),s}),le("input",function(s){return r.moveFocus(s,"code4")})("keydown",function(s){return r.handleBackspace(s,"code2"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(68,"input",16),Ze("ngModelChange",function(s){return Ke(r.code4,s)||(r.code4=s),s}),le("input",function(s){return r.moveFocus(s,"code5")})("keydown",function(s){return r.handleBackspace(s,"code3"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(69,"input",17),Ze("ngModelChange",function(s){return Ke(r.code5,s)||(r.code5=s),s}),le("input",function(s){return r.moveFocus(s,"code6")})("keydown",function(s){return r.handleBackspace(s,"code4"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(70,"input",18),Ze("ngModelChange",function(s){return Ke(r.code6,s)||(r.code6=s),s}),le("keydown",function(s){return r.handleBackspace(s,"code5"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_()(),g(71,"button",19),le("click",function(){return r.verifyCode()}),M(72,"Submit"),_()()()),i&2&&(A(5),xt(" ",r.patientProfile.fullName," "),A(9),xt(" ",r.patientProfile.email,""),A(4),xt(" ",r.patientProfile.phoneNumber,""),A(4),xt(" ",r.patientProfile.dateOfBirth,""),A(4),xt(" ",r.patientProfile.emergencyContact," "),A(4),xt(" ",r.patientProfile.gender===0?"Male":"Female"," "),A(4),xt(" ",r.patientProfile.medicalRecordNumber," "),A(8),X("ngForOf",r.selectedAllergies),A(5),X("ngForOf",r.selectedMedicalConditions),A(5),X("ngForOf",r.selectedMedicalHistory==null?null:r.selectedMedicalHistory.familyHistory),A(4),xt(" ",(r.selectedMedicalHistory==null?null:r.selectedMedicalHistory.freeText)||"None "," "),A(),X("ngClass",ni(18,Nde,r.isModalOpen)),A(8),Xe("ngModel",r.code1),A(),Xe("ngModel",r.code2),A(),Xe("ngModel",r.code3),A(),Xe("ngModel",r.code4),A(),Xe("ngModel",r.code5),A(),Xe("ngModel",r.code6))},dependencies:[Vt,vt,Eo,Mn,Dt,Nt,Ft,om,xl,Pn],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.profile-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;max-height:900px;background-color:#fff;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;border-bottom:2px solid #ddd;padding-bottom:10px;width:100%}.profile-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.download-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px}.download-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.profile-details[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9}.profile-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px;color:#555}.profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:16px;color:#666}.profile-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px}.profile-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0}.separator[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin:20px 0}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:2;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;padding-top:100px}.modal.show[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fefefe;margin:5% auto;padding:20px;width:400px;box-shadow:0 0 10px #0000001a;border-radius:8px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;border-bottom:none}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.close[_ngcontent-%COMP%]{color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.code-inputs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.code-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;height:40px;font-size:24px;text-align:center;border:1px solid #ddd;border-radius:5px;margin-right:10px}.code-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:last-child{margin-right:0}.btn-submit[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px;margin-top:10px}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Gz=[{path:"register",component:aL},{path:"login",component:oL},{path:"update-staff/ConfirmUpdates",component:RV},{path:"activate",component:Ez},{path:"panel-admin",component:SV,canActivate:[rr]},{path:"panel-doctor",component:Sz,canActivate:[Va]},{path:"create-staff",component:fL,canActivate:[rr]},{path:"search-staffs",component:EV,canActivate:[rr]},{path:"update-staff/:id",component:PV,canActivate:[rr]},{path:"view-availability/:id",component:Mz,canActivate:[rr]},{path:"operation-types",component:uL,canActivate:[rr]},{path:"specializations",component:Oz,canActivate:[rr],children:[{path:"create-specialization",component:qm,canActivate:[rr]},{path:"update-specialization/:id",component:qm,canActivate:[rr]}]},{path:"update-operation-type/:name",component:pL,canActivate:[rr]},{path:"create-operation-type",component:dL,canActivate:[rr]},{path:"patient-panel",component:TV,canActivate:[hx]},{path:"patient-settings",component:hL,canActivate:[hx]},{path:"patient-policy",component:Nz},{path:"patient-profile",component:jz,canActivate:[hx]},{path:"hospital3d",component:bV},{path:"delete-user",component:MV},{path:"manage-patients",component:DV,canActivate:[rr]},{path:"create-patient",component:OV,canActivate:[rr]},{path:"activate-patient-user",component:IV},{path:"update-patient/:medicalRecordNumber",component:NV,canActivate:[rr]},{path:"operation-requests",component:Pz,canActivate:[Va]},{path:"create-operation-request",component:Tz,canActivate:[Va]},{path:"update-operation-request/:id",component:kz,canActivate:[Va]},{path:"manage-allergies-and-conditions",component:Az,canActivate:[rr],children:[{path:"create-allergies",component:yb,canActivate:[rr]},{path:"create-conditions",component:xb,canActivate:[rr]},{path:"update-allergies/:id",component:bb,canActivate:[rr]},{path:"update-conditions/:id",component:Cb,canActivate:[rr]}]},{path:"update-medical-history/:medicalRecordNumber",component:Iz,canActivate:[Va]},{path:"medical-history-manager",component:Rz,canActivate:[Va]},{path:"create-appointment/:id",component:Fz,canActivate:[Va]},{path:"appointment-manager",component:Lz,canActivate:[Va]},{path:"update-appointment/:id",component:Uz,canActivate:[Va]},{path:"",component:lL},{path:"**",component:cL}];var Ude={provide:Y1,useClass:SF,multi:!0},$z={providers:[Mk({eventCoalescing:!0}),m3(Gz),EF(),K1(hF()),Iw(pF),Ude]};var qz=(()=>{class n{constructor(e){this.router=e,this.title="Angular-View"}static{this.\u0275fac=function(i){return new(i||n)($(Mt))}}static{this.\u0275cmp=$e({type:n,selectors:[["app-root"]],standalone:!0,features:[Je],decls:2,vars:0,consts:[[1,"main-content"]],template:function(i,r){i&1&&(g(0,"main",0),me(1,"router-outlet"),_())},dependencies:[vt,LE,Dt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-content-with-sidebar[_ngcontent-%COMP%]{margin-left:85px;width:calc(100% - 85px);transition:margin-left .4s ease,width .4s ease;height:100vh;overflow:hidden}.main-content-with-sidebar[_ngcontent-%COMP%] ~ .sidebar[_ngcontent-%COMP%]{transition:all .4s ease}.main-content[_ngcontent-%COMP%]{width:100%;height:100%}']})}}return n})();MF(qz,$z).catch(n=>console.error(n));

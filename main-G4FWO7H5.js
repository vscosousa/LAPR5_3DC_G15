var iG=Object.create;var UC=Object.defineProperty,rG=Object.defineProperties,oG=Object.getOwnPropertyDescriptor,sG=Object.getOwnPropertyDescriptors,aG=Object.getOwnPropertyNames,Bg=Object.getOwnPropertySymbols,lG=Object.getPrototypeOf,VC=Object.prototype.hasOwnProperty,KA=Object.prototype.propertyIsEnumerable;var ZA=(n,t,e)=>t in n?UC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,je=(n,t)=>{for(var e in t||={})VC.call(t,e)&&ZA(n,e,t[e]);if(Bg)for(var e of Bg(t))KA.call(t,e)&&ZA(n,e,t[e]);return n},Yt=(n,t)=>rG(n,sG(t));var qh=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var Hg=(n,t)=>{var e={};for(var i in n)VC.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&Bg)for(var i of Bg(n))t.indexOf(i)<0&&KA.call(n,i)&&(e[i]=n[i]);return e};var zC=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var cG=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of aG(t))!VC.call(n,r)&&r!==e&&UC(n,r,{get:()=>t[r],enumerable:!(i=oG(t,r))||i.enumerable});return n};var BC=(n,t,e)=>(e=n!=null?iG(lG(n)):{},cG(t||!n||!n.__esModule?UC(e,"default",{value:n,enumerable:!0}):e,n));var Ka=(n,t,e)=>new Promise((i,r)=>{var o=l=>{try{a(e.next(l))}catch(u){r(u)}},s=l=>{try{a(e.throw(l))}catch(u){r(u)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(n,t)).next())});var EV=zC((uh,Um)=>{"use strict";(function(){var n,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",r="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,h=4,m=1,p=2,y=1,M=2,x=4,b=8,T=16,E=32,D=64,L=128,z=256,k=512,G=30,F="...",P=800,N=16,S=1,q=2,oe=3,ee=1/0,ge=9007199254740991,le=17976931348623157e292,de=NaN,J=4294967295,Q=J-1,Ie=J>>>1,Ue=[["ary",L],["bind",y],["bindKey",M],["curry",b],["curryRight",T],["flip",k],["partial",E],["partialRight",D],["rearg",z]],ke="[object Arguments]",Ce="[object Array]",He="[object AsyncFunction]",$e="[object Boolean]",Ve="[object Date]",mt="[object DOMException]",pt="[object Error]",Ut="[object Function]",Dn="[object GeneratorFunction]",O="[object Map]",Me="[object Number]",j="[object Null]",Y="[object Object]",W="[object Promise]",ne="[object Proxy]",ve="[object RegExp]",Ee="[object Set]",ie="[object String]",U="[object Symbol]",R="[object Undefined]",K="[object WeakMap]",_e="[object WeakSet]",Te="[object ArrayBuffer]",ye="[object DataView]",lt="[object Float32Array]",et="[object Float64Array]",nt="[object Int8Array]",un="[object Int16Array]",Fe="[object Int32Array]",ct="[object Uint8Array]",Ft="[object Uint8ClampedArray]",At="[object Uint16Array]",ht="[object Uint32Array]",On=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,Qn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ce=/&(?:amp|lt|gt|quot|#39);/g,tt=/[&<>"']/g,Pe=RegExp(ce.source),ze=RegExp(tt.source),ft=/<%-([\s\S]+?)%>/g,ut=/<%([\s\S]+?)%>/g,on=/<%=([\s\S]+?)%>/g,Oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yr=/^\w*$/,Xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,to=/[\\^$.*+?()[\]{}|]/g,Is=RegExp(to.source),id=/^\s+/,Km=/\s/,za=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oh=/\{\n\/\* \[wrapped with (.+)\] \*/,Jm=/,? & /,Qm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rd=/[()=,{}\[\]\/\s]/,eg=/\\(\\)?/g,od=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ah=/\w*$/,tg=/^[-+]0x[0-9a-f]+$/i,Db=/^0b[01]+$/i,Ob=/^\[object .+?Constructor\]$/,Ab=/^0o[0-7]+$/i,B=/^(?:0|[1-9]\d*)$/,he=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,be=/['\n\r\u2028\u2029\\]/g,fe="\\ud800-\\udfff",Qe="\\u0300-\\u036f",dt="\\ufe20-\\ufe2f",St="\\u20d0-\\u20ff",Et=Qe+dt+St,Zt="\\u2700-\\u27bf",sn="a-z\\xdf-\\xf6\\xf8-\\xff",Pt="\\xac\\xb1\\xd7\\xf7",jn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ci="\\u2000-\\u206f",pi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dr="A-Z\\xc0-\\xd6\\xd8-\\xde",Gn="\\ufe0e\\ufe0f",It=Pt+jn+ci+pi,Ao="['\u2019]",Yn="["+fe+"]",mo="["+It+"]",Rs="["+Et+"]",Fr="\\d+",Wc="["+Zt+"]",ui="["+sn+"]",Io="[^"+fe+It+Fr+Zt+sn+Dr+"]",Ba="\\ud83c[\\udffb-\\udfff]",go="(?:"+Rs+"|"+Ba+")",ks="[^"+fe+"]",Jo="(?:\\ud83c[\\udde6-\\uddff]){2}",sd="[\\ud800-\\udbff][\\udc00-\\udfff]",ad="["+Dr+"]",FD="\\u200d",LD="(?:"+ui+"|"+Io+")",s4="(?:"+ad+"|"+Io+")",UD="(?:"+Ao+"(?:d|ll|m|re|s|t|ve))?",VD="(?:"+Ao+"(?:D|LL|M|RE|S|T|VE))?",zD=go+"?",BD="["+Gn+"]?",a4="(?:"+FD+"(?:"+[ks,Jo,sd].join("|")+")"+BD+zD+")*",l4="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c4="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",HD=BD+zD+a4,u4="(?:"+[Wc,Jo,sd].join("|")+")"+HD,d4="(?:"+[ks+Rs+"?",Rs,Jo,sd,Yn].join("|")+")",f4=RegExp(Ao,"g"),h4=RegExp(Rs,"g"),Ib=RegExp(Ba+"(?="+Ba+")|"+d4+HD,"g"),p4=RegExp([ad+"?"+ui+"+"+UD+"(?="+[mo,ad,"$"].join("|")+")",s4+"+"+VD+"(?="+[mo,ad+LD,"$"].join("|")+")",ad+"?"+LD+"+"+UD,ad+"+"+VD,c4,l4,Fr,u4].join("|"),"g"),m4=RegExp("["+FD+fe+Et+Gn+"]"),g4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_4=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],v4=-1,Si={};Si[lt]=Si[et]=Si[nt]=Si[un]=Si[Fe]=Si[ct]=Si[Ft]=Si[At]=Si[ht]=!0,Si[ke]=Si[Ce]=Si[Te]=Si[$e]=Si[ye]=Si[Ve]=Si[pt]=Si[Ut]=Si[O]=Si[Me]=Si[Y]=Si[ve]=Si[Ee]=Si[ie]=Si[K]=!1;var Ci={};Ci[ke]=Ci[Ce]=Ci[Te]=Ci[ye]=Ci[$e]=Ci[Ve]=Ci[lt]=Ci[et]=Ci[nt]=Ci[un]=Ci[Fe]=Ci[O]=Ci[Me]=Ci[Y]=Ci[ve]=Ci[Ee]=Ci[ie]=Ci[U]=Ci[ct]=Ci[Ft]=Ci[At]=Ci[ht]=!0,Ci[pt]=Ci[Ut]=Ci[K]=!1;var y4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},x4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},C4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},M4=parseFloat,w4=parseInt,jD=typeof global=="object"&&global&&global.Object===Object&&global,E4=typeof self=="object"&&self&&self.Object===Object&&self,xr=jD||E4||Function("return this")(),Rb=typeof uh=="object"&&uh&&!uh.nodeType&&uh,Gc=Rb&&typeof Um=="object"&&Um&&!Um.nodeType&&Um,WD=Gc&&Gc.exports===Rb,kb=WD&&jD.process,Qo=function(){try{var ue=Gc&&Gc.require&&Gc.require("util").types;return ue||kb&&kb.binding&&kb.binding("util")}catch{}}(),GD=Qo&&Qo.isArrayBuffer,$D=Qo&&Qo.isDate,qD=Qo&&Qo.isMap,YD=Qo&&Qo.isRegExp,XD=Qo&&Qo.isSet,ZD=Qo&&Qo.isTypedArray;function Ro(ue,Ae,we){switch(we.length){case 0:return ue.call(Ae);case 1:return ue.call(Ae,we[0]);case 2:return ue.call(Ae,we[0],we[1]);case 3:return ue.call(Ae,we[0],we[1],we[2])}return ue.apply(Ae,we)}function S4(ue,Ae,we,yt){for(var an=-1,Zn=ue==null?0:ue.length;++an<Zn;){var ar=ue[an];Ae(yt,ar,we(ar),ue)}return yt}function es(ue,Ae){for(var we=-1,yt=ue==null?0:ue.length;++we<yt&&Ae(ue[we],we,ue)!==!1;);return ue}function P4(ue,Ae){for(var we=ue==null?0:ue.length;we--&&Ae(ue[we],we,ue)!==!1;);return ue}function KD(ue,Ae){for(var we=-1,yt=ue==null?0:ue.length;++we<yt;)if(!Ae(ue[we],we,ue))return!1;return!0}function Vl(ue,Ae){for(var we=-1,yt=ue==null?0:ue.length,an=0,Zn=[];++we<yt;){var ar=ue[we];Ae(ar,we,ue)&&(Zn[an++]=ar)}return Zn}function ng(ue,Ae){var we=ue==null?0:ue.length;return!!we&&ld(ue,Ae,0)>-1}function Nb(ue,Ae,we){for(var yt=-1,an=ue==null?0:ue.length;++yt<an;)if(we(Ae,ue[yt]))return!0;return!1}function Ai(ue,Ae){for(var we=-1,yt=ue==null?0:ue.length,an=Array(yt);++we<yt;)an[we]=Ae(ue[we],we,ue);return an}function zl(ue,Ae){for(var we=-1,yt=Ae.length,an=ue.length;++we<yt;)ue[an+we]=Ae[we];return ue}function Fb(ue,Ae,we,yt){var an=-1,Zn=ue==null?0:ue.length;for(yt&&Zn&&(we=ue[++an]);++an<Zn;)we=Ae(we,ue[an],an,ue);return we}function T4(ue,Ae,we,yt){var an=ue==null?0:ue.length;for(yt&&an&&(we=ue[--an]);an--;)we=Ae(we,ue[an],an,ue);return we}function Lb(ue,Ae){for(var we=-1,yt=ue==null?0:ue.length;++we<yt;)if(Ae(ue[we],we,ue))return!0;return!1}var D4=Ub("length");function O4(ue){return ue.split("")}function A4(ue){return ue.match(Qm)||[]}function JD(ue,Ae,we){var yt;return we(ue,function(an,Zn,ar){if(Ae(an,Zn,ar))return yt=Zn,!1}),yt}function ig(ue,Ae,we,yt){for(var an=ue.length,Zn=we+(yt?1:-1);yt?Zn--:++Zn<an;)if(Ae(ue[Zn],Zn,ue))return Zn;return-1}function ld(ue,Ae,we){return Ae===Ae?j4(ue,Ae,we):ig(ue,QD,we)}function I4(ue,Ae,we,yt){for(var an=we-1,Zn=ue.length;++an<Zn;)if(yt(ue[an],Ae))return an;return-1}function QD(ue){return ue!==ue}function eO(ue,Ae){var we=ue==null?0:ue.length;return we?zb(ue,Ae)/we:de}function Ub(ue){return function(Ae){return Ae==null?n:Ae[ue]}}function Vb(ue){return function(Ae){return ue==null?n:ue[Ae]}}function tO(ue,Ae,we,yt,an){return an(ue,function(Zn,ar,mi){we=yt?(yt=!1,Zn):Ae(we,Zn,ar,mi)}),we}function R4(ue,Ae){var we=ue.length;for(ue.sort(Ae);we--;)ue[we]=ue[we].value;return ue}function zb(ue,Ae){for(var we,yt=-1,an=ue.length;++yt<an;){var Zn=Ae(ue[yt]);Zn!==n&&(we=we===n?Zn:we+Zn)}return we}function Bb(ue,Ae){for(var we=-1,yt=Array(ue);++we<ue;)yt[we]=Ae(we);return yt}function k4(ue,Ae){return Ai(Ae,function(we){return[we,ue[we]]})}function nO(ue){return ue&&ue.slice(0,sO(ue)+1).replace(id,"")}function ko(ue){return function(Ae){return ue(Ae)}}function Hb(ue,Ae){return Ai(Ae,function(we){return ue[we]})}function Ih(ue,Ae){return ue.has(Ae)}function iO(ue,Ae){for(var we=-1,yt=ue.length;++we<yt&&ld(Ae,ue[we],0)>-1;);return we}function rO(ue,Ae){for(var we=ue.length;we--&&ld(Ae,ue[we],0)>-1;);return we}function N4(ue,Ae){for(var we=ue.length,yt=0;we--;)ue[we]===Ae&&++yt;return yt}var F4=Vb(y4),L4=Vb(x4);function U4(ue){return"\\"+C4[ue]}function V4(ue,Ae){return ue==null?n:ue[Ae]}function cd(ue){return m4.test(ue)}function z4(ue){return g4.test(ue)}function B4(ue){for(var Ae,we=[];!(Ae=ue.next()).done;)we.push(Ae.value);return we}function jb(ue){var Ae=-1,we=Array(ue.size);return ue.forEach(function(yt,an){we[++Ae]=[an,yt]}),we}function oO(ue,Ae){return function(we){return ue(Ae(we))}}function Bl(ue,Ae){for(var we=-1,yt=ue.length,an=0,Zn=[];++we<yt;){var ar=ue[we];(ar===Ae||ar===l)&&(ue[we]=l,Zn[an++]=we)}return Zn}function rg(ue){var Ae=-1,we=Array(ue.size);return ue.forEach(function(yt){we[++Ae]=yt}),we}function H4(ue){var Ae=-1,we=Array(ue.size);return ue.forEach(function(yt){we[++Ae]=[yt,yt]}),we}function j4(ue,Ae,we){for(var yt=we-1,an=ue.length;++yt<an;)if(ue[yt]===Ae)return yt;return-1}function W4(ue,Ae,we){for(var yt=we+1;yt--;)if(ue[yt]===Ae)return yt;return yt}function ud(ue){return cd(ue)?$4(ue):D4(ue)}function Ns(ue){return cd(ue)?q4(ue):O4(ue)}function sO(ue){for(var Ae=ue.length;Ae--&&Km.test(ue.charAt(Ae)););return Ae}var G4=Vb(b4);function $4(ue){for(var Ae=Ib.lastIndex=0;Ib.test(ue);)++Ae;return Ae}function q4(ue){return ue.match(Ib)||[]}function Y4(ue){return ue.match(p4)||[]}var X4=function ue(Ae){Ae=Ae==null?xr:Hl.defaults(xr.Object(),Ae,Hl.pick(xr,_4));var we=Ae.Array,yt=Ae.Date,an=Ae.Error,Zn=Ae.Function,ar=Ae.Math,mi=Ae.Object,Wb=Ae.RegExp,Z4=Ae.String,ts=Ae.TypeError,og=we.prototype,K4=Zn.prototype,dd=mi.prototype,sg=Ae["__core-js_shared__"],ag=K4.toString,ii=dd.hasOwnProperty,J4=0,aO=function(){var c=/[^.]+$/.exec(sg&&sg.keys&&sg.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),lg=dd.toString,Q4=ag.call(mi),e5=xr._,t5=Wb("^"+ag.call(ii).replace(to,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cg=WD?Ae.Buffer:n,jl=Ae.Symbol,ug=Ae.Uint8Array,lO=cg?cg.allocUnsafe:n,dg=oO(mi.getPrototypeOf,mi),cO=mi.create,uO=dd.propertyIsEnumerable,fg=og.splice,dO=jl?jl.isConcatSpreadable:n,Rh=jl?jl.iterator:n,$c=jl?jl.toStringTag:n,hg=function(){try{var c=Kc(mi,"defineProperty");return c({},"",{}),c}catch{}}(),n5=Ae.clearTimeout!==xr.clearTimeout&&Ae.clearTimeout,i5=yt&&yt.now!==xr.Date.now&&yt.now,r5=Ae.setTimeout!==xr.setTimeout&&Ae.setTimeout,pg=ar.ceil,mg=ar.floor,Gb=mi.getOwnPropertySymbols,o5=cg?cg.isBuffer:n,fO=Ae.isFinite,s5=og.join,a5=oO(mi.keys,mi),lr=ar.max,Lr=ar.min,l5=yt.now,c5=Ae.parseInt,hO=ar.random,u5=og.reverse,$b=Kc(Ae,"DataView"),kh=Kc(Ae,"Map"),qb=Kc(Ae,"Promise"),fd=Kc(Ae,"Set"),Nh=Kc(Ae,"WeakMap"),Fh=Kc(mi,"create"),gg=Nh&&new Nh,hd={},d5=Jc($b),f5=Jc(kh),h5=Jc(qb),p5=Jc(fd),m5=Jc(Nh),_g=jl?jl.prototype:n,Lh=_g?_g.valueOf:n,pO=_g?_g.toString:n;function V(c){if(Vi(c)&&!dn(c)&&!(c instanceof Ln)){if(c instanceof ns)return c;if(ii.call(c,"__wrapped__"))return mA(c)}return new ns(c)}var pd=function(){function c(){}return function(d){if(!Fi(d))return{};if(cO)return cO(d);c.prototype=d;var v=new c;return c.prototype=n,v}}();function vg(){}function ns(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=n}V.templateSettings={escape:ft,evaluate:ut,interpolate:on,variable:"",imports:{_:V}},V.prototype=vg.prototype,V.prototype.constructor=V,ns.prototype=pd(vg.prototype),ns.prototype.constructor=ns;function Ln(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function g5(){var c=new Ln(this.__wrapped__);return c.__actions__=_o(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=_o(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=_o(this.__views__),c}function _5(){if(this.__filtered__){var c=new Ln(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function v5(){var c=this.__wrapped__.value(),d=this.__dir__,v=dn(c),w=d<0,I=v?c.length:0,H=OH(0,I,this.__views__),Z=H.start,re=H.end,pe=re-Z,Re=w?re:Z-1,Ne=this.__iteratees__,Ge=Ne.length,st=0,Tt=Lr(pe,this.__takeCount__);if(!v||!w&&I==pe&&Tt==pe)return UO(c,this.__actions__);var Gt=[];e:for(;pe--&&st<Tt;){Re+=d;for(var Mn=-1,$t=c[Re];++Mn<Ge;){var kn=Ne[Mn],Vn=kn.iteratee,Lo=kn.type,ro=Vn($t);if(Lo==q)$t=ro;else if(!ro){if(Lo==S)continue e;break e}}Gt[st++]=$t}return Gt}Ln.prototype=pd(vg.prototype),Ln.prototype.constructor=Ln;function qc(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function y5(){this.__data__=Fh?Fh(null):{},this.size=0}function x5(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}function b5(c){var d=this.__data__;if(Fh){var v=d[c];return v===s?n:v}return ii.call(d,c)?d[c]:n}function C5(c){var d=this.__data__;return Fh?d[c]!==n:ii.call(d,c)}function M5(c,d){var v=this.__data__;return this.size+=this.has(c)?0:1,v[c]=Fh&&d===n?s:d,this}qc.prototype.clear=y5,qc.prototype.delete=x5,qc.prototype.get=b5,qc.prototype.has=C5,qc.prototype.set=M5;function Ha(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function w5(){this.__data__=[],this.size=0}function E5(c){var d=this.__data__,v=yg(d,c);if(v<0)return!1;var w=d.length-1;return v==w?d.pop():fg.call(d,v,1),--this.size,!0}function S5(c){var d=this.__data__,v=yg(d,c);return v<0?n:d[v][1]}function P5(c){return yg(this.__data__,c)>-1}function T5(c,d){var v=this.__data__,w=yg(v,c);return w<0?(++this.size,v.push([c,d])):v[w][1]=d,this}Ha.prototype.clear=w5,Ha.prototype.delete=E5,Ha.prototype.get=S5,Ha.prototype.has=P5,Ha.prototype.set=T5;function ja(c){var d=-1,v=c==null?0:c.length;for(this.clear();++d<v;){var w=c[d];this.set(w[0],w[1])}}function D5(){this.size=0,this.__data__={hash:new qc,map:new(kh||Ha),string:new qc}}function O5(c){var d=Ag(this,c).delete(c);return this.size-=d?1:0,d}function A5(c){return Ag(this,c).get(c)}function I5(c){return Ag(this,c).has(c)}function R5(c,d){var v=Ag(this,c),w=v.size;return v.set(c,d),this.size+=v.size==w?0:1,this}ja.prototype.clear=D5,ja.prototype.delete=O5,ja.prototype.get=A5,ja.prototype.has=I5,ja.prototype.set=R5;function Yc(c){var d=-1,v=c==null?0:c.length;for(this.__data__=new ja;++d<v;)this.add(c[d])}function k5(c){return this.__data__.set(c,s),this}function N5(c){return this.__data__.has(c)}Yc.prototype.add=Yc.prototype.push=k5,Yc.prototype.has=N5;function Fs(c){var d=this.__data__=new Ha(c);this.size=d.size}function F5(){this.__data__=new Ha,this.size=0}function L5(c){var d=this.__data__,v=d.delete(c);return this.size=d.size,v}function U5(c){return this.__data__.get(c)}function V5(c){return this.__data__.has(c)}function z5(c,d){var v=this.__data__;if(v instanceof Ha){var w=v.__data__;if(!kh||w.length<e-1)return w.push([c,d]),this.size=++v.size,this;v=this.__data__=new ja(w)}return v.set(c,d),this.size=v.size,this}Fs.prototype.clear=F5,Fs.prototype.delete=L5,Fs.prototype.get=U5,Fs.prototype.has=V5,Fs.prototype.set=z5;function mO(c,d){var v=dn(c),w=!v&&Qc(c),I=!v&&!w&&Yl(c),H=!v&&!w&&!I&&vd(c),Z=v||w||I||H,re=Z?Bb(c.length,Z4):[],pe=re.length;for(var Re in c)(d||ii.call(c,Re))&&!(Z&&(Re=="length"||I&&(Re=="offset"||Re=="parent")||H&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||qa(Re,pe)))&&re.push(Re);return re}function gO(c){var d=c.length;return d?c[rC(0,d-1)]:n}function B5(c,d){return Ig(_o(c),Xc(d,0,c.length))}function H5(c){return Ig(_o(c))}function Yb(c,d,v){(v!==n&&!Ls(c[d],v)||v===n&&!(d in c))&&Wa(c,d,v)}function Uh(c,d,v){var w=c[d];(!(ii.call(c,d)&&Ls(w,v))||v===n&&!(d in c))&&Wa(c,d,v)}function yg(c,d){for(var v=c.length;v--;)if(Ls(c[v][0],d))return v;return-1}function j5(c,d,v,w){return Wl(c,function(I,H,Z){d(w,I,v(I),Z)}),w}function _O(c,d){return c&&ua(d,br(d),c)}function W5(c,d){return c&&ua(d,yo(d),c)}function Wa(c,d,v){d=="__proto__"&&hg?hg(c,d,{configurable:!0,enumerable:!0,value:v,writable:!0}):c[d]=v}function Xb(c,d){for(var v=-1,w=d.length,I=we(w),H=c==null;++v<w;)I[v]=H?n:DC(c,d[v]);return I}function Xc(c,d,v){return c===c&&(v!==n&&(c=c<=v?c:v),d!==n&&(c=c>=d?c:d)),c}function is(c,d,v,w,I,H){var Z,re=d&u,pe=d&f,Re=d&h;if(v&&(Z=I?v(c,w,I,H):v(c)),Z!==n)return Z;if(!Fi(c))return c;var Ne=dn(c);if(Ne){if(Z=IH(c),!re)return _o(c,Z)}else{var Ge=Ur(c),st=Ge==Ut||Ge==Dn;if(Yl(c))return BO(c,re);if(Ge==Y||Ge==ke||st&&!I){if(Z=pe||st?{}:sA(c),!re)return pe?bH(c,W5(Z,c)):xH(c,_O(Z,c))}else{if(!Ci[Ge])return I?c:{};Z=RH(c,Ge,re)}}H||(H=new Fs);var Tt=H.get(c);if(Tt)return Tt;H.set(c,Z),NA(c)?c.forEach(function($t){Z.add(is($t,d,v,$t,c,H))}):RA(c)&&c.forEach(function($t,kn){Z.set(kn,is($t,d,v,kn,c,H))});var Gt=Re?pe?mC:pC:pe?yo:br,Mn=Ne?n:Gt(c);return es(Mn||c,function($t,kn){Mn&&(kn=$t,$t=c[kn]),Uh(Z,kn,is($t,d,v,kn,c,H))}),Z}function G5(c){var d=br(c);return function(v){return vO(v,c,d)}}function vO(c,d,v){var w=v.length;if(c==null)return!w;for(c=mi(c);w--;){var I=v[w],H=d[I],Z=c[I];if(Z===n&&!(I in c)||!H(Z))return!1}return!0}function yO(c,d,v){if(typeof c!="function")throw new ts(r);return Gh(function(){c.apply(n,v)},d)}function Vh(c,d,v,w){var I=-1,H=ng,Z=!0,re=c.length,pe=[],Re=d.length;if(!re)return pe;v&&(d=Ai(d,ko(v))),w?(H=Nb,Z=!1):d.length>=e&&(H=Ih,Z=!1,d=new Yc(d));e:for(;++I<re;){var Ne=c[I],Ge=v==null?Ne:v(Ne);if(Ne=w||Ne!==0?Ne:0,Z&&Ge===Ge){for(var st=Re;st--;)if(d[st]===Ge)continue e;pe.push(Ne)}else H(d,Ge,w)||pe.push(Ne)}return pe}var Wl=$O(ca),xO=$O(Kb,!0);function $5(c,d){var v=!0;return Wl(c,function(w,I,H){return v=!!d(w,I,H),v}),v}function xg(c,d,v){for(var w=-1,I=c.length;++w<I;){var H=c[w],Z=d(H);if(Z!=null&&(re===n?Z===Z&&!Fo(Z):v(Z,re)))var re=Z,pe=H}return pe}function q5(c,d,v,w){var I=c.length;for(v=yn(v),v<0&&(v=-v>I?0:I+v),w=w===n||w>I?I:yn(w),w<0&&(w+=I),w=v>w?0:LA(w);v<w;)c[v++]=d;return c}function bO(c,d){var v=[];return Wl(c,function(w,I,H){d(w,I,H)&&v.push(w)}),v}function Or(c,d,v,w,I){var H=-1,Z=c.length;for(v||(v=NH),I||(I=[]);++H<Z;){var re=c[H];d>0&&v(re)?d>1?Or(re,d-1,v,w,I):zl(I,re):w||(I[I.length]=re)}return I}var Zb=qO(),CO=qO(!0);function ca(c,d){return c&&Zb(c,d,br)}function Kb(c,d){return c&&CO(c,d,br)}function bg(c,d){return Vl(d,function(v){return Ya(c[v])})}function Zc(c,d){d=$l(d,c);for(var v=0,w=d.length;c!=null&&v<w;)c=c[da(d[v++])];return v&&v==w?c:n}function MO(c,d,v){var w=d(c);return dn(c)?w:zl(w,v(c))}function no(c){return c==null?c===n?R:j:$c&&$c in mi(c)?DH(c):HH(c)}function Jb(c,d){return c>d}function Y5(c,d){return c!=null&&ii.call(c,d)}function X5(c,d){return c!=null&&d in mi(c)}function Z5(c,d,v){return c>=Lr(d,v)&&c<lr(d,v)}function Qb(c,d,v){for(var w=v?Nb:ng,I=c[0].length,H=c.length,Z=H,re=we(H),pe=1/0,Re=[];Z--;){var Ne=c[Z];Z&&d&&(Ne=Ai(Ne,ko(d))),pe=Lr(Ne.length,pe),re[Z]=!v&&(d||I>=120&&Ne.length>=120)?new Yc(Z&&Ne):n}Ne=c[0];var Ge=-1,st=re[0];e:for(;++Ge<I&&Re.length<pe;){var Tt=Ne[Ge],Gt=d?d(Tt):Tt;if(Tt=v||Tt!==0?Tt:0,!(st?Ih(st,Gt):w(Re,Gt,v))){for(Z=H;--Z;){var Mn=re[Z];if(!(Mn?Ih(Mn,Gt):w(c[Z],Gt,v)))continue e}st&&st.push(Gt),Re.push(Tt)}}return Re}function K5(c,d,v,w){return ca(c,function(I,H,Z){d(w,v(I),H,Z)}),w}function zh(c,d,v){d=$l(d,c),c=uA(c,d);var w=c==null?c:c[da(os(d))];return w==null?n:Ro(w,c,v)}function wO(c){return Vi(c)&&no(c)==ke}function J5(c){return Vi(c)&&no(c)==Te}function Q5(c){return Vi(c)&&no(c)==Ve}function Bh(c,d,v,w,I){return c===d?!0:c==null||d==null||!Vi(c)&&!Vi(d)?c!==c&&d!==d:eH(c,d,v,w,Bh,I)}function eH(c,d,v,w,I,H){var Z=dn(c),re=dn(d),pe=Z?Ce:Ur(c),Re=re?Ce:Ur(d);pe=pe==ke?Y:pe,Re=Re==ke?Y:Re;var Ne=pe==Y,Ge=Re==Y,st=pe==Re;if(st&&Yl(c)){if(!Yl(d))return!1;Z=!0,Ne=!1}if(st&&!Ne)return H||(H=new Fs),Z||vd(c)?iA(c,d,v,w,I,H):PH(c,d,pe,v,w,I,H);if(!(v&m)){var Tt=Ne&&ii.call(c,"__wrapped__"),Gt=Ge&&ii.call(d,"__wrapped__");if(Tt||Gt){var Mn=Tt?c.value():c,$t=Gt?d.value():d;return H||(H=new Fs),I(Mn,$t,v,w,H)}}return st?(H||(H=new Fs),TH(c,d,v,w,I,H)):!1}function tH(c){return Vi(c)&&Ur(c)==O}function eC(c,d,v,w){var I=v.length,H=I,Z=!w;if(c==null)return!H;for(c=mi(c);I--;){var re=v[I];if(Z&&re[2]?re[1]!==c[re[0]]:!(re[0]in c))return!1}for(;++I<H;){re=v[I];var pe=re[0],Re=c[pe],Ne=re[1];if(Z&&re[2]){if(Re===n&&!(pe in c))return!1}else{var Ge=new Fs;if(w)var st=w(Re,Ne,pe,c,d,Ge);if(!(st===n?Bh(Ne,Re,m|p,w,Ge):st))return!1}}return!0}function EO(c){if(!Fi(c)||LH(c))return!1;var d=Ya(c)?t5:Ob;return d.test(Jc(c))}function nH(c){return Vi(c)&&no(c)==ve}function iH(c){return Vi(c)&&Ur(c)==Ee}function rH(c){return Vi(c)&&Ug(c.length)&&!!Si[no(c)]}function SO(c){return typeof c=="function"?c:c==null?xo:typeof c=="object"?dn(c)?DO(c[0],c[1]):TO(c):YA(c)}function tC(c){if(!Wh(c))return a5(c);var d=[];for(var v in mi(c))ii.call(c,v)&&v!="constructor"&&d.push(v);return d}function oH(c){if(!Fi(c))return BH(c);var d=Wh(c),v=[];for(var w in c)w=="constructor"&&(d||!ii.call(c,w))||v.push(w);return v}function nC(c,d){return c<d}function PO(c,d){var v=-1,w=vo(c)?we(c.length):[];return Wl(c,function(I,H,Z){w[++v]=d(I,H,Z)}),w}function TO(c){var d=_C(c);return d.length==1&&d[0][2]?lA(d[0][0],d[0][1]):function(v){return v===c||eC(v,c,d)}}function DO(c,d){return yC(c)&&aA(d)?lA(da(c),d):function(v){var w=DC(v,c);return w===n&&w===d?OC(v,c):Bh(d,w,m|p)}}function Cg(c,d,v,w,I){c!==d&&Zb(d,function(H,Z){if(I||(I=new Fs),Fi(H))sH(c,d,Z,v,Cg,w,I);else{var re=w?w(bC(c,Z),H,Z+"",c,d,I):n;re===n&&(re=H),Yb(c,Z,re)}},yo)}function sH(c,d,v,w,I,H,Z){var re=bC(c,v),pe=bC(d,v),Re=Z.get(pe);if(Re){Yb(c,v,Re);return}var Ne=H?H(re,pe,v+"",c,d,Z):n,Ge=Ne===n;if(Ge){var st=dn(pe),Tt=!st&&Yl(pe),Gt=!st&&!Tt&&vd(pe);Ne=pe,st||Tt||Gt?dn(re)?Ne=re:Gi(re)?Ne=_o(re):Tt?(Ge=!1,Ne=BO(pe,!0)):Gt?(Ge=!1,Ne=HO(pe,!0)):Ne=[]:$h(pe)||Qc(pe)?(Ne=re,Qc(re)?Ne=UA(re):(!Fi(re)||Ya(re))&&(Ne=sA(pe))):Ge=!1}Ge&&(Z.set(pe,Ne),I(Ne,pe,w,H,Z),Z.delete(pe)),Yb(c,v,Ne)}function OO(c,d){var v=c.length;if(v)return d+=d<0?v:0,qa(d,v)?c[d]:n}function AO(c,d,v){d.length?d=Ai(d,function(H){return dn(H)?function(Z){return Zc(Z,H.length===1?H[0]:H)}:H}):d=[xo];var w=-1;d=Ai(d,ko(Wt()));var I=PO(c,function(H,Z,re){var pe=Ai(d,function(Re){return Re(H)});return{criteria:pe,index:++w,value:H}});return R4(I,function(H,Z){return yH(H,Z,v)})}function aH(c,d){return IO(c,d,function(v,w){return OC(c,w)})}function IO(c,d,v){for(var w=-1,I=d.length,H={};++w<I;){var Z=d[w],re=Zc(c,Z);v(re,Z)&&Hh(H,$l(Z,c),re)}return H}function lH(c){return function(d){return Zc(d,c)}}function iC(c,d,v,w){var I=w?I4:ld,H=-1,Z=d.length,re=c;for(c===d&&(d=_o(d)),v&&(re=Ai(c,ko(v)));++H<Z;)for(var pe=0,Re=d[H],Ne=v?v(Re):Re;(pe=I(re,Ne,pe,w))>-1;)re!==c&&fg.call(re,pe,1),fg.call(c,pe,1);return c}function RO(c,d){for(var v=c?d.length:0,w=v-1;v--;){var I=d[v];if(v==w||I!==H){var H=I;qa(I)?fg.call(c,I,1):aC(c,I)}}return c}function rC(c,d){return c+mg(hO()*(d-c+1))}function cH(c,d,v,w){for(var I=-1,H=lr(pg((d-c)/(v||1)),0),Z=we(H);H--;)Z[w?H:++I]=c,c+=v;return Z}function oC(c,d){var v="";if(!c||d<1||d>ge)return v;do d%2&&(v+=c),d=mg(d/2),d&&(c+=c);while(d);return v}function Pn(c,d){return CC(cA(c,d,xo),c+"")}function uH(c){return gO(yd(c))}function dH(c,d){var v=yd(c);return Ig(v,Xc(d,0,v.length))}function Hh(c,d,v,w){if(!Fi(c))return c;d=$l(d,c);for(var I=-1,H=d.length,Z=H-1,re=c;re!=null&&++I<H;){var pe=da(d[I]),Re=v;if(pe==="__proto__"||pe==="constructor"||pe==="prototype")return c;if(I!=Z){var Ne=re[pe];Re=w?w(Ne,pe,re):n,Re===n&&(Re=Fi(Ne)?Ne:qa(d[I+1])?[]:{})}Uh(re,pe,Re),re=re[pe]}return c}var kO=gg?function(c,d){return gg.set(c,d),c}:xo,fH=hg?function(c,d){return hg(c,"toString",{configurable:!0,enumerable:!1,value:IC(d),writable:!0})}:xo;function hH(c){return Ig(yd(c))}function rs(c,d,v){var w=-1,I=c.length;d<0&&(d=-d>I?0:I+d),v=v>I?I:v,v<0&&(v+=I),I=d>v?0:v-d>>>0,d>>>=0;for(var H=we(I);++w<I;)H[w]=c[w+d];return H}function pH(c,d){var v;return Wl(c,function(w,I,H){return v=d(w,I,H),!v}),!!v}function Mg(c,d,v){var w=0,I=c==null?w:c.length;if(typeof d=="number"&&d===d&&I<=Ie){for(;w<I;){var H=w+I>>>1,Z=c[H];Z!==null&&!Fo(Z)&&(v?Z<=d:Z<d)?w=H+1:I=H}return I}return sC(c,d,xo,v)}function sC(c,d,v,w){var I=0,H=c==null?0:c.length;if(H===0)return 0;d=v(d);for(var Z=d!==d,re=d===null,pe=Fo(d),Re=d===n;I<H;){var Ne=mg((I+H)/2),Ge=v(c[Ne]),st=Ge!==n,Tt=Ge===null,Gt=Ge===Ge,Mn=Fo(Ge);if(Z)var $t=w||Gt;else Re?$t=Gt&&(w||st):re?$t=Gt&&st&&(w||!Tt):pe?$t=Gt&&st&&!Tt&&(w||!Mn):Tt||Mn?$t=!1:$t=w?Ge<=d:Ge<d;$t?I=Ne+1:H=Ne}return Lr(H,Q)}function NO(c,d){for(var v=-1,w=c.length,I=0,H=[];++v<w;){var Z=c[v],re=d?d(Z):Z;if(!v||!Ls(re,pe)){var pe=re;H[I++]=Z===0?0:Z}}return H}function FO(c){return typeof c=="number"?c:Fo(c)?de:+c}function No(c){if(typeof c=="string")return c;if(dn(c))return Ai(c,No)+"";if(Fo(c))return pO?pO.call(c):"";var d=c+"";return d=="0"&&1/c==-ee?"-0":d}function Gl(c,d,v){var w=-1,I=ng,H=c.length,Z=!0,re=[],pe=re;if(v)Z=!1,I=Nb;else if(H>=e){var Re=d?null:EH(c);if(Re)return rg(Re);Z=!1,I=Ih,pe=new Yc}else pe=d?[]:re;e:for(;++w<H;){var Ne=c[w],Ge=d?d(Ne):Ne;if(Ne=v||Ne!==0?Ne:0,Z&&Ge===Ge){for(var st=pe.length;st--;)if(pe[st]===Ge)continue e;d&&pe.push(Ge),re.push(Ne)}else I(pe,Ge,v)||(pe!==re&&pe.push(Ge),re.push(Ne))}return re}function aC(c,d){return d=$l(d,c),c=uA(c,d),c==null||delete c[da(os(d))]}function LO(c,d,v,w){return Hh(c,d,v(Zc(c,d)),w)}function wg(c,d,v,w){for(var I=c.length,H=w?I:-1;(w?H--:++H<I)&&d(c[H],H,c););return v?rs(c,w?0:H,w?H+1:I):rs(c,w?H+1:0,w?I:H)}function UO(c,d){var v=c;return v instanceof Ln&&(v=v.value()),Fb(d,function(w,I){return I.func.apply(I.thisArg,zl([w],I.args))},v)}function lC(c,d,v){var w=c.length;if(w<2)return w?Gl(c[0]):[];for(var I=-1,H=we(w);++I<w;)for(var Z=c[I],re=-1;++re<w;)re!=I&&(H[I]=Vh(H[I]||Z,c[re],d,v));return Gl(Or(H,1),d,v)}function VO(c,d,v){for(var w=-1,I=c.length,H=d.length,Z={};++w<I;){var re=w<H?d[w]:n;v(Z,c[w],re)}return Z}function cC(c){return Gi(c)?c:[]}function uC(c){return typeof c=="function"?c:xo}function $l(c,d){return dn(c)?c:yC(c,d)?[c]:pA(ei(c))}var mH=Pn;function ql(c,d,v){var w=c.length;return v=v===n?w:v,!d&&v>=w?c:rs(c,d,v)}var zO=n5||function(c){return xr.clearTimeout(c)};function BO(c,d){if(d)return c.slice();var v=c.length,w=lO?lO(v):new c.constructor(v);return c.copy(w),w}function dC(c){var d=new c.constructor(c.byteLength);return new ug(d).set(new ug(c)),d}function gH(c,d){var v=d?dC(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.byteLength)}function _H(c){var d=new c.constructor(c.source,Ah.exec(c));return d.lastIndex=c.lastIndex,d}function vH(c){return Lh?mi(Lh.call(c)):{}}function HO(c,d){var v=d?dC(c.buffer):c.buffer;return new c.constructor(v,c.byteOffset,c.length)}function jO(c,d){if(c!==d){var v=c!==n,w=c===null,I=c===c,H=Fo(c),Z=d!==n,re=d===null,pe=d===d,Re=Fo(d);if(!re&&!Re&&!H&&c>d||H&&Z&&pe&&!re&&!Re||w&&Z&&pe||!v&&pe||!I)return 1;if(!w&&!H&&!Re&&c<d||Re&&v&&I&&!w&&!H||re&&v&&I||!Z&&I||!pe)return-1}return 0}function yH(c,d,v){for(var w=-1,I=c.criteria,H=d.criteria,Z=I.length,re=v.length;++w<Z;){var pe=jO(I[w],H[w]);if(pe){if(w>=re)return pe;var Re=v[w];return pe*(Re=="desc"?-1:1)}}return c.index-d.index}function WO(c,d,v,w){for(var I=-1,H=c.length,Z=v.length,re=-1,pe=d.length,Re=lr(H-Z,0),Ne=we(pe+Re),Ge=!w;++re<pe;)Ne[re]=d[re];for(;++I<Z;)(Ge||I<H)&&(Ne[v[I]]=c[I]);for(;Re--;)Ne[re++]=c[I++];return Ne}function GO(c,d,v,w){for(var I=-1,H=c.length,Z=-1,re=v.length,pe=-1,Re=d.length,Ne=lr(H-re,0),Ge=we(Ne+Re),st=!w;++I<Ne;)Ge[I]=c[I];for(var Tt=I;++pe<Re;)Ge[Tt+pe]=d[pe];for(;++Z<re;)(st||I<H)&&(Ge[Tt+v[Z]]=c[I++]);return Ge}function _o(c,d){var v=-1,w=c.length;for(d||(d=we(w));++v<w;)d[v]=c[v];return d}function ua(c,d,v,w){var I=!v;v||(v={});for(var H=-1,Z=d.length;++H<Z;){var re=d[H],pe=w?w(v[re],c[re],re,v,c):n;pe===n&&(pe=c[re]),I?Wa(v,re,pe):Uh(v,re,pe)}return v}function xH(c,d){return ua(c,vC(c),d)}function bH(c,d){return ua(c,rA(c),d)}function Eg(c,d){return function(v,w){var I=dn(v)?S4:j5,H=d?d():{};return I(v,c,Wt(w,2),H)}}function md(c){return Pn(function(d,v){var w=-1,I=v.length,H=I>1?v[I-1]:n,Z=I>2?v[2]:n;for(H=c.length>3&&typeof H=="function"?(I--,H):n,Z&&io(v[0],v[1],Z)&&(H=I<3?n:H,I=1),d=mi(d);++w<I;){var re=v[w];re&&c(d,re,w,H)}return d})}function $O(c,d){return function(v,w){if(v==null)return v;if(!vo(v))return c(v,w);for(var I=v.length,H=d?I:-1,Z=mi(v);(d?H--:++H<I)&&w(Z[H],H,Z)!==!1;);return v}}function qO(c){return function(d,v,w){for(var I=-1,H=mi(d),Z=w(d),re=Z.length;re--;){var pe=Z[c?re:++I];if(v(H[pe],pe,H)===!1)break}return d}}function CH(c,d,v){var w=d&y,I=jh(c);function H(){var Z=this&&this!==xr&&this instanceof H?I:c;return Z.apply(w?v:this,arguments)}return H}function YO(c){return function(d){d=ei(d);var v=cd(d)?Ns(d):n,w=v?v[0]:d.charAt(0),I=v?ql(v,1).join(""):d.slice(1);return w[c]()+I}}function gd(c){return function(d){return Fb($A(GA(d).replace(f4,"")),c,"")}}function jh(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var v=pd(c.prototype),w=c.apply(v,d);return Fi(w)?w:v}}function MH(c,d,v){var w=jh(c);function I(){for(var H=arguments.length,Z=we(H),re=H,pe=_d(I);re--;)Z[re]=arguments[re];var Re=H<3&&Z[0]!==pe&&Z[H-1]!==pe?[]:Bl(Z,pe);if(H-=Re.length,H<v)return QO(c,d,Sg,I.placeholder,n,Z,Re,n,n,v-H);var Ne=this&&this!==xr&&this instanceof I?w:c;return Ro(Ne,this,Z)}return I}function XO(c){return function(d,v,w){var I=mi(d);if(!vo(d)){var H=Wt(v,3);d=br(d),v=function(re){return H(I[re],re,I)}}var Z=c(d,v,w);return Z>-1?I[H?d[Z]:Z]:n}}function ZO(c){return $a(function(d){var v=d.length,w=v,I=ns.prototype.thru;for(c&&d.reverse();w--;){var H=d[w];if(typeof H!="function")throw new ts(r);if(I&&!Z&&Og(H)=="wrapper")var Z=new ns([],!0)}for(w=Z?w:v;++w<v;){H=d[w];var re=Og(H),pe=re=="wrapper"?gC(H):n;pe&&xC(pe[0])&&pe[1]==(L|b|E|z)&&!pe[4].length&&pe[9]==1?Z=Z[Og(pe[0])].apply(Z,pe[3]):Z=H.length==1&&xC(H)?Z[re]():Z.thru(H)}return function(){var Re=arguments,Ne=Re[0];if(Z&&Re.length==1&&dn(Ne))return Z.plant(Ne).value();for(var Ge=0,st=v?d[Ge].apply(this,Re):Ne;++Ge<v;)st=d[Ge].call(this,st);return st}})}function Sg(c,d,v,w,I,H,Z,re,pe,Re){var Ne=d&L,Ge=d&y,st=d&M,Tt=d&(b|T),Gt=d&k,Mn=st?n:jh(c);function $t(){for(var kn=arguments.length,Vn=we(kn),Lo=kn;Lo--;)Vn[Lo]=arguments[Lo];if(Tt)var ro=_d($t),Uo=N4(Vn,ro);if(w&&(Vn=WO(Vn,w,I,Tt)),H&&(Vn=GO(Vn,H,Z,Tt)),kn-=Uo,Tt&&kn<Re){var $i=Bl(Vn,ro);return QO(c,d,Sg,$t.placeholder,v,Vn,$i,re,pe,Re-kn)}var Us=Ge?v:this,Za=st?Us[c]:c;return kn=Vn.length,re?Vn=jH(Vn,re):Gt&&kn>1&&Vn.reverse(),Ne&&pe<kn&&(Vn.length=pe),this&&this!==xr&&this instanceof $t&&(Za=Mn||jh(Za)),Za.apply(Us,Vn)}return $t}function KO(c,d){return function(v,w){return K5(v,c,d(w),{})}}function Pg(c,d){return function(v,w){var I;if(v===n&&w===n)return d;if(v!==n&&(I=v),w!==n){if(I===n)return w;typeof v=="string"||typeof w=="string"?(v=No(v),w=No(w)):(v=FO(v),w=FO(w)),I=c(v,w)}return I}}function fC(c){return $a(function(d){return d=Ai(d,ko(Wt())),Pn(function(v){var w=this;return c(d,function(I){return Ro(I,w,v)})})})}function Tg(c,d){d=d===n?" ":No(d);var v=d.length;if(v<2)return v?oC(d,c):d;var w=oC(d,pg(c/ud(d)));return cd(d)?ql(Ns(w),0,c).join(""):w.slice(0,c)}function wH(c,d,v,w){var I=d&y,H=jh(c);function Z(){for(var re=-1,pe=arguments.length,Re=-1,Ne=w.length,Ge=we(Ne+pe),st=this&&this!==xr&&this instanceof Z?H:c;++Re<Ne;)Ge[Re]=w[Re];for(;pe--;)Ge[Re++]=arguments[++re];return Ro(st,I?v:this,Ge)}return Z}function JO(c){return function(d,v,w){return w&&typeof w!="number"&&io(d,v,w)&&(v=w=n),d=Xa(d),v===n?(v=d,d=0):v=Xa(v),w=w===n?d<v?1:-1:Xa(w),cH(d,v,w,c)}}function Dg(c){return function(d,v){return typeof d=="string"&&typeof v=="string"||(d=ss(d),v=ss(v)),c(d,v)}}function QO(c,d,v,w,I,H,Z,re,pe,Re){var Ne=d&b,Ge=Ne?Z:n,st=Ne?n:Z,Tt=Ne?H:n,Gt=Ne?n:H;d|=Ne?E:D,d&=~(Ne?D:E),d&x||(d&=~(y|M));var Mn=[c,d,I,Tt,Ge,Gt,st,re,pe,Re],$t=v.apply(n,Mn);return xC(c)&&dA($t,Mn),$t.placeholder=w,fA($t,c,d)}function hC(c){var d=ar[c];return function(v,w){if(v=ss(v),w=w==null?0:Lr(yn(w),292),w&&fO(v)){var I=(ei(v)+"e").split("e"),H=d(I[0]+"e"+(+I[1]+w));return I=(ei(H)+"e").split("e"),+(I[0]+"e"+(+I[1]-w))}return d(v)}}var EH=fd&&1/rg(new fd([,-0]))[1]==ee?function(c){return new fd(c)}:NC;function eA(c){return function(d){var v=Ur(d);return v==O?jb(d):v==Ee?H4(d):k4(d,c(d))}}function Ga(c,d,v,w,I,H,Z,re){var pe=d&M;if(!pe&&typeof c!="function")throw new ts(r);var Re=w?w.length:0;if(Re||(d&=~(E|D),w=I=n),Z=Z===n?Z:lr(yn(Z),0),re=re===n?re:yn(re),Re-=I?I.length:0,d&D){var Ne=w,Ge=I;w=I=n}var st=pe?n:gC(c),Tt=[c,d,v,w,I,Ne,Ge,H,Z,re];if(st&&zH(Tt,st),c=Tt[0],d=Tt[1],v=Tt[2],w=Tt[3],I=Tt[4],re=Tt[9]=Tt[9]===n?pe?0:c.length:lr(Tt[9]-Re,0),!re&&d&(b|T)&&(d&=~(b|T)),!d||d==y)var Gt=CH(c,d,v);else d==b||d==T?Gt=MH(c,d,re):(d==E||d==(y|E))&&!I.length?Gt=wH(c,d,v,w):Gt=Sg.apply(n,Tt);var Mn=st?kO:dA;return fA(Mn(Gt,Tt),c,d)}function tA(c,d,v,w){return c===n||Ls(c,dd[v])&&!ii.call(w,v)?d:c}function nA(c,d,v,w,I,H){return Fi(c)&&Fi(d)&&(H.set(d,c),Cg(c,d,n,nA,H),H.delete(d)),c}function SH(c){return $h(c)?n:c}function iA(c,d,v,w,I,H){var Z=v&m,re=c.length,pe=d.length;if(re!=pe&&!(Z&&pe>re))return!1;var Re=H.get(c),Ne=H.get(d);if(Re&&Ne)return Re==d&&Ne==c;var Ge=-1,st=!0,Tt=v&p?new Yc:n;for(H.set(c,d),H.set(d,c);++Ge<re;){var Gt=c[Ge],Mn=d[Ge];if(w)var $t=Z?w(Mn,Gt,Ge,d,c,H):w(Gt,Mn,Ge,c,d,H);if($t!==n){if($t)continue;st=!1;break}if(Tt){if(!Lb(d,function(kn,Vn){if(!Ih(Tt,Vn)&&(Gt===kn||I(Gt,kn,v,w,H)))return Tt.push(Vn)})){st=!1;break}}else if(!(Gt===Mn||I(Gt,Mn,v,w,H))){st=!1;break}}return H.delete(c),H.delete(d),st}function PH(c,d,v,w,I,H,Z){switch(v){case ye:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case Te:return!(c.byteLength!=d.byteLength||!H(new ug(c),new ug(d)));case $e:case Ve:case Me:return Ls(+c,+d);case pt:return c.name==d.name&&c.message==d.message;case ve:case ie:return c==d+"";case O:var re=jb;case Ee:var pe=w&m;if(re||(re=rg),c.size!=d.size&&!pe)return!1;var Re=Z.get(c);if(Re)return Re==d;w|=p,Z.set(c,d);var Ne=iA(re(c),re(d),w,I,H,Z);return Z.delete(c),Ne;case U:if(Lh)return Lh.call(c)==Lh.call(d)}return!1}function TH(c,d,v,w,I,H){var Z=v&m,re=pC(c),pe=re.length,Re=pC(d),Ne=Re.length;if(pe!=Ne&&!Z)return!1;for(var Ge=pe;Ge--;){var st=re[Ge];if(!(Z?st in d:ii.call(d,st)))return!1}var Tt=H.get(c),Gt=H.get(d);if(Tt&&Gt)return Tt==d&&Gt==c;var Mn=!0;H.set(c,d),H.set(d,c);for(var $t=Z;++Ge<pe;){st=re[Ge];var kn=c[st],Vn=d[st];if(w)var Lo=Z?w(Vn,kn,st,d,c,H):w(kn,Vn,st,c,d,H);if(!(Lo===n?kn===Vn||I(kn,Vn,v,w,H):Lo)){Mn=!1;break}$t||($t=st=="constructor")}if(Mn&&!$t){var ro=c.constructor,Uo=d.constructor;ro!=Uo&&"constructor"in c&&"constructor"in d&&!(typeof ro=="function"&&ro instanceof ro&&typeof Uo=="function"&&Uo instanceof Uo)&&(Mn=!1)}return H.delete(c),H.delete(d),Mn}function $a(c){return CC(cA(c,n,vA),c+"")}function pC(c){return MO(c,br,vC)}function mC(c){return MO(c,yo,rA)}var gC=gg?function(c){return gg.get(c)}:NC;function Og(c){for(var d=c.name+"",v=hd[d],w=ii.call(hd,d)?v.length:0;w--;){var I=v[w],H=I.func;if(H==null||H==c)return I.name}return d}function _d(c){var d=ii.call(V,"placeholder")?V:c;return d.placeholder}function Wt(){var c=V.iteratee||RC;return c=c===RC?SO:c,arguments.length?c(arguments[0],arguments[1]):c}function Ag(c,d){var v=c.__data__;return FH(d)?v[typeof d=="string"?"string":"hash"]:v.map}function _C(c){for(var d=br(c),v=d.length;v--;){var w=d[v],I=c[w];d[v]=[w,I,aA(I)]}return d}function Kc(c,d){var v=V4(c,d);return EO(v)?v:n}function DH(c){var d=ii.call(c,$c),v=c[$c];try{c[$c]=n;var w=!0}catch{}var I=lg.call(c);return w&&(d?c[$c]=v:delete c[$c]),I}var vC=Gb?function(c){return c==null?[]:(c=mi(c),Vl(Gb(c),function(d){return uO.call(c,d)}))}:FC,rA=Gb?function(c){for(var d=[];c;)zl(d,vC(c)),c=dg(c);return d}:FC,Ur=no;($b&&Ur(new $b(new ArrayBuffer(1)))!=ye||kh&&Ur(new kh)!=O||qb&&Ur(qb.resolve())!=W||fd&&Ur(new fd)!=Ee||Nh&&Ur(new Nh)!=K)&&(Ur=function(c){var d=no(c),v=d==Y?c.constructor:n,w=v?Jc(v):"";if(w)switch(w){case d5:return ye;case f5:return O;case h5:return W;case p5:return Ee;case m5:return K}return d});function OH(c,d,v){for(var w=-1,I=v.length;++w<I;){var H=v[w],Z=H.size;switch(H.type){case"drop":c+=Z;break;case"dropRight":d-=Z;break;case"take":d=Lr(d,c+Z);break;case"takeRight":c=lr(c,d-Z);break}}return{start:c,end:d}}function AH(c){var d=c.match(Oh);return d?d[1].split(Jm):[]}function oA(c,d,v){d=$l(d,c);for(var w=-1,I=d.length,H=!1;++w<I;){var Z=da(d[w]);if(!(H=c!=null&&v(c,Z)))break;c=c[Z]}return H||++w!=I?H:(I=c==null?0:c.length,!!I&&Ug(I)&&qa(Z,I)&&(dn(c)||Qc(c)))}function IH(c){var d=c.length,v=new c.constructor(d);return d&&typeof c[0]=="string"&&ii.call(c,"index")&&(v.index=c.index,v.input=c.input),v}function sA(c){return typeof c.constructor=="function"&&!Wh(c)?pd(dg(c)):{}}function RH(c,d,v){var w=c.constructor;switch(d){case Te:return dC(c);case $e:case Ve:return new w(+c);case ye:return gH(c,v);case lt:case et:case nt:case un:case Fe:case ct:case Ft:case At:case ht:return HO(c,v);case O:return new w;case Me:case ie:return new w(c);case ve:return _H(c);case Ee:return new w;case U:return vH(c)}}function kH(c,d){var v=d.length;if(!v)return c;var w=v-1;return d[w]=(v>1?"& ":"")+d[w],d=d.join(v>2?", ":" "),c.replace(za,`{
/* [wrapped with `+d+`] */
`)}function NH(c){return dn(c)||Qc(c)||!!(dO&&c&&c[dO])}function qa(c,d){var v=typeof c;return d=d??ge,!!d&&(v=="number"||v!="symbol"&&B.test(c))&&c>-1&&c%1==0&&c<d}function io(c,d,v){if(!Fi(v))return!1;var w=typeof d;return(w=="number"?vo(v)&&qa(d,v.length):w=="string"&&d in v)?Ls(v[d],c):!1}function yC(c,d){if(dn(c))return!1;var v=typeof c;return v=="number"||v=="symbol"||v=="boolean"||c==null||Fo(c)?!0:yr.test(c)||!Oi.test(c)||d!=null&&c in mi(d)}function FH(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}function xC(c){var d=Og(c),v=V[d];if(typeof v!="function"||!(d in Ln.prototype))return!1;if(c===v)return!0;var w=gC(v);return!!w&&c===w[0]}function LH(c){return!!aO&&aO in c}var UH=sg?Ya:LC;function Wh(c){var d=c&&c.constructor,v=typeof d=="function"&&d.prototype||dd;return c===v}function aA(c){return c===c&&!Fi(c)}function lA(c,d){return function(v){return v==null?!1:v[c]===d&&(d!==n||c in mi(v))}}function VH(c){var d=Fg(c,function(w){return v.size===a&&v.clear(),w}),v=d.cache;return d}function zH(c,d){var v=c[1],w=d[1],I=v|w,H=I<(y|M|L),Z=w==L&&v==b||w==L&&v==z&&c[7].length<=d[8]||w==(L|z)&&d[7].length<=d[8]&&v==b;if(!(H||Z))return c;w&y&&(c[2]=d[2],I|=v&y?0:x);var re=d[3];if(re){var pe=c[3];c[3]=pe?WO(pe,re,d[4]):re,c[4]=pe?Bl(c[3],l):d[4]}return re=d[5],re&&(pe=c[5],c[5]=pe?GO(pe,re,d[6]):re,c[6]=pe?Bl(c[5],l):d[6]),re=d[7],re&&(c[7]=re),w&L&&(c[8]=c[8]==null?d[8]:Lr(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=I,c}function BH(c){var d=[];if(c!=null)for(var v in mi(c))d.push(v);return d}function HH(c){return lg.call(c)}function cA(c,d,v){return d=lr(d===n?c.length-1:d,0),function(){for(var w=arguments,I=-1,H=lr(w.length-d,0),Z=we(H);++I<H;)Z[I]=w[d+I];I=-1;for(var re=we(d+1);++I<d;)re[I]=w[I];return re[d]=v(Z),Ro(c,this,re)}}function uA(c,d){return d.length<2?c:Zc(c,rs(d,0,-1))}function jH(c,d){for(var v=c.length,w=Lr(d.length,v),I=_o(c);w--;){var H=d[w];c[w]=qa(H,v)?I[H]:n}return c}function bC(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}var dA=hA(kO),Gh=r5||function(c,d){return xr.setTimeout(c,d)},CC=hA(fH);function fA(c,d,v){var w=d+"";return CC(c,kH(w,WH(AH(w),v)))}function hA(c){var d=0,v=0;return function(){var w=l5(),I=N-(w-v);if(v=w,I>0){if(++d>=P)return arguments[0]}else d=0;return c.apply(n,arguments)}}function Ig(c,d){var v=-1,w=c.length,I=w-1;for(d=d===n?w:d;++v<d;){var H=rC(v,I),Z=c[H];c[H]=c[v],c[v]=Z}return c.length=d,c}var pA=VH(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(Xn,function(v,w,I,H){d.push(I?H.replace(eg,"$1"):w||v)}),d});function da(c){if(typeof c=="string"||Fo(c))return c;var d=c+"";return d=="0"&&1/c==-ee?"-0":d}function Jc(c){if(c!=null){try{return ag.call(c)}catch{}try{return c+""}catch{}}return""}function WH(c,d){return es(Ue,function(v){var w="_."+v[0];d&v[1]&&!ng(c,w)&&c.push(w)}),c.sort()}function mA(c){if(c instanceof Ln)return c.clone();var d=new ns(c.__wrapped__,c.__chain__);return d.__actions__=_o(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}function GH(c,d,v){(v?io(c,d,v):d===n)?d=1:d=lr(yn(d),0);var w=c==null?0:c.length;if(!w||d<1)return[];for(var I=0,H=0,Z=we(pg(w/d));I<w;)Z[H++]=rs(c,I,I+=d);return Z}function $H(c){for(var d=-1,v=c==null?0:c.length,w=0,I=[];++d<v;){var H=c[d];H&&(I[w++]=H)}return I}function qH(){var c=arguments.length;if(!c)return[];for(var d=we(c-1),v=arguments[0],w=c;w--;)d[w-1]=arguments[w];return zl(dn(v)?_o(v):[v],Or(d,1))}var YH=Pn(function(c,d){return Gi(c)?Vh(c,Or(d,1,Gi,!0)):[]}),XH=Pn(function(c,d){var v=os(d);return Gi(v)&&(v=n),Gi(c)?Vh(c,Or(d,1,Gi,!0),Wt(v,2)):[]}),ZH=Pn(function(c,d){var v=os(d);return Gi(v)&&(v=n),Gi(c)?Vh(c,Or(d,1,Gi,!0),n,v):[]});function KH(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:yn(d),rs(c,d<0?0:d,w)):[]}function JH(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:yn(d),d=w-d,rs(c,0,d<0?0:d)):[]}function QH(c,d){return c&&c.length?wg(c,Wt(d,3),!0,!0):[]}function e8(c,d){return c&&c.length?wg(c,Wt(d,3),!0):[]}function t8(c,d,v,w){var I=c==null?0:c.length;return I?(v&&typeof v!="number"&&io(c,d,v)&&(v=0,w=I),q5(c,d,v,w)):[]}function gA(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=v==null?0:yn(v);return I<0&&(I=lr(w+I,0)),ig(c,Wt(d,3),I)}function _A(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=w-1;return v!==n&&(I=yn(v),I=v<0?lr(w+I,0):Lr(I,w-1)),ig(c,Wt(d,3),I,!0)}function vA(c){var d=c==null?0:c.length;return d?Or(c,1):[]}function n8(c){var d=c==null?0:c.length;return d?Or(c,ee):[]}function i8(c,d){var v=c==null?0:c.length;return v?(d=d===n?1:yn(d),Or(c,d)):[]}function r8(c){for(var d=-1,v=c==null?0:c.length,w={};++d<v;){var I=c[d];w[I[0]]=I[1]}return w}function yA(c){return c&&c.length?c[0]:n}function o8(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=v==null?0:yn(v);return I<0&&(I=lr(w+I,0)),ld(c,d,I)}function s8(c){var d=c==null?0:c.length;return d?rs(c,0,-1):[]}var a8=Pn(function(c){var d=Ai(c,cC);return d.length&&d[0]===c[0]?Qb(d):[]}),l8=Pn(function(c){var d=os(c),v=Ai(c,cC);return d===os(v)?d=n:v.pop(),v.length&&v[0]===c[0]?Qb(v,Wt(d,2)):[]}),c8=Pn(function(c){var d=os(c),v=Ai(c,cC);return d=typeof d=="function"?d:n,d&&v.pop(),v.length&&v[0]===c[0]?Qb(v,n,d):[]});function u8(c,d){return c==null?"":s5.call(c,d)}function os(c){var d=c==null?0:c.length;return d?c[d-1]:n}function d8(c,d,v){var w=c==null?0:c.length;if(!w)return-1;var I=w;return v!==n&&(I=yn(v),I=I<0?lr(w+I,0):Lr(I,w-1)),d===d?W4(c,d,I):ig(c,QD,I,!0)}function f8(c,d){return c&&c.length?OO(c,yn(d)):n}var h8=Pn(xA);function xA(c,d){return c&&c.length&&d&&d.length?iC(c,d):c}function p8(c,d,v){return c&&c.length&&d&&d.length?iC(c,d,Wt(v,2)):c}function m8(c,d,v){return c&&c.length&&d&&d.length?iC(c,d,n,v):c}var g8=$a(function(c,d){var v=c==null?0:c.length,w=Xb(c,d);return RO(c,Ai(d,function(I){return qa(I,v)?+I:I}).sort(jO)),w});function _8(c,d){var v=[];if(!(c&&c.length))return v;var w=-1,I=[],H=c.length;for(d=Wt(d,3);++w<H;){var Z=c[w];d(Z,w,c)&&(v.push(Z),I.push(w))}return RO(c,I),v}function MC(c){return c==null?c:u5.call(c)}function v8(c,d,v){var w=c==null?0:c.length;return w?(v&&typeof v!="number"&&io(c,d,v)?(d=0,v=w):(d=d==null?0:yn(d),v=v===n?w:yn(v)),rs(c,d,v)):[]}function y8(c,d){return Mg(c,d)}function x8(c,d,v){return sC(c,d,Wt(v,2))}function b8(c,d){var v=c==null?0:c.length;if(v){var w=Mg(c,d);if(w<v&&Ls(c[w],d))return w}return-1}function C8(c,d){return Mg(c,d,!0)}function M8(c,d,v){return sC(c,d,Wt(v,2),!0)}function w8(c,d){var v=c==null?0:c.length;if(v){var w=Mg(c,d,!0)-1;if(Ls(c[w],d))return w}return-1}function E8(c){return c&&c.length?NO(c):[]}function S8(c,d){return c&&c.length?NO(c,Wt(d,2)):[]}function P8(c){var d=c==null?0:c.length;return d?rs(c,1,d):[]}function T8(c,d,v){return c&&c.length?(d=v||d===n?1:yn(d),rs(c,0,d<0?0:d)):[]}function D8(c,d,v){var w=c==null?0:c.length;return w?(d=v||d===n?1:yn(d),d=w-d,rs(c,d<0?0:d,w)):[]}function O8(c,d){return c&&c.length?wg(c,Wt(d,3),!1,!0):[]}function A8(c,d){return c&&c.length?wg(c,Wt(d,3)):[]}var I8=Pn(function(c){return Gl(Or(c,1,Gi,!0))}),R8=Pn(function(c){var d=os(c);return Gi(d)&&(d=n),Gl(Or(c,1,Gi,!0),Wt(d,2))}),k8=Pn(function(c){var d=os(c);return d=typeof d=="function"?d:n,Gl(Or(c,1,Gi,!0),n,d)});function N8(c){return c&&c.length?Gl(c):[]}function F8(c,d){return c&&c.length?Gl(c,Wt(d,2)):[]}function L8(c,d){return d=typeof d=="function"?d:n,c&&c.length?Gl(c,n,d):[]}function wC(c){if(!(c&&c.length))return[];var d=0;return c=Vl(c,function(v){if(Gi(v))return d=lr(v.length,d),!0}),Bb(d,function(v){return Ai(c,Ub(v))})}function bA(c,d){if(!(c&&c.length))return[];var v=wC(c);return d==null?v:Ai(v,function(w){return Ro(d,n,w)})}var U8=Pn(function(c,d){return Gi(c)?Vh(c,d):[]}),V8=Pn(function(c){return lC(Vl(c,Gi))}),z8=Pn(function(c){var d=os(c);return Gi(d)&&(d=n),lC(Vl(c,Gi),Wt(d,2))}),B8=Pn(function(c){var d=os(c);return d=typeof d=="function"?d:n,lC(Vl(c,Gi),n,d)}),H8=Pn(wC);function j8(c,d){return VO(c||[],d||[],Uh)}function W8(c,d){return VO(c||[],d||[],Hh)}var G8=Pn(function(c){var d=c.length,v=d>1?c[d-1]:n;return v=typeof v=="function"?(c.pop(),v):n,bA(c,v)});function CA(c){var d=V(c);return d.__chain__=!0,d}function $8(c,d){return d(c),c}function Rg(c,d){return d(c)}var q8=$a(function(c){var d=c.length,v=d?c[0]:0,w=this.__wrapped__,I=function(H){return Xb(H,c)};return d>1||this.__actions__.length||!(w instanceof Ln)||!qa(v)?this.thru(I):(w=w.slice(v,+v+(d?1:0)),w.__actions__.push({func:Rg,args:[I],thisArg:n}),new ns(w,this.__chain__).thru(function(H){return d&&!H.length&&H.push(n),H}))});function Y8(){return CA(this)}function X8(){return new ns(this.value(),this.__chain__)}function Z8(){this.__values__===n&&(this.__values__=FA(this.value()));var c=this.__index__>=this.__values__.length,d=c?n:this.__values__[this.__index__++];return{done:c,value:d}}function K8(){return this}function J8(c){for(var d,v=this;v instanceof vg;){var w=mA(v);w.__index__=0,w.__values__=n,d?I.__wrapped__=w:d=w;var I=w;v=v.__wrapped__}return I.__wrapped__=c,d}function Q8(){var c=this.__wrapped__;if(c instanceof Ln){var d=c;return this.__actions__.length&&(d=new Ln(this)),d=d.reverse(),d.__actions__.push({func:Rg,args:[MC],thisArg:n}),new ns(d,this.__chain__)}return this.thru(MC)}function e6(){return UO(this.__wrapped__,this.__actions__)}var t6=Eg(function(c,d,v){ii.call(c,v)?++c[v]:Wa(c,v,1)});function n6(c,d,v){var w=dn(c)?KD:$5;return v&&io(c,d,v)&&(d=n),w(c,Wt(d,3))}function i6(c,d){var v=dn(c)?Vl:bO;return v(c,Wt(d,3))}var r6=XO(gA),o6=XO(_A);function s6(c,d){return Or(kg(c,d),1)}function a6(c,d){return Or(kg(c,d),ee)}function l6(c,d,v){return v=v===n?1:yn(v),Or(kg(c,d),v)}function MA(c,d){var v=dn(c)?es:Wl;return v(c,Wt(d,3))}function wA(c,d){var v=dn(c)?P4:xO;return v(c,Wt(d,3))}var c6=Eg(function(c,d,v){ii.call(c,v)?c[v].push(d):Wa(c,v,[d])});function u6(c,d,v,w){c=vo(c)?c:yd(c),v=v&&!w?yn(v):0;var I=c.length;return v<0&&(v=lr(I+v,0)),Vg(c)?v<=I&&c.indexOf(d,v)>-1:!!I&&ld(c,d,v)>-1}var d6=Pn(function(c,d,v){var w=-1,I=typeof d=="function",H=vo(c)?we(c.length):[];return Wl(c,function(Z){H[++w]=I?Ro(d,Z,v):zh(Z,d,v)}),H}),f6=Eg(function(c,d,v){Wa(c,v,d)});function kg(c,d){var v=dn(c)?Ai:PO;return v(c,Wt(d,3))}function h6(c,d,v,w){return c==null?[]:(dn(d)||(d=d==null?[]:[d]),v=w?n:v,dn(v)||(v=v==null?[]:[v]),AO(c,d,v))}var p6=Eg(function(c,d,v){c[v?0:1].push(d)},function(){return[[],[]]});function m6(c,d,v){var w=dn(c)?Fb:tO,I=arguments.length<3;return w(c,Wt(d,4),v,I,Wl)}function g6(c,d,v){var w=dn(c)?T4:tO,I=arguments.length<3;return w(c,Wt(d,4),v,I,xO)}function _6(c,d){var v=dn(c)?Vl:bO;return v(c,Lg(Wt(d,3)))}function v6(c){var d=dn(c)?gO:uH;return d(c)}function y6(c,d,v){(v?io(c,d,v):d===n)?d=1:d=yn(d);var w=dn(c)?B5:dH;return w(c,d)}function x6(c){var d=dn(c)?H5:hH;return d(c)}function b6(c){if(c==null)return 0;if(vo(c))return Vg(c)?ud(c):c.length;var d=Ur(c);return d==O||d==Ee?c.size:tC(c).length}function C6(c,d,v){var w=dn(c)?Lb:pH;return v&&io(c,d,v)&&(d=n),w(c,Wt(d,3))}var M6=Pn(function(c,d){if(c==null)return[];var v=d.length;return v>1&&io(c,d[0],d[1])?d=[]:v>2&&io(d[0],d[1],d[2])&&(d=[d[0]]),AO(c,Or(d,1),[])}),Ng=i5||function(){return xr.Date.now()};function w6(c,d){if(typeof d!="function")throw new ts(r);return c=yn(c),function(){if(--c<1)return d.apply(this,arguments)}}function EA(c,d,v){return d=v?n:d,d=c&&d==null?c.length:d,Ga(c,L,n,n,n,n,d)}function SA(c,d){var v;if(typeof d!="function")throw new ts(r);return c=yn(c),function(){return--c>0&&(v=d.apply(this,arguments)),c<=1&&(d=n),v}}var EC=Pn(function(c,d,v){var w=y;if(v.length){var I=Bl(v,_d(EC));w|=E}return Ga(c,w,d,v,I)}),PA=Pn(function(c,d,v){var w=y|M;if(v.length){var I=Bl(v,_d(PA));w|=E}return Ga(d,w,c,v,I)});function TA(c,d,v){d=v?n:d;var w=Ga(c,b,n,n,n,n,n,d);return w.placeholder=TA.placeholder,w}function DA(c,d,v){d=v?n:d;var w=Ga(c,T,n,n,n,n,n,d);return w.placeholder=DA.placeholder,w}function OA(c,d,v){var w,I,H,Z,re,pe,Re=0,Ne=!1,Ge=!1,st=!0;if(typeof c!="function")throw new ts(r);d=ss(d)||0,Fi(v)&&(Ne=!!v.leading,Ge="maxWait"in v,H=Ge?lr(ss(v.maxWait)||0,d):H,st="trailing"in v?!!v.trailing:st);function Tt($i){var Us=w,Za=I;return w=I=n,Re=$i,Z=c.apply(Za,Us),Z}function Gt($i){return Re=$i,re=Gh(kn,d),Ne?Tt($i):Z}function Mn($i){var Us=$i-pe,Za=$i-Re,XA=d-Us;return Ge?Lr(XA,H-Za):XA}function $t($i){var Us=$i-pe,Za=$i-Re;return pe===n||Us>=d||Us<0||Ge&&Za>=H}function kn(){var $i=Ng();if($t($i))return Vn($i);re=Gh(kn,Mn($i))}function Vn($i){return re=n,st&&w?Tt($i):(w=I=n,Z)}function Lo(){re!==n&&zO(re),Re=0,w=pe=I=re=n}function ro(){return re===n?Z:Vn(Ng())}function Uo(){var $i=Ng(),Us=$t($i);if(w=arguments,I=this,pe=$i,Us){if(re===n)return Gt(pe);if(Ge)return zO(re),re=Gh(kn,d),Tt(pe)}return re===n&&(re=Gh(kn,d)),Z}return Uo.cancel=Lo,Uo.flush=ro,Uo}var E6=Pn(function(c,d){return yO(c,1,d)}),S6=Pn(function(c,d,v){return yO(c,ss(d)||0,v)});function P6(c){return Ga(c,k)}function Fg(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new ts(r);var v=function(){var w=arguments,I=d?d.apply(this,w):w[0],H=v.cache;if(H.has(I))return H.get(I);var Z=c.apply(this,w);return v.cache=H.set(I,Z)||H,Z};return v.cache=new(Fg.Cache||ja),v}Fg.Cache=ja;function Lg(c){if(typeof c!="function")throw new ts(r);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}function T6(c){return SA(2,c)}var D6=mH(function(c,d){d=d.length==1&&dn(d[0])?Ai(d[0],ko(Wt())):Ai(Or(d,1),ko(Wt()));var v=d.length;return Pn(function(w){for(var I=-1,H=Lr(w.length,v);++I<H;)w[I]=d[I].call(this,w[I]);return Ro(c,this,w)})}),SC=Pn(function(c,d){var v=Bl(d,_d(SC));return Ga(c,E,n,d,v)}),AA=Pn(function(c,d){var v=Bl(d,_d(AA));return Ga(c,D,n,d,v)}),O6=$a(function(c,d){return Ga(c,z,n,n,n,d)});function A6(c,d){if(typeof c!="function")throw new ts(r);return d=d===n?d:yn(d),Pn(c,d)}function I6(c,d){if(typeof c!="function")throw new ts(r);return d=d==null?0:lr(yn(d),0),Pn(function(v){var w=v[d],I=ql(v,0,d);return w&&zl(I,w),Ro(c,this,I)})}function R6(c,d,v){var w=!0,I=!0;if(typeof c!="function")throw new ts(r);return Fi(v)&&(w="leading"in v?!!v.leading:w,I="trailing"in v?!!v.trailing:I),OA(c,d,{leading:w,maxWait:d,trailing:I})}function k6(c){return EA(c,1)}function N6(c,d){return SC(uC(d),c)}function F6(){if(!arguments.length)return[];var c=arguments[0];return dn(c)?c:[c]}function L6(c){return is(c,h)}function U6(c,d){return d=typeof d=="function"?d:n,is(c,h,d)}function V6(c){return is(c,u|h)}function z6(c,d){return d=typeof d=="function"?d:n,is(c,u|h,d)}function B6(c,d){return d==null||vO(c,d,br(d))}function Ls(c,d){return c===d||c!==c&&d!==d}var H6=Dg(Jb),j6=Dg(function(c,d){return c>=d}),Qc=wO(function(){return arguments}())?wO:function(c){return Vi(c)&&ii.call(c,"callee")&&!uO.call(c,"callee")},dn=we.isArray,W6=GD?ko(GD):J5;function vo(c){return c!=null&&Ug(c.length)&&!Ya(c)}function Gi(c){return Vi(c)&&vo(c)}function G6(c){return c===!0||c===!1||Vi(c)&&no(c)==$e}var Yl=o5||LC,$6=$D?ko($D):Q5;function q6(c){return Vi(c)&&c.nodeType===1&&!$h(c)}function Y6(c){if(c==null)return!0;if(vo(c)&&(dn(c)||typeof c=="string"||typeof c.splice=="function"||Yl(c)||vd(c)||Qc(c)))return!c.length;var d=Ur(c);if(d==O||d==Ee)return!c.size;if(Wh(c))return!tC(c).length;for(var v in c)if(ii.call(c,v))return!1;return!0}function X6(c,d){return Bh(c,d)}function Z6(c,d,v){v=typeof v=="function"?v:n;var w=v?v(c,d):n;return w===n?Bh(c,d,n,v):!!w}function PC(c){if(!Vi(c))return!1;var d=no(c);return d==pt||d==mt||typeof c.message=="string"&&typeof c.name=="string"&&!$h(c)}function K6(c){return typeof c=="number"&&fO(c)}function Ya(c){if(!Fi(c))return!1;var d=no(c);return d==Ut||d==Dn||d==He||d==ne}function IA(c){return typeof c=="number"&&c==yn(c)}function Ug(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ge}function Fi(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}function Vi(c){return c!=null&&typeof c=="object"}var RA=qD?ko(qD):tH;function J6(c,d){return c===d||eC(c,d,_C(d))}function Q6(c,d,v){return v=typeof v=="function"?v:n,eC(c,d,_C(d),v)}function ej(c){return kA(c)&&c!=+c}function tj(c){if(UH(c))throw new an(i);return EO(c)}function nj(c){return c===null}function ij(c){return c==null}function kA(c){return typeof c=="number"||Vi(c)&&no(c)==Me}function $h(c){if(!Vi(c)||no(c)!=Y)return!1;var d=dg(c);if(d===null)return!0;var v=ii.call(d,"constructor")&&d.constructor;return typeof v=="function"&&v instanceof v&&ag.call(v)==Q4}var TC=YD?ko(YD):nH;function rj(c){return IA(c)&&c>=-ge&&c<=ge}var NA=XD?ko(XD):iH;function Vg(c){return typeof c=="string"||!dn(c)&&Vi(c)&&no(c)==ie}function Fo(c){return typeof c=="symbol"||Vi(c)&&no(c)==U}var vd=ZD?ko(ZD):rH;function oj(c){return c===n}function sj(c){return Vi(c)&&Ur(c)==K}function aj(c){return Vi(c)&&no(c)==_e}var lj=Dg(nC),cj=Dg(function(c,d){return c<=d});function FA(c){if(!c)return[];if(vo(c))return Vg(c)?Ns(c):_o(c);if(Rh&&c[Rh])return B4(c[Rh]());var d=Ur(c),v=d==O?jb:d==Ee?rg:yd;return v(c)}function Xa(c){if(!c)return c===0?c:0;if(c=ss(c),c===ee||c===-ee){var d=c<0?-1:1;return d*le}return c===c?c:0}function yn(c){var d=Xa(c),v=d%1;return d===d?v?d-v:d:0}function LA(c){return c?Xc(yn(c),0,J):0}function ss(c){if(typeof c=="number")return c;if(Fo(c))return de;if(Fi(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=Fi(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=nO(c);var v=Db.test(c);return v||Ab.test(c)?w4(c.slice(2),v?2:8):tg.test(c)?de:+c}function UA(c){return ua(c,yo(c))}function uj(c){return c?Xc(yn(c),-ge,ge):c===0?c:0}function ei(c){return c==null?"":No(c)}var dj=md(function(c,d){if(Wh(d)||vo(d)){ua(d,br(d),c);return}for(var v in d)ii.call(d,v)&&Uh(c,v,d[v])}),VA=md(function(c,d){ua(d,yo(d),c)}),zg=md(function(c,d,v,w){ua(d,yo(d),c,w)}),fj=md(function(c,d,v,w){ua(d,br(d),c,w)}),hj=$a(Xb);function pj(c,d){var v=pd(c);return d==null?v:_O(v,d)}var mj=Pn(function(c,d){c=mi(c);var v=-1,w=d.length,I=w>2?d[2]:n;for(I&&io(d[0],d[1],I)&&(w=1);++v<w;)for(var H=d[v],Z=yo(H),re=-1,pe=Z.length;++re<pe;){var Re=Z[re],Ne=c[Re];(Ne===n||Ls(Ne,dd[Re])&&!ii.call(c,Re))&&(c[Re]=H[Re])}return c}),gj=Pn(function(c){return c.push(n,nA),Ro(zA,n,c)});function _j(c,d){return JD(c,Wt(d,3),ca)}function vj(c,d){return JD(c,Wt(d,3),Kb)}function yj(c,d){return c==null?c:Zb(c,Wt(d,3),yo)}function xj(c,d){return c==null?c:CO(c,Wt(d,3),yo)}function bj(c,d){return c&&ca(c,Wt(d,3))}function Cj(c,d){return c&&Kb(c,Wt(d,3))}function Mj(c){return c==null?[]:bg(c,br(c))}function wj(c){return c==null?[]:bg(c,yo(c))}function DC(c,d,v){var w=c==null?n:Zc(c,d);return w===n?v:w}function Ej(c,d){return c!=null&&oA(c,d,Y5)}function OC(c,d){return c!=null&&oA(c,d,X5)}var Sj=KO(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=lg.call(d)),c[d]=v},IC(xo)),Pj=KO(function(c,d,v){d!=null&&typeof d.toString!="function"&&(d=lg.call(d)),ii.call(c,d)?c[d].push(v):c[d]=[v]},Wt),Tj=Pn(zh);function br(c){return vo(c)?mO(c):tC(c)}function yo(c){return vo(c)?mO(c,!0):oH(c)}function Dj(c,d){var v={};return d=Wt(d,3),ca(c,function(w,I,H){Wa(v,d(w,I,H),w)}),v}function Oj(c,d){var v={};return d=Wt(d,3),ca(c,function(w,I,H){Wa(v,I,d(w,I,H))}),v}var Aj=md(function(c,d,v){Cg(c,d,v)}),zA=md(function(c,d,v,w){Cg(c,d,v,w)}),Ij=$a(function(c,d){var v={};if(c==null)return v;var w=!1;d=Ai(d,function(H){return H=$l(H,c),w||(w=H.length>1),H}),ua(c,mC(c),v),w&&(v=is(v,u|f|h,SH));for(var I=d.length;I--;)aC(v,d[I]);return v});function Rj(c,d){return BA(c,Lg(Wt(d)))}var kj=$a(function(c,d){return c==null?{}:aH(c,d)});function BA(c,d){if(c==null)return{};var v=Ai(mC(c),function(w){return[w]});return d=Wt(d),IO(c,v,function(w,I){return d(w,I[0])})}function Nj(c,d,v){d=$l(d,c);var w=-1,I=d.length;for(I||(I=1,c=n);++w<I;){var H=c==null?n:c[da(d[w])];H===n&&(w=I,H=v),c=Ya(H)?H.call(c):H}return c}function Fj(c,d,v){return c==null?c:Hh(c,d,v)}function Lj(c,d,v,w){return w=typeof w=="function"?w:n,c==null?c:Hh(c,d,v,w)}var HA=eA(br),jA=eA(yo);function Uj(c,d,v){var w=dn(c),I=w||Yl(c)||vd(c);if(d=Wt(d,4),v==null){var H=c&&c.constructor;I?v=w?new H:[]:Fi(c)?v=Ya(H)?pd(dg(c)):{}:v={}}return(I?es:ca)(c,function(Z,re,pe){return d(v,Z,re,pe)}),v}function Vj(c,d){return c==null?!0:aC(c,d)}function zj(c,d,v){return c==null?c:LO(c,d,uC(v))}function Bj(c,d,v,w){return w=typeof w=="function"?w:n,c==null?c:LO(c,d,uC(v),w)}function yd(c){return c==null?[]:Hb(c,br(c))}function Hj(c){return c==null?[]:Hb(c,yo(c))}function jj(c,d,v){return v===n&&(v=d,d=n),v!==n&&(v=ss(v),v=v===v?v:0),d!==n&&(d=ss(d),d=d===d?d:0),Xc(ss(c),d,v)}function Wj(c,d,v){return d=Xa(d),v===n?(v=d,d=0):v=Xa(v),c=ss(c),Z5(c,d,v)}function Gj(c,d,v){if(v&&typeof v!="boolean"&&io(c,d,v)&&(d=v=n),v===n&&(typeof d=="boolean"?(v=d,d=n):typeof c=="boolean"&&(v=c,c=n)),c===n&&d===n?(c=0,d=1):(c=Xa(c),d===n?(d=c,c=0):d=Xa(d)),c>d){var w=c;c=d,d=w}if(v||c%1||d%1){var I=hO();return Lr(c+I*(d-c+M4("1e-"+((I+"").length-1))),d)}return rC(c,d)}var $j=gd(function(c,d,v){return d=d.toLowerCase(),c+(v?WA(d):d)});function WA(c){return AC(ei(c).toLowerCase())}function GA(c){return c=ei(c),c&&c.replace(he,F4).replace(h4,"")}function qj(c,d,v){c=ei(c),d=No(d);var w=c.length;v=v===n?w:Xc(yn(v),0,w);var I=v;return v-=d.length,v>=0&&c.slice(v,I)==d}function Yj(c){return c=ei(c),c&&ze.test(c)?c.replace(tt,L4):c}function Xj(c){return c=ei(c),c&&Is.test(c)?c.replace(to,"\\$&"):c}var Zj=gd(function(c,d,v){return c+(v?"-":"")+d.toLowerCase()}),Kj=gd(function(c,d,v){return c+(v?" ":"")+d.toLowerCase()}),Jj=YO("toLowerCase");function Qj(c,d,v){c=ei(c),d=yn(d);var w=d?ud(c):0;if(!d||w>=d)return c;var I=(d-w)/2;return Tg(mg(I),v)+c+Tg(pg(I),v)}function eW(c,d,v){c=ei(c),d=yn(d);var w=d?ud(c):0;return d&&w<d?c+Tg(d-w,v):c}function tW(c,d,v){c=ei(c),d=yn(d);var w=d?ud(c):0;return d&&w<d?Tg(d-w,v)+c:c}function nW(c,d,v){return v||d==null?d=0:d&&(d=+d),c5(ei(c).replace(id,""),d||0)}function iW(c,d,v){return(v?io(c,d,v):d===n)?d=1:d=yn(d),oC(ei(c),d)}function rW(){var c=arguments,d=ei(c[0]);return c.length<3?d:d.replace(c[1],c[2])}var oW=gd(function(c,d,v){return c+(v?"_":"")+d.toLowerCase()});function sW(c,d,v){return v&&typeof v!="number"&&io(c,d,v)&&(d=v=n),v=v===n?J:v>>>0,v?(c=ei(c),c&&(typeof d=="string"||d!=null&&!TC(d))&&(d=No(d),!d&&cd(c))?ql(Ns(c),0,v):c.split(d,v)):[]}var aW=gd(function(c,d,v){return c+(v?" ":"")+AC(d)});function lW(c,d,v){return c=ei(c),v=v==null?0:Xc(yn(v),0,c.length),d=No(d),c.slice(v,v+d.length)==d}function cW(c,d,v){var w=V.templateSettings;v&&io(c,d,v)&&(d=n),c=ei(c),d=zg({},d,w,tA);var I=zg({},d.imports,w.imports,tA),H=br(I),Z=Hb(I,H),re,pe,Re=0,Ne=d.interpolate||xe,Ge="__p += '",st=Wb((d.escape||xe).source+"|"+Ne.source+"|"+(Ne===on?od:xe).source+"|"+(d.evaluate||xe).source+"|$","g"),Tt="//# sourceURL="+(ii.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++v4+"]")+`
`;c.replace(st,function($t,kn,Vn,Lo,ro,Uo){return Vn||(Vn=Lo),Ge+=c.slice(Re,Uo).replace(be,U4),kn&&(re=!0,Ge+=`' +
__e(`+kn+`) +
'`),ro&&(pe=!0,Ge+=`';
`+ro+`;
__p += '`),Vn&&(Ge+=`' +
((__t = (`+Vn+`)) == null ? '' : __t) +
'`),Re=Uo+$t.length,$t}),Ge+=`';
`;var Gt=ii.call(d,"variable")&&d.variable;if(!Gt)Ge=`with (obj) {
`+Ge+`
}
`;else if(rd.test(Gt))throw new an(o);Ge=(pe?Ge.replace(On,""):Ge).replace(rn,"$1").replace(Qn,"$1;"),Ge="function("+(Gt||"obj")+`) {
`+(Gt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(pe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ge+`return __p
}`;var Mn=qA(function(){return Zn(H,Tt+"return "+Ge).apply(n,Z)});if(Mn.source=Ge,PC(Mn))throw Mn;return Mn}function uW(c){return ei(c).toLowerCase()}function dW(c){return ei(c).toUpperCase()}function fW(c,d,v){if(c=ei(c),c&&(v||d===n))return nO(c);if(!c||!(d=No(d)))return c;var w=Ns(c),I=Ns(d),H=iO(w,I),Z=rO(w,I)+1;return ql(w,H,Z).join("")}function hW(c,d,v){if(c=ei(c),c&&(v||d===n))return c.slice(0,sO(c)+1);if(!c||!(d=No(d)))return c;var w=Ns(c),I=rO(w,Ns(d))+1;return ql(w,0,I).join("")}function pW(c,d,v){if(c=ei(c),c&&(v||d===n))return c.replace(id,"");if(!c||!(d=No(d)))return c;var w=Ns(c),I=iO(w,Ns(d));return ql(w,I).join("")}function mW(c,d){var v=G,w=F;if(Fi(d)){var I="separator"in d?d.separator:I;v="length"in d?yn(d.length):v,w="omission"in d?No(d.omission):w}c=ei(c);var H=c.length;if(cd(c)){var Z=Ns(c);H=Z.length}if(v>=H)return c;var re=v-ud(w);if(re<1)return w;var pe=Z?ql(Z,0,re).join(""):c.slice(0,re);if(I===n)return pe+w;if(Z&&(re+=pe.length-re),TC(I)){if(c.slice(re).search(I)){var Re,Ne=pe;for(I.global||(I=Wb(I.source,ei(Ah.exec(I))+"g")),I.lastIndex=0;Re=I.exec(Ne);)var Ge=Re.index;pe=pe.slice(0,Ge===n?re:Ge)}}else if(c.indexOf(No(I),re)!=re){var st=pe.lastIndexOf(I);st>-1&&(pe=pe.slice(0,st))}return pe+w}function gW(c){return c=ei(c),c&&Pe.test(c)?c.replace(ce,G4):c}var _W=gd(function(c,d,v){return c+(v?" ":"")+d.toUpperCase()}),AC=YO("toUpperCase");function $A(c,d,v){return c=ei(c),d=v?n:d,d===n?z4(c)?Y4(c):A4(c):c.match(d)||[]}var qA=Pn(function(c,d){try{return Ro(c,n,d)}catch(v){return PC(v)?v:new an(v)}}),vW=$a(function(c,d){return es(d,function(v){v=da(v),Wa(c,v,EC(c[v],c))}),c});function yW(c){var d=c==null?0:c.length,v=Wt();return c=d?Ai(c,function(w){if(typeof w[1]!="function")throw new ts(r);return[v(w[0]),w[1]]}):[],Pn(function(w){for(var I=-1;++I<d;){var H=c[I];if(Ro(H[0],this,w))return Ro(H[1],this,w)}})}function xW(c){return G5(is(c,u))}function IC(c){return function(){return c}}function bW(c,d){return c==null||c!==c?d:c}var CW=ZO(),MW=ZO(!0);function xo(c){return c}function RC(c){return SO(typeof c=="function"?c:is(c,u))}function wW(c){return TO(is(c,u))}function EW(c,d){return DO(c,is(d,u))}var SW=Pn(function(c,d){return function(v){return zh(v,c,d)}}),PW=Pn(function(c,d){return function(v){return zh(c,v,d)}});function kC(c,d,v){var w=br(d),I=bg(d,w);v==null&&!(Fi(d)&&(I.length||!w.length))&&(v=d,d=c,c=this,I=bg(d,br(d)));var H=!(Fi(v)&&"chain"in v)||!!v.chain,Z=Ya(c);return es(I,function(re){var pe=d[re];c[re]=pe,Z&&(c.prototype[re]=function(){var Re=this.__chain__;if(H||Re){var Ne=c(this.__wrapped__),Ge=Ne.__actions__=_o(this.__actions__);return Ge.push({func:pe,args:arguments,thisArg:c}),Ne.__chain__=Re,Ne}return pe.apply(c,zl([this.value()],arguments))})}),c}function TW(){return xr._===this&&(xr._=e5),this}function NC(){}function DW(c){return c=yn(c),Pn(function(d){return OO(d,c)})}var OW=fC(Ai),AW=fC(KD),IW=fC(Lb);function YA(c){return yC(c)?Ub(da(c)):lH(c)}function RW(c){return function(d){return c==null?n:Zc(c,d)}}var kW=JO(),NW=JO(!0);function FC(){return[]}function LC(){return!1}function FW(){return{}}function LW(){return""}function UW(){return!0}function VW(c,d){if(c=yn(c),c<1||c>ge)return[];var v=J,w=Lr(c,J);d=Wt(d),c-=J;for(var I=Bb(w,d);++v<c;)d(v);return I}function zW(c){return dn(c)?Ai(c,da):Fo(c)?[c]:_o(pA(ei(c)))}function BW(c){var d=++J4;return ei(c)+d}var HW=Pg(function(c,d){return c+d},0),jW=hC("ceil"),WW=Pg(function(c,d){return c/d},1),GW=hC("floor");function $W(c){return c&&c.length?xg(c,xo,Jb):n}function qW(c,d){return c&&c.length?xg(c,Wt(d,2),Jb):n}function YW(c){return eO(c,xo)}function XW(c,d){return eO(c,Wt(d,2))}function ZW(c){return c&&c.length?xg(c,xo,nC):n}function KW(c,d){return c&&c.length?xg(c,Wt(d,2),nC):n}var JW=Pg(function(c,d){return c*d},1),QW=hC("round"),eG=Pg(function(c,d){return c-d},0);function tG(c){return c&&c.length?zb(c,xo):0}function nG(c,d){return c&&c.length?zb(c,Wt(d,2)):0}return V.after=w6,V.ary=EA,V.assign=dj,V.assignIn=VA,V.assignInWith=zg,V.assignWith=fj,V.at=hj,V.before=SA,V.bind=EC,V.bindAll=vW,V.bindKey=PA,V.castArray=F6,V.chain=CA,V.chunk=GH,V.compact=$H,V.concat=qH,V.cond=yW,V.conforms=xW,V.constant=IC,V.countBy=t6,V.create=pj,V.curry=TA,V.curryRight=DA,V.debounce=OA,V.defaults=mj,V.defaultsDeep=gj,V.defer=E6,V.delay=S6,V.difference=YH,V.differenceBy=XH,V.differenceWith=ZH,V.drop=KH,V.dropRight=JH,V.dropRightWhile=QH,V.dropWhile=e8,V.fill=t8,V.filter=i6,V.flatMap=s6,V.flatMapDeep=a6,V.flatMapDepth=l6,V.flatten=vA,V.flattenDeep=n8,V.flattenDepth=i8,V.flip=P6,V.flow=CW,V.flowRight=MW,V.fromPairs=r8,V.functions=Mj,V.functionsIn=wj,V.groupBy=c6,V.initial=s8,V.intersection=a8,V.intersectionBy=l8,V.intersectionWith=c8,V.invert=Sj,V.invertBy=Pj,V.invokeMap=d6,V.iteratee=RC,V.keyBy=f6,V.keys=br,V.keysIn=yo,V.map=kg,V.mapKeys=Dj,V.mapValues=Oj,V.matches=wW,V.matchesProperty=EW,V.memoize=Fg,V.merge=Aj,V.mergeWith=zA,V.method=SW,V.methodOf=PW,V.mixin=kC,V.negate=Lg,V.nthArg=DW,V.omit=Ij,V.omitBy=Rj,V.once=T6,V.orderBy=h6,V.over=OW,V.overArgs=D6,V.overEvery=AW,V.overSome=IW,V.partial=SC,V.partialRight=AA,V.partition=p6,V.pick=kj,V.pickBy=BA,V.property=YA,V.propertyOf=RW,V.pull=h8,V.pullAll=xA,V.pullAllBy=p8,V.pullAllWith=m8,V.pullAt=g8,V.range=kW,V.rangeRight=NW,V.rearg=O6,V.reject=_6,V.remove=_8,V.rest=A6,V.reverse=MC,V.sampleSize=y6,V.set=Fj,V.setWith=Lj,V.shuffle=x6,V.slice=v8,V.sortBy=M6,V.sortedUniq=E8,V.sortedUniqBy=S8,V.split=sW,V.spread=I6,V.tail=P8,V.take=T8,V.takeRight=D8,V.takeRightWhile=O8,V.takeWhile=A8,V.tap=$8,V.throttle=R6,V.thru=Rg,V.toArray=FA,V.toPairs=HA,V.toPairsIn=jA,V.toPath=zW,V.toPlainObject=UA,V.transform=Uj,V.unary=k6,V.union=I8,V.unionBy=R8,V.unionWith=k8,V.uniq=N8,V.uniqBy=F8,V.uniqWith=L8,V.unset=Vj,V.unzip=wC,V.unzipWith=bA,V.update=zj,V.updateWith=Bj,V.values=yd,V.valuesIn=Hj,V.without=U8,V.words=$A,V.wrap=N6,V.xor=V8,V.xorBy=z8,V.xorWith=B8,V.zip=H8,V.zipObject=j8,V.zipObjectDeep=W8,V.zipWith=G8,V.entries=HA,V.entriesIn=jA,V.extend=VA,V.extendWith=zg,kC(V,V),V.add=HW,V.attempt=qA,V.camelCase=$j,V.capitalize=WA,V.ceil=jW,V.clamp=jj,V.clone=L6,V.cloneDeep=V6,V.cloneDeepWith=z6,V.cloneWith=U6,V.conformsTo=B6,V.deburr=GA,V.defaultTo=bW,V.divide=WW,V.endsWith=qj,V.eq=Ls,V.escape=Yj,V.escapeRegExp=Xj,V.every=n6,V.find=r6,V.findIndex=gA,V.findKey=_j,V.findLast=o6,V.findLastIndex=_A,V.findLastKey=vj,V.floor=GW,V.forEach=MA,V.forEachRight=wA,V.forIn=yj,V.forInRight=xj,V.forOwn=bj,V.forOwnRight=Cj,V.get=DC,V.gt=H6,V.gte=j6,V.has=Ej,V.hasIn=OC,V.head=yA,V.identity=xo,V.includes=u6,V.indexOf=o8,V.inRange=Wj,V.invoke=Tj,V.isArguments=Qc,V.isArray=dn,V.isArrayBuffer=W6,V.isArrayLike=vo,V.isArrayLikeObject=Gi,V.isBoolean=G6,V.isBuffer=Yl,V.isDate=$6,V.isElement=q6,V.isEmpty=Y6,V.isEqual=X6,V.isEqualWith=Z6,V.isError=PC,V.isFinite=K6,V.isFunction=Ya,V.isInteger=IA,V.isLength=Ug,V.isMap=RA,V.isMatch=J6,V.isMatchWith=Q6,V.isNaN=ej,V.isNative=tj,V.isNil=ij,V.isNull=nj,V.isNumber=kA,V.isObject=Fi,V.isObjectLike=Vi,V.isPlainObject=$h,V.isRegExp=TC,V.isSafeInteger=rj,V.isSet=NA,V.isString=Vg,V.isSymbol=Fo,V.isTypedArray=vd,V.isUndefined=oj,V.isWeakMap=sj,V.isWeakSet=aj,V.join=u8,V.kebabCase=Zj,V.last=os,V.lastIndexOf=d8,V.lowerCase=Kj,V.lowerFirst=Jj,V.lt=lj,V.lte=cj,V.max=$W,V.maxBy=qW,V.mean=YW,V.meanBy=XW,V.min=ZW,V.minBy=KW,V.stubArray=FC,V.stubFalse=LC,V.stubObject=FW,V.stubString=LW,V.stubTrue=UW,V.multiply=JW,V.nth=f8,V.noConflict=TW,V.noop=NC,V.now=Ng,V.pad=Qj,V.padEnd=eW,V.padStart=tW,V.parseInt=nW,V.random=Gj,V.reduce=m6,V.reduceRight=g6,V.repeat=iW,V.replace=rW,V.result=Nj,V.round=QW,V.runInContext=ue,V.sample=v6,V.size=b6,V.snakeCase=oW,V.some=C6,V.sortedIndex=y8,V.sortedIndexBy=x8,V.sortedIndexOf=b8,V.sortedLastIndex=C8,V.sortedLastIndexBy=M8,V.sortedLastIndexOf=w8,V.startCase=aW,V.startsWith=lW,V.subtract=eG,V.sum=tG,V.sumBy=nG,V.template=cW,V.times=VW,V.toFinite=Xa,V.toInteger=yn,V.toLength=LA,V.toLower=uW,V.toNumber=ss,V.toSafeInteger=uj,V.toString=ei,V.toUpper=dW,V.trim=fW,V.trimEnd=hW,V.trimStart=pW,V.truncate=mW,V.unescape=gW,V.uniqueId=BW,V.upperCase=_W,V.upperFirst=AC,V.each=MA,V.eachRight=wA,V.first=yA,kC(V,function(){var c={};return ca(V,function(d,v){ii.call(V.prototype,v)||(c[v]=d)}),c}(),{chain:!1}),V.VERSION=t,es(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){V[c].placeholder=V}),es(["drop","take"],function(c,d){Ln.prototype[c]=function(v){v=v===n?1:lr(yn(v),0);var w=this.__filtered__&&!d?new Ln(this):this.clone();return w.__filtered__?w.__takeCount__=Lr(v,w.__takeCount__):w.__views__.push({size:Lr(v,J),type:c+(w.__dir__<0?"Right":"")}),w},Ln.prototype[c+"Right"]=function(v){return this.reverse()[c](v).reverse()}}),es(["filter","map","takeWhile"],function(c,d){var v=d+1,w=v==S||v==oe;Ln.prototype[c]=function(I){var H=this.clone();return H.__iteratees__.push({iteratee:Wt(I,3),type:v}),H.__filtered__=H.__filtered__||w,H}}),es(["head","last"],function(c,d){var v="take"+(d?"Right":"");Ln.prototype[c]=function(){return this[v](1).value()[0]}}),es(["initial","tail"],function(c,d){var v="drop"+(d?"":"Right");Ln.prototype[c]=function(){return this.__filtered__?new Ln(this):this[v](1)}}),Ln.prototype.compact=function(){return this.filter(xo)},Ln.prototype.find=function(c){return this.filter(c).head()},Ln.prototype.findLast=function(c){return this.reverse().find(c)},Ln.prototype.invokeMap=Pn(function(c,d){return typeof c=="function"?new Ln(this):this.map(function(v){return zh(v,c,d)})}),Ln.prototype.reject=function(c){return this.filter(Lg(Wt(c)))},Ln.prototype.slice=function(c,d){c=yn(c);var v=this;return v.__filtered__&&(c>0||d<0)?new Ln(v):(c<0?v=v.takeRight(-c):c&&(v=v.drop(c)),d!==n&&(d=yn(d),v=d<0?v.dropRight(-d):v.take(d-c)),v)},Ln.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Ln.prototype.toArray=function(){return this.take(J)},ca(Ln.prototype,function(c,d){var v=/^(?:filter|find|map|reject)|While$/.test(d),w=/^(?:head|last)$/.test(d),I=V[w?"take"+(d=="last"?"Right":""):d],H=w||/^find/.test(d);I&&(V.prototype[d]=function(){var Z=this.__wrapped__,re=w?[1]:arguments,pe=Z instanceof Ln,Re=re[0],Ne=pe||dn(Z),Ge=function(kn){var Vn=I.apply(V,zl([kn],re));return w&&st?Vn[0]:Vn};Ne&&v&&typeof Re=="function"&&Re.length!=1&&(pe=Ne=!1);var st=this.__chain__,Tt=!!this.__actions__.length,Gt=H&&!st,Mn=pe&&!Tt;if(!H&&Ne){Z=Mn?Z:new Ln(this);var $t=c.apply(Z,re);return $t.__actions__.push({func:Rg,args:[Ge],thisArg:n}),new ns($t,st)}return Gt&&Mn?c.apply(this,re):($t=this.thru(Ge),Gt?w?$t.value()[0]:$t.value():$t)})}),es(["pop","push","shift","sort","splice","unshift"],function(c){var d=og[c],v=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",w=/^(?:pop|shift)$/.test(c);V.prototype[c]=function(){var I=arguments;if(w&&!this.__chain__){var H=this.value();return d.apply(dn(H)?H:[],I)}return this[v](function(Z){return d.apply(dn(Z)?Z:[],I)})}}),ca(Ln.prototype,function(c,d){var v=V[d];if(v){var w=v.name+"";ii.call(hd,w)||(hd[w]=[]),hd[w].push({name:d,func:v})}}),hd[Sg(n,M).name]=[{name:"wrapper",func:n}],Ln.prototype.clone=g5,Ln.prototype.reverse=_5,Ln.prototype.value=v5,V.prototype.at=q8,V.prototype.chain=Y8,V.prototype.commit=X8,V.prototype.next=Z8,V.prototype.plant=J8,V.prototype.reverse=Q8,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=e6,V.prototype.first=V.prototype.head,Rh&&(V.prototype[Rh]=K8),V},Hl=X4();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(xr._=Hl,define(function(){return Hl})):Gc?((Gc.exports=Hl)._=Hl,Rb._=Hl):xr._=Hl}).call(uh)});var KB=zC((ZB,ID)=>{"use strict";(function(n){typeof ZB=="object"&&typeof ID<"u"?ID.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return function n(t,e,i){function r(a,l){if(!e[a]){if(!t[a]){var u=typeof qh=="function"&&qh;if(!l&&u)return u(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var h=e[a]={exports:{}};t[a][0].call(h.exports,function(m){var p=t[a][1][m];return r(p||m)},h,h.exports,n,t,e,i)}return e[a].exports}for(var o=typeof qh=="function"&&qh,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var a,l,u,f,h,m,p,y=[],M=0,x=s.length,b=x,T=i.getTypeOf(s)!=="string";M<s.length;)b=x-M,u=T?(a=s[M++],l=M<x?s[M++]:0,M<x?s[M++]:0):(a=s.charCodeAt(M++),l=M<x?s.charCodeAt(M++):0,M<x?s.charCodeAt(M++):0),f=a>>2,h=(3&a)<<4|l>>4,m=1<b?(15&l)<<2|u>>6:64,p=2<b?63&u:64,y.push(o.charAt(f)+o.charAt(h)+o.charAt(m)+o.charAt(p));return y.join("")},e.decode=function(s){var a,l,u,f,h,m,p=0,y=0,M="data:";if(s.substr(0,M.length)===M)throw new Error("Invalid base64 input, it looks like a data url.");var x,b=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===o.charAt(64)&&b--,s.charAt(s.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=r.uint8array?new Uint8Array(0|b):new Array(0|b);p<s.length;)a=o.indexOf(s.charAt(p++))<<2|(f=o.indexOf(s.charAt(p++)))>>4,l=(15&f)<<4|(h=o.indexOf(s.charAt(p++)))>>2,u=(3&h)<<6|(m=o.indexOf(s.charAt(p++))),x[y++]=a,h!==64&&(x[y++]=l),m!==64&&(x[y++]=u);return x}},{"./support":30,"./utils":32}],2:[function(n,t,e){"use strict";var i=n("./external"),r=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function a(l,u,f,h,m){this.compressedSize=l,this.uncompressedSize=u,this.crc32=f,this.compression=h,this.compressedContent=m}a.prototype={getContentWorker:function(){var l=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),u=this;return l.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,u,f){return l.pipe(new o).pipe(new s("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",u)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,t,e){"use strict";var i=n("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},e.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,t,e){"use strict";var i=n("./utils"),r=function(){for(var o,s=[],a=0;a<256;a++){o=a;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[a]=o}return s}();t.exports=function(o,s){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(a,l,u,f){var h=r,m=f+u;a^=-1;for(var p=f;p<m;p++)a=a>>>8^h[255&(a^l[p])];return-1^a}(0|s,o,o.length,0):function(a,l,u,f){var h=r,m=f+u;a^=-1;for(var p=f;p<m;p++)a=a>>>8^h[255&(a^l.charCodeAt(p))];return-1^a}(0|s,o,o.length,0):0}},{"./utils":32}],5:[function(n,t,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(n,t,e){"use strict";var i=null;i=typeof Promise<"u"?Promise:n("lie"),t.exports={Promise:i}},{lie:37}],7:[function(n,t,e){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=n("pako"),o=n("./utils"),s=n("./stream/GenericWorker"),a=i?"uint8array":"array";function l(u,f){s.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}e.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(a,u.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},e.compressWorker=function(u){return new l("Deflate",u)},e.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,t,e){"use strict";function i(h,m){var p,y="";for(p=0;p<m;p++)y+=String.fromCharCode(255&h),h>>>=8;return y}function r(h,m,p,y,M,x){var b,T,E=h.file,D=h.compression,L=x!==a.utf8encode,z=o.transformTo("string",x(E.name)),k=o.transformTo("string",a.utf8encode(E.name)),G=E.comment,F=o.transformTo("string",x(G)),P=o.transformTo("string",a.utf8encode(G)),N=k.length!==E.name.length,S=P.length!==G.length,q="",oe="",ee="",ge=E.dir,le=E.date,de={crc32:0,compressedSize:0,uncompressedSize:0};m&&!p||(de.crc32=h.crc32,de.compressedSize=h.compressedSize,de.uncompressedSize=h.uncompressedSize);var J=0;m&&(J|=8),L||!N&&!S||(J|=2048);var Q=0,Ie=0;ge&&(Q|=16),M==="UNIX"?(Ie=798,Q|=function(ke,Ce){var He=ke;return ke||(He=Ce?16893:33204),(65535&He)<<16}(E.unixPermissions,ge)):(Ie=20,Q|=function(ke){return 63&(ke||0)}(E.dosPermissions)),b=le.getUTCHours(),b<<=6,b|=le.getUTCMinutes(),b<<=5,b|=le.getUTCSeconds()/2,T=le.getUTCFullYear()-1980,T<<=4,T|=le.getUTCMonth()+1,T<<=5,T|=le.getUTCDate(),N&&(oe=i(1,1)+i(l(z),4)+k,q+="up"+i(oe.length,2)+oe),S&&(ee=i(1,1)+i(l(F),4)+P,q+="uc"+i(ee.length,2)+ee);var Ue="";return Ue+=`
\0`,Ue+=i(J,2),Ue+=D.magic,Ue+=i(b,2),Ue+=i(T,2),Ue+=i(de.crc32,4),Ue+=i(de.compressedSize,4),Ue+=i(de.uncompressedSize,4),Ue+=i(z.length,2),Ue+=i(q.length,2),{fileRecord:u.LOCAL_FILE_HEADER+Ue+z+q,dirRecord:u.CENTRAL_FILE_HEADER+i(Ie,2)+Ue+i(F.length,2)+"\0\0\0\0"+i(Q,4)+i(y,4)+z+q+F}}var o=n("../utils"),s=n("../stream/GenericWorker"),a=n("../utf8"),l=n("../crc32"),u=n("../signature");function f(h,m,p,y){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=p,this.encodeFileName=y,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,s),f.prototype.push=function(h){var m=h.meta.percent||0,p=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,s.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:p?(m+100*(p-y-1))/p:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var m=this.streamFiles&&!h.file.dir;if(m){var p=r(h,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var m=this.streamFiles&&!h.file.dir,p=r(h,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),m)this.push({data:function(y){return u.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)}(h),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var p=this.bytesWritten-h,y=function(M,x,b,T,E){var D=o.transformTo("string",E(T));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(M,2)+i(M,2)+i(x,4)+i(b,4)+i(D.length,2)+D}(this.dirRecords.length,p,h,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var m=this;return h.on("data",function(p){m.processChunk(p)}),h.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),h.on("error",function(p){m.error(p)}),this},f.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var m=this._sources;if(!s.prototype.error.call(this,h))return!1;for(var p=0;p<m.length;p++)try{m[p].error(h)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var h=this._sources,m=0;m<h.length;m++)h[m].lock()},t.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,t,e){"use strict";var i=n("../compressions"),r=n("./ZipFileWorker");e.generateWorker=function(o,s,a){var l=new r(s.streamFiles,a,s.platform,s.encodeFileName),u=0;try{o.forEach(function(f,h){u++;var m=function(x,b){var T=x||b,E=i[T];if(!E)throw new Error(T+" is not a valid compression method !");return E}(h.options.compression,s.compression),p=h.options.compressionOptions||s.compressionOptions||{},y=h.dir,M=h.date;h._compressWorker(m,p).withStreamInfo("file",{name:f,dir:y,date:M,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(l)}),l.entriesCount=u}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,t,e){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new i;for(var o in this)typeof this[o]!="function"&&(r[o]=this[o]);return r}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(r,o){return new i().loadAsync(r,o)},i.external=n("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,t,e){"use strict";var i=n("./utils"),r=n("./external"),o=n("./utf8"),s=n("./zipEntries"),a=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function u(f){return new r.Promise(function(h,m){var p=f.decompressed.getContentWorker().pipe(new a);p.on("error",function(y){m(y)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}t.exports=function(f,h){var m=this;return h=i.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(f)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(p){var y=new s(h);return y.load(p),y}).then(function(p){var y=[r.Promise.resolve(p)],M=p.files;if(h.checkCRC32)for(var x=0;x<M.length;x++)y.push(u(M[x]));return r.Promise.all(y)}).then(function(p){for(var y=p.shift(),M=y.files,x=0;x<M.length;x++){var b=M[x],T=b.fileNameStr,E=i.resolve(b.fileNameStr);m.file(E,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:h.createFolders}),b.dir||(m.file(E).unsafeOriginalName=T)}return y.zipComment.length&&(m.comment=y.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../stream/GenericWorker");function o(s,a){r.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}i.inherits(o,r),o.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,t,e){"use strict";var i=n("readable-stream").Readable;function r(o,s,a){i.call(this,s),this._helper=o;var l=this;o.on("data",function(u,f){l.push(u)||l._helper.pause(),a&&a(f)}).on("error",function(u){l.emit("error",u)}).on("end",function(){l.push(null)})}n("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(n,t,e){"use strict";t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,r);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,r)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var r=new Buffer(i);return r.fill(0),r},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,t,e){"use strict";function i(E,D,L){var z,k=o.getTypeOf(D),G=o.extend(L||{},l);G.date=G.date||new Date,G.compression!==null&&(G.compression=G.compression.toUpperCase()),typeof G.unixPermissions=="string"&&(G.unixPermissions=parseInt(G.unixPermissions,8)),G.unixPermissions&&16384&G.unixPermissions&&(G.dir=!0),G.dosPermissions&&16&G.dosPermissions&&(G.dir=!0),G.dir&&(E=M(E)),G.createFolders&&(z=y(E))&&x.call(this,z,!0);var F=k==="string"&&G.binary===!1&&G.base64===!1;L&&L.binary!==void 0||(G.binary=!F),(D instanceof u&&D.uncompressedSize===0||G.dir||!D||D.length===0)&&(G.base64=!1,G.binary=!0,D="",G.compression="STORE",k="string");var P=null;P=D instanceof u||D instanceof s?D:m.isNode&&m.isStream(D)?new p(E,D):o.prepareContent(E,D,G.binary,G.optimizedBinaryString,G.base64);var N=new f(E,P,G);this.files[E]=N}var r=n("./utf8"),o=n("./utils"),s=n("./stream/GenericWorker"),a=n("./stream/StreamHelper"),l=n("./defaults"),u=n("./compressedObject"),f=n("./zipObject"),h=n("./generate"),m=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),y=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var D=E.lastIndexOf("/");return 0<D?E.substring(0,D):""},M=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},x=function(E,D){return D=D!==void 0?D:l.createFolders,E=M(E),this.files[E]||i.call(this,E,null,{dir:!0,createFolders:D}),this.files[E]};function b(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var D,L,z;for(D in this.files)z=this.files[D],(L=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&E(L,z)},filter:function(E){var D=[];return this.forEach(function(L,z){E(L,z)&&D.push(z)}),D},file:function(E,D,L){if(arguments.length!==1)return E=this.root+E,i.call(this,E,D,L),this;if(b(E)){var z=E;return this.filter(function(G,F){return!F.dir&&z.test(G)})}var k=this.files[this.root+E];return k&&!k.dir?k:null},folder:function(E){if(!E)return this;if(b(E))return this.filter(function(k,G){return G.dir&&E.test(k)});var D=this.root+E,L=x.call(this,D),z=this.clone();return z.root=L.name,z},remove:function(E){E=this.root+E;var D=this.files[E];if(D||(E.slice(-1)!=="/"&&(E+="/"),D=this.files[E]),D&&!D.dir)delete this.files[E];else for(var L=this.filter(function(k,G){return G.name.slice(0,E.length)===E}),z=0;z<L.length;z++)delete this.files[L[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var D,L={};try{if((L=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");o.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var z=L.comment||this.comment||"";D=h.generateWorker(this,L,z)}catch(k){(D=new s("error")).error(k)}return new a(D,L.type||"string",L.mimeType)},generateAsync:function(E,D){return this.generateInternalStream(E).accumulate(D)},generateNodeStream:function(E,D){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(D)}};t.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,t,e){"use strict";t.exports=n("stream")},{stream:void 0}],17:[function(n,t,e){"use strict";var i=n("./DataReader");function r(o){i.call(this,o);for(var s=0;s<this.data.length;s++)o[s]=255&o[s]}n("../utils").inherits(r,i),r.prototype.byteAt=function(o){return this.data[this.zero+o]},r.prototype.lastIndexOfSignature=function(o){for(var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===s&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===u)return f-this.zero;return-1},r.prototype.readAndCheckSignature=function(o){var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),u=o.charCodeAt(3),f=this.readData(4);return s===f[0]&&a===f[1]&&l===f[2]&&u===f[3]},r.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(n,t,e){"use strict";var i=n("../utils");function r(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var s,a=0;for(this.checkOffset(o),s=this.index+o-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=o,a},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},t.exports=r},{"../utils":32}],19:[function(n,t,e){"use strict";var i=n("./Uint8ArrayReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,t,e){"use strict";var i=n("./DataReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},r.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},r.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},r.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(n,t,e){"use strict";var i=n("./ArrayReader");function r(o){i.call(this,o)}n("../utils").inherits(r,i),r.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(n,t,e){"use strict";var i=n("../utils"),r=n("../support"),o=n("./ArrayReader"),s=n("./StringReader"),a=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");t.exports=function(u){var f=i.getTypeOf(u);return i.checkSupport(f),f!=="string"||r.uint8array?f==="nodebuffer"?new a(u):r.uint8array?new l(i.transformTo("uint8array",u)):new o(i.transformTo("array",u)):new s(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,t,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,t,e){"use strict";var i=n("./GenericWorker"),r=n("../utils");function o(s){i.call(this,"ConvertWorker to "+s),this.destType=s}r.inherits(o,i),o.prototype.processChunk=function(s){this.push({data:r.transformTo(this.destType,s.data),meta:s.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,t,e){"use strict";var i=n("./GenericWorker"),r=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(s){this.streamInfo.crc32=r(s.data,this.streamInfo.crc32||0),this.push(s)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./GenericWorker");function o(s){r.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}i.inherits(o,r),o.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}r.prototype.processChunk.call(this,s)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./GenericWorker");function o(s){r.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=i.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,t,e){"use strict";function i(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,o){return this._listeners[r].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,o){if(this._listeners[r])for(var s=0;s<this._listeners[r].length;s++)this._listeners[r][s].call(this,o)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var o=this;return r.on("data",function(s){o.processChunk(s)}),r.on("end",function(){o.end()}),r.on("error",function(s){o.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,o){return this.extraStreamInfo[r]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},t.exports=i},{}],29:[function(n,t,e){"use strict";var i=n("../utils"),r=n("./ConvertWorker"),o=n("./GenericWorker"),s=n("../base64"),a=n("../support"),l=n("../external"),u=null;if(a.nodestream)try{u=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(m,p){return new l.Promise(function(y,M){var x=[],b=m._internalType,T=m._outputType,E=m._mimeType;m.on("data",function(D,L){x.push(D),p&&p(L)}).on("error",function(D){x=[],M(D)}).on("end",function(){try{var D=function(L,z,k){switch(L){case"blob":return i.newBlob(i.transformTo("arraybuffer",z),k);case"base64":return s.encode(z);default:return i.transformTo(L,z)}}(T,function(L,z){var k,G=0,F=null,P=0;for(k=0;k<z.length;k++)P+=z[k].length;switch(L){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(F=new Uint8Array(P),k=0;k<z.length;k++)F.set(z[k],G),G+=z[k].length;return F;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+L+"'")}}(b,x),E);y(D)}catch(L){M(L)}x=[]}).resume()})}function h(m,p,y){var M=p;switch(p){case"blob":case"arraybuffer":M="uint8array";break;case"base64":M="string"}try{this._internalType=M,this._outputType=p,this._mimeType=y,i.checkSupport(M),this._worker=m.pipe(new r(M)),m.lock()}catch(x){this._worker=new o("error"),this._worker.error(x)}}h.prototype={accumulate:function(m){return f(this,m)},on:function(m,p){var y=this;return m==="data"?this._worker.on(m,function(M){p.call(y,M.data,M.meta)}):this._worker.on(m,function(){i.delay(p,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},m)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,t,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{var i=new ArrayBuffer(0);try{e.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(i),e.blob=r.getBlob("application/zip").size===0}catch{e.blob=!1}}}try{e.nodestream=!!n("readable-stream").Readable}catch{e.nodestream=!1}},{"readable-stream":16}],31:[function(n,t,e){"use strict";for(var i=n("./utils"),r=n("./support"),o=n("./nodejsUtils"),s=n("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function u(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}e.utf8encode=function(h){return r.nodebuffer?o.newBufferFrom(h,"utf-8"):function(m){var p,y,M,x,b,T=m.length,E=0;for(x=0;x<T;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<T&&(64512&(M=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(M-56320),x++),E+=y<128?1:y<2048?2:y<65536?3:4;for(p=r.uint8array?new Uint8Array(E):new Array(E),x=b=0;b<E;x++)(64512&(y=m.charCodeAt(x)))==55296&&x+1<T&&(64512&(M=m.charCodeAt(x+1)))==56320&&(y=65536+(y-55296<<10)+(M-56320),x++),y<128?p[b++]=y:(y<2048?p[b++]=192|y>>>6:(y<65536?p[b++]=224|y>>>12:(p[b++]=240|y>>>18,p[b++]=128|y>>>12&63),p[b++]=128|y>>>6&63),p[b++]=128|63&y);return p}(h)},e.utf8decode=function(h){return r.nodebuffer?i.transformTo("nodebuffer",h).toString("utf-8"):function(m){var p,y,M,x,b=m.length,T=new Array(2*b);for(p=y=0;p<b;)if((M=m[p++])<128)T[y++]=M;else if(4<(x=a[M]))T[y++]=65533,p+=x-1;else{for(M&=x===2?31:x===3?15:7;1<x&&p<b;)M=M<<6|63&m[p++],x--;1<x?T[y++]=65533:M<65536?T[y++]=M:(M-=65536,T[y++]=55296|M>>10&1023,T[y++]=56320|1023&M)}return T.length!==y&&(T.subarray?T=T.subarray(0,y):T.length=y),i.applyFromCharCode(T)}(h=i.transformTo(r.uint8array?"uint8array":"array",h))},i.inherits(u,s),u.prototype.processChunk=function(h){var m=i.transformTo(r.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var p=m;(m=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),m.set(p,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var y=function(x,b){var T;for((b=b||x.length)>x.length&&(b=x.length),T=b-1;0<=T&&(192&x[T])==128;)T--;return T<0||T===0?b:T+a[x[T]]>b?T:b}(m),M=m;y!==m.length&&(r.uint8array?(M=m.subarray(0,y),this.leftOver=m.subarray(y,m.length)):(M=m.slice(0,y),this.leftOver=m.slice(y,m.length))),this.push({data:e.utf8decode(M),meta:h.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=u,i.inherits(f,s),f.prototype.processChunk=function(h){this.push({data:e.utf8encode(h.data),meta:h.meta})},e.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,t,e){"use strict";var i=n("./support"),r=n("./base64"),o=n("./nodejsUtils"),s=n("./external");function a(p){return p}function l(p,y){for(var M=0;M<p.length;++M)y[M]=255&p.charCodeAt(M);return y}n("setimmediate"),e.newBlob=function(p,y){e.checkSupport("blob");try{return new Blob([p],{type:y})}catch{try{var M=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return M.append(p),M.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(p,y,M){var x=[],b=0,T=p.length;if(T<=M)return String.fromCharCode.apply(null,p);for(;b<T;)y==="array"||y==="nodebuffer"?x.push(String.fromCharCode.apply(null,p.slice(b,Math.min(b+M,T)))):x.push(String.fromCharCode.apply(null,p.subarray(b,Math.min(b+M,T)))),b+=M;return x.join("")},stringifyByChar:function(p){for(var y="",M=0;M<p.length;M++)y+=String.fromCharCode(p[M]);return y},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(p){var y=65536,M=e.getTypeOf(p),x=!0;if(M==="uint8array"?x=u.applyCanBeUsed.uint8array:M==="nodebuffer"&&(x=u.applyCanBeUsed.nodebuffer),x)for(;1<y;)try{return u.stringifyByChunk(p,M,y)}catch{y=Math.floor(y/2)}return u.stringifyByChar(p)}function h(p,y){for(var M=0;M<p.length;M++)y[M]=p[M];return y}e.applyFromCharCode=f;var m={};m.string={string:a,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,o.allocBuffer(p.length))}},m.array={string:f,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},m.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return h(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:f,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return o.newBufferFrom(p)}},m.nodebuffer={string:f,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:a},e.transformTo=function(p,y){if(y=y||"",!p)return y;e.checkSupport(p);var M=e.getTypeOf(y);return m[M][p](y)},e.resolve=function(p){for(var y=p.split("/"),M=[],x=0;x<y.length;x++){var b=y[x];b==="."||b===""&&x!==0&&x!==y.length-1||(b===".."?M.pop():M.push(b))}return M.join("/")},e.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(p)?"nodebuffer":i.uint8array&&p instanceof Uint8Array?"uint8array":i.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(p){if(!i[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(p){var y,M,x="";for(M=0;M<(p||"").length;M++)x+="\\x"+((y=p.charCodeAt(M))<16?"0":"")+y.toString(16).toUpperCase();return x},e.delay=function(p,y,M){setImmediate(function(){p.apply(M||null,y||[])})},e.inherits=function(p,y){function M(){}M.prototype=y.prototype,p.prototype=new M},e.extend=function(){var p,y,M={};for(p=0;p<arguments.length;p++)for(y in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],y)&&M[y]===void 0&&(M[y]=arguments[p][y]);return M},e.prepareContent=function(p,y,M,x,b){return s.Promise.resolve(y).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new s.Promise(function(E,D){var L=new FileReader;L.onload=function(z){E(z.target.result)},L.onerror=function(z){D(z.target.error)},L.readAsArrayBuffer(T)}):T}).then(function(T){var E=e.getTypeOf(T);return E?(E==="arraybuffer"?T=e.transformTo("uint8array",T):E==="string"&&(b?T=r.decode(T):M&&x!==!0&&(T=function(D){return l(D,i.uint8array?new Uint8Array(D.length):new Array(D.length))}(T))),T):s.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,t,e){"use strict";var i=n("./reader/readerFor"),r=n("./utils"),o=n("./signature"),s=n("./zipEntry"),a=n("./support");function l(u){this.files=[],this.loadOptions=u}l.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(f)+", expected "+r.pretty(u)+")")}},isSignature:function(u,f){var h=this.reader.index;this.reader.setIndex(u);var m=this.reader.readString(4)===f;return this.reader.setIndex(h),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",h=r.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,h,m=this.zip64EndOfCentralSize-44;0<m;)u=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var m=f-h;if(0<m)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(u){this.reader=i(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,t,e){"use strict";var i=n("./reader/readerFor"),r=n("./utils"),o=n("./compressedObject"),s=n("./crc32"),a=n("./utf8"),l=n("./compressions"),u=n("./support");function f(h,m){this.options=h,this.loadOptions=m}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var m,p;if(h.skip(22),this.fileNameLength=h.readInt(2),p=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(y){for(var M in l)if(Object.prototype.hasOwnProperty.call(l,M)&&l[M].magic===y)return l[M];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var m=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(m),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var m,p,y,M=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<M;)m=h.readInt(2),p=h.readInt(2),y=h.readData(p),this.extraFields[m]={id:m,length:p,value:y};h.setIndex(M)},handleUTF8:function(){var h=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var p=r.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var M=r.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(M)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var m=i(h.value);return m.readInt(1)!==1||s(this.fileName)!==m.readInt(4)?null:a.utf8decode(m.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var m=i(h.value);return m.readInt(1)!==1||s(this.fileComment)!==m.readInt(4)?null:a.utf8decode(m.readData(h.length-5))}return null}},t.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,t,e){"use strict";function i(m,p,y){this.name=m,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=p,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var r=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),s=n("./utf8"),a=n("./compressedObject"),l=n("./stream/GenericWorker");i.prototype={internalStream:function(m){var p=null,y="string";try{if(!m)throw new Error("No output type specified.");var M=(y=m.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),p=this._decompressWorker();var x=!this._dataBinary;x&&!M&&(p=p.pipe(new s.Utf8EncodeWorker)),!x&&M&&(p=p.pipe(new s.Utf8DecodeWorker))}catch(b){(p=new l("error")).error(b)}return new r(p,y,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof a&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(y,m,p)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<u.length;h++)i.prototype[u[h]]=f;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,t,e){(function(i){"use strict";var r,o,s=i.MutationObserver||i.WebKitMutationObserver;if(s){var a=0,l=new s(m),u=i.document.createTextNode("");l.observe(u,{characterData:!0}),r=function(){u.data=a=++a%2}}else if(i.setImmediate||i.MessageChannel===void 0)r="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var p=i.document.createElement("script");p.onreadystatechange=function(){m(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:function(){setTimeout(m,0)};else{var f=new i.MessageChannel;f.port1.onmessage=m,r=function(){f.port2.postMessage(0)}}var h=[];function m(){var p,y;o=!0;for(var M=h.length;M;){for(y=h,h=[],p=-1;++p<M;)y[p]();M=h.length}o=!1}t.exports=function(p){h.push(p)!==1||o||r()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,t,e){"use strict";var i=n("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function u(M){if(typeof M!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,M!==r&&p(this,M)}function f(M,x,b){this.promise=M,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function h(M,x,b){i(function(){var T;try{T=x(b)}catch(E){return o.reject(M,E)}T===M?o.reject(M,new TypeError("Cannot resolve promise with itself")):o.resolve(M,T)})}function m(M){var x=M&&M.then;if(M&&(typeof M=="object"||typeof M=="function")&&typeof x=="function")return function(){x.apply(M,arguments)}}function p(M,x){var b=!1;function T(L){b||(b=!0,o.reject(M,L))}function E(L){b||(b=!0,o.resolve(M,L))}var D=y(function(){x(E,T)});D.status==="error"&&T(D.value)}function y(M,x){var b={};try{b.value=M(x),b.status="success"}catch(T){b.status="error",b.value=T}return b}(t.exports=u).prototype.finally=function(M){if(typeof M!="function")return this;var x=this.constructor;return this.then(function(b){return x.resolve(M()).then(function(){return b})},function(b){return x.resolve(M()).then(function(){throw b})})},u.prototype.catch=function(M){return this.then(null,M)},u.prototype.then=function(M,x){if(typeof M!="function"&&this.state===a||typeof x!="function"&&this.state===s)return this;var b=new this.constructor(r);return this.state!==l?h(b,this.state===a?M:x,this.outcome):this.queue.push(new f(b,M,x)),b},f.prototype.callFulfilled=function(M){o.resolve(this.promise,M)},f.prototype.otherCallFulfilled=function(M){h(this.promise,this.onFulfilled,M)},f.prototype.callRejected=function(M){o.reject(this.promise,M)},f.prototype.otherCallRejected=function(M){h(this.promise,this.onRejected,M)},o.resolve=function(M,x){var b=y(m,x);if(b.status==="error")return o.reject(M,b.value);var T=b.value;if(T)p(M,T);else{M.state=a,M.outcome=x;for(var E=-1,D=M.queue.length;++E<D;)M.queue[E].callFulfilled(x)}return M},o.reject=function(M,x){M.state=s,M.outcome=x;for(var b=-1,T=M.queue.length;++b<T;)M.queue[b].callRejected(x);return M},u.resolve=function(M){return M instanceof this?M:o.resolve(new this(r),M)},u.reject=function(M){var x=new this(r);return o.reject(x,M)},u.all=function(M){var x=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=M.length,T=!1;if(!b)return this.resolve([]);for(var E=new Array(b),D=0,L=-1,z=new this(r);++L<b;)k(M[L],L);return z;function k(G,F){x.resolve(G).then(function(P){E[F]=P,++D!==b||T||(T=!0,o.resolve(z,E))},function(P){T||(T=!0,o.reject(z,P))})}},u.race=function(M){var x=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=M.length,T=!1;if(!b)return this.resolve([]);for(var E=-1,D=new this(r);++E<b;)L=M[E],x.resolve(L).then(function(z){T||(T=!0,o.resolve(D,z))},function(z){T||(T=!0,o.reject(D,z))});var L;return D}},{immediate:36}],38:[function(n,t,e){"use strict";var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,t,e){"use strict";var i=n("./zlib/deflate"),r=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/messages"),a=n("./zlib/zstream"),l=Object.prototype.toString,u=0,f=-1,h=0,m=8;function p(M){if(!(this instanceof p))return new p(M);this.options=r.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},M||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var b=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(b!==u)throw new Error(s[b]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var T;if(T=typeof x.dictionary=="string"?o.string2buf(x.dictionary):l.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(b=i.deflateSetDictionary(this.strm,T))!==u)throw new Error(s[b]);this._dict_set=!0}}function y(M,x){var b=new p(x);if(b.push(M,!0),b.err)throw b.msg||s[b.err];return b.result}p.prototype.push=function(M,x){var b,T,E=this.strm,D=this.options.chunkSize;if(this.ended)return!1;T=x===~~x?x:x===!0?4:0,typeof M=="string"?E.input=o.string2buf(M):l.call(M)==="[object ArrayBuffer]"?E.input=new Uint8Array(M):E.input=M,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new r.Buf8(D),E.next_out=0,E.avail_out=D),(b=i.deflate(E,T))!==1&&b!==u)return this.onEnd(b),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(r.shrinkBuf(E.output,E.next_out))):this.onData(r.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&b!==1);return T===4?(b=i.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===u):T!==2||(this.onEnd(u),!(E.avail_out=0))},p.prototype.onData=function(M){this.chunks.push(M)},p.prototype.onEnd=function(M){M===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg},e.Deflate=p,e.deflate=y,e.deflateRaw=function(M,x){return(x=x||{}).raw=!0,y(M,x)},e.gzip=function(M,x){return(x=x||{}).gzip=!0,y(M,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,t,e){"use strict";var i=n("./zlib/inflate"),r=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/constants"),a=n("./zlib/messages"),l=n("./zlib/zstream"),u=n("./zlib/gzheader"),f=Object.prototype.toString;function h(p){if(!(this instanceof h))return new h(p);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},p||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||p&&p.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var M=i.inflateInit2(this.strm,y.windowBits);if(M!==s.Z_OK)throw new Error(a[M]);this.header=new u,i.inflateGetHeader(this.strm,this.header)}function m(p,y){var M=new h(y);if(M.push(p,!0),M.err)throw M.msg||a[M.err];return M.result}h.prototype.push=function(p,y){var M,x,b,T,E,D,L=this.strm,z=this.options.chunkSize,k=this.options.dictionary,G=!1;if(this.ended)return!1;x=y===~~y?y:y===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof p=="string"?L.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?L.input=new Uint8Array(p):L.input=p,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new r.Buf8(z),L.next_out=0,L.avail_out=z),(M=i.inflate(L,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&k&&(D=typeof k=="string"?o.string2buf(k):f.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,M=i.inflateSetDictionary(this.strm,D)),M===s.Z_BUF_ERROR&&G===!0&&(M=s.Z_OK,G=!1),M!==s.Z_STREAM_END&&M!==s.Z_OK)return this.onEnd(M),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&M!==s.Z_STREAM_END&&(L.avail_in!==0||x!==s.Z_FINISH&&x!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(L.output,L.next_out),T=L.next_out-b,E=o.buf2string(L.output,b),L.next_out=T,L.avail_out=z-T,T&&r.arraySet(L.output,L.output,b,T,0),this.onData(E)):this.onData(r.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(G=!0)}while((0<L.avail_in||L.avail_out===0)&&M!==s.Z_STREAM_END);return M===s.Z_STREAM_END&&(x=s.Z_FINISH),x===s.Z_FINISH?(M=i.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===s.Z_OK):x!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(L.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},e.Inflate=h,e.inflate=m,e.inflateRaw=function(p,y){return(y=y||{}).raw=!0,m(p,y)},e.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,t,e){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";e.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var u in l)l.hasOwnProperty(u)&&(s[u]=l[u])}}return s},e.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var r={arraySet:function(s,a,l,u,f){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+u),f);else for(var h=0;h<u;h++)s[f+h]=a[l+h]},flattenChunks:function(s){var a,l,u,f,h,m;for(a=u=0,l=s.length;a<l;a++)u+=s[a].length;for(m=new Uint8Array(u),a=f=0,l=s.length;a<l;a++)h=s[a],m.set(h,f),f+=h.length;return m}},o={arraySet:function(s,a,l,u,f){for(var h=0;h<u;h++)s[f+h]=a[l+h]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},{}],42:[function(n,t,e){"use strict";var i=n("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(u,f){if(f<65537&&(u.subarray&&o||!u.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(u,f));for(var h="",m=0;m<f;m++)h+=String.fromCharCode(u[m]);return h}s[254]=s[254]=1,e.string2buf=function(u){var f,h,m,p,y,M=u.length,x=0;for(p=0;p<M;p++)(64512&(h=u.charCodeAt(p)))==55296&&p+1<M&&(64512&(m=u.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),x+=h<128?1:h<2048?2:h<65536?3:4;for(f=new i.Buf8(x),p=y=0;y<x;p++)(64512&(h=u.charCodeAt(p)))==55296&&p+1<M&&(64512&(m=u.charCodeAt(p+1)))==56320&&(h=65536+(h-55296<<10)+(m-56320),p++),h<128?f[y++]=h:(h<2048?f[y++]=192|h>>>6:(h<65536?f[y++]=224|h>>>12:(f[y++]=240|h>>>18,f[y++]=128|h>>>12&63),f[y++]=128|h>>>6&63),f[y++]=128|63&h);return f},e.buf2binstring=function(u){return l(u,u.length)},e.binstring2buf=function(u){for(var f=new i.Buf8(u.length),h=0,m=f.length;h<m;h++)f[h]=u.charCodeAt(h);return f},e.buf2string=function(u,f){var h,m,p,y,M=f||u.length,x=new Array(2*M);for(h=m=0;h<M;)if((p=u[h++])<128)x[m++]=p;else if(4<(y=s[p]))x[m++]=65533,h+=y-1;else{for(p&=y===2?31:y===3?15:7;1<y&&h<M;)p=p<<6|63&u[h++],y--;1<y?x[m++]=65533:p<65536?x[m++]=p:(p-=65536,x[m++]=55296|p>>10&1023,x[m++]=56320|1023&p)}return l(x,m)},e.utf8border=function(u,f){var h;for((f=f||u.length)>u.length&&(f=u.length),h=f-1;0<=h&&(192&u[h])==128;)h--;return h<0||h===0?f:h+s[u[h]]>f?h:f}},{"./common":41}],43:[function(n,t,e){"use strict";t.exports=function(i,r,o,s){for(var a=65535&i|0,l=i>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;l=l+(a=a+r[s++]|0)|0,--u;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(n,t,e){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,t,e){"use strict";var i=function(){for(var r,o=[],s=0;s<256;s++){r=s;for(var a=0;a<8;a++)r=1&r?3988292384^r>>>1:r>>>1;o[s]=r}return o}();t.exports=function(r,o,s,a){var l=i,u=a+s;r^=-1;for(var f=a;f<u;f++)r=r>>>8^l[255&(r^o[f])];return-1^r}},{}],46:[function(n,t,e){"use strict";var i,r=n("../utils/common"),o=n("./trees"),s=n("./adler32"),a=n("./crc32"),l=n("./messages"),u=0,f=4,h=0,m=-2,p=-1,y=4,M=2,x=8,b=9,T=286,E=30,D=19,L=2*T+1,z=15,k=3,G=258,F=G+k+1,P=42,N=113,S=1,q=2,oe=3,ee=4;function ge(O,Me){return O.msg=l[Me],Me}function le(O){return(O<<1)-(4<O?9:0)}function de(O){for(var Me=O.length;0<=--Me;)O[Me]=0}function J(O){var Me=O.state,j=Me.pending;j>O.avail_out&&(j=O.avail_out),j!==0&&(r.arraySet(O.output,Me.pending_buf,Me.pending_out,j,O.next_out),O.next_out+=j,Me.pending_out+=j,O.total_out+=j,O.avail_out-=j,Me.pending-=j,Me.pending===0&&(Me.pending_out=0))}function Q(O,Me){o._tr_flush_block(O,0<=O.block_start?O.block_start:-1,O.strstart-O.block_start,Me),O.block_start=O.strstart,J(O.strm)}function Ie(O,Me){O.pending_buf[O.pending++]=Me}function Ue(O,Me){O.pending_buf[O.pending++]=Me>>>8&255,O.pending_buf[O.pending++]=255&Me}function ke(O,Me){var j,Y,W=O.max_chain_length,ne=O.strstart,ve=O.prev_length,Ee=O.nice_match,ie=O.strstart>O.w_size-F?O.strstart-(O.w_size-F):0,U=O.window,R=O.w_mask,K=O.prev,_e=O.strstart+G,Te=U[ne+ve-1],ye=U[ne+ve];O.prev_length>=O.good_match&&(W>>=2),Ee>O.lookahead&&(Ee=O.lookahead);do if(U[(j=Me)+ve]===ye&&U[j+ve-1]===Te&&U[j]===U[ne]&&U[++j]===U[ne+1]){ne+=2,j++;do;while(U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&U[++ne]===U[++j]&&ne<_e);if(Y=G-(_e-ne),ne=_e-G,ve<Y){if(O.match_start=Me,Ee<=(ve=Y))break;Te=U[ne+ve-1],ye=U[ne+ve]}}while((Me=K[Me&R])>ie&&--W!=0);return ve<=O.lookahead?ve:O.lookahead}function Ce(O){var Me,j,Y,W,ne,ve,Ee,ie,U,R,K=O.w_size;do{if(W=O.window_size-O.lookahead-O.strstart,O.strstart>=K+(K-F)){for(r.arraySet(O.window,O.window,K,K,0),O.match_start-=K,O.strstart-=K,O.block_start-=K,Me=j=O.hash_size;Y=O.head[--Me],O.head[Me]=K<=Y?Y-K:0,--j;);for(Me=j=K;Y=O.prev[--Me],O.prev[Me]=K<=Y?Y-K:0,--j;);W+=K}if(O.strm.avail_in===0)break;if(ve=O.strm,Ee=O.window,ie=O.strstart+O.lookahead,U=W,R=void 0,R=ve.avail_in,U<R&&(R=U),j=R===0?0:(ve.avail_in-=R,r.arraySet(Ee,ve.input,ve.next_in,R,ie),ve.state.wrap===1?ve.adler=s(ve.adler,Ee,R,ie):ve.state.wrap===2&&(ve.adler=a(ve.adler,Ee,R,ie)),ve.next_in+=R,ve.total_in+=R,R),O.lookahead+=j,O.lookahead+O.insert>=k)for(ne=O.strstart-O.insert,O.ins_h=O.window[ne],O.ins_h=(O.ins_h<<O.hash_shift^O.window[ne+1])&O.hash_mask;O.insert&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[ne+k-1])&O.hash_mask,O.prev[ne&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=ne,ne++,O.insert--,!(O.lookahead+O.insert<k)););}while(O.lookahead<F&&O.strm.avail_in!==0)}function He(O,Me){for(var j,Y;;){if(O.lookahead<F){if(Ce(O),O.lookahead<F&&Me===u)return S;if(O.lookahead===0)break}if(j=0,O.lookahead>=k&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),j!==0&&O.strstart-j<=O.w_size-F&&(O.match_length=ke(O,j)),O.match_length>=k)if(Y=o._tr_tally(O,O.strstart-O.match_start,O.match_length-k),O.lookahead-=O.match_length,O.match_length<=O.max_lazy_match&&O.lookahead>=k){for(O.match_length--;O.strstart++,O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart,--O.match_length!=0;);O.strstart++}else O.strstart+=O.match_length,O.match_length=0,O.ins_h=O.window[O.strstart],O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+1])&O.hash_mask;else Y=o._tr_tally(O,0,O.window[O.strstart]),O.lookahead--,O.strstart++;if(Y&&(Q(O,!1),O.strm.avail_out===0))return S}return O.insert=O.strstart<k-1?O.strstart:k-1,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):O.last_lit&&(Q(O,!1),O.strm.avail_out===0)?S:q}function $e(O,Me){for(var j,Y,W;;){if(O.lookahead<F){if(Ce(O),O.lookahead<F&&Me===u)return S;if(O.lookahead===0)break}if(j=0,O.lookahead>=k&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),O.prev_length=O.match_length,O.prev_match=O.match_start,O.match_length=k-1,j!==0&&O.prev_length<O.max_lazy_match&&O.strstart-j<=O.w_size-F&&(O.match_length=ke(O,j),O.match_length<=5&&(O.strategy===1||O.match_length===k&&4096<O.strstart-O.match_start)&&(O.match_length=k-1)),O.prev_length>=k&&O.match_length<=O.prev_length){for(W=O.strstart+O.lookahead-k,Y=o._tr_tally(O,O.strstart-1-O.prev_match,O.prev_length-k),O.lookahead-=O.prev_length-1,O.prev_length-=2;++O.strstart<=W&&(O.ins_h=(O.ins_h<<O.hash_shift^O.window[O.strstart+k-1])&O.hash_mask,j=O.prev[O.strstart&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=O.strstart),--O.prev_length!=0;);if(O.match_available=0,O.match_length=k-1,O.strstart++,Y&&(Q(O,!1),O.strm.avail_out===0))return S}else if(O.match_available){if((Y=o._tr_tally(O,0,O.window[O.strstart-1]))&&Q(O,!1),O.strstart++,O.lookahead--,O.strm.avail_out===0)return S}else O.match_available=1,O.strstart++,O.lookahead--}return O.match_available&&(Y=o._tr_tally(O,0,O.window[O.strstart-1]),O.match_available=0),O.insert=O.strstart<k-1?O.strstart:k-1,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):O.last_lit&&(Q(O,!1),O.strm.avail_out===0)?S:q}function Ve(O,Me,j,Y,W){this.good_length=O,this.max_lazy=Me,this.nice_length=j,this.max_chain=Y,this.func=W}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*L),this.dyn_dtree=new r.Buf16(2*(2*E+1)),this.bl_tree=new r.Buf16(2*(2*D+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(z+1),this.heap=new r.Buf16(2*T+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*T+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pt(O){var Me;return O&&O.state?(O.total_in=O.total_out=0,O.data_type=M,(Me=O.state).pending=0,Me.pending_out=0,Me.wrap<0&&(Me.wrap=-Me.wrap),Me.status=Me.wrap?P:N,O.adler=Me.wrap===2?0:1,Me.last_flush=u,o._tr_init(Me),h):ge(O,m)}function Ut(O){var Me=pt(O);return Me===h&&function(j){j.window_size=2*j.w_size,de(j.head),j.max_lazy_match=i[j.level].max_lazy,j.good_match=i[j.level].good_length,j.nice_match=i[j.level].nice_length,j.max_chain_length=i[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=k-1,j.match_available=0,j.ins_h=0}(O.state),Me}function Dn(O,Me,j,Y,W,ne){if(!O)return m;var ve=1;if(Me===p&&(Me=6),Y<0?(ve=0,Y=-Y):15<Y&&(ve=2,Y-=16),W<1||b<W||j!==x||Y<8||15<Y||Me<0||9<Me||ne<0||y<ne)return ge(O,m);Y===8&&(Y=9);var Ee=new mt;return(O.state=Ee).strm=O,Ee.wrap=ve,Ee.gzhead=null,Ee.w_bits=Y,Ee.w_size=1<<Ee.w_bits,Ee.w_mask=Ee.w_size-1,Ee.hash_bits=W+7,Ee.hash_size=1<<Ee.hash_bits,Ee.hash_mask=Ee.hash_size-1,Ee.hash_shift=~~((Ee.hash_bits+k-1)/k),Ee.window=new r.Buf8(2*Ee.w_size),Ee.head=new r.Buf16(Ee.hash_size),Ee.prev=new r.Buf16(Ee.w_size),Ee.lit_bufsize=1<<W+6,Ee.pending_buf_size=4*Ee.lit_bufsize,Ee.pending_buf=new r.Buf8(Ee.pending_buf_size),Ee.d_buf=1*Ee.lit_bufsize,Ee.l_buf=3*Ee.lit_bufsize,Ee.level=Me,Ee.strategy=ne,Ee.method=j,Ut(O)}i=[new Ve(0,0,0,0,function(O,Me){var j=65535;for(j>O.pending_buf_size-5&&(j=O.pending_buf_size-5);;){if(O.lookahead<=1){if(Ce(O),O.lookahead===0&&Me===u)return S;if(O.lookahead===0)break}O.strstart+=O.lookahead,O.lookahead=0;var Y=O.block_start+j;if((O.strstart===0||O.strstart>=Y)&&(O.lookahead=O.strstart-Y,O.strstart=Y,Q(O,!1),O.strm.avail_out===0)||O.strstart-O.block_start>=O.w_size-F&&(Q(O,!1),O.strm.avail_out===0))return S}return O.insert=0,Me===f?(Q(O,!0),O.strm.avail_out===0?oe:ee):(O.strstart>O.block_start&&(Q(O,!1),O.strm.avail_out),S)}),new Ve(4,4,8,4,He),new Ve(4,5,16,8,He),new Ve(4,6,32,32,He),new Ve(4,4,16,16,$e),new Ve(8,16,32,32,$e),new Ve(8,16,128,128,$e),new Ve(8,32,128,256,$e),new Ve(32,128,258,1024,$e),new Ve(32,258,258,4096,$e)],e.deflateInit=function(O,Me){return Dn(O,Me,x,15,8,0)},e.deflateInit2=Dn,e.deflateReset=Ut,e.deflateResetKeep=pt,e.deflateSetHeader=function(O,Me){return O&&O.state?O.state.wrap!==2?m:(O.state.gzhead=Me,h):m},e.deflate=function(O,Me){var j,Y,W,ne;if(!O||!O.state||5<Me||Me<0)return O?ge(O,m):m;if(Y=O.state,!O.output||!O.input&&O.avail_in!==0||Y.status===666&&Me!==f)return ge(O,O.avail_out===0?-5:m);if(Y.strm=O,j=Y.last_flush,Y.last_flush=Me,Y.status===P)if(Y.wrap===2)O.adler=0,Ie(Y,31),Ie(Y,139),Ie(Y,8),Y.gzhead?(Ie(Y,(Y.gzhead.text?1:0)+(Y.gzhead.hcrc?2:0)+(Y.gzhead.extra?4:0)+(Y.gzhead.name?8:0)+(Y.gzhead.comment?16:0)),Ie(Y,255&Y.gzhead.time),Ie(Y,Y.gzhead.time>>8&255),Ie(Y,Y.gzhead.time>>16&255),Ie(Y,Y.gzhead.time>>24&255),Ie(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),Ie(Y,255&Y.gzhead.os),Y.gzhead.extra&&Y.gzhead.extra.length&&(Ie(Y,255&Y.gzhead.extra.length),Ie(Y,Y.gzhead.extra.length>>8&255)),Y.gzhead.hcrc&&(O.adler=a(O.adler,Y.pending_buf,Y.pending,0)),Y.gzindex=0,Y.status=69):(Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,0),Ie(Y,Y.level===9?2:2<=Y.strategy||Y.level<2?4:0),Ie(Y,3),Y.status=N);else{var ve=x+(Y.w_bits-8<<4)<<8;ve|=(2<=Y.strategy||Y.level<2?0:Y.level<6?1:Y.level===6?2:3)<<6,Y.strstart!==0&&(ve|=32),ve+=31-ve%31,Y.status=N,Ue(Y,ve),Y.strstart!==0&&(Ue(Y,O.adler>>>16),Ue(Y,65535&O.adler)),O.adler=1}if(Y.status===69)if(Y.gzhead.extra){for(W=Y.pending;Y.gzindex<(65535&Y.gzhead.extra.length)&&(Y.pending!==Y.pending_buf_size||(Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),J(O),W=Y.pending,Y.pending!==Y.pending_buf_size));)Ie(Y,255&Y.gzhead.extra[Y.gzindex]),Y.gzindex++;Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),Y.gzindex===Y.gzhead.extra.length&&(Y.gzindex=0,Y.status=73)}else Y.status=73;if(Y.status===73)if(Y.gzhead.name){W=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),J(O),W=Y.pending,Y.pending===Y.pending_buf_size)){ne=1;break}ne=Y.gzindex<Y.gzhead.name.length?255&Y.gzhead.name.charCodeAt(Y.gzindex++):0,Ie(Y,ne)}while(ne!==0);Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),ne===0&&(Y.gzindex=0,Y.status=91)}else Y.status=91;if(Y.status===91)if(Y.gzhead.comment){W=Y.pending;do{if(Y.pending===Y.pending_buf_size&&(Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),J(O),W=Y.pending,Y.pending===Y.pending_buf_size)){ne=1;break}ne=Y.gzindex<Y.gzhead.comment.length?255&Y.gzhead.comment.charCodeAt(Y.gzindex++):0,Ie(Y,ne)}while(ne!==0);Y.gzhead.hcrc&&Y.pending>W&&(O.adler=a(O.adler,Y.pending_buf,Y.pending-W,W)),ne===0&&(Y.status=103)}else Y.status=103;if(Y.status===103&&(Y.gzhead.hcrc?(Y.pending+2>Y.pending_buf_size&&J(O),Y.pending+2<=Y.pending_buf_size&&(Ie(Y,255&O.adler),Ie(Y,O.adler>>8&255),O.adler=0,Y.status=N)):Y.status=N),Y.pending!==0){if(J(O),O.avail_out===0)return Y.last_flush=-1,h}else if(O.avail_in===0&&le(Me)<=le(j)&&Me!==f)return ge(O,-5);if(Y.status===666&&O.avail_in!==0)return ge(O,-5);if(O.avail_in!==0||Y.lookahead!==0||Me!==u&&Y.status!==666){var Ee=Y.strategy===2?function(ie,U){for(var R;;){if(ie.lookahead===0&&(Ce(ie),ie.lookahead===0)){if(U===u)return S;break}if(ie.match_length=0,R=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++,R&&(Q(ie,!1),ie.strm.avail_out===0))return S}return ie.insert=0,U===f?(Q(ie,!0),ie.strm.avail_out===0?oe:ee):ie.last_lit&&(Q(ie,!1),ie.strm.avail_out===0)?S:q}(Y,Me):Y.strategy===3?function(ie,U){for(var R,K,_e,Te,ye=ie.window;;){if(ie.lookahead<=G){if(Ce(ie),ie.lookahead<=G&&U===u)return S;if(ie.lookahead===0)break}if(ie.match_length=0,ie.lookahead>=k&&0<ie.strstart&&(K=ye[_e=ie.strstart-1])===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]){Te=ie.strstart+G;do;while(K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&K===ye[++_e]&&_e<Te);ie.match_length=G-(Te-_e),ie.match_length>ie.lookahead&&(ie.match_length=ie.lookahead)}if(ie.match_length>=k?(R=o._tr_tally(ie,1,ie.match_length-k),ie.lookahead-=ie.match_length,ie.strstart+=ie.match_length,ie.match_length=0):(R=o._tr_tally(ie,0,ie.window[ie.strstart]),ie.lookahead--,ie.strstart++),R&&(Q(ie,!1),ie.strm.avail_out===0))return S}return ie.insert=0,U===f?(Q(ie,!0),ie.strm.avail_out===0?oe:ee):ie.last_lit&&(Q(ie,!1),ie.strm.avail_out===0)?S:q}(Y,Me):i[Y.level].func(Y,Me);if(Ee!==oe&&Ee!==ee||(Y.status=666),Ee===S||Ee===oe)return O.avail_out===0&&(Y.last_flush=-1),h;if(Ee===q&&(Me===1?o._tr_align(Y):Me!==5&&(o._tr_stored_block(Y,0,0,!1),Me===3&&(de(Y.head),Y.lookahead===0&&(Y.strstart=0,Y.block_start=0,Y.insert=0))),J(O),O.avail_out===0))return Y.last_flush=-1,h}return Me!==f?h:Y.wrap<=0?1:(Y.wrap===2?(Ie(Y,255&O.adler),Ie(Y,O.adler>>8&255),Ie(Y,O.adler>>16&255),Ie(Y,O.adler>>24&255),Ie(Y,255&O.total_in),Ie(Y,O.total_in>>8&255),Ie(Y,O.total_in>>16&255),Ie(Y,O.total_in>>24&255)):(Ue(Y,O.adler>>>16),Ue(Y,65535&O.adler)),J(O),0<Y.wrap&&(Y.wrap=-Y.wrap),Y.pending!==0?h:1)},e.deflateEnd=function(O){var Me;return O&&O.state?(Me=O.state.status)!==P&&Me!==69&&Me!==73&&Me!==91&&Me!==103&&Me!==N&&Me!==666?ge(O,m):(O.state=null,Me===N?ge(O,-3):h):m},e.deflateSetDictionary=function(O,Me){var j,Y,W,ne,ve,Ee,ie,U,R=Me.length;if(!O||!O.state||(ne=(j=O.state).wrap)===2||ne===1&&j.status!==P||j.lookahead)return m;for(ne===1&&(O.adler=s(O.adler,Me,R,0)),j.wrap=0,R>=j.w_size&&(ne===0&&(de(j.head),j.strstart=0,j.block_start=0,j.insert=0),U=new r.Buf8(j.w_size),r.arraySet(U,Me,R-j.w_size,j.w_size,0),Me=U,R=j.w_size),ve=O.avail_in,Ee=O.next_in,ie=O.input,O.avail_in=R,O.next_in=0,O.input=Me,Ce(j);j.lookahead>=k;){for(Y=j.strstart,W=j.lookahead-(k-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[Y+k-1])&j.hash_mask,j.prev[Y&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=Y,Y++,--W;);j.strstart=Y,j.lookahead=k-1,Ce(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=k-1,j.match_available=0,O.next_in=Ee,O.input=ie,O.avail_in=ve,j.wrap=ne,h},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,t,e){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,t,e){"use strict";t.exports=function(i,r){var o,s,a,l,u,f,h,m,p,y,M,x,b,T,E,D,L,z,k,G,F,P,N,S,q;o=i.state,s=i.next_in,S=i.input,a=s+(i.avail_in-5),l=i.next_out,q=i.output,u=l-(r-i.avail_out),f=l+(i.avail_out-257),h=o.dmax,m=o.wsize,p=o.whave,y=o.wnext,M=o.window,x=o.hold,b=o.bits,T=o.lencode,E=o.distcode,D=(1<<o.lenbits)-1,L=(1<<o.distbits)-1;e:do{b<15&&(x+=S[s++]<<b,b+=8,x+=S[s++]<<b,b+=8),z=T[x&D];t:for(;;){if(x>>>=k=z>>>24,b-=k,(k=z>>>16&255)===0)q[l++]=65535&z;else{if(!(16&k)){if(!(64&k)){z=T[(65535&z)+(x&(1<<k)-1)];continue t}if(32&k){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}G=65535&z,(k&=15)&&(b<k&&(x+=S[s++]<<b,b+=8),G+=x&(1<<k)-1,x>>>=k,b-=k),b<15&&(x+=S[s++]<<b,b+=8,x+=S[s++]<<b,b+=8),z=E[x&L];n:for(;;){if(x>>>=k=z>>>24,b-=k,!(16&(k=z>>>16&255))){if(!(64&k)){z=E[(65535&z)+(x&(1<<k)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(F=65535&z,b<(k&=15)&&(x+=S[s++]<<b,(b+=8)<k&&(x+=S[s++]<<b,b+=8)),h<(F+=x&(1<<k)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(x>>>=k,b-=k,(k=l-u)<F){if(p<(k=F-k)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(N=M,(P=0)===y){if(P+=m-k,k<G){for(G-=k;q[l++]=M[P++],--k;);P=l-F,N=q}}else if(y<k){if(P+=m+y-k,(k-=y)<G){for(G-=k;q[l++]=M[P++],--k;);if(P=0,y<G){for(G-=k=y;q[l++]=M[P++],--k;);P=l-F,N=q}}}else if(P+=y-k,k<G){for(G-=k;q[l++]=M[P++],--k;);P=l-F,N=q}for(;2<G;)q[l++]=N[P++],q[l++]=N[P++],q[l++]=N[P++],G-=3;G&&(q[l++]=N[P++],1<G&&(q[l++]=N[P++]))}else{for(P=l-F;q[l++]=q[P++],q[l++]=q[P++],q[l++]=q[P++],2<(G-=3););G&&(q[l++]=q[P++],1<G&&(q[l++]=q[P++]))}break}}break}}while(s<a&&l<f);s-=G=b>>3,x&=(1<<(b-=G<<3))-1,i.next_in=s,i.next_out=l,i.avail_in=s<a?a-s+5:5-(s-a),i.avail_out=l<f?f-l+257:257-(l-f),o.hold=x,o.bits=b}},{}],49:[function(n,t,e){"use strict";var i=n("../utils/common"),r=n("./adler32"),o=n("./crc32"),s=n("./inffast"),a=n("./inftrees"),l=1,u=2,f=0,h=-2,m=1,p=852,y=592;function M(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(P){var N;return P&&P.state?(N=P.state,P.total_in=P.total_out=N.total=0,P.msg="",N.wrap&&(P.adler=1&N.wrap),N.mode=m,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new i.Buf32(p),N.distcode=N.distdyn=new i.Buf32(y),N.sane=1,N.back=-1,f):h}function T(P){var N;return P&&P.state?((N=P.state).wsize=0,N.whave=0,N.wnext=0,b(P)):h}function E(P,N){var S,q;return P&&P.state?(q=P.state,N<0?(S=0,N=-N):(S=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?h:(q.window!==null&&q.wbits!==N&&(q.window=null),q.wrap=S,q.wbits=N,T(P))):h}function D(P,N){var S,q;return P?(q=new x,(P.state=q).window=null,(S=E(P,N))!==f&&(P.state=null),S):h}var L,z,k=!0;function G(P){if(k){var N;for(L=new i.Buf32(512),z=new i.Buf32(32),N=0;N<144;)P.lens[N++]=8;for(;N<256;)P.lens[N++]=9;for(;N<280;)P.lens[N++]=7;for(;N<288;)P.lens[N++]=8;for(a(l,P.lens,0,288,L,0,P.work,{bits:9}),N=0;N<32;)P.lens[N++]=5;a(u,P.lens,0,32,z,0,P.work,{bits:5}),k=!1}P.lencode=L,P.lenbits=9,P.distcode=z,P.distbits=5}function F(P,N,S,q){var oe,ee=P.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new i.Buf8(ee.wsize)),q>=ee.wsize?(i.arraySet(ee.window,N,S-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(q<(oe=ee.wsize-ee.wnext)&&(oe=q),i.arraySet(ee.window,N,S-q,oe,ee.wnext),(q-=oe)?(i.arraySet(ee.window,N,S-q,q,0),ee.wnext=q,ee.whave=ee.wsize):(ee.wnext+=oe,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=oe))),0}e.inflateReset=T,e.inflateReset2=E,e.inflateResetKeep=b,e.inflateInit=function(P){return D(P,15)},e.inflateInit2=D,e.inflate=function(P,N){var S,q,oe,ee,ge,le,de,J,Q,Ie,Ue,ke,Ce,He,$e,Ve,mt,pt,Ut,Dn,O,Me,j,Y,W=0,ne=new i.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return h;(S=P.state).mode===12&&(S.mode=13),ge=P.next_out,oe=P.output,de=P.avail_out,ee=P.next_in,q=P.input,le=P.avail_in,J=S.hold,Q=S.bits,Ie=le,Ue=de,Me=f;e:for(;;)switch(S.mode){case m:if(S.wrap===0){S.mode=13;break}for(;Q<16;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(2&S.wrap&&J===35615){ne[S.check=0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0),Q=J=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&J)<<8)+(J>>8))%31){P.msg="incorrect header check",S.mode=30;break}if((15&J)!=8){P.msg="unknown compression method",S.mode=30;break}if(Q-=4,O=8+(15&(J>>>=4)),S.wbits===0)S.wbits=O;else if(O>S.wbits){P.msg="invalid window size",S.mode=30;break}S.dmax=1<<O,P.adler=S.check=1,S.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(S.flags=J,(255&S.flags)!=8){P.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){P.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=J>>8&1),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0)),Q=J=0,S.mode=3;case 3:for(;Q<32;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}S.head&&(S.head.time=J),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,ne[2]=J>>>16&255,ne[3]=J>>>24&255,S.check=o(S.check,ne,4,0)),Q=J=0,S.mode=4;case 4:for(;Q<16;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}S.head&&(S.head.xflags=255&J,S.head.os=J>>8),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0)),Q=J=0,S.mode=5;case 5:if(1024&S.flags){for(;Q<16;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}S.length=J,S.head&&(S.head.extra_len=J),512&S.flags&&(ne[0]=255&J,ne[1]=J>>>8&255,S.check=o(S.check,ne,2,0)),Q=J=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(le<(ke=S.length)&&(ke=le),ke&&(S.head&&(O=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),i.arraySet(S.head.extra,q,ee,ke,O)),512&S.flags&&(S.check=o(S.check,q,ke,ee)),le-=ke,ee+=ke,S.length-=ke),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(le===0)break e;for(ke=0;O=q[ee+ke++],S.head&&O&&S.length<65536&&(S.head.name+=String.fromCharCode(O)),O&&ke<le;);if(512&S.flags&&(S.check=o(S.check,q,ke,ee)),le-=ke,ee+=ke,O)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(le===0)break e;for(ke=0;O=q[ee+ke++],S.head&&O&&S.length<65536&&(S.head.comment+=String.fromCharCode(O)),O&&ke<le;);if(512&S.flags&&(S.check=o(S.check,q,ke,ee)),le-=ke,ee+=ke,O)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;Q<16;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(J!==(65535&S.check)){P.msg="header crc mismatch",S.mode=30;break}Q=J=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),P.adler=S.check=0,S.mode=12;break;case 10:for(;Q<32;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}P.adler=S.check=M(J),Q=J=0,S.mode=11;case 11:if(S.havedict===0)return P.next_out=ge,P.avail_out=de,P.next_in=ee,P.avail_in=le,S.hold=J,S.bits=Q,2;P.adler=S.check=1,S.mode=12;case 12:if(N===5||N===6)break e;case 13:if(S.last){J>>>=7&Q,Q-=7&Q,S.mode=27;break}for(;Q<3;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}switch(S.last=1&J,Q-=1,3&(J>>>=1)){case 0:S.mode=14;break;case 1:if(G(S),S.mode=20,N!==6)break;J>>>=2,Q-=2;break e;case 2:S.mode=17;break;case 3:P.msg="invalid block type",S.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){P.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&J,Q=J=0,S.mode=15,N===6)break e;case 15:S.mode=16;case 16:if(ke=S.length){if(le<ke&&(ke=le),de<ke&&(ke=de),ke===0)break e;i.arraySet(oe,q,ee,ke,ge),le-=ke,ee+=ke,de-=ke,ge+=ke,S.length-=ke;break}S.mode=12;break;case 17:for(;Q<14;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(S.nlen=257+(31&J),J>>>=5,Q-=5,S.ndist=1+(31&J),J>>>=5,Q-=5,S.ncode=4+(15&J),J>>>=4,Q-=4,286<S.nlen||30<S.ndist){P.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;Q<3;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}S.lens[ve[S.have++]]=7&J,J>>>=3,Q-=3}for(;S.have<19;)S.lens[ve[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,j={bits:S.lenbits},Me=a(0,S.lens,0,19,S.lencode,0,S.work,j),S.lenbits=j.bits,Me){P.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Ve=(W=S.lencode[J&(1<<S.lenbits)-1])>>>16&255,mt=65535&W,!(($e=W>>>24)<=Q);){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(mt<16)J>>>=$e,Q-=$e,S.lens[S.have++]=mt;else{if(mt===16){for(Y=$e+2;Q<Y;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(J>>>=$e,Q-=$e,S.have===0){P.msg="invalid bit length repeat",S.mode=30;break}O=S.lens[S.have-1],ke=3+(3&J),J>>>=2,Q-=2}else if(mt===17){for(Y=$e+3;Q<Y;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}Q-=$e,O=0,ke=3+(7&(J>>>=$e)),J>>>=3,Q-=3}else{for(Y=$e+7;Q<Y;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}Q-=$e,O=0,ke=11+(127&(J>>>=$e)),J>>>=7,Q-=7}if(S.have+ke>S.nlen+S.ndist){P.msg="invalid bit length repeat",S.mode=30;break}for(;ke--;)S.lens[S.have++]=O}}if(S.mode===30)break;if(S.lens[256]===0){P.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,j={bits:S.lenbits},Me=a(l,S.lens,0,S.nlen,S.lencode,0,S.work,j),S.lenbits=j.bits,Me){P.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,j={bits:S.distbits},Me=a(u,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,j),S.distbits=j.bits,Me){P.msg="invalid distances set",S.mode=30;break}if(S.mode=20,N===6)break e;case 20:S.mode=21;case 21:if(6<=le&&258<=de){P.next_out=ge,P.avail_out=de,P.next_in=ee,P.avail_in=le,S.hold=J,S.bits=Q,s(P,Ue),ge=P.next_out,oe=P.output,de=P.avail_out,ee=P.next_in,q=P.input,le=P.avail_in,J=S.hold,Q=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Ve=(W=S.lencode[J&(1<<S.lenbits)-1])>>>16&255,mt=65535&W,!(($e=W>>>24)<=Q);){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(Ve&&!(240&Ve)){for(pt=$e,Ut=Ve,Dn=mt;Ve=(W=S.lencode[Dn+((J&(1<<pt+Ut)-1)>>pt)])>>>16&255,mt=65535&W,!(pt+($e=W>>>24)<=Q);){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}J>>>=pt,Q-=pt,S.back+=pt}if(J>>>=$e,Q-=$e,S.back+=$e,S.length=mt,Ve===0){S.mode=26;break}if(32&Ve){S.back=-1,S.mode=12;break}if(64&Ve){P.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Ve,S.mode=22;case 22:if(S.extra){for(Y=S.extra;Q<Y;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}S.length+=J&(1<<S.extra)-1,J>>>=S.extra,Q-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Ve=(W=S.distcode[J&(1<<S.distbits)-1])>>>16&255,mt=65535&W,!(($e=W>>>24)<=Q);){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(!(240&Ve)){for(pt=$e,Ut=Ve,Dn=mt;Ve=(W=S.distcode[Dn+((J&(1<<pt+Ut)-1)>>pt)])>>>16&255,mt=65535&W,!(pt+($e=W>>>24)<=Q);){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}J>>>=pt,Q-=pt,S.back+=pt}if(J>>>=$e,Q-=$e,S.back+=$e,64&Ve){P.msg="invalid distance code",S.mode=30;break}S.offset=mt,S.extra=15&Ve,S.mode=24;case 24:if(S.extra){for(Y=S.extra;Q<Y;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}S.offset+=J&(1<<S.extra)-1,J>>>=S.extra,Q-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){P.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(de===0)break e;if(ke=Ue-de,S.offset>ke){if((ke=S.offset-ke)>S.whave&&S.sane){P.msg="invalid distance too far back",S.mode=30;break}Ce=ke>S.wnext?(ke-=S.wnext,S.wsize-ke):S.wnext-ke,ke>S.length&&(ke=S.length),He=S.window}else He=oe,Ce=ge-S.offset,ke=S.length;for(de<ke&&(ke=de),de-=ke,S.length-=ke;oe[ge++]=He[Ce++],--ke;);S.length===0&&(S.mode=21);break;case 26:if(de===0)break e;oe[ge++]=S.length,de--,S.mode=21;break;case 27:if(S.wrap){for(;Q<32;){if(le===0)break e;le--,J|=q[ee++]<<Q,Q+=8}if(Ue-=de,P.total_out+=Ue,S.total+=Ue,Ue&&(P.adler=S.check=S.flags?o(S.check,oe,Ue,ge-Ue):r(S.check,oe,Ue,ge-Ue)),Ue=de,(S.flags?J:M(J))!==S.check){P.msg="incorrect data check",S.mode=30;break}Q=J=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;Q<32;){if(le===0)break e;le--,J+=q[ee++]<<Q,Q+=8}if(J!==(4294967295&S.total)){P.msg="incorrect length check",S.mode=30;break}Q=J=0}S.mode=29;case 29:Me=1;break e;case 30:Me=-3;break e;case 31:return-4;case 32:default:return h}return P.next_out=ge,P.avail_out=de,P.next_in=ee,P.avail_in=le,S.hold=J,S.bits=Q,(S.wsize||Ue!==P.avail_out&&S.mode<30&&(S.mode<27||N!==4))&&F(P,P.output,P.next_out,Ue-P.avail_out)?(S.mode=31,-4):(Ie-=P.avail_in,Ue-=P.avail_out,P.total_in+=Ie,P.total_out+=Ue,S.total+=Ue,S.wrap&&Ue&&(P.adler=S.check=S.flags?o(S.check,oe,Ue,P.next_out-Ue):r(S.check,oe,Ue,P.next_out-Ue)),P.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(Ie==0&&Ue===0||N===4)&&Me===f&&(Me=-5),Me)},e.inflateEnd=function(P){if(!P||!P.state)return h;var N=P.state;return N.window&&(N.window=null),P.state=null,f},e.inflateGetHeader=function(P,N){var S;return P&&P.state&&2&(S=P.state).wrap?((S.head=N).done=!1,f):h},e.inflateSetDictionary=function(P,N){var S,q=N.length;return P&&P.state?(S=P.state).wrap!==0&&S.mode!==11?h:S.mode===11&&r(1,N,q,0)!==S.check?-3:F(P,N,q,q)?(S.mode=31,-4):(S.havedict=1,f):h},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,t,e){"use strict";var i=n("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(l,u,f,h,m,p,y,M){var x,b,T,E,D,L,z,k,G,F=M.bits,P=0,N=0,S=0,q=0,oe=0,ee=0,ge=0,le=0,de=0,J=0,Q=null,Ie=0,Ue=new i.Buf16(16),ke=new i.Buf16(16),Ce=null,He=0;for(P=0;P<=15;P++)Ue[P]=0;for(N=0;N<h;N++)Ue[u[f+N]]++;for(oe=F,q=15;1<=q&&Ue[q]===0;q--);if(q<oe&&(oe=q),q===0)return m[p++]=20971520,m[p++]=20971520,M.bits=1,0;for(S=1;S<q&&Ue[S]===0;S++);for(oe<S&&(oe=S),P=le=1;P<=15;P++)if(le<<=1,(le-=Ue[P])<0)return-1;if(0<le&&(l===0||q!==1))return-1;for(ke[1]=0,P=1;P<15;P++)ke[P+1]=ke[P]+Ue[P];for(N=0;N<h;N++)u[f+N]!==0&&(y[ke[u[f+N]]++]=N);if(L=l===0?(Q=Ce=y,19):l===1?(Q=r,Ie-=257,Ce=o,He-=257,256):(Q=s,Ce=a,-1),P=S,D=p,ge=N=J=0,T=-1,E=(de=1<<(ee=oe))-1,l===1&&852<de||l===2&&592<de)return 1;for(;;){for(z=P-ge,G=y[N]<L?(k=0,y[N]):y[N]>L?(k=Ce[He+y[N]],Q[Ie+y[N]]):(k=96,0),x=1<<P-ge,S=b=1<<ee;m[D+(J>>ge)+(b-=x)]=z<<24|k<<16|G|0,b!==0;);for(x=1<<P-1;J&x;)x>>=1;if(x!==0?(J&=x-1,J+=x):J=0,N++,--Ue[P]==0){if(P===q)break;P=u[f+y[N]]}if(oe<P&&(J&E)!==T){for(ge===0&&(ge=oe),D+=S,le=1<<(ee=P-ge);ee+ge<q&&!((le-=Ue[ee+ge])<=0);)ee++,le<<=1;if(de+=1<<ee,l===1&&852<de||l===2&&592<de)return 1;m[T=J&E]=oe<<24|ee<<16|D-p|0}}return J!==0&&(m[D+J]=P-ge<<24|64<<16|0),M.bits=oe,0}},{"../utils/common":41}],51:[function(n,t,e){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,t,e){"use strict";var i=n("../utils/common"),r=0,o=1;function s(W){for(var ne=W.length;0<=--ne;)W[ne]=0}var a=0,l=29,u=256,f=u+1+l,h=30,m=19,p=2*f+1,y=15,M=16,x=7,b=256,T=16,E=17,D=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(f+2));s(F);var P=new Array(2*h);s(P);var N=new Array(512);s(N);var S=new Array(256);s(S);var q=new Array(l);s(q);var oe,ee,ge,le=new Array(h);function de(W,ne,ve,Ee,ie){this.static_tree=W,this.extra_bits=ne,this.extra_base=ve,this.elems=Ee,this.max_length=ie,this.has_stree=W&&W.length}function J(W,ne){this.dyn_tree=W,this.max_code=0,this.stat_desc=ne}function Q(W){return W<256?N[W]:N[256+(W>>>7)]}function Ie(W,ne){W.pending_buf[W.pending++]=255&ne,W.pending_buf[W.pending++]=ne>>>8&255}function Ue(W,ne,ve){W.bi_valid>M-ve?(W.bi_buf|=ne<<W.bi_valid&65535,Ie(W,W.bi_buf),W.bi_buf=ne>>M-W.bi_valid,W.bi_valid+=ve-M):(W.bi_buf|=ne<<W.bi_valid&65535,W.bi_valid+=ve)}function ke(W,ne,ve){Ue(W,ve[2*ne],ve[2*ne+1])}function Ce(W,ne){for(var ve=0;ve|=1&W,W>>>=1,ve<<=1,0<--ne;);return ve>>>1}function He(W,ne,ve){var Ee,ie,U=new Array(y+1),R=0;for(Ee=1;Ee<=y;Ee++)U[Ee]=R=R+ve[Ee-1]<<1;for(ie=0;ie<=ne;ie++){var K=W[2*ie+1];K!==0&&(W[2*ie]=Ce(U[K]++,K))}}function $e(W){var ne;for(ne=0;ne<f;ne++)W.dyn_ltree[2*ne]=0;for(ne=0;ne<h;ne++)W.dyn_dtree[2*ne]=0;for(ne=0;ne<m;ne++)W.bl_tree[2*ne]=0;W.dyn_ltree[2*b]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function Ve(W){8<W.bi_valid?Ie(W,W.bi_buf):0<W.bi_valid&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function mt(W,ne,ve,Ee){var ie=2*ne,U=2*ve;return W[ie]<W[U]||W[ie]===W[U]&&Ee[ne]<=Ee[ve]}function pt(W,ne,ve){for(var Ee=W.heap[ve],ie=ve<<1;ie<=W.heap_len&&(ie<W.heap_len&&mt(ne,W.heap[ie+1],W.heap[ie],W.depth)&&ie++,!mt(ne,Ee,W.heap[ie],W.depth));)W.heap[ve]=W.heap[ie],ve=ie,ie<<=1;W.heap[ve]=Ee}function Ut(W,ne,ve){var Ee,ie,U,R,K=0;if(W.last_lit!==0)for(;Ee=W.pending_buf[W.d_buf+2*K]<<8|W.pending_buf[W.d_buf+2*K+1],ie=W.pending_buf[W.l_buf+K],K++,Ee===0?ke(W,ie,ne):(ke(W,(U=S[ie])+u+1,ne),(R=L[U])!==0&&Ue(W,ie-=q[U],R),ke(W,U=Q(--Ee),ve),(R=z[U])!==0&&Ue(W,Ee-=le[U],R)),K<W.last_lit;);ke(W,b,ne)}function Dn(W,ne){var ve,Ee,ie,U=ne.dyn_tree,R=ne.stat_desc.static_tree,K=ne.stat_desc.has_stree,_e=ne.stat_desc.elems,Te=-1;for(W.heap_len=0,W.heap_max=p,ve=0;ve<_e;ve++)U[2*ve]!==0?(W.heap[++W.heap_len]=Te=ve,W.depth[ve]=0):U[2*ve+1]=0;for(;W.heap_len<2;)U[2*(ie=W.heap[++W.heap_len]=Te<2?++Te:0)]=1,W.depth[ie]=0,W.opt_len--,K&&(W.static_len-=R[2*ie+1]);for(ne.max_code=Te,ve=W.heap_len>>1;1<=ve;ve--)pt(W,U,ve);for(ie=_e;ve=W.heap[1],W.heap[1]=W.heap[W.heap_len--],pt(W,U,1),Ee=W.heap[1],W.heap[--W.heap_max]=ve,W.heap[--W.heap_max]=Ee,U[2*ie]=U[2*ve]+U[2*Ee],W.depth[ie]=(W.depth[ve]>=W.depth[Ee]?W.depth[ve]:W.depth[Ee])+1,U[2*ve+1]=U[2*Ee+1]=ie,W.heap[1]=ie++,pt(W,U,1),2<=W.heap_len;);W.heap[--W.heap_max]=W.heap[1],function(ye,lt){var et,nt,un,Fe,ct,Ft,At=lt.dyn_tree,ht=lt.max_code,On=lt.stat_desc.static_tree,rn=lt.stat_desc.has_stree,Qn=lt.stat_desc.extra_bits,ce=lt.stat_desc.extra_base,tt=lt.stat_desc.max_length,Pe=0;for(Fe=0;Fe<=y;Fe++)ye.bl_count[Fe]=0;for(At[2*ye.heap[ye.heap_max]+1]=0,et=ye.heap_max+1;et<p;et++)tt<(Fe=At[2*At[2*(nt=ye.heap[et])+1]+1]+1)&&(Fe=tt,Pe++),At[2*nt+1]=Fe,ht<nt||(ye.bl_count[Fe]++,ct=0,ce<=nt&&(ct=Qn[nt-ce]),Ft=At[2*nt],ye.opt_len+=Ft*(Fe+ct),rn&&(ye.static_len+=Ft*(On[2*nt+1]+ct)));if(Pe!==0){do{for(Fe=tt-1;ye.bl_count[Fe]===0;)Fe--;ye.bl_count[Fe]--,ye.bl_count[Fe+1]+=2,ye.bl_count[tt]--,Pe-=2}while(0<Pe);for(Fe=tt;Fe!==0;Fe--)for(nt=ye.bl_count[Fe];nt!==0;)ht<(un=ye.heap[--et])||(At[2*un+1]!==Fe&&(ye.opt_len+=(Fe-At[2*un+1])*At[2*un],At[2*un+1]=Fe),nt--)}}(W,ne),He(U,Te,W.bl_count)}function O(W,ne,ve){var Ee,ie,U=-1,R=ne[1],K=0,_e=7,Te=4;for(R===0&&(_e=138,Te=3),ne[2*(ve+1)+1]=65535,Ee=0;Ee<=ve;Ee++)ie=R,R=ne[2*(Ee+1)+1],++K<_e&&ie===R||(K<Te?W.bl_tree[2*ie]+=K:ie!==0?(ie!==U&&W.bl_tree[2*ie]++,W.bl_tree[2*T]++):K<=10?W.bl_tree[2*E]++:W.bl_tree[2*D]++,U=ie,Te=(K=0)===R?(_e=138,3):ie===R?(_e=6,3):(_e=7,4))}function Me(W,ne,ve){var Ee,ie,U=-1,R=ne[1],K=0,_e=7,Te=4;for(R===0&&(_e=138,Te=3),Ee=0;Ee<=ve;Ee++)if(ie=R,R=ne[2*(Ee+1)+1],!(++K<_e&&ie===R)){if(K<Te)for(;ke(W,ie,W.bl_tree),--K!=0;);else ie!==0?(ie!==U&&(ke(W,ie,W.bl_tree),K--),ke(W,T,W.bl_tree),Ue(W,K-3,2)):K<=10?(ke(W,E,W.bl_tree),Ue(W,K-3,3)):(ke(W,D,W.bl_tree),Ue(W,K-11,7));U=ie,Te=(K=0)===R?(_e=138,3):ie===R?(_e=6,3):(_e=7,4)}}s(le);var j=!1;function Y(W,ne,ve,Ee){Ue(W,(a<<1)+(Ee?1:0),3),function(ie,U,R,K){Ve(ie),K&&(Ie(ie,R),Ie(ie,~R)),i.arraySet(ie.pending_buf,ie.window,U,R,ie.pending),ie.pending+=R}(W,ne,ve,!0)}e._tr_init=function(W){j||(function(){var ne,ve,Ee,ie,U,R=new Array(y+1);for(ie=Ee=0;ie<l-1;ie++)for(q[ie]=Ee,ne=0;ne<1<<L[ie];ne++)S[Ee++]=ie;for(S[Ee-1]=ie,ie=U=0;ie<16;ie++)for(le[ie]=U,ne=0;ne<1<<z[ie];ne++)N[U++]=ie;for(U>>=7;ie<h;ie++)for(le[ie]=U<<7,ne=0;ne<1<<z[ie]-7;ne++)N[256+U++]=ie;for(ve=0;ve<=y;ve++)R[ve]=0;for(ne=0;ne<=143;)F[2*ne+1]=8,ne++,R[8]++;for(;ne<=255;)F[2*ne+1]=9,ne++,R[9]++;for(;ne<=279;)F[2*ne+1]=7,ne++,R[7]++;for(;ne<=287;)F[2*ne+1]=8,ne++,R[8]++;for(He(F,f+1,R),ne=0;ne<h;ne++)P[2*ne+1]=5,P[2*ne]=Ce(ne,5);oe=new de(F,L,u+1,f,y),ee=new de(P,z,0,h,y),ge=new de(new Array(0),k,0,m,x)}(),j=!0),W.l_desc=new J(W.dyn_ltree,oe),W.d_desc=new J(W.dyn_dtree,ee),W.bl_desc=new J(W.bl_tree,ge),W.bi_buf=0,W.bi_valid=0,$e(W)},e._tr_stored_block=Y,e._tr_flush_block=function(W,ne,ve,Ee){var ie,U,R=0;0<W.level?(W.strm.data_type===2&&(W.strm.data_type=function(K){var _e,Te=4093624447;for(_e=0;_e<=31;_e++,Te>>>=1)if(1&Te&&K.dyn_ltree[2*_e]!==0)return r;if(K.dyn_ltree[18]!==0||K.dyn_ltree[20]!==0||K.dyn_ltree[26]!==0)return o;for(_e=32;_e<u;_e++)if(K.dyn_ltree[2*_e]!==0)return o;return r}(W)),Dn(W,W.l_desc),Dn(W,W.d_desc),R=function(K){var _e;for(O(K,K.dyn_ltree,K.l_desc.max_code),O(K,K.dyn_dtree,K.d_desc.max_code),Dn(K,K.bl_desc),_e=m-1;3<=_e&&K.bl_tree[2*G[_e]+1]===0;_e--);return K.opt_len+=3*(_e+1)+5+5+4,_e}(W),ie=W.opt_len+3+7>>>3,(U=W.static_len+3+7>>>3)<=ie&&(ie=U)):ie=U=ve+5,ve+4<=ie&&ne!==-1?Y(W,ne,ve,Ee):W.strategy===4||U===ie?(Ue(W,2+(Ee?1:0),3),Ut(W,F,P)):(Ue(W,4+(Ee?1:0),3),function(K,_e,Te,ye){var lt;for(Ue(K,_e-257,5),Ue(K,Te-1,5),Ue(K,ye-4,4),lt=0;lt<ye;lt++)Ue(K,K.bl_tree[2*G[lt]+1],3);Me(K,K.dyn_ltree,_e-1),Me(K,K.dyn_dtree,Te-1)}(W,W.l_desc.max_code+1,W.d_desc.max_code+1,R+1),Ut(W,W.dyn_ltree,W.dyn_dtree)),$e(W),Ee&&Ve(W)},e._tr_tally=function(W,ne,ve){return W.pending_buf[W.d_buf+2*W.last_lit]=ne>>>8&255,W.pending_buf[W.d_buf+2*W.last_lit+1]=255&ne,W.pending_buf[W.l_buf+W.last_lit]=255&ve,W.last_lit++,ne===0?W.dyn_ltree[2*ve]++:(W.matches++,ne--,W.dyn_ltree[2*(S[ve]+u+1)]++,W.dyn_dtree[2*Q(ne)]++),W.last_lit===W.lit_bufsize-1},e._tr_align=function(W){Ue(W,2,3),ke(W,b,F),function(ne){ne.bi_valid===16?(Ie(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(W)}},{"../utils/common":41}],53:[function(n,t,e){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,t,e){(function(i){(function(r,o){"use strict";if(!r.setImmediate){var s,a,l,u,f=1,h={},m=!1,p=r.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(r);y=y&&y.setTimeout?y:r,s={}.toString.call(r.process)==="[object process]"?function(T){process.nextTick(function(){x(T)})}:function(){if(r.postMessage&&!r.importScripts){var T=!0,E=r.onmessage;return r.onmessage=function(){T=!1},r.postMessage("","*"),r.onmessage=E,T}}()?(u="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",b,!1):r.attachEvent("onmessage",b),function(T){r.postMessage(u+T,"*")}):r.MessageChannel?((l=new MessageChannel).port1.onmessage=function(T){x(T.data)},function(T){l.port2.postMessage(T)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,function(T){var E=p.createElement("script");E.onreadystatechange=function(){x(T),E.onreadystatechange=null,a.removeChild(E),E=null},a.appendChild(E)}):function(T){setTimeout(x,0,T)},y.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var E=new Array(arguments.length-1),D=0;D<E.length;D++)E[D]=arguments[D+1];var L={callback:T,args:E};return h[f]=L,s(f),f++},y.clearImmediate=M}function M(T){delete h[T]}function x(T){if(m)setTimeout(x,0,T);else{var E=h[T];if(E){m=!0;try{(function(D){var L=D.callback,z=D.args;switch(z.length){case 0:L();break;case 1:L(z[0]);break;case 2:L(z[0],z[1]);break;case 3:L(z[0],z[1],z[2]);break;default:L.apply(o,z)}})(E)}finally{M(T),m=!1}}}}function b(T){T.source===r&&typeof T.data=="string"&&T.data.indexOf(u)===0&&x(+T.data.slice(u.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var JB=zC((RD,kD)=>{"use strict";(function(n,t){typeof define=="function"&&define.amd?define([],t):typeof RD<"u"?t():(t(),n.FileSaver={})})(RD,function(){"use strict";function n(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,l,u){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){s(f.response,l,u)},f.onerror=function(){console.error("could not download file")},f.send()}function e(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,u){var f=r.URL||r.webkitURL,h=document.createElement("a");l=l||a.name||"download",h.download=l,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?i(h):e(h.href)?t(a,l,u):i(h,h.target="_blank")):(h.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,u){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,u),l);else if(e(a))t(a,l,u);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){i(f)})}}:function(a,l,u,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return t(a,l,u);var h=a.type==="application/octet-stream",m=/constructor/i.test(r.HTMLElement)||r.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||h&&m||o)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var b=y.result;b=p?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=b:location=b,f=null},y.readAsDataURL(a)}else{var M=r.URL||r.webkitURL,x=M.createObjectURL(a);f?f.location=x:location.href=x,f=null,setTimeout(function(){M.revokeObjectURL(x)},4e4)}});r.saveAs=s.saveAs=s,typeof kD<"u"&&(kD.exports=s)})});function JA(n,t){return Object.is(n,t)}var cr=null,jg=!1,Wg=1,Ja=Symbol("SIGNAL");function $n(n){let t=cr;return cr=n,t}function QA(){return cr}var Xh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WC(n){if(jg)throw new Error("");if(cr===null)return;cr.consumerOnSignalRead(n);let t=cr.nextProducerIndex++;if(Yg(cr),t<cr.producerNode.length&&cr.producerNode[t]!==n&&Yh(cr)){let e=cr.producerNode[t];qg(e,cr.producerIndexOfThis[t])}cr.producerNode[t]!==n&&(cr.producerNode[t]=n,cr.producerIndexOfThis[t]=Yh(cr)?iI(n,cr,t):0),cr.producerLastReadVersion[t]=n.version}function uG(){Wg++}function eI(n){if(!(Yh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Wg)){if(!n.producerMustRecompute(n)&&!$C(n)){n.dirty=!1,n.lastCleanEpoch=Wg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Wg}}function tI(n){if(n.liveConsumerNode===void 0)return;let t=jg;jg=!0;try{for(let e of n.liveConsumerNode)e.dirty||dG(e)}finally{jg=t}}function nI(){return cr?.consumerAllowSignalWrites!==!1}function dG(n){n.dirty=!0,tI(n),n.consumerMarkedDirty?.(n)}function $g(n){return n&&(n.nextProducerIndex=0),$n(n)}function GC(n,t){if($n(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Yh(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)qg(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $C(n){Yg(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(eI(e),i!==e.version))return!0}return!1}function qC(n){if(Yg(n),Yh(n))for(let t=0;t<n.producerNode.length;t++)qg(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iI(n,t,e){if(rI(n),n.liveConsumerNode.length===0&&oI(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=iI(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function qg(n,t){if(rI(n),n.liveConsumerNode.length===1&&oI(n))for(let i=0;i<n.producerNode.length;i++)qg(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Yg(r),r.producerIndexOfThis[i]=t}}function Yh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function rI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oI(n){return n.producerNode!==void 0}function sI(n){let t=Object.create(fG);t.computation=n;let e=()=>{if(eI(t),WC(t),t.value===Gg)throw t.error;return t.value};return e[Ja]=t,e}var HC=Symbol("UNSET"),jC=Symbol("COMPUTING"),Gg=Symbol("ERRORED"),fG=Yt(je({},Xh),{value:HC,dirty:!0,error:null,equal:JA,producerMustRecompute(n){return n.value===HC||n.value===jC},producerRecomputeValue(n){if(n.value===jC)throw new Error("Detected cycle in computations.");let t=n.value;n.value=jC;let e=$g(n),i;try{i=n.computation()}catch(r){i=Gg,n.error=r}finally{GC(n,e)}if(t!==HC&&t!==Gg&&i!==Gg&&n.equal(t,i)){n.value=t;return}n.value=i,n.version++}});function hG(){throw new Error}var aI=hG;function lI(){aI()}function cI(n){aI=n}var pG=null;function uI(n){let t=Object.create(fI);t.value=n;let e=()=>(WC(t),t.value);return e[Ja]=t,e}function YC(n,t){nI()||lI(),n.equal(n.value,t)||(n.value=t,mG(n))}function dI(n,t){nI()||lI(),YC(n,t(n.value))}var fI=Yt(je({},Xh),{equal:JA,value:void 0});function mG(n){n.version++,uG(),tI(n),pG?.()}function Vt(n){return typeof n=="function"}function xd(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Xg=xd(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function eu(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var zi=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(Vt(i))try{i()}catch(o){t=o instanceof Xg?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{hI(o)}catch(s){t=t??[],s instanceof Xg?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Xg(t)}}add(t){var e;if(t&&t!==this)if(this.closed)hI(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&eu(e,t)}remove(t){let{_finalizers:e}=this;e&&eu(e,t),t instanceof n&&t._removeParent(this)}};zi.EMPTY=(()=>{let n=new zi;return n.closed=!0,n})();var XC=zi.EMPTY;function Zg(n){return n instanceof zi||n&&"closed"in n&&Vt(n.remove)&&Vt(n.add)&&Vt(n.unsubscribe)}function hI(n){Vt(n)?n():n.unsubscribe()}var Vs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bd={setTimeout(n,t,...e){let{delegate:i}=bd;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=bd;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kg(n){bd.setTimeout(()=>{let{onUnhandledError:t}=Vs;if(t)t(n);else throw n})}function Zh(){}var pI=ZC("C",void 0,void 0);function mI(n){return ZC("E",void 0,n)}function gI(n){return ZC("N",n,void 0)}function ZC(n,t,e){return{kind:n,value:t,error:e}}var tu=null;function Cd(n){if(Vs.useDeprecatedSynchronousErrorHandling){let t=!tu;if(t&&(tu={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=tu;if(tu=null,e)throw i}}else n()}function _I(n){Vs.useDeprecatedSynchronousErrorHandling&&tu&&(tu.errorThrown=!0,tu.error=n)}var nu=class extends zi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Zg(t)&&t.add(this)):this.destination=vG}static create(t,e,i){return new Qa(t,e,i)}next(t){this.isStopped?JC(gI(t),this):this._next(t)}error(t){this.isStopped?JC(mI(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?JC(pI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gG=Function.prototype.bind;function KC(n,t){return gG.call(n,t)}var QC=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Jg(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Jg(i)}else Jg(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Jg(e)}}},Qa=class extends nu{constructor(t,e,i){super();let r;if(Vt(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Vs.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&KC(t.next,o),error:t.error&&KC(t.error,o),complete:t.complete&&KC(t.complete,o)}):r=t}this.destination=new QC(r)}};function Jg(n){Vs.useDeprecatedSynchronousErrorHandling?_I(n):Kg(n)}function _G(n){throw n}function JC(n,t){let{onStoppedNotification:e}=Vs;e&&bd.setTimeout(()=>e(n,t))}var vG={closed:!0,next:Zh,error:_G,complete:Zh};var Md=typeof Symbol=="function"&&Symbol.observable||"@@observable";function oo(n){return n}function eM(...n){return tM(n)}function tM(n){return n.length===0?oo:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var Jt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=xG(e)?e:new Qa(e,i,r);return Cd(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=vI(i),new i((r,o)=>{let s=new Qa({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Md](){return this}pipe(...e){return tM(e)(this)}toPromise(e){return e=vI(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=t=>new n(t),n})();function vI(n){var t;return(t=n??Vs.Promise)!==null&&t!==void 0?t:Promise}function yG(n){return n&&Vt(n.next)&&Vt(n.error)&&Vt(n.complete)}function xG(n){return n&&n instanceof nu||yG(n)&&Zg(n)}function nM(n){return Vt(n?.lift)}function mn(n){return t=>{if(nM(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function wn(n,t,e,i,r){return new iM(n,t,e,i,r)}var iM=class extends nu{constructor(t,e,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function wd(){return mn((n,t)=>{let e=null;n._refCount++;let i=wn(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Ed=class extends Jt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,nM(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new zi;let e=this.getSubject();t.add(this.source.subscribe(wn(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=zi.EMPTY)}return t}refCount(){return wd()(this)}};var yI=xd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var An=(()=>{class n extends Jt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new Qg(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new yI}next(e){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Cd(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?XC:(this.currentObservers=null,o.push(e),new zi(()=>{this.currentObservers=null,eu(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new Jt;return e.source=this,e}}return n.create=(t,e)=>new Qg(t,e),n})(),Qg=class extends An{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:XC}};var Pi=class extends An{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Kh={now(){return(Kh.delegate||Date).now()},delegate:void 0};var Jh=class extends An{constructor(t=1/0,e=1/0,i=Kh){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=e.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var e0=class extends zi{constructor(t,e){super()}schedule(t,e=0){return this}};var Qh={setInterval(n,t,...e){let{delegate:i}=Qh;return i?.setInterval?i.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Qh;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var t0=class extends e0{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return Qh.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Qh.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,eu(i,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var Sd=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}};Sd.now=Kh.now;var n0=class extends Sd{constructor(t,e=Sd.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}};var rM=new n0(t0),xI=rM;var so=new Jt(n=>n.complete());function i0(n){return n&&Vt(n.schedule)}function oM(n){return n[n.length-1]}function r0(n){return Vt(oM(n))?n.pop():void 0}function fa(n){return i0(oM(n))?n.pop():void 0}function bI(n,t){return typeof oM(n)=="number"?n.pop():t}var ep=function(){return ep=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ep.apply(this,arguments)};function MI(n,t,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(f){try{u(i.next(f))}catch(h){s(h)}}function l(f){try{u(i.throw(f))}catch(h){s(h)}}function u(f){f.done?o(f.value):r(f.value).then(a,l)}u((i=i.apply(n,t||[])).next())})}function CI(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function iu(n){return this instanceof iu?(this.v=n,this):new iu(n)}function wI(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(p){return function(y){return Promise.resolve(y).then(p,h)}}function a(p,y){i[p]&&(r[p]=function(M){return new Promise(function(x,b){o.push([p,M,x,b])>1||l(p,M)})},y&&(r[p]=y(r[p])))}function l(p,y){try{u(i[p](y))}catch(M){m(o[0][3],M)}}function u(p){p.value instanceof iu?Promise.resolve(p.value.v).then(f,h):m(o[0][2],p)}function f(p){l("next",p)}function h(p){l("throw",p)}function m(p,y){p(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function EI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof CI=="function"?CI(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var Pd=n=>n&&typeof n.length=="number"&&typeof n!="function";function o0(n){return Vt(n?.then)}function s0(n){return Vt(n[Md])}function a0(n){return Symbol.asyncIterator&&Vt(n?.[Symbol.asyncIterator])}function l0(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function bG(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var c0=bG();function u0(n){return Vt(n?.[c0])}function d0(n){return wI(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield iu(e.read());if(r)return yield iu(void 0);yield yield iu(i)}}finally{e.releaseLock()}})}function f0(n){return Vt(n?.getReader)}function gi(n){if(n instanceof Jt)return n;if(n!=null){if(s0(n))return CG(n);if(Pd(n))return MG(n);if(o0(n))return wG(n);if(a0(n))return SI(n);if(u0(n))return EG(n);if(f0(n))return SG(n)}throw l0(n)}function CG(n){return new Jt(t=>{let e=n[Md]();if(Vt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MG(n){return new Jt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function wG(n){return new Jt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Kg)})}function EG(n){return new Jt(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function SI(n){return new Jt(t=>{PG(n,t).catch(e=>t.error(e))})}function SG(n){return SI(d0(n))}function PG(n,t){var e,i,r,o;return MI(this,void 0,void 0,function*(){try{for(e=EI(n);i=yield e.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function bo(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function h0(n,t=0){return mn((e,i)=>{e.subscribe(wn(i,r=>bo(i,n,()=>i.next(r),t),()=>bo(i,n,()=>i.complete(),t),r=>bo(i,n,()=>i.error(r),t)))})}function p0(n,t=0){return mn((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function PI(n,t){return gi(n).pipe(p0(t),h0(t))}function TI(n,t){return gi(n).pipe(p0(t),h0(t))}function DI(n,t){return new Jt(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function OI(n,t){return new Jt(e=>{let i;return bo(e,t,()=>{i=n[c0](),bo(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Vt(i?.return)&&i.return()})}function m0(n,t){if(!n)throw new Error("Iterable cannot be null");return new Jt(e=>{bo(e,t,()=>{let i=n[Symbol.asyncIterator]();bo(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function AI(n,t){return m0(d0(n),t)}function II(n,t){if(n!=null){if(s0(n))return PI(n,t);if(Pd(n))return DI(n,t);if(o0(n))return TI(n,t);if(a0(n))return m0(n,t);if(u0(n))return OI(n,t);if(f0(n))return AI(n,t)}throw l0(n)}function di(n,t){return t?II(n,t):gi(n)}function Rt(...n){let t=fa(n);return di(n,t)}function En(n,t){let e=Vt(n)?n:()=>n,i=r=>r.error(e());return new Jt(t?r=>t.schedule(i,0,r):i)}function sM(n){return!!n&&(n instanceof Jt||Vt(n.lift)&&Vt(n.subscribe))}var el=xd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function RI(n){return n instanceof Date&&!isNaN(n)}function Dt(n,t){return mn((e,i)=>{let r=0;e.subscribe(wn(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:TG}=Array;function DG(n,t){return TG(t)?n(...t):n(t)}function Td(n){return Dt(t=>DG(n,t))}var{isArray:OG}=Array,{getPrototypeOf:AG,prototype:IG,keys:RG}=Object;function g0(n){if(n.length===1){let t=n[0];if(OG(t))return{args:t,keys:null};if(kG(t)){let e=RG(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function kG(n){return n&&typeof n=="object"&&AG(n)===IG}function _0(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function ru(...n){let t=fa(n),e=r0(n),{args:i,keys:r}=g0(n);if(i.length===0)return di([],t);let o=new Jt(NG(i,t,r?s=>_0(r,s):oo));return e?o.pipe(Td(e)):o}function NG(n,t,e=oo){return i=>{kI(t,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)kI(t,()=>{let u=di(n[l],t),f=!1;u.subscribe(wn(i,h=>{o[l]=h,f||(f=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function kI(n,t,e){n?bo(e,n,t):t()}function NI(n,t,e,i,r,o,s,a){let l=[],u=0,f=0,h=!1,m=()=>{h&&!l.length&&!u&&t.complete()},p=M=>u<i?y(M):l.push(M),y=M=>{o&&t.next(M),u++;let x=!1;gi(e(M,f++)).subscribe(wn(t,b=>{r?.(b),o?p(b):t.next(b)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;l.length&&u<i;){let b=l.shift();s?bo(t,s,()=>y(b)):y(b)}m()}catch(b){t.error(b)}}))};return n.subscribe(wn(t,p,()=>{h=!0,m()})),()=>{a?.()}}function _i(n,t,e=1/0){return Vt(t)?_i((i,r)=>Dt((o,s)=>t(i,o,r,s))(gi(n(i,r))),e):(typeof t=="number"&&(e=t),mn((i,r)=>NI(i,r,n,e)))}function ha(n=1/0){return _i(oo,n)}function FI(){return ha(1)}function Dd(...n){return FI()(di(n,fa(n)))}function v0(n){return new Jt(t=>{gi(n()).subscribe(t)})}function aM(...n){let t=r0(n),{args:e,keys:i}=g0(n),r=new Jt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let h=!1;gi(e[f]).subscribe(wn(o,m=>{h||(h=!0,u--),a[f]=m},()=>l--,void 0,()=>{(!l||!h)&&(u||o.next(i?_0(i,a):a),o.complete())}))}});return t?r.pipe(Td(t)):r}var FG=["addListener","removeListener"],LG=["addEventListener","removeEventListener"],UG=["on","off"];function Xl(n,t,e,i){if(Vt(e)&&(i=e,e=void 0),i)return Xl(n,t,e).pipe(Td(i));let[r,o]=BG(n)?LG.map(s=>a=>n[s](t,a,e)):VG(n)?FG.map(LI(n,t)):zG(n)?UG.map(LI(n,t)):[];if(!r&&Pd(n))return _i(s=>Xl(s,t,e))(gi(n));if(!r)throw new TypeError("Invalid event target");return new Jt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function LI(n,t){return e=>i=>n[e](t,i)}function VG(n){return Vt(n.addListener)&&Vt(n.removeListener)}function zG(n){return Vt(n.on)&&Vt(n.off)}function BG(n){return Vt(n.addEventListener)&&Vt(n.removeEventListener)}function tp(n=0,t,e=xI){let i=-1;return t!=null&&(i0(t)?e=t:i=t),new Jt(r=>{let o=RI(n)?+n-e.now():n;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function lM(n=0,t=rM){return n<0&&(n=0),tp(n,n,t)}function as(...n){let t=fa(n),e=bI(n,1/0),i=n;return i.length?i.length===1?gi(i[0]):ha(e)(di(i,t)):so}function vi(n,t){return mn((e,i)=>{let r=0;e.subscribe(wn(i,o=>n.call(t,o,r++)&&i.next(o)))})}function nn(n){return mn((t,e)=>{let i=null,r=!1,o;i=t.subscribe(wn(e,void 0,void 0,s=>{o=gi(n(s,nn(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function y0(n,t,e,i,r){return(o,s)=>{let a=e,l=t,u=0;o.subscribe(wn(s,f=>{let h=u++;l=a?n(l,f,h):(a=!0,f),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function UI(n,t){return mn(y0(n,t,arguments.length>=2,!1,!0))}function tl(n,t){return Vt(t)?_i(n,t,1):_i(n,1)}function cM(n){return UI((t,e,i)=>!n||n(e,i)?t+1:t,0)}function Zl(n){return mn((t,e)=>{let i=!1;t.subscribe(wn(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Vr(n){return n<=0?()=>so:mn((t,e)=>{let i=0;t.subscribe(wn(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function uM(n){return Dt(()=>n)}function dM(n,t=oo){return n=n??HG,mn((e,i)=>{let r,o=!0;e.subscribe(wn(i,s=>{let a=t(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function HG(n,t){return n===t}function x0(n=jG){return mn((t,e)=>{let i=!1;t.subscribe(wn(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function jG(){return new el}function Kl(n){return mn((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function zs(n,t){let e=arguments.length>=2;return i=>i.pipe(n?vi((r,o)=>n(r,o,i)):oo,Vr(1),e?Zl(t):x0(()=>new el))}function Jl(n){return n<=0?()=>so:mn((t,e)=>{let i=[];t.subscribe(wn(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function fM(n,t){let e=arguments.length>=2;return i=>i.pipe(n?vi((r,o)=>n(r,o,i)):oo,Jl(1),e?Zl(t):x0(()=>new el))}function Od(){return mn((n,t)=>{let e,i=!1;n.subscribe(wn(t,r=>{let o=e;e=r,i&&t.next([o,r]),i=!0}))})}function hM(n,t){return mn(y0(n,t,arguments.length>=2,!0))}function ls(n={}){let{connector:t=()=>new An,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,u=0,f=!1,h=!1,m=()=>{a?.unsubscribe(),a=void 0},p=()=>{m(),s=l=void 0,f=h=!1},y=()=>{let M=s;p(),M?.unsubscribe()};return mn((M,x)=>{u++,!h&&!f&&m();let b=l=l??t();x.add(()=>{u--,u===0&&!h&&!f&&(a=pM(y,r))}),b.subscribe(x),!s&&u>0&&(s=new Qa({next:T=>b.next(T),error:T=>{h=!0,m(),a=pM(p,e,T),b.error(T)},complete:()=>{f=!0,m(),a=pM(p,i),b.complete()}}),gi(M).subscribe(s))})(o)}}function pM(n,t,...e){if(t===!0){n();return}if(t===!1)return;let i=new Qa({next:()=>{i.unsubscribe(),n()}});return gi(t(...e)).subscribe(i)}function ou(...n){let t=fa(n);return mn((e,i)=>{(t?Dd(n,e,t):Dd(n,e)).subscribe(i)})}function ur(n,t){return mn((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(wn(i,l=>{r?.unsubscribe();let u=0,f=o++;gi(n(l,f)).subscribe(r=wn(i,h=>i.next(t?t(l,h,f,u++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function mM(n,t){return Vt(t)?ur(()=>n,t):ur(()=>n)}function Co(n){return mn((t,e)=>{gi(n).subscribe(wn(e,()=>e.complete(),Zh)),!e.closed&&t.subscribe(e)})}function yi(n,t,e){let i=Vt(n)||t||e?{next:n,error:t,complete:e}:n;return i?mn((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(wn(o,l=>{var u;(u=i.next)===null||u===void 0||u.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,l),o.error(l)},()=>{var l,u;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):oo}var A2="https://g.co/ng/security#xss",wt=class extends Error{constructor(t,e){super(c_(t,e)),this.code=t}};function c_(n,t){return`${`NG0${Math.abs(n)}`}${t?": "+t:""}`}function fp(n){return{toString:n}.toString()}var b0="__parameters__";function WG(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function I2(n,t,e){return fp(()=>{let i=WG(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,u,f){let h=l.hasOwnProperty(b0)?l[b0]:Object.defineProperty(l,b0,{value:[]})[b0];for(;h.length<=f;)h.push(null);return(h[f]=h[f]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var nl=globalThis;function xi(n){for(let t in n)if(n[t]===xi)return t;throw Error("Could not find renamed property on target object.")}function GG(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function lo(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(lo).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let t=n.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function VI(n,t){return n==null||n===""?t===null?"":t:t==null||t===""?n:n+" "+t}var $G=xi({__forward_ref__:xi});function Cr(n){return n.__forward_ref__=Cr,n.toString=function(){return lo(this())},n}function ao(n){return R2(n)?n():n}function R2(n){return typeof n=="function"&&n.hasOwnProperty($G)&&n.__forward_ref__===Cr}function Le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qi(n){return{providers:n.providers||[],imports:n.imports||[]}}function u_(n){return zI(n,N2)||zI(n,F2)}function k2(n){return u_(n)!==null}function zI(n,t){return n.hasOwnProperty(t)?n[t]:null}function qG(n){let t=n&&(n[N2]||n[F2]);return t||null}function BI(n){return n&&(n.hasOwnProperty(HI)||n.hasOwnProperty(YG))?n[HI]:null}var N2=xi({\u0275prov:xi}),HI=xi({\u0275inj:xi}),F2=xi({ngInjectableDef:xi}),YG=xi({ngInjectorDef:xi}),xt=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Le({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function L2(n){return n&&!!n.\u0275providers}var XG=xi({\u0275cmp:xi}),ZG=xi({\u0275dir:xi}),KG=xi({\u0275pipe:xi}),JG=xi({\u0275mod:xi}),F0=xi({\u0275fac:xi}),rp=xi({__NG_ELEMENT_ID__:xi}),jI=xi({__NG_ENV_ID__:xi});function lu(n){return typeof n=="string"?n:n==null?"":String(n)}function QG(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():lu(n)}function e7(n,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${n}`:"";throw new wt(-200,n)}function Nw(n,t){throw new wt(-201,!1)}var Tn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Tn||{}),IM;function U2(){return IM}function Mo(n){let t=IM;return IM=n,t}function V2(n,t,e){let i=u_(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Tn.Optional)return null;if(t!==void 0)return t;Nw(n,"Injector")}var t7={},op=t7,RM="__NG_DI_FLAG__",L0="ngTempTokenPath",n7="ngTokenPath",i7=/\n/gm,r7="\u0275",WI="__source",Nd;function o7(){return Nd}function Ql(n){let t=Nd;return Nd=n,t}function s7(n,t=Tn.Default){if(Nd===void 0)throw new wt(-203,!1);return Nd===null?V2(n,void 0,t):Nd.get(n,t&Tn.Optional?null:void 0,t)}function qe(n,t=Tn.Default){return(U2()||s7)(ao(n),t)}function Be(n,t=Tn.Default){return qe(n,d_(t))}function d_(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function kM(n){let t=[];for(let e=0;e<n.length;e++){let i=ao(n[e]);if(Array.isArray(i)){if(i.length===0)throw new wt(900,!1);let r,o=Tn.Default;for(let s=0;s<i.length;s++){let a=i[s],l=a7(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(qe(r,o))}else t.push(qe(i))}return t}function z2(n,t){return n[RM]=t,n.prototype[RM]=t,n}function a7(n){return n[RM]}function l7(n,t,e,i){let r=n[L0];throw t[WI]&&r.unshift(t[WI]),n.message=c7(`
`+n.message,r,e,i),n[n7]=r,n[L0]=null,n}function c7(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==r7?n.slice(2):n;let r=lo(t);if(Array.isArray(t))r=t.map(lo).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):lo(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(i7,`
  `)}`}var hp=z2(I2("Optional"),8);var f_=z2(I2("SkipSelf"),4);function cu(n,t){let e=n.hasOwnProperty(F0);return e?n[F0]:null}function u7(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function d7(n){return n.flat(Number.POSITIVE_INFINITY)}function Fw(n,t){n.forEach(e=>Array.isArray(e)?Fw(e,t):t(e))}function B2(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function U0(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function f7(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function h7(n,t,e){let i=pp(n,t);return i>=0?n[i|1]=e:(i=~i,f7(n,i,t,e)),i}function gM(n,t){let e=pp(n,t);if(e>=0)return n[e|1]}function pp(n,t){return p7(n,t,1)}function p7(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<e];if(t===s)return o<<e;s>t?r=o:i=o+1}return~(r<<e)}var Ld={},Vo=[],uu=new xt(""),H2=new xt("",-1),j2=new xt(""),V0=class{get(t,e=op){if(e===op){let i=new Error(`NullInjectorError: No provider for ${lo(t)}!`);throw i.name="NullInjectorError",i}return e}},W2=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(W2||{}),ga=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ga||{}),tc=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(tc||{});function m7(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}function NM(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];n.setAttribute(t,s,a,o)}else{let o=r,s=e[++i];g7(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),i++}}return i}function G2(n){return n===3||n===4||n===6}function g7(n){return n.charCodeAt(0)===64}function sp(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?GI(n,e,r,null,t[++i]):GI(n,e,r,null,null))}}return n}function GI(n,t,e,i,r){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var $2="ng-template";function _7(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&m7(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Lw(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function Lw(n){return n.type===4&&n.value!==$2}function v7(n,t,e){let i=n.type===4&&!e?$2:n.value;return t===i}function y7(n,t,e){let i=4,r=n.attrs,o=r!==null?C7(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!Bs(i)&&!Bs(l))return!1;if(s&&Bs(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!v7(n,l,e)||l===""&&t.length===1){if(Bs(i))return!1;s=!0}}else if(i&8){if(r===null||!_7(n,r,l,e)){if(Bs(i))return!1;s=!0}}else{let u=t[++a],f=x7(l,r,Lw(n),e);if(f===-1){if(Bs(i))return!1;s=!0;continue}if(u!==""){let h;if(f>o?h="":h=r[f+1].toLowerCase(),i&2&&u!==h){if(Bs(i))return!1;s=!0}}}}return Bs(i)||s}function Bs(n){return(n&1)===0}function x7(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return M7(t,n)}function b7(n,t,e=!1){for(let i=0;i<t.length;i++)if(y7(n,t[i],e))return!0;return!1}function C7(n){for(let t=0;t<n.length;t++){let e=n[t];if(G2(e))return t}return n.length}function M7(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function $I(n,t){return n?":not("+t.trim()+")":t}function w7(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(i&2){let a=n[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Bs(s)&&(t+=$I(o,r),r=""),i=s,o=o||!Bs(i);e++}return r!==""&&(t+=$I(o,r)),t}function E7(n){return n.map(w7).join(",")}function S7(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!Bs(r))break;r=o}i++}return{attrs:t,classes:e}}function We(n){return fp(()=>{let t=K2(n),e=Yt(je({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===W2.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ga.Emulated,styles:n.styles||Vo,_:null,schemas:n.schemas||null,tView:null,id:""});J2(e);let i=n.dependencies;return e.directiveDefs=YI(i,!1),e.pipeDefs=YI(i,!0),e.id=D7(e),e})}function P7(n){return nc(n)||q2(n)}function T7(n){return n!==null}function Yi(n){return fp(()=>({type:n.type,bootstrap:n.bootstrap||Vo,declarations:n.declarations||Vo,imports:n.imports||Vo,exports:n.exports||Vo,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function qI(n,t){if(n==null)return Ld;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=tc.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==tc.None?[i,a]:i,t[o]=s):e[o]=i}return e}function en(n){return fp(()=>{let t=K2(n);return J2(t),t})}function ac(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function nc(n){return n[XG]||null}function q2(n){return n[ZG]||null}function Y2(n){return n[KG]||null}function X2(n){let t=nc(n)||q2(n)||Y2(n);return t!==null?t.standalone:!1}function Z2(n,t){let e=n[JG]||null;if(!e&&t===!0)throw new Error(`Type ${lo(n)} does not have '\u0275mod' property.`);return e}function K2(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||Ld,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Vo,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qI(n.inputs,t),outputs:qI(n.outputs),debugInfo:null}}function J2(n){n.features?.forEach(t=>t(n))}function YI(n,t){if(!n)return null;let e=t?Y2:P7;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(T7)}function D7(n){let t=0,e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function lc(n){return{\u0275providers:n}}function Uw(...n){return{\u0275providers:Q2(!0,n),\u0275fromNgModule:!0}}function Q2(n,...t){let e=[],i=new Set,r,o=s=>{e.push(s)};return Fw(t,s=>{let a=s;FM(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&eR(r,o),e}function eR(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];Vw(r,o=>{t(o,i)})}}function FM(n,t,e,i){if(n=ao(n),!n)return!1;let r=null,o=BI(n),s=!o&&nc(n);if(!o&&!s){let l=n.ngModule;if(o=BI(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)FM(u,t,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{Fw(o.imports,f=>{FM(f,t,e,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&eR(u,t)}if(!a){let u=cu(r)||(()=>new r);t({provide:r,useFactory:u,deps:Vo},r),t({provide:j2,useValue:r,multi:!0},r),t({provide:uu,useValue:()=>qe(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=n;Vw(l,f=>{t(f,u)})}}else return!1;return r!==n&&n.providers!==void 0}function Vw(n,t){for(let e of n)L2(e)&&(e=e.\u0275providers),Array.isArray(e)?Vw(e,t):t(e)}var O7=xi({provide:String,useValue:xi});function tR(n){return n!==null&&typeof n=="object"&&O7 in n}function A7(n){return!!(n&&n.useExisting)}function I7(n){return!!(n&&n.useFactory)}function Ud(n){return typeof n=="function"}function R7(n){return!!n.useClass}var h_=new xt(""),O0={},k7={},_M;function zw(){return _M===void 0&&(_M=new V0),_M}var co=class{},ap=class extends co{get destroyed(){return this._destroyed}constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,UM(t,s=>this.processProvider(s)),this.records.set(H2,Ad(void 0,this)),r.has("environment")&&this.records.set(co,Ad(void 0,this));let o=this.records.get(h_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(j2,Vo,Tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=$n(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$n(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Ql(this),i=Mo(void 0),r;try{return t()}finally{Ql(e),Mo(i)}}get(t,e=op,i=Tn.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(jI))return t[jI](this);i=d_(i);let r,o=Ql(this),s=Mo(void 0);try{if(!(i&Tn.SkipSelf)){let l=this.records.get(t);if(l===void 0){let u=V7(t)&&u_(t);u&&this.injectableDefInScope(u)?l=Ad(LM(t),O0):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Tn.Self?zw():this.parent;return e=i&Tn.Optional&&e===op?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[L0]=a[L0]||[]).unshift(lo(t)),o)throw a;return l7(a,t,"R3InjectorError",this.source)}else throw a}finally{Mo(s),Ql(o)}}resolveInjectorInitializers(){let t=$n(null),e=Ql(this),i=Mo(void 0),r;try{let o=this.get(uu,Vo,Tn.Self);for(let s of o)s()}finally{Ql(e),Mo(i),$n(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(lo(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new wt(205,!1)}processProvider(t){t=ao(t);let e=Ud(t)?t:ao(t&&t.provide),i=F7(t);if(!Ud(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Ad(void 0,O0,!0),r.factory=()=>kM(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e){let i=$n(null);try{return e.value===O0&&(e.value=k7,e.value=e.factory()),typeof e.value=="object"&&e.value&&U7(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{$n(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=ao(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function LM(n){let t=u_(n),e=t!==null?t.factory:cu(n);if(e!==null)return e;if(n instanceof xt)throw new wt(204,!1);if(n instanceof Function)return N7(n);throw new wt(204,!1)}function N7(n){if(n.length>0)throw new wt(204,!1);let e=qG(n);return e!==null?()=>e.factory(n):()=>new n}function F7(n){if(tR(n))return Ad(void 0,n.useValue);{let t=nR(n);return Ad(t,O0)}}function nR(n,t,e){let i;if(Ud(n)){let r=ao(n);return cu(r)||LM(r)}else if(tR(n))i=()=>ao(n.useValue);else if(I7(n))i=()=>n.useFactory(...kM(n.deps||[]));else if(A7(n))i=()=>qe(ao(n.useExisting));else{let r=ao(n&&(n.useClass||n.provide));if(L7(n))i=()=>new r(...kM(n.deps));else return cu(r)||LM(r)}return i}function Ad(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function L7(n){return!!n.deps}function U7(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function V7(n){return typeof n=="function"||typeof n=="object"&&n instanceof xt}function UM(n,t){for(let e of n)Array.isArray(e)?UM(e,t):e&&L2(e)?UM(e.\u0275providers,t):t(e)}function ds(n,t){n instanceof ap&&n.assertNotDestroyed();let e,i=Ql(n),r=Mo(void 0);try{return t()}finally{Ql(i),Mo(r)}}function iR(){return U2()!==void 0||o7()!=null}function z7(n){if(!iR())throw new wt(-203,!1)}function B7(n){return typeof n=="function"}var zo=0,fn=1,Qt=2,Ar=3,Hs=4,qs=5,_a=6,z0=7,Ws=8,Vd=9,va=10,Ti=11,lp=12,XI=13,qd=14,us=15,du=16,Id=17,il=18,p_=19,rR=20,ec=21,vM=22,cs=23,Qi=25,oR=1,cp=6,rl=7,B0=8,zd=9,wo=10,H0=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(H0||{});function js(n){return Array.isArray(n)&&typeof n[oR]=="object"}function xa(n){return Array.isArray(n)&&n[oR]===!0}function Bw(n){return(n.flags&4)!==0}function mp(n){return n.componentOffset>-1}function m_(n){return(n.flags&1)===1}function ic(n){return!!n.template}function j0(n){return(n[Qt]&512)!==0}var VM=class{constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function sR(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}function Mr(){return aR}function aR(n){return n.type.prototype.ngOnChanges&&(n.setInput=j7),H7}Mr.ngInherit=!0;function H7(){let n=cR(this),t=n?.current;if(t){let e=n.previous;if(e===Ld)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function j7(n,t,e,i,r){let o=this.declaredInputs[i],s=cR(n)||W7(n,{previous:Ld,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new VM(u&&u.currentValue,e,l===Ld),sR(n,t,r,e)}var lR="__ngSimpleChanges__";function cR(n){return n[lR]||null}function W7(n,t){return n[lR]=t}var ZI=null;var pa=function(n,t,e){ZI?.(n,t,e)},G7="svg",$7="math";function Gs(n){for(;Array.isArray(n);)n=n[zo];return n}function uR(n,t){return Gs(t[n])}function Bo(n,t){return Gs(t[n.index])}function dR(n,t){return n.data[t]}function g_(n,t){return n[t]}function cc(n,t){let e=t[n];return js(e)?e:e[zo]}function q7(n){return(n[Qt]&4)===4}function Hw(n){return(n[Qt]&128)===128}function Y7(n){return xa(n[Ar])}function Bd(n,t){return t==null?null:n[t]}function fR(n){n[Id]=0}function hR(n){n[Qt]&1024||(n[Qt]|=1024,Hw(n)&&v_(n))}function X7(n,t){for(;n>0;)t=t[qd],n--;return t}function __(n){return!!(n[Qt]&9216||n[cs]?.dirty)}function zM(n){n[va].changeDetectionScheduler?.notify(8),n[Qt]&64&&(n[Qt]|=1024),__(n)&&v_(n)}function v_(n){n[va].changeDetectionScheduler?.notify(0);let t=fu(n);for(;t!==null&&!(t[Qt]&8192||(t[Qt]|=8192,!Hw(t)));)t=fu(t)}function pR(n,t){if((n[Qt]&256)===256)throw new wt(911,!1);n[ec]===null&&(n[ec]=[]),n[ec].push(t)}function Z7(n,t){if(n[ec]===null)return;let e=n[ec].indexOf(t);e!==-1&&n[ec].splice(e,1)}function fu(n){let t=n[Ar];return xa(t)?t[Ar]:t}var xn={lFrame:wR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mR=!1;function K7(){return xn.lFrame.elementDepthCount}function J7(){xn.lFrame.elementDepthCount++}function Q7(){xn.lFrame.elementDepthCount--}function gR(){return xn.bindingsEnabled}function gp(){return xn.skipHydrationRootTNode!==null}function e9(n){return xn.skipHydrationRootTNode===n}function t9(n){xn.skipHydrationRootTNode=n}function n9(){xn.skipHydrationRootTNode=null}function ln(){return xn.lFrame.lView}function dr(){return xn.lFrame.tView}function De(n){return xn.lFrame.contextLView=n,n[Ws]}function Oe(n){return xn.lFrame.contextLView=null,n}function Ir(){let n=_R();for(;n!==null&&n.type===64;)n=n.parent;return n}function _R(){return xn.lFrame.currentTNode}function i9(){let n=xn.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function yu(n,t){let e=xn.lFrame;e.currentTNode=n,e.isParent=t}function jw(){return xn.lFrame.isParent}function vR(){xn.lFrame.isParent=!1}function r9(){return xn.lFrame.contextLView}function yR(){return mR}function KI(n){mR=n}function fs(){let n=xn.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function o9(){return xn.lFrame.bindingIndex}function s9(n){return xn.lFrame.bindingIndex=n}function y_(){return xn.lFrame.bindingIndex++}function xR(n){let t=xn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function a9(){return xn.lFrame.inI18n}function l9(n,t){let e=xn.lFrame;e.bindingIndex=e.bindingRootIndex=n,BM(t)}function c9(){return xn.lFrame.currentDirectiveIndex}function BM(n){xn.lFrame.currentDirectiveIndex=n}function u9(n){let t=xn.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function bR(){return xn.lFrame.currentQueryIndex}function Ww(n){xn.lFrame.currentQueryIndex=n}function d9(n){let t=n[fn];return t.type===2?t.declTNode:t.type===1?n[qs]:null}function CR(n,t,e){if(e&Tn.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&Tn.Host);)if(r=d9(o),r===null||(o=o[qd],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=xn.lFrame=MR();return i.currentTNode=t,i.lView=n,!0}function Gw(n){let t=MR(),e=n[fn];xn.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function MR(){let n=xn.lFrame,t=n===null?null:n.child;return t===null?wR(n):t}function wR(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function ER(){let n=xn.lFrame;return xn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var SR=ER;function $w(){let n=ER();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function f9(n){return(xn.lFrame.contextLView=X7(n,xn.lFrame.contextLView))[Ws]}function xu(){return xn.lFrame.selectedIndex}function hu(n){xn.lFrame.selectedIndex=n}function x_(){let n=xn.lFrame;return dR(n.tView,n.selectedIndex)}function PR(){return xn.lFrame.currentNamespace}var TR=!0;function b_(){return TR}function uc(n){TR=n}function h9(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=aR(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function C_(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),u&&((n.viewHooks??=[]).push(e,u),(n.viewCheckHooks??=[]).push(e,u)),f!=null&&(n.destroyHooks??=[]).push(e,f)}}function A0(n,t,e){DR(n,t,3,e)}function I0(n,t,e,i){(n[Qt]&3)===e&&DR(n,t,e,i)}function yM(n,t){let e=n[Qt];(e&3)===t&&(e&=16383,e+=1,n[Qt]=e)}function DR(n,t,e,i){let r=i!==void 0?n[Id]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(n[Id]+=65536),(a<o||o==-1)&&(p9(n,e,t,l),n[Id]=(n[Id]&4294901760)+l+2),l++}function JI(n,t){pa(4,n,t);let e=$n(null);try{t.call(n)}finally{$n(e),pa(5,n,t)}}function p9(n,t,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=n[s];r?n[Qt]>>14<n[Id]>>16&&(n[Qt]&3)===t&&(n[Qt]+=16384,JI(a,o)):JI(a,o)}var Fd=-1,pu=class{constructor(t,e,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=i}};function m9(n){return n instanceof pu}function g9(n){return(n.flags&8)!==0}function _9(n){return(n.flags&16)!==0}var xM={},HM=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=d_(i);let r=this.injector.get(t,xM,i);return r!==xM||e===xM?r:this.parentInjector.get(t,e,i)}};function OR(n){return n!==Fd}function W0(n){return n&32767}function v9(n){return n>>16}function G0(n,t){let e=v9(n),i=t;for(;e>0;)i=i[qd],e--;return i}var jM=!0;function $0(n){let t=jM;return jM=n,t}var y9=256,AR=y9-1,IR=5,x9=0,ma={};function b9(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(rp)&&(i=e[rp]),i==null&&(i=e[rp]=x9++);let r=i&AR,o=1<<r;t.data[n+(r>>IR)]|=o}function q0(n,t){let e=RR(n,t);if(e!==-1)return e;let i=t[fn];i.firstCreatePass&&(n.injectorIndex=t.length,bM(i.data,n),bM(t,null),bM(i.blueprint,null));let r=qw(n,t),o=n.injectorIndex;if(OR(r)){let s=W0(r),a=G0(r,t),l=a[fn].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function bM(n,t){n.push(0,0,0,0,0,0,0,0,t)}function RR(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function qw(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=UR(r),i===null)return Fd;if(e++,r=r[qd],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Fd}function WM(n,t,e){b9(n,t,e)}function C9(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(G2(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function kR(n,t,e){if(e&Tn.Optional||n!==void 0)return n;Nw(t,"NodeInjector")}function NR(n,t,e,i){if(e&Tn.Optional&&i===void 0&&(i=null),!(e&(Tn.Self|Tn.Host))){let r=n[Vd],o=Mo(void 0);try{return r?r.get(t,i,e&Tn.Optional):V2(t,i,e&Tn.Optional)}finally{Mo(o)}}return kR(i,t,e)}function FR(n,t,e,i=Tn.Default,r){if(n!==null){if(t[Qt]&2048&&!(i&Tn.Self)){let s=S9(n,t,e,i,ma);if(s!==ma)return s}let o=LR(n,t,e,i,ma);if(o!==ma)return o}return NR(t,e,i,r)}function LR(n,t,e,i,r){let o=w9(e);if(typeof o=="function"){if(!CR(t,n,i))return i&Tn.Host?kR(r,e,i):NR(t,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Tn.Optional))Nw(e);else return s}finally{SR()}}else if(typeof o=="number"){let s=null,a=RR(n,t),l=Fd,u=i&Tn.Host?t[us][qs]:null;for((a===-1||i&Tn.SkipSelf)&&(l=a===-1?qw(n,t):t[a+8],l===Fd||!e2(i,!1)?a=-1:(s=t[fn],a=W0(l),t=G0(l,t)));a!==-1;){let f=t[fn];if(QI(o,a,f.data)){let h=M9(a,t,e,s,i,u);if(h!==ma)return h}l=t[a+8],l!==Fd&&e2(i,t[fn].data[a+8]===u)&&QI(o,a,t)?(s=f,a=W0(l),t=G0(l,t)):a=-1}}return r}function M9(n,t,e,i,r,o){let s=t[fn],a=s.data[n+8],l=i==null?mp(a)&&jM:i!=s&&(a.type&3)!==0,u=r&Tn.Host&&o===a,f=R0(a,s,e,l,u);return f!==null?mu(t,s,f,a):ma}function R0(n,t,e,i,r){let o=n.providerIndexes,s=t.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,h=i?a:a+f,m=r?a+f:u;for(let p=h;p<m;p++){let y=s[p];if(p<l&&e===y||p>=l&&y.type===e)return p}if(r){let p=s[l];if(p&&ic(p)&&p.type===e)return l}return null}function mu(n,t,e,i){let r=n[e],o=t.data;if(m9(r)){let s=r;s.resolving&&e7(QG(o[e]));let a=$0(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?Mo(s.injectImpl):null,f=CR(n,i,Tn.Default);try{r=n[e]=s.factory(void 0,o,n,i),t.firstCreatePass&&e>=i.directiveStart&&h9(e,o[e],t)}finally{u!==null&&Mo(u),$0(a),s.resolving=!1,SR()}}return r}function w9(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(rp)?n[rp]:void 0;return typeof t=="number"?t>=0?t&AR:E9:t}function QI(n,t,e){let i=1<<n;return!!(e[t+(n>>IR)]&i)}function e2(n,t){return!(n&Tn.Self)&&!(n&Tn.Host&&t)}var au=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return FR(this._tNode,this._lView,t,d_(i),e)}};function E9(){return new au(Ir(),ln())}function zr(n){return fp(()=>{let t=n.prototype.constructor,e=t[F0]||GM(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[F0]||GM(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function GM(n){return R2(n)?()=>{let t=GM(ao(n));return t&&t()}:cu(n)}function S9(n,t,e,i,r){let o=n,s=t;for(;o!==null&&s!==null&&s[Qt]&2048&&!(s[Qt]&512);){let a=LR(o,s,e,i|Tn.Self,ma);if(a!==ma)return a;let l=o.parent;if(!l){let u=s[rR];if(u){let f=u.get(e,ma,i);if(f!==ma)return f}l=UR(s),s=s[qd]}o=l}return r}function UR(n){let t=n[fn],e=t.type;return e===2?t.declTNode:e===1?n[qs]:null}function Yw(n){return C9(Ir(),n)}function t2(n,t=null,e=null,i){let r=VR(n,t,e,i);return r.resolveInjectorInitializers(),r}function VR(n,t=null,e=null,i,r=new Set){let o=[e||Vo,Uw(n)];return i=i||(typeof n=="object"?void 0:lo(n)),new ap(o,t||zw(),i||null,r)}var Eo=class n{static{this.THROW_IF_NOT_FOUND=op}static{this.NULL=new V0}static create(t,e){if(Array.isArray(t))return t2({name:""},e,t,"");{let i=t.name??"";return t2({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Le({token:n,providedIn:"any",factory:()=>qe(H2)})}static{this.__NG_ELEMENT_ID__=-1}};var P9=new xt("");P9.__NG_ELEMENT_ID__=n=>{let t=Ir();if(t===null)throw new wt(204,!1);if(t.type&2)return t.value;if(n&Tn.Optional)return null;throw new wt(204,!1)};var T9="ngOriginalError";function CM(n){return n[T9]}var zR=!0,Xw=(()=>{class n{static{this.__NG_ELEMENT_ID__=D9}static{this.__NG_ENV_ID__=e=>e}}return n})(),$M=class extends Xw{constructor(t){super(),this._lView=t}onDestroy(t){return pR(this._lView,t),()=>Z7(this._lView,t)}};function D9(){return new $M(ln())}var sl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pi(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}}return n})();var qM=class extends An{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,iR()&&(this.destroyRef=Be(Xw,{optional:!0})??void 0,this.pendingTasks=Be(sl,{optional:!0})??void 0)}emit(t){let e=$n(null);try{super.next(t)}finally{$n(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof zi&&t.add(a),a}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(e),i!==void 0&&this.pendingTasks?.remove(i)})}}},gt=qM;function Y0(...n){}function BR(n){let t,e;function i(){n=Y0;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function n2(n){return queueMicrotask(()=>n()),()=>{n=Y0}}var Zw="isAngularZone",X0=Zw+"_ID",O9=0,qn=class n{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1);let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=zR}=t;if(typeof Zone>"u")throw new wt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,R9(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Zw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new wt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new wt(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,A9,Y0,Y0);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},A9={};function Kw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I9(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){BR(()=>{n.callbackScheduled=!1,YM(n),n.isCheckStableRunning=!0,Kw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),YM(n)}function R9(n){let t=()=>{I9(n)},e=O9++;n._inner=n._inner.fork({name:"angular",properties:{[Zw]:!0,[X0]:e,[X0+e]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(k9(l))return i.invokeTask(o,s,a,l);try{return i2(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),r2(n)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return i2(n),i.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!N9(l)&&t(),r2(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,YM(n),Kw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function YM(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function i2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function r2(n){n._nesting--,Kw(n)}var XM=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function k9(n){return HR(n,"__ignore_ng_zone__")}function N9(n){return HR(n,"__scheduler_tick__")}function HR(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var ol=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&CM(t);for(;e&&CM(e);)e=CM(e);return e||null}},F9=new xt("",{providedIn:"root",factory:()=>{let n=Be(qn),t=Be(ol);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function L9(){return Yd(Ir(),ln())}function Yd(n,t){return new fi(Bo(n,t))}var fi=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=L9}}return n})();function U9(n){return n instanceof fi?n.nativeElement:n}function V9(){return this._results[Symbol.iterator]()}var ZM=class n{get changes(){return this._changes??=new gt}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=n.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=V9)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=d7(t);(this._changesDetected=!u7(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},z9="ngSkipHydration",B9="ngskiphydration";function jR(n){let t=n.mergedAttrs;if(t===null)return!1;for(let e=0;e<t.length;e+=2){let i=t[e];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===B9)return!0}return!1}function WR(n){return n.hasAttribute(z9)}function Z0(n){return(n.flags&128)===128}function H9(n){if(Z0(n))return!0;let t=n.parent;for(;t;){if(Z0(n)||jR(t))return!0;t=t.parent}return!1}var GR=new Map,j9=0;function W9(){return j9++}function G9(n){GR.set(n[p_],n)}function KM(n){GR.delete(n[p_])}var o2="__ngContext__";function rc(n,t){js(t)?(n[o2]=t[p_],G9(t)):n[o2]=t}function $R(n){return YR(n[lp])}function qR(n){return YR(n[Hs])}function YR(n){for(;n!==null&&!xa(n);)n=n[Hs];return n}var JM;function XR(n){JM=n}function _p(){if(JM!==void 0)return JM;if(typeof document<"u")return document;throw new wt(210,!1)}var M_=new xt("",{providedIn:"root",factory:()=>$9}),$9="ng",Jw=new xt(""),Br=new xt("",{providedIn:"platform",factory:()=>"unknown"});var Qw=new xt("",{providedIn:"root",factory:()=>_p().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function q9(){let n=new Xd;return Be(Br)==="browser"&&(n.store=Y9(_p(),Be(M_))),n}var Xd=(()=>{class n{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=Le({token:n,providedIn:"root",factory:q9})}get(e,i){return this.store[e]!==void 0?this.store[e]:i}set(e,i){this.store[e]=i}remove(e){delete this.store[e]}hasKey(e){return this.store.hasOwnProperty(e)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(e,i){this.onSerializeCallbacks[e]=i}toJson(){for(let e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function Y9(n,t){let e=n.getElementById(t+"-state");if(e?.textContent)try{return JSON.parse(e.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var ZR="h",KR="b",QM=function(n){return n.FirstChild="f",n.NextSibling="n",n}(QM||{}),X9="e",Z9="t",e1="c",JR="x",K0="r",K9="i",J9="n",QR="d";var Q9="__nghData__",ek=Q9,MM="ngh",e$="nghm",tk=()=>null;function t$(n,t,e=!1){let i=n.getAttribute(MM);if(i==null)return null;let[r,o]=i.split("|");if(i=e?o:r,!i)return null;let s=o?`|${o}`:"",a=e?r:s,l={};if(i!==""){let f=t.get(Xd,null,{optional:!0});f!==null&&(l=f.get(ek,[])[Number(i)])}let u={data:l,firstChild:n.firstChild??null};return e&&(u.firstChild=n,w_(u,0,n.nextSibling)),a?n.setAttribute(MM,a):n.removeAttribute(MM),u}function n$(){tk=t$}function t1(n,t,e=!1){return tk(n,t,e)}function i$(n){let t=n._lView;return t[fn].type===2?null:(j0(t)&&(t=t[Qi]),t)}function r$(n){return n.textContent?.replace(/\s/gm,"")}function o$(n){let t=_p(),e=t.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=r$(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=e.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function w_(n,t,e){n.segmentHeads??={},n.segmentHeads[t]=e}function ew(n,t){return n.segmentHeads?.[t]??null}function s$(n,t){let e=n.data,i=e[X9]?.[t]??null;return i===null&&e[e1]?.[t]&&(i=n1(n,t)),i}function nk(n,t){return n.data[e1]?.[t]??null}function n1(n,t){let e=nk(n,t)??[],i=0;for(let r of e)i+=r[K0]*(r[JR]??1);return i}function a$(n){if(typeof n.disconnectedNodes>"u"){let t=n.data[QR];n.disconnectedNodes=t?new Set(t):null}return n.disconnectedNodes}function vp(n,t){if(typeof n.disconnectedNodes>"u"){let e=n.data[QR];n.disconnectedNodes=e?new Set(e):null}return!!a$(n)?.has(t)}var C0=new xt(""),ik=!1,rk=new xt("",{providedIn:"root",factory:()=>ik});var M0;function l$(){if(M0===void 0&&(M0=null,nl.trustedTypes))try{M0=nl.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return M0}function E_(n){return l$()?.createHTML(n)||n}var w0;function ok(){if(w0===void 0&&(w0=null,nl.trustedTypes))try{w0=nl.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return w0}function s2(n){return ok()?.createHTML(n)||n}function a2(n){return ok()?.createScriptURL(n)||n}var J0=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${A2})`}};function Zd(n){return n instanceof J0?n.changingThisBreaksApplicationSecurity:n}function S_(n,t){let e=c$(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${A2})`)}return e===t}function c$(n){return n instanceof J0&&n.getTypeName()||null}function u$(n){let t=new nw(n);return d$()?new tw(t):t}var tw=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(E_(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},nw=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=E_(t),e}};function d$(){try{return!!new window.DOMParser().parseFromString(E_(""),"text/html")}catch{return!1}}var f$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function i1(n){return n=String(n),n.match(f$)?n:"unsafe:"+n}function al(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function yp(...n){let t={};for(let e of n)for(let i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}var sk=al("area,br,col,hr,img,wbr"),ak=al("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lk=al("rp,rt"),h$=yp(lk,ak),p$=yp(ak,al("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),m$=yp(lk,al("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),l2=yp(sk,p$,m$,h$),ck=al("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),g$=al("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_$=al("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),v$=yp(ck,g$,_$),y$=al("script,style,template"),iw=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=C$(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=b$(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=c2(t).toLowerCase();if(!l2.hasOwnProperty(e))return this.sanitizedSomething=!0,!y$.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=t.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!v$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;ck[a]&&(l=i1(l)),this.buf.push(" ",s,'="',u2(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=c2(t).toLowerCase();l2.hasOwnProperty(e)&&!sk.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(u2(t))}};function x$(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function b$(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw uk(t);return t}function C$(n){let t=n.firstChild;if(t&&x$(n,t))throw uk(t);return t}function c2(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function uk(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var M$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,w$=/([^\#-~ |!])/g;function u2(n){return n.replace(/&/g,"&amp;").replace(M$,function(t){let e=t.charCodeAt(0),i=t.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(w$,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var E0;function dk(n,t){let e=null;try{E0=E0||u$(n);let i=t?String(t):"";e=E0.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=E0.getInertBodyElement(i)}while(i!==o);let a=new iw().sanitizeChildren(d2(e)||e);return E_(a)}finally{if(e){let i=d2(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function d2(n){return"content"in n&&E$(n)?n.content:null}function E$(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var xp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(xp||{});function P_(n){let t=r1();return t?s2(t.sanitize(xp.HTML,n)||""):S_(n,"HTML")?s2(Zd(n)):dk(_p(),lu(n))}function Kd(n){let t=r1();return t?t.sanitize(xp.URL,n)||"":S_(n,"URL")?Zd(n):i1(lu(n))}function S$(n){let t=r1();if(t)return a2(t.sanitize(xp.RESOURCE_URL,n)||"");if(S_(n,"ResourceURL"))return a2(Zd(n));throw new wt(904,!1)}function P$(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?S$:Kd}function fk(n,t,e){return P$(t,e)(n)}function r1(){let n=ln();return n&&n[va].sanitizer}var T$=/^>|^->|<!--|-->|--!>|<!-$/g,D$=/(<|>)/g,O$="\u200B$1\u200B";function A$(n){return n.replace(T$,t=>t.replace(D$,O$))}function I$(n){return n.ownerDocument.body}function hk(n){return n instanceof Function?n():n}function np(n){return(n??Be(Eo)).get(Br)==="browser"}var ya=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ya||{}),R$;function o1(n,t){return R$(n,t)}function Rd(n,t,e,i,r){if(i!=null){let o,s=!1;xa(i)?o=i:js(i)&&(s=!0,i=i[zo]);let a=Gs(i);n===0&&e!==null?r==null?yk(t,e,a):Q0(t,e,a,r||null,!0):n===1&&e!==null?Q0(t,e,a,r||null,!0):n===2?l1(t,a,s):n===3&&t.destroyNode(a),o!=null&&Y$(t,n,o,e,r)}}function pk(n,t){return n.createText(t)}function k$(n,t,e){n.setValue(t,e)}function mk(n,t){return n.createComment(A$(t))}function s1(n,t,e){return n.createElement(t,e)}function N$(n,t){gk(n,t),t[zo]=null,t[qs]=null}function F$(n,t,e,i,r,o){i[zo]=r,i[qs]=t,D_(n,i,e,1,r,o)}function gk(n,t){t[va].changeDetectionScheduler?.notify(9),D_(n,t,t[Ti],2,null,null)}function L$(n){let t=n[lp];if(!t)return wM(n[fn],n);for(;t;){let e=null;if(js(t))e=t[lp];else{let i=t[wo];i&&(e=i)}if(!e){for(;t&&!t[Hs]&&t!==n;)js(t)&&wM(t[fn],t),t=t[Ar];t===null&&(t=n),js(t)&&wM(t[fn],t),e=t&&t[Hs]}t=e}}function U$(n,t,e,i){let r=wo+i,o=e.length;i>0&&(e[r-1][Hs]=t),i<o-wo?(t[Hs]=e[r],B2(e,wo+i,t)):(e.push(t),t[Hs]=null),t[Ar]=e;let s=t[du];s!==null&&e!==s&&_k(s,t);let a=t[il];a!==null&&a.insertView(n),zM(t),t[Qt]|=128}function _k(n,t){let e=n[zd],i=t[Ar];if(js(i))n[Qt]|=H0.HasTransplantedViews;else{let r=i[Ar][us];t[us]!==r&&(n[Qt]|=H0.HasTransplantedViews)}e===null?n[zd]=[t]:e.push(t)}function a1(n,t){let e=n[zd],i=e.indexOf(t);e.splice(i,1)}function rw(n,t){if(n.length<=wo)return;let e=wo+t,i=n[e];if(i){let r=i[du];r!==null&&r!==n&&a1(r,i),t>0&&(n[e-1][Hs]=i[Hs]);let o=U0(n,wo+t);N$(i[fn],i);let s=o[il];s!==null&&s.detachView(o[fn]),i[Ar]=null,i[Hs]=null,i[Qt]&=-129}return i}function vk(n,t){if(!(t[Qt]&256)){let e=t[Ti];e.destroyNode&&D_(n,t,e,3,null,null),L$(t)}}function wM(n,t){if(t[Qt]&256)return;let e=$n(null);try{t[Qt]&=-129,t[Qt]|=256,t[cs]&&qC(t[cs]),z$(n,t),V$(n,t),t[fn].type===1&&t[Ti].destroy();let i=t[du];if(i!==null&&xa(t[Ar])){i!==t[Ar]&&a1(i,t);let r=t[il];r!==null&&r.detachView(n)}KM(t)}finally{$n(e)}}function V$(n,t){let e=n.cleanup,i=t[z0];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[e[o+1]];e[o].call(s)}i!==null&&(t[z0]=null);let r=t[ec];if(r!==null){t[ec]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function z$(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof pu)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];pa(4,a,l);try{l.call(a)}finally{pa(5,a,l)}}else{pa(4,r,o);try{o.call(r)}finally{pa(5,r,o)}}}}}function B$(n,t,e){return H$(n,t.parent,e)}function H$(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[zo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===ga.None||o===ga.Emulated)return null}return Bo(i,e)}}function Q0(n,t,e,i,r){n.insertBefore(t,e,i,r)}function yk(n,t,e){n.appendChild(t,e)}function f2(n,t,e,i,r){i!==null?Q0(n,t,e,i,r):yk(n,t,e)}function xk(n,t){return n.parentNode(t)}function j$(n,t){return n.nextSibling(t)}function W$(n,t,e){return $$(n,t,e)}function G$(n,t,e){return n.type&40?Bo(n,e):null}var $$=G$,h2;function T_(n,t,e,i){let r=B$(n,i,t),o=t[Ti],s=i.parent||t[qs],a=W$(s,i,t);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)f2(o,r,e[l],a,!1);else f2(o,r,e,a,!1);h2!==void 0&&h2(o,i,t,e,r)}function ip(n,t){if(t!==null){let e=t.type;if(e&3)return Bo(t,n);if(e&4)return ow(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return ip(n,i);{let r=n[t.index];return xa(r)?ow(-1,r):Gs(r)}}else{if(e&128)return ip(n,t.next);if(e&32)return o1(t,n)()||Gs(n[t.index]);{let i=bk(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=fu(n[us]);return ip(r,i)}else return ip(n,t.next)}}}return null}function bk(n,t){if(t!==null){let i=n[us][qs],r=t.projection;return i.projection[r]}return null}function ow(n,t){let e=wo+n+1;if(e<t.length){let i=t[e],r=i[fn].firstChild;if(r!==null)return ip(i,r)}return t[rl]}function l1(n,t,e){n.removeChild(null,t,e)}function Ck(n){n.textContent=""}function c1(n,t,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(s&&t===0&&(a&&rc(Gs(a),i),e.flags|=2),(e.flags&32)!==32)if(l&8)c1(n,t,e.child,i,r,o,!1),Rd(t,n,r,a,o);else if(l&32){let u=o1(e,i),f;for(;f=u();)Rd(t,n,r,f,o);Rd(t,n,r,a,o)}else l&16?q$(n,t,i,e,r,o):Rd(t,n,r,a,o);e=s?e.projectionNext:e.next}}function D_(n,t,e,i,r,o){c1(e,i,n.firstChild,t,r,o,!1)}function q$(n,t,e,i,r,o){let s=e[us],l=s[qs].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Rd(t,n,r,f,o)}else{let u=l,f=s[Ar];Z0(i)&&(u.flags|=128),c1(n,t,u,f,r,o,!0)}}function Y$(n,t,e,i,r){let o=e[rl],s=Gs(e);o!==s&&Rd(t,n,i,o,r);for(let a=wo;a<e.length;a++){let l=e[a];D_(l[fn],l,n,t,i,o)}}function X$(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:ya.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ya.Important),n.setStyle(e,i,r,o))}}function Z$(n,t,e){n.setAttribute(t,"style",e)}function Mk(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function wk(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&NM(n,t,i),r!==null&&Mk(n,t,r),o!==null&&Z$(n,t,o)}var Ys={};function A(n=1){Ek(dr(),ln(),xu()+n,!1)}function Ek(n,t,e,i){if(!i)if((t[Qt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&A0(t,o,e)}else{let o=n.preOrderHooks;o!==null&&I0(t,o,0,e)}hu(e)}function $(n,t=Tn.Default){let e=ln();if(e===null)return qe(n,t);let i=Ir();return FR(i,e,ao(n),t)}function Sk(){let n="invalid";throw new Error(n)}function Pk(n,t,e,i,r,o){let s=$n(null);try{let a=null;r&tc.SignalBased&&(a=t[i][Ja]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&tc.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(t,o)),n.setInput!==null?n.setInput(t,a,o,e,i):sR(t,a,i,o)}finally{$n(s)}}function K$(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)hu(~r);else{let o=r,s=e[++i],a=e[++i];l9(s,o);let l=t[o];a(2,l)}}}finally{hu(-1)}}function O_(n,t,e,i,r,o,s,a,l,u,f){let h=t.blueprint.slice();return h[zo]=r,h[Qt]=i|4|128|8|64,(u!==null||n&&n[Qt]&2048)&&(h[Qt]|=2048),fR(h),h[Ar]=h[qd]=n,h[Ws]=e,h[va]=s||n&&n[va],h[Ti]=a||n&&n[Ti],h[Vd]=l||n&&n[Vd]||null,h[qs]=o,h[p_]=W9(),h[_a]=f,h[rR]=u,h[us]=t.type==2?n[us]:h,h}function bp(n,t,e,i,r){let o=n.data[t];if(o===null)o=J$(n,t,e,i,r),a9()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=i9();o.injectorIndex=s===null?-1:s.injectorIndex}return yu(o,!0),o}function J$(n,t,e,i,r){let o=_R(),s=jw(),a=s?o:o&&o.parent,l=n.data[t]=oq(n,a,e,t,i,r);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function Tk(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Dk(n,t,e,i,r){let o=xu(),s=i&2;try{hu(-1),s&&t.length>Qi&&Ek(n,t,Qi,!1),pa(s?2:0,r),e(i,r)}finally{hu(o),pa(s?3:1,r)}}function u1(n,t,e){if(Bw(t)){let i=$n(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{$n(i)}}}function d1(n,t,e){gR()&&(dq(n,t,e,Bo(e,t)),(e.flags&64)===64&&Rk(n,t,e))}function f1(n,t,e=Bo){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(t,n):n[s];n[r++]=a}}}function Ok(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=h1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function h1(n,t,e,i,r,o,s,a,l,u,f){let h=Qi+i,m=h+r,p=Q$(h,m),y=typeof u=="function"?u():u;return p[fn]={type:n,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:y,incompleteFirstPass:!1,ssrId:f}}function Q$(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ys);return e}function eq(n,t,e,i){let o=i.get(rk,ik)||e===ga.ShadowDom,s=n.selectRootElement(t,o);return tq(s),s}function tq(n){Ak(n)}var Ak=()=>null;function nq(n){WR(n)?Ck(n):o$(n)}function iq(){Ak=nq}function rq(n,t,e,i){let r=Fk(t);r.push(e),n.firstCreatePass&&Lk(n).push(i,r.length-1)}function oq(n,t,e,i,r,o){let s=t?t.injectorIndex:-1,a=0;return gp()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function p2(n,t,e,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=tc.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(r!==null){if(!r.hasOwnProperty(o))continue;u=r[o]}n===0?m2(i,e,u,a,l):m2(i,e,u,a)}return i}function m2(n,t,e,i,r){let o;n.hasOwnProperty(e)?(o=n[e]).push(t,i):o=n[e]=[t,i],r!==void 0&&o.push(r)}function sq(n,t,e){let i=t.directiveStart,r=t.directiveEnd,o=n.data,s=t.attrs,a=[],l=null,u=null;for(let f=i;f<r;f++){let h=o[f],m=e?e.get(h):null,p=m?m.inputs:null,y=m?m.outputs:null;l=p2(0,h.inputs,f,l,p),u=p2(1,h.outputs,f,u,y);let M=l!==null&&s!==null&&!Lw(t)?Cq(l,f,s):null;a.push(M)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}function aq(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function p1(n,t,e,i,r,o,s,a){let l=Bo(t,e),u=t.inputs,f;!a&&u!=null&&(f=u[i])?(g1(n,e,f,i,r),mp(t)&&lq(e,t.index)):t.type&3?(i=aq(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function lq(n,t){let e=cc(t,n);e[Qt]&16||(e[Qt]|=64)}function m1(n,t,e,i){if(gR()){let r=i===null?null:{"":-1},o=hq(n,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Ik(n,t,e,s,r,a),r&&pq(e,i,r)}e.mergedAttrs=sp(e.mergedAttrs,e.attrs)}function Ik(n,t,e,i,r,o){for(let u=0;u<i.length;u++)WM(q0(e,t),n,i[u].type);gq(e,n.data.length,i.length);for(let u=0;u<i.length;u++){let f=i[u];f.providersResolver&&f.providersResolver(f)}let s=!1,a=!1,l=Tk(n,t,i.length,null);for(let u=0;u<i.length;u++){let f=i[u];e.mergedAttrs=sp(e.mergedAttrs,f.hostAttrs),_q(n,e,t,l,f),mq(l,f,r),f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let h=f.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}sq(n,e,o)}function cq(n,t,e,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;uq(s)!=a&&s.push(a),s.push(e,i,o)}}function uq(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function dq(n,t,e,i){let r=e.directiveStart,o=e.directiveEnd;mp(e)&&vq(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||q0(e,t),rc(i,t);let s=e.initialInputs;for(let a=r;a<o;a++){let l=n.data[a],u=mu(t,n,a,e);if(rc(u,t),s!==null&&bq(t,a-r,u,l,e,s),ic(l)){let f=cc(e.index,t);f[Ws]=mu(t,n,a,e)}}}function Rk(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=c9();try{hu(o);for(let a=i;a<r;a++){let l=n.data[a],u=t[a];BM(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&fq(l,u)}}finally{hu(-1),BM(s)}}function fq(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function hq(n,t){let e=n.directiveRegistry,i=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(b7(t,s.selectors,!1))if(i||(i=[]),ic(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;sw(n,t,l)}else i.unshift(s),sw(n,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function sw(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function pq(n,t,e){if(t){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new wt(-301,!1);i.push(t[r],o)}}}function mq(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;ic(t)&&(e[""]=n)}}function gq(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function _q(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=cu(r.type,!0)),s=new pu(o,ic(r),$);n.blueprint[i]=s,e[i]=s,cq(n,t,i,Tk(n,e,r.hostVars,Ys),r)}function vq(n,t,e){let i=Bo(t,n),r=Ok(e),o=n[va].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=A_(n,O_(n,r,null,s,i,t,null,o.createRenderer(i,e),null,null,null));n[t.index]=a}function yq(n,t,e,i,r,o){let s=Bo(n,t);xq(t[Ti],s,o,n.value,e,i,r)}function xq(n,t,e,i,r,o,s){if(o==null)n.removeAttribute(t,r,e);else{let a=s==null?lu(o):s(o,i||"",r);n.setAttribute(t,r,a,e)}}function bq(n,t,e,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],f=s[a++],h=s[a++];Pk(i,e,l,u,f,h)}}function Cq(n,t,e){let i=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return i}function kk(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function Nk(n,t){let e=n.contentQueries;if(e!==null){let i=$n(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=n.data[s];Ww(o),a.contentQueries(2,t[s],s)}}}finally{$n(i)}}}function A_(n,t){return n[lp]?n[XI][Hs]=t:n[lp]=t,n[XI]=t,t}function aw(n,t,e){Ww(0);let i=$n(null);try{t(n,e)}finally{$n(i)}}function Fk(n){return n[z0]??=[]}function Lk(n){return n.cleanup??=[]}function Uk(n,t){let e=n[Vd],i=e?e.get(ol,null):null;i&&i.handleError(t)}function g1(n,t,e,i,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],l=e[o++],u=t[s],f=n.data[s];Pk(f,u,i,a,l,r)}}function Vk(n,t,e){let i=uR(t,n);k$(n[Ti],i,e)}function Mq(n,t){let e=cc(t,n),i=e[fn];wq(i,e);let r=e[zo];r!==null&&e[_a]===null&&(e[_a]=t1(r,e[Vd])),_1(i,e,e[Ws])}function wq(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function _1(n,t,e){Gw(t);try{let i=n.viewQuery;i!==null&&aw(1,i,e);let r=n.template;r!==null&&Dk(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[il]?.finishViewCreation(n),n.staticContentQueries&&Nk(n,t),n.staticViewQueries&&aw(2,n.viewQuery,e);let o=n.components;o!==null&&Eq(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Qt]&=-5,$w()}}function Eq(n,t){for(let e=0;e<t.length;e++)Mq(n,t[e])}function Sq(n,t,e,i){let r=$n(null);try{let o=t.tView,a=n[Qt]&4096?4096:16,l=O_(n,o,e,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=n[t.index];l[du]=u;let f=n[il];return f!==null&&(l[il]=f.createEmbeddedView(o)),_1(o,l,e),l}finally{$n(r)}}function g2(n,t){return!t||t.firstChild===null||Z0(n)}function Pq(n,t,e,i=!0){let r=t[fn];if(U$(r,t,n,e),i){let s=ow(e,n),a=t[Ti],l=xk(a,n[rl]);l!==null&&F$(r,n[qs],a,t,l,s)}let o=t[_a];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function e_(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(Gs(o)),xa(o)&&Tq(o,i);let s=e.type;if(s&8)e_(n,t,e.child,i);else if(s&32){let a=o1(e,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=bk(t,e);if(Array.isArray(a))i.push(...a);else{let l=fu(t[us]);e_(l[fn],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function Tq(n,t){for(let e=wo;e<n.length;e++){let i=n[e],r=i[fn].firstChild;r!==null&&e_(i[fn],i,r,t)}n[rl]!==n[zo]&&t.push(n[rl])}var zk=[];function Dq(n){return n[cs]??Oq(n)}function Oq(n){let t=zk.pop()??Object.create(Iq);return t.lView=n,t}function Aq(n){n.lView[cs]!==n&&(n.lView=null,zk.push(n))}var Iq=Yt(je({},Xh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{v_(n.lView)},consumerOnSignalRead(){this.lView[cs]=this}});function Rq(n){let t=n[cs]??Object.create(kq);return t.lView=n,t}var kq=Yt(je({},Xh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let t=fu(n.lView);for(;t&&!Bk(t[fn]);)t=fu(t);t&&hR(t)},consumerOnSignalRead(){this.lView[cs]=this}});function Bk(n){return n.type!==2}var Nq=100;function Hk(n,t=!0,e=0){let i=n[va],r=i.rendererFactory,o=!1;o||r.begin?.();try{Fq(n,e)}catch(s){throw t&&Uk(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function Fq(n,t){let e=yR();try{KI(!0),lw(n,t);let i=0;for(;__(n);){if(i===Nq)throw new wt(103,!1);i++,lw(n,1)}}finally{KI(e)}}function Lq(n,t,e,i){let r=t[Qt];if((r&256)===256)return;let o=!1,s=!1;!o&&t[va].inlineEffectRunner?.flush(),Gw(t);let a=!0,l=null,u=null;o||(Bk(n)?(u=Dq(t),l=$g(u)):QA()===null?(a=!1,u=Rq(t),l=$g(u)):t[cs]&&(qC(t[cs]),t[cs]=null));try{fR(t),s9(n.bindingStartIndex),e!==null&&Dk(n,t,e,2,i);let f=(r&3)===3;if(!o)if(f){let p=n.preOrderCheckHooks;p!==null&&A0(t,p,null)}else{let p=n.preOrderHooks;p!==null&&I0(t,p,0,null),yM(t,0)}if(s||Uq(t),jk(t,0),n.contentQueries!==null&&Nk(n,t),!o)if(f){let p=n.contentCheckHooks;p!==null&&A0(t,p)}else{let p=n.contentHooks;p!==null&&I0(t,p,1),yM(t,1)}K$(n,t);let h=n.components;h!==null&&Gk(t,h,0);let m=n.viewQuery;if(m!==null&&aw(2,m,i),!o)if(f){let p=n.viewCheckHooks;p!==null&&A0(t,p)}else{let p=n.viewHooks;p!==null&&I0(t,p,2),yM(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[vM]){for(let p of t[vM])p();t[vM]=null}o||(t[Qt]&=-73)}catch(f){throw o||v_(t),f}finally{u!==null&&(GC(u,l),a&&Aq(u)),$w()}}function jk(n,t){for(let e=$R(n);e!==null;e=qR(e))for(let i=wo;i<e.length;i++){let r=e[i];Wk(r,t)}}function Uq(n){for(let t=$R(n);t!==null;t=qR(t)){if(!(t[Qt]&H0.HasTransplantedViews))continue;let e=t[zd];for(let i=0;i<e.length;i++){let r=e[i];hR(r)}}}function Vq(n,t,e){let i=cc(t,n);Wk(i,e)}function Wk(n,t){Hw(n)&&lw(n,t)}function lw(n,t){let i=n[fn],r=n[Qt],o=n[cs],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&$C(o)),s||=!1,o&&(o.dirty=!1),n[Qt]&=-9217,s)Lq(i,n,i.template,n[Ws]);else if(r&8192){jk(n,1);let a=i.components;a!==null&&Gk(n,a,1)}}function Gk(n,t,e){for(let i=0;i<t.length;i++)Vq(n,t[i],e)}function v1(n,t){let e=yR()?64:1088;for(n[va].changeDetectionScheduler?.notify(t);n;){n[Qt]|=e;let i=fu(n);if(j0(n)&&!i)return n;n=i}return null}var gu=class{get rootNodes(){let t=this._lView,e=t[fn];return e_(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ws]}set context(t){this._lView[Ws]=t}get destroyed(){return(this._lView[Qt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ar];if(xa(t)){let e=t[B0],i=e?e.indexOf(this):-1;i>-1&&(rw(t,i),U0(e,i))}this._attachedToViewContainer=!1}vk(this._lView[fn],this._lView)}onDestroy(t){pR(this._lView,t)}markForCheck(){v1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Qt]&=-129}reattach(){zM(this._lView),this._lView[Qt]|=128}detectChanges(){this._lView[Qt]|=1024,Hk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new wt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=j0(this._lView),e=this._lView[du];e!==null&&!t&&a1(e,this._lView),gk(this._lView[fn],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new wt(902,!1);this._appRef=t;let e=j0(this._lView),i=this._lView[du];i!==null&&!e&&_k(i,this._lView),zM(this._lView)}},_u=(()=>{class n{static{this.__NG_ELEMENT_ID__=Hq}}return n})(),zq=_u,Bq=class extends zq{constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=Sq(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new gu(r)}};function Hq(){return I_(Ir(),ln())}function I_(n,t){return n.type&4?new Bq(t,n,Yd(n,t)):null}var jq=new RegExp(`^(\\d+)*(${KR}|${ZR})*(.*)`);function Wq(n){let t=n.match(jq),[e,i,r,o]=t,s=i?parseInt(i,10):r,a=[];for(let[l,u,f]of o.matchAll(/(f|n)(\d*)/g)){let h=parseInt(f,10)||1;a.push(u,h)}return[s,...a]}function Gq(n){return!n.prev&&n.parent?.type===8}function EM(n){return n.index-Qi}function $q(n,t){let e=n.i18nNodes;if(e)return e.get(t)}function R_(n,t,e,i){let r=EM(i),o=$q(n,r);if(o===void 0){let s=n.data[J9];if(s?.[r])o=Yq(s[r],e);else if(t.firstChild===i)o=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(Gq(i)){let u=EM(i.parent);o=ew(n,u)}else{let u=Bo(l,e);if(a)o=u.firstChild;else{let f=EM(l),h=ew(n,f);if(l.type===2&&h){let p=n1(n,f)+1;o=k_(p,h)}else o=u.nextSibling}}}}return o}function k_(n,t){let e=t;for(let i=0;i<n;i++)e=e.nextSibling;return e}function qq(n,t){let e=n;for(let i=0;i<t.length;i+=2){let r=t[i],o=t[i+1];for(let s=0;s<o;s++)switch(r){case QM.FirstChild:e=e.firstChild;break;case QM.NextSibling:e=e.nextSibling;break}}return e}function Yq(n,t){let[e,...i]=Wq(n),r;if(e===ZR)r=t[us][zo];else if(e===KR)r=I$(t[us][zo]);else{let o=Number(e);r=Gs(t[o+Qi])}return qq(r,i)}var Xq=!1;function Zq(n){Xq=n}function Kq(n){let t=n[_a];if(t){let{i18nNodes:e,dehydratedIcuData:i}=t;if(e&&i){let r=n[Ti];for(let o of i.values())Jq(r,e,o)}t.i18nNodes=void 0,t.dehydratedIcuData=void 0}}function Jq(n,t,e){for(let i of e.node.cases[e.case]){let r=t.get(i.index-Qi);r&&l1(n,r,!1)}}function $k(n){let t=n[cp]??[],i=n[Ar][Ti];for(let r of t)Qq(r,i);n[cp]=Vo}function Qq(n,t){let e=0,i=n.firstChild;if(i){let r=n.data[K0];for(;e<r;){let o=i.nextSibling;l1(t,i,!1),i=o,e++}}}function qk(n){$k(n);let t=n[zo];js(t)&&t_(t);for(let e=wo;e<n.length;e++)t_(n[e])}function t_(n){Kq(n);let t=n[fn];for(let e=Qi;e<t.bindingStartIndex;e++)if(xa(n[e])){let i=n[e];qk(i)}else js(n[e])&&t_(n[e])}function eY(n){let t=n._views;for(let e of t){let i=i$(e);i!==null&&i[zo]!==null&&(js(i)?t_(i):qk(i))}}function tY(n,t){let e=[];for(let i of t)for(let r=0;r<(i[JR]??1);r++){let o={data:i,firstChild:null};i[K0]>0&&(o.firstChild=n,n=k_(i[K0],n)),e.push(o)}return[n,e]}var Yk=()=>null;function nY(n,t){let e=n[cp];return!t||e===null||e.length===0?null:e[0].data[K9]===t?e.shift():($k(n),null)}function iY(){Yk=nY}function _2(n,t){return Yk(n,t)}var Hd=class{},N_=new xt("",{providedIn:"root",factory:()=>!1});var Xk=new xt(""),Zk=new xt(""),cw=class{},n_=class{};function rY(n){let t=Error(`No component factory found for ${lo(n)}.`);return t[oY]=n,t}var oY="ngComponent";var uw=class{resolveComponentFactory(t){throw rY(t)}},oc=class{static{this.NULL=new uw}},jd=class{},Mi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>sY()}}return n})();function sY(){let n=ln(),t=Ir(),e=cc(t.index,n);return(js(e)?e:n)[Ti]}var aY=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>null})}}return n})();function i_(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=VI(r,a);else if(o==2){let l=a,u=t[++s];i=VI(i,l+": "+u+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}var r_=class extends oc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=nc(t);return new Wd(e,this.ngModule)}};function v2(n,t){let e=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:tc.None;t?e.push({propName:s,templateName:i,isSignal:(a&tc.SignalBased)!==0}):e.push({propName:s,templateName:i})}return e}function lY(n){let t=n.toLowerCase();return t==="svg"?G7:t==="math"?$7:null}var Wd=class extends n_{get inputs(){let t=this.componentDef,e=t.inputTransforms,i=v2(t.inputs,!0);if(e!==null)for(let r of i)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return i}get outputs(){return v2(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=E7(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,i,r){let o=$n(null);try{r=r||this.ngModule;let s=r instanceof co?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new HM(t,s):t,l=a.get(jd,null);if(l===null)throw new wt(407,!1);let u=a.get(aY,null),f=a.get(Hd,null),h={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:f},m=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",y=i?eq(m,i,this.componentDef.encapsulation,a):s1(m,p,lY(p)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let x=null;y!==null&&(x=t1(y,a,!0));let b=h1(0,null,null,1,0,null,null,null,null,null,null),T=O_(null,b,null,M,null,null,h,m,a,null,x);Gw(T);let E,D,L=null;try{let z=this.componentDef,k,G=null;z.findHostDirectiveDefs?(k=[],G=new Map,z.findHostDirectiveDefs(z,k,G),k.push(z)):k=[z];let F=cY(T,y);L=uY(F,y,z,k,T,h,m),D=dR(b,Qi),y&&hY(m,z,y,i),e!==void 0&&pY(D,this.ngContentSelectors,e),E=fY(L,z,k,G,T,[mY]),_1(b,T,null)}catch(z){throw L!==null&&KM(L),KM(T),z}finally{$w()}return new dw(this.componentType,E,Yd(D,T),T,D)}finally{$n(o)}}},dw=class extends cw{constructor(t,e,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new gu(r,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;g1(o[fn],o,r,t,e),this.previousInputValues.set(t,e);let s=cc(this._tNode.index,o);v1(s,1)}}get injector(){return new au(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function cY(n,t){let e=n[fn],i=Qi;return n[i]=t,bp(e,i,2,"#host",null)}function uY(n,t,e,i,r,o,s){let a=r[fn];dY(i,n,t,s);let l=null;t!==null&&(l=t1(t,r[Vd]));let u=o.rendererFactory.createRenderer(t,e),f=16;e.signals?f=4096:e.onPush&&(f=64);let h=O_(r,Ok(e),null,f,r[n.index],n,o,u,null,null,l);return a.firstCreatePass&&sw(a,n,i.length-1),A_(r,h),r[n.index]=h}function dY(n,t,e,i){for(let r of n)t.mergedAttrs=sp(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(i_(t,t.mergedAttrs,!0),e!==null&&wk(i,e,t))}function fY(n,t,e,i,r,o){let s=Ir(),a=r[fn],l=Bo(s,r);Ik(a,r,s,e,null,i);for(let f=0;f<e.length;f++){let h=s.directiveStart+f,m=mu(r,a,h,s);rc(m,r)}Rk(a,r,s),l&&rc(l,r);let u=mu(r,a,s.directiveStart+s.componentOffset,s);if(n[Ws]=r[Ws]=u,o!==null)for(let f of o)f(u,t);return u1(a,s,r),u}function hY(n,t,e,i){if(i)NM(n,e,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=S7(t.selectors[0]);r&&NM(n,e,r),o&&o.length>0&&Mk(n,e,o.join(" "))}}function pY(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null?Array.from(o):null)}}function mY(){let n=Ir();C_(ln()[fn],n)}var Ho=(()=>{class n{static{this.__NG_ELEMENT_ID__=gY}}return n})();function gY(){let n=Ir();return Jk(n,ln())}var _Y=Ho,Kk=class extends _Y{constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new au(this._hostTNode,this._hostLView)}get parentInjector(){let t=qw(this._hostTNode,this._hostLView);if(OR(t)){let e=G0(t,this._hostLView),i=W0(t),r=e[fn].data[i+8];return new au(r,e)}else return new au(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=y2(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-wo}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=_2(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,g2(this._hostTNode,s)),a}createComponent(t,e,i,r,o){let s=t&&!B7(t),a;if(s)a=e;else{let y=e||{};a=y.index,i=y.injector,r=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef}let l=s?t:new Wd(nc(t)),u=i||this.parentInjector;if(!o&&l.ngModule==null){let M=(s?u:this.parentInjector).get(co,null);M&&(o=M)}let f=nc(l.componentType??{}),h=_2(this._lContainer,f?.id??null),m=h?.firstChild??null,p=l.create(u,r,m,o);return this.insertImpl(p.hostView,a,g2(this._hostTNode,h)),p}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(Y7(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[Ar],u=new Kk(l,l[qs],l[Ar]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return Pq(s,r,o,i),t.attachToViewContainerRef(),B2(SM(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=y2(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=rw(this._lContainer,e);i&&(U0(SM(this._lContainer),e),vk(i[fn],i))}detach(t){let e=this._adjustIndex(t,-1),i=rw(this._lContainer,e);return i&&U0(SM(this._lContainer),e)!=null?new gu(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function y2(n){return n[B0]}function SM(n){return n[B0]||(n[B0]=[])}function Jk(n,t){let e,i=t[n.index];return xa(i)?e=i:(e=kk(i,t,null,n),t[n.index]=e,A_(t,e)),Qk(e,t,n,i),new Kk(e,n,t)}function vY(n,t){let e=n[Ti],i=e.createComment(""),r=Bo(t,n),o=xk(e,r);return Q0(e,o,i,j$(e,r),!1),i}var Qk=eN,y1=()=>!1;function yY(n,t,e){return y1(n,t,e)}function eN(n,t,e,i){if(n[rl])return;let r;e.type&8?r=Gs(i):r=vY(t,e),n[rl]=r}function xY(n,t,e){if(n[rl]&&n[cp])return!0;let i=e[_a],r=t.index-Qi;if(!i||H9(t)||vp(i,r))return!1;let s=ew(i,r),a=i.data[e1]?.[r],[l,u]=tY(s,a);return n[rl]=l,n[cp]=u,!0}function bY(n,t,e,i){y1(n,e,t)||eN(n,t,e,i)}function CY(){Qk=bY,y1=xY}var fw=class n{constructor(t){this.queryList=t,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},hw=class n{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)x1(t,e).matches!==null&&this.queries[e].setDirty()}},pw=class{constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=OY(t):this.predicate=t}},mw=class n{constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},gw=class n{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,MY(e,o)),this.matchTNodeWithReadOption(t,e,R0(e,t,o,!1,!1))}else i===_u?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,R0(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===fi||r===Ho||r===_u&&e.type&4)this.addMatch(e.index,-2);else{let o=R0(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function MY(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function wY(n,t){return n.type&11?Yd(n,t):n.type&4?I_(n,t):null}function EY(n,t,e,i){return e===-1?wY(t,n):e===-2?SY(n,t,i):mu(n,n[fn],e,t)}function SY(n,t,e){if(e===fi)return Yd(t,n);if(e===_u)return I_(t,n);if(e===Ho)return Jk(t,n)}function tN(n,t,e,i){let r=t[il].queries[i];if(r.matches===null){let o=n.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(EY(t,f,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function _w(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let s=tN(n,t,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=t[-l];for(let h=wo;h<f.length;h++){let m=f[h];m[du]===m[Ar]&&_w(m[fn],m,u,i)}if(f[zd]!==null){let h=f[zd];for(let m=0;m<h.length;m++){let p=h[m];_w(p[fn],p,u,i)}}}}}return i}function PY(n,t){return n[il].queries[t].queryList}function TY(n,t,e){let i=new ZM((e&4)===4);return rq(n,t,i,i.destroy),(t[il]??=new hw).queries.push(new fw(i))-1}function DY(n,t,e,i){let r=dr();if(r.firstCreatePass){let o=Ir();AY(r,new pw(t,e,i),o.index),IY(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return TY(r,ln(),e)}function OY(n){return n.split(",").map(t=>t.trim())}function AY(n,t,e){n.queries===null&&(n.queries=new mw),n.queries.track(new gw(t,e))}function IY(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function x1(n,t){return n.queries.getByIndex(t)}function RY(n,t){let e=n[fn],i=x1(e,t);return i.crossesNgTemplate?_w(e,n,t,[]):tN(e,n,i,t)}var x2=new Set;function ll(n){x2.has(n)||(x2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function kY(n){return typeof n=="function"&&n[Ja]!==void 0}function Jd(n,t){ll("NgSignals");let e=uI(n),i=e[Ja];return t?.equal&&(i.equal=t.equal),e.set=r=>YC(i,r),e.update=r=>dI(i,r),e.asReadonly=NY.bind(e),e}function NY(){let n=this[Ja];if(n.readonlyFn===void 0){let t=()=>this();t[Ja]=n,n.readonlyFn=t}return n.readonlyFn}function nN(n){return kY(n)&&typeof n.set=="function"}function FY(n){return Object.getPrototypeOf(n.prototype).constructor}function Xi(n){let t=FY(n.type),e=!0,i=[n];for(;t;){let r;if(ic(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new wt(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let s=n;s.inputs=S0(n.inputs),s.inputTransforms=S0(n.inputTransforms),s.declaredInputs=S0(n.declaredInputs),s.outputs=S0(n.outputs);let a=r.hostBindings;a&&BY(n,a);let l=r.viewQuery,u=r.contentQueries;if(l&&VY(n,l),u&&zY(n,u),LY(n,r),GG(n.outputs,r.outputs),ic(r)&&r.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Xi&&(e=!1)}}t=Object.getPrototypeOf(t)}UY(i)}function LY(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];if(i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=t.inputTransforms[r]}}}function UY(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=sp(r.hostAttrs,e=sp(e,r.hostAttrs))}}function S0(n){return n===Ld?{}:n===Vo?[]:n}function VY(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function zY(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function BY(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function b1(n){let t=n.inputConfig,e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];Array.isArray(r)&&r[3]&&(e[i]=r[3])}n.inputTransforms=e}var sc=class{},up=class{};var vw=class extends sc{constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new r_(this);let o=Z2(t);this._bootstrapComponents=hk(o.bootstrap),this._r3Injector=VR(t,e,[{provide:sc,useValue:this},{provide:oc,useValue:this.componentFactoryResolver},...i],lo(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},yw=class extends up{constructor(t){super(),this.moduleType=t}create(t){return new vw(this.moduleType,t,[])}};var o_=class extends sc{constructor(t){super(),this.componentFactoryResolver=new r_(this),this.instance=null;let e=new ap([...t.providers,{provide:sc,useValue:this},{provide:oc,useValue:this.componentFactoryResolver}],t.parent||zw(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function F_(n,t,e=null){return new o_({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}function iN(n){return C1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function HY(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function C1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function cl(n,t,e){return n[t]=e}function L_(n,t){return n[t]}function $s(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function Gd(n,t,e,i){let r=$s(n,t,e);return $s(n,t+1,i)||r}function rN(n,t,e,i,r){let o=Gd(n,t,e,i);return $s(n,t+2,r)||o}function U_(n,t,e,i,r,o){let s=Gd(n,t,e,i);return Gd(n,t+2,r,o)||s}function Cp(n){return(n.flags&32)===32}function jY(n,t,e,i,r,o,s,a,l){let u=t.consts,f=bp(t,n,4,s||null,a||null);m1(t,e,f,Bd(u,l)),C_(t,f);let h=f.tView=h1(2,f,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return t.queries!==null&&(t.queries.template(t,f),h.queries=t.queries.embeddedTView(f)),f}function WY(n,t,e,i,r,o,s,a,l,u){let f=e+Qi,h=t.firstCreatePass?jY(f,t,n,i,r,o,s,a,l):t.data[f];yu(h,!1);let m=oN(t,n,h,e);b_()&&T_(t,n,m,h),rc(m,n);let p=kk(m,n,m,h);return n[f]=p,A_(n,p),yY(p,h,n),m_(h)&&d1(t,n,h),l!=null&&f1(n,h,u),h}function Se(n,t,e,i,r,o,s,a){let l=ln(),u=dr(),f=Bd(u.consts,o);return WY(l,u,n,t,e,i,r,f,s,a),Se}var oN=sN;function sN(n,t,e,i){return uc(!0),t[Ti].createComment("")}function GY(n,t,e,i){let r=t[_a],o=!r||gp()||Cp(e)||vp(r,i);if(uc(o),o)return sN(n,t,e,i);let s=r.data[Z9]?.[i]??null;s!==null&&e.tView!==null&&e.tView.ssrId===null&&(e.tView.ssrId=s);let a=R_(r,n,t,e);w_(r,i,a);let l=n1(r,i);return k_(l,a)}function $Y(){oN=GY}var kd=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(kd||{}),aN=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}}return n})(),xw=class n{constructor(){this.ngZone=Be(qn),this.scheduler=Be(Hd),this.errorHandler=Be(ol,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[kd.EarlyRead,kd.Write,kd.MixedReadWrite,kd.Read]}execute(){this.executing=!0;for(let t of n.PHASES)for(let e of this.sequences)if(!(e.erroredOrDestroyed||!e.hooks[t]))try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(i){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}},bw=class{constructor(t,e,i,r){this.impl=t,this.hooks=e,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function M1(n,t){!t?.injector&&z7(M1);let e=t?.injector??Be(Eo);return np(e)?(ll("NgAfterNextRender"),YY(n,e,t,!0)):XY}function qY(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function YY(n,t,e,i){let r=t.get(aN);r.impl??=t.get(xw);let o=e?.phase??kd.MixedReadWrite,s=e?.manualCleanup!==!0?t.get(Xw):null,a=new bw(r.impl,qY(n,o),i,s);return r.impl.register(a),a}var XY={destroy(){}};function Zi(n,t,e,i){let r=ln(),o=y_();if($s(r,o,t)){let s=dr(),a=x_();yq(a,r,n,t,e,i)}return Zi}function lN(n,t,e,i){return $s(n,y_(),e)?t+lu(e)+i:Ys}function ZY(n,t,e,i,r,o){let s=o9(),a=Gd(n,s,e,r);return xR(2),a?t+lu(e)+i+lu(r)+o:Ys}function P0(n,t){return n<<17|t<<2}function vu(n){return n>>17&32767}function KY(n){return(n&2)==2}function JY(n,t){return n&131071|t<<17}function Cw(n){return n|2}function $d(n){return(n&131068)>>2}function PM(n,t){return n&-131069|t<<2}function QY(n){return(n&1)===1}function Mw(n){return n|1}function eX(n,t,e,i,r,o){let s=o?t.classBindings:t.styleBindings,a=vu(s),l=$d(s);n[i]=e;let u=!1,f;if(Array.isArray(e)){let h=e;f=h[1],(f===null||pp(h,f)>0)&&(u=!0)}else f=e;if(r)if(l!==0){let m=vu(n[a+1]);n[i+1]=P0(m,a),m!==0&&(n[m+1]=PM(n[m+1],i)),n[a+1]=JY(n[a+1],i)}else n[i+1]=P0(a,0),a!==0&&(n[a+1]=PM(n[a+1],i)),a=i;else n[i+1]=P0(l,0),a===0?a=i:n[l+1]=PM(n[l+1],i),l=i;u&&(n[i+1]=Cw(n[i+1])),b2(n,f,i,!0),b2(n,f,i,!1),tX(t,f,n,i,o),s=P0(a,l),o?t.classBindings=s:t.styleBindings=s}function tX(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&pp(o,t)>=0&&(e[i+1]=Mw(e[i+1]))}function b2(n,t,e,i){let r=n[e+1],o=t===null,s=i?vu(r):$d(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];nX(l,t)&&(a=!0,n[s+1]=i?Mw(u):Cw(u)),s=i?vu(u):$d(u)}a&&(n[e+1]=i?Cw(r):Mw(r))}function nX(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?pp(n,t)>=0:!1}function X(n,t,e){let i=ln(),r=y_();if($s(i,r,t)){let o=dr(),s=x_();p1(o,s,i,n,t,i[Ti],e,!1)}return X}function C2(n,t,e,i,r){let o=t.inputs,s=r?"class":"style";g1(n,e,o[s],s,i)}function ul(n,t,e){return cN(n,t,e,!1),ul}function So(n,t){return cN(n,t,null,!0),So}function cN(n,t,e,i){let r=ln(),o=dr(),s=xR(2);if(o.firstUpdatePass&&rX(o,n,s,i),t!==Ys&&$s(r,s,t)){let a=o.data[xu()];cX(o,a,r,r[Ti],n,r[s+1]=uX(t,e),i,s)}}function iX(n,t){return t>=n.expandoStartIndex}function rX(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[xu()],s=iX(n,e);dX(o,i)&&t===null&&!s&&(t=!1),t=oX(r,o,t,i),eX(r,o,t,e,s,i)}}function oX(n,t,e,i){let r=u9(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=TM(null,n,t,e,i),e=dp(e,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==r)if(e=TM(r,n,t,e,i),o===null){let l=sX(n,t,i);l!==void 0&&Array.isArray(l)&&(l=TM(null,n,t,l[1],i),l=dp(l,t.attrs,i),aX(n,t,i,l))}else o=lX(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function sX(n,t,e){let i=e?t.classBindings:t.styleBindings;if($d(i)!==0)return n[vu(i)]}function aX(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[vu(r)]=i}function lX(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=dp(i,s,e)}return dp(i,t.attrs,e)}function TM(n,t,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],i=dp(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),i}function dp(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),h7(n,s,e?!0:t[++o]))}return n===void 0?null:n}function cX(n,t,e,i,r,o,s,a){if(!(t.type&3))return;let l=n.data,u=l[a+1],f=QY(u)?M2(l,t,e,r,$d(u),s):void 0;if(!s_(f)){s_(o)||KY(u)&&(o=M2(l,null,e,r,a,s));let h=uR(xu(),e);X$(i,s,h,r,o)}}function M2(n,t,e,i,r,o){let s=t===null,a;for(;r>0;){let l=n[r],u=Array.isArray(l),f=u?l[1]:l,h=f===null,m=e[r+1];m===Ys&&(m=h?Vo:void 0);let p=h?gM(m,i):f===i?m:void 0;if(u&&!s_(p)&&(p=gM(l,i)),s_(p)&&(a=p,s))return a;let y=n[r+1];r=s?vu(y):$d(y)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=gM(l,i))}return a}function s_(n){return n!==void 0}function uX(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=lo(Zd(n)))),n}function dX(n,t){return(n.flags&(t?8:16))!==0}function fX(n,t,e,i,r,o){let s=t.consts,a=Bd(s,r),l=bp(t,n,2,i,a);return m1(t,e,l,Bd(s,o)),l.attrs!==null&&i_(l,l.attrs,!1),l.mergedAttrs!==null&&i_(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function g(n,t,e,i){let r=ln(),o=dr(),s=Qi+n,a=r[Ti],l=o.firstCreatePass?fX(s,o,r,t,e,i):o.data[s],u=uN(o,r,l,a,t,n);r[s]=u;let f=m_(l);return yu(l,!0),wk(a,u,l),!Cp(l)&&b_()&&T_(o,r,u,l),K7()===0&&rc(u,r),J7(),f&&(d1(o,r,l),u1(o,l,r)),i!==null&&f1(r,l),g}function _(){let n=Ir();jw()?vR():(n=n.parent,yu(n,!1));let t=n;e9(t)&&n9(),Q7();let e=dr();return e.firstCreatePass&&(C_(e,n),Bw(n)&&e.queries.elementEnd(n)),t.classesWithoutHost!=null&&g9(t)&&C2(e,t,ln(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&_9(t)&&C2(e,t,ln(),t.stylesWithoutHost,!1),_}function me(n,t,e,i){return g(n,t,e,i),_(),me}var uN=(n,t,e,i,r,o)=>(uc(!0),s1(i,r,PR()));function hX(n,t,e,i,r,o){let s=t[_a],a=!s||gp()||Cp(e)||vp(s,o);if(uc(a),a)return s1(i,r,PR());let l=R_(s,n,t,e);return nk(s,o)&&w_(s,o,l.nextSibling),s&&(jR(e)||WR(l))&&mp(e)&&(t9(e),Ck(l)),l}function pX(){uN=hX}function mX(n,t,e,i,r){let o=t.consts,s=Bd(o,i),a=bp(t,n,8,"ng-container",s);s!==null&&i_(a,s,!0);let l=Bd(o,r);return m1(t,e,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function bu(n,t,e){let i=ln(),r=dr(),o=n+Qi,s=r.firstCreatePass?mX(o,r,i,t,e):r.data[o];yu(s,!0);let a=dN(r,i,s,n);return i[o]=a,b_()&&T_(r,i,a,s),rc(a,i),m_(s)&&(d1(r,i,s),u1(r,s,i)),e!=null&&f1(i,s),bu}function Cu(){let n=Ir(),t=dr();return jw()?vR():(n=n.parent,yu(n,!1)),t.firstCreatePass&&(C_(t,n),Bw(n)&&t.queries.elementEnd(n)),Cu}function w1(n,t,e){return bu(n,t,e),Cu(),w1}var dN=(n,t,e,i)=>(uc(!0),mk(t[Ti],""));function gX(n,t,e,i){let r,o=t[_a],s=!o||gp()||vp(o,i)||Cp(e);if(uc(s),s)return mk(t[Ti],"");let a=R_(o,n,t,e),l=s$(o,i);return w_(o,i,a),r=k_(l,a),r}function _X(){dN=gX}function rt(){return ln()}var su=void 0;function vX(n){let t=n,e=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&i===0?1:5}var yX=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",vX],DM={};function jo(n){let t=xX(n),e=w2(t);if(e)return e;let i=t.split("-")[0];if(e=w2(i),e)return e;if(i==="en")return yX;throw new wt(701,!1)}function fN(n){return jo(n)[Bi.PluralCase]}function w2(n){return n in DM||(DM[n]=nl.ng&&nl.ng.common&&nl.ng.common.locales&&nl.ng.common.locales[n]),DM[n]}var Bi=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Bi||{});function xX(n){return n.toLowerCase().replace(/_/g,"-")}var a_="en-US";var bX=a_;function CX(n){typeof n=="string"&&(bX=n.toLowerCase().replace(/_/g,"-"))}var MX=(n,t,e)=>{};function se(n,t,e,i){let r=ln(),o=dr(),s=Ir();return hN(o,r,r[Ti],s,n,t,i),se}function wX(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=t[z0],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function hN(n,t,e,i,r,o,s){let a=m_(i),u=n.firstCreatePass&&Lk(n),f=t[Ws],h=Fk(t),m=!0;if(i.type&3||s){let M=Bo(i,t),x=s?s(M):M,b=h.length,T=s?D=>s(Gs(D[i.index])):i.index,E=null;if(!s&&a&&(E=wX(n,t,r,i.index)),E!==null){let D=E.__ngLastListenerFn__||E;D.__ngNextListenerFn__=o,E.__ngLastListenerFn__=o,m=!1}else{o=S2(i,t,f,o),MX(M,r,o);let D=e.listen(x,r,o);h.push(o,D),u&&u.push(r,T,b,b+1)}}else o=S2(i,t,f,o);let p=i.outputs,y;if(m&&p!==null&&(y=p[r])){let M=y.length;if(M)for(let x=0;x<M;x+=2){let b=y[x],T=y[x+1],L=t[b][T].subscribe(o),z=h.length;h.push(o,L),u&&u.push(r,i.index,z,-(z+1))}}}function E2(n,t,e,i){let r=$n(null);try{return pa(6,t,e),e(i)!==!1}catch(o){return Uk(n,o),!1}finally{pa(7,t,e),$n(r)}}function S2(n,t,e,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?cc(n.index,t):t;v1(s,5);let a=E2(t,e,i,o),l=r.__ngNextListenerFn__;for(;l;)a=E2(t,e,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function ae(n=1){return f9(n)}function Mu(n,t,e,i,r){let o=ln(),s=lN(o,t,e,i);if(s!==Ys){let a=dr(),l=x_();p1(a,l,o,n,s,o[Ti],r,!1)}return Mu}function pN(n,t,e,i){DY(n,t,e,i)}function mN(n){let t=ln(),e=dr(),i=bR();Ww(i+1);let r=x1(e,i);if(n.dirty&&q7(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=RY(t,i);n.reset(o,U9),n.notifyOnChanges()}return!0}return!1}function gN(){return PY(ln(),bR())}function EX(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Ii(n){let t=r9();return g_(t,Qi+n)}function C(n,t=""){let e=ln(),i=dr(),r=n+Qi,o=i.firstCreatePass?bp(i,r,1,t,null):i.data[r],s=_N(i,e,o,t,n);e[r]=s,b_()&&T_(i,e,s,o),yu(o,!1)}var _N=(n,t,e,i,r)=>(uc(!0),pk(t[Ti],i));function SX(n,t,e,i,r){let o=t[_a],s=!o||gp()||Cp(e)||vp(o,r);return uc(s),s?pk(t[Ti],i):R_(o,n,t,e)}function PX(){_N=SX}function Je(n){return _t("",n,""),Je}function _t(n,t,e){let i=ln(),r=lN(i,n,t,e);return r!==Ys&&Vk(i,xu(),r),_t}function E1(n,t,e,i,r){let o=ln(),s=ZY(o,n,t,e,i,r);return s!==Ys&&Vk(o,xu(),s),E1}function Ye(n,t,e){nN(t)&&(t=t());let i=ln(),r=y_();if($s(i,r,t)){let o=dr(),s=x_();p1(o,s,i,n,t,i[Ti],e,!1)}return Ye}function Ze(n,t){let e=nN(n);return e&&n.set(t),e}function Xe(n,t){let e=ln(),i=dr(),r=Ir();return hN(i,e,e[Ti],r,n,t),Xe}function TX(n,t,e){let i=dr();if(i.firstCreatePass){let r=ic(n);ww(e,i.data,i.blueprint,r,!0),ww(t,i.data,i.blueprint,r,!1)}}function ww(n,t,e,i,r){if(n=ao(n),Array.isArray(n))for(let o=0;o<n.length;o++)ww(n[o],t,e,i,r);else{let o=dr(),s=ln(),a=Ir(),l=Ud(n)?n:ao(n.provide),u=nR(n),f=a.providerIndexes&1048575,h=a.directiveStart,m=a.providerIndexes>>20;if(Ud(n)||!n.multi){let p=new pu(u,r,$),y=AM(l,t,r?f:f+m,h);y===-1?(WM(q0(a,s),o,l),OM(o,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(p),s.push(p)):(e[y]=p,s[y]=p)}else{let p=AM(l,t,f+m,h),y=AM(l,t,f,f+m),M=p>=0&&e[p],x=y>=0&&e[y];if(r&&!x||!r&&!M){WM(q0(a,s),o,l);let b=AX(r?OX:DX,e.length,r,i,u);!r&&x&&(e[y].providerFactory=b),OM(o,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(b),s.push(b)}else{let b=vN(e[r?y:p],u,!r&&i);OM(o,n,p>-1?p:y,b)}!r&&i&&x&&e[y].componentProviders++}}}function OM(n,t,e,i){let r=Ud(t),o=R7(t);if(r||o){let l=(o?ao(t.useClass):t).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let f=u.indexOf(e);f===-1?u.push(e,[i,l]):u[f+1].push(i,l)}else u.push(e,l)}}}function vN(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function AM(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function DX(n,t,e,i){return Ew(this.multi,[])}function OX(n,t,e,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=mu(e,e[fn],this.providerFactory.index,i);o=a.slice(0,s),Ew(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Ew(r,o);return o}function Ew(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function AX(n,t,e,i,r){let o=new pu(n,e,$);return o.multi=[],o.index=t,o.componentProviders=0,vN(o,r,i&&!e),o}function Hi(n,t=[]){return e=>{e.providersResolver=(i,r)=>TX(i,r?r(n):n,t)}}var IX=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Q2(!1,e.type),r=i.length>0?F_([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Le({token:n,providedIn:"environment",factory:()=>new n(qe(co))})}}return n})();function Ke(n){ll("NgStandalone"),n.getStandaloneInjector=t=>t.get(IX).getOrCreateStandaloneInjector(n)}function ji(n,t,e){let i=fs()+n,r=ln();return r[i]===Ys?cl(r,i,e?t.call(e):t()):L_(r,i)}function ri(n,t,e,i){return wN(ln(),fs(),n,t,e,i)}function ba(n,t,e,i,r){return EN(ln(),fs(),n,t,e,i,r)}function S1(n,t,e,i,r,o){return SN(ln(),fs(),n,t,e,i,r,o)}function yN(n,t,e,i,r,o,s){return RX(ln(),fs(),n,t,e,i,r,o,s)}function xN(n,t,e,i,r,o,s,a){let l=fs()+n,u=ln(),f=U_(u,l,e,i,r,o);return $s(u,l+4,s)||f?cl(u,l+5,a?t.call(a,e,i,r,o,s):t(e,i,r,o,s)):L_(u,l+5)}function bN(n,t,e,i,r,o,s,a,l){let u=fs()+n,f=ln(),h=U_(f,u,e,i,r,o);return Gd(f,u+4,s,a)||h?cl(f,u+6,l?t.call(l,e,i,r,o,s,a):t(e,i,r,o,s,a)):L_(f,u+6)}function CN(n,t,e,i,r,o,s,a,l,u){let f=fs()+n,h=ln(),m=U_(h,f,e,i,r,o);return rN(h,f+4,s,a,l)||m?cl(h,f+7,u?t.call(u,e,i,r,o,s,a,l):t(e,i,r,o,s,a,l)):L_(h,f+7)}function MN(n,t,e,i){return kX(ln(),fs(),n,t,e,i)}function Mp(n,t){let e=n[t];return e===Ys?void 0:e}function wN(n,t,e,i,r,o){let s=t+e;return $s(n,s,r)?cl(n,s+1,o?i.call(o,r):i(r)):Mp(n,s+1)}function EN(n,t,e,i,r,o,s){let a=t+e;return Gd(n,a,r,o)?cl(n,a+2,s?i.call(s,r,o):i(r,o)):Mp(n,a+2)}function SN(n,t,e,i,r,o,s,a){let l=t+e;return rN(n,l,r,o,s)?cl(n,l+3,a?i.call(a,r,o,s):i(r,o,s)):Mp(n,l+3)}function RX(n,t,e,i,r,o,s,a,l){let u=t+e;return U_(n,u,r,o,s,a)?cl(n,u+4,l?i.call(l,r,o,s,a):i(r,o,s,a)):Mp(n,u+4)}function kX(n,t,e,i,r,o){let s=t+e,a=!1;for(let l=0;l<r.length;l++)$s(n,s++,r[l])&&(a=!0);return a?cl(n,s,i.apply(o,r)):Mp(n,s)}function Hr(n,t){let e=dr(),i,r=n+Qi;e.firstCreatePass?(i=NX(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=cu(i.type,!0)),s,a=Mo($);try{let l=$0(!1),u=o();return $0(l),EX(e,ln(),r,u),u}finally{Mo(a)}}function NX(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function P1(n,t,e){let i=n+Qi,r=ln(),o=g_(r,i);return T1(r,i)?wN(r,fs(),t,o.transform,e,o):o.transform(e)}function dl(n,t,e,i){let r=n+Qi,o=ln(),s=g_(o,r);return T1(o,r)?EN(o,fs(),t,s.transform,e,i,s):s.transform(e,i)}function Qd(n,t,e,i,r){let o=n+Qi,s=ln(),a=g_(s,o);return T1(s,o)?SN(s,fs(),t,a.transform,e,i,r,a):a.transform(e,i,r)}function T1(n,t){return n[fn].data[t].pure}function Xs(n,t){return I_(n,t)}var V_=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var PN=new xt("");function dc(n){return!!n&&typeof n.then=="function"}function D1(n){return!!n&&typeof n.subscribe=="function"}var z_=new xt(""),TN=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i}),this.appInits=Be(z_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(dc(o))e.push(o);else if(D1(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wu=new xt("");function FX(){cI(()=>{throw new wt(600,!1)})}function LX(n){return n.isBoundToModule}var UX=10;function VX(n,t,e){try{let i=e();return dc(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var Ca=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Be(F9),this.afterRenderManager=Be(aN),this.zonelessEnabled=Be(N_),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new An,this.afterTick=new An,this.componentTypes=[],this.components=[],this.isStable=Be(sl).hasPendingTasks.pipe(Dt(e=>!e)),this._injector=Be(co)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,i){let r=e instanceof n_;if(!this._injector.get(TN).done){let m=!r&&X2(e),p=!1;throw new wt(405,p)}let s;r?s=e:s=this._injector.get(oc).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=LX(s)?void 0:this._injector.get(sc),l=i||s.selector,u=s.create(Eo.NULL,[],l,a),f=u.location.nativeElement,h=u.injector.get(PN,null);return h?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),k0(this.components,u),h?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new wt(101,!1);let e=$n(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,$n(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(jd,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<UX;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)zX(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else e?.begin?.(),e?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>__(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;k0(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let i=this._injector.get(wu,[]);[...this._bootstrapListeners,...i].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>k0(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new wt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k0(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var T0;function B_(n){T0??=new WeakMap;let t=T0.get(n);if(t)return t;let e=n.isStable.pipe(zs(i=>i)).toPromise().then(()=>{});return T0.set(n,e),n.onDestroy(()=>T0?.delete(n)),e}function zX(n,t,e,i){if(!e&&!__(n))return;Hk(n,t,e&&!i?0:1)}var Sw=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},H_=(()=>{class n{compileModuleSync(e){return new yw(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=Z2(e),o=hk(r.declarations).reduce((s,a)=>{let l=nc(a);return l&&s.push(new Wd(l)),s},[]);return new Sw(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var BX=(()=>{class n{constructor(){this.zone=Be(qn),this.changeDetectionScheduler=Be(Hd),this.applicationRef=Be(Ca)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HX=new xt("",{factory:()=>!1});function DN({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new qn(Yt(je({},AN()),{scheduleInRootZone:e})),[{provide:qn,useFactory:n},{provide:uu,multi:!0,useFactory:()=>{let i=Be(BX,{optional:!0});return()=>i.initialize()}},{provide:uu,multi:!0,useFactory:()=>{let i=Be(jX);return()=>{i.initialize()}}},t===!0?{provide:Xk,useValue:!0}:[],{provide:Zk,useValue:e??zR}]}function ON(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,i=DN({ngZoneFactory:()=>{let r=AN(n);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&ll("NgZone_CoalesceEvent"),new qn(r)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return lc([{provide:HX,useValue:!0},{provide:N_,useValue:!1},i])}function AN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var jX=(()=>{class n{constructor(){this.subscription=new zi,this.initialized=!1,this.zone=Be(qn),this.pendingTasks=Be(sl)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qn.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var WX=(()=>{class n{constructor(){this.appRef=Be(Ca),this.taskService=Be(sl),this.ngZone=Be(qn),this.zonelessEnabled=Be(N_),this.disableScheduling=Be(Xk,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(X0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Be(Zk,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof XM||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?n2:BR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(X0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,n2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function GX(){return typeof $localize<"u"&&$localize.locale||a_}var Ma=new xt("",{providedIn:"root",factory:()=>Be(Ma,Tn.Optional|Tn.SkipSelf)||GX()});var Pw=new xt("");function D0(n){return!n.moduleRef}function $X(n){let t=D0(n)?n.r3Injector:n.moduleRef.injector,e=t.get(qn);return e.run(()=>{D0(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(ol,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),D0(n)){let o=()=>t.destroy(),s=n.platformInjector.get(Pw);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Pw);s.add(o),n.moduleRef.onDestroy(()=>{k0(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return VX(i,e,()=>{let o=t.get(TN);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Ma,a_);if(CX(s||a_),D0(n)){let a=t.get(Ca);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return qX(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function qX(n,t){let e=n.injector.get(Ca);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new wt(-403,!1);t.push(n)}var N0=null;function YX(n=[],t){return Eo.create({name:t,providers:[{provide:h_,useValue:"platform"},{provide:Pw,useValue:new Set([()=>N0=null])},...n]})}function XX(n=[]){if(N0)return N0;let t=YX(n);return N0=t,FX(),ZX(t),t}function ZX(n){n.get(Jw,null)?.forEach(e=>e())}var Zs=(()=>{class n{static{this.__NG_ELEMENT_ID__=KX}}return n})();function KX(n){return JX(Ir(),ln(),(n&16)===16)}function JX(n,t,e){if(mp(n)&&!e){let i=cc(n.index,t);return new gu(i,i)}else if(n.type&175){let i=t[us];return new gu(i,t)}return null}var Tw=class{constructor(){}supports(t){return iN(t)}create(t){return new Dw(t)}},QX=(n,t)=>t,Dw=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||QX}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<P2(i,r,o)?e:i,a=P2(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let u=a-r,f=l-r;if(u!=f){for(let m=0;m<u;m++){let p=m<o.length?o[m]:o[m]=0,y=p+m;f<=y&&y<u&&(o[m]=p+1)}let h=s.previousIndex;o[h]=f-u}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!iN(t))throw new wt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,HY(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new Ow(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new l_),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new l_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Ow=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Aw=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},l_=class{constructor(){this.map=new Map}put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Aw,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function P2(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}var Iw=class{constructor(){}supports(t){return t instanceof Map||C1(t)}create(){return new Rw}},Rw=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let e;for(e=this._mapHead;e!==null;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;e!==null;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;e!==null;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||C1(t)))throw new wt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(i,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,i),this._appendAfter=e,e=e._next;else{let o=this._getOrCreateRecordForKey(r,i);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let i=e;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){let i=t._prev;return e._next=t,e._prev=i,t._prev=e,i&&(i._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){let r=this._records.get(t);this._maybeAddToChanges(r,e);let o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}let i=new kw(t);return this._records.set(t,i),i.currentValue=e,this._addToAdditions(i),i}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(i=>e(t[i],i))}},kw=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function T2(){return new O1([new Tw])}var O1=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:T2})}constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||T2()),deps:[[n,new f_,new hp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new wt(901,!1)}}return n})();function D2(){return new A1([new Iw])}var A1=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:D2})}constructor(e){this.factories=e}static create(e,i){if(i){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||D2()),deps:[[n,new f_,new hp]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i)return i;throw new wt(901,!1)}}return n})();function IN(n){try{let{rootComponent:t,appProviders:e,platformProviders:i}=n,r=XX(i),o=[DN({}),{provide:Hd,useExisting:WX},...e||[]],s=new o_({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return $X({r3Injector:s.injector,platformInjector:r,rootComponent:t})}catch(t){return Promise.reject(t)}}var O2=!1;function eZ(){O2||(O2=!0,n$(),pX(),PX(),_X(),$Y(),CY(),iY(),iq())}function tZ(n,t){return B_(n)}function RN(){return lc([{provide:C0,useFactory:()=>{let n=!0;return np()&&(n=!!Be(Xd,{optional:!0})?.get(ek,null)),n&&ll("NgHydration"),n}},{provide:uu,useValue:()=>{Zq(!1),np()&&Be(C0)&&(nZ(),eZ())},multi:!0},{provide:rk,useFactory:()=>np()&&Be(C0)},{provide:wu,useFactory:()=>{if(np()&&Be(C0)){let n=Be(Ca),t=Be(Eo);return()=>{tZ(n,t).then(()=>{eY(n)})}}return()=>{}},multi:!0}])}function nZ(){let n=_p(),t;for(let e of n.body.childNodes)if(e.nodeType===Node.COMMENT_NODE&&e.textContent?.trim()===e$){t=e;break}if(!t)throw new wt(-507,!1)}function fc(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ef(n,t){ll("NgSignals");let e=sI(n);return t?.equal&&(e[Ja].equal=t.equal),e}function hs(n){let t=$n(null);try{return n()}finally{$n(t)}}function kN(n){let t=nc(n);if(!t)return null;let e=new Wd(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var BN=null;function ml(){return BN}function HN(n){BN??=n}var K_=class{};var Ki=new xt(""),j1=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>Be(iZ),providedIn:"platform"})}}return n})(),jN=new xt(""),iZ=(()=>{class n extends j1{constructor(){super(),this._doc=Be(Ki),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ml().getBaseHref(this._doc)}onPopState(e){let i=ml().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=ml().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function W1(n,t){if(n.length==0)return t;if(t.length==0)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?n+t.substring(1):e==1?n+t:n+"/"+t}function NN(n){let t=n.match(/#|\?|$/),e=t&&t.index||n.length,i=e-(n[e-1]==="/"?1:0);return n.slice(0,i)+n.slice(e)}function hl(n){return n&&n[0]!=="?"?"?"+n:n}var gl=(()=>{class n{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>Be(G1),providedIn:"root"})}}return n})(),WN=new xt(""),G1=(()=>{class n extends gl{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Be(Ki).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return W1(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+hl(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(qe(j1),qe(WN,8))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GN=(()=>{class n extends gl{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=W1(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+hl(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||n)(qe(j1),qe(WN,8))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),rf=(()=>{class n{constructor(e){this._subject=new gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=sZ(NN(FN(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+hl(i))}normalize(e){return n.stripTrailingSlash(oZ(this._basePath,FN(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hl(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}static{this.normalizeQueryParams=hl}static{this.joinWithSlash=W1}static{this.stripTrailingSlash=NN}static{this.\u0275fac=function(i){return new(i||n)(qe(gl))}}static{this.\u0275prov=Le({token:n,factory:()=>rZ(),providedIn:"root"})}}return n})();function rZ(){return new rf(qe(gl))}function oZ(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function FN(n){return n.replace(/\/index.html$/,"")}function sZ(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var tf=function(n){return n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.Two=2]="Two",n[n.Few=3]="Few",n[n.Many=4]="Many",n[n.Other=5]="Other",n}(tf||{}),uo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(uo||{}),bi=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(bi||{}),Wo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Wo||{}),hc={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function aZ(n){return jo(n)[Bi.LocaleId]}function lZ(n,t,e){let i=jo(n),r=[i[Bi.DayPeriodsFormat],i[Bi.DayPeriodsStandalone]],o=ps(r,t);return ps(o,e)}function cZ(n,t,e){let i=jo(n),r=[i[Bi.DaysFormat],i[Bi.DaysStandalone]],o=ps(r,t);return ps(o,e)}function uZ(n,t,e){let i=jo(n),r=[i[Bi.MonthsFormat],i[Bi.MonthsStandalone]],o=ps(r,t);return ps(o,e)}function dZ(n,t){let i=jo(n)[Bi.Eras];return ps(i,t)}function j_(n,t){let e=jo(n);return ps(e[Bi.DateFormat],t)}function W_(n,t){let e=jo(n);return ps(e[Bi.TimeFormat],t)}function G_(n,t){let i=jo(n)[Bi.DateTimeFormat];return ps(i,t)}function Q_(n,t){let e=jo(n),i=e[Bi.NumberSymbols][t];if(typeof i>"u"){if(t===hc.CurrencyDecimal)return e[Bi.NumberSymbols][hc.Decimal];if(t===hc.CurrencyGroup)return e[Bi.NumberSymbols][hc.Group]}return i}var fZ=fN;function $N(n){if(!n[Bi.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Bi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function hZ(n){let t=jo(n);return $N(t),(t[Bi.ExtraData][2]||[]).map(i=>typeof i=="string"?I1(i):[I1(i[0]),I1(i[1])])}function pZ(n,t,e){let i=jo(n);$N(i);let r=[i[Bi.ExtraData][0],i[Bi.ExtraData][1]],o=ps(r,t)||[];return ps(o,e)||[]}function ps(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function I1(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var mZ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$_={},gZ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,pl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(pl||{}),Jn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Jn||{}),Kn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Kn||{});function tr(n,t,e,i){let r=EZ(n);t=fl(e,t)||t;let s=[],a;for(;t;)if(a=gZ.exec(t),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;t=f}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=YN(i,l),r=wZ(r,i,!0));let u="";return s.forEach(f=>{let h=CZ(f);u+=h?h(r,e,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function J_(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function fl(n,t){let e=aZ(n);if($_[e]??={},$_[e][t])return $_[e][t];let i="";switch(t){case"shortDate":i=j_(n,Wo.Short);break;case"mediumDate":i=j_(n,Wo.Medium);break;case"longDate":i=j_(n,Wo.Long);break;case"fullDate":i=j_(n,Wo.Full);break;case"shortTime":i=W_(n,Wo.Short);break;case"mediumTime":i=W_(n,Wo.Medium);break;case"longTime":i=W_(n,Wo.Long);break;case"fullTime":i=W_(n,Wo.Full);break;case"short":let r=fl(n,"shortTime"),o=fl(n,"shortDate");i=q_(G_(n,Wo.Short),[r,o]);break;case"medium":let s=fl(n,"mediumTime"),a=fl(n,"mediumDate");i=q_(G_(n,Wo.Medium),[s,a]);break;case"long":let l=fl(n,"longTime"),u=fl(n,"longDate");i=q_(G_(n,Wo.Long),[l,u]);break;case"full":let f=fl(n,"fullTime"),h=fl(n,"fullDate");i=q_(G_(n,Wo.Full),[f,h]);break}return i&&($_[e][t]=i),i}function q_(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function Ks(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function _Z(n,t){return Ks(n,3).substring(0,t)}function er(n,t,e=0,i=!1,r=!1){return function(o,s){let a=vZ(n,o);if((e>0||a>-e)&&(a+=e),n===Jn.Hours)a===0&&e===-12&&(a=12);else if(n===Jn.FractionalSeconds)return _Z(a,t);let l=Q_(s,hc.MinusSign);return Ks(a,t,l,i,r)}}function vZ(n,t){switch(n){case Jn.FullYear:return t.getFullYear();case Jn.Month:return t.getMonth();case Jn.Date:return t.getDate();case Jn.Hours:return t.getHours();case Jn.Minutes:return t.getMinutes();case Jn.Seconds:return t.getSeconds();case Jn.FractionalSeconds:return t.getMilliseconds();case Jn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function wi(n,t,e=uo.Format,i=!1){return function(r,o){return yZ(r,o,n,t,e,i)}}function yZ(n,t,e,i,r,o){switch(e){case Kn.Months:return uZ(t,r,i)[n.getMonth()];case Kn.Days:return cZ(t,r,i)[n.getDay()];case Kn.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=hZ(t),f=pZ(t,r,i),h=u.findIndex(m=>{if(Array.isArray(m)){let[p,y]=m,M=s>=p.hours&&a>=p.minutes,x=s<y.hours||s===y.hours&&a<y.minutes;if(p.hours<y.hours){if(M&&x)return!0}else if(M||x)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(h!==-1)return f[h]}return lZ(t,r,i)[s<12?0:1];case Kn.Eras:return dZ(t,i)[n.getFullYear()<=0?0:1];default:let l=e;throw new Error(`unexpected translation type ${l}`)}}function Y_(n){return function(t,e,i){let r=-1*i,o=Q_(e,hc.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case pl.Short:return(r>=0?"+":"")+Ks(s,2,o)+Ks(Math.abs(r%60),2,o);case pl.ShortGMT:return"GMT"+(r>=0?"+":"")+Ks(s,1,o);case pl.Long:return"GMT"+(r>=0?"+":"")+Ks(s,2,o)+":"+Ks(Math.abs(r%60),2,o);case pl.Extended:return i===0?"Z":(r>=0?"+":"")+Ks(s,2,o)+":"+Ks(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var xZ=0,Z_=4;function bZ(n){let t=J_(n,xZ,1).getDay();return J_(n,0,1+(t<=Z_?Z_:Z_+7)-t)}function qN(n){let t=n.getDay(),e=t===0?-3:Z_-t;return J_(n.getFullYear(),n.getMonth(),n.getDate()+e)}function R1(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=qN(e),s=bZ(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return Ks(r,n,Q_(i,hc.MinusSign))}}function X_(n,t=!1){return function(e,i){let o=qN(e).getFullYear();return Ks(o,n,Q_(i,hc.MinusSign),t)}}var k1={};function CZ(n){if(k1[n])return k1[n];let t;switch(n){case"G":case"GG":case"GGG":t=wi(Kn.Eras,bi.Abbreviated);break;case"GGGG":t=wi(Kn.Eras,bi.Wide);break;case"GGGGG":t=wi(Kn.Eras,bi.Narrow);break;case"y":t=er(Jn.FullYear,1,0,!1,!0);break;case"yy":t=er(Jn.FullYear,2,0,!0,!0);break;case"yyy":t=er(Jn.FullYear,3,0,!1,!0);break;case"yyyy":t=er(Jn.FullYear,4,0,!1,!0);break;case"Y":t=X_(1);break;case"YY":t=X_(2,!0);break;case"YYY":t=X_(3);break;case"YYYY":t=X_(4);break;case"M":case"L":t=er(Jn.Month,1,1);break;case"MM":case"LL":t=er(Jn.Month,2,1);break;case"MMM":t=wi(Kn.Months,bi.Abbreviated);break;case"MMMM":t=wi(Kn.Months,bi.Wide);break;case"MMMMM":t=wi(Kn.Months,bi.Narrow);break;case"LLL":t=wi(Kn.Months,bi.Abbreviated,uo.Standalone);break;case"LLLL":t=wi(Kn.Months,bi.Wide,uo.Standalone);break;case"LLLLL":t=wi(Kn.Months,bi.Narrow,uo.Standalone);break;case"w":t=R1(1);break;case"ww":t=R1(2);break;case"W":t=R1(1,!0);break;case"d":t=er(Jn.Date,1);break;case"dd":t=er(Jn.Date,2);break;case"c":case"cc":t=er(Jn.Day,1);break;case"ccc":t=wi(Kn.Days,bi.Abbreviated,uo.Standalone);break;case"cccc":t=wi(Kn.Days,bi.Wide,uo.Standalone);break;case"ccccc":t=wi(Kn.Days,bi.Narrow,uo.Standalone);break;case"cccccc":t=wi(Kn.Days,bi.Short,uo.Standalone);break;case"E":case"EE":case"EEE":t=wi(Kn.Days,bi.Abbreviated);break;case"EEEE":t=wi(Kn.Days,bi.Wide);break;case"EEEEE":t=wi(Kn.Days,bi.Narrow);break;case"EEEEEE":t=wi(Kn.Days,bi.Short);break;case"a":case"aa":case"aaa":t=wi(Kn.DayPeriods,bi.Abbreviated);break;case"aaaa":t=wi(Kn.DayPeriods,bi.Wide);break;case"aaaaa":t=wi(Kn.DayPeriods,bi.Narrow);break;case"b":case"bb":case"bbb":t=wi(Kn.DayPeriods,bi.Abbreviated,uo.Standalone,!0);break;case"bbbb":t=wi(Kn.DayPeriods,bi.Wide,uo.Standalone,!0);break;case"bbbbb":t=wi(Kn.DayPeriods,bi.Narrow,uo.Standalone,!0);break;case"B":case"BB":case"BBB":t=wi(Kn.DayPeriods,bi.Abbreviated,uo.Format,!0);break;case"BBBB":t=wi(Kn.DayPeriods,bi.Wide,uo.Format,!0);break;case"BBBBB":t=wi(Kn.DayPeriods,bi.Narrow,uo.Format,!0);break;case"h":t=er(Jn.Hours,1,-12);break;case"hh":t=er(Jn.Hours,2,-12);break;case"H":t=er(Jn.Hours,1);break;case"HH":t=er(Jn.Hours,2);break;case"m":t=er(Jn.Minutes,1);break;case"mm":t=er(Jn.Minutes,2);break;case"s":t=er(Jn.Seconds,1);break;case"ss":t=er(Jn.Seconds,2);break;case"S":t=er(Jn.FractionalSeconds,1);break;case"SS":t=er(Jn.FractionalSeconds,2);break;case"SSS":t=er(Jn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Y_(pl.Short);break;case"ZZZZZ":t=Y_(pl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Y_(pl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Y_(pl.Long);break;default:return null}return k1[n]=t,t}function YN(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function MZ(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function wZ(n,t,e){let i=e?-1:1,r=n.getTimezoneOffset(),o=YN(t,r);return MZ(n,i*(o-r))}function EZ(n){if(LN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,s=1]=n.split("-").map(a=>+a);return J_(r,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(mZ))return SZ(i)}let t=new Date(n);if(!LN(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function SZ(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-i,l=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,l,u),t}function LN(n){return n instanceof Date&&!isNaN(n.valueOf())}var XN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:function(i){let r=null;return i?r=new i:r=(o=>new TZ(o))(qe(Ma)),r},providedIn:"root"})}}return n})();function PZ(n,t,e,i){let r=`=${n}`;if(t.indexOf(r)>-1||(r=e.getPluralCategory(n,i),t.indexOf(r)>-1))return r;if(t.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${n}"`)}var TZ=(()=>{class n extends XN{constructor(e){super(),this.locale=e}getPluralCategory(e,i){switch(fZ(i||this.locale)(e)){case tf.Zero:return"zero";case tf.One:return"one";case tf.Two:return"two";case tf.Few:return"few";case tf.Many:return"many";default:return"other"}}static{this.\u0275fac=function(i){return new(i||n)(qe(Ma))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function ev(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var N1=/\s+/,UN=[],Po=(()=>{class n{constructor(e,i){this._ngEl=e,this._renderer=i,this.initialClasses=UN,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(N1):UN}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(N1):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(N1).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||n)($(fi),$(Mi))}}static{this.\u0275dir=en({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var F1=class{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gn=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new F1(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),VN(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);VN(o,r)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)($(Ho),$(_u),$(O1))}}static{this.\u0275dir=en({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function VN(n,t){n.context.$implicit=t.item}var Xt=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new L1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){zN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){zN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||n)($(Ho),$(_u))}}static{this.\u0275dir=en({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),L1=class{constructor(){this.$implicit=null,this.ngIf=null}};function zN(n,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${lo(t)}'.`)}var ZN=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){let[r,o]=e.split("."),s=r.indexOf("-")===-1?void 0:ya.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,o?`${i}${o}`:i,s):this._renderer.removeStyle(this._ngEl.nativeElement,r,s)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static{this.\u0275fac=function(i){return new(i||n)($(fi),$(A1),$(Mi))}}static{this.\u0275dir=en({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),_l=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||n)($(Ho))}}static{this.\u0275dir=en({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Mr]})}}return n})();function $1(n,t){return new wt(2100,!1)}var U1=class{createSubscription(t,e){return hs(()=>t.subscribe({next:e,error:i=>{throw i}}))}dispose(t){hs(()=>t.unsubscribe())}},V1=class{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}},DZ=new V1,OZ=new U1,KN=(()=>{class n{constructor(e){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if(dc(e))return DZ;if(D1(e))return OZ;throw $1(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||n)($(Zs,16))}}static{this.\u0275pipe=ac({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var AZ="mediumDate",IZ=new xt(""),RZ=new xt(""),Eu=(()=>{class n{constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let s=i??this.defaultOptions?.dateFormat??AZ,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return tr(e,s,o||this.locale,a)}catch(s){throw $1(n,s.message)}}static{this.\u0275fac=function(i){return new(i||n)($(Ma,16),$(IZ,24),$(RZ,24))}}static{this.\u0275pipe=ac({name:"date",type:n,pure:!0,standalone:!0})}}return n})(),kZ=/#/g,tv=(()=>{class n{constructor(e){this._localization=e}transform(e,i,r){if(e==null)return"";if(typeof i!="object"||i===null)throw $1(n,i);let o=PZ(e,Object.keys(i),this._localization,r);return i[o].replace(kZ,e.toString())}static{this.\u0275fac=function(i){return new(i||n)($(XN,16))}}static{this.\u0275pipe=ac({name:"i18nPlural",type:n,pure:!0,standalone:!0})}}return n})();var vt=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yi({type:n})}static{this.\u0275inj=qi({})}}return n})(),q1="browser",NZ="server";function of(n){return n===q1}function wp(n){return n===NZ}var JN=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>of(Be(Br))?new z1(Be(Ki),window):new B1})}}return n})(),z1=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=FZ(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function FZ(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=i.nextNode()}}return null}var B1=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},nf=class{};var Sp=class{},Pp=class{},wa=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var X1=class{encodeKey(t){return QN(t)}encodeValue(t){return QN(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function LZ(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var UZ=/%(\d[a-f0-9])/gi,VZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function QN(n){return encodeURIComponent(n).replace(UZ,(t,e)=>VZ[e]??t)}function nv(n){return`${n}`}var ms=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new X1,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=LZ(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(nv):[nv(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(nv(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(nv(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Z1=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function zZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function e3(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function t3(n){return typeof Blob<"u"&&n instanceof Blob}function n3(n){return typeof FormData<"u"&&n instanceof FormData}function BZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ep=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(zZ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new wa,this.context??=new Z1,!this.params)this.params=new ms,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||e3(this.body)||t3(this.body)||n3(this.body)||BZ(this.body)?this.body:this.body instanceof ms?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||n3(this.body)?null:t3(this.body)?this.body.type||null:e3(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ms?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,f=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((m,p)=>m.set(p,t.setHeaders[p]),u)),t.setParams&&(f=Object.keys(t.setParams).reduce((m,p)=>m.set(p,t.setParams[p]),f)),new n(e,i,s,{params:f,headers:u,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},mc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mc||{}),Tp=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new wa,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},rv=class n extends Tp{constructor(t={}){super(t),this.type=mc.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Su=class n extends Tp{constructor(t={}){super(t),this.type=mc.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},pc=class extends Tp{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},p3=200,HZ=204;function Y1(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var zn=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof Ep)o=e;else{let l;r.headers instanceof wa?l=r.headers:l=new wa(r.headers);let u;r.params&&(r.params instanceof ms?u=r.params:u=new ms({fromObject:r.params})),o=new Ep(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Rt(o).pipe(tl(l=>this.handler.handle(l)));if(e instanceof Ep||r.observe==="events")return s;let a=s.pipe(vi(l=>l instanceof Su));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Dt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Dt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Dt(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(Dt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new ms().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Y1(r,i))}post(e,i,r={}){return this.request("POST",e,Y1(r,i))}put(e,i,r={}){return this.request("PUT",e,Y1(r,i))}static{this.\u0275fac=function(i){return new(i||n)(qe(Sp))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),jZ=/^\)\]\}',?\n/,WZ="X-Request-URL";function i3(n){if(n.url)return n.url;let t=WZ.toLocaleLowerCase();return n.headers.get(t)}var K1=(()=>{class n{constructor(){this.fetchImpl=Be(J1,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=Be(qn)}handle(e){return new Jt(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(Q1,o=>i.error(new pc({error:o}))),()=>r.abort()})}doRequest(e,i,r){return Ka(this,null,function*(){let o=this.createRequestInit(e),s;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,je({signal:i},o)));GZ(p),r.next({type:mc.Sent}),s=yield p}catch(p){r.error(new pc({error:p,status:p.status??0,statusText:p.statusText,url:e.urlWithParams,headers:p.headers}));return}let a=new wa(s.headers),l=s.statusText,u=i3(s)??e.urlWithParams,f=s.status,h=null;if(e.reportProgress&&r.next(new rv({headers:a,status:f,statusText:l,url:u})),s.body){let p=s.headers.get("content-length"),y=[],M=s.body.getReader(),x=0,b,T,E=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Ka(this,null,function*(){for(;;){let{done:L,value:z}=yield M.read();if(L)break;if(y.push(z),x+=z.length,e.reportProgress){T=e.responseType==="text"?(T??"")+(b??=new TextDecoder).decode(z,{stream:!0}):void 0;let k=()=>r.next({type:mc.DownloadProgress,total:p?+p:void 0,loaded:x,partialText:T});E?E.run(k):k()}}}));let D=this.concatChunks(y,x);try{let L=s.headers.get("Content-Type")??"";h=this.parseBody(e,D,L)}catch(L){r.error(new pc({error:L,headers:new wa(s.headers),status:s.status,statusText:s.statusText,url:i3(s)??e.urlWithParams}));return}}f===0&&(f=h?p3:0),f>=200&&f<300?(r.next(new Su({body:h,headers:a,status:f,statusText:l,url:u})),r.complete()):r.error(new pc({error:h,headers:a,status:f,statusText:l,url:u}))})}parseBody(e,i,r){switch(e.responseType){case"json":let o=new TextDecoder().decode(i).replace(jZ,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((o,s)=>i[o]=s.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let o=e.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),o=0;for(let s of e)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),J1=class{};function Q1(){}function GZ(n){n.then(Q1,Q1)}function m3(n,t){return t(n)}function $Z(n,t){return(e,i)=>t.intercept(e,{handle:r=>n(r,i)})}function qZ(n,t,e){return(i,r)=>ds(e,()=>t(i,o=>n(o,r)))}var eE=new xt(""),tE=new xt(""),g3=new xt(""),_3=new xt("",{providedIn:"root",factory:()=>!0});function YZ(){let n=null;return(t,e)=>{n===null&&(n=(Be(eE,{optional:!0})??[]).reduceRight($Z,m3));let i=Be(sl);if(Be(_3)){let o=i.add();return n(t,e).pipe(Kl(()=>i.remove(o)))}else return n(t,e)}}var r3=(()=>{class n extends Sp{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=Be(sl),this.contributeToStability=Be(_3)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(tE),...this.injector.get(g3,[])]));this.chain=i.reduceRight((r,o)=>qZ(r,o,this.injector),m3)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Kl(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(qe(Pp),qe(co))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();var XZ=/^\)\]\}',?\n/;function ZZ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var o3=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new wt(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?di(i.\u0275loadImpl()):Rt(null)).pipe(ur(()=>new Jt(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((M,x)=>s.setRequestHeader(M,x.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let M=e.detectContentTypeHeader();M!==null&&s.setRequestHeader("Content-Type",M)}if(e.responseType){let M=e.responseType.toLowerCase();s.responseType=M!=="json"?M:"text"}let a=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let M=s.statusText||"OK",x=new wa(s.getAllResponseHeaders()),b=ZZ(s)||e.url;return l=new rv({headers:x,status:s.status,statusText:M,url:b}),l},f=()=>{let{headers:M,status:x,statusText:b,url:T}=u(),E=null;x!==HZ&&(E=typeof s.response>"u"?s.responseText:s.response),x===0&&(x=E?p3:0);let D=x>=200&&x<300;if(e.responseType==="json"&&typeof E=="string"){let L=E;E=E.replace(XZ,"");try{E=E!==""?JSON.parse(E):null}catch(z){E=L,D&&(D=!1,E={error:z,text:E})}}D?(o.next(new Su({body:E,headers:M,status:x,statusText:b,url:T||void 0})),o.complete()):o.error(new pc({error:E,headers:M,status:x,statusText:b,url:T||void 0}))},h=M=>{let{url:x}=u(),b=new pc({error:M,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(b)},m=!1,p=M=>{m||(o.next(u()),m=!0);let x={type:mc.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(x.total=M.total),e.responseType==="text"&&s.responseText&&(x.partialText=s.responseText),o.next(x)},y=M=>{let x={type:mc.UploadProgress,loaded:M.loaded};M.lengthComputable&&(x.total=M.total),o.next(x)};return s.addEventListener("load",f),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),o.next({type:mc.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",f),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(qe(nf))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),v3=new xt(""),KZ="XSRF-TOKEN",JZ=new xt("",{providedIn:"root",factory:()=>KZ}),QZ="X-XSRF-TOKEN",eK=new xt("",{providedIn:"root",factory:()=>QZ}),ov=class{},tK=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=ev(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(qe(Ki),qe(Br),qe(JZ))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function nK(n,t){let e=n.url.toLowerCase();if(!Be(v3)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=Be(ov).getToken(),r=Be(eK);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var nE=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(nE||{});function y3(n,t){return{\u0275kind:n,\u0275providers:t}}function iE(...n){let t=[zn,o3,r3,{provide:Sp,useExisting:r3},{provide:Pp,useFactory:()=>Be(K1,{optional:!0})??Be(o3)},{provide:tE,useValue:nK,multi:!0},{provide:v3,useValue:!0},{provide:ov,useClass:tK}];for(let e of n)t.push(...e.\u0275providers);return lc(t)}var s3=new xt("");function iK(){return y3(nE.LegacyInterceptors,[{provide:s3,useFactory:YZ},{provide:tE,useExisting:s3,multi:!0}])}function x3(){return y3(nE.Fetch,[K1,{provide:Pp,useExisting:K1}])}var b3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yi({type:n})}static{this.\u0275inj=qi({providers:[iE(iK())]})}}return n})();var rK=new xt(""),a3="b",l3="h",c3="s",u3="st",d3="u",f3="rt",iv=new xt(""),oK=["GET","HEAD"];function sK(n,t){let p=Be(iv),{isCacheActive:e}=p,i=Hg(p,["isCacheActive"]),{transferCache:r,method:o}=n;if(!e||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!oK.includes(o)||!i.includeRequestsWithAuthHeaders&&aK(n)||i.filter?.(n)===!1)return t(n);let s=Be(Xd),a=Be(rK,{optional:!0}),l=wp(Be(Br));if(a&&!l)throw new wt(2803,!1);let u=l&&a?dK(n.url,a):n.url,f=cK(n,u),h=s.get(f,null),m=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(m=r.includeHeaders),h){let{[a3]:y,[f3]:M,[l3]:x,[c3]:b,[u3]:T,[d3]:E}=h,D=y;switch(M){case"arraybuffer":D=new TextEncoder().encode(y).buffer;break;case"blob":D=new Blob([y]);break}let L=new wa(x);return Rt(new Su({body:D,headers:L,status:b,statusText:T,url:E}))}return t(n).pipe(yi(y=>{y instanceof Su&&l&&s.set(f,{[a3]:y.body,[l3]:lK(y.headers,m),[c3]:y.status,[u3]:y.statusText,[d3]:u,[f3]:n.responseType})}))}function aK(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function lK(n,t){if(!t)return{};let e={};for(let i of t){let r=n.getAll(i);r!==null&&(e[i]=r)}return e}function h3(n){return[...n.keys()].sort().map(t=>`${t}=${n.getAll(t)}`).join("&")}function cK(n,t){let{params:e,method:i,responseType:r}=n,o=h3(e),s=n.serializeBody();s instanceof URLSearchParams?s=h3(s):typeof s!="string"&&(s="");let a=[i,r,t,s,o].join("|"),l=uK(a);return l}function uK(n){let t=0;for(let e of n)t=Math.imul(31,t)+e.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function C3(n){return[{provide:iv,useFactory:()=>(ll("NgHttpTransferCache"),je({isCacheActive:!0},n))},{provide:g3,useValue:sK,multi:!0,deps:[Xd,iv]},{provide:wu,multi:!0,useFactory:()=>{let t=Be(Ca),e=Be(iv);return()=>{B_(t).then(()=>{e.isCacheActive=!1})}}}]}function dK(n,t){let e=new URL(n,"resolve://").origin,i=t[e];return i?n.replace(e,i):n}var sE=class extends K_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},aE=class n extends sE{static makeCurrent(){HN(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=fK();return e==null?null:hK(e)}resetBaseElement(){Dp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ev(document.cookie,t)}},Dp=null;function fK(){return Dp=Dp||document.querySelector("base"),Dp?Dp.getAttribute("href"):null}function hK(n){return new URL(n,document.baseURI).pathname}var pK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),lE=new xt(""),S3=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new wt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(qe(lE),qe(qn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),sv=class{constructor(t){this._doc=t}},rE="ng-app-id",P3=(()=>{class n{constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=wp(o),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${rE}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=i,o.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===e)return r.delete(i),o.removeAttribute(rE),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(rE,this.appId),e.appendChild(s),s}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(qe(Ki),qe(M_),qe(Qw,8),qe(Br))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),oE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dE=/%COMP%/g,T3="%COMP%",mK=`_nghost-${T3}`,gK=`_ngcontent-${T3}`,_K=!0,vK=new xt("",{providedIn:"root",factory:()=>_K});function yK(n){return gK.replace(dE,n)}function xK(n){return mK.replace(dE,n)}function D3(n,t){return t.map(e=>e.replace(dE,n))}var M3=(()=>{class n{constructor(e,i,r,o,s,a,l,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=wp(a),this.defaultRenderer=new Op(e,s,l,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ga.ShadowDom&&(i=Yt(je({},i),{encapsulation:ga.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof av?r.applyToHost(e):r instanceof Ap&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case ga.Emulated:o=new av(l,u,i,this.appId,f,s,a,h);break;case ga.ShadowDom:return new cE(l,u,e,i,s,a,this.nonce,h);default:o=new Ap(l,u,i,f,s,a,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(qe(S3),qe(P3),qe(M_),qe(vK),qe(Ki),qe(Br),qe(qn),qe(Qw))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),Op=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(oE[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(w3(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(w3(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new wt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=oE[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=oE[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ya.DashCase|ya.Important)?t.style.setProperty(e,i,r&ya.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ya.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=ml().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function w3(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var cE=class extends Op{constructor(t,e,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=D3(r.id,r.styles);for(let f of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ap=class extends Op{constructor(t,e,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?D3(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},av=class extends Ap{constructor(t,e,i,r,o,s,a,l){let u=r+"-"+i.id;super(t,e,i,o,s,a,l,u),this.contentAttr=yK(u),this.hostAttr=xK(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},bK=(()=>{class n extends sv{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(qe(Ki))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),E3=["alt","control","meta","shift"],CK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},MK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},wK=(()=>{class n extends sv{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ml().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),E3.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=CK[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),E3.forEach(s=>{if(s!==r){let a=MK[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(qe(Ki))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function O3(n,t){return IN(je({rootComponent:n},EK(t)))}function EK(n){return{appProviders:[...OK,...n?.providers??[]],platformProviders:DK}}function SK(){aE.makeCurrent()}function PK(){return new ol}function TK(){return XR(document),document}var DK=[{provide:Br,useValue:q1},{provide:Jw,useValue:SK,multi:!0},{provide:Ki,useFactory:TK,deps:[]}];var OK=[{provide:h_,useValue:"root"},{provide:ol,useFactory:PK,deps:[]},{provide:lE,useClass:bK,multi:!0,deps:[Ki,qn,Br]},{provide:lE,useClass:wK,multi:!0,deps:[Ki]},M3,P3,S3,{provide:jd,useExisting:M3},{provide:nf,useClass:pK,deps:[]},[]];var A3=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(qe(Ki))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var uE=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(uE||{});function I3(...n){let t=[],e=new Set,i=e.has(uE.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of n)e.add(o),r.length&&t.push(r);return lc([[],RN(),e.has(uE.NoHttpTransferCache)||i?[]:C3({}),t])}var R3=(()=>{class n{constructor(){console.log("AuthInterceptor instantiated")}intercept(e,i){let o=["/login","/register","/delete-user","/activate-patient-user"].some(l=>e.url.includes(l)),s=e.headers.has("X-Skip-Interceptor");console.log("Request URL:",e.url),console.log("Is Non-Auth URL:",o),console.log("Skip Interceptor:",s);let a="";if(typeof window<"u"&&localStorage&&(a=localStorage.getItem("token")||"",console.log("Auth Token:",a)),a&&!o&&!s){let l=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return console.log("Auth Request Headers:",l.headers),i.handle(l)}return i.handle(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();var bn="primary",$p=Symbol("RouteTitle"),gE=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function df(n){return new gE(n)}function IK(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function RK(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ea(n[e],t[e]))return!1;return!0}function Ea(n,t){let e=n?_E(n):void 0,i=t?_E(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!W3(n[r],t[r]))return!1;return!0}function _E(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function W3(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function G3(n){return n.length>0?n[n.length-1]:null}function _c(n){return sM(n)?n:dc(n)?di(Promise.resolve(n)):Rt(n)}var kK={exact:q3,subset:Y3},$3={exact:NK,subset:FK,ignored:()=>!0};function k3(n,t,e){return kK[e.paths](n.root,t.root,e.matrixParams)&&$3[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function NK(n,t){return Ea(n,t)}function q3(n,t,e){if(!Tu(n.segments,t.segments)||!uv(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!q3(n.children[i],t.children[i],e))return!1;return!0}function FK(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>W3(n[e],t[e]))}function Y3(n,t,e){return X3(n,t,t.segments,e)}function X3(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Tu(r,e)||t.hasChildren()||!uv(r,e,i))}else if(n.segments.length===e.length){if(!Tu(n.segments,e)||!uv(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Y3(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!Tu(n.segments,r)||!uv(n.segments,r,i)||!n.children[bn]?!1:X3(n.children[bn],t,o,i)}}function uv(n,t,e){return t.every((i,r)=>$3[e](n[r].parameters,i.parameters))}var yl=class{constructor(t=new ti([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=df(this.queryParams),this._queryParamMap}toString(){return VK.serialize(this)}},ti=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dv(this)}},Pu=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=df(this.parameters),this._parameterMap}toString(){return K3(this)}};function LK(n,t){return Tu(n,t)&&n.every((e,i)=>Ea(e.parameters,t[i].parameters))}function Tu(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function UK(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===bn&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==bn&&(e=e.concat(t(r,i)))}),e}var qp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>new ff,providedIn:"root"})}}return n})(),ff=class{parse(t){let e=new yE(t);return new yl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ip(t.root,!0)}`,i=HK(t.queryParams),r=typeof t.fragment=="string"?`#${zK(t.fragment)}`:"";return`${e}${i}${r}`}},VK=new ff;function dv(n){return n.segments.map(t=>K3(t)).join("/")}function Ip(n,t){if(!n.hasChildren())return dv(n);if(t){let e=n.children[bn]?Ip(n.children[bn],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==bn&&i.push(`${r}:${Ip(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=UK(n,(i,r)=>r===bn?[Ip(n.children[bn],!1)]:[`${r}:${Ip(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[bn]!=null?`${dv(n)}/${e[0]}`:`${dv(n)}/(${e.join("//")})`}}function Z3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lv(n){return Z3(n).replace(/%3B/gi,";")}function zK(n){return encodeURI(n)}function vE(n){return Z3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fv(n){return decodeURIComponent(n)}function N3(n){return fv(n.replace(/\+/g,"%20"))}function K3(n){return`${vE(n.path)}${BK(n.parameters)}`}function BK(n){return Object.entries(n).map(([t,e])=>`;${vE(t)}=${vE(e)}`).join("")}function HK(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${lv(e)}=${lv(r)}`).join("&"):`${lv(e)}=${lv(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var jK=/^[^\/()?;#]+/;function fE(n){let t=n.match(jK);return t?t[0]:""}var WK=/^[^\/()?;=#]+/;function GK(n){let t=n.match(WK);return t?t[0]:""}var $K=/^[^=?&#]+/;function qK(n){let t=n.match($K);return t?t[0]:""}var YK=/^[^&#]+/;function XK(n){let t=n.match(YK);return t?t[0]:""}var yE=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ti([],{}):new ti([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[bn]=new ti(t,e)),i}parseSegment(){let t=fE(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new wt(4009,!1);return this.capture(t),new Pu(fv(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=GK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=fE(this.remaining);r&&(i=r,this.capture(i))}t[fv(e)]=fv(i)}parseQueryParam(t){let e=qK(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=XK(this.remaining);s&&(i=s,this.capture(i))}let r=N3(e),o=N3(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=fE(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new wt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=bn);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[bn]:new ti([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new wt(4011,!1)}};function J3(n){return n.segments.length>0?new ti([],{[bn]:n}):n}function Q3(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=Q3(r);if(i===bn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new ti(n.segments,t);return ZK(e)}function ZK(n){if(n.numberOfChildren===1&&n.children[bn]){let t=n.children[bn];return new ti(n.segments.concat(t.segments),t.children)}return n}function Du(n){return n instanceof yl}function KK(n,t,e=null,i=null){let r=eF(n);return tF(r,t,e,i)}function eF(n){let t;function e(o){let s={};for(let l of o.children){let u=e(l);s[l.outlet]=u}let a=new ti(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=J3(i);return t??r}function tF(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return hE(r,r,r,e,i);let o=JK(t);if(o.toRoot())return hE(r,r,new ti([],{}),e,i);let s=QK(o,r,n),a=s.processChildren?Np(s.segmentGroup,s.index,o.commands):iF(s.segmentGroup,s.index,o.commands);return hE(r,s.segmentGroup,a,e,i)}function hv(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Up(n){return typeof n=="object"&&n!=null&&n.outlets}function hE(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===t?s=e:s=nF(n,t,e);let a=J3(Q3(s));return new yl(a,o,r)}function nF(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=nF(o,t,e)}),new ti(n.segments,i)}var pv=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&hv(i[0]))throw new wt(4003,!1);let r=i.find(Up);if(r&&r!==G3(i))throw new wt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function JK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pv(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new pv(e,t,i)}var lf=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function QK(n,t,e){if(n.isAbsolute)return new lf(t,!0,0);if(!e)return new lf(t,!1,NaN);if(e.parent===null)return new lf(e,!0,0);let i=hv(n.commands[0])?0:1,r=e.segments.length-1+i;return eJ(e,r,n.numberOfDoubleDots)}function eJ(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new wt(4005,!1);r=i.segments.length}return new lf(i,!1,r-o)}function tJ(n){return Up(n[0])?n[0].outlets:{[bn]:n}}function iF(n,t,e){if(n??=new ti([],{}),n.segments.length===0&&n.hasChildren())return Np(n,t,e);let i=nJ(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new ti(n.segments.slice(0,i.pathIndex),{});return o.children[bn]=new ti(n.segments.slice(i.pathIndex),n.children),Np(o,0,r)}else return i.match&&r.length===0?new ti(n.segments,{}):i.match&&!n.hasChildren()?xE(n,t,e):i.match?Np(n,0,r):xE(n,t,e)}function Np(n,t,e){if(e.length===0)return new ti(n.segments,{});{let i=tJ(e),r={};if(Object.keys(i).some(o=>o!==bn)&&n.children[bn]&&n.numberOfChildren===1&&n.children[bn].segments.length===0){let o=Np(n.children[bn],t,e);return new ti(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=iF(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new ti(n.segments,r)}}function nJ(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(Up(a))break;let l=`${a}`,u=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!L3(l,u,s))return o;i+=2}else{if(!L3(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function xE(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Up(o)){let l=iJ(o.outlets);return new ti(i,l)}if(r===0&&hv(e[0])){let l=n.segments[t];i.push(new Pu(l.path,F3(e[0]))),r++;continue}let s=Up(o)?o.outlets[bn]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&hv(a)?(i.push(new Pu(s,F3(a))),r+=2):(i.push(new Pu(s,{})),r++)}return new ti(i,{})}function iJ(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=xE(new ti([],{}),0,i))}),t}function F3(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function L3(n,t,e){return n==e.path&&Ea(t,e.parameters)}var Fp="imperative",wr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(wr||{}),gs=class{constructor(t,e){this.id=t,this.url=e}},hf=class extends gs{constructor(t,e,i="imperative",r=null){super(t,e),this.type=wr.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qs=class extends gs{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=wr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$o=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($o||{}),mv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(mv||{}),vl=class extends gs{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=wr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gc=class extends gs{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=wr.NavigationSkipped}},Vp=class extends gs{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=wr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gv=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=wr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bE=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=wr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},CE=class extends gs{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=wr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ME=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=wr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wE=class extends gs{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=wr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},EE=class{constructor(t){this.route=t,this.type=wr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},SE=class{constructor(t){this.route=t,this.type=wr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},PE=class{constructor(t){this.snapshot=t,this.type=wr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},TE=class{constructor(t){this.snapshot=t,this.type=wr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},DE=class{constructor(t){this.snapshot=t,this.type=wr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},OE=class{constructor(t){this.snapshot=t,this.type=wr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_v=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=wr.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},zp=class{},pf=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function rJ(n,t){return n.providers&&!n._injector&&(n._injector=F_(n.providers,t,`Route: ${n.path}`)),n._injector??t}function Js(n){return n.outlet||bn}function oJ(n,t){let e=n.filter(i=>Js(i)===t);return e.push(...n.filter(i=>Js(i)!==t)),e}function Yp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var AE=class{get injector(){return Yp(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Xp(this.rootInjector),this.attachRef=null}},Xp=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new AE(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(qe(co))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vv=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=IE(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=IE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=RE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return RE(t,this._root).map(e=>e.value)}};function IE(n,t){if(n===t.value)return t;for(let e of t.children){let i=IE(n,e);if(i)return i}return null}function RE(n,t){if(n===t.value)return[t];for(let e of t.children){let i=RE(n,e);if(i.length)return i.unshift(t),i}return[]}var Go=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function af(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var yv=class extends vv{constructor(t,e){super(t),this.snapshot=e,HE(this,t)}toString(){return this.snapshot.toString()}};function rF(n){let t=sJ(n),e=new Pi([new Pu("",{})]),i=new Pi({}),r=new Pi({}),o=new Pi({}),s=new Pi(""),a=new nr(e,i,o,s,r,bn,n,t.root);return a.snapshot=t.root,new yv(new Go(a,[]),t)}function sJ(n){let t={},e={},i={},r="",o=new cf([],t,i,r,e,bn,n,null,{});return new bv("",new Go(o,[]))}var nr=class{constructor(t,e,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Dt(u=>u[$p]))??Rt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Dt(t=>df(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Dt(t=>df(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xv(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:je(je({},t.params),n.params),data:je(je({},t.data),n.data),resolve:je(je(je(je({},n.data),t.data),r?.data),n._resolvedData)}:i={params:je({},n.params),data:je({},n.data),resolve:je(je({},n.data),n._resolvedData??{})},r&&sF(r)&&(i.resolve[$p]=r.title),i}var cf=class{get title(){return this.data?.[$p]}constructor(t,e,i,r,o,s,a,l,u){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=df(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=df(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},bv=class extends vv{constructor(t,e){super(e),this.url=t,HE(this,e)}toString(){return oF(this._root)}};function HE(n,t){t.value._routerState=n,t.children.forEach(e=>HE(n,e))}function oF(n){let t=n.children.length>0?` { ${n.children.map(oF).join(", ")} } `:"";return`${n.value}${t}`}function pE(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ea(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ea(t.params,e.params)||n.paramsSubject.next(e.params),RK(t.url,e.url)||n.urlSubject.next(e.url),Ea(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kE(n,t){let e=Ea(n.params,t.params)&&LK(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||kE(n.parent,t.parent))}function sF(n){return typeof n.title=="string"||n.title===null}var jE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=bn,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.parentContexts=Be(Xp),this.location=Be(Ho),this.changeDetector=Be(Zs),this.inputBinder=Be(Ev,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new wt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new wt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new wt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new wt(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new NE(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mr]})}}return n})(),NE=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===nr?this.route:t===Xp?this.childContexts:this.parent.get(t,e)}},Ev=new xt(""),U3=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=ru([i.queryParams,i.params,i.data]).pipe(ur(([o,s,a],l)=>(a=je(je(je({},o),s),a),l===0?Rt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let s=kN(i.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function aJ(n,t,e){let i=Bp(n,t._root,e?e._root:void 0);return new yv(i,t)}function Bp(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=lJ(n,t,e);return new Go(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Bp(n,a)),s}}let i=cJ(t.value),r=t.children.map(o=>Bp(n,o));return new Go(i,r)}}function lJ(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Bp(n,i,r);return Bp(n,i)})}function cJ(n){return new nr(new Pi(n.url),new Pi(n.params),new Pi(n.queryParams),new Pi(n.fragment),new Pi(n.data),n.outlet,n.component,n)}var Hp=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},aF="ngNavigationCancelingError";function Cv(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Du(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=lF(!1,$o.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function lF(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[aF]=!0,e.cancellationCode=t,e}function uJ(n){return cF(n)&&Du(n.url)}function cF(n){return!!n&&n[aF]}var dJ=(n,t,e,i)=>Dt(r=>(new FE(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),FE=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),pE(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=af(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=af(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=af(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=af(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new OE(o.value.snapshot))}),t.children.length&&this.forwardEvent(new TE(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(pE(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),pE(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,i)}},Mv=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},uf=class{constructor(t,e){this.component=t,this.route=e}};function fJ(n,t,e){let i=n._root,r=t?t._root:null;return Rp(i,r,e,[i.value])}function hJ(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function gf(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!k2(n)?n:t.get(n):i}function Rp(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=af(t);return n.children.forEach(s=>{pJ(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Lp(a,e.getContext(s),r)),r}function pJ(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=mJ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Mv(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Rp(n,t,a?a.children:null,i,r):Rp(n,t,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new uf(a.outlet.component,s))}else s&&Lp(t,a,r),r.canActivateChecks.push(new Mv(i)),o.component?Rp(n,null,a?a.children:null,i,r):Rp(n,null,e,i,r);return r}function mJ(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Tu(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Tu(n.url,t.url)||!Ea(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kE(n,t)||!Ea(n.queryParams,t.queryParams);case"paramsChange":default:return!kE(n,t)}}function Lp(n,t,e){let i=af(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?Lp(s,t.children.getContext(o),e):Lp(s,null,e):Lp(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new uf(t.outlet.component,r)):e.canDeactivateChecks.push(new uf(null,r)):e.canDeactivateChecks.push(new uf(null,r))}function Zp(n){return typeof n=="function"}function gJ(n){return typeof n=="boolean"}function _J(n){return n&&Zp(n.canLoad)}function vJ(n){return n&&Zp(n.canActivate)}function yJ(n){return n&&Zp(n.canActivateChild)}function xJ(n){return n&&Zp(n.canDeactivate)}function bJ(n){return n&&Zp(n.canMatch)}function uF(n){return n instanceof el||n?.name==="EmptyError"}var cv=Symbol("INITIAL_VALUE");function mf(){return ur(n=>ru(n.map(t=>t.pipe(Vr(1),ou(cv)))).pipe(Dt(t=>{for(let e of t)if(e!==!0){if(e===cv)return cv;if(e===!1||CJ(e))return e}return!0}),vi(t=>t!==cv),Vr(1)))}function CJ(n){return Du(n)||n instanceof Hp}function MJ(n,t){return _i(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Rt(Yt(je({},e),{guardsResult:!0})):wJ(s,i,r,n).pipe(_i(a=>a&&gJ(a)?EJ(i,o,n,t):Rt(a)),Dt(a=>Yt(je({},e),{guardsResult:a})))})}function wJ(n,t,e,i){return di(n).pipe(_i(r=>OJ(r.component,r.route,e,t,i)),zs(r=>r!==!0,!0))}function EJ(n,t,e,i){return di(t).pipe(tl(r=>Dd(PJ(r.route.parent,i),SJ(r.route,i),DJ(n,r.path,e),TJ(n,r.route,e))),zs(r=>r!==!0,!0))}function SJ(n,t){return n!==null&&t&&t(new DE(n)),Rt(!0)}function PJ(n,t){return n!==null&&t&&t(new PE(n)),Rt(!0)}function TJ(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Rt(!0);let r=i.map(o=>v0(()=>{let s=Yp(t)??e,a=gf(o,s),l=vJ(a)?a.canActivate(t,n):ds(s,()=>a(t,n));return _c(l).pipe(zs())}));return Rt(r).pipe(mf())}function DJ(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>hJ(s)).filter(s=>s!==null).map(s=>v0(()=>{let a=s.guards.map(l=>{let u=Yp(s.node)??e,f=gf(l,u),h=yJ(f)?f.canActivateChild(i,n):ds(u,()=>f(i,n));return _c(h).pipe(zs())});return Rt(a).pipe(mf())}));return Rt(o).pipe(mf())}function OJ(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Rt(!0);let s=o.map(a=>{let l=Yp(t)??r,u=gf(a,l),f=xJ(u)?u.canDeactivate(n,t,e,i):ds(l,()=>u(n,t,e,i));return _c(f).pipe(zs())});return Rt(s).pipe(mf())}function AJ(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Rt(!0);let o=r.map(s=>{let a=gf(s,n),l=_J(a)?a.canLoad(t,e):ds(n,()=>a(t,e));return _c(l)});return Rt(o).pipe(mf(),dF(i))}function dF(n){return eM(yi(t=>{if(typeof t!="boolean")throw Cv(n,t)}),Dt(t=>t===!0))}function IJ(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Rt(!0);let o=r.map(s=>{let a=gf(s,n),l=bJ(a)?a.canMatch(t,e):ds(n,()=>a(t,e));return _c(l)});return Rt(o).pipe(mf(),dF(i))}var jp=class{constructor(t){this.segmentGroup=t||null}},Wp=class extends Error{constructor(t){super(),this.urlTree=t}};function sf(n){return En(new jp(n))}function RJ(n){return En(new wt(4e3,!1))}function kJ(n){return En(lF(!1,$o.GuardRejected))}var LE=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Rt(i);if(r.numberOfChildren>1||!r.children[bn])return RJ(`${t.redirectTo}`);r=r.children[bn]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:u,routeConfig:f,url:h,outlet:m,params:p,data:y,title:M}=r,x=ds(o,()=>a({params:p,data:y,queryParams:l,fragment:u,routeConfig:f,url:h,outlet:m,title:M}));if(x instanceof yl)throw new Wp(x);e=x}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Wp(s);return s}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new yl(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new ti(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new wt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},UE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NJ(n,t,e,i,r){let o=fF(n,t,e);return o.matched?(i=rJ(t,i),IJ(i,t,e,r).pipe(Dt(s=>s===!0?o:je({},UE)))):Rt(o)}function fF(n,t,e){if(t.path==="**")return FJ(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?je({},UE):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||IK)(e,n,t);if(!r)return je({},UE);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?je(je({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function FJ(n){return{matched:!0,parameters:n.length>0?G3(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function V3(n,t,e,i){return e.length>0&&VJ(n,e,i)?{segmentGroup:new ti(t,UJ(i,new ti(e,n.children))),slicedSegments:[]}:e.length===0&&zJ(n,e,i)?{segmentGroup:new ti(n.segments,LJ(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new ti(n.segments,n.children),slicedSegments:e}}function LJ(n,t,e,i){let r={};for(let o of e)if(Sv(n,t,o)&&!i[Js(o)]){let s=new ti([],{});r[Js(o)]=s}return je(je({},i),r)}function UJ(n,t){let e={};e[bn]=t;for(let i of n)if(i.path===""&&Js(i)!==bn){let r=new ti([],{});e[Js(i)]=r}return e}function VJ(n,t,e){return e.some(i=>Sv(n,t,i)&&Js(i)!==bn)}function zJ(n,t,e){return e.some(i=>Sv(n,t,i))}function Sv(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function BJ(n,t,e){return t.length===0&&!n.children[e]}var VE=class{};function HJ(n,t,e,i,r,o,s="emptyOnly"){return new zE(n,t,e,i,r,s,o).recognize()}var jJ=31,zE=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new LE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new wt(4002,`'${t.segmentGroup}'`)}recognize(){let t=V3(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Dt(({children:e,rootSnapshot:i})=>{let r=new Go(i,e),o=new bv("",r),s=KK(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new cf([],Object.freeze({}),Object.freeze(je({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),bn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,bn,e).pipe(Dt(i=>({children:i,rootSnapshot:e})),nn(i=>{if(i instanceof Wp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof jp?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(Dt(s=>s instanceof Go?[s]:[]))}processChildren(t,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return di(o).pipe(tl(s=>{let a=i.children[s],l=oJ(e,s);return this.processSegmentGroup(t,l,a,s,r)}),hM((s,a)=>(s.push(...a),s)),Zl(null),fM(),_i(s=>{if(s===null)return sf(i);let a=hF(s);return WJ(a),Rt(a)}))}processSegment(t,e,i,r,o,s,a){return di(e).pipe(tl(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,i,r,o,s,a).pipe(nn(u=>{if(u instanceof jp)return Rt(null);throw u}))),zs(l=>!!l),nn(l=>{if(uF(l))return BJ(i,r,o)?Rt(new VE):sf(i);throw l}))}processSegmentAgainstRoute(t,e,i,r,o,s,a,l){return Js(i)!==s&&(s===bn||!Sv(r,o,i))?sf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s,l):sf(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:h,remainingSegments:m}=fF(e,r,o);if(!l)return sf(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jJ&&(this.allowRedirects=!1));let p=new cf(o,u,Object.freeze(je({},this.urlTree.queryParams)),this.urlTree.fragment,z3(r),Js(r),r.component??r._loadedComponent??null,r,B3(r)),y=xv(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let M=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,h,p,t);return this.applyRedirects.lineralizeSegments(r,M).pipe(_i(x=>this.processSegment(t,i,e,x.concat(m),s,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,o,s){let a=NJ(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(ur(l=>l.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(ur(({routes:u})=>{let f=i._loadedInjector??t,{parameters:h,consumedSegments:m,remainingSegments:p}=l,y=new cf(m,h,Object.freeze(je({},this.urlTree.queryParams)),this.urlTree.fragment,z3(i),Js(i),i.component??i._loadedComponent??null,i,B3(i)),M=xv(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(M.params),y.data=Object.freeze(M.data);let{segmentGroup:x,slicedSegments:b}=V3(e,m,p,u);if(b.length===0&&x.hasChildren())return this.processChildren(f,u,x,y).pipe(Dt(E=>new Go(y,E)));if(u.length===0&&b.length===0)return Rt(new Go(y,[]));let T=Js(i)===o;return this.processSegment(f,u,x,b,T?bn:o,!0,y).pipe(Dt(E=>new Go(y,E instanceof Go?[E]:[])))}))):sf(e)))}getChildConfig(t,e,i){return e.children?Rt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Rt({routes:e._loadedRoutes,injector:e._loadedInjector}):AJ(t,e,i,this.urlSerializer).pipe(_i(r=>r?this.configLoader.loadChildren(t,e).pipe(yi(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):kJ(e))):Rt({routes:[],injector:t})}};function WJ(n){n.sort((t,e)=>t.value.outlet===bn?-1:e.value.outlet===bn?1:t.value.outlet.localeCompare(e.value.outlet))}function GJ(n){let t=n.value.routeConfig;return t&&t.path===""}function hF(n){let t=[],e=new Set;for(let i of n){if(!GJ(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=hF(i.children);t.push(new Go(i.value,r))}return t.filter(i=>!e.has(i))}function z3(n){return n.data||{}}function B3(n){return n.resolve||{}}function $J(n,t,e,i,r,o){return _i(s=>HJ(n,t,e,i,s.extractedUrl,r,o).pipe(Dt(({state:a,tree:l})=>Yt(je({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function qJ(n,t){return _i(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Rt(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of pF(l))s.add(u);let a=0;return di(s).pipe(tl(l=>o.has(l)?YJ(l,i,n,t):(l.data=xv(l,l.parent,n).resolve,Rt(void 0))),yi(()=>a++),Jl(1),_i(l=>a===s.size?Rt(e):so))})}function pF(n){let t=n.children.map(e=>pF(e)).flat();return[n,...t]}function YJ(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!sF(r)&&(o[$p]=r.title),XJ(o,n,t,i).pipe(Dt(s=>(n._resolvedData=s,n.data=xv(n,n.parent,e).resolve,null)))}function XJ(n,t,e,i){let r=_E(n);if(r.length===0)return Rt({});let o={};return di(r).pipe(_i(s=>ZJ(n[s],t,e,i).pipe(zs(),yi(a=>{if(a instanceof Hp)throw Cv(new ff,a);o[s]=a}))),Jl(1),uM(o),nn(s=>uF(s)?so:En(s)))}function ZJ(n,t,e,i){let r=Yp(t)??i,o=gf(n,r),s=o.resolve?o.resolve(t,e):ds(r,()=>o(t,e));return _c(s)}function mE(n){return ur(t=>{let e=n(t);return e?di(e).pipe(Dt(()=>t)):Rt(t)})}var mF=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===bn);return i}getResolvedTitleForRoute(e){return e.data[$p]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>Be(KJ),providedIn:"root"})}}return n})(),KJ=(()=>{class n extends mF{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(qe(A3))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kp=new xt("",{providedIn:"root",factory:()=>({})}),JJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=We({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ke],decls:1,vars:0,template:function(i,r){i&1&&me(0,"router-outlet")},dependencies:[jE],encapsulation:2})}}return n})();function WE(n){let t=n.children&&n.children.map(WE),e=t?Yt(je({},n),{children:t}):je({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==bn&&(e.component=JJ),e}var Gp=new xt(""),GE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Be(H_)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Rt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=_c(e.loadComponent()).pipe(Dt(gF),yi(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Kl(()=>{this.componentLoaders.delete(e)})),r=new Ed(i,()=>new An).pipe(wd());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Rt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=QJ(i,this.compiler,e,this.onLoadEndListener).pipe(Kl(()=>{this.childrenLoaders.delete(i)})),s=new Ed(o,()=>new An).pipe(wd());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function QJ(n,t,e,i){return _c(n.loadChildren()).pipe(Dt(gF),_i(r=>r instanceof up||Array.isArray(r)?Rt(r):di(t.compileModuleAsync(r))),Dt(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Gp,[],{optional:!0,self:!0}).flat()),{routes:s.map(WE),injector:o}}))}function eQ(n){return n&&typeof n=="object"&&"default"in n}function gF(n){return eQ(n)?n.default:n}var $E=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>Be(tQ),providedIn:"root"})}}return n})(),tQ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_F=new xt(""),vF=new xt("");function nQ(n,t,e){let i=n.get(vF),r=n.get(Ki);return n.get(qn).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=r.startViewTransition(()=>(o(),iQ(n))),{onViewTransitionCreated:l}=i;return l&&ds(n,()=>l({transition:a,from:t,to:e})),s})}function iQ(n){return new Promise(t=>{M1({read:()=>setTimeout(t)},{injector:n})})}var rQ=new xt(""),qE=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new An,this.transitionAbortSubject=new An,this.configLoader=Be(GE),this.environmentInjector=Be(co),this.urlSerializer=Be(qp),this.rootContexts=Be(Xp),this.location=Be(rf),this.inputBindingEnabled=Be(Ev,{optional:!0})!==null,this.titleStrategy=Be(mF),this.options=Be(Kp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Be($E),this.createViewTransition=Be(_F,{optional:!0}),this.navigationErrorHandler=Be(rQ,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Rt(void 0),this.rootComponentType=null;let e=r=>this.events.next(new EE(r)),i=r=>this.events.next(new SE(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Yt(je(je({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Pi({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fp,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vi(o=>o.id!==0),Dt(o=>Yt(je({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ur(o=>{let s=!1,a=!1;return Rt(o).pipe(ur(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$o.SupersededByNewNavigation),so;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Yt(je({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&f!=="reload"){let h="";return this.events.next(new gc(l.id,this.urlSerializer.serialize(l.rawUrl),h,mv.IgnoredSameUrlNavigation)),l.resolve(!1),so}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Rt(l).pipe(ur(h=>{let m=this.transitions?.getValue();return this.events.next(new hf(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions?.getValue()?so:Promise.resolve(h)}),$J(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),yi(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Yt(je({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let m=new gv(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:m,source:p,restoredState:y,extras:M}=l,x=new hf(h,this.urlSerializer.serialize(m),p,y);this.events.next(x);let b=rF(this.rootComponentType).snapshot;return this.currentTransition=o=Yt(je({},l),{targetSnapshot:b,urlAfterRedirects:m,extras:Yt(je({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Rt(o)}else{let h="";return this.events.next(new gc(l.id,this.urlSerializer.serialize(l.extractedUrl),h,mv.IgnoredByUrlHandlingStrategy)),l.resolve(!1),so}}),yi(l=>{let u=new bE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Dt(l=>(this.currentTransition=o=Yt(je({},l),{guards:fJ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),MJ(this.environmentInjector,l=>this.events.next(l)),yi(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Cv(this.urlSerializer,l.guardsResult);let u=new CE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),vi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$o.GuardRejected),!1)),mE(l=>{if(l.guards.canActivateChecks.length)return Rt(l).pipe(yi(u=>{let f=new ME(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),ur(u=>{let f=!1;return Rt(u).pipe(qJ(this.paramsInheritanceStrategy,this.environmentInjector),yi({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",$o.NoDataFromResolver)}}))}),yi(u=>{let f=new wE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),mE(l=>{let u=f=>{let h=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(f.routeConfig).pipe(yi(m=>{f.component=m}),Dt(()=>{})));for(let m of f.children)h.push(...u(m));return h};return ru(u(l.targetSnapshot.root)).pipe(Zl(null),Vr(1))}),mE(()=>this.afterPreactivation()),ur(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?di(f).pipe(Dt(()=>o)):Rt(o)}),Dt(l=>{let u=aJ(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Yt(je({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),yi(()=>{this.events.next(new zp)}),dJ(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Vr(1),yi({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Co(this.transitionAbortSubject.pipe(yi(l=>{throw l}))),Kl(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",$o.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),nn(l=>{if(a=!0,cF(l))this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),uJ(l)?this.events.next(new pf(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Vp(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=ds(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(f instanceof Hp){let{message:h,cancellationCode:m}=Cv(this.urlSerializer,f);this.events.next(new vl(o.id,this.urlSerializer.serialize(o.extractedUrl),h,m)),this.events.next(new pf(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(u);let h=e.errorHandler(l);o.resolve(!!h)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return so}))}))}cancelNavigationTransition(e,i,r){let o=new vl(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oQ(n){return n!==Fp}var sQ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>Be(aQ),providedIn:"root"})}}return n})(),BE=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},aQ=(()=>{class n extends BE{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yF=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:()=>Be(lQ),providedIn:"root"})}}return n})(),lQ=(()=>{class n extends yF{constructor(){super(...arguments),this.location=Be(rf),this.urlSerializer=Be(qp),this.options=Be(Kp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Be($E),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rF(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof hf)this.stateMemento=this.createStateMemento();else if(e instanceof gc)this.rawUrlTree=i.initialUrl;else if(e instanceof gv){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof zp?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof vl&&(e.code===$o.GuardRejected||e.code===$o.NoDataFromResolver)?this.restoreHistory(i):e instanceof Vp?this.restoreHistory(i,!0):e instanceof Qs&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof yl?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=je(je({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=je(je({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(kp||{});function xF(n,t){n.events.pipe(vi(e=>e instanceof Qs||e instanceof vl||e instanceof Vp||e instanceof gc),Dt(e=>e instanceof Qs||e instanceof gc?kp.COMPLETE:(e instanceof vl?e.code===$o.Redirect||e.code===$o.SupersededByNewNavigation:!1)?kp.REDIRECTING:kp.FAILED),vi(e=>e!==kp.REDIRECTING),Vr(1)).subscribe(()=>{t()})}function cQ(n){throw n}var uQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ct=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Be(V_),this.stateManager=Be(yF),this.options=Be(Kp,{optional:!0})||{},this.pendingTasks=Be(sl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Be(qE),this.urlSerializer=Be(qp),this.location=Be(rf),this.urlHandlingStrategy=Be($E),this._events=new An,this.errorHandler=this.options.errorHandler||cQ,this.navigated=!1,this.routeReuseStrategy=Be(sQ),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Be(Gp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Be(Ev,{optional:!0}),this.eventsSubscription=new zi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof vl&&i.code!==$o.Redirect&&i.code!==$o.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Qs)this.navigated=!0;else if(i instanceof pf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=je({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||oQ(r.source)},s);this.scheduleNavigation(a,Fp,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}hQ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fp,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=je({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(WE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=je(je({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let h;try{let m=r?r.snapshot:this.routerState.snapshot.root;h=eF(m)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return tF(h,e,f,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Du(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Fp,null,i)}navigate(e,i={skipLocationChange:!1}){return fQ(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=je({},uQ):i===!1?r=je({},dQ):r=i,Du(e))return k3(this.currentUrlTree,e,r);let o=this.parseUrl(e);return k3(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,m)=>{a=h,l=m});let f=this.pendingTasks.add();return xF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fQ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new wt(4008,!1)}function hQ(n){return!(n instanceof zp)&&!(n instanceof pf)}var zt=(()=>{class n{constructor(e,i,r,o,s,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new An,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof Qs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Du(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:fk(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Du(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)($(Ct),$(nr),Yw("tabindex"),$(Mi),$(fi),$(gl))}}static{this.\u0275dir=en({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&se("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&Zi("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fc],replaceUrl:[2,"replaceUrl","replaceUrl",fc],routerLink:"routerLink"},standalone:!0,features:[b1,Mr]})}}return n})(),_s=(()=>{class n{get isActive(){return this._isActive}constructor(e,i,r,o,s){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new gt,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof Qs&&this.update()})}ngAfterContentInit(){Rt(this.links.changes,Rt(null)).pipe(ha()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=di(e).pipe(ha()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=pQ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(i){return new(i||n)($(Ct),$(fi),$(Mi),$(Zs),$(zt,8))}}static{this.\u0275dir=en({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&pN(o,zt,5),i&2){let s;mN(s=gN())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Mr]})}}return n})();function pQ(n){return!!n.paths}var wv=class{};var mQ=(()=>{class n{constructor(e,i,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vi(e=>e instanceof Qs),tl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=F_(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return di(r).pipe(ha())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Rt(null);let o=r.pipe(_i(s=>s===null?Rt(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return di([o,s]).pipe(ha())}else return o})}static{this.\u0275fac=function(i){return new(i||n)(qe(Ct),qe(H_),qe(co),qe(wv),qe(GE))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bF=new xt(""),gQ=(()=>{class n{constructor(e,i,r,o,s={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof hf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Qs?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof gc&&e.code===mv.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof _v&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new _v(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Sk()}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function CF(n,...t){return lc([{provide:Gp,multi:!0,useValue:n},[],{provide:nr,useFactory:MF,deps:[Ct]},{provide:wu,multi:!0,useFactory:wF},t.map(e=>e.\u0275providers)])}function MF(n){return n.routerState.root}function Jp(n,t){return{\u0275kind:n,\u0275providers:t}}function wF(){let n=Be(Eo);return t=>{let e=n.get(Ca);if(t!==e.components[0])return;let i=n.get(Ct),r=n.get(EF);n.get(YE)===1&&i.initialNavigation(),n.get(SF,null,Tn.Optional)?.setUpPreloading(),n.get(bF,null,Tn.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var EF=new xt("",{factory:()=>new An}),YE=new xt("",{providedIn:"root",factory:()=>1});function _Q(){return Jp(2,[{provide:YE,useValue:0},{provide:z_,multi:!0,deps:[Eo],useFactory:t=>{let e=t.get(jN,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Ct),o=t.get(EF);xF(r,()=>{i(!0)}),t.get(qE).afterPreactivation=()=>(i(!0),o.closed?Rt(void 0):o),r.initialNavigation()}))}}])}function vQ(){return Jp(3,[{provide:z_,multi:!0,useFactory:()=>{let t=Be(Ct);return()=>{t.setUpLocationChangeListener()}}},{provide:YE,useValue:2}])}var SF=new xt("");function yQ(n){return Jp(0,[{provide:SF,useExisting:mQ},{provide:wv,useExisting:n}])}function xQ(){return Jp(8,[U3,{provide:Ev,useExisting:U3}])}function bQ(n){let t=[{provide:_F,useValue:nQ},{provide:vF,useValue:je({skipNextTransition:!!n?.skipInitialTransition},n)}];return Jp(9,t)}var H3=new xt("ROUTER_FORROOT_GUARD"),CQ=[rf,{provide:qp,useClass:ff},Ct,Xp,{provide:nr,useFactory:MF,deps:[Ct]},GE,[]],kt=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[CQ,[],{provide:Gp,multi:!0,useValue:e},{provide:H3,useFactory:SQ,deps:[[Ct,new hp,new f_]]},{provide:Kp,useValue:i||{}},i?.useHash?wQ():EQ(),MQ(),i?.preloadingStrategy?yQ(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?PQ(i):[],i?.bindToComponentInputs?xQ().\u0275providers:[],i?.enableViewTransitions?bQ().\u0275providers:[],TQ()]}}static forChild(e){return{ngModule:n,providers:[{provide:Gp,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(qe(H3,8))}}static{this.\u0275mod=Yi({type:n})}static{this.\u0275inj=qi({})}}return n})();function MQ(){return{provide:bF,useFactory:()=>{let n=Be(JN),t=Be(qn),e=Be(Kp),i=Be(qE),r=Be(qp);return e.scrollOffset&&n.setOffset(e.scrollOffset),new gQ(r,i,n,t,e)}}}function wQ(){return{provide:gl,useClass:GN}}function EQ(){return{provide:gl,useClass:G1}}function SQ(n){return"guarded"}function PQ(n){return[n.initialNavigation==="disabled"?vQ().\u0275providers:[],n.initialNavigation==="enabledBlocking"?_Q().\u0275providers:[]]}var j3=new xt("");function TQ(){return[{provide:j3,useFactory:wF},{provide:wu,multi:!0,useExisting:j3}]}var FF=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)($(Mi),$(fi))}}static{this.\u0275dir=en({type:n})}}return n})(),Fv=(()=>{class n extends FF{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,features:[Xi]})}}return n})(),xf=new xt(""),DQ={provide:xf,useExisting:Cr(()=>rm),multi:!0},rm=(()=>{class n extends Fv{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&se("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[Hi([DQ]),Xi]})}}return n})(),OQ={provide:xf,useExisting:Cr(()=>Ot),multi:!0};function AQ(){let n=ml()?ml().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var IQ=new xt(""),Ot=(()=>{class n extends FF{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!AQ())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)($(Mi),$(fi),$(IQ,8))}}static{this.\u0275dir=en({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&se("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Hi([OQ]),Xi]})}}return n})();function vc(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function LF(n){return n!=null&&typeof n.length=="number"}var ea=new xt(""),bf=new xt(""),RQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qt=class{static min(t){return kQ(t)}static max(t){return NQ(t)}static required(t){return UF(t)}static requiredTrue(t){return VF(t)}static email(t){return FQ(t)}static minLength(t){return zF(t)}static maxLength(t){return BF(t)}static pattern(t){return HF(t)}static nullValidator(t){return Tv(t)}static compose(t){return YF(t)}static composeAsync(t){return XF(t)}};function kQ(n){return t=>{if(vc(t.value)||vc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function NQ(n){return t=>{if(vc(t.value)||vc(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function UF(n){return vc(n.value)?{required:!0}:null}function VF(n){return n.value===!0?null:{required:!0}}function FQ(n){return vc(n.value)||RQ.test(n.value)?null:{email:!0}}function zF(n){return t=>vc(t.value)||!LF(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function BF(n){return t=>LF(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function HF(n){if(!n)return Tv;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(vc(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Tv(n){return null}function jF(n){return n!=null}function WF(n){return dc(n)?di(n):n}function GF(n){let t={};return n.forEach(e=>{t=e!=null?je(je({},t),e):t}),Object.keys(t).length===0?null:t}function $F(n,t){return t.map(e=>e(n))}function LQ(n){return!n.validate}function qF(n){return n.map(t=>LQ(t)?t:e=>t.validate(e))}function YF(n){if(!n)return null;let t=n.filter(jF);return t.length==0?null:function(e){return GF($F(e,t))}}function eS(n){return n!=null?YF(qF(n)):null}function XF(n){if(!n)return null;let t=n.filter(jF);return t.length==0?null:function(e){let i=$F(e,t).map(WF);return aM(i).pipe(Dt(GF))}}function tS(n){return n!=null?XF(qF(n)):null}function PF(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function ZF(n){return n._rawValidators}function KF(n){return n._rawAsyncValidators}function XE(n){return n?Array.isArray(n)?n:[n]:[]}function Dv(n,t){return Array.isArray(n)?n.includes(t):n===t}function TF(n,t){let e=XE(t);return XE(n).forEach(r=>{Dv(e,r)||e.push(r)}),e}function DF(n,t){return XE(t).filter(e=>!Dv(n,e))}var Ov=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=eS(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=tS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},fo=class extends Ov{get formDirective(){return null}get path(){return null}},Ou=class extends Ov{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Av=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},UQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Wye=Yt(je({},UQ),{"[class.ng-submitted]":"isSubmitted"}),Nt=(()=>{class n extends Av{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)($(Ou,2))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&So("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Xi]})}}return n})(),Bt=(()=>{class n extends Av{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)($(fo,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&So("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Xi]})}}return n})();var Qp="VALID",Pv="INVALID",_f="PENDING",em="DISABLED",yc=class{},Iv=class extends yc{constructor(t,e){super(),this.value=t,this.source=e}},nm=class extends yc{constructor(t,e){super(),this.pristine=t,this.source=e}},im=class extends yc{constructor(t,e){super(),this.touched=t,this.source=e}},vf=class extends yc{constructor(t,e){super(),this.status=t,this.source=e}},ZE=class extends yc{constructor(t){super(),this.source=t}},KE=class extends yc{constructor(t){super(),this.source=t}};function nS(n){return(Lv(n)?n.validators:n)||null}function VQ(n){return Array.isArray(n)?eS(n):n||null}function iS(n,t){return(Lv(t)?t.asyncValidators:n)||null}function zQ(n){return Array.isArray(n)?tS(n):n||null}function Lv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function JF(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new wt(1e3,"");if(!i[e])throw new wt(1001,"")}function QF(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new wt(1002,"")})}var yf=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ef(()=>this.statusReactive()),this.statusReactive=Jd(void 0),this._pristine=ef(()=>this.pristineReactive()),this.pristineReactive=Jd(!0),this._touched=ef(()=>this.touchedReactive()),this.touchedReactive=Jd(!1),this._events=new An,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return hs(this.statusReactive)}set status(t){hs(()=>this.statusReactive.set(t))}get valid(){return this.status===Qp}get invalid(){return this.status===Pv}get pending(){return this.status==_f}get disabled(){return this.status===em}get enabled(){return this.status!==em}get pristine(){return hs(this.pristineReactive)}set pristine(t){hs(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return hs(this.touchedReactive)}set touched(t){hs(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(TF(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(TF(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(DF(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(DF(t,this._rawAsyncValidators))}hasValidator(t){return Dv(this._rawValidators,t)}hasAsyncValidator(t){return Dv(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Yt(je({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new im(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new im(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Yt(je({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new nm(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new nm(!0,i))}markAsPending(t={}){this.status=_f;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new vf(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Yt(je({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=em,this.errors=null,this._forEachChild(r=>{r.disable(Yt(je({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Iv(this.value,i)),this._events.next(new vf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Yt(je({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Qp,this._forEachChild(i=>{i.enable(Yt(je({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Yt(je({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qp||this.status===_f)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Iv(this.value,e)),this._events.next(new vf(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Yt(je({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?em:Qp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=_f,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=WF(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new vf(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?em:this.errors?Pv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_f)?_f:this._anyControlsHaveStatus(Pv)?Pv:Qp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new nm(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new im(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Lv(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=VQ(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=zQ(this._rawAsyncValidators)}},vs=class extends yf{constructor(t,e,i){super(nS(e),iS(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){QF(this,!0,t),Object.keys(t).forEach(i=>{JF(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var JE=class extends vs{};var om=new xt("CallSetDisabledState",{providedIn:"root",factory:()=>Uv}),Uv="always";function Vv(n,t){return[...t.path,n]}function Rv(n,t,e=Uv){rS(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),HQ(n,t),WQ(n,t),jQ(n,t),BQ(n,t)}function OF(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Nv(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kv(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function BQ(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function rS(n,t){let e=ZF(n);t.validator!==null?n.setValidators(PF(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=KF(n);t.asyncValidator!==null?n.setAsyncValidators(PF(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();kv(t._rawValidators,r),kv(t._rawAsyncValidators,r)}function Nv(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=ZF(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=KF(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return kv(t._rawValidators,i),kv(t._rawAsyncValidators,i),e}function HQ(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&eL(n,t)})}function jQ(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&eL(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function eL(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function WQ(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function tL(n,t){n==null,rS(n,t)}function GQ(n,t){return Nv(n,t)}function nL(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function $Q(n){return Object.getPrototypeOf(n.constructor)===Fv}function iL(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function rL(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===Ot?e=o:$Q(o)?i=o:r=o}),r||i||e||null}function qQ(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var YQ={provide:fo,useExisting:Cr(()=>Nn)},tm=Promise.resolve(),Nn=(()=>{class n extends fo{get submitted(){return hs(this.submittedReactive)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ef(()=>this.submittedReactive()),this.submittedReactive=Jd(!1),this._directives=new Set,this.ngSubmit=new gt,this.form=new vs({},eS(e),tS(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){tm.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Rv(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){tm.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){tm.then(()=>{let i=this._findContainer(e.path),r=new vs({});tL(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){tm.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){tm.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),iL(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)($(ea,10),$(bf,10),$(om,8))}}static{this.\u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&se("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hi([YQ]),Xi]})}}return n})();function AF(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function IF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Bn=class extends yf{constructor(t=null,e,i){super(nS(e),iS(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lv(e)&&(e.nonNullable||e.initialValueIsDefault)&&(IF(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){AF(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){AF(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){IF(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var XQ=n=>n instanceof Bn,ZQ=(()=>{class n extends fo{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Vv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,features:[Xi]})}}return n})();var KQ={provide:Ou,useExisting:Cr(()=>hn)},RF=Promise.resolve(),hn=(()=>{class n extends Ou{constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Bn,this._registered=!1,this.name="",this.update=new gt,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=rL(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),nL(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Rv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){RF.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&fc(i);RF.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Vv(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)($(fo,9),$(ea,10),$(bf,10),$(xf,10),$(Zs,8),$(om,8))}}static{this.\u0275dir=en({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hi([KQ]),Xi,Mr]})}}return n})(),Ht=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var oL=new xt("");var JQ={provide:fo,useExisting:Cr(()=>Er)},Er=(()=>{class n extends fo{get submitted(){return hs(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ef(()=>this._submittedReactive()),this._submittedReactive=Jd(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new gt,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Nv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Rv(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){OF(e.control||null,e,!1),qQ(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),iL(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new ZE(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new KE(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(OF(i||null,e),XQ(r)&&(Rv(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);tL(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&GQ(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rS(this.form,this),this._oldForm&&Nv(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)($(ea,10),$(bf,10),$(om,8))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&se("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hi([JQ]),Xi,Mr]})}}return n})(),QQ={provide:fo,useExisting:Cr(()=>sL)},sL=(()=>{class n extends ZQ{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){aL(this._parent)}static{this.\u0275fac=function(i){return new(i||n)($(fo,13),$(ea,10),$(bf,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[Hi([QQ]),Xi]})}}return n})(),eee={provide:fo,useExisting:Cr(()=>Cf)},Cf=(()=>{class n extends fo{constructor(e,i,r){super(),this.name=null,this._parent=e,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Vv(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){aL(this._parent)}static{this.\u0275fac=function(i){return new(i||n)($(fo,13),$(ea,10),$(bf,10))}}static{this.\u0275dir=en({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[Hi([eee]),Xi]})}}return n})();function aL(n){return!(n instanceof sL)&&!(n instanceof Er)&&!(n instanceof Cf)}var tee={provide:Ou,useExisting:Cr(()=>kr)},kr=(()=>{class n extends Ou{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new gt,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=rL(this,o)}ngOnChanges(e){this._added||this._setUpControl(),nL(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Vv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)($(fo,13),$(ea,10),$(bf,10),$(xf,10),$(oL,8))}}static{this.\u0275dir=en({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Hi([tee]),Xi,Mr]})}}return n})(),nee={provide:xf,useExisting:Cr(()=>Wi),multi:!0};function lL(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function iee(n){return n.split(":")[0]}var Wi=(()=>{class n extends Fv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i=this._getOptionId(e),r=lL(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=iee(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&se("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Hi([nee]),Xi]})}}return n})(),Ri=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(lL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)($(fi),$(Mi),$(Wi,9))}}static{this.\u0275dir=en({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),ree={provide:xf,useExisting:Cr(()=>cL),multi:!0};function kF(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function oee(n){return n.split(":")[0]}var cL=(()=>{class n extends Fv{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);r.push(u)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=oee(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&se("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Hi([ree]),Xi]})}}return n})(),ki=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(kF(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(kF(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)($(fi),$(Mi),$(cL,9))}}static{this.\u0275dir=en({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function uL(n){return typeof n=="number"?n:parseInt(n,10)}var zv=(()=>{class n{constructor(){this._validator=Tv}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Tv,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=en({type:n,features:[Mr]})}}return n})();var see={provide:ea,useExisting:Cr(()=>tn),multi:!0},aee={provide:ea,useExisting:Cr(()=>oS),multi:!0},tn=(()=>{class n extends zv{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fc,this.createValidator=e=>UF}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Zi("required",r._enabled?"":null)},inputs:{required:"required"},features:[Hi([see]),Xi]})}}return n})(),oS=(()=>{class n extends tn{constructor(){super(...arguments),this.createValidator=e=>VF}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Zi("required",r._enabled?"":null)},features:[Hi([aee]),Xi]})}}return n})();var lee={provide:ea,useExisting:Cr(()=>sm),multi:!0},sm=(()=>{class n extends zv{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>uL(e),this.createValidator=e=>zF(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Zi("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[Hi([lee]),Xi]})}}return n})(),cee={provide:ea,useExisting:Cr(()=>am),multi:!0},am=(()=>{class n extends zv{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>uL(e),this.createValidator=e=>BF(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Zi("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Hi([cee]),Xi]})}}return n})(),uee={provide:ea,useExisting:Cr(()=>xl),multi:!0},xl=(()=>{class n extends zv{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=e=>e,this.createValidator=e=>HF(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=zr(n)))(r||n)}})()}static{this.\u0275dir=en({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&Zi("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[Hi([uee]),Xi]})}}return n})();var dL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yi({type:n})}static{this.\u0275inj=qi({})}}return n})(),QE=class extends yf{constructor(t,e,i){super(nS(e),iS(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){QF(this,!1,t),t.forEach((i,r)=>{JF(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function NF(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Sa=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return NF(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new vs(r,o)}record(e,i=null){let r=this._reduceControls(e);return new JE(r,i)}control(e,i,r){let o={};return this.useNonNullable?(NF(i)?o=i:(o.validators=i,o.asyncValidators=r),new Bn(e,Yt(je({},o),{nonNullable:!0}))):new Bn(e,i,r)}array(e,i,r){let o=e.map(s=>this._createControl(s));return new QE(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof Bn)return e;if(e instanceof yf)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:om,useValue:e.callSetDisabledState??Uv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yi({type:n})}static{this.\u0275inj=qi({imports:[dL]})}}return n})(),ir=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:oL,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:om,useValue:e.callSetDisabledState??Uv}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=Yi({type:n})}static{this.\u0275inj=qi({imports:[dL]})}}return n})();var xc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}login(e,i){let r={email:e,password:i};return this.http.post(`${this.apiUrl}/login`,r,{observe:"response",responseType:"text"})}getRoleFromToken(e){return JSON.parse(atob(e.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]}sendTokenToBackend(e){let i={"X-Skip-Interceptor":"true"};return this.http.post(`${this.apiUrl}/Google`,{token:e},{headers:i,observe:"response",responseType:"text"})}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dee(n,t){n&1&&(g(0,"p"),C(1," Email is required. "),_())}function fee(n,t){n&1&&(g(0,"p"),C(1," Please enter a valid email address. "),_())}function hee(n,t){if(n&1&&(g(0,"div",20),Se(1,dee,2,0,"p",21)(2,fee,2,0,"p",21),_()),n&2){let e,i,r=ae();A(),X("ngIf",(e=r.loginForm.get("email"))==null||e.errors==null?null:e.errors.required),A(),X("ngIf",(i=r.loginForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function pee(n,t){n&1&&(g(0,"p"),C(1," Password is required. "),_())}function mee(n,t){if(n&1&&(g(0,"div",20),Se(1,pee,2,0,"p",21),_()),n&2){let e,i=ae();A(),X("ngIf",(e=i.loginForm.get("password"))==null||e.errors==null?null:e.errors.required)}}function gee(n,t){if(n&1&&(g(0,"div",20)(1,"p"),C(2),_()()),n&2){let e=ae();A(2),Je(e.loginError)}}var fL=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i,this.passwordFieldType="password",this.loginForm=new vs({email:new Bn("",[qt.required,qt.email]),password:new Bn("",qt.required)}),this.loginError=null}ngOnInit(){if(typeof document<"u"){let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>this.initializeGoogleSignIn(),document.head.appendChild(e)}}initializeGoogleSignIn(){google.accounts.id.initialize({client_id:"421903046401-5q20kb0ijen3tah9r68ngg2m1kmv66bj.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this)}),google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large"})}handleCredentialResponse(e){console.log("Encoded JWT ID token: "+e.credential),this.sendTokenToBackend(e.credential)}sendTokenToBackend(e){this.loginService.sendTokenToBackend(e).subscribe(i=>{let r=i.body;if(r){localStorage.setItem("token",r);let s=JSON.parse(atob(r.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];s==="Admin"?this.router.navigate(["/panel-admin"]):s==="Patient"?this.router.navigate(["/patient-panel"]):s==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",s),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},i=>{i.status===401&&this.router.navigate(["/register"],{queryParams:{token:e}}),console.error("Login failed",i),this.loginError="Invalid email or password"})}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.loginService.login(this.loginForm.value.email,this.loginForm.value.password).subscribe(e=>{let i=e.body;if(i){localStorage.setItem("token",i);let o=JSON.parse(atob(i.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];o==="Admin"?this.router.navigate(["/panel-admin"]):o==="Patient"?this.router.navigate(["/patient-panel"]):o==="Doctor"?this.router.navigate(["/panel-doctor"]):(console.error("Unknown role:",o),this.router.navigate(["/"]))}else console.error("Token is missing or invalid")},e=>{console.error("Login failed",e),this.loginError="Invalid email or password"})}static{this.\u0275fac=function(i){return new(i||n)($(xc),$(Ct))}}static{this.\u0275cmp=We({type:n,selectors:[["app-login"]],standalone:!0,features:[Ke],decls:36,vars:6,consts:[[1,"login-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"login-left"],[1,"top"],["src","logo.png","alt","logo"],[3,"ngSubmit","formGroup"],["id","google-signin-button"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["class","error-message",4,"ngIf"],["for","password"],[1,"input-container"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["type","submit",1,"btn","btn-signin"],["routerLink","/register",1,"button"],[1,"login-right"],[1,"login-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"error-message"],[4,"ngIf"]],template:function(i,r){if(i&1&&(g(0,"div",0)(1,"a",1),me(2,"img",2),_(),g(3,"div",3)(4,"div",4),me(5,"img",5),g(6,"h2"),C(7,"Hospital Management App"),_()(),g(8,"form",6),se("ngSubmit",function(){return r.onSubmit()}),me(9,"div",7),g(10,"option"),C(11,"\u23AF\u23AF\u23AF Or Login with your email \u23AF\u23AF\u23AF"),_(),g(12,"label",8),C(13,"Email"),_(),me(14,"input",9),Se(15,hee,3,2,"div",10),g(16,"label",11),C(17,"Password"),_(),g(18,"div",12),me(19,"input",13),g(20,"img",14),se("click",function(){return r.togglePasswordVisibility()}),_()(),Se(21,mee,2,1,"div",10)(22,gee,3,1,"div",10),g(23,"button",15),C(24,"Login"),_()(),g(25,"p"),C(26," Don't have an account? "),g(27,"a",16),C(28,"Sign Up Now"),_()()(),g(29,"div",17)(30,"div",18)(31,"h3"),C(32,"Why should I login?"),_(),g(33,"p"),C(34," By logging in, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),_(),me(35,"img",19),_()()()),i&2){let o,s;A(8),X("formGroup",r.loginForm),A(7),X("ngIf",((o=r.loginForm.get("email"))==null?null:o.invalid)&&(((o=r.loginForm.get("email"))==null?null:o.dirty)||((o=r.loginForm.get("email"))==null?null:o.touched))),A(4),X("type",r.passwordFieldType),A(),X("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(),X("ngIf",((s=r.loginForm.get("password"))==null?null:s.invalid)&&(((s=r.loginForm.get("password"))==null?null:s.dirty)||((s=r.loginForm.get("password"))==null?null:s.touched))),A(),X("ngIf",r.loginError)}},dependencies:[bt,Ht,Ri,ki,Ot,Nt,Bt,tn,ir,Er,kr,kt,zt,vt,Xt],styles:['@charset "UTF-8";.login-container[_ngcontent-%COMP%]{display:flex;height:100vh}.login-left[_ngcontent-%COMP%], .login-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.login-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.login-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.login-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.login-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.login-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.login-left[_ngcontent-%COMP%]   #google-signin-button[_ngcontent-%COMP%]{margin-top:1rem;background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.login-left[_ngcontent-%COMP%]   .btn-signin[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-right[_ngcontent-%COMP%]{background-image:url(https://online-learning-college.com/wp-content/uploads/2023/01/Qualifications-to-Become-a-Doctor--scaled.jpg);background-size:cover;background-position:center;color:#000}.login-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.login-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.login-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.login-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}']})}}return n})();var Au=class extends Error{};Au.prototype.name="InvalidTokenError";function _ee(n){return decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let i=e.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}function vee(n){let t=n.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return _ee(t)}catch{return atob(t)}}function Pa(n,t){if(typeof n!="string")throw new Au("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,i=n.split(".")[e];if(typeof i!="string")throw new Au(`Invalid token specified: missing part #${e+1}`);let r;try{r=vee(i)}catch(o){throw new Au(`Invalid token specified: invalid base64 for part #${e+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new Au(`Invalid token specified: invalid json for part #${e+1} (${o.message})`)}}var hL=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}register(e,i,r,o){let s={email:e,phoneNumber:i+r,password:o};return console.log("Registering user",s),this.http.post(`${this.apiUrl}/RegisterUserAsPatient`,s,{observe:"response",responseType:"text"}).pipe(yi(a=>{let l=a.body;l&&localStorage.setItem("authToken",l)}))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pL=(()=>{class n{constructor(e,i,r){this.registerService=e,this.router=i,this.route=r,this.passwordFieldType="password",this.confirmPasswordFieldType="password",this.isModalVisible=!1,this.registerForm=new vs({email:new Bn("",[qt.required,qt.email]),identifier:new Bn("",qt.required),phoneNumber:new Bn("",qt.required),password:new Bn("",qt.required),confirmPassword:new Bn("",qt.required),acceptPolicy:new Bn(!1,qt.requiredTrue)})}ngOnInit(){this.route.queryParams.subscribe(e=>{if(Object.keys(e).length>0&&(console.log("Query parameters:",e),e.token)){let i=Pa(e.token);i&&i.email&&this.registerForm.get("email")?.setValue(i.email)}})}togglePasswordVisibility(e){e==="password"?this.passwordFieldType=this.passwordFieldType==="password"?"text":"password":e==="confirm-password"&&(this.confirmPasswordFieldType=this.confirmPasswordFieldType==="password"?"text":"password")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}if(this.registerForm.value.password!==this.registerForm.value.confirmPassword){alert("Passwords do not match");return}this.registerService.register(this.registerForm.value.email,this.registerForm.value.identifier,this.registerForm.value.phoneNumber,this.registerForm.value.password).subscribe(e=>{console.log("Registration successful",e),this.router.navigate(["/login"])},e=>{console.error("Registration failed",e),alert("Registration failed - "+e.error)})}openPrivacyPolicy(e){e.preventDefault(),this.isModalVisible=!0,console.log("Modal opened:",this.isModalVisible)}closeModal(){this.isModalVisible=!1,console.log("Modal closed:",this.isModalVisible)}static{this.\u0275fac=function(i){return new(i||n)($(hL),$(Ct),$(nr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-register"]],standalone:!0,features:[Ke],decls:205,vars:8,consts:[[1,"register-container"],["routerLink","/",1,"btn","btn-home"],["src","home.png","alt","Home"],[1,"register-left"],[1,"top"],["src","logo.png","alt","Hospital Management App Logo"],[3,"ngSubmit","formGroup"],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","identifier"],[1,"identifier-container"],["type","text","id","identifier","formControlName","identifier","placeholder","+1","required","",1,"identifier-input"],["type","tel","id","phone","formControlName","phoneNumber","placeholder","123456789","required",""],[1,"input-container"],["for","password"],["id","password","formControlName","password","placeholder","******","required","",3,"type"],["alt","Show/Hide Password",1,"eye-icon",3,"click","src"],["for","confirm-password"],["id","confirm-password","formControlName","confirmPassword","placeholder","******","required","",3,"type"],["type","checkbox","id","acceptPolicy","formControlName","acceptPolicy","required",""],["for","acceptPolicy"],[1,"privacy-policy-link",3,"click"],["type","submit",1,"btn","btn-register",3,"disabled"],["routerLink","/login"],[1,"register-right"],[1,"register-info"],["src","healthcare-dashboard.png","alt","Dashboard example"],[1,"modal-container"],[1,"modal-content"],[1,"modal-title"],[1,"modal-date"],[1,"modal-section"],[1,"modal-subtitle"],[1,"modal-text"],[1,"modal-list"],[1,"modal-close-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"a",1),me(2,"img",2),_(),g(3,"div",3)(4,"div",4),me(5,"img",5),g(6,"h2"),C(7,"Hospital Management App"),_()(),g(8,"form",6),se("ngSubmit",function(){return r.onSubmit()}),g(9,"label",7),C(10,"Email"),_(),me(11,"input",8),g(12,"label",9),C(13,"Phone Number"),_(),g(14,"div",10),me(15,"input",11)(16,"input",12),_(),g(17,"div",13)(18,"label",14),C(19,"Password"),_(),me(20,"input",15),g(21,"img",16),se("click",function(){return r.togglePasswordVisibility("password")}),_()(),g(22,"div",13)(23,"label",17),C(24,"Confirm Password"),_(),me(25,"input",18),g(26,"img",16),se("click",function(){return r.togglePasswordVisibility("confirm-password")}),_()(),g(27,"div",13),me(28,"input",19),g(29,"label",20),C(30," I accept the "),g(31,"a",21),se("click",function(s){return r.openPrivacyPolicy(s)}),C(32,"Privacy Policy"),_()()(),g(33,"button",22),C(34,"Register"),_()(),g(35,"p"),C(36,"Already have an account? "),g(37,"a",23),C(38,"Login Now"),_()()(),g(39,"div",24)(40,"div",25)(41,"h3"),C(42,"Why should I register?"),_(),g(43,"p"),C(44," By registering, you can access your personal dashboard, where you can manage your account, view your profile, and much more. "),_(),me(45,"img",26),_()()(),g(46,"div",27)(47,"div",28)(48,"h1",29),C(49,"Privacy Policy"),_(),g(50,"p",30),C(51,"Last updated: 4 de Janeiro de 2025"),_(),g(52,"section",31)(53,"h2",32),C(54,"Introdu\xE7\xE3o"),_(),g(55,"p",33),C(56," A sua privacidade \xE9 essencial para o Hospital Management App. Esta pol\xEDtica, em conformidade com o Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD), descreve como recolhemos, utilizamos, partilhamos e protegemos os seus dados pessoais ao utilizar a nossa aplica\xE7\xE3o. O RGPD assegura a prote\xE7\xE3o dos seus dados enquanto um direito fundamental. "),_()(),g(57,"section",31)(58,"h2",32),C(59,"Que Dados Pessoais Recolhemos?"),_(),g(60,"ul",34)(61,"li"),C(62,"Dados de Identifica\xE7\xE3o: Nome, data de nascimento, n\xFAmero de identifica\xE7\xE3o e g\xE9nero."),_(),g(63,"li"),C(64,"Contactos: Morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia"),_(),g(65,"li"),C(66,"Dados de Sa\xFAde: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(67,"li"),C(68,"Informa\xE7\xE3o de Utiliza\xE7\xE3o: Como utiliza a aplica\xE7\xE3o, as suas prefer\xEAncias e defini\xE7\xF5es."),_()()(),g(69,"section",31)(70,"h2",32),C(71,"Finalidades do Tratamento dos Dados"),_(),g(72,"ul",34)(73,"li"),C(74,"Gerir as suas consultas e marca\xE7\xF5es."),_(),g(75,"li"),C(76,"Fornecer-lhe os cuidados de sa\xFAde adequados."),_(),g(77,"li"),C(78,"Melhorar a qualidade dos nossos servi\xE7os."),_(),g(79,"li"),C(80,"Comunicar consigo sobre as suas consultas."),_(),g(81,"li"),C(82,"Cumprir com as obriga\xE7\xF5es legais."),_(),g(83,"li"),C(84,"Arquivo de interesse p\xFAblico, investiga\xE7\xE3o cient\xEDfica ou hist\xF3rica, ou fins estat\xEDsticos, assegurando a prote\xE7\xE3o dos seus direitos."),_()()(),g(85,"section",31)(86,"h2",32),C(87,"Tempos de Reten\xE7\xE3o de Dados"),_(),g(88,"p",33),C(89,"Os tempos de reten\xE7\xE3o foram definidos considerando a finalidade do tratamento, a base legal, as obriga\xE7\xF5es legais e as boas pr\xE1ticas de seguran\xE7a:"),_(),g(90,"h3",32),C(91,"1. Dados de Contacto"),_(),g(92,"ul",34)(93,"li"),C(94,"Inclui: Nome, morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia."),_(),g(95,"li"),C(96,"Tempo de reten\xE7\xE3o: Durante o per\xEDodo em que o paciente for utilizador ativo da aplica\xE7\xE3o. Eliminados 6 meses ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(97,"li"),C(98,"Justificativa: Essenciais para a gest\xE3o de consultas e comunica\xE7\xE3o com o paciente, com reten\xE7\xE3o adicional de 6 meses para eventuais quest\xF5es legais ou administrativas."),_()(),g(99,"h3",32),C(100,"2. Dados de Sa\xFAde"),_(),g(101,"ul",34)(102,"li"),C(103,"Inclui: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(104,"li"),C(105,"Tempo de reten\xE7\xE3o: 20 anos ap\xF3s a \xFAltima consulta, conforme legisla\xE7\xE3o portuguesa para prontu\xE1rios m\xE9dicos."),_(),g(106,"li"),C(107,"Justificativa: Obriga\xE7\xE3o legal de reten\xE7\xE3o por 20 anos para assegurar o cumprimento da legisla\xE7\xE3o e permitir acesso a informa\xE7\xF5es m\xE9dicas em caso de necessidade."),_()(),g(108,"h3",32),C(109,"3. Informa\xE7\xE3o de Utiliza\xE7\xE3o"),_(),g(110,"ul",34)(111,"li"),C(112,"Inclui: Como utiliza a aplica\xE7\xE3o, prefer\xEAncias e defini\xE7\xF5es."),_(),g(113,"li"),C(114,"Tempo de reten\xE7\xE3o: 1 ano ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(115,"li"),C(116,"Justificativa: Necess\xE1ria para melhorar os servi\xE7os da aplica\xE7\xE3o, permitindo an\xE1lise de tend\xEAncias e implementa\xE7\xE3o de melhorias."),_()()(),g(117,"section",31)(118,"h2",32),C(119,"Procedimentos Ap\xF3s o Fim do Per\xEDodo de Reten\xE7\xE3o"),_(),g(120,"p",33),C(121,"Ap\xF3s o per\xEDodo de reten\xE7\xE3o definido:"),_(),g(122,"ul",34)(123,"li"),C(124,"Os dados ser\xE3o eliminados de forma segura e irrevers\xEDvel, garantindo que n\xE3o possam ser recuperados."),_(),g(125,"li"),C(126,"Dados necess\xE1rios para fins legais ou contratuais poder\xE3o ser anonimizados e retidos por tempo indeterminado, utilizados exclusivamente para investiga\xE7\xE3o e estat\xEDstica."),_()()(),g(127,"section",31)(128,"h2",32),C(129,"Com Quem Partilhamos os seus Dados?"),_(),g(130,"ul",34)(131,"li"),C(132,"Profissionais de Sa\xFAde: Para fornecer os cuidados de sa\xFAde necess\xE1rios, apenas na medida estritamente indispens\xE1vel."),_(),g(133,"li"),C(134,"Autoridades de Controlo: Quando exigido por lei, mediante pedido formal, justificado e ocasional."),_(),g(135,"li"),C(136,"Prestadores de Servi\xE7os: Empresas que auxiliam na opera\xE7\xE3o da aplica\xE7\xE3o, sob contrato que garante prote\xE7\xE3o de dados adequada."),_()()(),g(137,"section",31)(138,"h2",32),C(139,"Como Protegemos os seus Dados?"),_(),g(140,"ul",34)(141,"li"),C(142,"Encripta\xE7\xE3o: Todos os dados s\xE3o encriptados para impedir acessos n\xE3o autorizados."),_(),g(143,"li"),C(144,"Pseudonimiza\xE7\xE3o: Sempre que poss\xEDvel, protegemos a sua identidade atrav\xE9s de pseudonimiza\xE7\xE3o."),_(),g(145,"li"),C(146,"Controlo de Acesso: Apenas utilizadores autorizados, mediante autentica\xE7\xE3o segura, t\xEAm acesso aos seus dados."),_(),g(147,"li"),C(148,"Medidas T\xE9cnicas e Organizativas: Implementamos solu\xE7\xF5es adequadas ao risco, considerando o estado da arte tecnol\xF3gica."),_()()(),g(149,"section",31)(150,"h2",32),C(151,"Os seus Direitos"),_(),g(152,"p",33),C(153,"De acordo com o RGPD, tem os seguintes direitos:"),_(),g(154,"ul",34)(155,"li"),C(156,"Acesso aos seus dados: Solicitar uma c\xF3pia dos seus dados pessoais num formato leg\xEDvel."),_(),g(157,"li"),C(158,"Retifica\xE7\xE3o: Corrigir dados incorretos ou incompletos."),_(),g(159,"li"),C(160,'Apagamento ("direito a ser esquecido"): Solicitar a elimina\xE7\xE3o dos seus dados em condi\xE7\xF5es espec\xEDficas.'),_(),g(161,"li"),C(162,"Limita\xE7\xE3o do Tratamento: Restringir o uso dos seus dados em determinadas situa\xE7\xF5es."),_(),g(163,"li"),C(164,"Oposi\xE7\xE3o ao Tratamento: Recusar o tratamento baseado em interesses leg\xEDtimos ou marketing direto."),_(),g(165,"li"),C(166,"Portabilidade dos Dados: Receber os seus dados num formato estruturado para transferir para outro servi\xE7o."),_()(),g(167,"p",33),C(168,"Pode exercer os seus direitos atrav\xE9s de um pedido dirigido ao Hospital Management App, pelos seguintes meios:"),_(),g(169,"ul",34)(170,"li"),C(171,"Por correio postal para o endere\xE7o: R. Dr. Ant\xF3nio Bernardino de Almeida 431, 4249-015 Porto."),_(),g(172,"li"),C(173,"Por email para o endere\xE7o: privacy@hospital.management.app.com."),_(),g(174,"li"),C(175,"Atrav\xE9s da aplica\xE7\xE3o, utilizando as funcionalidades espec\xEDficas dispon\xEDveis para o efeito."),_()(),g(176,"p",33),C(177,"Ao exercer estes direitos, o utilizador deve especificar a natureza da sua solicita\xE7\xE3o e identificar-se devidamente. Ap\xF3s a confirma\xE7\xE3o da identidade do utilizador, para garantir que o pedido n\xE3o \xE9 realizado por terceiros n\xE3o autorizados, a solicita\xE7\xE3o ser\xE1 tratada em total conformidade com os requisitos e prazos legais aplic\xE1veis."),_()(),g(178,"section",31)(179,"h2",32),C(180,"Consentimento"),_(),g(181,"p",33),C(182,"Solicitamos o seu consentimento claro e direto para tratar dados, especialmente categorias sens\xEDveis, explicando claramente as finalidades. Pode retirar o seu consentimento a qualquer momento atrav\xE9s das funcionalidades da aplica\xE7\xE3o ou pelos contactos disponibilizados."),_()(),g(183,"section",31)(184,"h2",32),C(185,"Transfer\xEAncia de Dados Pessoais"),_(),g(186,"p",33),C(187,"Em nenhum caso, o Hospital Management App transferir\xE1 os dados pessoais fornecidos atrav\xE9s deste website a terceiros sem o consentimento pr\xE9vio do utilizador, exceto se tal for uma obriga\xE7\xE3o legal ou se for identificado um interesse leg\xEDtimo, desde que sejam garantidas as salvaguardas apropriadas."),_()(),g(188,"section",31)(189,"h2",32),C(190,"Autoridade de Supervis\xE3o"),_(),g(191,"p",33),C(192,"De acordo com a lei, o titular dos dados tem o direito de apresentar uma reclama\xE7\xE3o relativa \xE0 prote\xE7\xE3o de dados pessoais junto da autoridade de supervis\xE3o competente."),_()(),g(193,"section",31)(194,"h2",32),C(195,"Contactos"),_(),g(196,"p",33),C(197,"Se tiver d\xFAvidas sobre esta pol\xEDtica de privacidade, contacte o nosso Encarregado de Prote\xE7\xE3o de Dados atrav\xE9s do email: paulo@hospital.management.app.com."),_()(),g(198,"section",31)(199,"h2",32),C(200,"Atualiza\xE7\xF5es"),_(),g(201,"p",33),C(202,"Esta pol\xEDtica de privacidade pode ser alterada. Informaremos com pelo menos 30 dias de anteced\xEAncia sobre mudan\xE7as significativas, e a vers\xE3o atualizada estar\xE1 sempre dispon\xEDvel na nossa aplica\xE7\xE3o."),_()(),g(203,"button",35),se("click",function(){return r.closeModal()}),C(204,"Close"),_()()()),i&2&&(A(8),X("formGroup",r.registerForm),A(12),X("type",r.passwordFieldType),A(),X("src",r.passwordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(4),X("type",r.confirmPasswordFieldType),A(),X("src",r.confirmPasswordFieldType==="password"?"eye.png":"eye-slash.png",Kd),A(7),X("disabled",!r.registerForm.valid),A(13),So("active",r.isModalVisible))},dependencies:[bt,Ht,Ot,rm,Nt,Bt,tn,oS,ir,Er,kr,kt,zt,vt],styles:['.register-container[_ngcontent-%COMP%]{display:flex;height:100vh}.register-left[_ngcontent-%COMP%], .register-right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:2rem}.register-left[_ngcontent-%COMP%]{flex-direction:column;background-color:#f5f5f5;display:flex;align-items:center;justify-content:center;padding:1rem}.register-left[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;font-weight:700}.register-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;max-width:250px;display:flex;flex-direction:column}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:.5rem}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.4rem;margin-top:.4rem;border:1px solid #ccc;border-radius:10px}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input.ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.register-left[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{margin:.5rem 0;text-align:center;color:#a09f9f}.identifier-container[_ngcontent-%COMP%]{display:flex;gap:2px}.identifier-input[_ngcontent-%COMP%]{width:50px}.input-container[_ngcontent-%COMP%]{position:relative}.input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:30px}.input-container[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:100%;transform:translateY(-150%);cursor:pointer;width:20px;height:20px;filter:invert(.5)}.register-left[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem;margin-top:1rem;border-radius:30px;border:2px solid #4a90e2;cursor:pointer;display:flex;align-items:center;justify-content:center}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]{background-color:#fff;color:#4a90e2;margin-bottom:.5rem}.register-left[_ngcontent-%COMP%]   .btn-google[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;margin-right:.3rem}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]{background-color:#4a90e2;color:#fff}.register-left[_ngcontent-%COMP%]   .btn-register[_ngcontent-%COMP%]:hover{background-color:#0056b3}.register-right[_ngcontent-%COMP%]{background-image:url("https://www.verywellhealth.com/thmb/GXgk5oXpQWDe0N_-UHh3Aa_wCqk=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-519516073-962e173b7e2149d69c4f66915fd491f6.jpg");background-size:cover;background-position:center;color:#000}.register-info[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px}.register-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center}.register-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:justify}.register-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;border-radius:6px}.top[_ngcontent-%COMP%]{display:contents;align-items:center;justify-content:center;border-bottom:1px solid #ccc}.top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;padding-bottom:2rem}.top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333}.btn-home[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;background-color:#fff;border:3px solid #4a90e2;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background-color .3s;padding:0}.btn-home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.btn-home[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-home[_ngcontent-%COMP%]:focus{outline:none}.button[_ngcontent-%COMP%]{color:#4a90e2;text-decoration:none;cursor:pointer}footer[_ngcontent-%COMP%]{display:none!important}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:none;justify-content:center;align-items:center;z-index:1000}.modal-container.active[_ngcontent-%COMP%]{display:flex}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;width:1200px;max-width:90%;height:800px;overflow-y:auto;box-shadow:0 0 10px #0000001a}.modal-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem;text-align:center}.modal-date[_ngcontent-%COMP%]{font-size:.9rem;color:#666;text-align:center;margin-bottom:1rem}.modal-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modal-subtitle[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}.modal-text[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;text-align:justify}.modal-list[_ngcontent-%COMP%]{list-style-type:disc;padding-left:1.5rem;margin-bottom:1rem}.modal-close-btn[_ngcontent-%COMP%]{display:block;margin:0 auto;padding:.5rem 1rem;background-color:#4a90e2;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.modal-close-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.privacy-policy-link[_ngcontent-%COMP%]{color:#00f;text-decoration:underline}input[type=checkbox][_ngcontent-%COMP%]{display:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;padding-left:25px;cursor:pointer;font-size:14px;-webkit-user-select:none;user-select:none}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:16px;height:16px;border:2px solid #ccc;background-color:#fff;transition:background-color .3s,border-color .3s}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background-color:#4caf50;border-color:#4caf50}input[type=checkbox][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:50%;transform:translateY(-50%) rotate(45deg);width:5px;height:10px;border:solid white;border-width:0 2px 2px 0}']})}}return n})();var mL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=We({type:n,selectors:[["app-home"]],standalone:!0,features:[Ke],decls:91,vars:0,consts:[[1,"hero"],["src","hero.gif","alt","Hero Background",1,"hero-background"],[1,"logo"],["src","logo.png","alt","Hospital Logo"],[1,"buttons"],["routerLink","/login",1,"btn"],["routerLink","/register",1,"btn"],["src","arrow.png","alt","Hero Image","onclick","document.querySelector('.articles-container').scrollIntoView({ behavior: 'smooth' });",1,"hero-img"],[1,"articles-container"],[1,"articles"],["src","lifestyle.jpg","alt","Article 1 Image"],["routerLink","/"],["src","meds.jpg","alt","Article 2 Image"],["src","stress.jpg","alt","Article 3 Image"],[1,"footer"],[1,"container"],[1,"row"],[1,"footer-col"],["routerLink","/about-us"],["routerLink","/our-services"],["routerLink","/privacy-policy"],["routerLink","/faq"],["routerLink","/patient-portal"],["routerLink","/doctor-directory"],["routerLink","/health-library"],["routerLink","/emergency-services"],[1,"social"],["href","mailto:support@hospital.com"],["href","tel:+1234567890"]],template:function(i,r){i&1&&(g(0,"body")(1,"div",0),me(2,"img",1),g(3,"div",2),me(4,"img",3),g(5,"p"),C(6,"Hospital Management App"),_()(),g(7,"div",4)(8,"a",5),C(9,"Login"),_(),g(10,"a",6),C(11,"Register"),_()(),me(12,"img",7),_(),g(13,"div",8)(14,"h1"),C(15,"Health & Wellness Articles"),_(),g(16,"section",9)(17,"article"),me(18,"img",10),g(19,"h2"),C(20,"5 Tips for a Healthy Lifestyle"),_(),g(21,"p"),C(22,"Discover essential tips to maintain a healthy lifestyle, including diet, exercise, and mental well-being."),_(),g(23,"a",11),C(24,"Read more"),_()(),g(25,"article"),me(26,"img",12),g(27,"h2"),C(28,"Understanding Common Medications"),_(),g(29,"p"),C(30,"Learn about the most commonly prescribed medications, their uses, and potential side effects."),_(),g(31,"a",11),C(32,"Read more"),_()(),g(33,"article"),me(34,"img",13),g(35,"h2"),C(36,"How to Manage Stress Effectively"),_(),g(37,"p"),C(38,"Explore various techniques and strategies to manage stress and improve your overall well-being."),_(),g(39,"a",11),C(40,"Read more"),_()()()()(),g(41,"footer",14)(42,"div",15)(43,"div",16)(44,"div",17)(45,"h4"),C(46,"company"),_(),g(47,"ul")(48,"li")(49,"a",18),C(50,"About Us"),_()(),g(51,"li")(52,"a",19),C(53,"Our Services"),_()(),g(54,"li")(55,"a",20),C(56,"Privacy Policy"),_()()()(),g(57,"div",17)(58,"h4"),C(59,"get help"),_(),g(60,"ul")(61,"li")(62,"a",21),C(63,"FAQ"),_()()()(),g(64,"div",17)(65,"h4"),C(66,"resources"),_(),g(67,"ul")(68,"li")(69,"a",22),C(70,"Patient Portal"),_()(),g(71,"li")(72,"a",23),C(73,"Doctor Directory"),_()(),g(74,"li")(75,"a",24),C(76,"Health Library"),_()(),g(77,"li")(78,"a",25),C(79,"Emergency Services"),_()()()(),g(80,"div",17)(81,"h4"),C(82,"contact us"),_(),g(83,"div",26)(84,"ul")(85,"li")(86,"a",27),C(87,"support@hospital.com"),_()(),g(88,"li")(89,"a",28),C(90,"+351 912345678"),_()()()()()()()())},dependencies:[kt,zt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;box-sizing:border-box;height:100%}.hero[_ngcontent-%COMP%]{position:relative;text-align:center;padding:50px 20px;color:#fff;opacity:.9;height:100vh}.hero[_ngcontent-%COMP%]   .hero-background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;display:flex;align-items:center;max-width:500px;max-height:60px;margin:10px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;margin-right:20px}.hero[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5em;font-family:Poppins,sans-serif;padding:0;margin:0;max-width:440px}.buttons[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;max-width:500px;margin:10px;display:flex;align-items:center;justify-content:center}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:10px 20px;margin:0 10px;border:2px solid #ffffff;transition:all .3s;border-radius:0;width:95px;font-family:Poppins,sans-serif;font-size:.8em}.buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff;color:#333;border-radius:0}.hero-img[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;transform:translate(-50%);margin-bottom:1.5rem;height:40px;cursor:pointer;animation:_ngcontent-%COMP%_piscar 3s infinite}h1[_ngcontent-%COMP%]{margin:0;font-size:2.5em;font-family:Poppins,sans-serif}p[_ngcontent-%COMP%]{font-size:1.2em;font-family:Poppins,sans-serif}@keyframes _ngcontent-%COMP%_piscar{0%,to{opacity:1}50%{opacity:0}}.articles-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex-wrap:wrap;padding:20px;height:100vh}.articles-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:2em;font-family:Poppins,sans-serif;margin-bottom:2rem;color:#fff}.articles[_ngcontent-%COMP%]{width:50vw;height:fit-content;display:grid;grid-template-columns:repeat(3,minmax(200px,1fr));gap:30px;padding:10px;place-items:center}article[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin:2vh 1vw;padding:2vh 1vw;width:100%;height:100%;transition:transform .3s;display:flex;flex-direction:column;justify-content:space-between;overflow:hidden}article[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:120px;object-fit:cover;border-radius:5px;flex-shrink:0;margin-bottom:5px}article[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}article[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1em;color:#333;margin:5px 0;flex-shrink:0;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#666;flex-grow:1;margin:5px 0;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;font-family:Poppins,sans-serif}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:5px;color:#007bff;text-decoration:none;flex-shrink:0}article[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#go-to-article[_ngcontent-%COMP%]{position:absolute;top:10px;scroll-margin-top:60px}.container[_ngcontent-%COMP%]{max-width:1170px;margin:auto}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer[_ngcontent-%COMP%]{background-color:#153e4c;padding:70px 0}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]{width:25%;padding:0 15px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;color:#fff;text-transform:capitalize;margin-bottom:35px;font-weight:500;position:relative}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;bottom:-10px;background-color:#e91e63;height:2px;box-sizing:border-box;width:50px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){margin-bottom:10px}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px;color:#bbb;text-decoration:none;font-weight:300;display:block;transition:all .3s ease}.footer[_ngcontent-%COMP%]   .footer-col[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;padding-left:8px}@media (max-width: 767px){.footer-col[_ngcontent-%COMP%]{width:50%;margin-bottom:30px}}@media (max-width: 574px){.footer-col[_ngcontent-%COMP%]{width:100%}}']})}}return n})();var gL=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=We({type:n,selectors:[["app-not-found"]],standalone:!0,features:[Ke],decls:7,vars:0,consts:[[1,"container"],[1,"screen"],["src","404-image.png","alt","Page not found image"],[1,"center"],["routerLink","/",1,"button"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1),me(2,"img",2),g(3,"div",3)(4,"a",4)(5,"span"),C(6," Go to Home Page "),_()()()()())},dependencies:[kt,zt],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.screen[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#123646;box-shadow:0 4px 8px #0000001a;border-radius:8px;height:fit-content;width:50%}img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}p[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:1em}a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff;font-weight:700}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.image-container[_ngcontent-%COMP%]{margin-top:20px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px}a.button[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;position:relative;height:50px;padding:0 30px;border:3px solid #ffffff;background:#37b0b4;-webkit-user-select:none;user-select:none;white-space:nowrap;transition:all .05s linear;font-family:inherit;text-decoration:none;color:inherit}a.button[_ngcontent-%COMP%]:before, a.button[_ngcontent-%COMP%]:after{content:"";position:absolute;background:#37b0b4;transition:all .2s linear}a.button[_ngcontent-%COMP%]:before{width:calc(100% + 6px);height:calc(100% - 16px);top:8px;left:-3px}a.button[_ngcontent-%COMP%]:after{width:calc(100% - 16px);height:calc(100% + 6px);top:-3px;left:8px}a.button[_ngcontent-%COMP%]:hover{cursor:crosshair}a.button[_ngcontent-%COMP%]:active{transform:scale(.95)}a.button[_ngcontent-%COMP%]:hover:before{height:calc(100% - 32px);top:16px}a.button[_ngcontent-%COMP%]:hover:after{width:calc(100% - 32px);left:16px}a.button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;z-index:3;position:relative;font-weight:600;display:flex;justify-content:center;align-items:center}']})}}return n})();var Rn=(()=>{class n{constructor(){this.panelIdSource=new Pi("default-panel"),this.panelId$=this.panelIdSource.asObservable()}setPanelId(e){this.panelIdSource.next(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ta=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user",this.settingsIdSource=new Pi("default-settings"),this.settingsId$=this.settingsIdSource.asObservable()}setSettingsId(e){this.settingsIdSource.next(e)}deleteAccount(e){return this.http.post(`${this.apiUrl}/RequestDelete`,JSON.stringify(e),{headers:{"Content-Type":"application/json"},observe:"response"})}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bc=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api",this.profileIdSource=new Pi("default-profile"),this.profileId$=this.profileIdSource.asObservable()}setProfileId(e){this.profileIdSource.next(e)}getCode(e){let i={email:e};return this.http.get(`${this.apiUrl}/User/GetCode`,{params:i})}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sS=n=>["/",n],xee=()=>["/privacy-policy"],Lt=(()=>{class n{constructor(e,i,r){this.panelService=e,this.settingsService=i,this.profileService=r,this.panelId="",this.settingsId="",this.profileId="",this.name="",this.role="",this.privacyId=""}ngOnInit(){this.panelService.panelId$.subscribe(i=>{this.panelId=i}),this.settingsService.settingsId$.subscribe(i=>{this.settingsId=i}),this.profileService.profileId$.subscribe(i=>{this.profileId=i});let e=localStorage.getItem("token");if(e){console.log("Token:",e);let i=Pa(e);console.log("Decoded Token:",i),this.name=i["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],this.role=i["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],console.log("Name:",this.name),console.log("Role:",this.role)}}logout(){localStorage.removeItem("token")}static{this.\u0275fac=function(i){return new(i||n)($(Rn),$(Ta),$(bc))}}static{this.\u0275cmp=We({type:n,selectors:[["app-sidebar"]],standalone:!0,features:[Ke],decls:50,vars:13,consts:[[1,"sidebar"],[1,"sidebar-header"],["src","logo.png","alt","logo"],[1,"sidebar-links"],[1,"menu-separator"],[3,"routerLink"],["src","dashboard.png","alt","icon"],["routerLink","/notifications"],["src","notifications.png","alt","icon"],["src","profile.png","alt","icon"],["src","settings.png","alt","icon"],["src","insurance.png","alt","icon",1,"colored-icon"],["routerLink","/",3,"click"],["src","logout.png","alt","icon"],[1,"user-account"],[1,"user-profile"],["src","user.png","alt","Profile Image"],[1,"user-detail"]],template:function(i,r){i&1&&(g(0,"aside",0)(1,"div",1),me(2,"img",2),g(3,"h2"),C(4,"Hospital Management App"),_()(),g(5,"ul",3)(6,"h4")(7,"span"),C(8,"Main Menu"),_(),me(9,"div",4),_(),g(10,"li")(11,"a",5),me(12,"img",6),C(13,"User Panel"),_()(),g(14,"h4")(15,"span"),C(16,"General"),_(),me(17,"div",4),_(),g(18,"li")(19,"a",7),me(20,"img",8),C(21,"Notifications"),_()(),g(22,"h4")(23,"span"),C(24,"Account"),_(),me(25,"div",4),_(),g(26,"li")(27,"a",5),me(28,"img",9),C(29,"Profile"),_()(),g(30,"li")(31,"a",5),me(32,"img",10),C(33,"Settings"),_()(),g(34,"li")(35,"a",5),me(36,"img",11),C(37,"Privacy Policy "),_()(),g(38,"li")(39,"a",12),se("click",function(){return r.logout()}),me(40,"img",13),C(41,"Logout"),_()()(),g(42,"div",14)(43,"div",15),me(44,"img",16),g(45,"div",17)(46,"h3"),C(47),_(),g(48,"span"),C(49),_()()()()()),i&2&&(A(11),X("routerLink",ri(6,sS,r.panelId)),A(16),X("routerLink",ri(8,sS,r.profileId)),A(4),X("routerLink",ri(10,sS,r.settingsId)),A(4),X("routerLink",ji(12,xee)),A(12),Je(r.name),A(2),Je(r.role))},dependencies:[kt,zt],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100%;width:85px;display:flex;overflow-x:hidden;flex-direction:column;background:#0b0d16;padding:25px 20px;transition:all .4s ease;z-index:1000}.sidebar[_ngcontent-%COMP%]:hover{width:400px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;font-weight:600;white-space:nowrap;margin-left:23px}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-weight:500;white-space:nowrap;margin:10px 0;position:relative}.sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:0}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover}.sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;width:100%;height:1px;transform:scaleX(1);transform:translateY(-50%);background:#4f52ba;transform-origin:right;transition-delay:.2s}.sidebar[_ngcontent-%COMP%]:hover   .sidebar-links[_ngcontent-%COMP%]   .menu-separator[_ngcontent-%COMP%]{transition-delay:0s;transform:scaleX(0)}.sidebar-links[_ngcontent-%COMP%]{list-style:none;margin-top:20px;height:80%;overflow-y:auto;scrollbar-width:none}.sidebar-links[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0 20px;color:#fff;font-weight:500;white-space:nowrap;padding:15px 10px;text-decoration:none;transition:.2s ease}.sidebar-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#161a2d;background:#fff;border-radius:4px}.user-account[_ngcontent-%COMP%]{margin-top:auto;padding:12px 10px;margin-left:-10px}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;color:#161a2d}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px}.user-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.user-profile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.775rem;font-weight:600}.user-detail[_ngcontent-%COMP%]{margin-left:23px;white-space:nowrap}.sidebar[_ngcontent-%COMP%]:hover   .user-account[_ngcontent-%COMP%]{background:#fff;border-radius:4px}.colored-icon[_ngcontent-%COMP%]{width:20px;height:20px;object-fit:cover;filter:invert(50%) sepia(100%) saturate(500%) hue-rotate(200deg)}"]})}}return n})();var ys=(()=>{class n{deleteOperationType(e){throw new Error("Method not implemented.")}constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}getSpecializations(){return this.http.get(`${this.apiUrl}/Specialization`)}createOperationType(e){return this.http.post(`${this.apiUrl}/OperationType`,e)}getStaffs(e){return this.http.get(`${this.apiUrl}/Specialization/staff/${encodeURIComponent(e)}`).pipe(nn(i=>(console.error("Error fetching staff:",i),En(()=>new Error("Failed to fetch staff members")))))}editOperationType(e,i){return this.http.put(`${this.apiUrl}/OperationType/${e}`,i)}getOperationTypeByName(e){return this.http.get(`${this.apiUrl}/OperationType/name/${e}`)}deactivateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/deactivate/${e}`,{},{responseType:"text"}).pipe(nn(i=>(console.error("Deactivation failed:",i),En(()=>i))))}activateOperationTypeByName(e){return this.http.put(`${this.apiUrl}/OperationType/activate/${e}`,{},{responseType:"text"}).pipe(nn(i=>(console.error("Activation failed:",i),En(()=>i))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bee=()=>["/create-operation-type"],Cee=()=>["/panel-admin"],Mee=n=>({deactivated:n}),wee=n=>["/update-operation-type",n];function Eee(n,t){if(n&1&&(g(0,"td"),C(1),_()),n&2){let e=ae(2).$implicit;Zi("rowspan",e.specializations.length),A(),_t(" ",e.name," ")}}function See(n,t){if(n&1&&(g(0,"td"),C(1),_()),n&2){let e=ae(2).$implicit;Zi("rowspan",e.specializations.length),A(),_t(" ",e.estimatedDuration," ")}}function Pee(n,t){if(n&1&&(g(0,"div"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" \u{1F464} ",e.fullName," ")}}function Tee(n,t){if(n&1&&(g(0,"div",10),Se(1,Pee,2,1,"div",4),_()),n&2){let e=ae().$implicit,i=ae(2);A(),X("ngForOf",i.staffs[e.specOption])}}function Dee(n,t){if(n&1){let e=rt();g(0,"a",14),se("click",function(){De(e);let r=ae(3).$implicit,o=ae();return Oe(o.deactivateOperationType(r.name))}),C(1,"Deactivate"),_()}}function Oee(n,t){if(n&1){let e=rt();g(0,"a",15),se("click",function(){De(e);let r=ae(3).$implicit,o=ae();return Oe(o.activateOperationType(r.name))}),C(1,"Activate"),_()}}function Aee(n,t){if(n&1&&(g(0,"td")(1,"a",11),C(2,"Edit"),_(),Se(3,Dee,2,0,"a",12)(4,Oee,2,0,"a",13),_()),n&2){let e=ae(2).$implicit;Zi("rowspan",e.specializations.length),A(),X("routerLink",ri(4,wee,e.name)),A(2),X("ngIf",!e.isDeactivated),A(),X("ngIf",e.isDeactivated)}}function Iee(n,t){if(n&1){let e=rt();bu(0),g(1,"tr",6),Se(2,Eee,2,2,"td",7)(3,See,2,2,"td",7),g(4,"td"),C(5),_(),g(6,"td")(7,"button",8),se("click",function(){let r=De(e).$implicit,o=ae().$implicit,s=ae();return Oe(s.loadStaffForSpecialization(o.name,r.specOption))}),C(8," Show Staff "),_(),Se(9,Tee,2,1,"div",9),_(),Se(10,Aee,5,6,"td",7),_(),Cu()}if(n&2){let e=t.$implicit,i=t.index,r=ae().$implicit,o=ae();A(),X("ngClass",ri(6,Mee,r.isDeactivated)),A(),X("ngIf",i===0),A(),X("ngIf",i===0),A(2),Je(e.specOption),A(4),X("ngIf",o.isStaffVisible(r.name,e.specOption)),A(),X("ngIf",i===0)}}function Ree(n,t){if(n&1&&(bu(0),Se(1,Iee,11,8,"ng-container",4),Cu()),n&2){let e=t.$implicit;A(),X("ngForOf",e.specializations)}}var _L=(()=>{class n{constructor(e,i){this.operationTypeService=e,this.panelService=i,this.operationTypes=[],this.staffs={},this.visibleStaffs={}}ngOnInit(){this.fetchOperationTypes(),this.panelService.setPanelId("panel-admin")}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.operationTypes=e,console.log("Operation types fetched:",e)},e=>{console.error("Error fetching operation types",e)})}loadStaffForSpecialization(e,i){this.staffs[i]?this.toggleStaffVisibility(e,i):this.operationTypeService.getStaffs(i).subscribe({next:r=>{Array.isArray(r)&&(this.staffs[i]=r.map(o=>Yt(je({},o),{fullName:o.fullName||`${o.firstName} ${o.lastName}`}))),this.toggleStaffVisibility(e,i)},error:r=>{console.error("Error fetching staff:",r),this.staffs[i]=[]}})}toggleStaffVisibility(e,i){this.visibleStaffs[e]||(this.visibleStaffs[e]={}),this.visibleStaffs[e][i]=!this.visibleStaffs[e][i]}isStaffVisible(e,i){return this.visibleStaffs[e]&&this.visibleStaffs[e][i]}onEdit(e){console.log("Editing operation type:",e),this.operationTypeService.editOperationType(e.name,e).subscribe(()=>{alert("Operation type updated successfully"),this.fetchOperationTypes()},i=>{console.error("Error updating operation type",i),alert("Error updating operation type")})}deactivateOperationType(e){window.confirm(`Are you sure you want to deactivate the operation type: ${e}?`)&&this.operationTypeService.deactivateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!0,alert("Operation type deactivated successfully"))},r=>{console.error("Error deactivating operation type:",r)})}activateOperationType(e){window.confirm(`Are you sure you want to activate the operation type: ${e}?`)&&this.operationTypeService.activateOperationTypeByName(e).subscribe(()=>{let r=this.operationTypes.find(o=>o.name===e);r&&(r.isDeactivated=!1,alert("Operation type activated successfully"))},r=>{console.error("Error activating operation type:",r)})}static{this.\u0275fac=function(i){return new(i||n)($(ys),$(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-operation-types"]],standalone:!0,features:[Ke],decls:24,vars:5,consts:[[1,"operationType-container"],[1,"operation-title"],[1,"btn","btn-create",3,"routerLink"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-back",3,"routerLink"],[3,"ngClass"],[4,"ngIf"],[1,"btn","btn-info",3,"click"],["class","staff-members",4,"ngIf"],[1,"staff-members"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)","class","btn btn-delete",3,"click",4,"ngIf"],["href","javascript:void(0)","class","btn btn-activate",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-activate",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h2",1),C(3,"Operation Types"),_(),g(4,"div")(5,"a",2),C(6,"Create Operation Type"),_(),g(7,"table",3)(8,"thead")(9,"tr")(10,"th"),C(11,"Operation Type"),_(),g(12,"th"),C(13,"Estimated Time"),_(),g(14,"th"),C(15,"Specialization"),_(),g(16,"th"),C(17,"Staff Members"),_(),g(18,"th"),C(19,"Actions"),_()()(),g(20,"tbody"),Se(21,Ree,2,1,"ng-container",4),_()(),g(22,"a",5),C(23,"Back to Dashboard"),_()()()),i&2&&(A(5),X("routerLink",ji(3,bee)),A(16),X("ngForOf",r.operationTypes),A(),X("routerLink",ji(4,Cee)))},dependencies:[vt,Po,gn,Xt,kt,zt,Lt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{margin:0 auto;padding:20px;max-width:1400px;font-family:Arial,sans-serif;background-color:#f8f8f8;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;flex-direction:column;align-items:center}.operation-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:2rem;color:#333}.btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px;border-radius:4px;cursor:pointer;text-decoration:none;border:none;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;box-shadow:0 2px 4px #0000001a}.btn-back[_ngcontent-%COMP%]{background-color:#ff6f61;color:#fff;margin-top:20px}.btn-create[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;margin-bottom:20px}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0003}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 24px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:600;color:#333}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px;color:#555}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}.btn-update[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%]{display:inline-block;margin-right:10px;padding:6px 12px;font-size:14px;text-decoration:none;border-radius:4px}.btn-update[_ngcontent-%COMP%]{background-color:orange;color:#fff}.btn-update[_ngcontent-%COMP%]:hover{background-color:#ff8c00}.btn-delete[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#e53935}.btn-activate[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-activate[_ngcontent-%COMP%]:hover{background-color:#45a049}.router-outlet[_ngcontent-%COMP%]{margin-top:40px}@media (max-width: 768px){.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:8px}.btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 12px}.operation-title[_ngcontent-%COMP%]{font-size:1.5rem}}.staff-members[_ngcontent-%COMP%]{margin-top:10px;background-color:#f9f9f9;border-radius:6px;padding:10px;box-shadow:0 2px 4px #0000001a}.staff-members[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px;color:#555}.deactivated[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.deactivated[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:line-through}']})}}return n})();var kee=()=>["/operation-types"];function Nee(n,t){if(n&1){let e=rt();g(0,"div",17)(1,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.onSpecializationChange(o,r))}),_(),g(2,"label",19),C(3),_()()}if(n&2){let e=t.$implicit,i=ae();A(),Mu("id","specialization-",e.id,""),X("checked",i.operationType.specializations.includes(e.specOption)),A(),Mu("for","specialization-",e.id,""),A(),Je(e.specOption)}}function Fee(n,t){n&1&&(g(0,"div",20)(1,"p",21),C(2,"You must add at least one specialization to the operation type."),_()())}var vL=(()=>{class n{constructor(e,i){this.router=e,this.operationTypeService=i,this.operationType={name:"",estimatedDuration:"",specializations:[]},this.availableSpecializations=[],i.getSpecializations().subscribe(r=>{this.availableSpecializations=r},r=>{console.error("Error fetching specializations",r)})}onSpecializationChange(e,i){if(i.target.checked)this.operationType.specializations.push(e.specOption);else{let r=this.operationType.specializations.indexOf(e.specOption);r!==-1&&this.operationType.specializations.splice(r,1)}}onSubmit(){this.operationTypeService.createOperationType(this.operationType).subscribe(()=>{alert("Operation type created successfully"),this.operationType={name:"",estimatedDuration:"",specializations:[]},this.router.navigate(["/operation-types"])},e=>{console.error("Error creating operation type",e),alert("Error creating operation type")})}static{this.\u0275fac=function(i){return new(i||n)($(Ct),$(ys))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-operation-type"]],standalone:!0,features:[Ke],decls:26,vars:7,consts:[["operationForm","ngForm"],[1,"operationType-container"],[1,"operation-title"],[1,"form-and-table-container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","estimatedTime"],["type","text","id","estimatedTime","name","estimatedTime","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","specializations"],[1,"checkboxes-container"],["class","checkbox-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"checkbox-group"],["type","checkbox",3,"change","id","checked"],[3,"for"],[1,"error-message"],[1,"text-danger"]],template:function(i,r){if(i&1){let o=rt();g(0,"div",1),me(1,"app-sidebar"),g(2,"h2",2),C(3,"Create Operation Type"),_(),g(4,"div",3)(5,"div",4)(6,"form",5,0),se("ngSubmit",function(){return De(o),Oe(r.onSubmit())}),g(8,"div",6)(9,"label",7),C(10,"Name"),_(),g(11,"input",8),Xe("ngModelChange",function(a){return De(o),Ze(r.operationType.name,a)||(r.operationType.name=a),Oe(a)}),_()(),g(12,"div",6)(13,"label",9),C(14,"Estimated Time"),_(),g(15,"input",10),Xe("ngModelChange",function(a){return De(o),Ze(r.operationType.estimatedDuration,a)||(r.operationType.estimatedDuration=a),Oe(a)}),_()(),g(16,"div",6)(17,"label",11),C(18,"Available Specializations"),_(),g(19,"div",12),Se(20,Nee,4,6,"div",13),_(),Se(21,Fee,3,0,"div",14),_(),g(22,"button",15),C(23,"Create"),_(),g(24,"a",16),C(25,"Back"),_()()()()()}if(i&2){let o=Ii(7);A(11),Ye("ngModel",r.operationType.name),A(4),Ye("ngModel",r.operationType.estimatedDuration),A(5),X("ngForOf",r.availableSpecializations),A(),X("ngIf",r.operationType.specializations.length===0),A(),X("disabled",!o.valid||r.operationType.specializations.length===0),A(2),X("routerLink",ji(6,kee))}},dependencies:[vt,gn,Xt,bt,Ht,Ot,Nt,Bt,tn,hn,Nn,kt,zt,Lt],styles:['@charset "UTF-8";.operationType-container[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px auto;padding:30px;background-color:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;font-family:Arial,sans-serif}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:25px;color:#333}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;font-size:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#444;margin-bottom:8px}.form-control[_ngcontent-%COMP%]{padding:12px;font-size:16px;border:1px solid #ddd;border-radius:8px;box-sizing:border-box;transition:all .3s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.form-control[_ngcontent-%COMP%]:required{border-color:#ff4d4d;background-color:#fff6f6}.form-control[_ngcontent-%COMP%]:required:focus{border-color:#ff1a1a}.form-control[_ngcontent-%COMP%]:valid{border-color:#28a745;background-color:#e6ffe6}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border-color:#ff4d4d}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid + label[_ngcontent-%COMP%]:after{content:"*";color:#ff4d4d;font-size:18px;margin-left:5px}.btn[_ngcontent-%COMP%]{padding:12px 25px;font-size:16px;text-align:center;text-decoration:none;cursor:pointer;border-radius:8px;border:none;transition:background-color .3s ease}.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.btn-back[_ngcontent-%COMP%]{background-color:#a5342c;color:#fff}.btn-back[_ngcontent-%COMP%]:hover{background-color:#5a6268}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}@media (max-width: 600px){.operationType-container[_ngcontent-%COMP%]{padding:20px}.operation-title[_ngcontent-%COMP%]{font-size:24px}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.btn[_ngcontent-%COMP%]{width:100%}}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px;cursor:pointer;transform:scale(1.3);transition:transform .3s ease-in-out;margin-left:10px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:16px;color:#444;margin-left:5px;cursor:pointer}.form-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{transform:scale(1.4)}.error-message[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#ff4d4d}']})}}return n})();var rr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/staff",this.apiURLSpecializaction="https://localhost:5001/api/specialization",this.apiURLUser="https://localhost:5001/api/user"}createStaff(e){return this.http.post(`${this.apiUrl}`,e,{observe:"response",responseType:"text"})}getSpecialization(){return this.http.get(`${this.apiURLSpecializaction}`)}getStaffTypes(){return this.http.get(`${this.apiUrl}/staff-types`)}searchStaffProfiles(e){return this.http.get(`${this.apiUrl}/search`,{params:e})}deactivateStaff(e){return this.http.put(`${this.apiUrl}/deactivate/${e}`,{})}updateStaff(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}getStaffById(e){return this.http.get(`${this.apiUrl}/${e}`)}getAllStaffs(){return this.http.get(`${this.apiUrl}`)}confirmUpdates(e){let i=new ms;return e.phoneNumber&&(i=i.append("phoneNumber",e.phoneNumber)),e.email&&(i=i.append("email",e.email)),i=i.append("token",e.token),this.http.put(`${this.apiUrl}/ConfirmUpdates`,{},{params:i})}activateStaff(e){let i=`${this.apiURLUser}/RegisterUser`;return this.http.post(i,e)}activateUser(e,i){let r={token:e,newPassword:i};return this.http.post(`${this.apiURLUser}/Activate`,null,{params:r})}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lee(n,t){if(n&1&&(g(0,"option",28),C(1),_()),n&2){let e=t.$implicit;X("value",e),A(),Je(e)}}function Uee(n,t){if(n&1&&(g(0,"option",28),C(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),_t(" ",e.specOption," ")}}function Vee(n,t){if(n&1&&(g(0,"div",29),C(1),_()),n&2){let e=ae();A(),_t(" ",e.errorMessage," ")}}var yL=(()=>{class n{constructor(e,i){this.service=e,this.router=i,this.createStaffForm=new vs({firstName:new Bn("",[qt.required]),lastName:new Bn("",[qt.required]),fullName:new Bn("",[qt.required]),email:new Bn("",[qt.required,qt.email]),identifier:new Bn("",[qt.required]),phoneNumber:new Bn("",[qt.required]),staffType:new Bn("",[qt.required]),specializationName:new Bn("",[qt.required])}),this.newStaff={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",staffType:"",specializationName:""},this.staffTypes=[],this.specializations=[],this.errorMessage="",this.NumberPhone=""}ngOnInit(){this.loadSpecializations(),this.loadStaffTypes()}loadSpecializations(){this.service.getSpecialization().subscribe({next:e=>{console.log(`Data specilazation:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffTypes(){this.service.getStaffTypes().subscribe({next:e=>{console.log(`Data staff types:
`,e),this.staffTypes=e},error:e=>{console.error("Error loading staff types",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff types ")}})}onSubmit(){if(this.createStaffForm.invalid){this.errorMessage="",this.createStaffForm.markAllAsTouched();return}this.newStaff={firstName:this.createStaffForm.value.firstName.trim(),lastName:this.createStaffForm.value.lastName.trim(),fullName:this.createStaffForm.value.fullName.trim(),email:this.createStaffForm.value.email.trim(),phoneNumber:this.createStaffForm.value.identifier.trim()+this.createStaffForm.value.phoneNumber.trim(),staffType:this.createStaffForm.value.staffType.trim(),specializationName:this.createStaffForm.value.specializationName.trim()},this.createStaffForm.valid&&this.service.createStaff(this.newStaff).subscribe({next:e=>{console.log("Staff created successfully",e),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:e=>{if(console.error("Error creating staff",e),e.status===400){let i=JSON.parse(e.error);this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Creating failed - "+e.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(rr),$(Ct))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-staff"]],standalone:!0,features:[Ke],decls:46,vars:4,consts:[[1,"create-staff-container"],[1,"create-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","First Name","required",""],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Last Name","required",""],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Full Name","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],[1,"form-group"],["for","staffType"],["id","staffType","formControlName","staffType","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["for","specializationName"],["id","specializationName","formControlName","specializationName","required",""],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(me(0,"app-sidebar"),g(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),C(5,"Go Back"),_(),g(6,"h2"),C(7,"Create Staff"),_()(),g(8,"form",4),se("ngSubmit",function(){return r.onSubmit()}),g(9,"label",5),C(10,"First Name"),_(),me(11,"input",6),g(12,"label",7),C(13,"Last Name"),_(),me(14,"input",8),g(15,"label",9),C(16,"Full Name"),_(),me(17,"input",10),g(18,"label",11),C(19,"Email"),_(),me(20,"input",12),g(21,"label",13),C(22,"Phone Number"),_(),g(23,"div",14)(24,"div",15),me(25,"input",16),_(),g(26,"div",17),me(27,"input",18),_()(),g(28,"div",14)(29,"div",19)(30,"label",20),C(31,"Staff Type"),_(),g(32,"select",21)(33,"option",22),C(34,"Select Staff Type"),_(),Se(35,Lee,2,2,"option",23),_()(),g(36,"div",19)(37,"label",24),C(38,"Specialization Name"),_(),g(39,"select",25)(40,"option",22),C(41,"Select Specialization"),_(),Se(42,Uee,2,2,"option",23),_()()(),Se(43,Vee,2,1,"div",26),g(44,"button",27),C(45,"Create Staff"),_()()()()),i&2&&(A(8),X("formGroup",r.createStaffForm),A(27),X("ngForOf",r.staffTypes),A(7),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,tn,vt,gn,Xt,Lt,ir,Er,kr,kt,zt],styles:[".create-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.create-staff-container[_ngcontent-%COMP%]   .create-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem 2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;margin-bottom:1.5rem}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.create-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;color:#333;margin:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;color:#fff;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.create-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var xL=(()=>{class n{constructor(e,i,r,o){this.router=e,this.panelService=i,this.settingsService=r,this.profileService=o}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile")}onSubmit(){let e=localStorage.getItem("token");e?this.settingsService.deleteAccount(e).subscribe(i=>{console.log("Request Finished With Success",i),localStorage.removeItem("token"),this.router.navigate(["/login"]),alert("To complete the account deletion process, please check your email for further instructions.")},i=>{console.error("Account deletion failed",i),alert("Account deletion failed - "+i.error)}):(this.router.navigate(["/login"]),alert("No token found. Please log in again."))}static{this.\u0275fac=function(i){return new(i||n)($(Ct),$(Rn),$(Ta),$(bc))}}static{this.\u0275cmp=We({type:n,selectors:[["app-patient-settings"]],standalone:!0,features:[Ke],decls:21,vars:0,consts:[[1,"settings-container"],[1,"settings-content"],[1,"header"],[1,"settings-details"],["id","theme-settings",1,"box"],["type","radio","name","theme","value","light"],["type","radio","name","theme","value","dark","checked",""],["id","account-settings",1,"box"],[1,"delete-account",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1"),C(5,"Settings"),_()(),g(6,"div",3)(7,"section",4)(8,"h2"),C(9,"Theme"),_(),g(10,"label"),me(11,"input",5),C(12," Light "),_(),g(13,"label"),me(14,"input",6),C(15," Dark "),_()(),g(16,"section",7)(17,"h2"),C(18,"Account"),_(),g(19,"button",8),se("click",function(){return r.onSubmit()}),C(20," Request Account Delete "),_()()()()())},dependencies:[Lt],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}.settings-container[_ngcontent-%COMP%]{display:flex;background-color:#161a2d;font-family:Poppins,sans-serif;color:#fff;height:100vh;margin-left:85px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]{flex:1;padding:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]{margin-top:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{background-color:#161a2d;border:1px solid #515253;border-radius:6px;padding:20px;margin-bottom:20px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff;border-bottom:1px solid #515253;padding-bottom:10px;margin-bottom:15px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:1rem;color:#fff}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:8px}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]{background-color:#d73a49;color:#fff;padding:10px 20px;font-size:1rem;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s}.settings-container[_ngcontent-%COMP%]   .settings-content[_ngcontent-%COMP%]   .settings-details[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .delete-account[_ngcontent-%COMP%]:hover{background-color:#b92534}"]})}}return n})();var Li=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Admin")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Ct))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aS=n=>({"is-invalid":n}),zee=()=>["/operation-types"];function Bee(n,t){n&1&&(g(0,"div",15),C(1," Name is required. "),_())}function Hee(n,t){n&1&&(g(0,"div",15),C(1," Estimated Duration is required. "),_())}function jee(n,t){if(n&1){let e=rt();g(0,"div",16),me(1,"input",17),g(2,"button",18),se("click",function(){let r=De(e).index,o=ae();return Oe(o.removeSpecialization(r))}),C(3,"Remove"),_()()}if(n&2){let e=t.$implicit,i=t.index;A(),X("formControlName",i)("ngClass",ri(2,aS,e.invalid&&e.touched))}}function Wee(n,t){n&1&&(g(0,"div",19),C(1," At least one specialization is required. "),_())}var bL=(()=>{class n{constructor(e,i,r,o){this.route=e,this.router=i,this.fb=r,this.operationTypeService=o,this.operationTypeName=""}ngOnInit(){this.updateForm=this.fb.group({name:[""],estimatedDuration:[""],specializations:this.fb.array([],qt.required)}),this.operationTypeName=this.route.snapshot.paramMap.get("name"),this.loadOperationType()}loadOperationType(){this.operationTypeService.getOperationTypeByName(this.operationTypeName).subscribe(e=>{this.updateForm.patchValue({name:e.name,estimatedDuration:e.estimatedDuration});let i=this.updateForm.get("specializations");e.specializations.map(o=>o.specOption).forEach(o=>{i.push(this.fb.control(o,qt.required))})},e=>{console.error("Error fetching operation type",e)})}updateOperationType(){if(this.updateForm.valid){let e=this.updateForm.value,i={name:e.name,estimatedDuration:e.estimatedDuration,specializations:e.specializations};this.operationTypeService.editOperationType(this.operationTypeName,i).subscribe(()=>{alert("Operation type updated successfully"),this.router.navigate(["/operation-types"])},r=>{console.error("Error updating operation type",r)})}}get specializations(){return this.updateForm.get("specializations")}addSpecialization(){this.specializations.push(this.fb.control("",qt.required))}removeSpecialization(e){this.specializations.removeAt(e)}static{this.\u0275fac=function(i){return new(i||n)($(nr),$(Ct),$(Sa),$(ys))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-operation-type"]],standalone:!0,features:[Ke],decls:26,vars:13,consts:[[1,"update-operation-type-container"],[1,"operation-title",2,"text-align","center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","estimatedDuration"],["type","text","id","estimatedDuration","formControlName","estimatedDuration",1,"form-control",3,"ngClass"],["formArrayName","specializations",1,"form-group"],["class","input-group mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-addSpecialization",3,"click"],["class","invalid-feedback d-block",4,"ngIf"],["type","submit",1,"btn","btn-primary"],[1,"btn","btn-secondary",3,"routerLink"],[1,"invalid-feedback"],[1,"input-group","mb-2"],["type","text","placeholder","Specialization",1,"form-control",3,"formControlName","ngClass"],["type","button",1,"btn","btn-danger",3,"click"],[1,"invalid-feedback","d-block"]],template:function(i,r){if(i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h2",1),C(3,"Update Operation Type"),_(),g(4,"form",2),se("ngSubmit",function(){return r.updateOperationType()}),g(5,"div",3)(6,"label",4),C(7,"Name"),_(),me(8,"input",5),Se(9,Bee,2,0,"div",6),_(),g(10,"div",3)(11,"label",7),C(12,"Estimated Duration"),_(),me(13,"input",8),Se(14,Hee,2,0,"div",6),_(),g(15,"div",9)(16,"label"),C(17,"Specializations"),_(),Se(18,jee,4,4,"div",10),g(19,"button",11),se("click",function(){return r.addSpecialization()}),C(20,"Add Specialization"),_(),Se(21,Wee,2,0,"div",12),_(),g(22,"button",13),C(23,"Update"),_(),g(24,"a",14),C(25,"Cancel"),_()()()),i&2){let o,s,a,l;A(4),X("formGroup",r.updateForm),A(4),X("ngClass",ri(8,aS,((o=r.updateForm.get("name"))==null?null:o.touched)&&((o=r.updateForm.get("name"))==null?null:o.invalid))),A(),X("ngIf",((s=r.updateForm.get("name"))==null?null:s.touched)&&((s=r.updateForm.get("name"))==null?null:s.invalid)),A(4),X("ngClass",ri(10,aS,((a=r.updateForm.get("estimatedDuration"))==null?null:a.touched)&&((a=r.updateForm.get("estimatedDuration"))==null?null:a.invalid))),A(),X("ngIf",((l=r.updateForm.get("estimatedDuration"))==null?null:l.touched)&&((l=r.updateForm.get("estimatedDuration"))==null?null:l.invalid)),A(4),X("ngForOf",r.specializations.controls),A(3),X("ngIf",r.specializations.invalid&&r.specializations.touched),A(3),X("routerLink",ji(12,zee))}},dependencies:[bt,Ht,Ot,Nt,Bt,ir,Er,kr,Cf,kt,zt,Lt,vt,Po,gn,Xt],styles:['@charset "UTF-8";.update-operation-type-container[_ngcontent-%COMP%]{max-width:700px;margin:40px auto;padding:30px;background-color:#fdfdfd;border-radius:12px;box-shadow:0 6px 12px #0000001a;border:1px solid #e6e6e6}.operation-title[_ngcontent-%COMP%]{text-align:center;font-size:26px;font-weight:700;color:#333;margin-bottom:25px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:15px;font-weight:500;color:#555;margin-bottom:6px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:15px;border:1px solid #ccc;border-radius:6px;transition:border-color .3s ease;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#0069d9;outline:none;box-shadow:0 0 5px #007bff4d}.is-invalid[_ngcontent-%COMP%]{border-color:#e63946;box-shadow:0 0 5px #e639464d}.invalid-feedback[_ngcontent-%COMP%]{color:#e63946;font-size:14px;margin-top:5px}button.btn[_ngcontent-%COMP%]{width:100%;padding:12px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease}button.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;margin-top:10px}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 4px 8px #007bff33}.btn-secondary[_ngcontent-%COMP%]{background-color:#e63946;color:#fff;margin-top:30px;text-align:center}button.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;box-shadow:0 4px 8px #6c757d33}.button-group[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:20px}a[_ngcontent-%COMP%]{display:inline-block;margin-top:20px;font-size:15px;color:#007bff;font-weight:600;text-decoration:none;text-align:center}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.btn-addSpecialization[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-top:10px}']})}}return n})();var eT="170";var Gee=0,CL=1,$ee=2;var HU=1,tT=2,Pl=3,Ia=0,Do=1,Xo=2,Dc=0,jf=1,ML=2,wL=3,EL=4,qee=5,Vu=100,Yee=101,Xee=102,Zee=103,Kee=104,Jee=200,Qee=201,ete=202,tte=203,zS=204,BS=205,nte=206,ite=207,rte=208,ote=209,ste=210,ate=211,lte=212,cte=213,ute=214,HS=0,jS=1,WS=2,qf=3,GS=4,$S=5,qS=6,YS=7,jU=0,dte=1,fte=2,Oc=0,hte=1,pte=2,mte=3,gte=4,_te=5,vte=6,yte=7,SL="attached",xte="detached",PL=300,Yf=301,Xf=302,XS=303,ZS=304,Xy=306,sr=1e3,Dl=1001,Mm=1002,$r=1003,nT=1004;var Vf=1005;var Pr=1006,ym=1007;var To=1008;var Il=1009,WU=1010,GU=1011,wm=1012,iT=1013,Hu=1014,oa=1015,Nm=1016,rT=1017,oT=1018,Zf=1020,$U=35902,qU=1021,YU=1022,bs=1023,XU=1024,ZU=1025,Wf=1026,Kf=1027,sT=1028,aT=1029,KU=1030,lT=1031;var cT=1033,gy=33776,_y=33777,vy=33778,yy=33779,KS=35840,JS=35841,QS=35842,eP=35843,tP=36196,nP=37492,iP=37496,rP=37808,oP=37809,sP=37810,aP=37811,lP=37812,cP=37813,uP=37814,dP=37815,fP=37816,hP=37817,pP=37818,mP=37819,gP=37820,_P=37821,xy=36492,vP=36494,yP=36495,JU=36283,xP=36284,bP=36285,CP=36286,uT=2200,bte=2201,Cte=2202,Jf=2300,Qf=2301,lS=2302,zf=2400,Bf=2401,by=2402,dT=2500,Mte=2501,QU=0,Zy=1,Fm=2,wte=3200,Ete=3201;var eV=0,Ste=1,Tc="",Ui="srgb",Zr="srgb-linear",Ky="linear",hi="srgb";var wf=7680;var TL=519,Pte=512,Tte=513,Dte=514,tV=515,Ote=516,Ate=517,Ite=518,Rte=519,MP=35044;var DL="300 es",Ol=2e3,Cy=2001,Rl=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;let i=this._listeners;return i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;let r=this._listeners[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},jr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],OL=1234567,xm=Math.PI/180,eh=180/Math.PI;function sa(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(jr[n&255]+jr[n>>8&255]+jr[n>>16&255]+jr[n>>24&255]+"-"+jr[t&255]+jr[t>>8&255]+"-"+jr[t>>16&15|64]+jr[t>>24&255]+"-"+jr[e&63|128]+jr[e>>8&255]+"-"+jr[e>>16&255]+jr[e>>24&255]+jr[i&255]+jr[i>>8&255]+jr[i>>16&255]+jr[i>>24&255]).toLowerCase()}function Gr(n,t,e){return Math.max(t,Math.min(e,n))}function fT(n,t){return(n%t+t)%t}function kte(n,t,e,i,r){return i+(n-t)*(r-i)/(e-t)}function Nte(n,t,e){return n!==t?(e-n)/(t-n):0}function bm(n,t,e){return(1-e)*n+e*t}function Fte(n,t,e,i){return bm(n,t,1-Math.exp(-e*i))}function Lte(n,t=1){return t-Math.abs(fT(n,t*2)-t)}function Ute(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function Vte(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function zte(n,t){return n+Math.floor(Math.random()*(t-n+1))}function Bte(n,t){return n+Math.random()*(t-n)}function Hte(n){return n*(.5-Math.random())}function jte(n){n!==void 0&&(OL=n);let t=OL+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Wte(n){return n*xm}function Gte(n){return n*eh}function $te(n){return(n&n-1)===0&&n!==0}function qte(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Yte(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Xte(n,t,e,i,r){let o=Math.cos,s=Math.sin,a=o(e/2),l=s(e/2),u=o((t+i)/2),f=s((t+i)/2),h=o((t-i)/2),m=s((t-i)/2),p=o((i-t)/2),y=s((i-t)/2);switch(r){case"XYX":n.set(a*f,l*h,l*m,a*u);break;case"YZY":n.set(l*m,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*m,a*f,a*u);break;case"XZX":n.set(a*f,l*y,l*p,a*u);break;case"YXY":n.set(l*p,a*f,l*y,a*u);break;case"ZYZ":n.set(l*y,l*p,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ra(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ai(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Nr={DEG2RAD:xm,RAD2DEG:eh,generateUUID:sa,clamp:Gr,euclideanModulo:fT,mapLinear:kte,inverseLerp:Nte,lerp:bm,damp:Fte,pingpong:Lte,smoothstep:Ute,smootherstep:Vte,randInt:zte,randFloat:Bte,randFloatSpread:Hte,seededRandom:jte,degToRad:Wte,radToDeg:Gte,isPowerOfTwo:$te,ceilPowerOfTwo:qte,floorPowerOfTwo:Yte,setQuaternionFromProperEuler:Xte,normalize:ai,denormalize:ra},pn=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Gr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Cn=class n{constructor(t,e,i,r,o,s,a,l,u){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,l,u)}set(t,e,i,r,o,s,a,l,u){let f=this.elements;return f[0]=t,f[1]=r,f[2]=a,f[3]=e,f[4]=o,f[5]=l,f[6]=i,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],m=i[2],p=i[5],y=i[8],M=r[0],x=r[3],b=r[6],T=r[1],E=r[4],D=r[7],L=r[2],z=r[5],k=r[8];return o[0]=s*M+a*T+l*L,o[3]=s*x+a*E+l*z,o[6]=s*b+a*D+l*k,o[1]=u*M+f*T+h*L,o[4]=u*x+f*E+h*z,o[7]=u*b+f*D+h*k,o[2]=m*M+p*T+y*L,o[5]=m*x+p*E+y*z,o[8]=m*b+p*D+y*k,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8];return e*s*f-e*a*u-i*o*f+i*a*l+r*o*u-r*s*l}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],h=f*s-a*u,m=a*l-f*o,p=u*o-s*l,y=e*h+i*m+r*p;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);let M=1/y;return t[0]=h*M,t[1]=(r*u-f*i)*M,t[2]=(a*i-r*s)*M,t[3]=m*M,t[4]=(f*e-r*l)*M,t[5]=(r*o-a*e)*M,t[6]=p*M,t[7]=(i*l-u*e)*M,t[8]=(s*e-i*o)*M,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,o,s,a){let l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+t,-r*u,r*l,-r*(-u*s+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(cS.makeScale(t,e)),this}rotate(t){return this.premultiply(cS.makeRotation(-t)),this}translate(t,e){return this.premultiply(cS.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},cS=new Cn;function nV(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function Em(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Zte(){let n=Em("canvas");return n.style.display="block",n}var AL={};function _m(n){n in AL||(AL[n]=!0,console.warn(n))}function Kte(n,t,e){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:i()}}setTimeout(o,e)})}function Jte(n){let t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function Qte(n){let t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}var Un={enabled:!0,workingColorSpace:Zr,spaces:{},convert:function(n,t,e){return this.enabled===!1||t===e||!t||!e||(this.spaces[t].transfer===hi&&(n.r=Al(n.r),n.g=Al(n.g),n.b=Al(n.b)),this.spaces[t].primaries!==this.spaces[e].primaries&&(n.applyMatrix3(this.spaces[t].toXYZ),n.applyMatrix3(this.spaces[e].fromXYZ)),this.spaces[e].transfer===hi&&(n.r=Gf(n.r),n.g=Gf(n.g),n.b=Gf(n.b))),n},fromWorkingColorSpace:function(n,t){return this.convert(n,this.workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Tc?Ky:this.spaces[n].transfer},getLuminanceCoefficients:function(n,t=this.workingColorSpace){return n.fromArray(this.spaces[t].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,t,e){return n.copy(this.spaces[t].toXYZ).multiply(this.spaces[e].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Al(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Gf(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var IL=[.64,.33,.3,.6,.15,.06],RL=[.2126,.7152,.0722],kL=[.3127,.329],NL=new Cn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),FL=new Cn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Un.define({[Zr]:{primaries:IL,whitePoint:kL,transfer:Ky,toXYZ:NL,fromXYZ:FL,luminanceCoefficients:RL,workingColorSpaceConfig:{unpackColorSpace:Ui},outputColorSpaceConfig:{drawingBufferColorSpace:Ui}},[Ui]:{primaries:IL,whitePoint:kL,transfer:hi,toXYZ:NL,fromXYZ:FL,luminanceCoefficients:RL,outputColorSpaceConfig:{drawingBufferColorSpace:Ui}}});var Ef,wP=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Ef===void 0&&(Ef=Em("canvas")),Ef.width=t.width,Ef.height=t.height;let i=Ef.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Ef}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=Em("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let r=i.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Al(o[s]/255)*255;return i.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Al(e[i]/255)*255):e[i]=Al(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},ene=0,My=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ene++}),this.uuid=sa(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(uS(r[s].image)):o.push(uS(r[s]))}else o=uS(r);i.url=o}return e||(t.images[this.uuid]=i),i}};function uS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?wP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var tne=0,Es=(()=>{class n extends Rl{constructor(e=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Dl,o=Dl,s=Pr,a=To,l=bs,u=Il,f=n.DEFAULT_ANISOTROPY,h=Tc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tne++}),this.uuid=sa(),this.name="",this.source=new My(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new pn(0,0),this.repeat=new pn(1,1),this.center=new pn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==PL)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sr:e.x=e.x-Math.floor(e.x);break;case Dl:e.x=e.x<0?0:1;break;case Mm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sr:e.y=e.y-Math.floor(e.y);break;case Dl:e.y=e.y<0?0:1;break;case Mm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=PL,n.DEFAULT_ANISOTROPY=1,n})(),_n=class n{constructor(t=0,e=0,i=0,r=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,o,l=t.elements,u=l[0],f=l[4],h=l[8],m=l[1],p=l[5],y=l[9],M=l[2],x=l[6],b=l[10];if(Math.abs(f-m)<.01&&Math.abs(h-M)<.01&&Math.abs(y-x)<.01){if(Math.abs(f+m)<.1&&Math.abs(h+M)<.1&&Math.abs(y+x)<.1&&Math.abs(u+p+b-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let E=(u+1)/2,D=(p+1)/2,L=(b+1)/2,z=(f+m)/4,k=(h+M)/4,G=(y+x)/4;return E>D&&E>L?E<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(E),r=z/i,o=k/i):D>L?D<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(D),i=z/r,o=G/r):L<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(L),i=k/o,r=G/o),this.set(i,r,o,e),this}let T=Math.sqrt((x-y)*(x-y)+(h-M)*(h-M)+(m-f)*(m-f));return Math.abs(T)<.001&&(T=1),this.x=(x-y)/T,this.y=(h-M)/T,this.z=(m-f)/T,this.w=Math.acos((u+p+b-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},EP=class extends Rl{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new _n(0,0,t,e),this.scissorTest=!1,this.viewport=new _n(0,0,t,e);let r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Pr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let o=new Es(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let i=0,r=t.textures.length;i<r;i++)this.textures[i]=t.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new My(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},kl=class extends EP{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},wy=class extends Es{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=$r,this.minFilter=$r,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var SP=class extends Es{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=$r,this.minFilter=$r,this.wrapR=Dl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var qr=class{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,o,s,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3],m=o[s+0],p=o[s+1],y=o[s+2],M=o[s+3];if(a===0){t[e+0]=l,t[e+1]=u,t[e+2]=f,t[e+3]=h;return}if(a===1){t[e+0]=m,t[e+1]=p,t[e+2]=y,t[e+3]=M;return}if(h!==M||l!==m||u!==p||f!==y){let x=1-a,b=l*m+u*p+f*y+h*M,T=b>=0?1:-1,E=1-b*b;if(E>Number.EPSILON){let L=Math.sqrt(E),z=Math.atan2(L,b*T);x=Math.sin(x*z)/L,a=Math.sin(a*z)/L}let D=a*T;if(l=l*x+m*D,u=u*x+p*D,f=f*x+y*D,h=h*x+M*D,x===1-a){let L=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=L,u*=L,f*=L,h*=L}}t[e]=l,t[e+1]=u,t[e+2]=f,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,r,o,s){let a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=o[s],m=o[s+1],p=o[s+2],y=o[s+3];return t[e]=a*y+f*h+l*p-u*m,t[e+1]=l*y+f*m+u*h-a*p,t[e+2]=u*y+f*p+a*m-l*h,t[e+3]=f*y-a*h-l*m-u*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(o/2),m=l(i/2),p=l(r/2),y=l(o/2);switch(s){case"XYZ":this._x=m*f*h+u*p*y,this._y=u*p*h-m*f*y,this._z=u*f*y+m*p*h,this._w=u*f*h-m*p*y;break;case"YXZ":this._x=m*f*h+u*p*y,this._y=u*p*h-m*f*y,this._z=u*f*y-m*p*h,this._w=u*f*h+m*p*y;break;case"ZXY":this._x=m*f*h-u*p*y,this._y=u*p*h+m*f*y,this._z=u*f*y+m*p*h,this._w=u*f*h-m*p*y;break;case"ZYX":this._x=m*f*h-u*p*y,this._y=u*p*h+m*f*y,this._z=u*f*y-m*p*h,this._w=u*f*h+m*p*y;break;case"YZX":this._x=m*f*h+u*p*y,this._y=u*p*h+m*f*y,this._z=u*f*y-m*p*h,this._w=u*f*h-m*p*y;break;case"XZY":this._x=m*f*h-u*p*y,this._y=u*p*h-m*f*y,this._z=u*f*y+m*p*h,this._w=u*f*h+m*p*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],r=e[4],o=e[8],s=e[1],a=e[5],l=e[9],u=e[2],f=e[6],h=e[10],m=i+a+h;if(m>0){let p=.5/Math.sqrt(m+1);this._w=.25/p,this._x=(f-l)*p,this._y=(o-u)*p,this._z=(s-r)*p}else if(i>a&&i>h){let p=2*Math.sqrt(1+i-a-h);this._w=(f-l)/p,this._x=.25*p,this._y=(r+s)/p,this._z=(o+u)/p}else if(a>h){let p=2*Math.sqrt(1+a-i-h);this._w=(o-u)/p,this._x=(r+s)/p,this._y=.25*p,this._z=(l+f)/p}else{let p=2*Math.sqrt(1+h-i-a);this._w=(s-r)/p,this._x=(o+u)/p,this._y=(l+f)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Gr(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,r=t._y,o=t._z,s=t._w,a=e._x,l=e._y,u=e._z,f=e._w;return this._x=i*f+s*a+r*u-o*l,this._y=r*f+s*l+o*a-i*u,this._z=o*f+s*u+i*l-r*a,this._w=s*f-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*t._w+i*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let l=1-a*a;if(l<=Number.EPSILON){let p=1-e;return this._w=p*s+e*this._w,this._x=p*i+e*this._x,this._y=p*r+e*this._y,this._z=p*o+e*this._z,this.normalize(),this}let u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-e)*f)/u,m=Math.sin(e*f)/u;return this._w=s*h+this._w*m,this._x=i*h+this._x*m,this._y=r*h+this._y*m,this._z=o*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},te=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(LL.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(LL.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*i+o[6]*r,this.y=o[1]*e+o[4]*i+o[7]*r,this.z=o[2]*e+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,i=this.y,r=this.z,o=t.x,s=t.y,a=t.z,l=t.w,u=2*(s*r-a*i),f=2*(a*e-o*r),h=2*(o*i-s*e);return this.x=e+l*u+s*h-a*f,this.y=i+l*f+a*u-o*h,this.z=r+l*h+o*f-s*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*r,this.y=o[1]*e+o[5]*i+o[9]*r,this.z=o[2]*e+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,r=t.y,o=t.z,s=e.x,a=e.y,l=e.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return dS.copy(this).projectOnVector(t),this.sub(dS)}reflect(t){return this.sub(dS.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(Gr(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},dS=new te,LL=new qr,Ji=class{constructor(t=new te(1/0,1/0,1/0),e=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(ta.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(ta.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=ta.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let o=i.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,ta):ta.fromBufferAttribute(o,s),ta.applyMatrix4(t.matrixWorld),this.expandByPoint(ta);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),jv.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),jv.copy(i.boundingBox)),jv.applyMatrix4(t.matrixWorld),this.union(jv)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,ta),ta.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(cm),Wv.subVectors(this.max,cm),Sf.subVectors(t.a,cm),Pf.subVectors(t.b,cm),Tf.subVectors(t.c,cm),Cc.subVectors(Pf,Sf),Mc.subVectors(Tf,Pf),Iu.subVectors(Sf,Tf);let e=[0,-Cc.z,Cc.y,0,-Mc.z,Mc.y,0,-Iu.z,Iu.y,Cc.z,0,-Cc.x,Mc.z,0,-Mc.x,Iu.z,0,-Iu.x,-Cc.y,Cc.x,0,-Mc.y,Mc.x,0,-Iu.y,Iu.x,0];return!fS(e,Sf,Pf,Tf,Wv)||(e=[1,0,0,0,1,0,0,0,1],!fS(e,Sf,Pf,Tf,Wv))?!1:(Gv.crossVectors(Cc,Mc),e=[Gv.x,Gv.y,Gv.z],fS(e,Sf,Pf,Tf,Wv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ta).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(ta).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(bl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),bl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),bl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),bl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),bl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),bl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),bl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),bl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(bl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},bl=[new te,new te,new te,new te,new te,new te,new te,new te],ta=new te,jv=new Ji,Sf=new te,Pf=new te,Tf=new te,Cc=new te,Mc=new te,Iu=new te,cm=new te,Wv=new te,Gv=new te,Ru=new te;function fS(n,t,e,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){Ru.fromArray(n,o);let a=r.x*Math.abs(Ru.x)+r.y*Math.abs(Ru.y)+r.z*Math.abs(Ru.z),l=t.dot(Ru),u=e.dot(Ru),f=i.dot(Ru);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}var nne=new Ji,um=new te,hS=new te,Zo=class{constructor(t=new te,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):nne.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;um.subVectors(t,this.center);let e=um.lengthSq();if(e>this.radius*this.radius){let i=Math.sqrt(e),r=(i-this.radius)*.5;this.center.addScaledVector(um,r/i),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(hS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(um.copy(t.center).add(hS)),this.expandByPoint(um.copy(t.center).sub(hS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Cl=new te,pS=new te,$v=new te,wc=new te,mS=new te,qv=new te,gS=new te,ju=class{constructor(t=new te,e=new te(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Cl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Cl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Cl.copy(this.origin).addScaledVector(this.direction,e),Cl.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){pS.copy(t).add(e).multiplyScalar(.5),$v.copy(e).sub(t).normalize(),wc.copy(this.origin).sub(pS);let o=t.distanceTo(e)*.5,s=-this.direction.dot($v),a=wc.dot(this.direction),l=-wc.dot($v),u=wc.lengthSq(),f=Math.abs(1-s*s),h,m,p,y;if(f>0)if(h=s*l-a,m=s*a-l,y=o*f,h>=0)if(m>=-y)if(m<=y){let M=1/f;h*=M,m*=M,p=h*(h+s*m+2*a)+m*(s*h+m+2*l)+u}else m=o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;else m=-o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;else m<=-y?(h=Math.max(0,-(-s*o+a)),m=h>0?-o:Math.min(Math.max(-o,-l),o),p=-h*h+m*(m+2*l)+u):m<=y?(h=0,m=Math.min(Math.max(-o,-l),o),p=m*(m+2*l)+u):(h=Math.max(0,-(s*o+a)),m=h>0?o:Math.min(Math.max(-o,-l),o),p=-h*h+m*(m+2*l)+u);else m=s>0?-o:o,h=Math.max(0,-(s*m+a)),p=-h*h+m*(m+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(pS).addScaledVector($v,m),p}intersectSphere(t,e){Cl.subVectors(t.center,this.origin);let i=Cl.dot(this.direction),r=Cl.dot(Cl)-i*i,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,o,s,a,l,u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,m=this.origin;return u>=0?(i=(t.min.x-m.x)*u,r=(t.max.x-m.x)*u):(i=(t.max.x-m.x)*u,r=(t.min.x-m.x)*u),f>=0?(o=(t.min.y-m.y)*f,s=(t.max.y-m.y)*f):(o=(t.max.y-m.y)*f,s=(t.min.y-m.y)*f),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),h>=0?(a=(t.min.z-m.z)*h,l=(t.max.z-m.z)*h):(a=(t.max.z-m.z)*h,l=(t.min.z-m.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,e)}intersectsBox(t){return this.intersectBox(t,Cl)!==null}intersectTriangle(t,e,i,r,o){mS.subVectors(e,t),qv.subVectors(i,t),gS.crossVectors(mS,qv);let s=this.direction.dot(gS),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;wc.subVectors(this.origin,t);let l=a*this.direction.dot(qv.crossVectors(wc,qv));if(l<0)return null;let u=a*this.direction.dot(mS.cross(wc));if(u<0||l+u>s)return null;let f=-a*wc.dot(gS);return f<0?null:this.at(f/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},cn=class n{constructor(t,e,i,r,o,s,a,l,u,f,h,m,p,y,M,x){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,r,o,s,a,l,u,f,h,m,p,y,M,x)}set(t,e,i,r,o,s,a,l,u,f,h,m,p,y,M,x){let b=this.elements;return b[0]=t,b[4]=e,b[8]=i,b[12]=r,b[1]=o,b[5]=s,b[9]=a,b[13]=l,b[2]=u,b[6]=f,b[10]=h,b[14]=m,b[3]=p,b[7]=y,b[11]=M,b[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,r=1/Df.setFromMatrixColumn(t,0).length(),o=1/Df.setFromMatrixColumn(t,1).length(),s=1/Df.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*o,e[5]=i[5]*o,e[6]=i[6]*o,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(o),h=Math.sin(o);if(t.order==="XYZ"){let m=s*f,p=s*h,y=a*f,M=a*h;e[0]=l*f,e[4]=-l*h,e[8]=u,e[1]=p+y*u,e[5]=m-M*u,e[9]=-a*l,e[2]=M-m*u,e[6]=y+p*u,e[10]=s*l}else if(t.order==="YXZ"){let m=l*f,p=l*h,y=u*f,M=u*h;e[0]=m+M*a,e[4]=y*a-p,e[8]=s*u,e[1]=s*h,e[5]=s*f,e[9]=-a,e[2]=p*a-y,e[6]=M+m*a,e[10]=s*l}else if(t.order==="ZXY"){let m=l*f,p=l*h,y=u*f,M=u*h;e[0]=m-M*a,e[4]=-s*h,e[8]=y+p*a,e[1]=p+y*a,e[5]=s*f,e[9]=M-m*a,e[2]=-s*u,e[6]=a,e[10]=s*l}else if(t.order==="ZYX"){let m=s*f,p=s*h,y=a*f,M=a*h;e[0]=l*f,e[4]=y*u-p,e[8]=m*u+M,e[1]=l*h,e[5]=M*u+m,e[9]=p*u-y,e[2]=-u,e[6]=a*l,e[10]=s*l}else if(t.order==="YZX"){let m=s*l,p=s*u,y=a*l,M=a*u;e[0]=l*f,e[4]=M-m*h,e[8]=y*h+p,e[1]=h,e[5]=s*f,e[9]=-a*f,e[2]=-u*f,e[6]=p*h+y,e[10]=m-M*h}else if(t.order==="XZY"){let m=s*l,p=s*u,y=a*l,M=a*u;e[0]=l*f,e[4]=-h,e[8]=u*f,e[1]=m*h+M,e[5]=s*f,e[9]=p*h-y,e[2]=y*h-p,e[6]=a*f,e[10]=M*h+m}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(ine,t,rne)}lookAt(t,e,i){let r=this.elements;return qo.subVectors(t,e),qo.lengthSq()===0&&(qo.z=1),qo.normalize(),Ec.crossVectors(i,qo),Ec.lengthSq()===0&&(Math.abs(i.z)===1?qo.x+=1e-4:qo.z+=1e-4,qo.normalize(),Ec.crossVectors(i,qo)),Ec.normalize(),Yv.crossVectors(qo,Ec),r[0]=Ec.x,r[4]=Yv.x,r[8]=qo.x,r[1]=Ec.y,r[5]=Yv.y,r[9]=qo.y,r[2]=Ec.z,r[6]=Yv.z,r[10]=qo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,r=e.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],m=i[9],p=i[13],y=i[2],M=i[6],x=i[10],b=i[14],T=i[3],E=i[7],D=i[11],L=i[15],z=r[0],k=r[4],G=r[8],F=r[12],P=r[1],N=r[5],S=r[9],q=r[13],oe=r[2],ee=r[6],ge=r[10],le=r[14],de=r[3],J=r[7],Q=r[11],Ie=r[15];return o[0]=s*z+a*P+l*oe+u*de,o[4]=s*k+a*N+l*ee+u*J,o[8]=s*G+a*S+l*ge+u*Q,o[12]=s*F+a*q+l*le+u*Ie,o[1]=f*z+h*P+m*oe+p*de,o[5]=f*k+h*N+m*ee+p*J,o[9]=f*G+h*S+m*ge+p*Q,o[13]=f*F+h*q+m*le+p*Ie,o[2]=y*z+M*P+x*oe+b*de,o[6]=y*k+M*N+x*ee+b*J,o[10]=y*G+M*S+x*ge+b*Q,o[14]=y*F+M*q+x*le+b*Ie,o[3]=T*z+E*P+D*oe+L*de,o[7]=T*k+E*N+D*ee+L*J,o[11]=T*G+E*S+D*ge+L*Q,o[15]=T*F+E*q+D*le+L*Ie,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],r=t[8],o=t[12],s=t[1],a=t[5],l=t[9],u=t[13],f=t[2],h=t[6],m=t[10],p=t[14],y=t[3],M=t[7],x=t[11],b=t[15];return y*(+o*l*h-r*u*h-o*a*m+i*u*m+r*a*p-i*l*p)+M*(+e*l*p-e*u*m+o*s*m-r*s*p+r*u*f-o*l*f)+x*(+e*u*h-e*a*p-o*s*h+i*s*p+o*a*f-i*u*f)+b*(-r*a*f-e*l*h+e*a*m+r*s*h-i*s*m+i*l*f)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],h=t[9],m=t[10],p=t[11],y=t[12],M=t[13],x=t[14],b=t[15],T=h*x*u-M*m*u+M*l*p-a*x*p-h*l*b+a*m*b,E=y*m*u-f*x*u-y*l*p+s*x*p+f*l*b-s*m*b,D=f*M*u-y*h*u+y*a*p-s*M*p-f*a*b+s*h*b,L=y*h*l-f*M*l-y*a*m+s*M*m+f*a*x-s*h*x,z=e*T+i*E+r*D+o*L;if(z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let k=1/z;return t[0]=T*k,t[1]=(M*m*o-h*x*o-M*r*p+i*x*p+h*r*b-i*m*b)*k,t[2]=(a*x*o-M*l*o+M*r*u-i*x*u-a*r*b+i*l*b)*k,t[3]=(h*l*o-a*m*o-h*r*u+i*m*u+a*r*p-i*l*p)*k,t[4]=E*k,t[5]=(f*x*o-y*m*o+y*r*p-e*x*p-f*r*b+e*m*b)*k,t[6]=(y*l*o-s*x*o-y*r*u+e*x*u+s*r*b-e*l*b)*k,t[7]=(s*m*o-f*l*o+f*r*u-e*m*u-s*r*p+e*l*p)*k,t[8]=D*k,t[9]=(y*h*o-f*M*o-y*i*p+e*M*p+f*i*b-e*h*b)*k,t[10]=(s*M*o-y*a*o+y*i*u-e*M*u-s*i*b+e*a*b)*k,t[11]=(f*a*o-s*h*o-f*i*u+e*h*u+s*i*p-e*a*p)*k,t[12]=L*k,t[13]=(f*M*r-y*h*r+y*i*m-e*M*m-f*i*x+e*h*x)*k,t[14]=(y*a*r-s*M*r-y*i*l+e*M*l+s*i*x-e*a*x)*k,t[15]=(s*h*r-f*a*r+f*i*l-e*h*l-s*i*m+e*a*m)*k,this}scale(t){let e=this.elements,i=t.x,r=t.y,o=t.z;return e[0]*=i,e[4]*=r,e[8]*=o,e[1]*=i,e[5]*=r,e[9]*=o,e[2]*=i,e[6]*=r,e[10]*=o,e[3]*=i,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),r=Math.sin(e),o=1-i,s=t.x,a=t.y,l=t.z,u=o*s,f=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*s,0,u*l-r*a,f*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,o,s){return this.set(1,i,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){let r=this.elements,o=e._x,s=e._y,a=e._z,l=e._w,u=o+o,f=s+s,h=a+a,m=o*u,p=o*f,y=o*h,M=s*f,x=s*h,b=a*h,T=l*u,E=l*f,D=l*h,L=i.x,z=i.y,k=i.z;return r[0]=(1-(M+b))*L,r[1]=(p+D)*L,r[2]=(y-E)*L,r[3]=0,r[4]=(p-D)*z,r[5]=(1-(m+b))*z,r[6]=(x+T)*z,r[7]=0,r[8]=(y+E)*k,r[9]=(x-T)*k,r[10]=(1-(m+M))*k,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){let r=this.elements,o=Df.set(r[0],r[1],r[2]).length(),s=Df.set(r[4],r[5],r[6]).length(),a=Df.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],na.copy(this);let u=1/o,f=1/s,h=1/a;return na.elements[0]*=u,na.elements[1]*=u,na.elements[2]*=u,na.elements[4]*=f,na.elements[5]*=f,na.elements[6]*=f,na.elements[8]*=h,na.elements[9]*=h,na.elements[10]*=h,e.setFromRotationMatrix(na),i.x=o,i.y=s,i.z=a,this}makePerspective(t,e,i,r,o,s,a=Ol){let l=this.elements,u=2*o/(e-t),f=2*o/(i-r),h=(e+t)/(e-t),m=(i+r)/(i-r),p,y;if(a===Ol)p=-(s+o)/(s-o),y=-2*s*o/(s-o);else if(a===Cy)p=-s/(s-o),y=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,i,r,o,s,a=Ol){let l=this.elements,u=1/(e-t),f=1/(i-r),h=1/(s-o),m=(e+t)*u,p=(i+r)*f,y,M;if(a===Ol)y=(s+o)*h,M=-2*h;else if(a===Cy)y=o*h,M=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=M,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},Df=new te,na=new cn,ine=new te(0,0,0),rne=new te(1,1,1),Ec=new te,Yv=new te,qo=new te,UL=new cn,VL=new qr,Wu=(()=>{class n{constructor(e=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,r,o=this._order){return this._x=e,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,r=!0){let o=e.elements,s=o[0],a=o[4],l=o[8],u=o[1],f=o[5],h=o[9],m=o[2],p=o[6],y=o[10];switch(i){case"XYZ":this._y=Math.asin(Gr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Gr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Gr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Gr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(p,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Gr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-Gr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,r){return UL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(UL,i,r)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return VL.setFromEuler(this),this.setFromQuaternion(VL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Sm=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},one=0,zL=new te,Of=new qr,Ml=new cn,Xv=new te,dm=new te,sne=new te,ane=new qr,BL=new te(1,0,0),HL=new te(0,1,0),jL=new te(0,0,1),WL={type:"added"},lne={type:"removed"},Af={type:"childadded",child:null},_S={type:"childremoved",child:null},pr=(()=>{class n extends Rl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:one++}),this.uuid=sa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let e=new te,i=new Wu,r=new qr,o=new te(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new cn},normalMatrix:{value:new Cn}}),this.matrix=new cn,this.matrixWorld=new cn,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Sm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Of.setFromAxisAngle(e,i),this.quaternion.multiply(Of),this}rotateOnWorldAxis(e,i){return Of.setFromAxisAngle(e,i),this.quaternion.premultiply(Of),this}rotateX(e){return this.rotateOnAxis(BL,e)}rotateY(e){return this.rotateOnAxis(HL,e)}rotateZ(e){return this.rotateOnAxis(jL,e)}translateOnAxis(e,i){return zL.copy(e).applyQuaternion(this.quaternion),this.position.add(zL.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(BL,e)}translateY(e){return this.translateOnAxis(HL,e)}translateZ(e){return this.translateOnAxis(jL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ml.copy(this.matrixWorld).invert())}lookAt(e,i,r){e.isVector3?Xv.copy(e):Xv.set(e,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),dm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ml.lookAt(dm,Xv,this.up):Ml.lookAt(Xv,dm,this.up),this.quaternion.setFromRotationMatrix(Ml),o&&(Ml.extractRotation(o.matrixWorld),Of.setFromRotationMatrix(Ml),this.quaternion.premultiply(Of.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(WL),Af.child=e,this.dispatchEvent(Af),Af.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(lne),_S.child=e,this.dispatchEvent(_S),_S.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ml.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ml.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ml),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(WL),Af.child=e,this.dispatchEvent(Af),Af.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(e,i);if(a!==void 0)return a}}getObjectsByProperty(e,i,r=[]){this[e]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,i,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dm,e,sne),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dm,ane,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(e)}updateWorldMatrix(e,i){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){let i=e===void 0||typeof e=="string",r={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let u=l.shapes;if(Array.isArray(u))for(let f=0,h=u.length;f<h;f++){let m=u[f];s(e.shapes,m)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(e.materials,this.material[u]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++){let u=this.animations[l];o.animations.push(s(e.animations,u))}}if(i){let l=a(e.geometries),u=a(e.materials),f=a(e.textures),h=a(e.images),m=a(e.shapes),p=a(e.skeletons),y=a(e.animations),M=a(e.nodes);l.length>0&&(r.geometries=l),u.length>0&&(r.materials=u),f.length>0&&(r.textures=f),h.length>0&&(r.images=h),m.length>0&&(r.shapes=m),p.length>0&&(r.skeletons=p),y.length>0&&(r.animations=y),M.length>0&&(r.nodes=M)}return r.object=o,r;function a(l){let u=[];for(let f in l){let h=l[f];delete h.metadata,u.push(h)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new te(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),ia=new te,wl=new te,vS=new te,El=new te,If=new te,Rf=new te,GL=new te,yS=new te,xS=new te,bS=new te,CS=new _n,MS=new _n,wS=new _n,zu=class n{constructor(t=new te,e=new te,i=new te){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),ia.subVectors(t,e),r.cross(ia);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,i,r,o){ia.subVectors(r,e),wl.subVectors(i,e),vS.subVectors(t,e);let s=ia.dot(ia),a=ia.dot(wl),l=ia.dot(vS),u=wl.dot(wl),f=wl.dot(vS),h=s*u-a*a;if(h===0)return o.set(0,0,0),null;let m=1/h,p=(u*l-a*f)*m,y=(s*f-a*l)*m;return o.set(1-p-y,y,p)}static containsPoint(t,e,i,r){return this.getBarycoord(t,e,i,r,El)===null?!1:El.x>=0&&El.y>=0&&El.x+El.y<=1}static getInterpolation(t,e,i,r,o,s,a,l){return this.getBarycoord(t,e,i,r,El)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,El.x),l.addScaledVector(s,El.y),l.addScaledVector(a,El.z),l)}static getInterpolatedAttribute(t,e,i,r,o,s){return CS.setScalar(0),MS.setScalar(0),wS.setScalar(0),CS.fromBufferAttribute(t,e),MS.fromBufferAttribute(t,i),wS.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(CS,o.x),s.addScaledVector(MS,o.y),s.addScaledVector(wS,o.z),s}static isFrontFacing(t,e,i,r){return ia.subVectors(i,e),wl.subVectors(t,e),ia.cross(wl).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ia.subVectors(this.c,this.b),wl.subVectors(this.a,this.b),ia.cross(wl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,o){return n.getInterpolation(t,this.a,this.b,this.c,e,i,r,o)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,r=this.b,o=this.c,s,a;If.subVectors(r,i),Rf.subVectors(o,i),yS.subVectors(t,i);let l=If.dot(yS),u=Rf.dot(yS);if(l<=0&&u<=0)return e.copy(i);xS.subVectors(t,r);let f=If.dot(xS),h=Rf.dot(xS);if(f>=0&&h<=f)return e.copy(r);let m=l*h-f*u;if(m<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(i).addScaledVector(If,s);bS.subVectors(t,o);let p=If.dot(bS),y=Rf.dot(bS);if(y>=0&&p<=y)return e.copy(o);let M=p*u-l*y;if(M<=0&&u>=0&&y<=0)return a=u/(u-y),e.copy(i).addScaledVector(Rf,a);let x=f*y-p*h;if(x<=0&&h-f>=0&&p-y>=0)return GL.subVectors(o,r),a=(h-f)/(h-f+(p-y)),e.copy(r).addScaledVector(GL,a);let b=1/(x+M+m);return s=M*b,a=m*b,e.copy(i).addScaledVector(If,s).addScaledVector(Rf,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},iV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sc={h:0,s:0,l:0},Zv={h:0,s:0,l:0};function ES(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}var jt=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ui){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Un.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=Un.workingColorSpace){return this.r=t,this.g=e,this.b=i,Un.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=Un.workingColorSpace){if(t=fT(t,1),e=Gr(e,0,1),i=Gr(i,0,1),e===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+e):i+e-i*e,s=2*i-o;this.r=ES(s,o,t+1/3),this.g=ES(s,o,t),this.b=ES(s,o,t-1/3)}return Un.toWorkingColorSpace(this,r),this}setStyle(t,e=Ui){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ui){let i=iV[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Al(t.r),this.g=Al(t.g),this.b=Al(t.b),this}copyLinearToSRGB(t){return this.r=Gf(t.r),this.g=Gf(t.g),this.b=Gf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ui){return Un.fromWorkingColorSpace(Wr.copy(this),t),Math.round(Gr(Wr.r*255,0,255))*65536+Math.round(Gr(Wr.g*255,0,255))*256+Math.round(Gr(Wr.b*255,0,255))}getHexString(t=Ui){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Un.workingColorSpace){Un.fromWorkingColorSpace(Wr.copy(this),e);let i=Wr.r,r=Wr.g,o=Wr.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l,u,f=(a+s)/2;if(a===s)l=0,u=0;else{let h=s-a;switch(u=f<=.5?h/(s+a):h/(2-s-a),s){case i:l=(r-o)/h+(r<o?6:0);break;case r:l=(o-i)/h+2;break;case o:l=(i-r)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=f,t}getRGB(t,e=Un.workingColorSpace){return Un.fromWorkingColorSpace(Wr.copy(this),e),t.r=Wr.r,t.g=Wr.g,t.b=Wr.b,t}getStyle(t=Ui){Un.fromWorkingColorSpace(Wr.copy(this),t);let e=Wr.r,i=Wr.g,r=Wr.b;return t!==Ui?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(t,e,i){return this.getHSL(Sc),this.setHSL(Sc.h+t,Sc.s+e,Sc.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Sc),t.getHSL(Zv);let i=bm(Sc.h,Zv.h,e),r=bm(Sc.s,Zv.s,e),o=bm(Sc.l,Zv.l,e);return this.setHSL(i,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*i+o[6]*r,this.g=o[1]*e+o[4]*i+o[7]*r,this.b=o[2]*e+o[5]*i+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Wr=new jt;jt.NAMES=iV;var cne=0,Yr=class extends Rl{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cne++}),this.uuid=sa(),this.name="",this.blending=jf,this.side=Ia,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zS,this.blendDst=BS,this.blendEquation=Vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new jt(0,0,0),this.blendAlpha=0,this.depthFunc=qf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wf,this.stencilZFail=wf,this.stencilZPass=wf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==jf&&(i.blending=this.blending),this.side!==Ia&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==zS&&(i.blendSrc=this.blendSrc),this.blendDst!==BS&&(i.blendDst=this.blendDst),this.blendEquation!==Vu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==qf&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==TL&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==wf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==wf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==wf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let l=o[a];delete l.metadata,s.push(l)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let r=e.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=e[o].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},Ra=class extends Yr{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wu,this.combine=jU,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var or=new te,Kv=new pn,Di=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=MP,this.updateRanges=[],this.gpuType=oa,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)Kv.fromBufferAttribute(this,e),Kv.applyMatrix3(t),this.setXY(e,Kv.x,Kv.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix3(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyMatrix4(t),this.setXYZ(e,or.x,or.y,or.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.applyNormalMatrix(t),this.setXYZ(e,or.x,or.y,or.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)or.fromBufferAttribute(this,e),or.transformDirection(t),this.setXYZ(e,or.x,or.y,or.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=ra(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=ai(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ra(e,this.array)),e}setX(t,e){return this.normalized&&(e=ai(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ra(e,this.array)),e}setY(t,e){return this.normalized&&(e=ai(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ra(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ai(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ra(e,this.array)),e}setW(t,e){return this.normalized&&(e=ai(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=ai(e,this.array),i=ai(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=ai(e,this.array),i=ai(i,this.array),r=ai(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t*=this.itemSize,this.normalized&&(e=ai(e,this.array),i=ai(i,this.array),r=ai(r,this.array),o=ai(o,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==MP&&(t.usage=this.usage),t}};var Ey=class extends Di{constructor(t,e,i){super(new Uint16Array(t),e,i)}};var Sy=class extends Di{constructor(t,e,i){super(new Uint32Array(t),e,i)}};var Cs=class extends Di{constructor(t,e,i){super(new Float32Array(t),e,i)}},une=0,xs=new cn,SS=new pr,kf=new te,Yo=new Ji,fm=new Ji,Sr=new te,Oo=class n extends Rl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:une++}),this.uuid=sa(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(nV(t)?Sy:Ey)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Cn().getNormalMatrix(t);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return xs.makeRotationFromQuaternion(t),this.applyMatrix4(xs),this}rotateX(t){return xs.makeRotationX(t),this.applyMatrix4(xs),this}rotateY(t){return xs.makeRotationY(t),this.applyMatrix4(xs),this}rotateZ(t){return xs.makeRotationZ(t),this.applyMatrix4(xs),this}translate(t,e,i){return xs.makeTranslation(t,e,i),this.applyMatrix4(xs),this}scale(t,e,i){return xs.makeScale(t,e,i),this.applyMatrix4(xs),this}lookAt(t){return SS.lookAt(t),SS.updateMatrix(),this.applyMatrix4(SS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kf).negate(),this.translate(kf.x,kf.y,kf.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let i=[];for(let r=0,o=t.length;r<o;r++){let s=t[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Cs(i,3))}else{for(let i=0,r=e.count;i<r;i++){let o=t[i];e.setXYZ(i,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ji);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,r=e.length;i<r;i++){let o=e[i];Yo.setFromBufferAttribute(o),this.morphTargetsRelative?(Sr.addVectors(this.boundingBox.min,Yo.min),this.boundingBox.expandByPoint(Sr),Sr.addVectors(this.boundingBox.max,Yo.max),this.boundingBox.expandByPoint(Sr)):(this.boundingBox.expandByPoint(Yo.min),this.boundingBox.expandByPoint(Yo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zo);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new te,1/0);return}if(t){let i=this.boundingSphere.center;if(Yo.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let a=e[o];fm.setFromBufferAttribute(a),this.morphTargetsRelative?(Sr.addVectors(Yo.min,fm.min),Yo.expandByPoint(Sr),Sr.addVectors(Yo.max,fm.max),Yo.expandByPoint(Sr)):(Yo.expandByPoint(fm.min),Yo.expandByPoint(fm.max))}Yo.getCenter(i);let r=0;for(let o=0,s=t.count;o<s;o++)Sr.fromBufferAttribute(t,o),r=Math.max(r,i.distanceToSquared(Sr));if(e)for(let o=0,s=e.length;o<s;o++){let a=e[o],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)Sr.fromBufferAttribute(a,u),l&&(kf.fromBufferAttribute(t,u),Sr.add(kf)),r=Math.max(r,i.distanceToSquared(Sr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Di(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],l=[];for(let G=0;G<i.count;G++)a[G]=new te,l[G]=new te;let u=new te,f=new te,h=new te,m=new pn,p=new pn,y=new pn,M=new te,x=new te;function b(G,F,P){u.fromBufferAttribute(i,G),f.fromBufferAttribute(i,F),h.fromBufferAttribute(i,P),m.fromBufferAttribute(o,G),p.fromBufferAttribute(o,F),y.fromBufferAttribute(o,P),f.sub(u),h.sub(u),p.sub(m),y.sub(m);let N=1/(p.x*y.y-y.x*p.y);isFinite(N)&&(M.copy(f).multiplyScalar(y.y).addScaledVector(h,-p.y).multiplyScalar(N),x.copy(h).multiplyScalar(p.x).addScaledVector(f,-y.x).multiplyScalar(N),a[G].add(M),a[F].add(M),a[P].add(M),l[G].add(x),l[F].add(x),l[P].add(x))}let T=this.groups;T.length===0&&(T=[{start:0,count:t.count}]);for(let G=0,F=T.length;G<F;++G){let P=T[G],N=P.start,S=P.count;for(let q=N,oe=N+S;q<oe;q+=3)b(t.getX(q+0),t.getX(q+1),t.getX(q+2))}let E=new te,D=new te,L=new te,z=new te;function k(G){L.fromBufferAttribute(r,G),z.copy(L);let F=a[G];E.copy(F),E.sub(L.multiplyScalar(L.dot(F))).normalize(),D.crossVectors(z,F);let N=D.dot(l[G])<0?-1:1;s.setXYZW(G,E.x,E.y,E.z,N)}for(let G=0,F=T.length;G<F;++G){let P=T[G],N=P.start,S=P.count;for(let q=N,oe=N+S;q<oe;q+=3)k(t.getX(q+0)),k(t.getX(q+1)),k(t.getX(q+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Di(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let m=0,p=i.count;m<p;m++)i.setXYZ(m,0,0,0);let r=new te,o=new te,s=new te,a=new te,l=new te,u=new te,f=new te,h=new te;if(t)for(let m=0,p=t.count;m<p;m+=3){let y=t.getX(m+0),M=t.getX(m+1),x=t.getX(m+2);r.fromBufferAttribute(e,y),o.fromBufferAttribute(e,M),s.fromBufferAttribute(e,x),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,M),u.fromBufferAttribute(i,x),a.add(f),l.add(f),u.add(f),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(M,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let m=0,p=e.count;m<p;m+=3)r.fromBufferAttribute(e,m+0),o.fromBufferAttribute(e,m+1),s.fromBufferAttribute(e,m+2),f.subVectors(s,o),h.subVectors(r,o),f.cross(h),i.setXYZ(m+0,f.x,f.y,f.z),i.setXYZ(m+1,f.x,f.y,f.z),i.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Sr.fromBufferAttribute(t,e),Sr.normalize(),t.setXYZ(e,Sr.x,Sr.y,Sr.z)}toNonIndexed(){function t(a,l){let u=a.array,f=a.itemSize,h=a.normalized,m=new u.constructor(l.length*f),p=0,y=0;for(let M=0,x=l.length;M<x;M++){a.isInterleavedBufferAttribute?p=l[M]*a.data.stride+a.offset:p=l[M]*f;for(let b=0;b<f;b++)m[y++]=u[p++]}return new Di(m,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],u=t(l,i);e.setAttribute(a,u)}let o=this.morphAttributes;for(let a in o){let l=[],u=o[a];for(let f=0,h=u.length;f<h;f++){let m=u[f],p=t(m,i);l.push(p)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,l=s.length;a<l;a++){let u=s[a];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){let t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let l in i){let u=i[l];t.data.attributes[l]=u.toJSON(t.data)}let r={},o=!1;for(let l in this.morphAttributes){let u=this.morphAttributes[l],f=[];for(let h=0,m=u.length;h<m;h++){let p=u[h];f.push(p.toJSON(t.data))}f.length>0&&(r[l]=f,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&&this.setIndex(i.clone(e));let r=t.attributes;for(let u in r){let f=r[u];this.setAttribute(u,f.clone(e))}let o=t.morphAttributes;for(let u in o){let f=[],h=o[u];for(let m=0,p=h.length;m<p;m++)f.push(h[m].clone(e));this.morphAttributes[u]=f}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let u=0,f=s.length;u<f;u++){let h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},$L=new cn,ku=new ju,Jv=new Zo,qL=new te,Qv=new te,ey=new te,ty=new te,PS=new te,ny=new te,YL=new te,iy=new te,Ei=class extends pr{constructor(t=new Oo,e=new Ra){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(o&&a){ny.set(0,0,0);for(let l=0,u=o.length;l<u;l++){let f=a[l],h=o[l];f!==0&&(PS.fromBufferAttribute(h,t),s?ny.addScaledVector(PS,f):ny.addScaledVector(PS.sub(e),f))}e.add(ny)}return e}raycast(t,e){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Jv.copy(i.boundingSphere),Jv.applyMatrix4(o),ku.copy(t.ray).recast(t.near),!(Jv.containsPoint(ku.origin)===!1&&(ku.intersectSphere(Jv,qL)===null||ku.origin.distanceToSquared(qL)>(t.far-t.near)**2))&&($L.copy(o).invert(),ku.copy(t.ray).applyMatrix4($L),!(i.boundingBox!==null&&ku.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,ku)))}_computeIntersections(t,e,i){let r,o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,f=o.attributes.uv1,h=o.attributes.normal,m=o.groups,p=o.drawRange;if(a!==null)if(Array.isArray(s))for(let y=0,M=m.length;y<M;y++){let x=m[y],b=s[x.materialIndex],T=Math.max(x.start,p.start),E=Math.min(a.count,Math.min(x.start+x.count,p.start+p.count));for(let D=T,L=E;D<L;D+=3){let z=a.getX(D),k=a.getX(D+1),G=a.getX(D+2);r=ry(this,b,t,i,u,f,h,z,k,G),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=x.materialIndex,e.push(r))}}else{let y=Math.max(0,p.start),M=Math.min(a.count,p.start+p.count);for(let x=y,b=M;x<b;x+=3){let T=a.getX(x),E=a.getX(x+1),D=a.getX(x+2);r=ry(this,s,t,i,u,f,h,T,E,D),r&&(r.faceIndex=Math.floor(x/3),e.push(r))}}else if(l!==void 0)if(Array.isArray(s))for(let y=0,M=m.length;y<M;y++){let x=m[y],b=s[x.materialIndex],T=Math.max(x.start,p.start),E=Math.min(l.count,Math.min(x.start+x.count,p.start+p.count));for(let D=T,L=E;D<L;D+=3){let z=D,k=D+1,G=D+2;r=ry(this,b,t,i,u,f,h,z,k,G),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=x.materialIndex,e.push(r))}}else{let y=Math.max(0,p.start),M=Math.min(l.count,p.start+p.count);for(let x=y,b=M;x<b;x+=3){let T=x,E=x+1,D=x+2;r=ry(this,s,t,i,u,f,h,T,E,D),r&&(r.faceIndex=Math.floor(x/3),e.push(r))}}}};function dne(n,t,e,i,r,o,s,a){let l;if(t.side===Do?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,t.side===Ia,a),l===null)return null;iy.copy(a),iy.applyMatrix4(n.matrixWorld);let u=e.ray.origin.distanceTo(iy);return u<e.near||u>e.far?null:{distance:u,point:iy.clone(),object:n}}function ry(n,t,e,i,r,o,s,a,l,u){n.getVertexPosition(a,Qv),n.getVertexPosition(l,ey),n.getVertexPosition(u,ty);let f=dne(n,t,e,i,Qv,ey,ty,YL);if(f){let h=new te;zu.getBarycoord(YL,Qv,ey,ty,h),r&&(f.uv=zu.getInterpolatedAttribute(r,a,l,u,h,new pn)),o&&(f.uv1=zu.getInterpolatedAttribute(o,a,l,u,h,new pn)),s&&(f.normal=zu.getInterpolatedAttribute(s,a,l,u,h,new te),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));let m={a,b:l,c:u,normal:new te,materialIndex:0};zu.getNormal(Qv,ey,ty,m.normal),f.face=m,f.barycoord=h}return f}var Pm=class n extends Oo{constructor(t=1,e=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let l=[],u=[],f=[],h=[],m=0,p=0;y("z","y","x",-1,-1,i,e,t,s,o,0),y("z","y","x",1,-1,i,e,-t,s,o,1),y("x","z","y",1,1,t,i,e,r,s,2),y("x","z","y",1,-1,t,i,-e,r,s,3),y("x","y","z",1,-1,t,e,i,r,o,4),y("x","y","z",-1,-1,t,e,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new Cs(u,3)),this.setAttribute("normal",new Cs(f,3)),this.setAttribute("uv",new Cs(h,2));function y(M,x,b,T,E,D,L,z,k,G,F){let P=D/k,N=L/G,S=D/2,q=L/2,oe=z/2,ee=k+1,ge=G+1,le=0,de=0,J=new te;for(let Q=0;Q<ge;Q++){let Ie=Q*N-q;for(let Ue=0;Ue<ee;Ue++){let ke=Ue*P-S;J[M]=ke*T,J[x]=Ie*E,J[b]=oe,u.push(J.x,J.y,J.z),J[M]=0,J[x]=0,J[b]=z>0?1:-1,f.push(J.x,J.y,J.z),h.push(Ue/k),h.push(1-Q/G),le+=1}}for(let Q=0;Q<G;Q++)for(let Ie=0;Ie<k;Ie++){let Ue=m+Ie+ee*Q,ke=m+Ie+ee*(Q+1),Ce=m+(Ie+1)+ee*(Q+1),He=m+(Ie+1)+ee*Q;l.push(Ue,ke,He),l.push(ke,Ce,He),de+=6}a.addGroup(p,de,F),p+=de,m+=le}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function th(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let r=n[e][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=r.clone():Array.isArray(r)?t[e][i]=r.slice():t[e][i]=r}}return t}function po(n){let t={};for(let e=0;e<n.length;e++){let i=th(n[e]);for(let r in i)t[r]=i[r]}return t}function fne(n){let t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function rV(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Un.workingColorSpace}var hne={clone:th,merge:po},pne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mne=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,ka=class extends Yr{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pne,this.fragmentShader=mne,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=th(t.uniforms),this.uniformsGroups=fne(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}},Py=class extends pr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cn,this.projectionMatrix=new cn,this.projectionMatrixInverse=new cn,this.coordinateSystem=Ol}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Pc=new te,XL=new pn,ZL=new pn,hr=class extends Py{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=eh*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(xm*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return eh*2*Math.atan(Math.tan(xm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Pc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Pc.x,Pc.y).multiplyScalar(-t/Pc.z),Pc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Pc.x,Pc.y).multiplyScalar(-t/Pc.z)}getViewSize(t,e){return this.getViewBounds(t,XL,ZL),e.subVectors(ZL,XL)}setViewOffset(t,e,i,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(xm*.5*this.fov)/this.zoom,i=2*e,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*r/l,e-=s.offsetY*i/u,r*=s.width/l,i*=s.height/u}let a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},Nf=-90,Ff=1,PP=class extends pr{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new hr(Nf,Ff,t,e);r.layers=this.layers,this.add(r);let o=new hr(Nf,Ff,t,e);o.layers=this.layers,this.add(o);let s=new hr(Nf,Ff,t,e);s.layers=this.layers,this.add(s);let a=new hr(Nf,Ff,t,e);a.layers=this.layers,this.add(a);let l=new hr(Nf,Ff,t,e);l.layers=this.layers,this.add(l);let u=new hr(Nf,Ff,t,e);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,r,o,s,a,l]=e;for(let u of e)this.remove(u);if(t===Ol)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===Cy)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let u of e)this.add(u),u.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,l,u,f]=this.children,h=t.getRenderTarget(),m=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),y=t.xr.enabled;t.xr.enabled=!1;let M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,o),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,a),t.setRenderTarget(i,3,r),t.render(e,l),t.setRenderTarget(i,4,r),t.render(e,u),i.texture.generateMipmaps=M,t.setRenderTarget(i,5,r),t.render(e,f),t.setRenderTarget(h,m,p),t.xr.enabled=y,i.texture.needsPMREMUpdate=!0}},Ty=class extends Es{constructor(t,e,i,r,o,s,a,l,u,f){t=t!==void 0?t:[],e=e!==void 0?e:Yf,super(t,e,i,r,o,s,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},TP=class extends kl{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Ty(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Pr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Pm(5,5,5),o=new ka({name:"CubemapFromEquirect",uniforms:th(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Do,blending:Dc});o.uniforms.tEquirect.value=e;let s=new Ei(r,o),a=e.minFilter;return e.minFilter===To&&(e.minFilter=Pr),new PP(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,i,r){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,i,r);t.setRenderTarget(o)}},TS=new te,gne=new te,_ne=new Cn,Tl=class{constructor(t=new te(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let r=TS.subVectors(i,e).cross(gne.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(TS),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(i,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||_ne.getNormalMatrix(t),r=this.coplanarPoint(TS).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},Nu=new Zo,oy=new te,Tm=class{constructor(t=new Tl,e=new Tl,i=new Tl,r=new Tl,o=new Tl,s=new Tl){this.planes=[t,e,i,r,o,s]}set(t,e,i,r,o,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=Ol){let i=this.planes,r=t.elements,o=r[0],s=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],m=r[7],p=r[8],y=r[9],M=r[10],x=r[11],b=r[12],T=r[13],E=r[14],D=r[15];if(i[0].setComponents(l-o,m-u,x-p,D-b).normalize(),i[1].setComponents(l+o,m+u,x+p,D+b).normalize(),i[2].setComponents(l+s,m+f,x+y,D+T).normalize(),i[3].setComponents(l-s,m-f,x-y,D-T).normalize(),i[4].setComponents(l-a,m-h,x-M,D-E).normalize(),e===Ol)i[5].setComponents(l+a,m+h,x+M,D+E).normalize();else if(e===Cy)i[5].setComponents(a,h,M,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Nu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Nu.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Nu)}intersectsSprite(t){return Nu.center.set(0,0,0),Nu.radius=.7071067811865476,Nu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Nu)}intersectsSphere(t){let e=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let r=e[i];if(oy.x=r.normal.x>0?t.max.x:t.min.x,oy.y=r.normal.y>0?t.max.y:t.min.y,oy.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(oy)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function oV(){let n=null,t=!1,e=null,i=null;function r(o,s){e(o,s),i=n.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(r),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){n=o}}}function vne(n){let t=new WeakMap;function e(a,l){let u=a.array,f=a.usage,h=u.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,u,f),a.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,u){let f=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,f);else{h.sort((p,y)=>p.start-y.start);let m=0;for(let p=1;p<h.length;p++){let y=h[m],M=h[p];M.start<=y.start+y.count+1?y.count=Math.max(y.count,M.start+M.count-y.start):(++m,h[m]=M)}h.length=m+1;for(let p=0,y=h.length;p<y;p++){let M=h[p];n.bufferSubData(u,M.start*f.BYTES_PER_ELEMENT,f,M.start,M.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=t.get(a);l&&(n.deleteBuffer(l.buffer),t.delete(a))}function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let f=t.get(a);(!f||f.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let u=t.get(a);if(u===void 0)t.set(a,e(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:o,update:s}}var Ms=class n extends Oo{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};let o=t/2,s=e/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=t/a,m=e/l,p=[],y=[],M=[],x=[];for(let b=0;b<f;b++){let T=b*m-s;for(let E=0;E<u;E++){let D=E*h-o;y.push(D,-T,0),M.push(0,0,1),x.push(E/a),x.push(1-b/l)}}for(let b=0;b<l;b++)for(let T=0;T<a;T++){let E=T+u*b,D=T+u*(b+1),L=T+1+u*(b+1),z=T+1+u*b;p.push(E,D,z),p.push(D,L,z)}this.setIndex(p),this.setAttribute("position",new Cs(y,3)),this.setAttribute("normal",new Cs(M,3)),this.setAttribute("uv",new Cs(x,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}},yne=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,xne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Cne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mne=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,wne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ene=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Sne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Pne=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Tne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Dne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,One=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ane=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Ine=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Rne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Nne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Fne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Lne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Une=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Vne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Bne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,jne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Gne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$ne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Xne="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zne=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Kne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Qne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eie=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,tie=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,nie=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iie=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rie=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oie=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sie=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,aie=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lie=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,cie=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,uie=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,die=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fie=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hie=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,pie=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mie=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gie=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_ie=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vie=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yie=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xie=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,bie=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cie=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Mie=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wie=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Eie=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Sie=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Pie=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tie=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Die=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Oie=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Aie=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Iie=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Rie=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kie=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Nie=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Fie=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Lie=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Uie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vie=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zie=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Bie=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Hie=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,jie=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Wie=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Gie=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$ie=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qie=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Yie=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Xie=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Zie=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Kie=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Jie=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Qie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ere=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,tre=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,nre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ire=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,rre=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ore=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,sre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,are=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,lre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,cre=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ure=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dre=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,pre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_re=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,vre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yre=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Cre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Mre=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ere=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Sre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Pre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Tre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ore=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Are=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ire=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Rre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fre=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Lre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ure=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Vre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,zre=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bre=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hre=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,jre=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wre=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gre=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$re=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Yre=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xre=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Zre=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Kre=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Sn={alphahash_fragment:yne,alphahash_pars_fragment:xne,alphamap_fragment:bne,alphamap_pars_fragment:Cne,alphatest_fragment:Mne,alphatest_pars_fragment:wne,aomap_fragment:Ene,aomap_pars_fragment:Sne,batching_pars_vertex:Pne,batching_vertex:Tne,begin_vertex:Dne,beginnormal_vertex:One,bsdfs:Ane,iridescence_fragment:Ine,bumpmap_pars_fragment:Rne,clipping_planes_fragment:kne,clipping_planes_pars_fragment:Nne,clipping_planes_pars_vertex:Fne,clipping_planes_vertex:Lne,color_fragment:Une,color_pars_fragment:Vne,color_pars_vertex:zne,color_vertex:Bne,common:Hne,cube_uv_reflection_fragment:jne,defaultnormal_vertex:Wne,displacementmap_pars_vertex:Gne,displacementmap_vertex:$ne,emissivemap_fragment:qne,emissivemap_pars_fragment:Yne,colorspace_fragment:Xne,colorspace_pars_fragment:Zne,envmap_fragment:Kne,envmap_common_pars_fragment:Jne,envmap_pars_fragment:Qne,envmap_pars_vertex:eie,envmap_physical_pars_fragment:die,envmap_vertex:tie,fog_vertex:nie,fog_pars_vertex:iie,fog_fragment:rie,fog_pars_fragment:oie,gradientmap_pars_fragment:sie,lightmap_pars_fragment:aie,lights_lambert_fragment:lie,lights_lambert_pars_fragment:cie,lights_pars_begin:uie,lights_toon_fragment:fie,lights_toon_pars_fragment:hie,lights_phong_fragment:pie,lights_phong_pars_fragment:mie,lights_physical_fragment:gie,lights_physical_pars_fragment:_ie,lights_fragment_begin:vie,lights_fragment_maps:yie,lights_fragment_end:xie,logdepthbuf_fragment:bie,logdepthbuf_pars_fragment:Cie,logdepthbuf_pars_vertex:Mie,logdepthbuf_vertex:wie,map_fragment:Eie,map_pars_fragment:Sie,map_particle_fragment:Pie,map_particle_pars_fragment:Tie,metalnessmap_fragment:Die,metalnessmap_pars_fragment:Oie,morphinstance_vertex:Aie,morphcolor_vertex:Iie,morphnormal_vertex:Rie,morphtarget_pars_vertex:kie,morphtarget_vertex:Nie,normal_fragment_begin:Fie,normal_fragment_maps:Lie,normal_pars_fragment:Uie,normal_pars_vertex:Vie,normal_vertex:zie,normalmap_pars_fragment:Bie,clearcoat_normal_fragment_begin:Hie,clearcoat_normal_fragment_maps:jie,clearcoat_pars_fragment:Wie,iridescence_pars_fragment:Gie,opaque_fragment:$ie,packing:qie,premultiplied_alpha_fragment:Yie,project_vertex:Xie,dithering_fragment:Zie,dithering_pars_fragment:Kie,roughnessmap_fragment:Jie,roughnessmap_pars_fragment:Qie,shadowmap_pars_fragment:ere,shadowmap_pars_vertex:tre,shadowmap_vertex:nre,shadowmask_pars_fragment:ire,skinbase_vertex:rre,skinning_pars_vertex:ore,skinning_vertex:sre,skinnormal_vertex:are,specularmap_fragment:lre,specularmap_pars_fragment:cre,tonemapping_fragment:ure,tonemapping_pars_fragment:dre,transmission_fragment:fre,transmission_pars_fragment:hre,uv_pars_fragment:pre,uv_pars_vertex:mre,uv_vertex:gre,worldpos_vertex:_re,background_vert:vre,background_frag:yre,backgroundCube_vert:xre,backgroundCube_frag:bre,cube_vert:Cre,cube_frag:Mre,depth_vert:wre,depth_frag:Ere,distanceRGBA_vert:Sre,distanceRGBA_frag:Pre,equirect_vert:Tre,equirect_frag:Dre,linedashed_vert:Ore,linedashed_frag:Are,meshbasic_vert:Ire,meshbasic_frag:Rre,meshlambert_vert:kre,meshlambert_frag:Nre,meshmatcap_vert:Fre,meshmatcap_frag:Lre,meshnormal_vert:Ure,meshnormal_frag:Vre,meshphong_vert:zre,meshphong_frag:Bre,meshphysical_vert:Hre,meshphysical_frag:jre,meshtoon_vert:Wre,meshtoon_frag:Gre,points_vert:$re,points_frag:qre,shadow_vert:Yre,shadow_frag:Xre,sprite_vert:Zre,sprite_frag:Kre},at={common:{diffuse:{value:new jt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Cn},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Cn}},envmap:{envMap:{value:null},envMapRotation:{value:new Cn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Cn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Cn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Cn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Cn},normalScale:{value:new pn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Cn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Cn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Cn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Cn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0},uvTransform:{value:new Cn}},sprite:{diffuse:{value:new jt(16777215)},opacity:{value:1},center:{value:new pn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Cn},alphaMap:{value:null},alphaMapTransform:{value:new Cn},alphaTest:{value:0}}},Oa={basic:{uniforms:po([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:Sn.meshbasic_vert,fragmentShader:Sn.meshbasic_frag},lambert:{uniforms:po([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new jt(0)}}]),vertexShader:Sn.meshlambert_vert,fragmentShader:Sn.meshlambert_frag},phong:{uniforms:po([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new jt(0)},specular:{value:new jt(1118481)},shininess:{value:30}}]),vertexShader:Sn.meshphong_vert,fragmentShader:Sn.meshphong_frag},standard:{uniforms:po([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag},toon:{uniforms:po([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new jt(0)}}]),vertexShader:Sn.meshtoon_vert,fragmentShader:Sn.meshtoon_frag},matcap:{uniforms:po([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:Sn.meshmatcap_vert,fragmentShader:Sn.meshmatcap_frag},points:{uniforms:po([at.points,at.fog]),vertexShader:Sn.points_vert,fragmentShader:Sn.points_frag},dashed:{uniforms:po([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sn.linedashed_vert,fragmentShader:Sn.linedashed_frag},depth:{uniforms:po([at.common,at.displacementmap]),vertexShader:Sn.depth_vert,fragmentShader:Sn.depth_frag},normal:{uniforms:po([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:Sn.meshnormal_vert,fragmentShader:Sn.meshnormal_frag},sprite:{uniforms:po([at.sprite,at.fog]),vertexShader:Sn.sprite_vert,fragmentShader:Sn.sprite_frag},background:{uniforms:{uvTransform:{value:new Cn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Sn.background_vert,fragmentShader:Sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Cn}},vertexShader:Sn.backgroundCube_vert,fragmentShader:Sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Sn.cube_vert,fragmentShader:Sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sn.equirect_vert,fragmentShader:Sn.equirect_frag},distanceRGBA:{uniforms:po([at.common,at.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sn.distanceRGBA_vert,fragmentShader:Sn.distanceRGBA_frag},shadow:{uniforms:po([at.lights,at.fog,{color:{value:new jt(0)},opacity:{value:1}}]),vertexShader:Sn.shadow_vert,fragmentShader:Sn.shadow_frag}};Oa.physical={uniforms:po([Oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Cn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Cn},clearcoatNormalScale:{value:new pn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Cn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Cn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Cn},sheen:{value:0},sheenColor:{value:new jt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Cn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Cn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Cn},transmissionSamplerSize:{value:new pn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Cn},attenuationDistance:{value:0},attenuationColor:{value:new jt(0)},specularColor:{value:new jt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Cn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Cn},anisotropyVector:{value:new pn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Cn}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag};var sy={r:0,b:0,g:0},Fu=new Wu,Jre=new cn;function Qre(n,t,e,i,r,o,s){let a=new jt(0),l=o===!0?0:1,u,f,h=null,m=0,p=null;function y(T){let E=T.isScene===!0?T.background:null;return E&&E.isTexture&&(E=(T.backgroundBlurriness>0?e:t).get(E)),E}function M(T){let E=!1,D=y(T);D===null?b(a,l):D&&D.isColor&&(b(D,1),E=!0);let L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,s):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(T,E){let D=y(E);D&&(D.isCubeTexture||D.mapping===Xy)?(f===void 0&&(f=new Ei(new Pm(1,1,1),new ka({name:"BackgroundCubeMaterial",uniforms:th(Oa.backgroundCube.uniforms),vertexShader:Oa.backgroundCube.vertexShader,fragmentShader:Oa.backgroundCube.fragmentShader,side:Do,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(L,z,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Fu.copy(E.backgroundRotation),Fu.x*=-1,Fu.y*=-1,Fu.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(Fu.y*=-1,Fu.z*=-1),f.material.uniforms.envMap.value=D,f.material.uniforms.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(Jre.makeRotationFromEuler(Fu)),f.material.toneMapped=Un.getTransfer(D.colorSpace)!==hi,(h!==D||m!==D.version||p!==n.toneMapping)&&(f.material.needsUpdate=!0,h=D,m=D.version,p=n.toneMapping),f.layers.enableAll(),T.unshift(f,f.geometry,f.material,0,0,null)):D&&D.isTexture&&(u===void 0&&(u=new Ei(new Ms(2,2),new ka({name:"BackgroundMaterial",uniforms:th(Oa.background.uniforms),vertexShader:Oa.background.vertexShader,fragmentShader:Oa.background.fragmentShader,side:Ia,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=D,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.toneMapped=Un.getTransfer(D.colorSpace)!==hi,D.matrixAutoUpdate===!0&&D.updateMatrix(),u.material.uniforms.uvTransform.value.copy(D.matrix),(h!==D||m!==D.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,h=D,m=D.version,p=n.toneMapping),u.layers.enableAll(),T.unshift(u,u.geometry,u.material,0,0,null))}function b(T,E){T.getRGB(sy,rV(n)),i.buffers.color.setClear(sy.r,sy.g,sy.b,E,s)}return{getClearColor:function(){return a},setClearColor:function(T,E=1){a.set(T),l=E,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(T){l=T,b(a,l)},render:M,addToRenderList:x}}function eoe(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null),o=r,s=!1;function a(P,N,S,q,oe){let ee=!1,ge=h(q,S,N);o!==ge&&(o=ge,u(o.object)),ee=p(P,q,S,oe),ee&&y(P,q,S,oe),oe!==null&&t.update(oe,n.ELEMENT_ARRAY_BUFFER),(ee||s)&&(s=!1,D(P,N,S,q),oe!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(oe).buffer))}function l(){return n.createVertexArray()}function u(P){return n.bindVertexArray(P)}function f(P){return n.deleteVertexArray(P)}function h(P,N,S){let q=S.wireframe===!0,oe=i[P.id];oe===void 0&&(oe={},i[P.id]=oe);let ee=oe[N.id];ee===void 0&&(ee={},oe[N.id]=ee);let ge=ee[q];return ge===void 0&&(ge=m(l()),ee[q]=ge),ge}function m(P){let N=[],S=[],q=[];for(let oe=0;oe<e;oe++)N[oe]=0,S[oe]=0,q[oe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:S,attributeDivisors:q,object:P,attributes:{},index:null}}function p(P,N,S,q){let oe=o.attributes,ee=N.attributes,ge=0,le=S.getAttributes();for(let de in le)if(le[de].location>=0){let Q=oe[de],Ie=ee[de];if(Ie===void 0&&(de==="instanceMatrix"&&P.instanceMatrix&&(Ie=P.instanceMatrix),de==="instanceColor"&&P.instanceColor&&(Ie=P.instanceColor)),Q===void 0||Q.attribute!==Ie||Ie&&Q.data!==Ie.data)return!0;ge++}return o.attributesNum!==ge||o.index!==q}function y(P,N,S,q){let oe={},ee=N.attributes,ge=0,le=S.getAttributes();for(let de in le)if(le[de].location>=0){let Q=ee[de];Q===void 0&&(de==="instanceMatrix"&&P.instanceMatrix&&(Q=P.instanceMatrix),de==="instanceColor"&&P.instanceColor&&(Q=P.instanceColor));let Ie={};Ie.attribute=Q,Q&&Q.data&&(Ie.data=Q.data),oe[de]=Ie,ge++}o.attributes=oe,o.attributesNum=ge,o.index=q}function M(){let P=o.newAttributes;for(let N=0,S=P.length;N<S;N++)P[N]=0}function x(P){b(P,0)}function b(P,N){let S=o.newAttributes,q=o.enabledAttributes,oe=o.attributeDivisors;S[P]=1,q[P]===0&&(n.enableVertexAttribArray(P),q[P]=1),oe[P]!==N&&(n.vertexAttribDivisor(P,N),oe[P]=N)}function T(){let P=o.newAttributes,N=o.enabledAttributes;for(let S=0,q=N.length;S<q;S++)N[S]!==P[S]&&(n.disableVertexAttribArray(S),N[S]=0)}function E(P,N,S,q,oe,ee,ge){ge===!0?n.vertexAttribIPointer(P,N,S,oe,ee):n.vertexAttribPointer(P,N,S,q,oe,ee)}function D(P,N,S,q){M();let oe=q.attributes,ee=S.getAttributes(),ge=N.defaultAttributeValues;for(let le in ee){let de=ee[le];if(de.location>=0){let J=oe[le];if(J===void 0&&(le==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),le==="instanceColor"&&P.instanceColor&&(J=P.instanceColor)),J!==void 0){let Q=J.normalized,Ie=J.itemSize,Ue=t.get(J);if(Ue===void 0)continue;let ke=Ue.buffer,Ce=Ue.type,He=Ue.bytesPerElement,$e=Ce===n.INT||Ce===n.UNSIGNED_INT||J.gpuType===iT;if(J.isInterleavedBufferAttribute){let Ve=J.data,mt=Ve.stride,pt=J.offset;if(Ve.isInstancedInterleavedBuffer){for(let Ut=0;Ut<de.locationSize;Ut++)b(de.location+Ut,Ve.meshPerAttribute);P.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=Ve.meshPerAttribute*Ve.count)}else for(let Ut=0;Ut<de.locationSize;Ut++)x(de.location+Ut);n.bindBuffer(n.ARRAY_BUFFER,ke);for(let Ut=0;Ut<de.locationSize;Ut++)E(de.location+Ut,Ie/de.locationSize,Ce,Q,mt*He,(pt+Ie/de.locationSize*Ut)*He,$e)}else{if(J.isInstancedBufferAttribute){for(let Ve=0;Ve<de.locationSize;Ve++)b(de.location+Ve,J.meshPerAttribute);P.isInstancedMesh!==!0&&q._maxInstanceCount===void 0&&(q._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let Ve=0;Ve<de.locationSize;Ve++)x(de.location+Ve);n.bindBuffer(n.ARRAY_BUFFER,ke);for(let Ve=0;Ve<de.locationSize;Ve++)E(de.location+Ve,Ie/de.locationSize,Ce,Q,Ie*He,Ie/de.locationSize*Ve*He,$e)}}else if(ge!==void 0){let Q=ge[le];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(de.location,Q);break;case 3:n.vertexAttrib3fv(de.location,Q);break;case 4:n.vertexAttrib4fv(de.location,Q);break;default:n.vertexAttrib1fv(de.location,Q)}}}}T()}function L(){G();for(let P in i){let N=i[P];for(let S in N){let q=N[S];for(let oe in q)f(q[oe].object),delete q[oe];delete N[S]}delete i[P]}}function z(P){if(i[P.id]===void 0)return;let N=i[P.id];for(let S in N){let q=N[S];for(let oe in q)f(q[oe].object),delete q[oe];delete N[S]}delete i[P.id]}function k(P){for(let N in i){let S=i[N];if(S[P.id]===void 0)continue;let q=S[P.id];for(let oe in q)f(q[oe].object),delete q[oe];delete S[P.id]}}function G(){F(),s=!0,o!==r&&(o=r,u(o.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:G,resetDefaultState:F,dispose:L,releaseStatesOfGeometry:z,releaseStatesOfProgram:k,initAttributes:M,enableAttribute:x,disableUnusedAttributes:T}}function toe(n,t,e){let i;function r(u){i=u}function o(u,f){n.drawArrays(i,u,f),e.update(f,i,1)}function s(u,f,h){h!==0&&(n.drawArraysInstanced(i,u,f,h),e.update(f,i,h))}function a(u,f,h){if(h===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,f,0,h);let p=0;for(let y=0;y<h;y++)p+=f[y];e.update(p,i,1)}function l(u,f,h,m){if(h===0)return;let p=t.get("WEBGL_multi_draw");if(p===null)for(let y=0;y<u.length;y++)s(u[y],f[y],m[y]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,f,0,m,0,h);let y=0;for(let M=0;M<h;M++)y+=f[M]*m[M];e.update(y,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function noe(n,t,e,i){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let k=t.get("EXT_texture_filter_anisotropic");r=n.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(k){return!(k!==bs&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){let G=k===Nm&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(k!==Il&&i.convert(k)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==oa&&!G)}function l(k){if(k==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=e.precision!==void 0?e.precision:"highp",f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);let h=e.logarithmicDepthBuffer===!0,m=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=n.getParameter(n.MAX_TEXTURE_SIZE),x=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),T=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),L=y>0,z=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:m,maxTextures:p,maxVertexTextures:y,maxTextureSize:M,maxCubemapSize:x,maxAttributes:b,maxVertexUniforms:T,maxVaryings:E,maxFragmentUniforms:D,vertexTextures:L,maxSamples:z}}function ioe(n){let t=this,e=null,i=0,r=!1,o=!1,s=new Tl,a=new Cn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){let p=h.length!==0||m||i!==0||r;return r=m,i=h.length,p},this.beginShadows=function(){o=!0,f(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,m){e=f(h,m,0)},this.setState=function(h,m,p){let y=h.clippingPlanes,M=h.clipIntersection,x=h.clipShadows,b=n.get(h);if(!r||y===null||y.length===0||o&&!x)o?f(null):u();else{let T=o?0:i,E=T*4,D=b.clippingState||null;l.value=D,D=f(y,m,E,p);for(let L=0;L!==E;++L)D[L]=e[L];b.clippingState=D,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=T}};function u(){l.value!==e&&(l.value=e,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function f(h,m,p,y){let M=h!==null?h.length:0,x=null;if(M!==0){if(x=l.value,y!==!0||x===null){let b=p+M*4,T=m.matrixWorldInverse;a.getNormalMatrix(T),(x===null||x.length<b)&&(x=new Float32Array(b));for(let E=0,D=p;E!==M;++E,D+=4)s.copy(h[E]).applyMatrix4(T,a),s.normal.toArray(x,D),x[D+3]=s.constant}l.value=x,l.needsUpdate=!0}return t.numPlanes=M,t.numIntersection=0,x}}function roe(n){let t=new WeakMap;function e(s,a){return a===XS?s.mapping=Yf:a===ZS&&(s.mapping=Xf),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===XS||a===ZS)if(t.has(s)){let l=t.get(s).texture;return e(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new TP(l.height);return u.fromEquirectangularTexture(n,s),t.set(s,u),s.addEventListener("dispose",r),e(u.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}var Na=class extends Py{constructor(t=-1,e=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-t,s=i+t,a=r+e,l=r-e;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},Hf=4,KL=[.125,.215,.35,.446,.526,.582],Bu=20,DS=new Na,JL=new jt,OS=null,AS=0,IS=0,RS=!1,Uu=(1+Math.sqrt(5))/2,Lf=1/Uu,QL=[new te(-Uu,Lf,0),new te(Uu,Lf,0),new te(-Lf,0,Uu),new te(Lf,0,Uu),new te(0,Uu,-Lf),new te(0,Uu,Lf),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)],Dy=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){OS=this._renderer.getRenderTarget(),AS=this._renderer.getActiveCubeFace(),IS=this._renderer.getActiveMipmapLevel(),RS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,i,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(OS,AS,IS),this._renderer.xr.enabled=RS,t.scissorTest=!1,ay(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Yf||t.mapping===Xf?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),OS=this._renderer.getRenderTarget(),AS=this._renderer.getActiveCubeFace(),IS=this._renderer.getActiveMipmapLevel(),RS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Pr,minFilter:Pr,generateMipmaps:!1,type:Nm,format:bs,colorSpace:Zr,depthBuffer:!1},r=eU(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eU(t,e,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ooe(o)),this._blurMaterial=soe(o,t,e)}return r}_compileMaterial(t){let e=new Ei(this._lodPlanes[0],t);this._renderer.compile(e,DS)}_sceneToCubeUV(t,e,i,r){let a=new hr(90,1,e,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,m=f.toneMapping;f.getClearColor(JL),f.toneMapping=Oc,f.autoClear=!1;let p=new Ra({name:"PMREM.Background",side:Do,depthWrite:!1,depthTest:!1}),y=new Ei(new Pm,p),M=!1,x=t.background;x?x.isColor&&(p.color.copy(x),t.background=null,M=!0):(p.color.copy(JL),M=!0);for(let b=0;b<6;b++){let T=b%3;T===0?(a.up.set(0,l[b],0),a.lookAt(u[b],0,0)):T===1?(a.up.set(0,0,l[b]),a.lookAt(0,u[b],0)):(a.up.set(0,l[b],0),a.lookAt(0,0,u[b]));let E=this._cubeSize;ay(r,T*E,b>2?E:0,E,E),f.setRenderTarget(r),M&&f.render(y,a),f.render(t,a)}y.geometry.dispose(),y.material.dispose(),f.toneMapping=m,f.autoClear=h,t.background=x}_textureToCubeUV(t,e){let i=this._renderer,r=t.mapping===Yf||t.mapping===Xf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=nU()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tU());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new Ei(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=t;let l=this._cubeSize;ay(e,0,0,3*l,2*l),i.setRenderTarget(e),i.render(s,DS)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=QL[(r-o-1)%QL.length];this._blur(t,o-1,o,s,a)}e.autoClear=i}_blur(t,e,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",o),this._halfBlur(s,t,i,i,r,"longitudinal",o)}_halfBlur(t,e,i,r,o,s,a){let l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,h=new Ei(this._lodPlanes[r],u),m=u.uniforms,p=this._sizeLods[i]-1,y=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*Bu-1),M=o/y,x=isFinite(o)?1+Math.floor(f*M):Bu;x>Bu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Bu}`);let b=[],T=0;for(let k=0;k<Bu;++k){let G=k/M,F=Math.exp(-G*G/2);b.push(F),k===0?T+=F:k<x&&(T+=2*F)}for(let k=0;k<b.length;k++)b[k]=b[k]/T;m.envMap.value=t.texture,m.samples.value=x,m.weights.value=b,m.latitudinal.value=s==="latitudinal",a&&(m.poleAxis.value=a);let{_lodMax:E}=this;m.dTheta.value=y,m.mipInt.value=E-i;let D=this._sizeLods[r],L=3*D*(r>E-Hf?r-E+Hf:0),z=4*(this._cubeSize-D);ay(e,L,z,3*D,2*D),l.setRenderTarget(e),l.render(h,DS)}};function ooe(n){let t=[],e=[],i=[],r=n,o=n-Hf+1+KL.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);e.push(a);let l=1/a;s>n-Hf?l=KL[s-n+Hf-1]:s===0&&(l=0),i.push(l);let u=1/(a-2),f=-u,h=1+u,m=[f,f,h,f,h,h,f,f,h,h,f,h],p=6,y=6,M=3,x=2,b=1,T=new Float32Array(M*y*p),E=new Float32Array(x*y*p),D=new Float32Array(b*y*p);for(let z=0;z<p;z++){let k=z%3*2/3-1,G=z>2?0:-1,F=[k,G,0,k+2/3,G,0,k+2/3,G+1,0,k,G,0,k+2/3,G+1,0,k,G+1,0];T.set(F,M*y*z),E.set(m,x*y*z);let P=[z,z,z,z,z,z];D.set(P,b*y*z)}let L=new Oo;L.setAttribute("position",new Di(T,M)),L.setAttribute("uv",new Di(E,x)),L.setAttribute("faceIndex",new Di(D,b)),t.push(L),r>Hf&&r--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function eU(n,t,e){let i=new kl(n,t,e);return i.texture.mapping=Xy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ay(n,t,e,i,r){n.viewport.set(t,e,i,r),n.scissor.set(t,e,i,r)}function soe(n,t,e){let i=new Float32Array(Bu),r=new te(0,1,0);return new ka({name:"SphericalGaussianBlur",defines:{n:Bu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:hT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function tU(){return new ka({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function nU(){return new ka({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dc,depthTest:!1,depthWrite:!1})}function hT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function aoe(n){let t=new WeakMap,e=null;function i(a){if(a&&a.isTexture){let l=a.mapping,u=l===XS||l===ZS,f=l===Yf||l===Xf;if(u||f){let h=t.get(a),m=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return e===null&&(e=new Dy(n)),h=u?e.fromEquirectangular(a,h):e.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(h!==void 0)return h.texture;{let p=a.image;return u&&p&&p.height>0||f&&p&&r(p)?(e===null&&(e=new Dy(n)),h=u?e.fromEquirectangular(a):e.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",o),h.texture):null}}}return a}function r(a){let l=0,u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function o(a){let l=a.target;l.removeEventListener("dispose",o);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:s}}function loe(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return t[i]=r,r}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){let r=e(i);return r===null&&_m("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function coe(n,t,e,i){let r={},o=new WeakMap;function s(h){let m=h.target;m.index!==null&&t.remove(m.index);for(let y in m.attributes)t.remove(m.attributes[y]);for(let y in m.morphAttributes){let M=m.morphAttributes[y];for(let x=0,b=M.length;x<b;x++)t.remove(M[x])}m.removeEventListener("dispose",s),delete r[m.id];let p=o.get(m);p&&(t.remove(p),o.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,e.memory.geometries--}function a(h,m){return r[m.id]===!0||(m.addEventListener("dispose",s),r[m.id]=!0,e.memory.geometries++),m}function l(h){let m=h.attributes;for(let y in m)t.update(m[y],n.ARRAY_BUFFER);let p=h.morphAttributes;for(let y in p){let M=p[y];for(let x=0,b=M.length;x<b;x++)t.update(M[x],n.ARRAY_BUFFER)}}function u(h){let m=[],p=h.index,y=h.attributes.position,M=0;if(p!==null){let T=p.array;M=p.version;for(let E=0,D=T.length;E<D;E+=3){let L=T[E+0],z=T[E+1],k=T[E+2];m.push(L,z,z,k,k,L)}}else if(y!==void 0){let T=y.array;M=y.version;for(let E=0,D=T.length/3-1;E<D;E+=3){let L=E+0,z=E+1,k=E+2;m.push(L,z,z,k,k,L)}}else return;let x=new(nV(m)?Sy:Ey)(m,1);x.version=M;let b=o.get(h);b&&t.remove(b),o.set(h,x)}function f(h){let m=o.get(h);if(m){let p=h.index;p!==null&&m.version<p.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function uoe(n,t,e){let i;function r(m){i=m}let o,s;function a(m){o=m.type,s=m.bytesPerElement}function l(m,p){n.drawElements(i,p,o,m*s),e.update(p,i,1)}function u(m,p,y){y!==0&&(n.drawElementsInstanced(i,p,o,m*s,y),e.update(p,i,y))}function f(m,p,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,o,m,0,y);let x=0;for(let b=0;b<y;b++)x+=p[b];e.update(x,i,1)}function h(m,p,y,M){if(y===0)return;let x=t.get("WEBGL_multi_draw");if(x===null)for(let b=0;b<m.length;b++)u(m[b]/s,p[b],M[b]);else{x.multiDrawElementsInstancedWEBGL(i,p,0,o,m,0,M,0,y);let b=0;for(let T=0;T<y;T++)b+=p[T]*M[T];e.update(b,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function doe(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(e.calls++,s){case n.TRIANGLES:e.triangles+=a*(o/3);break;case n.LINES:e.lines+=a*(o/2);break;case n.LINE_STRIP:e.lines+=a*(o-1);break;case n.LINE_LOOP:e.lines+=a*o;break;case n.POINTS:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:i}}function foe(n,t,e){let i=new WeakMap,r=new _n;function o(s,a,l){let u=s.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=f!==void 0?f.length:0,m=i.get(a);if(m===void 0||m.count!==h){let P=function(){G.dispose(),i.delete(a),a.removeEventListener("dispose",P)};var p=P;m!==void 0&&m.texture.dispose();let y=a.morphAttributes.position!==void 0,M=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,b=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],E=a.morphAttributes.color||[],D=0;y===!0&&(D=1),M===!0&&(D=2),x===!0&&(D=3);let L=a.attributes.position.count*D,z=1;L>t.maxTextureSize&&(z=Math.ceil(L/t.maxTextureSize),L=t.maxTextureSize);let k=new Float32Array(L*z*4*h),G=new wy(k,L,z,h);G.type=oa,G.needsUpdate=!0;let F=D*4;for(let N=0;N<h;N++){let S=b[N],q=T[N],oe=E[N],ee=L*z*4*N;for(let ge=0;ge<S.count;ge++){let le=ge*F;y===!0&&(r.fromBufferAttribute(S,ge),k[ee+le+0]=r.x,k[ee+le+1]=r.y,k[ee+le+2]=r.z,k[ee+le+3]=0),M===!0&&(r.fromBufferAttribute(q,ge),k[ee+le+4]=r.x,k[ee+le+5]=r.y,k[ee+le+6]=r.z,k[ee+le+7]=0),x===!0&&(r.fromBufferAttribute(oe,ge),k[ee+le+8]=r.x,k[ee+le+9]=r.y,k[ee+le+10]=r.z,k[ee+le+11]=oe.itemSize===4?r.w:1)}}m={count:h,texture:G,size:new pn(L,z)},i.set(a,m),a.addEventListener("dispose",P)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,e);else{let y=0;for(let x=0;x<u.length;x++)y+=u[x];let M=a.morphTargetsRelative?1:1-y;l.getUniforms().setValue(n,"morphTargetBaseInfluence",M),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,e),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:o}}function hoe(n,t,e,i){let r=new WeakMap;function o(l){let u=i.render.frame,f=l.geometry,h=t.get(l,f);if(r.get(h)!==u&&(t.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(e.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&e.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){let m=l.skeleton;r.get(m)!==u&&(m.update(),r.set(m,u))}return h}function s(){r=new WeakMap}function a(l){let u=l.target;u.removeEventListener("dispose",a),e.remove(u.instanceMatrix),u.instanceColor!==null&&e.remove(u.instanceColor)}return{update:o,dispose:s}}var Oy=class extends Es{constructor(t,e,i,r,o,s,a,l,u,f=Wf){if(f!==Wf&&f!==Kf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===Wf&&(i=Hu),i===void 0&&f===Kf&&(i=Zf),super(null,r,o,s,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:$r,this.minFilter=l!==void 0?l:$r,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},sV=new Es,iU=new Oy(1,1),aV=new wy,lV=new SP,cV=new Ty,rU=[],oU=[],sU=new Float32Array(16),aU=new Float32Array(9),lU=new Float32Array(4);function ah(n,t,e){let i=n[0];if(i<=0||i>0)return n;let r=t*e,o=rU[r];if(o===void 0&&(o=new Float32Array(r),rU[r]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,n[s].toArray(o,a)}return o}function mr(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function gr(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function Jy(n,t){let e=oU[t];e===void 0&&(e=new Int32Array(t),oU[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function poe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function moe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(mr(e,t))return;n.uniform2fv(this.addr,t),gr(e,t)}}function goe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(mr(e,t))return;n.uniform3fv(this.addr,t),gr(e,t)}}function _oe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(mr(e,t))return;n.uniform4fv(this.addr,t),gr(e,t)}}function voe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(mr(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),gr(e,t)}else{if(mr(e,i))return;lU.set(i),n.uniformMatrix2fv(this.addr,!1,lU),gr(e,i)}}function yoe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(mr(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),gr(e,t)}else{if(mr(e,i))return;aU.set(i),n.uniformMatrix3fv(this.addr,!1,aU),gr(e,i)}}function xoe(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(mr(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),gr(e,t)}else{if(mr(e,i))return;sU.set(i),n.uniformMatrix4fv(this.addr,!1,sU),gr(e,i)}}function boe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function Coe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(mr(e,t))return;n.uniform2iv(this.addr,t),gr(e,t)}}function Moe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(mr(e,t))return;n.uniform3iv(this.addr,t),gr(e,t)}}function woe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(mr(e,t))return;n.uniform4iv(this.addr,t),gr(e,t)}}function Eoe(n,t){let e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function Soe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(mr(e,t))return;n.uniform2uiv(this.addr,t),gr(e,t)}}function Poe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(mr(e,t))return;n.uniform3uiv(this.addr,t),gr(e,t)}}function Toe(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(mr(e,t))return;n.uniform4uiv(this.addr,t),gr(e,t)}}function Doe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(iU.compareFunction=tV,o=iU):o=sV,e.setTexture2D(t||o,r)}function Ooe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture3D(t||lV,r)}function Aoe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTextureCube(t||cV,r)}function Ioe(n,t,e){let i=this.cache,r=e.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),e.setTexture2DArray(t||aV,r)}function Roe(n){switch(n){case 5126:return poe;case 35664:return moe;case 35665:return goe;case 35666:return _oe;case 35674:return voe;case 35675:return yoe;case 35676:return xoe;case 5124:case 35670:return boe;case 35667:case 35671:return Coe;case 35668:case 35672:return Moe;case 35669:case 35673:return woe;case 5125:return Eoe;case 36294:return Soe;case 36295:return Poe;case 36296:return Toe;case 35678:case 36198:case 36298:case 36306:case 35682:return Doe;case 35679:case 36299:case 36307:return Ooe;case 35680:case 36300:case 36308:case 36293:return Aoe;case 36289:case 36303:case 36311:case 36292:return Ioe}}function koe(n,t){n.uniform1fv(this.addr,t)}function Noe(n,t){let e=ah(t,this.size,2);n.uniform2fv(this.addr,e)}function Foe(n,t){let e=ah(t,this.size,3);n.uniform3fv(this.addr,e)}function Loe(n,t){let e=ah(t,this.size,4);n.uniform4fv(this.addr,e)}function Uoe(n,t){let e=ah(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function Voe(n,t){let e=ah(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function zoe(n,t){let e=ah(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function Boe(n,t){n.uniform1iv(this.addr,t)}function Hoe(n,t){n.uniform2iv(this.addr,t)}function joe(n,t){n.uniform3iv(this.addr,t)}function Woe(n,t){n.uniform4iv(this.addr,t)}function Goe(n,t){n.uniform1uiv(this.addr,t)}function $oe(n,t){n.uniform2uiv(this.addr,t)}function qoe(n,t){n.uniform3uiv(this.addr,t)}function Yoe(n,t){n.uniform4uiv(this.addr,t)}function Xoe(n,t,e){let i=this.cache,r=t.length,o=Jy(e,r);mr(i,o)||(n.uniform1iv(this.addr,o),gr(i,o));for(let s=0;s!==r;++s)e.setTexture2D(t[s]||sV,o[s])}function Zoe(n,t,e){let i=this.cache,r=t.length,o=Jy(e,r);mr(i,o)||(n.uniform1iv(this.addr,o),gr(i,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||lV,o[s])}function Koe(n,t,e){let i=this.cache,r=t.length,o=Jy(e,r);mr(i,o)||(n.uniform1iv(this.addr,o),gr(i,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||cV,o[s])}function Joe(n,t,e){let i=this.cache,r=t.length,o=Jy(e,r);mr(i,o)||(n.uniform1iv(this.addr,o),gr(i,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||aV,o[s])}function Qoe(n){switch(n){case 5126:return koe;case 35664:return Noe;case 35665:return Foe;case 35666:return Loe;case 35674:return Uoe;case 35675:return Voe;case 35676:return zoe;case 5124:case 35670:return Boe;case 35667:case 35671:return Hoe;case 35668:case 35672:return joe;case 35669:case 35673:return Woe;case 5125:return Goe;case 36294:return $oe;case 36295:return qoe;case 36296:return Yoe;case 35678:case 36198:case 36298:case 36306:case 35682:return Xoe;case 35679:case 36299:case 36307:return Zoe;case 35680:case 36300:case 36308:case 36293:return Koe;case 36289:case 36303:case 36311:case 36292:return Joe}}var DP=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=Roe(e.type)}},OP=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=Qoe(e.type)}},AP=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(t,e[a.id],i)}}},kS=/(\w+)(\])?(\[|\.)?/g;function cU(n,t){n.seq.push(t),n.map[t.id]=t}function ese(n,t,e){let i=n.name,r=i.length;for(kS.lastIndex=0;;){let o=kS.exec(i),s=kS.lastIndex,a=o[1],l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){cU(e,u===void 0?new DP(a,n,t):new OP(a,n,t));break}else{let h=e.map[a];h===void 0&&(h=new AP(a),cU(e,h)),e=h}}}var $f=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=t.getActiveUniform(e,r),s=t.getUniformLocation(e,o.name);ese(o,s,this)}}setValue(t,e,i,r){let o=this.map[e];o!==void 0&&o.setValue(t,i,r)}setOptional(t,e,i){let r=e[i];r!==void 0&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let o=0,s=e.length;o!==s;++o){let a=e[o],l=i[a.id];l.needsUpdate!==!1&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){let i=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&i.push(s)}return i}};function uU(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var tse=37297,nse=0;function ise(n,t){let e=n.split(`
`),i=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return i.join(`
`)}var dU=new Cn;function rse(n){Un._getMatrix(dU,Un.workingColorSpace,n);let t=`mat3( ${dU.elements.map(e=>e.toFixed(4))} )`;switch(Un.getTransfer(n)){case Ky:return[t,"LinearTransferOETF"];case hi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function fU(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),r=n.getShaderInfoLog(t).trim();if(i&&r==="")return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let s=parseInt(o[1]);return e.toUpperCase()+`

`+r+`

`+ise(n.getShaderSource(t),s)}else return r}function ose(n,t){let e=rse(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function sse(n,t){let e;switch(t){case hte:e="Linear";break;case pte:e="Reinhard";break;case mte:e="Cineon";break;case gte:e="ACESFilmic";break;case vte:e="AgX";break;case yte:e="Neutral";break;case _te:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var ly=new te;function ase(){Un.getLuminanceCoefficients(ly);let n=ly.x.toFixed(4),t=ly.y.toFixed(4),e=ly.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function lse(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(vm).join(`
`)}function cse(n){let t=[];for(let e in n){let i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function use(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(t,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:n.getAttribLocation(t,s),locationSize:a}}return e}function vm(n){return n!==""}function hU(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function pU(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var dse=/^[ \t]*#include +<([\w\d./]+)>/gm;function IP(n){return n.replace(dse,hse)}var fse=new Map;function hse(n,t){let e=Sn[t];if(e===void 0){let i=fse.get(t);if(i!==void 0)e=Sn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return IP(e)}var pse=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mU(n){return n.replace(pse,mse)}function mse(n,t,e,i){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function gU(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function gse(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===HU?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===tT?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Pl&&(t="SHADOWMAP_TYPE_VSM"),t}function _se(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Yf:case Xf:t="ENVMAP_TYPE_CUBE";break;case Xy:t="ENVMAP_TYPE_CUBE_UV";break}return t}function vse(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Xf:t="ENVMAP_MODE_REFRACTION";break}return t}function yse(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jU:t="ENVMAP_BLENDING_MULTIPLY";break;case dte:t="ENVMAP_BLENDING_MIX";break;case fte:t="ENVMAP_BLENDING_ADD";break}return t}function xse(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function bse(n,t,e,i){let r=n.getContext(),o=e.defines,s=e.vertexShader,a=e.fragmentShader,l=gse(e),u=_se(e),f=vse(e),h=yse(e),m=xse(e),p=lse(e),y=cse(o),M=r.createProgram(),x,b,T=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(x=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y].filter(vm).join(`
`),x.length>0&&(x+=`
`),b=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y].filter(vm).join(`
`),b.length>0&&(b+=`
`)):(x=[gU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+f:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vm).join(`
`),b=[gU(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,y,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.envMap?"#define "+f:"",e.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Oc?"#define TONE_MAPPING":"",e.toneMapping!==Oc?Sn.tonemapping_pars_fragment:"",e.toneMapping!==Oc?sse("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Sn.colorspace_pars_fragment,ose("linearToOutputTexel",e.outputColorSpace),ase(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(vm).join(`
`)),s=IP(s),s=hU(s,e),s=pU(s,e),a=IP(a),a=hU(a,e),a=pU(a,e),s=mU(s),a=mU(a),e.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,x=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,b=["#define varying in",e.glslVersion===DL?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===DL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);let E=T+x+s,D=T+b+a,L=uU(r,r.VERTEX_SHADER,E),z=uU(r,r.FRAGMENT_SHADER,D);r.attachShader(M,L),r.attachShader(M,z),e.index0AttributeName!==void 0?r.bindAttribLocation(M,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function k(N){if(n.debug.checkShaderErrors){let S=r.getProgramInfoLog(M).trim(),q=r.getShaderInfoLog(L).trim(),oe=r.getShaderInfoLog(z).trim(),ee=!0,ge=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,M,L,z);else{let le=fU(r,L,"vertex"),de=fU(r,z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+S+`
`+le+`
`+de)}else S!==""?console.warn("THREE.WebGLProgram: Program Info Log:",S):(q===""||oe==="")&&(ge=!1);ge&&(N.diagnostics={runnable:ee,programLog:S,vertexShader:{log:q,prefix:x},fragmentShader:{log:oe,prefix:b}})}r.deleteShader(L),r.deleteShader(z),G=new $f(r,M),F=use(r,M)}let G;this.getUniforms=function(){return G===void 0&&k(this),G};let F;this.getAttributes=function(){return F===void 0&&k(this),F};let P=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=r.getProgramParameter(M,tse)),P},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=nse++,this.cacheKey=t,this.usedTimes=1,this.program=M,this.vertexShader=L,this.fragmentShader=z,this}var Cse=0,RP=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&&(i=new kP(t),e.set(t,i)),i}},kP=class{constructor(t){this.id=Cse++,this.code=t,this.usedTimes=0}};function Mse(n,t,e,i,r,o,s){let a=new Sm,l=new RP,u=new Set,f=[],h=r.logarithmicDepthBuffer,m=r.vertexTextures,p=r.precision,y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(F){return u.add(F),F===0?"uv":`uv${F}`}function x(F,P,N,S,q){let oe=S.fog,ee=q.geometry,ge=F.isMeshStandardMaterial?S.environment:null,le=(F.isMeshStandardMaterial?e:t).get(F.envMap||ge),de=le&&le.mapping===Xy?le.image.height:null,J=y[F.type];F.precision!==null&&(p=r.getMaxPrecision(F.precision),p!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",p,"instead."));let Q=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Ie=Q!==void 0?Q.length:0,Ue=0;ee.morphAttributes.position!==void 0&&(Ue=1),ee.morphAttributes.normal!==void 0&&(Ue=2),ee.morphAttributes.color!==void 0&&(Ue=3);let ke,Ce,He,$e;if(J){let Xn=Oa[J];ke=Xn.vertexShader,Ce=Xn.fragmentShader}else ke=F.vertexShader,Ce=F.fragmentShader,l.update(F),He=l.getVertexShaderID(F),$e=l.getFragmentShaderID(F);let Ve=n.getRenderTarget(),mt=n.state.buffers.depth.getReversed(),pt=q.isInstancedMesh===!0,Ut=q.isBatchedMesh===!0,Dn=!!F.map,O=!!F.matcap,Me=!!le,j=!!F.aoMap,Y=!!F.lightMap,W=!!F.bumpMap,ne=!!F.normalMap,ve=!!F.displacementMap,Ee=!!F.emissiveMap,ie=!!F.metalnessMap,U=!!F.roughnessMap,R=F.anisotropy>0,K=F.clearcoat>0,_e=F.dispersion>0,Te=F.iridescence>0,ye=F.sheen>0,lt=F.transmission>0,et=R&&!!F.anisotropyMap,nt=K&&!!F.clearcoatMap,un=K&&!!F.clearcoatNormalMap,Fe=K&&!!F.clearcoatRoughnessMap,ct=Te&&!!F.iridescenceMap,Ft=Te&&!!F.iridescenceThicknessMap,At=ye&&!!F.sheenColorMap,ht=ye&&!!F.sheenRoughnessMap,On=!!F.specularMap,rn=!!F.specularColorMap,Qn=!!F.specularIntensityMap,ce=lt&&!!F.transmissionMap,tt=lt&&!!F.thicknessMap,Pe=!!F.gradientMap,ze=!!F.alphaMap,ft=F.alphaTest>0,ut=!!F.alphaHash,on=!!F.extensions,Oi=Oc;F.toneMapped&&(Ve===null||Ve.isXRRenderTarget===!0)&&(Oi=n.toneMapping);let yr={shaderID:J,shaderType:F.type,shaderName:F.name,vertexShader:ke,fragmentShader:Ce,defines:F.defines,customVertexShaderID:He,customFragmentShaderID:$e,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:p,batching:Ut,batchingColor:Ut&&q._colorsTexture!==null,instancing:pt,instancingColor:pt&&q.instanceColor!==null,instancingMorph:pt&&q.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Ve===null?n.outputColorSpace:Ve.isXRRenderTarget===!0?Ve.texture.colorSpace:Zr,alphaToCoverage:!!F.alphaToCoverage,map:Dn,matcap:O,envMap:Me,envMapMode:Me&&le.mapping,envMapCubeUVHeight:de,aoMap:j,lightMap:Y,bumpMap:W,normalMap:ne,displacementMap:m&&ve,emissiveMap:Ee,normalMapObjectSpace:ne&&F.normalMapType===Ste,normalMapTangentSpace:ne&&F.normalMapType===eV,metalnessMap:ie,roughnessMap:U,anisotropy:R,anisotropyMap:et,clearcoat:K,clearcoatMap:nt,clearcoatNormalMap:un,clearcoatRoughnessMap:Fe,dispersion:_e,iridescence:Te,iridescenceMap:ct,iridescenceThicknessMap:Ft,sheen:ye,sheenColorMap:At,sheenRoughnessMap:ht,specularMap:On,specularColorMap:rn,specularIntensityMap:Qn,transmission:lt,transmissionMap:ce,thicknessMap:tt,gradientMap:Pe,opaque:F.transparent===!1&&F.blending===jf&&F.alphaToCoverage===!1,alphaMap:ze,alphaTest:ft,alphaHash:ut,combine:F.combine,mapUv:Dn&&M(F.map.channel),aoMapUv:j&&M(F.aoMap.channel),lightMapUv:Y&&M(F.lightMap.channel),bumpMapUv:W&&M(F.bumpMap.channel),normalMapUv:ne&&M(F.normalMap.channel),displacementMapUv:ve&&M(F.displacementMap.channel),emissiveMapUv:Ee&&M(F.emissiveMap.channel),metalnessMapUv:ie&&M(F.metalnessMap.channel),roughnessMapUv:U&&M(F.roughnessMap.channel),anisotropyMapUv:et&&M(F.anisotropyMap.channel),clearcoatMapUv:nt&&M(F.clearcoatMap.channel),clearcoatNormalMapUv:un&&M(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&M(F.clearcoatRoughnessMap.channel),iridescenceMapUv:ct&&M(F.iridescenceMap.channel),iridescenceThicknessMapUv:Ft&&M(F.iridescenceThicknessMap.channel),sheenColorMapUv:At&&M(F.sheenColorMap.channel),sheenRoughnessMapUv:ht&&M(F.sheenRoughnessMap.channel),specularMapUv:On&&M(F.specularMap.channel),specularColorMapUv:rn&&M(F.specularColorMap.channel),specularIntensityMapUv:Qn&&M(F.specularIntensityMap.channel),transmissionMapUv:ce&&M(F.transmissionMap.channel),thicknessMapUv:tt&&M(F.thicknessMap.channel),alphaMapUv:ze&&M(F.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(ne||R),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:q.isPoints===!0&&!!ee.attributes.uv&&(Dn||ze),fog:!!oe,useFog:F.fog===!0,fogExp2:!!oe&&oe.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:mt,skinning:q.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:Ue,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:F.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Oi,decodeVideoTexture:Dn&&F.map.isVideoTexture===!0&&Un.getTransfer(F.map.colorSpace)===hi,decodeVideoTextureEmissive:Ee&&F.emissiveMap.isVideoTexture===!0&&Un.getTransfer(F.emissiveMap.colorSpace)===hi,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Xo,flipSided:F.side===Do,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:on&&F.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(on&&F.extensions.multiDraw===!0||Ut)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return yr.vertexUv1s=u.has(1),yr.vertexUv2s=u.has(2),yr.vertexUv3s=u.has(3),u.clear(),yr}function b(F){let P=[];if(F.shaderID?P.push(F.shaderID):(P.push(F.customVertexShaderID),P.push(F.customFragmentShaderID)),F.defines!==void 0)for(let N in F.defines)P.push(N),P.push(F.defines[N]);return F.isRawShaderMaterial===!1&&(T(P,F),E(P,F),P.push(n.outputColorSpace)),P.push(F.customProgramCacheKey),P.join()}function T(F,P){F.push(P.precision),F.push(P.outputColorSpace),F.push(P.envMapMode),F.push(P.envMapCubeUVHeight),F.push(P.mapUv),F.push(P.alphaMapUv),F.push(P.lightMapUv),F.push(P.aoMapUv),F.push(P.bumpMapUv),F.push(P.normalMapUv),F.push(P.displacementMapUv),F.push(P.emissiveMapUv),F.push(P.metalnessMapUv),F.push(P.roughnessMapUv),F.push(P.anisotropyMapUv),F.push(P.clearcoatMapUv),F.push(P.clearcoatNormalMapUv),F.push(P.clearcoatRoughnessMapUv),F.push(P.iridescenceMapUv),F.push(P.iridescenceThicknessMapUv),F.push(P.sheenColorMapUv),F.push(P.sheenRoughnessMapUv),F.push(P.specularMapUv),F.push(P.specularColorMapUv),F.push(P.specularIntensityMapUv),F.push(P.transmissionMapUv),F.push(P.thicknessMapUv),F.push(P.combine),F.push(P.fogExp2),F.push(P.sizeAttenuation),F.push(P.morphTargetsCount),F.push(P.morphAttributeCount),F.push(P.numDirLights),F.push(P.numPointLights),F.push(P.numSpotLights),F.push(P.numSpotLightMaps),F.push(P.numHemiLights),F.push(P.numRectAreaLights),F.push(P.numDirLightShadows),F.push(P.numPointLightShadows),F.push(P.numSpotLightShadows),F.push(P.numSpotLightShadowsWithMaps),F.push(P.numLightProbes),F.push(P.shadowMapType),F.push(P.toneMapping),F.push(P.numClippingPlanes),F.push(P.numClipIntersection),F.push(P.depthPacking)}function E(F,P){a.disableAll(),P.supportsVertexTextures&&a.enable(0),P.instancing&&a.enable(1),P.instancingColor&&a.enable(2),P.instancingMorph&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),P.dispersion&&a.enable(20),P.batchingColor&&a.enable(21),F.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.reverseDepthBuffer&&a.enable(4),P.skinning&&a.enable(5),P.morphTargets&&a.enable(6),P.morphNormals&&a.enable(7),P.morphColors&&a.enable(8),P.premultipliedAlpha&&a.enable(9),P.shadowMapEnabled&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),P.decodeVideoTextureEmissive&&a.enable(20),P.alphaToCoverage&&a.enable(21),F.push(a.mask)}function D(F){let P=y[F.type],N;if(P){let S=Oa[P];N=hne.clone(S.uniforms)}else N=F.uniforms;return N}function L(F,P){let N;for(let S=0,q=f.length;S<q;S++){let oe=f[S];if(oe.cacheKey===P){N=oe,++N.usedTimes;break}}return N===void 0&&(N=new bse(n,P,F,o),f.push(N)),N}function z(F){if(--F.usedTimes===0){let P=f.indexOf(F);f[P]=f[f.length-1],f.pop(),F.destroy()}}function k(F){l.remove(F)}function G(){l.dispose()}return{getParameters:x,getProgramCacheKey:b,getUniforms:D,acquireProgram:L,releaseProgram:z,releaseShaderCache:k,programs:f,dispose:G}}function wse(){let n=new WeakMap;function t(s){return n.has(s)}function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,l){n.get(s)[a]=l}function o(){n=new WeakMap}return{has:t,get:e,remove:i,update:r,dispose:o}}function Ese(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function _U(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function vU(){let n=[],t=0,e=[],i=[],r=[];function o(){t=0,e.length=0,i.length=0,r.length=0}function s(h,m,p,y,M,x){let b=n[t];return b===void 0?(b={id:h.id,object:h,geometry:m,material:p,groupOrder:y,renderOrder:h.renderOrder,z:M,group:x},n[t]=b):(b.id=h.id,b.object=h,b.geometry=m,b.material=p,b.groupOrder=y,b.renderOrder=h.renderOrder,b.z=M,b.group=x),t++,b}function a(h,m,p,y,M,x){let b=s(h,m,p,y,M,x);p.transmission>0?i.push(b):p.transparent===!0?r.push(b):e.push(b)}function l(h,m,p,y,M,x){let b=s(h,m,p,y,M,x);p.transmission>0?i.unshift(b):p.transparent===!0?r.unshift(b):e.unshift(b)}function u(h,m){e.length>1&&e.sort(h||Ese),i.length>1&&i.sort(m||_U),r.length>1&&r.sort(m||_U)}function f(){for(let h=t,m=n.length;h<m;h++){let p=n[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:e,transmissive:i,transparent:r,init:o,push:a,unshift:l,finish:f,sort:u}}function Sse(){let n=new WeakMap;function t(i,r){let o=n.get(i),s;return o===void 0?(s=new vU,n.set(i,[s])):r>=o.length?(s=new vU,o.push(s)):s=o[r],s}function e(){n=new WeakMap}return{get:t,dispose:e}}function Pse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new te,color:new jt};break;case"SpotLight":e={position:new te,direction:new te,color:new jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new te,color:new jt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new te,skyColor:new jt,groundColor:new jt};break;case"RectAreaLight":e={color:new jt,position:new te,halfWidth:new te,halfHeight:new te};break}return n[t.id]=e,e}}}function Tse(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pn};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pn};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var Dse=0;function Ose(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function Ase(n){let t=new Pse,e=Tse(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new te);let r=new te,o=new cn,s=new cn;function a(u){let f=0,h=0,m=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let p=0,y=0,M=0,x=0,b=0,T=0,E=0,D=0,L=0,z=0,k=0;u.sort(Ose);for(let F=0,P=u.length;F<P;F++){let N=u[F],S=N.color,q=N.intensity,oe=N.distance,ee=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)f+=S.r*q,h+=S.g*q,m+=S.b*q;else if(N.isLightProbe){for(let ge=0;ge<9;ge++)i.probe[ge].addScaledVector(N.sh.coefficients[ge],q);k++}else if(N.isDirectionalLight){let ge=t.get(N);if(ge.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){let le=N.shadow,de=e.get(N);de.shadowIntensity=le.intensity,de.shadowBias=le.bias,de.shadowNormalBias=le.normalBias,de.shadowRadius=le.radius,de.shadowMapSize=le.mapSize,i.directionalShadow[p]=de,i.directionalShadowMap[p]=ee,i.directionalShadowMatrix[p]=N.shadow.matrix,T++}i.directional[p]=ge,p++}else if(N.isSpotLight){let ge=t.get(N);ge.position.setFromMatrixPosition(N.matrixWorld),ge.color.copy(S).multiplyScalar(q),ge.distance=oe,ge.coneCos=Math.cos(N.angle),ge.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),ge.decay=N.decay,i.spot[M]=ge;let le=N.shadow;if(N.map&&(i.spotLightMap[L]=N.map,L++,le.updateMatrices(N),N.castShadow&&z++),i.spotLightMatrix[M]=le.matrix,N.castShadow){let de=e.get(N);de.shadowIntensity=le.intensity,de.shadowBias=le.bias,de.shadowNormalBias=le.normalBias,de.shadowRadius=le.radius,de.shadowMapSize=le.mapSize,i.spotShadow[M]=de,i.spotShadowMap[M]=ee,D++}M++}else if(N.isRectAreaLight){let ge=t.get(N);ge.color.copy(S).multiplyScalar(q),ge.halfWidth.set(N.width*.5,0,0),ge.halfHeight.set(0,N.height*.5,0),i.rectArea[x]=ge,x++}else if(N.isPointLight){let ge=t.get(N);if(ge.color.copy(N.color).multiplyScalar(N.intensity),ge.distance=N.distance,ge.decay=N.decay,N.castShadow){let le=N.shadow,de=e.get(N);de.shadowIntensity=le.intensity,de.shadowBias=le.bias,de.shadowNormalBias=le.normalBias,de.shadowRadius=le.radius,de.shadowMapSize=le.mapSize,de.shadowCameraNear=le.camera.near,de.shadowCameraFar=le.camera.far,i.pointShadow[y]=de,i.pointShadowMap[y]=ee,i.pointShadowMatrix[y]=N.shadow.matrix,E++}i.point[y]=ge,y++}else if(N.isHemisphereLight){let ge=t.get(N);ge.skyColor.copy(N.color).multiplyScalar(q),ge.groundColor.copy(N.groundColor).multiplyScalar(q),i.hemi[b]=ge,b++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=at.LTC_FLOAT_1,i.rectAreaLTC2=at.LTC_FLOAT_2):(i.rectAreaLTC1=at.LTC_HALF_1,i.rectAreaLTC2=at.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=m;let G=i.hash;(G.directionalLength!==p||G.pointLength!==y||G.spotLength!==M||G.rectAreaLength!==x||G.hemiLength!==b||G.numDirectionalShadows!==T||G.numPointShadows!==E||G.numSpotShadows!==D||G.numSpotMaps!==L||G.numLightProbes!==k)&&(i.directional.length=p,i.spot.length=M,i.rectArea.length=x,i.point.length=y,i.hemi.length=b,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=D+L-z,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=z,i.numLightProbes=k,G.directionalLength=p,G.pointLength=y,G.spotLength=M,G.rectAreaLength=x,G.hemiLength=b,G.numDirectionalShadows=T,G.numPointShadows=E,G.numSpotShadows=D,G.numSpotMaps=L,G.numLightProbes=k,i.version=Dse++)}function l(u,f){let h=0,m=0,p=0,y=0,M=0,x=f.matrixWorldInverse;for(let b=0,T=u.length;b<T;b++){let E=u[b];if(E.isDirectionalLight){let D=i.directional[h];D.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(x),h++}else if(E.isSpotLight){let D=i.spot[p];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),D.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(x),p++}else if(E.isRectAreaLight){let D=i.rectArea[y];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),s.identity(),o.copy(E.matrixWorld),o.premultiply(x),s.extractRotation(o),D.halfWidth.set(E.width*.5,0,0),D.halfHeight.set(0,E.height*.5,0),D.halfWidth.applyMatrix4(s),D.halfHeight.applyMatrix4(s),y++}else if(E.isPointLight){let D=i.point[m];D.position.setFromMatrixPosition(E.matrixWorld),D.position.applyMatrix4(x),m++}else if(E.isHemisphereLight){let D=i.hemi[M];D.direction.setFromMatrixPosition(E.matrixWorld),D.direction.transformDirection(x),M++}}}return{setup:a,setupView:l,state:i}}function yU(n){let t=new Ase(n),e=[],i=[];function r(f){u.camera=f,e.length=0,i.length=0}function o(f){e.push(f)}function s(f){i.push(f)}function a(){t.setup(e)}function l(f){t.setupView(e,f)}let u={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:o,pushShadow:s}}function Ise(n){let t=new WeakMap;function e(r,o=0){let s=t.get(r),a;return s===void 0?(a=new yU(n),t.set(r,[a])):o>=s.length?(a=new yU(n),s.push(a)):a=s[o],a}function i(){t=new WeakMap}return{get:e,dispose:i}}var NP=class extends Yr{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=wte,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},FP=class extends Yr{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},Rse=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,kse=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Nse(n,t,e){let i=new Tm,r=new pn,o=new pn,s=new _n,a=new NP({depthPacking:Ete}),l=new FP,u={},f=e.maxTextureSize,h={[Ia]:Do,[Do]:Ia,[Xo]:Xo},m=new ka({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pn},radius:{value:4}},vertexShader:Rse,fragmentShader:kse}),p=m.clone();p.defines.HORIZONTAL_PASS=1;let y=new Oo;y.setAttribute("position",new Di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let M=new Ei(y,m),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=HU;let b=this.type;this.render=function(z,k,G){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||z.length===0)return;let F=n.getRenderTarget(),P=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),S=n.state;S.setBlending(Dc),S.buffers.color.setClear(1,1,1,1),S.buffers.depth.setTest(!0),S.setScissorTest(!1);let q=b!==Pl&&this.type===Pl,oe=b===Pl&&this.type!==Pl;for(let ee=0,ge=z.length;ee<ge;ee++){let le=z[ee],de=le.shadow;if(de===void 0){console.warn("THREE.WebGLShadowMap:",le,"has no shadow.");continue}if(de.autoUpdate===!1&&de.needsUpdate===!1)continue;r.copy(de.mapSize);let J=de.getFrameExtents();if(r.multiply(J),o.copy(de.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(o.x=Math.floor(f/J.x),r.x=o.x*J.x,de.mapSize.x=o.x),r.y>f&&(o.y=Math.floor(f/J.y),r.y=o.y*J.y,de.mapSize.y=o.y)),de.map===null||q===!0||oe===!0){let Ie=this.type!==Pl?{minFilter:$r,magFilter:$r}:{};de.map!==null&&de.map.dispose(),de.map=new kl(r.x,r.y,Ie),de.map.texture.name=le.name+".shadowMap",de.camera.updateProjectionMatrix()}n.setRenderTarget(de.map),n.clear();let Q=de.getViewportCount();for(let Ie=0;Ie<Q;Ie++){let Ue=de.getViewport(Ie);s.set(o.x*Ue.x,o.y*Ue.y,o.x*Ue.z,o.y*Ue.w),S.viewport(s),de.updateMatrices(le,Ie),i=de.getFrustum(),D(k,G,de.camera,le,this.type)}de.isPointLightShadow!==!0&&this.type===Pl&&T(de,G),de.needsUpdate=!1}b=this.type,x.needsUpdate=!1,n.setRenderTarget(F,P,N)};function T(z,k){let G=t.update(M);m.defines.VSM_SAMPLES!==z.blurSamples&&(m.defines.VSM_SAMPLES=z.blurSamples,p.defines.VSM_SAMPLES=z.blurSamples,m.needsUpdate=!0,p.needsUpdate=!0),z.mapPass===null&&(z.mapPass=new kl(r.x,r.y)),m.uniforms.shadow_pass.value=z.map.texture,m.uniforms.resolution.value=z.mapSize,m.uniforms.radius.value=z.radius,n.setRenderTarget(z.mapPass),n.clear(),n.renderBufferDirect(k,null,G,m,M,null),p.uniforms.shadow_pass.value=z.mapPass.texture,p.uniforms.resolution.value=z.mapSize,p.uniforms.radius.value=z.radius,n.setRenderTarget(z.map),n.clear(),n.renderBufferDirect(k,null,G,p,M,null)}function E(z,k,G,F){let P=null,N=G.isPointLight===!0?z.customDistanceMaterial:z.customDepthMaterial;if(N!==void 0)P=N;else if(P=G.isPointLight===!0?l:a,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){let S=P.uuid,q=k.uuid,oe=u[S];oe===void 0&&(oe={},u[S]=oe);let ee=oe[q];ee===void 0&&(ee=P.clone(),oe[q]=ee,k.addEventListener("dispose",L)),P=ee}if(P.visible=k.visible,P.wireframe=k.wireframe,F===Pl?P.side=k.shadowSide!==null?k.shadowSide:k.side:P.side=k.shadowSide!==null?k.shadowSide:h[k.side],P.alphaMap=k.alphaMap,P.alphaTest=k.alphaTest,P.map=k.map,P.clipShadows=k.clipShadows,P.clippingPlanes=k.clippingPlanes,P.clipIntersection=k.clipIntersection,P.displacementMap=k.displacementMap,P.displacementScale=k.displacementScale,P.displacementBias=k.displacementBias,P.wireframeLinewidth=k.wireframeLinewidth,P.linewidth=k.linewidth,G.isPointLight===!0&&P.isMeshDistanceMaterial===!0){let S=n.properties.get(P);S.light=G}return P}function D(z,k,G,F,P){if(z.visible===!1)return;if(z.layers.test(k.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&P===Pl)&&(!z.frustumCulled||i.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,z.matrixWorld);let q=t.update(z),oe=z.material;if(Array.isArray(oe)){let ee=q.groups;for(let ge=0,le=ee.length;ge<le;ge++){let de=ee[ge],J=oe[de.materialIndex];if(J&&J.visible){let Q=E(z,J,F,P);z.onBeforeShadow(n,z,k,G,q,Q,de),n.renderBufferDirect(G,null,q,Q,z,de),z.onAfterShadow(n,z,k,G,q,Q,de)}}}else if(oe.visible){let ee=E(z,oe,F,P);z.onBeforeShadow(n,z,k,G,q,ee,null),n.renderBufferDirect(G,null,q,ee,z,null),z.onAfterShadow(n,z,k,G,q,ee,null)}}let S=z.children;for(let q=0,oe=S.length;q<oe;q++)D(S[q],k,G,F,P)}function L(z){z.target.removeEventListener("dispose",L);for(let G in u){let F=u[G],P=z.target.uuid;P in F&&(F[P].dispose(),delete F[P])}}}var Fse={[HS]:jS,[WS]:qS,[GS]:YS,[qf]:$S,[jS]:HS,[qS]:WS,[YS]:GS,[$S]:qf};function Lse(n,t){function e(){let ce=!1,tt=new _n,Pe=null,ze=new _n(0,0,0,0);return{setMask:function(ft){Pe!==ft&&!ce&&(n.colorMask(ft,ft,ft,ft),Pe=ft)},setLocked:function(ft){ce=ft},setClear:function(ft,ut,on,Oi,yr){yr===!0&&(ft*=Oi,ut*=Oi,on*=Oi),tt.set(ft,ut,on,Oi),ze.equals(tt)===!1&&(n.clearColor(ft,ut,on,Oi),ze.copy(tt))},reset:function(){ce=!1,Pe=null,ze.set(-1,0,0,0)}}}function i(){let ce=!1,tt=!1,Pe=null,ze=null,ft=null;return{setReversed:function(ut){if(tt!==ut){let on=t.get("EXT_clip_control");tt?on.clipControlEXT(on.LOWER_LEFT_EXT,on.ZERO_TO_ONE_EXT):on.clipControlEXT(on.LOWER_LEFT_EXT,on.NEGATIVE_ONE_TO_ONE_EXT);let Oi=ft;ft=null,this.setClear(Oi)}tt=ut},getReversed:function(){return tt},setTest:function(ut){ut?Ve(n.DEPTH_TEST):mt(n.DEPTH_TEST)},setMask:function(ut){Pe!==ut&&!ce&&(n.depthMask(ut),Pe=ut)},setFunc:function(ut){if(tt&&(ut=Fse[ut]),ze!==ut){switch(ut){case HS:n.depthFunc(n.NEVER);break;case jS:n.depthFunc(n.ALWAYS);break;case WS:n.depthFunc(n.LESS);break;case qf:n.depthFunc(n.LEQUAL);break;case GS:n.depthFunc(n.EQUAL);break;case $S:n.depthFunc(n.GEQUAL);break;case qS:n.depthFunc(n.GREATER);break;case YS:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ze=ut}},setLocked:function(ut){ce=ut},setClear:function(ut){ft!==ut&&(tt&&(ut=1-ut),n.clearDepth(ut),ft=ut)},reset:function(){ce=!1,Pe=null,ze=null,ft=null,tt=!1}}}function r(){let ce=!1,tt=null,Pe=null,ze=null,ft=null,ut=null,on=null,Oi=null,yr=null;return{setTest:function(Xn){ce||(Xn?Ve(n.STENCIL_TEST):mt(n.STENCIL_TEST))},setMask:function(Xn){tt!==Xn&&!ce&&(n.stencilMask(Xn),tt=Xn)},setFunc:function(Xn,to,Is){(Pe!==Xn||ze!==to||ft!==Is)&&(n.stencilFunc(Xn,to,Is),Pe=Xn,ze=to,ft=Is)},setOp:function(Xn,to,Is){(ut!==Xn||on!==to||Oi!==Is)&&(n.stencilOp(Xn,to,Is),ut=Xn,on=to,Oi=Is)},setLocked:function(Xn){ce=Xn},setClear:function(Xn){yr!==Xn&&(n.clearStencil(Xn),yr=Xn)},reset:function(){ce=!1,tt=null,Pe=null,ze=null,ft=null,ut=null,on=null,Oi=null,yr=null}}}let o=new e,s=new i,a=new r,l=new WeakMap,u=new WeakMap,f={},h={},m=new WeakMap,p=[],y=null,M=!1,x=null,b=null,T=null,E=null,D=null,L=null,z=null,k=new jt(0,0,0),G=0,F=!1,P=null,N=null,S=null,q=null,oe=null,ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ge=!1,le=0,de=n.getParameter(n.VERSION);de.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(de)[1]),ge=le>=1):de.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),ge=le>=2);let J=null,Q={},Ie=n.getParameter(n.SCISSOR_BOX),Ue=n.getParameter(n.VIEWPORT),ke=new _n().fromArray(Ie),Ce=new _n().fromArray(Ue);function He(ce,tt,Pe,ze){let ft=new Uint8Array(4),ut=n.createTexture();n.bindTexture(ce,ut),n.texParameteri(ce,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ce,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let on=0;on<Pe;on++)ce===n.TEXTURE_3D||ce===n.TEXTURE_2D_ARRAY?n.texImage3D(tt,0,n.RGBA,1,1,ze,0,n.RGBA,n.UNSIGNED_BYTE,ft):n.texImage2D(tt+on,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ft);return ut}let $e={};$e[n.TEXTURE_2D]=He(n.TEXTURE_2D,n.TEXTURE_2D,1),$e[n.TEXTURE_CUBE_MAP]=He(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),$e[n.TEXTURE_2D_ARRAY]=He(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),$e[n.TEXTURE_3D]=He(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),Ve(n.DEPTH_TEST),s.setFunc(qf),W(!1),ne(CL),Ve(n.CULL_FACE),j(Dc);function Ve(ce){f[ce]!==!0&&(n.enable(ce),f[ce]=!0)}function mt(ce){f[ce]!==!1&&(n.disable(ce),f[ce]=!1)}function pt(ce,tt){return h[ce]!==tt?(n.bindFramebuffer(ce,tt),h[ce]=tt,ce===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=tt),ce===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=tt),!0):!1}function Ut(ce,tt){let Pe=p,ze=!1;if(ce){Pe=m.get(tt),Pe===void 0&&(Pe=[],m.set(tt,Pe));let ft=ce.textures;if(Pe.length!==ft.length||Pe[0]!==n.COLOR_ATTACHMENT0){for(let ut=0,on=ft.length;ut<on;ut++)Pe[ut]=n.COLOR_ATTACHMENT0+ut;Pe.length=ft.length,ze=!0}}else Pe[0]!==n.BACK&&(Pe[0]=n.BACK,ze=!0);ze&&n.drawBuffers(Pe)}function Dn(ce){return y!==ce?(n.useProgram(ce),y=ce,!0):!1}let O={[Vu]:n.FUNC_ADD,[Yee]:n.FUNC_SUBTRACT,[Xee]:n.FUNC_REVERSE_SUBTRACT};O[Zee]=n.MIN,O[Kee]=n.MAX;let Me={[Jee]:n.ZERO,[Qee]:n.ONE,[ete]:n.SRC_COLOR,[zS]:n.SRC_ALPHA,[ste]:n.SRC_ALPHA_SATURATE,[rte]:n.DST_COLOR,[nte]:n.DST_ALPHA,[tte]:n.ONE_MINUS_SRC_COLOR,[BS]:n.ONE_MINUS_SRC_ALPHA,[ote]:n.ONE_MINUS_DST_COLOR,[ite]:n.ONE_MINUS_DST_ALPHA,[ate]:n.CONSTANT_COLOR,[lte]:n.ONE_MINUS_CONSTANT_COLOR,[cte]:n.CONSTANT_ALPHA,[ute]:n.ONE_MINUS_CONSTANT_ALPHA};function j(ce,tt,Pe,ze,ft,ut,on,Oi,yr,Xn){if(ce===Dc){M===!0&&(mt(n.BLEND),M=!1);return}if(M===!1&&(Ve(n.BLEND),M=!0),ce!==qee){if(ce!==x||Xn!==F){if((b!==Vu||D!==Vu)&&(n.blendEquation(n.FUNC_ADD),b=Vu,D=Vu),Xn)switch(ce){case jf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ML:n.blendFunc(n.ONE,n.ONE);break;case wL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case EL:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case jf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ML:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case wL:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case EL:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}T=null,E=null,L=null,z=null,k.set(0,0,0),G=0,x=ce,F=Xn}return}ft=ft||tt,ut=ut||Pe,on=on||ze,(tt!==b||ft!==D)&&(n.blendEquationSeparate(O[tt],O[ft]),b=tt,D=ft),(Pe!==T||ze!==E||ut!==L||on!==z)&&(n.blendFuncSeparate(Me[Pe],Me[ze],Me[ut],Me[on]),T=Pe,E=ze,L=ut,z=on),(Oi.equals(k)===!1||yr!==G)&&(n.blendColor(Oi.r,Oi.g,Oi.b,yr),k.copy(Oi),G=yr),x=ce,F=!1}function Y(ce,tt){ce.side===Xo?mt(n.CULL_FACE):Ve(n.CULL_FACE);let Pe=ce.side===Do;tt&&(Pe=!Pe),W(Pe),ce.blending===jf&&ce.transparent===!1?j(Dc):j(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),s.setFunc(ce.depthFunc),s.setTest(ce.depthTest),s.setMask(ce.depthWrite),o.setMask(ce.colorWrite);let ze=ce.stencilWrite;a.setTest(ze),ze&&(a.setMask(ce.stencilWriteMask),a.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),a.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),Ee(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?Ve(n.SAMPLE_ALPHA_TO_COVERAGE):mt(n.SAMPLE_ALPHA_TO_COVERAGE)}function W(ce){P!==ce&&(ce?n.frontFace(n.CW):n.frontFace(n.CCW),P=ce)}function ne(ce){ce!==Gee?(Ve(n.CULL_FACE),ce!==N&&(ce===CL?n.cullFace(n.BACK):ce===$ee?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):mt(n.CULL_FACE),N=ce}function ve(ce){ce!==S&&(ge&&n.lineWidth(ce),S=ce)}function Ee(ce,tt,Pe){ce?(Ve(n.POLYGON_OFFSET_FILL),(q!==tt||oe!==Pe)&&(n.polygonOffset(tt,Pe),q=tt,oe=Pe)):mt(n.POLYGON_OFFSET_FILL)}function ie(ce){ce?Ve(n.SCISSOR_TEST):mt(n.SCISSOR_TEST)}function U(ce){ce===void 0&&(ce=n.TEXTURE0+ee-1),J!==ce&&(n.activeTexture(ce),J=ce)}function R(ce,tt,Pe){Pe===void 0&&(J===null?Pe=n.TEXTURE0+ee-1:Pe=J);let ze=Q[Pe];ze===void 0&&(ze={type:void 0,texture:void 0},Q[Pe]=ze),(ze.type!==ce||ze.texture!==tt)&&(J!==Pe&&(n.activeTexture(Pe),J=Pe),n.bindTexture(ce,tt||$e[ce]),ze.type=ce,ze.texture=tt)}function K(){let ce=Q[J];ce!==void 0&&ce.type!==void 0&&(n.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Te(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ye(){try{n.texSubImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function lt(){try{n.texSubImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function et(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function nt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function un(){try{n.texStorage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Fe(){try{n.texStorage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ct(){try{n.texImage2D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ft(){try{n.texImage3D.apply(n,arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function At(ce){ke.equals(ce)===!1&&(n.scissor(ce.x,ce.y,ce.z,ce.w),ke.copy(ce))}function ht(ce){Ce.equals(ce)===!1&&(n.viewport(ce.x,ce.y,ce.z,ce.w),Ce.copy(ce))}function On(ce,tt){let Pe=u.get(tt);Pe===void 0&&(Pe=new WeakMap,u.set(tt,Pe));let ze=Pe.get(ce);ze===void 0&&(ze=n.getUniformBlockIndex(tt,ce.name),Pe.set(ce,ze))}function rn(ce,tt){let ze=u.get(tt).get(ce);l.get(tt)!==ze&&(n.uniformBlockBinding(tt,ze,ce.__bindingPointIndex),l.set(tt,ze))}function Qn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},J=null,Q={},h={},m=new WeakMap,p=[],y=null,M=!1,x=null,b=null,T=null,E=null,D=null,L=null,z=null,k=new jt(0,0,0),G=0,F=!1,P=null,N=null,S=null,q=null,oe=null,ke.set(0,0,n.canvas.width,n.canvas.height),Ce.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:Ve,disable:mt,bindFramebuffer:pt,drawBuffers:Ut,useProgram:Dn,setBlending:j,setMaterial:Y,setFlipSided:W,setCullFace:ne,setLineWidth:ve,setPolygonOffset:Ee,setScissorTest:ie,activeTexture:U,bindTexture:R,unbindTexture:K,compressedTexImage2D:_e,compressedTexImage3D:Te,texImage2D:ct,texImage3D:Ft,updateUBOMapping:On,uniformBlockBinding:rn,texStorage2D:un,texStorage3D:Fe,texSubImage2D:ye,texSubImage3D:lt,compressedTexSubImage2D:et,compressedTexSubImage3D:nt,scissor:At,viewport:ht,reset:Qn}}function xU(n,t,e,i){let r=Use(i);switch(e){case qU:return n*t;case XU:return n*t;case ZU:return n*t*2;case sT:return n*t/r.components*r.byteLength;case aT:return n*t/r.components*r.byteLength;case KU:return n*t*2/r.components*r.byteLength;case lT:return n*t*2/r.components*r.byteLength;case YU:return n*t*3/r.components*r.byteLength;case bs:return n*t*4/r.components*r.byteLength;case cT:return n*t*4/r.components*r.byteLength;case gy:case _y:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case vy:case yy:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case JS:case eP:return Math.max(n,16)*Math.max(t,8)/4;case KS:case QS:return Math.max(n,8)*Math.max(t,8)/2;case tP:case nP:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case iP:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case rP:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case oP:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case sP:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case aP:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case lP:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case cP:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case uP:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case dP:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case fP:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case hP:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case pP:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case mP:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case gP:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case _P:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case xy:case vP:case yP:return Math.ceil(n/4)*Math.ceil(t/4)*16;case JU:case xP:return Math.ceil(n/4)*Math.ceil(t/4)*8;case bP:case CP:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Use(n){switch(n){case Il:case WU:return{byteLength:1,components:1};case wm:case GU:case Nm:return{byteLength:2,components:1};case rT:case oT:return{byteLength:2,components:4};case Hu:case iT:case oa:return{byteLength:4,components:1};case $U:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function Vse(n,t,e,i,r,o,s){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new pn,f=new WeakMap,h,m=new WeakMap,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(U,R){return p?new OffscreenCanvas(U,R):Em("canvas")}function M(U,R,K){let _e=1,Te=ie(U);if((Te.width>K||Te.height>K)&&(_e=K/Math.max(Te.width,Te.height)),_e<1)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap||typeof VideoFrame<"u"&&U instanceof VideoFrame){let ye=Math.floor(_e*Te.width),lt=Math.floor(_e*Te.height);h===void 0&&(h=y(ye,lt));let et=R?y(ye,lt):h;return et.width=ye,et.height=lt,et.getContext("2d").drawImage(U,0,0,ye,lt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+ye+"x"+lt+")."),et}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),U;return U}function x(U){return U.generateMipmaps}function b(U){n.generateMipmap(U)}function T(U){return U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:U.isWebGL3DRenderTarget?n.TEXTURE_3D:U.isWebGLArrayRenderTarget||U.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(U,R,K,_e,Te=!1){if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let ye=R;if(R===n.RED&&(K===n.FLOAT&&(ye=n.R32F),K===n.HALF_FLOAT&&(ye=n.R16F),K===n.UNSIGNED_BYTE&&(ye=n.R8)),R===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.R8UI),K===n.UNSIGNED_SHORT&&(ye=n.R16UI),K===n.UNSIGNED_INT&&(ye=n.R32UI),K===n.BYTE&&(ye=n.R8I),K===n.SHORT&&(ye=n.R16I),K===n.INT&&(ye=n.R32I)),R===n.RG&&(K===n.FLOAT&&(ye=n.RG32F),K===n.HALF_FLOAT&&(ye=n.RG16F),K===n.UNSIGNED_BYTE&&(ye=n.RG8)),R===n.RG_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RG8UI),K===n.UNSIGNED_SHORT&&(ye=n.RG16UI),K===n.UNSIGNED_INT&&(ye=n.RG32UI),K===n.BYTE&&(ye=n.RG8I),K===n.SHORT&&(ye=n.RG16I),K===n.INT&&(ye=n.RG32I)),R===n.RGB_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RGB8UI),K===n.UNSIGNED_SHORT&&(ye=n.RGB16UI),K===n.UNSIGNED_INT&&(ye=n.RGB32UI),K===n.BYTE&&(ye=n.RGB8I),K===n.SHORT&&(ye=n.RGB16I),K===n.INT&&(ye=n.RGB32I)),R===n.RGBA_INTEGER&&(K===n.UNSIGNED_BYTE&&(ye=n.RGBA8UI),K===n.UNSIGNED_SHORT&&(ye=n.RGBA16UI),K===n.UNSIGNED_INT&&(ye=n.RGBA32UI),K===n.BYTE&&(ye=n.RGBA8I),K===n.SHORT&&(ye=n.RGBA16I),K===n.INT&&(ye=n.RGBA32I)),R===n.RGB&&K===n.UNSIGNED_INT_5_9_9_9_REV&&(ye=n.RGB9_E5),R===n.RGBA){let lt=Te?Ky:Un.getTransfer(_e);K===n.FLOAT&&(ye=n.RGBA32F),K===n.HALF_FLOAT&&(ye=n.RGBA16F),K===n.UNSIGNED_BYTE&&(ye=lt===hi?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&t.get("EXT_color_buffer_float"),ye}function D(U,R){let K;return U?R===null||R===Hu||R===Zf?K=n.DEPTH24_STENCIL8:R===oa?K=n.DEPTH32F_STENCIL8:R===wm&&(K=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):R===null||R===Hu||R===Zf?K=n.DEPTH_COMPONENT24:R===oa?K=n.DEPTH_COMPONENT32F:R===wm&&(K=n.DEPTH_COMPONENT16),K}function L(U,R){return x(U)===!0||U.isFramebufferTexture&&U.minFilter!==$r&&U.minFilter!==Pr?Math.log2(Math.max(R.width,R.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?R.mipmaps.length:1}function z(U){let R=U.target;R.removeEventListener("dispose",z),G(R),R.isVideoTexture&&f.delete(R)}function k(U){let R=U.target;R.removeEventListener("dispose",k),P(R)}function G(U){let R=i.get(U);if(R.__webglInit===void 0)return;let K=U.source,_e=m.get(K);if(_e){let Te=_e[R.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&F(U),Object.keys(_e).length===0&&m.delete(K)}i.remove(U)}function F(U){let R=i.get(U);n.deleteTexture(R.__webglTexture);let K=U.source,_e=m.get(K);delete _e[R.__cacheKey],s.memory.textures--}function P(U){let R=i.get(U);if(U.depthTexture&&(U.depthTexture.dispose(),i.remove(U.depthTexture)),U.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(R.__webglFramebuffer[_e]))for(let Te=0;Te<R.__webglFramebuffer[_e].length;Te++)n.deleteFramebuffer(R.__webglFramebuffer[_e][Te]);else n.deleteFramebuffer(R.__webglFramebuffer[_e]);R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer[_e])}else{if(Array.isArray(R.__webglFramebuffer))for(let _e=0;_e<R.__webglFramebuffer.length;_e++)n.deleteFramebuffer(R.__webglFramebuffer[_e]);else n.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&n.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&n.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let _e=0;_e<R.__webglColorRenderbuffer.length;_e++)R.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(R.__webglColorRenderbuffer[_e]);R.__webglDepthRenderbuffer&&n.deleteRenderbuffer(R.__webglDepthRenderbuffer)}let K=U.textures;for(let _e=0,Te=K.length;_e<Te;_e++){let ye=i.get(K[_e]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),s.memory.textures--),i.remove(K[_e])}i.remove(U)}let N=0;function S(){N=0}function q(){let U=N;return U>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+r.maxTextures),N+=1,U}function oe(U){let R=[];return R.push(U.wrapS),R.push(U.wrapT),R.push(U.wrapR||0),R.push(U.magFilter),R.push(U.minFilter),R.push(U.anisotropy),R.push(U.internalFormat),R.push(U.format),R.push(U.type),R.push(U.generateMipmaps),R.push(U.premultiplyAlpha),R.push(U.flipY),R.push(U.unpackAlignment),R.push(U.colorSpace),R.join()}function ee(U,R){let K=i.get(U);if(U.isVideoTexture&&ve(U),U.isRenderTargetTexture===!1&&U.version>0&&K.__version!==U.version){let _e=U.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(K,U,R);return}}e.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+R)}function ge(U,R){let K=i.get(U);if(U.version>0&&K.__version!==U.version){Ce(K,U,R);return}e.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+R)}function le(U,R){let K=i.get(U);if(U.version>0&&K.__version!==U.version){Ce(K,U,R);return}e.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+R)}function de(U,R){let K=i.get(U);if(U.version>0&&K.__version!==U.version){He(K,U,R);return}e.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+R)}let J={[sr]:n.REPEAT,[Dl]:n.CLAMP_TO_EDGE,[Mm]:n.MIRRORED_REPEAT},Q={[$r]:n.NEAREST,[nT]:n.NEAREST_MIPMAP_NEAREST,[Vf]:n.NEAREST_MIPMAP_LINEAR,[Pr]:n.LINEAR,[ym]:n.LINEAR_MIPMAP_NEAREST,[To]:n.LINEAR_MIPMAP_LINEAR},Ie={[Pte]:n.NEVER,[Rte]:n.ALWAYS,[Tte]:n.LESS,[tV]:n.LEQUAL,[Dte]:n.EQUAL,[Ite]:n.GEQUAL,[Ote]:n.GREATER,[Ate]:n.NOTEQUAL};function Ue(U,R){if(R.type===oa&&t.has("OES_texture_float_linear")===!1&&(R.magFilter===Pr||R.magFilter===ym||R.magFilter===Vf||R.magFilter===To||R.minFilter===Pr||R.minFilter===ym||R.minFilter===Vf||R.minFilter===To)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(U,n.TEXTURE_WRAP_S,J[R.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,J[R.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,J[R.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,Q[R.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,Q[R.minFilter]),R.compareFunction&&(n.texParameteri(U,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(U,n.TEXTURE_COMPARE_FUNC,Ie[R.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===$r||R.minFilter!==Vf&&R.minFilter!==To||R.type===oa&&t.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||i.get(R).__currentAnisotropy){let K=t.get("EXT_texture_filter_anisotropic");n.texParameterf(U,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),i.get(R).__currentAnisotropy=R.anisotropy}}}function ke(U,R){let K=!1;U.__webglInit===void 0&&(U.__webglInit=!0,R.addEventListener("dispose",z));let _e=R.source,Te=m.get(_e);Te===void 0&&(Te={},m.set(_e,Te));let ye=oe(R);if(ye!==U.__cacheKey){Te[ye]===void 0&&(Te[ye]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,K=!0),Te[ye].usedTimes++;let lt=Te[U.__cacheKey];lt!==void 0&&(Te[U.__cacheKey].usedTimes--,lt.usedTimes===0&&F(R)),U.__cacheKey=ye,U.__webglTexture=Te[ye].texture}return K}function Ce(U,R,K){let _e=n.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),R.isData3DTexture&&(_e=n.TEXTURE_3D);let Te=ke(U,R),ye=R.source;e.bindTexture(_e,U.__webglTexture,n.TEXTURE0+K);let lt=i.get(ye);if(ye.version!==lt.__version||Te===!0){e.activeTexture(n.TEXTURE0+K);let et=Un.getPrimaries(Un.workingColorSpace),nt=R.colorSpace===Tc?null:Un.getPrimaries(R.colorSpace),un=R.colorSpace===Tc||et===nt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,un);let Fe=M(R.image,!1,r.maxTextureSize);Fe=Ee(R,Fe);let ct=o.convert(R.format,R.colorSpace),Ft=o.convert(R.type),At=E(R.internalFormat,ct,Ft,R.colorSpace,R.isVideoTexture);Ue(_e,R);let ht,On=R.mipmaps,rn=R.isVideoTexture!==!0,Qn=lt.__version===void 0||Te===!0,ce=ye.dataReady,tt=L(R,Fe);if(R.isDepthTexture)At=D(R.format===Kf,R.type),Qn&&(rn?e.texStorage2D(n.TEXTURE_2D,1,At,Fe.width,Fe.height):e.texImage2D(n.TEXTURE_2D,0,At,Fe.width,Fe.height,0,ct,Ft,null));else if(R.isDataTexture)if(On.length>0){rn&&Qn&&e.texStorage2D(n.TEXTURE_2D,tt,At,On[0].width,On[0].height);for(let Pe=0,ze=On.length;Pe<ze;Pe++)ht=On[Pe],rn?ce&&e.texSubImage2D(n.TEXTURE_2D,Pe,0,0,ht.width,ht.height,ct,Ft,ht.data):e.texImage2D(n.TEXTURE_2D,Pe,At,ht.width,ht.height,0,ct,Ft,ht.data);R.generateMipmaps=!1}else rn?(Qn&&e.texStorage2D(n.TEXTURE_2D,tt,At,Fe.width,Fe.height),ce&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,ct,Ft,Fe.data)):e.texImage2D(n.TEXTURE_2D,0,At,Fe.width,Fe.height,0,ct,Ft,Fe.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){rn&&Qn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,tt,At,On[0].width,On[0].height,Fe.depth);for(let Pe=0,ze=On.length;Pe<ze;Pe++)if(ht=On[Pe],R.format!==bs)if(ct!==null)if(rn){if(ce)if(R.layerUpdates.size>0){let ft=xU(ht.width,ht.height,R.format,R.type);for(let ut of R.layerUpdates){let on=ht.data.subarray(ut*ft/ht.data.BYTES_PER_ELEMENT,(ut+1)*ft/ht.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,ut,ht.width,ht.height,1,ct,on)}R.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,0,ht.width,ht.height,Fe.depth,ct,ht.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Pe,At,ht.width,ht.height,Fe.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else rn?ce&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Pe,0,0,0,ht.width,ht.height,Fe.depth,ct,Ft,ht.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Pe,At,ht.width,ht.height,Fe.depth,0,ct,Ft,ht.data)}else{rn&&Qn&&e.texStorage2D(n.TEXTURE_2D,tt,At,On[0].width,On[0].height);for(let Pe=0,ze=On.length;Pe<ze;Pe++)ht=On[Pe],R.format!==bs?ct!==null?rn?ce&&e.compressedTexSubImage2D(n.TEXTURE_2D,Pe,0,0,ht.width,ht.height,ct,ht.data):e.compressedTexImage2D(n.TEXTURE_2D,Pe,At,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):rn?ce&&e.texSubImage2D(n.TEXTURE_2D,Pe,0,0,ht.width,ht.height,ct,Ft,ht.data):e.texImage2D(n.TEXTURE_2D,Pe,At,ht.width,ht.height,0,ct,Ft,ht.data)}else if(R.isDataArrayTexture)if(rn){if(Qn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,tt,At,Fe.width,Fe.height,Fe.depth),ce)if(R.layerUpdates.size>0){let Pe=xU(Fe.width,Fe.height,R.format,R.type);for(let ze of R.layerUpdates){let ft=Fe.data.subarray(ze*Pe/Fe.data.BYTES_PER_ELEMENT,(ze+1)*Pe/Fe.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ze,Fe.width,Fe.height,1,ct,Ft,ft)}R.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,ct,Ft,Fe.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,At,Fe.width,Fe.height,Fe.depth,0,ct,Ft,Fe.data);else if(R.isData3DTexture)rn?(Qn&&e.texStorage3D(n.TEXTURE_3D,tt,At,Fe.width,Fe.height,Fe.depth),ce&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,ct,Ft,Fe.data)):e.texImage3D(n.TEXTURE_3D,0,At,Fe.width,Fe.height,Fe.depth,0,ct,Ft,Fe.data);else if(R.isFramebufferTexture){if(Qn)if(rn)e.texStorage2D(n.TEXTURE_2D,tt,At,Fe.width,Fe.height);else{let Pe=Fe.width,ze=Fe.height;for(let ft=0;ft<tt;ft++)e.texImage2D(n.TEXTURE_2D,ft,At,Pe,ze,0,ct,Ft,null),Pe>>=1,ze>>=1}}else if(On.length>0){if(rn&&Qn){let Pe=ie(On[0]);e.texStorage2D(n.TEXTURE_2D,tt,At,Pe.width,Pe.height)}for(let Pe=0,ze=On.length;Pe<ze;Pe++)ht=On[Pe],rn?ce&&e.texSubImage2D(n.TEXTURE_2D,Pe,0,0,ct,Ft,ht):e.texImage2D(n.TEXTURE_2D,Pe,At,ct,Ft,ht);R.generateMipmaps=!1}else if(rn){if(Qn){let Pe=ie(Fe);e.texStorage2D(n.TEXTURE_2D,tt,At,Pe.width,Pe.height)}ce&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,ct,Ft,Fe)}else e.texImage2D(n.TEXTURE_2D,0,At,ct,Ft,Fe);x(R)&&b(_e),lt.__version=ye.version,R.onUpdate&&R.onUpdate(R)}U.__version=R.version}function He(U,R,K){if(R.image.length!==6)return;let _e=ke(U,R),Te=R.source;e.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+K);let ye=i.get(Te);if(Te.version!==ye.__version||_e===!0){e.activeTexture(n.TEXTURE0+K);let lt=Un.getPrimaries(Un.workingColorSpace),et=R.colorSpace===Tc?null:Un.getPrimaries(R.colorSpace),nt=R.colorSpace===Tc||lt===et?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,R.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,R.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);let un=R.isCompressedTexture||R.image[0].isCompressedTexture,Fe=R.image[0]&&R.image[0].isDataTexture,ct=[];for(let ze=0;ze<6;ze++)!un&&!Fe?ct[ze]=M(R.image[ze],!0,r.maxCubemapSize):ct[ze]=Fe?R.image[ze].image:R.image[ze],ct[ze]=Ee(R,ct[ze]);let Ft=ct[0],At=o.convert(R.format,R.colorSpace),ht=o.convert(R.type),On=E(R.internalFormat,At,ht,R.colorSpace),rn=R.isVideoTexture!==!0,Qn=ye.__version===void 0||_e===!0,ce=Te.dataReady,tt=L(R,Ft);Ue(n.TEXTURE_CUBE_MAP,R);let Pe;if(un){rn&&Qn&&e.texStorage2D(n.TEXTURE_CUBE_MAP,tt,On,Ft.width,Ft.height);for(let ze=0;ze<6;ze++){Pe=ct[ze].mipmaps;for(let ft=0;ft<Pe.length;ft++){let ut=Pe[ft];R.format!==bs?At!==null?rn?ce&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft,0,0,ut.width,ut.height,At,ut.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft,On,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rn?ce&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft,0,0,ut.width,ut.height,At,ht,ut.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft,On,ut.width,ut.height,0,At,ht,ut.data)}}}else{if(Pe=R.mipmaps,rn&&Qn){Pe.length>0&&tt++;let ze=ie(ct[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,tt,On,ze.width,ze.height)}for(let ze=0;ze<6;ze++)if(Fe){rn?ce&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,ct[ze].width,ct[ze].height,At,ht,ct[ze].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,On,ct[ze].width,ct[ze].height,0,At,ht,ct[ze].data);for(let ft=0;ft<Pe.length;ft++){let on=Pe[ft].image[ze].image;rn?ce&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft+1,0,0,on.width,on.height,At,ht,on.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft+1,On,on.width,on.height,0,At,ht,on.data)}}else{rn?ce&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,0,0,At,ht,ct[ze]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,0,On,At,ht,ct[ze]);for(let ft=0;ft<Pe.length;ft++){let ut=Pe[ft];rn?ce&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft+1,0,0,At,ht,ut.image[ze]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ze,ft+1,On,At,ht,ut.image[ze])}}}x(R)&&b(n.TEXTURE_CUBE_MAP),ye.__version=Te.version,R.onUpdate&&R.onUpdate(R)}U.__version=R.version}function $e(U,R,K,_e,Te,ye){let lt=o.convert(K.format,K.colorSpace),et=o.convert(K.type),nt=E(K.internalFormat,lt,et,K.colorSpace),un=i.get(R),Fe=i.get(K);if(Fe.__renderTarget=R,!un.__hasExternalTextures){let ct=Math.max(1,R.width>>ye),Ft=Math.max(1,R.height>>ye);Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?e.texImage3D(Te,ye,nt,ct,Ft,R.depth,0,lt,et,null):e.texImage2D(Te,ye,nt,ct,Ft,0,lt,et,null)}e.bindFramebuffer(n.FRAMEBUFFER,U),ne(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Te,Fe.__webglTexture,0,W(R)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Te,Fe.__webglTexture,ye),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ve(U,R,K){if(n.bindRenderbuffer(n.RENDERBUFFER,U),R.depthBuffer){let _e=R.depthTexture,Te=_e&&_e.isDepthTexture?_e.type:null,ye=D(R.stencilBuffer,Te),lt=R.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=W(R);ne(R)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,et,ye,R.width,R.height):K?n.renderbufferStorageMultisample(n.RENDERBUFFER,et,ye,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,ye,R.width,R.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,lt,n.RENDERBUFFER,U)}else{let _e=R.textures;for(let Te=0;Te<_e.length;Te++){let ye=_e[Te],lt=o.convert(ye.format,ye.colorSpace),et=o.convert(ye.type),nt=E(ye.internalFormat,lt,et,ye.colorSpace),un=W(R);K&&ne(R)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,un,nt,R.width,R.height):ne(R)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,un,nt,R.width,R.height):n.renderbufferStorage(n.RENDERBUFFER,nt,R.width,R.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function mt(U,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,U),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let _e=i.get(R.depthTexture);_e.__renderTarget=R,(!_e.__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),ee(R.depthTexture,0);let Te=_e.__webglTexture,ye=W(R);if(R.depthTexture.format===Wf)ne(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Te,0);else if(R.depthTexture.format===Kf)ne(R)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function pt(U){let R=i.get(U),K=U.isWebGLCubeRenderTarget===!0;if(R.__boundDepthTexture!==U.depthTexture){let _e=U.depthTexture;if(R.__depthDisposeCallback&&R.__depthDisposeCallback(),_e){let Te=()=>{delete R.__boundDepthTexture,delete R.__depthDisposeCallback,_e.removeEventListener("dispose",Te)};_e.addEventListener("dispose",Te),R.__depthDisposeCallback=Te}R.__boundDepthTexture=_e}if(U.depthTexture&&!R.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");mt(R.__webglFramebuffer,U)}else if(K){R.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer[_e]),R.__webglDepthbuffer[_e]===void 0)R.__webglDepthbuffer[_e]=n.createRenderbuffer(),Ve(R.__webglDepthbuffer[_e],U,!1);else{let Te=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=R.__webglDepthbuffer[_e];n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,ye)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer===void 0)R.__webglDepthbuffer=n.createRenderbuffer(),Ve(R.__webglDepthbuffer,U,!1);else{let _e=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=R.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Te),n.framebufferRenderbuffer(n.FRAMEBUFFER,_e,n.RENDERBUFFER,Te)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function Ut(U,R,K){let _e=i.get(U);R!==void 0&&$e(_e.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&pt(U)}function Dn(U){let R=U.texture,K=i.get(U),_e=i.get(R);U.addEventListener("dispose",k);let Te=U.textures,ye=U.isWebGLCubeRenderTarget===!0,lt=Te.length>1;if(lt||(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=R.version,s.memory.textures++),ye){K.__webglFramebuffer=[];for(let et=0;et<6;et++)if(R.mipmaps&&R.mipmaps.length>0){K.__webglFramebuffer[et]=[];for(let nt=0;nt<R.mipmaps.length;nt++)K.__webglFramebuffer[et][nt]=n.createFramebuffer()}else K.__webglFramebuffer[et]=n.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){K.__webglFramebuffer=[];for(let et=0;et<R.mipmaps.length;et++)K.__webglFramebuffer[et]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(lt)for(let et=0,nt=Te.length;et<nt;et++){let un=i.get(Te[et]);un.__webglTexture===void 0&&(un.__webglTexture=n.createTexture(),s.memory.textures++)}if(U.samples>0&&ne(U)===!1){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let et=0;et<Te.length;et++){let nt=Te[et];K.__webglColorRenderbuffer[et]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[et]);let un=o.convert(nt.format,nt.colorSpace),Fe=o.convert(nt.type),ct=E(nt.internalFormat,un,Fe,nt.colorSpace,U.isXRRenderTarget===!0),Ft=W(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,ct,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+et,n.RENDERBUFFER,K.__webglColorRenderbuffer[et])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),Ve(K.__webglDepthRenderbuffer,U,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){e.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),Ue(n.TEXTURE_CUBE_MAP,R);for(let et=0;et<6;et++)if(R.mipmaps&&R.mipmaps.length>0)for(let nt=0;nt<R.mipmaps.length;nt++)$e(K.__webglFramebuffer[et][nt],U,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,nt);else $e(K.__webglFramebuffer[et],U,R,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0);x(R)&&b(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(lt){for(let et=0,nt=Te.length;et<nt;et++){let un=Te[et],Fe=i.get(un);e.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),Ue(n.TEXTURE_2D,un),$e(K.__webglFramebuffer,U,un,n.COLOR_ATTACHMENT0+et,n.TEXTURE_2D,0),x(un)&&b(n.TEXTURE_2D)}e.unbindTexture()}else{let et=n.TEXTURE_2D;if((U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(et=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(et,_e.__webglTexture),Ue(et,R),R.mipmaps&&R.mipmaps.length>0)for(let nt=0;nt<R.mipmaps.length;nt++)$e(K.__webglFramebuffer[nt],U,R,n.COLOR_ATTACHMENT0,et,nt);else $e(K.__webglFramebuffer,U,R,n.COLOR_ATTACHMENT0,et,0);x(R)&&b(et),e.unbindTexture()}U.depthBuffer&&pt(U)}function O(U){let R=U.textures;for(let K=0,_e=R.length;K<_e;K++){let Te=R[K];if(x(Te)){let ye=T(U),lt=i.get(Te).__webglTexture;e.bindTexture(ye,lt),b(ye),e.unbindTexture()}}}let Me=[],j=[];function Y(U){if(U.samples>0){if(ne(U)===!1){let R=U.textures,K=U.width,_e=U.height,Te=n.COLOR_BUFFER_BIT,ye=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,lt=i.get(U),et=R.length>1;if(et)for(let nt=0;nt<R.length;nt++)e.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,lt.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglFramebuffer);for(let nt=0;nt<R.length;nt++){if(U.resolveDepthBuffer&&(U.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&U.resolveStencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),et){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,lt.__webglColorRenderbuffer[nt]);let un=i.get(R[nt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,un,0)}n.blitFramebuffer(0,0,K,_e,0,0,K,_e,Te,n.NEAREST),l===!0&&(Me.length=0,j.length=0,Me.push(n.COLOR_ATTACHMENT0+nt),U.depthBuffer&&U.resolveDepthBuffer===!1&&(Me.push(ye),j.push(ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Me))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),et)for(let nt=0;nt<R.length;nt++){e.bindFramebuffer(n.FRAMEBUFFER,lt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,lt.__webglColorRenderbuffer[nt]);let un=i.get(R[nt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,lt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,un,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,lt.__webglMultisampledFramebuffer)}else if(U.depthBuffer&&U.resolveDepthBuffer===!1&&l){let R=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[R])}}}function W(U){return Math.min(r.maxSamples,U.samples)}function ne(U){let R=i.get(U);return U.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function ve(U){let R=s.render.frame;f.get(U)!==R&&(f.set(U,R),U.update())}function Ee(U,R){let K=U.colorSpace,_e=U.format,Te=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||K!==Zr&&K!==Tc&&(Un.getTransfer(K)===hi?(_e!==bs||Te!==Il)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),R}function ie(U){return typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement?(u.width=U.naturalWidth||U.width,u.height=U.naturalHeight||U.height):typeof VideoFrame<"u"&&U instanceof VideoFrame?(u.width=U.displayWidth,u.height=U.displayHeight):(u.width=U.width,u.height=U.height),u}this.allocateTextureUnit=q,this.resetTextureUnits=S,this.setTexture2D=ee,this.setTexture2DArray=ge,this.setTexture3D=le,this.setTextureCube=de,this.rebindTextures=Ut,this.setupRenderTarget=Dn,this.updateRenderTargetMipmap=O,this.updateMultisampleRenderTarget=Y,this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=$e,this.useMultisampledRTT=ne}function zse(n,t){function e(i,r=Tc){let o,s=Un.getTransfer(r);if(i===Il)return n.UNSIGNED_BYTE;if(i===rT)return n.UNSIGNED_SHORT_4_4_4_4;if(i===oT)return n.UNSIGNED_SHORT_5_5_5_1;if(i===$U)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===WU)return n.BYTE;if(i===GU)return n.SHORT;if(i===wm)return n.UNSIGNED_SHORT;if(i===iT)return n.INT;if(i===Hu)return n.UNSIGNED_INT;if(i===oa)return n.FLOAT;if(i===Nm)return n.HALF_FLOAT;if(i===qU)return n.ALPHA;if(i===YU)return n.RGB;if(i===bs)return n.RGBA;if(i===XU)return n.LUMINANCE;if(i===ZU)return n.LUMINANCE_ALPHA;if(i===Wf)return n.DEPTH_COMPONENT;if(i===Kf)return n.DEPTH_STENCIL;if(i===sT)return n.RED;if(i===aT)return n.RED_INTEGER;if(i===KU)return n.RG;if(i===lT)return n.RG_INTEGER;if(i===cT)return n.RGBA_INTEGER;if(i===gy||i===_y||i===vy||i===yy)if(s===hi)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===gy)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===_y)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===vy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===yy)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===gy)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===_y)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===vy)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===yy)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===KS||i===JS||i===QS||i===eP)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===KS)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===JS)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===QS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===eP)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===tP||i===nP||i===iP)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(i===tP||i===nP)return s===hi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===iP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===rP||i===oP||i===sP||i===aP||i===lP||i===cP||i===uP||i===dP||i===fP||i===hP||i===pP||i===mP||i===gP||i===_P)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(i===rP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===oP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===sP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===aP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===lP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===cP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===uP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===dP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===fP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===hP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===pP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===mP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===gP)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===_P)return s===hi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===xy||i===vP||i===yP)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(i===xy)return s===hi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===vP)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===yP)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===JU||i===xP||i===bP||i===CP)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(i===xy)return o.COMPRESSED_RED_RGTC1_EXT;if(i===xP)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===bP)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===CP)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Zf?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var LP=class extends hr{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},ni=class extends pr{constructor(){super(),this.isGroup=!0,this.type="Group"}},Bse={type:"move"},Cm=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ni,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ni,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ni,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let r=null,o=null,s=null,a=this._targetRay,l=this._grip,u=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(u&&t.hand){s=!0;for(let M of t.hand.values()){let x=e.getJointPose(M,i),b=this._getHandJoint(u,M);x!==null&&(b.matrix.fromArray(x.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=x.radius),b.visible=x!==null}let f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],m=f.position.distanceTo(h.position),p=.02,y=.005;u.inputState.pinching&&m>p+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&m<=p-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,i),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Bse)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new ni;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},Hse=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,jse=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,UP=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){let r=new Es,o=t.properties.get(r);o.__webglTexture=e.texture,(e.depthNear!=i.depthNear||e.depthFar!=i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,i=new ka({vertexShader:Hse,fragmentShader:jse,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ei(new Ms(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},VP=class extends Rl{constructor(t,e){super();let i=this,r=null,o=1,s=null,a="local-floor",l=1,u=null,f=null,h=null,m=null,p=null,y=null,M=new UP,x=e.getContextAttributes(),b=null,T=null,E=[],D=[],L=new pn,z=null,k=new hr;k.viewport=new _n;let G=new hr;G.viewport=new _n;let F=[k,G],P=new LP,N=null,S=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ce){let He=E[Ce];return He===void 0&&(He=new Cm,E[Ce]=He),He.getTargetRaySpace()},this.getControllerGrip=function(Ce){let He=E[Ce];return He===void 0&&(He=new Cm,E[Ce]=He),He.getGripSpace()},this.getHand=function(Ce){let He=E[Ce];return He===void 0&&(He=new Cm,E[Ce]=He),He.getHandSpace()};function q(Ce){let He=D.indexOf(Ce.inputSource);if(He===-1)return;let $e=E[He];$e!==void 0&&($e.update(Ce.inputSource,Ce.frame,u||s),$e.dispatchEvent({type:Ce.type,data:Ce.inputSource}))}function oe(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",oe),r.removeEventListener("inputsourceschange",ee);for(let Ce=0;Ce<E.length;Ce++){let He=D[Ce];He!==null&&(D[Ce]=null,E[Ce].disconnect(He))}N=null,S=null,M.reset(),t.setRenderTarget(b),p=null,m=null,h=null,r=null,T=null,ke.stop(),i.isPresenting=!1,t.setPixelRatio(z),t.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ce){o=Ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ce){a=Ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(Ce){u=Ce},this.getBaseLayer=function(){return m!==null?m:p},this.getBinding=function(){return h},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=function(Ce){return Ka(this,null,function*(){if(r=Ce,r!==null){if(b=t.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",oe),r.addEventListener("inputsourceschange",ee),x.xrCompatible!==!0&&(yield e.makeXRCompatible()),z=t.getPixelRatio(),t.getSize(L),r.renderState.layers===void 0){let He={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(r,e,He),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),T=new kl(p.framebufferWidth,p.framebufferHeight,{format:bs,type:Il,colorSpace:t.outputColorSpace,stencilBuffer:x.stencil})}else{let He=null,$e=null,Ve=null;x.depth&&(Ve=x.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,He=x.stencil?Kf:Wf,$e=x.stencil?Zf:Hu);let mt={colorFormat:e.RGBA8,depthFormat:Ve,scaleFactor:o};h=new XRWebGLBinding(r,e),m=h.createProjectionLayer(mt),r.updateRenderState({layers:[m]}),t.setPixelRatio(1),t.setSize(m.textureWidth,m.textureHeight,!1),T=new kl(m.textureWidth,m.textureHeight,{format:bs,type:Il,depthTexture:new Oy(m.textureWidth,m.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,He),stencilBuffer:x.stencil,colorSpace:t.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1})}T.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=yield r.requestReferenceSpace(a),ke.setContext(r),ke.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function ee(Ce){for(let He=0;He<Ce.removed.length;He++){let $e=Ce.removed[He],Ve=D.indexOf($e);Ve>=0&&(D[Ve]=null,E[Ve].disconnect($e))}for(let He=0;He<Ce.added.length;He++){let $e=Ce.added[He],Ve=D.indexOf($e);if(Ve===-1){for(let pt=0;pt<E.length;pt++)if(pt>=D.length){D.push($e),Ve=pt;break}else if(D[pt]===null){D[pt]=$e,Ve=pt;break}if(Ve===-1)break}let mt=E[Ve];mt&&mt.connect($e)}}let ge=new te,le=new te;function de(Ce,He,$e){ge.setFromMatrixPosition(He.matrixWorld),le.setFromMatrixPosition($e.matrixWorld);let Ve=ge.distanceTo(le),mt=He.projectionMatrix.elements,pt=$e.projectionMatrix.elements,Ut=mt[14]/(mt[10]-1),Dn=mt[14]/(mt[10]+1),O=(mt[9]+1)/mt[5],Me=(mt[9]-1)/mt[5],j=(mt[8]-1)/mt[0],Y=(pt[8]+1)/pt[0],W=Ut*j,ne=Ut*Y,ve=Ve/(-j+Y),Ee=ve*-j;if(He.matrixWorld.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.translateX(Ee),Ce.translateZ(ve),Ce.matrixWorld.compose(Ce.position,Ce.quaternion,Ce.scale),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert(),mt[10]===-1)Ce.projectionMatrix.copy(He.projectionMatrix),Ce.projectionMatrixInverse.copy(He.projectionMatrixInverse);else{let ie=Ut+ve,U=Dn+ve,R=W-Ee,K=ne+(Ve-Ee),_e=O*Dn/U*ie,Te=Me*Dn/U*ie;Ce.projectionMatrix.makePerspective(R,K,_e,Te,ie,U),Ce.projectionMatrixInverse.copy(Ce.projectionMatrix).invert()}}function J(Ce,He){He===null?Ce.matrixWorld.copy(Ce.matrix):Ce.matrixWorld.multiplyMatrices(He.matrixWorld,Ce.matrix),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert()}this.updateCamera=function(Ce){if(r===null)return;let He=Ce.near,$e=Ce.far;M.texture!==null&&(M.depthNear>0&&(He=M.depthNear),M.depthFar>0&&($e=M.depthFar)),P.near=G.near=k.near=He,P.far=G.far=k.far=$e,(N!==P.near||S!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),N=P.near,S=P.far),k.layers.mask=Ce.layers.mask|2,G.layers.mask=Ce.layers.mask|4,P.layers.mask=k.layers.mask|G.layers.mask;let Ve=Ce.parent,mt=P.cameras;J(P,Ve);for(let pt=0;pt<mt.length;pt++)J(mt[pt],Ve);mt.length===2?de(P,k,G):P.projectionMatrix.copy(k.projectionMatrix),Q(Ce,P,Ve)};function Q(Ce,He,$e){$e===null?Ce.matrix.copy(He.matrixWorld):(Ce.matrix.copy($e.matrixWorld),Ce.matrix.invert(),Ce.matrix.multiply(He.matrixWorld)),Ce.matrix.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.updateMatrixWorld(!0),Ce.projectionMatrix.copy(He.projectionMatrix),Ce.projectionMatrixInverse.copy(He.projectionMatrixInverse),Ce.isPerspectiveCamera&&(Ce.fov=eh*2*Math.atan(1/Ce.projectionMatrix.elements[5]),Ce.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(m===null&&p===null))return l},this.setFoveation=function(Ce){l=Ce,m!==null&&(m.fixedFoveation=Ce),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Ce)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(P)};let Ie=null;function Ue(Ce,He){if(f=He.getViewerPose(u||s),y=He,f!==null){let $e=f.views;p!==null&&(t.setRenderTargetFramebuffer(T,p.framebuffer),t.setRenderTarget(T));let Ve=!1;$e.length!==P.cameras.length&&(P.cameras.length=0,Ve=!0);for(let pt=0;pt<$e.length;pt++){let Ut=$e[pt],Dn=null;if(p!==null)Dn=p.getViewport(Ut);else{let Me=h.getViewSubImage(m,Ut);Dn=Me.viewport,pt===0&&(t.setRenderTargetTextures(T,Me.colorTexture,m.ignoreDepthValues?void 0:Me.depthStencilTexture),t.setRenderTarget(T))}let O=F[pt];O===void 0&&(O=new hr,O.layers.enable(pt),O.viewport=new _n,F[pt]=O),O.matrix.fromArray(Ut.transform.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale),O.projectionMatrix.fromArray(Ut.projectionMatrix),O.projectionMatrixInverse.copy(O.projectionMatrix).invert(),O.viewport.set(Dn.x,Dn.y,Dn.width,Dn.height),pt===0&&(P.matrix.copy(O.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Ve===!0&&P.cameras.push(O)}let mt=r.enabledFeatures;if(mt&&mt.includes("depth-sensing")){let pt=h.getDepthInformation($e[0]);pt&&pt.isValid&&pt.texture&&M.init(t,pt,r.renderState)}}for(let $e=0;$e<E.length;$e++){let Ve=D[$e],mt=E[$e];Ve!==null&&mt!==void 0&&mt.update(Ve,He,u||s)}Ie&&Ie(Ce,He),He.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:He}),y=null}let ke=new oV;ke.setAnimationLoop(Ue),this.setAnimationLoop=function(Ce){Ie=Ce},this.dispose=function(){}}},Lu=new Wu,Wse=new cn;function Gse(n,t){function e(x,b){x.matrixAutoUpdate===!0&&x.updateMatrix(),b.value.copy(x.matrix)}function i(x,b){b.color.getRGB(x.fogColor.value,rV(n)),b.isFog?(x.fogNear.value=b.near,x.fogFar.value=b.far):b.isFogExp2&&(x.fogDensity.value=b.density)}function r(x,b,T,E,D){b.isMeshBasicMaterial||b.isMeshLambertMaterial?o(x,b):b.isMeshToonMaterial?(o(x,b),h(x,b)):b.isMeshPhongMaterial?(o(x,b),f(x,b)):b.isMeshStandardMaterial?(o(x,b),m(x,b),b.isMeshPhysicalMaterial&&p(x,b,D)):b.isMeshMatcapMaterial?(o(x,b),y(x,b)):b.isMeshDepthMaterial?o(x,b):b.isMeshDistanceMaterial?(o(x,b),M(x,b)):b.isMeshNormalMaterial?o(x,b):b.isLineBasicMaterial?(s(x,b),b.isLineDashedMaterial&&a(x,b)):b.isPointsMaterial?l(x,b,T,E):b.isSpriteMaterial?u(x,b):b.isShadowMaterial?(x.color.value.copy(b.color),x.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function o(x,b){x.opacity.value=b.opacity,b.color&&x.diffuse.value.copy(b.color),b.emissive&&x.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(x.map.value=b.map,e(b.map,x.mapTransform)),b.alphaMap&&(x.alphaMap.value=b.alphaMap,e(b.alphaMap,x.alphaMapTransform)),b.bumpMap&&(x.bumpMap.value=b.bumpMap,e(b.bumpMap,x.bumpMapTransform),x.bumpScale.value=b.bumpScale,b.side===Do&&(x.bumpScale.value*=-1)),b.normalMap&&(x.normalMap.value=b.normalMap,e(b.normalMap,x.normalMapTransform),x.normalScale.value.copy(b.normalScale),b.side===Do&&x.normalScale.value.negate()),b.displacementMap&&(x.displacementMap.value=b.displacementMap,e(b.displacementMap,x.displacementMapTransform),x.displacementScale.value=b.displacementScale,x.displacementBias.value=b.displacementBias),b.emissiveMap&&(x.emissiveMap.value=b.emissiveMap,e(b.emissiveMap,x.emissiveMapTransform)),b.specularMap&&(x.specularMap.value=b.specularMap,e(b.specularMap,x.specularMapTransform)),b.alphaTest>0&&(x.alphaTest.value=b.alphaTest);let T=t.get(b),E=T.envMap,D=T.envMapRotation;E&&(x.envMap.value=E,Lu.copy(D),Lu.x*=-1,Lu.y*=-1,Lu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Lu.y*=-1,Lu.z*=-1),x.envMapRotation.value.setFromMatrix4(Wse.makeRotationFromEuler(Lu)),x.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=b.reflectivity,x.ior.value=b.ior,x.refractionRatio.value=b.refractionRatio),b.lightMap&&(x.lightMap.value=b.lightMap,x.lightMapIntensity.value=b.lightMapIntensity,e(b.lightMap,x.lightMapTransform)),b.aoMap&&(x.aoMap.value=b.aoMap,x.aoMapIntensity.value=b.aoMapIntensity,e(b.aoMap,x.aoMapTransform))}function s(x,b){x.diffuse.value.copy(b.color),x.opacity.value=b.opacity,b.map&&(x.map.value=b.map,e(b.map,x.mapTransform))}function a(x,b){x.dashSize.value=b.dashSize,x.totalSize.value=b.dashSize+b.gapSize,x.scale.value=b.scale}function l(x,b,T,E){x.diffuse.value.copy(b.color),x.opacity.value=b.opacity,x.size.value=b.size*T,x.scale.value=E*.5,b.map&&(x.map.value=b.map,e(b.map,x.uvTransform)),b.alphaMap&&(x.alphaMap.value=b.alphaMap,e(b.alphaMap,x.alphaMapTransform)),b.alphaTest>0&&(x.alphaTest.value=b.alphaTest)}function u(x,b){x.diffuse.value.copy(b.color),x.opacity.value=b.opacity,x.rotation.value=b.rotation,b.map&&(x.map.value=b.map,e(b.map,x.mapTransform)),b.alphaMap&&(x.alphaMap.value=b.alphaMap,e(b.alphaMap,x.alphaMapTransform)),b.alphaTest>0&&(x.alphaTest.value=b.alphaTest)}function f(x,b){x.specular.value.copy(b.specular),x.shininess.value=Math.max(b.shininess,1e-4)}function h(x,b){b.gradientMap&&(x.gradientMap.value=b.gradientMap)}function m(x,b){x.metalness.value=b.metalness,b.metalnessMap&&(x.metalnessMap.value=b.metalnessMap,e(b.metalnessMap,x.metalnessMapTransform)),x.roughness.value=b.roughness,b.roughnessMap&&(x.roughnessMap.value=b.roughnessMap,e(b.roughnessMap,x.roughnessMapTransform)),b.envMap&&(x.envMapIntensity.value=b.envMapIntensity)}function p(x,b,T){x.ior.value=b.ior,b.sheen>0&&(x.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),x.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(x.sheenColorMap.value=b.sheenColorMap,e(b.sheenColorMap,x.sheenColorMapTransform)),b.sheenRoughnessMap&&(x.sheenRoughnessMap.value=b.sheenRoughnessMap,e(b.sheenRoughnessMap,x.sheenRoughnessMapTransform))),b.clearcoat>0&&(x.clearcoat.value=b.clearcoat,x.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(x.clearcoatMap.value=b.clearcoatMap,e(b.clearcoatMap,x.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,e(b.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(x.clearcoatNormalMap.value=b.clearcoatNormalMap,e(b.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===Do&&x.clearcoatNormalScale.value.negate())),b.dispersion>0&&(x.dispersion.value=b.dispersion),b.iridescence>0&&(x.iridescence.value=b.iridescence,x.iridescenceIOR.value=b.iridescenceIOR,x.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(x.iridescenceMap.value=b.iridescenceMap,e(b.iridescenceMap,x.iridescenceMapTransform)),b.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=b.iridescenceThicknessMap,e(b.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),b.transmission>0&&(x.transmission.value=b.transmission,x.transmissionSamplerMap.value=T.texture,x.transmissionSamplerSize.value.set(T.width,T.height),b.transmissionMap&&(x.transmissionMap.value=b.transmissionMap,e(b.transmissionMap,x.transmissionMapTransform)),x.thickness.value=b.thickness,b.thicknessMap&&(x.thicknessMap.value=b.thicknessMap,e(b.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=b.attenuationDistance,x.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(x.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(x.anisotropyMap.value=b.anisotropyMap,e(b.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=b.specularIntensity,x.specularColor.value.copy(b.specularColor),b.specularColorMap&&(x.specularColorMap.value=b.specularColorMap,e(b.specularColorMap,x.specularColorMapTransform)),b.specularIntensityMap&&(x.specularIntensityMap.value=b.specularIntensityMap,e(b.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,b){b.matcap&&(x.matcap.value=b.matcap)}function M(x,b){let T=t.get(b).light;x.referencePosition.value.setFromMatrixPosition(T.matrixWorld),x.nearDistance.value=T.shadow.camera.near,x.farDistance.value=T.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function $se(n,t,e,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(T,E){let D=E.program;i.uniformBlockBinding(T,D)}function u(T,E){let D=r[T.id];D===void 0&&(y(T),D=f(T),r[T.id]=D,T.addEventListener("dispose",x));let L=E.program;i.updateUBOMapping(T,L);let z=t.render.frame;o[T.id]!==z&&(m(T),o[T.id]=z)}function f(T){let E=h();T.__bindingPointIndex=E;let D=n.createBuffer(),L=T.__size,z=T.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,L,z),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,D),D}function h(){for(let T=0;T<a;T++)if(s.indexOf(T)===-1)return s.push(T),T;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(T){let E=r[T.id],D=T.uniforms,L=T.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let z=0,k=D.length;z<k;z++){let G=Array.isArray(D[z])?D[z]:[D[z]];for(let F=0,P=G.length;F<P;F++){let N=G[F];if(p(N,z,F,L)===!0){let S=N.__offset,q=Array.isArray(N.value)?N.value:[N.value],oe=0;for(let ee=0;ee<q.length;ee++){let ge=q[ee],le=M(ge);typeof ge=="number"||typeof ge=="boolean"?(N.__data[0]=ge,n.bufferSubData(n.UNIFORM_BUFFER,S+oe,N.__data)):ge.isMatrix3?(N.__data[0]=ge.elements[0],N.__data[1]=ge.elements[1],N.__data[2]=ge.elements[2],N.__data[3]=0,N.__data[4]=ge.elements[3],N.__data[5]=ge.elements[4],N.__data[6]=ge.elements[5],N.__data[7]=0,N.__data[8]=ge.elements[6],N.__data[9]=ge.elements[7],N.__data[10]=ge.elements[8],N.__data[11]=0):(ge.toArray(N.__data,oe),oe+=le.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,S,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(T,E,D,L){let z=T.value,k=E+"_"+D;if(L[k]===void 0)return typeof z=="number"||typeof z=="boolean"?L[k]=z:L[k]=z.clone(),!0;{let G=L[k];if(typeof z=="number"||typeof z=="boolean"){if(G!==z)return L[k]=z,!0}else if(G.equals(z)===!1)return G.copy(z),!0}return!1}function y(T){let E=T.uniforms,D=0,L=16;for(let k=0,G=E.length;k<G;k++){let F=Array.isArray(E[k])?E[k]:[E[k]];for(let P=0,N=F.length;P<N;P++){let S=F[P],q=Array.isArray(S.value)?S.value:[S.value];for(let oe=0,ee=q.length;oe<ee;oe++){let ge=q[oe],le=M(ge),de=D%L,J=de%le.boundary,Q=de+J;D+=J,Q!==0&&L-Q<le.storage&&(D+=L-Q),S.__data=new Float32Array(le.storage/Float32Array.BYTES_PER_ELEMENT),S.__offset=D,D+=le.storage}}}let z=D%L;return z>0&&(D+=L-z),T.__size=D,T.__cache={},this}function M(T){let E={boundary:0,storage:0};return typeof T=="number"||typeof T=="boolean"?(E.boundary=4,E.storage=4):T.isVector2?(E.boundary=8,E.storage=8):T.isVector3||T.isColor?(E.boundary=16,E.storage=12):T.isVector4?(E.boundary=16,E.storage=16):T.isMatrix3?(E.boundary=48,E.storage=48):T.isMatrix4?(E.boundary=64,E.storage=64):T.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",T),E}function x(T){let E=T.target;E.removeEventListener("dispose",x);let D=s.indexOf(E.__bindingPointIndex);s.splice(D,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete o[E.id]}function b(){for(let T in r)n.deleteBuffer(r[T]);s=[],r={},o={}}return{bind:l,update:u,dispose:b}}var Ay=class{constructor(t={}){let{canvas:e=Zte(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:m=!1}=t;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=s;let y=new Uint32Array(4),M=new Int32Array(4),x=null,b=null,T=[],E=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ui,this.toneMapping=Oc,this.toneMappingExposure=1;let D=this,L=!1,z=0,k=0,G=null,F=-1,P=null,N=new _n,S=new _n,q=null,oe=new jt(0),ee=0,ge=e.width,le=e.height,de=1,J=null,Q=null,Ie=new _n(0,0,ge,le),Ue=new _n(0,0,ge,le),ke=!1,Ce=new Tm,He=!1,$e=!1,Ve=new cn,mt=new cn,pt=new te,Ut=new _n,Dn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},O=!1;function Me(){return G===null?de:1}let j=i;function Y(B,he){return e.getContext(B,he)}try{let B={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${eT}`),e.addEventListener("webglcontextlost",ze,!1),e.addEventListener("webglcontextrestored",ft,!1),e.addEventListener("webglcontextcreationerror",ut,!1),j===null){let he="webgl2";if(j=Y(he,B),j===null)throw Y(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let W,ne,ve,Ee,ie,U,R,K,_e,Te,ye,lt,et,nt,un,Fe,ct,Ft,At,ht,On,rn,Qn,ce;function tt(){W=new loe(j),W.init(),rn=new zse(j,W),ne=new noe(j,W,t,rn),ve=new Lse(j,W),ne.reverseDepthBuffer&&m&&ve.buffers.depth.setReversed(!0),Ee=new doe(j),ie=new wse,U=new Vse(j,W,ve,ie,ne,rn,Ee),R=new roe(D),K=new aoe(D),_e=new vne(j),Qn=new eoe(j,_e),Te=new coe(j,_e,Ee,Qn),ye=new hoe(j,Te,_e,Ee),At=new foe(j,ne,U),Fe=new ioe(ie),lt=new Mse(D,R,K,W,ne,Qn,Fe),et=new Gse(D,ie),nt=new Sse,un=new Ise(W),Ft=new Qre(D,R,K,ve,ye,p,l),ct=new Nse(D,ye,ne),ce=new $se(j,Ee,ne,ve),ht=new toe(j,W,Ee),On=new uoe(j,W,Ee),Ee.programs=lt.programs,D.capabilities=ne,D.extensions=W,D.properties=ie,D.renderLists=nt,D.shadowMap=ct,D.state=ve,D.info=Ee}tt();let Pe=new VP(D,j);this.xr=Pe,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){let B=W.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){let B=W.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(B){B!==void 0&&(de=B,this.setSize(ge,le,!1))},this.getSize=function(B){return B.set(ge,le)},this.setSize=function(B,he,xe=!0){if(Pe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ge=B,le=he,e.width=Math.floor(B*de),e.height=Math.floor(he*de),xe===!0&&(e.style.width=B+"px",e.style.height=he+"px"),this.setViewport(0,0,B,he)},this.getDrawingBufferSize=function(B){return B.set(ge*de,le*de).floor()},this.setDrawingBufferSize=function(B,he,xe){ge=B,le=he,de=xe,e.width=Math.floor(B*xe),e.height=Math.floor(he*xe),this.setViewport(0,0,B,he)},this.getCurrentViewport=function(B){return B.copy(N)},this.getViewport=function(B){return B.copy(Ie)},this.setViewport=function(B,he,xe,be){B.isVector4?Ie.set(B.x,B.y,B.z,B.w):Ie.set(B,he,xe,be),ve.viewport(N.copy(Ie).multiplyScalar(de).round())},this.getScissor=function(B){return B.copy(Ue)},this.setScissor=function(B,he,xe,be){B.isVector4?Ue.set(B.x,B.y,B.z,B.w):Ue.set(B,he,xe,be),ve.scissor(S.copy(Ue).multiplyScalar(de).round())},this.getScissorTest=function(){return ke},this.setScissorTest=function(B){ve.setScissorTest(ke=B)},this.setOpaqueSort=function(B){J=B},this.setTransparentSort=function(B){Q=B},this.getClearColor=function(B){return B.copy(Ft.getClearColor())},this.setClearColor=function(){Ft.setClearColor.apply(Ft,arguments)},this.getClearAlpha=function(){return Ft.getClearAlpha()},this.setClearAlpha=function(){Ft.setClearAlpha.apply(Ft,arguments)},this.clear=function(B=!0,he=!0,xe=!0){let be=0;if(B){let fe=!1;if(G!==null){let Qe=G.texture.format;fe=Qe===cT||Qe===lT||Qe===aT}if(fe){let Qe=G.texture.type,dt=Qe===Il||Qe===Hu||Qe===wm||Qe===Zf||Qe===rT||Qe===oT,St=Ft.getClearColor(),Et=Ft.getClearAlpha(),Zt=St.r,sn=St.g,Pt=St.b;dt?(y[0]=Zt,y[1]=sn,y[2]=Pt,y[3]=Et,j.clearBufferuiv(j.COLOR,0,y)):(M[0]=Zt,M[1]=sn,M[2]=Pt,M[3]=Et,j.clearBufferiv(j.COLOR,0,M))}else be|=j.COLOR_BUFFER_BIT}he&&(be|=j.DEPTH_BUFFER_BIT),xe&&(be|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ze,!1),e.removeEventListener("webglcontextrestored",ft,!1),e.removeEventListener("webglcontextcreationerror",ut,!1),nt.dispose(),un.dispose(),ie.dispose(),R.dispose(),K.dispose(),ye.dispose(),Qn.dispose(),ce.dispose(),lt.dispose(),Pe.dispose(),Pe.removeEventListener("sessionstart",id),Pe.removeEventListener("sessionend",Km),za.stop()};function ze(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function ft(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;let B=Ee.autoReset,he=ct.enabled,xe=ct.autoUpdate,be=ct.needsUpdate,fe=ct.type;tt(),Ee.autoReset=B,ct.enabled=he,ct.autoUpdate=xe,ct.needsUpdate=be,ct.type=fe}function ut(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function on(B){let he=B.target;he.removeEventListener("dispose",on),Oi(he)}function Oi(B){yr(B),ie.remove(B)}function yr(B){let he=ie.get(B).programs;he!==void 0&&(he.forEach(function(xe){lt.releaseProgram(xe)}),B.isShaderMaterial&&lt.releaseShaderCache(B))}this.renderBufferDirect=function(B,he,xe,be,fe,Qe){he===null&&(he=Dn);let dt=fe.isMesh&&fe.matrixWorld.determinant()<0,St=Db(B,he,xe,be,fe);ve.setMaterial(be,dt);let Et=xe.index,Zt=1;if(be.wireframe===!0){if(Et=Te.getWireframeAttribute(xe),Et===void 0)return;Zt=2}let sn=xe.drawRange,Pt=xe.attributes.position,jn=sn.start*Zt,ci=(sn.start+sn.count)*Zt;Qe!==null&&(jn=Math.max(jn,Qe.start*Zt),ci=Math.min(ci,(Qe.start+Qe.count)*Zt)),Et!==null?(jn=Math.max(jn,0),ci=Math.min(ci,Et.count)):Pt!=null&&(jn=Math.max(jn,0),ci=Math.min(ci,Pt.count));let pi=ci-jn;if(pi<0||pi===1/0)return;Qn.setup(fe,be,St,xe,Et);let Dr,Gn=ht;if(Et!==null&&(Dr=_e.get(Et),Gn=On,Gn.setIndex(Dr)),fe.isMesh)be.wireframe===!0?(ve.setLineWidth(be.wireframeLinewidth*Me()),Gn.setMode(j.LINES)):Gn.setMode(j.TRIANGLES);else if(fe.isLine){let It=be.linewidth;It===void 0&&(It=1),ve.setLineWidth(It*Me()),fe.isLineSegments?Gn.setMode(j.LINES):fe.isLineLoop?Gn.setMode(j.LINE_LOOP):Gn.setMode(j.LINE_STRIP)}else fe.isPoints?Gn.setMode(j.POINTS):fe.isSprite&&Gn.setMode(j.TRIANGLES);if(fe.isBatchedMesh)if(fe._multiDrawInstances!==null)Gn.renderMultiDrawInstances(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount,fe._multiDrawInstances);else if(W.get("WEBGL_multi_draw"))Gn.renderMultiDraw(fe._multiDrawStarts,fe._multiDrawCounts,fe._multiDrawCount);else{let It=fe._multiDrawStarts,Ao=fe._multiDrawCounts,Yn=fe._multiDrawCount,mo=Et?_e.get(Et).bytesPerElement:1,Rs=ie.get(be).currentProgram.getUniforms();for(let Fr=0;Fr<Yn;Fr++)Rs.setValue(j,"_gl_DrawID",Fr),Gn.render(It[Fr]/mo,Ao[Fr])}else if(fe.isInstancedMesh)Gn.renderInstances(jn,pi,fe.count);else if(xe.isInstancedBufferGeometry){let It=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,Ao=Math.min(xe.instanceCount,It);Gn.renderInstances(jn,pi,Ao)}else Gn.render(jn,pi)};function Xn(B,he,xe){B.transparent===!0&&B.side===Xo&&B.forceSinglePass===!1?(B.side=Do,B.needsUpdate=!0,od(B,he,xe),B.side=Ia,B.needsUpdate=!0,od(B,he,xe),B.side=Xo):od(B,he,xe)}this.compile=function(B,he,xe=null){xe===null&&(xe=B),b=un.get(xe),b.init(he),E.push(b),xe.traverseVisible(function(fe){fe.isLight&&fe.layers.test(he.layers)&&(b.pushLight(fe),fe.castShadow&&b.pushShadow(fe))}),B!==xe&&B.traverseVisible(function(fe){fe.isLight&&fe.layers.test(he.layers)&&(b.pushLight(fe),fe.castShadow&&b.pushShadow(fe))}),b.setupLights();let be=new Set;return B.traverse(function(fe){if(!(fe.isMesh||fe.isPoints||fe.isLine||fe.isSprite))return;let Qe=fe.material;if(Qe)if(Array.isArray(Qe))for(let dt=0;dt<Qe.length;dt++){let St=Qe[dt];Xn(St,xe,fe),be.add(St)}else Xn(Qe,xe,fe),be.add(Qe)}),E.pop(),b=null,be},this.compileAsync=function(B,he,xe=null){let be=this.compile(B,he,xe);return new Promise(fe=>{function Qe(){if(be.forEach(function(dt){ie.get(dt).currentProgram.isReady()&&be.delete(dt)}),be.size===0){fe(B);return}setTimeout(Qe,10)}W.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let to=null;function Is(B){to&&to(B)}function id(){za.stop()}function Km(){za.start()}let za=new oV;za.setAnimationLoop(Is),typeof self<"u"&&za.setContext(self),this.setAnimationLoop=function(B){to=B,Pe.setAnimationLoop(B),B===null?za.stop():za.start()},Pe.addEventListener("sessionstart",id),Pe.addEventListener("sessionend",Km),this.render=function(B,he){if(he!==void 0&&he.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),he.parent===null&&he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),Pe.enabled===!0&&Pe.isPresenting===!0&&(Pe.cameraAutoUpdate===!0&&Pe.updateCamera(he),he=Pe.getCamera()),B.isScene===!0&&B.onBeforeRender(D,B,he,G),b=un.get(B,E.length),b.init(he),E.push(b),mt.multiplyMatrices(he.projectionMatrix,he.matrixWorldInverse),Ce.setFromProjectionMatrix(mt),$e=this.localClippingEnabled,He=Fe.init(this.clippingPlanes,$e),x=nt.get(B,T.length),x.init(),T.push(x),Pe.enabled===!0&&Pe.isPresenting===!0){let Qe=D.xr.getDepthSensingMesh();Qe!==null&&Oh(Qe,he,-1/0,D.sortObjects)}Oh(B,he,0,D.sortObjects),x.finish(),D.sortObjects===!0&&x.sort(J,Q),O=Pe.enabled===!1||Pe.isPresenting===!1||Pe.hasDepthSensing()===!1,O&&Ft.addToRenderList(x,B),this.info.render.frame++,He===!0&&Fe.beginShadows();let xe=b.state.shadowsArray;ct.render(xe,B,he),He===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();let be=x.opaque,fe=x.transmissive;if(b.setupLights(),he.isArrayCamera){let Qe=he.cameras;if(fe.length>0)for(let dt=0,St=Qe.length;dt<St;dt++){let Et=Qe[dt];Qm(be,fe,B,Et)}O&&Ft.render(B);for(let dt=0,St=Qe.length;dt<St;dt++){let Et=Qe[dt];Jm(x,B,Et,Et.viewport)}}else fe.length>0&&Qm(be,fe,B,he),O&&Ft.render(B),Jm(x,B,he);G!==null&&(U.updateMultisampleRenderTarget(G),U.updateRenderTargetMipmap(G)),B.isScene===!0&&B.onAfterRender(D,B,he),Qn.resetDefaultState(),F=-1,P=null,E.pop(),E.length>0?(b=E[E.length-1],He===!0&&Fe.setGlobalState(D.clippingPlanes,b.state.camera)):b=null,T.pop(),T.length>0?x=T[T.length-1]:x=null};function Oh(B,he,xe,be){if(B.visible===!1)return;if(B.layers.test(he.layers)){if(B.isGroup)xe=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(he);else if(B.isLight)b.pushLight(B),B.castShadow&&b.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||Ce.intersectsSprite(B)){be&&Ut.setFromMatrixPosition(B.matrixWorld).applyMatrix4(mt);let dt=ye.update(B),St=B.material;St.visible&&x.push(B,dt,St,xe,Ut.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||Ce.intersectsObject(B))){let dt=ye.update(B),St=B.material;if(be&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),Ut.copy(B.boundingSphere.center)):(dt.boundingSphere===null&&dt.computeBoundingSphere(),Ut.copy(dt.boundingSphere.center)),Ut.applyMatrix4(B.matrixWorld).applyMatrix4(mt)),Array.isArray(St)){let Et=dt.groups;for(let Zt=0,sn=Et.length;Zt<sn;Zt++){let Pt=Et[Zt],jn=St[Pt.materialIndex];jn&&jn.visible&&x.push(B,dt,jn,xe,Ut.z,Pt)}}else St.visible&&x.push(B,dt,St,xe,Ut.z,null)}}let Qe=B.children;for(let dt=0,St=Qe.length;dt<St;dt++)Oh(Qe[dt],he,xe,be)}function Jm(B,he,xe,be){let fe=B.opaque,Qe=B.transmissive,dt=B.transparent;b.setupLightsView(xe),He===!0&&Fe.setGlobalState(D.clippingPlanes,xe),be&&ve.viewport(N.copy(be)),fe.length>0&&rd(fe,he,xe),Qe.length>0&&rd(Qe,he,xe),dt.length>0&&rd(dt,he,xe),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1)}function Qm(B,he,xe,be){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[be.id]===void 0&&(b.state.transmissionRenderTarget[be.id]=new kl(1,1,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")||W.has("EXT_color_buffer_float")?Nm:Il,minFilter:To,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Un.workingColorSpace}));let Qe=b.state.transmissionRenderTarget[be.id],dt=be.viewport||N;Qe.setSize(dt.z,dt.w);let St=D.getRenderTarget();D.setRenderTarget(Qe),D.getClearColor(oe),ee=D.getClearAlpha(),ee<1&&D.setClearColor(16777215,.5),D.clear(),O&&Ft.render(xe);let Et=D.toneMapping;D.toneMapping=Oc;let Zt=be.viewport;if(be.viewport!==void 0&&(be.viewport=void 0),b.setupLightsView(be),He===!0&&Fe.setGlobalState(D.clippingPlanes,be),rd(B,xe,be),U.updateMultisampleRenderTarget(Qe),U.updateRenderTargetMipmap(Qe),W.has("WEBGL_multisampled_render_to_texture")===!1){let sn=!1;for(let Pt=0,jn=he.length;Pt<jn;Pt++){let ci=he[Pt],pi=ci.object,Dr=ci.geometry,Gn=ci.material,It=ci.group;if(Gn.side===Xo&&pi.layers.test(be.layers)){let Ao=Gn.side;Gn.side=Do,Gn.needsUpdate=!0,eg(pi,xe,be,Dr,Gn,It),Gn.side=Ao,Gn.needsUpdate=!0,sn=!0}}sn===!0&&(U.updateMultisampleRenderTarget(Qe),U.updateRenderTargetMipmap(Qe))}D.setRenderTarget(St),D.setClearColor(oe,ee),Zt!==void 0&&(be.viewport=Zt),D.toneMapping=Et}function rd(B,he,xe){let be=he.isScene===!0?he.overrideMaterial:null;for(let fe=0,Qe=B.length;fe<Qe;fe++){let dt=B[fe],St=dt.object,Et=dt.geometry,Zt=be===null?dt.material:be,sn=dt.group;St.layers.test(xe.layers)&&eg(St,he,xe,Et,Zt,sn)}}function eg(B,he,xe,be,fe,Qe){B.onBeforeRender(D,he,xe,be,fe,Qe),B.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),fe.onBeforeRender(D,he,xe,be,B,Qe),fe.transparent===!0&&fe.side===Xo&&fe.forceSinglePass===!1?(fe.side=Do,fe.needsUpdate=!0,D.renderBufferDirect(xe,he,be,fe,B,Qe),fe.side=Ia,fe.needsUpdate=!0,D.renderBufferDirect(xe,he,be,fe,B,Qe),fe.side=Xo):D.renderBufferDirect(xe,he,be,fe,B,Qe),B.onAfterRender(D,he,xe,be,fe,Qe)}function od(B,he,xe){he.isScene!==!0&&(he=Dn);let be=ie.get(B),fe=b.state.lights,Qe=b.state.shadowsArray,dt=fe.state.version,St=lt.getParameters(B,fe.state,Qe,he,xe),Et=lt.getProgramCacheKey(St),Zt=be.programs;be.environment=B.isMeshStandardMaterial?he.environment:null,be.fog=he.fog,be.envMap=(B.isMeshStandardMaterial?K:R).get(B.envMap||be.environment),be.envMapRotation=be.environment!==null&&B.envMap===null?he.environmentRotation:B.envMapRotation,Zt===void 0&&(B.addEventListener("dispose",on),Zt=new Map,be.programs=Zt);let sn=Zt.get(Et);if(sn!==void 0){if(be.currentProgram===sn&&be.lightsStateVersion===dt)return tg(B,St),sn}else St.uniforms=lt.getUniforms(B),B.onBeforeCompile(St,D),sn=lt.acquireProgram(St,Et),Zt.set(Et,sn),be.uniforms=St.uniforms;let Pt=be.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(Pt.clippingPlanes=Fe.uniform),tg(B,St),be.needsLights=Ab(B),be.lightsStateVersion=dt,be.needsLights&&(Pt.ambientLightColor.value=fe.state.ambient,Pt.lightProbe.value=fe.state.probe,Pt.directionalLights.value=fe.state.directional,Pt.directionalLightShadows.value=fe.state.directionalShadow,Pt.spotLights.value=fe.state.spot,Pt.spotLightShadows.value=fe.state.spotShadow,Pt.rectAreaLights.value=fe.state.rectArea,Pt.ltc_1.value=fe.state.rectAreaLTC1,Pt.ltc_2.value=fe.state.rectAreaLTC2,Pt.pointLights.value=fe.state.point,Pt.pointLightShadows.value=fe.state.pointShadow,Pt.hemisphereLights.value=fe.state.hemi,Pt.directionalShadowMap.value=fe.state.directionalShadowMap,Pt.directionalShadowMatrix.value=fe.state.directionalShadowMatrix,Pt.spotShadowMap.value=fe.state.spotShadowMap,Pt.spotLightMatrix.value=fe.state.spotLightMatrix,Pt.spotLightMap.value=fe.state.spotLightMap,Pt.pointShadowMap.value=fe.state.pointShadowMap,Pt.pointShadowMatrix.value=fe.state.pointShadowMatrix),be.currentProgram=sn,be.uniformsList=null,sn}function Ah(B){if(B.uniformsList===null){let he=B.currentProgram.getUniforms();B.uniformsList=$f.seqWithValue(he.seq,B.uniforms)}return B.uniformsList}function tg(B,he){let xe=ie.get(B);xe.outputColorSpace=he.outputColorSpace,xe.batching=he.batching,xe.batchingColor=he.batchingColor,xe.instancing=he.instancing,xe.instancingColor=he.instancingColor,xe.instancingMorph=he.instancingMorph,xe.skinning=he.skinning,xe.morphTargets=he.morphTargets,xe.morphNormals=he.morphNormals,xe.morphColors=he.morphColors,xe.morphTargetsCount=he.morphTargetsCount,xe.numClippingPlanes=he.numClippingPlanes,xe.numIntersection=he.numClipIntersection,xe.vertexAlphas=he.vertexAlphas,xe.vertexTangents=he.vertexTangents,xe.toneMapping=he.toneMapping}function Db(B,he,xe,be,fe){he.isScene!==!0&&(he=Dn),U.resetTextureUnits();let Qe=he.fog,dt=be.isMeshStandardMaterial?he.environment:null,St=G===null?D.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:Zr,Et=(be.isMeshStandardMaterial?K:R).get(be.envMap||dt),Zt=be.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,sn=!!xe.attributes.tangent&&(!!be.normalMap||be.anisotropy>0),Pt=!!xe.morphAttributes.position,jn=!!xe.morphAttributes.normal,ci=!!xe.morphAttributes.color,pi=Oc;be.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(pi=D.toneMapping);let Dr=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,Gn=Dr!==void 0?Dr.length:0,It=ie.get(be),Ao=b.state.lights;if(He===!0&&($e===!0||B!==P)){let go=B===P&&be.id===F;Fe.setState(be,B,go)}let Yn=!1;be.version===It.__version?(It.needsLights&&It.lightsStateVersion!==Ao.state.version||It.outputColorSpace!==St||fe.isBatchedMesh&&It.batching===!1||!fe.isBatchedMesh&&It.batching===!0||fe.isBatchedMesh&&It.batchingColor===!0&&fe.colorTexture===null||fe.isBatchedMesh&&It.batchingColor===!1&&fe.colorTexture!==null||fe.isInstancedMesh&&It.instancing===!1||!fe.isInstancedMesh&&It.instancing===!0||fe.isSkinnedMesh&&It.skinning===!1||!fe.isSkinnedMesh&&It.skinning===!0||fe.isInstancedMesh&&It.instancingColor===!0&&fe.instanceColor===null||fe.isInstancedMesh&&It.instancingColor===!1&&fe.instanceColor!==null||fe.isInstancedMesh&&It.instancingMorph===!0&&fe.morphTexture===null||fe.isInstancedMesh&&It.instancingMorph===!1&&fe.morphTexture!==null||It.envMap!==Et||be.fog===!0&&It.fog!==Qe||It.numClippingPlanes!==void 0&&(It.numClippingPlanes!==Fe.numPlanes||It.numIntersection!==Fe.numIntersection)||It.vertexAlphas!==Zt||It.vertexTangents!==sn||It.morphTargets!==Pt||It.morphNormals!==jn||It.morphColors!==ci||It.toneMapping!==pi||It.morphTargetsCount!==Gn)&&(Yn=!0):(Yn=!0,It.__version=be.version);let mo=It.currentProgram;Yn===!0&&(mo=od(be,he,fe));let Rs=!1,Fr=!1,Wc=!1,ui=mo.getUniforms(),Io=It.uniforms;if(ve.useProgram(mo.program)&&(Rs=!0,Fr=!0,Wc=!0),be.id!==F&&(F=be.id,Fr=!0),Rs||P!==B){ve.buffers.depth.getReversed()?(Ve.copy(B.projectionMatrix),Jte(Ve),Qte(Ve),ui.setValue(j,"projectionMatrix",Ve)):ui.setValue(j,"projectionMatrix",B.projectionMatrix),ui.setValue(j,"viewMatrix",B.matrixWorldInverse);let ks=ui.map.cameraPosition;ks!==void 0&&ks.setValue(j,pt.setFromMatrixPosition(B.matrixWorld)),ne.logarithmicDepthBuffer&&ui.setValue(j,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(be.isMeshPhongMaterial||be.isMeshToonMaterial||be.isMeshLambertMaterial||be.isMeshBasicMaterial||be.isMeshStandardMaterial||be.isShaderMaterial)&&ui.setValue(j,"isOrthographic",B.isOrthographicCamera===!0),P!==B&&(P=B,Fr=!0,Wc=!0)}if(fe.isSkinnedMesh){ui.setOptional(j,fe,"bindMatrix"),ui.setOptional(j,fe,"bindMatrixInverse");let go=fe.skeleton;go&&(go.boneTexture===null&&go.computeBoneTexture(),ui.setValue(j,"boneTexture",go.boneTexture,U))}fe.isBatchedMesh&&(ui.setOptional(j,fe,"batchingTexture"),ui.setValue(j,"batchingTexture",fe._matricesTexture,U),ui.setOptional(j,fe,"batchingIdTexture"),ui.setValue(j,"batchingIdTexture",fe._indirectTexture,U),ui.setOptional(j,fe,"batchingColorTexture"),fe._colorsTexture!==null&&ui.setValue(j,"batchingColorTexture",fe._colorsTexture,U));let Ba=xe.morphAttributes;if((Ba.position!==void 0||Ba.normal!==void 0||Ba.color!==void 0)&&At.update(fe,xe,mo),(Fr||It.receiveShadow!==fe.receiveShadow)&&(It.receiveShadow=fe.receiveShadow,ui.setValue(j,"receiveShadow",fe.receiveShadow)),be.isMeshGouraudMaterial&&be.envMap!==null&&(Io.envMap.value=Et,Io.flipEnvMap.value=Et.isCubeTexture&&Et.isRenderTargetTexture===!1?-1:1),be.isMeshStandardMaterial&&be.envMap===null&&he.environment!==null&&(Io.envMapIntensity.value=he.environmentIntensity),Fr&&(ui.setValue(j,"toneMappingExposure",D.toneMappingExposure),It.needsLights&&Ob(Io,Wc),Qe&&be.fog===!0&&et.refreshFogUniforms(Io,Qe),et.refreshMaterialUniforms(Io,be,de,le,b.state.transmissionRenderTarget[B.id]),$f.upload(j,Ah(It),Io,U)),be.isShaderMaterial&&be.uniformsNeedUpdate===!0&&($f.upload(j,Ah(It),Io,U),be.uniformsNeedUpdate=!1),be.isSpriteMaterial&&ui.setValue(j,"center",fe.center),ui.setValue(j,"modelViewMatrix",fe.modelViewMatrix),ui.setValue(j,"normalMatrix",fe.normalMatrix),ui.setValue(j,"modelMatrix",fe.matrixWorld),be.isShaderMaterial||be.isRawShaderMaterial){let go=be.uniformsGroups;for(let ks=0,Jo=go.length;ks<Jo;ks++){let sd=go[ks];ce.update(sd,mo),ce.bind(sd,mo)}}return mo}function Ob(B,he){B.ambientLightColor.needsUpdate=he,B.lightProbe.needsUpdate=he,B.directionalLights.needsUpdate=he,B.directionalLightShadows.needsUpdate=he,B.pointLights.needsUpdate=he,B.pointLightShadows.needsUpdate=he,B.spotLights.needsUpdate=he,B.spotLightShadows.needsUpdate=he,B.rectAreaLights.needsUpdate=he,B.hemisphereLights.needsUpdate=he}function Ab(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return z},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(B,he,xe){ie.get(B.texture).__webglTexture=he,ie.get(B.depthTexture).__webglTexture=xe;let be=ie.get(B);be.__hasExternalTextures=!0,be.__autoAllocateDepthBuffer=xe===void 0,be.__autoAllocateDepthBuffer||W.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),be.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(B,he){let xe=ie.get(B);xe.__webglFramebuffer=he,xe.__useDefaultFramebuffer=he===void 0},this.setRenderTarget=function(B,he=0,xe=0){G=B,z=he,k=xe;let be=!0,fe=null,Qe=!1,dt=!1;if(B){let Et=ie.get(B);if(Et.__useDefaultFramebuffer!==void 0)ve.bindFramebuffer(j.FRAMEBUFFER,null),be=!1;else if(Et.__webglFramebuffer===void 0)U.setupRenderTarget(B);else if(Et.__hasExternalTextures)U.rebindTextures(B,ie.get(B.texture).__webglTexture,ie.get(B.depthTexture).__webglTexture);else if(B.depthBuffer){let Pt=B.depthTexture;if(Et.__boundDepthTexture!==Pt){if(Pt!==null&&ie.has(Pt)&&(B.width!==Pt.image.width||B.height!==Pt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");U.setupDepthRenderbuffer(B)}}let Zt=B.texture;(Zt.isData3DTexture||Zt.isDataArrayTexture||Zt.isCompressedArrayTexture)&&(dt=!0);let sn=ie.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(sn[he])?fe=sn[he][xe]:fe=sn[he],Qe=!0):B.samples>0&&U.useMultisampledRTT(B)===!1?fe=ie.get(B).__webglMultisampledFramebuffer:Array.isArray(sn)?fe=sn[xe]:fe=sn,N.copy(B.viewport),S.copy(B.scissor),q=B.scissorTest}else N.copy(Ie).multiplyScalar(de).floor(),S.copy(Ue).multiplyScalar(de).floor(),q=ke;if(ve.bindFramebuffer(j.FRAMEBUFFER,fe)&&be&&ve.drawBuffers(B,fe),ve.viewport(N),ve.scissor(S),ve.setScissorTest(q),Qe){let Et=ie.get(B.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+he,Et.__webglTexture,xe)}else if(dt){let Et=ie.get(B.texture),Zt=he||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,Et.__webglTexture,xe||0,Zt)}F=-1},this.readRenderTargetPixels=function(B,he,xe,be,fe,Qe,dt){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let St=ie.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&dt!==void 0&&(St=St[dt]),St){ve.bindFramebuffer(j.FRAMEBUFFER,St);try{let Et=B.texture,Zt=Et.format,sn=Et.type;if(!ne.textureFormatReadable(Zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ne.textureTypeReadable(sn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}he>=0&&he<=B.width-be&&xe>=0&&xe<=B.height-fe&&j.readPixels(he,xe,be,fe,rn.convert(Zt),rn.convert(sn),Qe)}finally{let Et=G!==null?ie.get(G).__webglFramebuffer:null;ve.bindFramebuffer(j.FRAMEBUFFER,Et)}}},this.readRenderTargetPixelsAsync=function(B,he,xe,be,fe,Qe,dt){return Ka(this,null,function*(){if(!(B&&B.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let St=ie.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&dt!==void 0&&(St=St[dt]),St){let Et=B.texture,Zt=Et.format,sn=Et.type;if(!ne.textureFormatReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ne.textureTypeReadable(sn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(he>=0&&he<=B.width-be&&xe>=0&&xe<=B.height-fe){ve.bindFramebuffer(j.FRAMEBUFFER,St);let Pt=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,Pt),j.bufferData(j.PIXEL_PACK_BUFFER,Qe.byteLength,j.STREAM_READ),j.readPixels(he,xe,be,fe,rn.convert(Zt),rn.convert(sn),0);let jn=G!==null?ie.get(G).__webglFramebuffer:null;ve.bindFramebuffer(j.FRAMEBUFFER,jn);let ci=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),yield Kte(j,ci,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,Pt),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Qe),j.deleteBuffer(Pt),j.deleteSync(ci),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(B,he=null,xe=0){B.isTexture!==!0&&(_m("WebGLRenderer: copyFramebufferToTexture function signature has changed."),he=arguments[0]||null,B=arguments[1]);let be=Math.pow(2,-xe),fe=Math.floor(B.image.width*be),Qe=Math.floor(B.image.height*be),dt=he!==null?he.x:0,St=he!==null?he.y:0;U.setTexture2D(B,0),j.copyTexSubImage2D(j.TEXTURE_2D,xe,0,0,dt,St,fe,Qe),ve.unbindTexture()},this.copyTextureToTexture=function(B,he,xe=null,be=null,fe=0){B.isTexture!==!0&&(_m("WebGLRenderer: copyTextureToTexture function signature has changed."),be=arguments[0]||null,B=arguments[1],he=arguments[2],fe=arguments[3]||0,xe=null);let Qe,dt,St,Et,Zt,sn,Pt,jn,ci,pi=B.isCompressedTexture?B.mipmaps[fe]:B.image;xe!==null?(Qe=xe.max.x-xe.min.x,dt=xe.max.y-xe.min.y,St=xe.isBox3?xe.max.z-xe.min.z:1,Et=xe.min.x,Zt=xe.min.y,sn=xe.isBox3?xe.min.z:0):(Qe=pi.width,dt=pi.height,St=pi.depth||1,Et=0,Zt=0,sn=0),be!==null?(Pt=be.x,jn=be.y,ci=be.z):(Pt=0,jn=0,ci=0);let Dr=rn.convert(he.format),Gn=rn.convert(he.type),It;he.isData3DTexture?(U.setTexture3D(he,0),It=j.TEXTURE_3D):he.isDataArrayTexture||he.isCompressedArrayTexture?(U.setTexture2DArray(he,0),It=j.TEXTURE_2D_ARRAY):(U.setTexture2D(he,0),It=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,he.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,he.unpackAlignment);let Ao=j.getParameter(j.UNPACK_ROW_LENGTH),Yn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),mo=j.getParameter(j.UNPACK_SKIP_PIXELS),Rs=j.getParameter(j.UNPACK_SKIP_ROWS),Fr=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,pi.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,pi.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Et),j.pixelStorei(j.UNPACK_SKIP_ROWS,Zt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,sn);let Wc=B.isDataArrayTexture||B.isData3DTexture,ui=he.isDataArrayTexture||he.isData3DTexture;if(B.isRenderTargetTexture||B.isDepthTexture){let Io=ie.get(B),Ba=ie.get(he),go=ie.get(Io.__renderTarget),ks=ie.get(Ba.__renderTarget);ve.bindFramebuffer(j.READ_FRAMEBUFFER,go.__webglFramebuffer),ve.bindFramebuffer(j.DRAW_FRAMEBUFFER,ks.__webglFramebuffer);for(let Jo=0;Jo<St;Jo++)Wc&&j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ie.get(B).__webglTexture,fe,sn+Jo),B.isDepthTexture?(ui&&j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,ie.get(he).__webglTexture,fe,ci+Jo),j.blitFramebuffer(Et,Zt,Qe,dt,Pt,jn,Qe,dt,j.DEPTH_BUFFER_BIT,j.NEAREST)):ui?j.copyTexSubImage3D(It,fe,Pt,jn,ci+Jo,Et,Zt,Qe,dt):j.copyTexSubImage2D(It,fe,Pt,jn,ci+Jo,Et,Zt,Qe,dt);ve.bindFramebuffer(j.READ_FRAMEBUFFER,null),ve.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else ui?B.isDataTexture||B.isData3DTexture?j.texSubImage3D(It,fe,Pt,jn,ci,Qe,dt,St,Dr,Gn,pi.data):he.isCompressedArrayTexture?j.compressedTexSubImage3D(It,fe,Pt,jn,ci,Qe,dt,St,Dr,pi.data):j.texSubImage3D(It,fe,Pt,jn,ci,Qe,dt,St,Dr,Gn,pi):B.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,fe,Pt,jn,Qe,dt,Dr,Gn,pi.data):B.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,fe,Pt,jn,pi.width,pi.height,Dr,pi.data):j.texSubImage2D(j.TEXTURE_2D,fe,Pt,jn,Qe,dt,Dr,Gn,pi);j.pixelStorei(j.UNPACK_ROW_LENGTH,Ao),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Yn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,mo),j.pixelStorei(j.UNPACK_SKIP_ROWS,Rs),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Fr),fe===0&&he.generateMipmaps&&j.generateMipmap(It),ve.unbindTexture()},this.copyTextureToTexture3D=function(B,he,xe=null,be=null,fe=0){return B.isTexture!==!0&&(_m("WebGLRenderer: copyTextureToTexture3D function signature has changed."),xe=arguments[0]||null,be=arguments[1]||null,B=arguments[2],he=arguments[3],fe=arguments[4]||0),_m('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(B,he,xe,be,fe)},this.initRenderTarget=function(B){ie.get(B).__webglFramebuffer===void 0&&U.setupRenderTarget(B)},this.initTexture=function(B){B.isCubeTexture?U.setTextureCube(B,0):B.isData3DTexture?U.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?U.setTexture2DArray(B,0):U.setTexture2D(B,0),ve.unbindTexture()},this.resetState=function(){z=0,k=0,G=null,ve.reset(),Qn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ol}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorspace=Un._getDrawingBufferColorSpace(t),e.unpackColorSpace=Un._getUnpackColorSpace()}};var Iy=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new jt(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},Dm=class extends pr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Wu,this.environmentIntensity=1,this.environmentRotation=new Wu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Om=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=MP,this.updateRanges=[],this.version=0,this.uuid=sa()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[i+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=sa()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},ho=new te,Am=class n{constructor(t,e,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ho.fromBufferAttribute(this,e),ho.applyMatrix4(t),this.setXYZ(e,ho.x,ho.y,ho.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ho.fromBufferAttribute(this,e),ho.applyNormalMatrix(t),this.setXYZ(e,ho.x,ho.y,ho.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ho.fromBufferAttribute(this,e),ho.transformDirection(t),this.setXYZ(e,ho.x,ho.y,ho.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=ra(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=ai(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=ai(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=ai(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=ai(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=ai(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ra(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ra(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ra(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ra(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=ai(e,this.array),i=ai(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=ai(e,this.array),i=ai(i,this.array),r=ai(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this}setXYZW(t,e,i,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=ai(e,this.array),i=ai(i,this.array),r=ai(r,this.array),o=ai(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return new Di(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var bU=new te,CU=new _n,MU=new _n,qse=new te,wU=new cn,cy=new te,NS=new Zo,EU=new cn,FS=new ju,Ry=class extends Ei{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=SL,this.bindMatrix=new cn,this.bindMatrixInverse=new cn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ji),this.boundingBox.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,cy),this.boundingBox.expandByPoint(cy)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zo),this.boundingSphere.makeEmpty();let e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,cy),this.boundingSphere.expandByPoint(cy)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),NS.copy(this.boundingSphere),NS.applyMatrix4(r),t.ray.intersectsSphere(NS)!==!1&&(EU.copy(r).invert(),FS.copy(t.ray).applyMatrix4(EU),!(this.boundingBox!==null&&FS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,FS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new _n,e=this.geometry.attributes.skinWeight;for(let i=0,r=e.count;i<r;i++){t.fromBufferAttribute(e,i);let o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===SL?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===xte?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,r=this.geometry;CU.fromBufferAttribute(r.attributes.skinIndex,t),MU.fromBufferAttribute(r.attributes.skinWeight,t),bU.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){let s=MU.getComponent(o);if(s!==0){let a=CU.getComponent(o);wU.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(qse.copy(bU).applyMatrix4(wU),s)}}return e.applyMatrix4(this.bindMatrixInverse)}},Im=class extends pr{constructor(){super(),this.isBone=!0,this.type="Bone"}},ky=class extends Es{constructor(t=null,e=1,i=1,r,o,s,a,l,u=$r,f=$r,h,m){super(null,s,a,l,u,f,r,o,h,m),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},SU=new cn,Yse=new cn,Ny=class n{constructor(t=[],e=[]){this.uuid=sa(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new cn)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){let i=new cn;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){let i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=t.length;o<s;o++){let a=t[o]?t[o].matrixWorld:Yse;SU.multiplyMatrices(a,e[o]),SU.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new ky(e,t,t,bs,oa);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){let r=this.bones[e];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,r=t.bones.length;i<r;i++){let o=t.bones[i],s=e[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Im),this.bones.push(s),this.boneInverses.push(new cn().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let r=0,o=e.length;r<o;r++){let s=e[r];t.bones.push(s.uuid);let a=i[r];t.boneInverses.push(a.toArray())}return t}},Gu=class extends Di{constructor(t,e,i,r=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Uf=new cn,PU=new cn,uy=[],TU=new Ji,Xse=new cn,hm=new Ei,pm=new Zo,Fy=class extends Ei{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Gu(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Xse)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new Ji),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Uf),TU.copy(t.boundingBox).applyMatrix4(Uf),this.boundingBox.union(TU)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zo),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Uf),pm.copy(t.boundingSphere).applyMatrix4(Uf),this.boundingSphere.union(pm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=t*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(t,e){let i=this.matrixWorld,r=this.count;if(hm.geometry=this.geometry,hm.material=this.material,hm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),pm.copy(this.boundingSphere),pm.applyMatrix4(i),t.ray.intersectsSphere(pm)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,Uf),PU.multiplyMatrices(i,Uf),hm.matrixWorld=PU,hm.raycast(t,uy);for(let s=0,a=uy.length;s<a;s++){let l=uy[s];l.instanceId=o,l.object=this,e.push(l)}uy.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new Gu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new ky(new Float32Array(r*this.count),r,this.count,sT,oa));let o=this.morphTexture.source.data.data,s=0;for(let u=0;u<i.length;u++)s+=i[u];let a=this.geometry.morphTargetsRelative?1:1-s,l=r*t;o[l]=a,o.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var $u=class extends Yr{static get type(){return"LineBasicMaterial"}constructor(t){super(),this.isLineBasicMaterial=!0,this.color=new jt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},Ly=new te,Uy=new te,DU=new cn,mm=new ju,dy=new Zo,LS=new te,OU=new te,nh=class extends pr{constructor(t=new Oo,e=new $u){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let r=1,o=e.count;r<o;r++)Ly.fromBufferAttribute(e,r-1),Uy.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Ly.distanceTo(Uy);t.setAttribute("lineDistance",new Cs(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),dy.copy(i.boundingSphere),dy.applyMatrix4(r),dy.radius+=o,t.ray.intersectsSphere(dy)===!1)return;DU.copy(r).invert(),mm.copy(t.ray).applyMatrix4(DU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){let p=Math.max(0,s.start),y=Math.min(f.count,s.start+s.count);for(let M=p,x=y-1;M<x;M+=u){let b=f.getX(M),T=f.getX(M+1),E=fy(this,t,mm,l,b,T);E&&e.push(E)}if(this.isLineLoop){let M=f.getX(y-1),x=f.getX(p),b=fy(this,t,mm,l,M,x);b&&e.push(b)}}else{let p=Math.max(0,s.start),y=Math.min(m.count,s.start+s.count);for(let M=p,x=y-1;M<x;M+=u){let b=fy(this,t,mm,l,M,M+1);b&&e.push(b)}if(this.isLineLoop){let M=fy(this,t,mm,l,y-1,p);M&&e.push(M)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function fy(n,t,e,i,r,o){let s=n.geometry.attributes.position;if(Ly.fromBufferAttribute(s,r),Uy.fromBufferAttribute(s,o),e.distanceSqToSegment(Ly,Uy,LS,OU)>i)return;LS.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(LS);if(!(l<t.near||l>t.far))return{distance:l,point:OU.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}var AU=new te,IU=new te,Vy=class extends nh{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let r=0,o=e.count;r<o;r+=2)AU.fromBufferAttribute(e,r),IU.fromBufferAttribute(e,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+AU.distanceTo(IU);t.setAttribute("lineDistance",new Cs(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},ih=class extends nh{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}},Rm=class extends Yr{static get type(){return"PointsMaterial"}constructor(t){super(),this.isPointsMaterial=!0,this.color=new jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},RU=new cn,zP=new ju,hy=new Zo,py=new te,zy=class extends pr{constructor(t=new Oo,e=new Rm){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hy.copy(i.boundingSphere),hy.applyMatrix4(r),hy.radius+=o,t.ray.intersectsSphere(hy)===!1)return;RU.copy(r).invert(),zP.copy(t.ray).applyMatrix4(RU);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){let m=Math.max(0,s.start),p=Math.min(u.count,s.start+s.count);for(let y=m,M=p;y<M;y++){let x=u.getX(y);py.fromBufferAttribute(h,x),kU(py,x,l,r,t,e,this)}}else{let m=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let y=m,M=p;y<M;y++)py.fromBufferAttribute(h,y),kU(py,y,l,r,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let r=e[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function kU(n,t,e,i,r,o,s){let a=zP.distanceSqToPoint(n);if(a<e){let l=new te;zP.closestPointToPoint(n,l),l.applyMatrix4(i);let u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}var Fa=class extends Yr{static get type(){return"MeshStandardMaterial"}constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eV,this.normalScale=new pn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Wu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Ko=class extends Fa{static get type(){return"MeshPhysicalMaterial"}constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new jt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}};function my(n,t,e){return!n||!e&&n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function Zse(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Kse(n){function t(r,o){return n[r]-n[o]}let e=n.length,i=new Array(e);for(let r=0;r!==e;++r)i[r]=r;return i.sort(t),i}function NU(n,t,e){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=e[o]*t;for(let l=0;l!==t;++l)r[s++]=n[a+l]}return r}function uV(n,t,e,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),e.push.apply(e,s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(e,e.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),e.push(s)),o=n[r++];while(o!==void 0)}var Ac=class{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,r=e[i],o=e[i-1];e:{t:{let s;n:{i:if(!(t<r)){for(let a=i+2;;){if(r===void 0){if(t<o)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=e[++i],t<r)break t}s=e.length;break n}if(!(t>=o)){let a=e[1];t<a&&(i=2,o=a);for(let l=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=o,o=e[--i-1],t>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;t<e[a]?s=a:i=a+1}if(r=e[i],o=e[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=i[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},BP=class extends Ac{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:zf,endingEnd:zf}}intervalChanged_(t,e,i){let r=this.parameterPositions,o=t-2,s=t+1,a=r[o],l=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Bf:o=t,a=2*e-i;break;case by:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Bf:s=t,l=2*i-e;break;case by:s=1,l=i+r[1]-r[0];break;default:s=t-1,l=e}let u=(i-e)*.5,f=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(l-i),this._offsetPrev=o*f,this._offsetNext=s*f}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,p=this._weightNext,y=(i-e)/(r-e),M=y*y,x=M*y,b=-m*x+2*m*M-m*y,T=(1+m)*x+(-1.5-2*m)*M+(-.5+m)*y+1,E=(-1-p)*x+(1.5+p)*M+.5*y,D=p*x-p*M;for(let L=0;L!==a;++L)o[L]=b*s[f+L]+T*s[u+L]+E*s[l+L]+D*s[h+L];return o}},By=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,u=l-a,f=(i-e)/(r-e),h=1-f;for(let m=0;m!==a;++m)o[m]=s[u+m]*h+s[l+m]*f;return o}},HP=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}},ws=class{constructor(t,e,i,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=my(e,this.TimeBufferType),this.values=my(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:my(t.times,Array),values:my(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(i.interpolation=r)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new HP(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new By(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new BP(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Jf:e=this.InterpolantFactoryMethodDiscrete;break;case Qf:e=this.InterpolantFactoryMethodLinear;break;case lS:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jf;case this.InterpolantFactoryMethodLinear:return Qf;case this.InterpolantFactoryMethodSmooth:return lS}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<t;)++o;for(;s!==-1&&i[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),t=!1;break}s=l}if(r!==void 0&&Zse(r))for(let a=0,l=r.length;a!==l;++a){let u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===lS,o=t.length-1,s=1;for(let a=1;a<o;++a){let l=!1,u=t[a],f=t[a+1];if(u!==f&&(a!==1||u!==t[0]))if(r)l=!0;else{let h=a*i,m=h-i,p=h+i;for(let y=0;y!==i;++y){let M=e[h+y];if(M!==e[m+y]||M!==e[p+y]){l=!0;break}}}if(l){if(a!==s){t[s]=t[a];let h=a*i,m=s*i;for(let p=0;p!==i;++p)e[m+p]=e[h+p]}++s}}if(o>0){t[s]=t[o];for(let a=o*i,l=s*i,u=0;u!==i;++u)e[l+u]=e[a+u];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,r=new i(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};ws.prototype.TimeBufferType=Float32Array;ws.prototype.ValueBufferType=Float32Array;ws.prototype.DefaultInterpolation=Qf;var Ic=class extends ws{constructor(t,e,i){super(t,e,i)}};Ic.prototype.ValueTypeName="bool";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=Jf;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;var Hy=class extends ws{};Hy.prototype.ValueTypeName="color";var Nl=class extends ws{};Nl.prototype.ValueTypeName="number";var jP=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-e)/(r-e),u=t*a;for(let f=u+a;u!==f;u+=4)qr.slerpFlat(o,0,s,u-a,s,u,l);return o}},Fl=class extends ws{InterpolantFactoryMethodLinear(t){return new jP(this.times,this.values,this.getValueSize(),t)}};Fl.prototype.ValueTypeName="quaternion";Fl.prototype.InterpolantFactoryMethodSmooth=void 0;var Rc=class extends ws{constructor(t,e,i){super(t,e,i)}};Rc.prototype.ValueTypeName="string";Rc.prototype.ValueBufferType=Array;Rc.prototype.DefaultInterpolation=Jf;Rc.prototype.InterpolantFactoryMethodLinear=void 0;Rc.prototype.InterpolantFactoryMethodSmooth=void 0;var Ll=class extends ws{};Ll.prototype.ValueTypeName="vector";var rh=class{constructor(t="",e=-1,i=[],r=dT){this.name=t,this.tracks=i,this.duration=e,this.blendMode=r,this.uuid=sa(),this.duration<0&&this.resetDuration()}static parse(t){let e=[],i=t.tracks,r=1/(t.fps||1);for(let s=0,a=i.length;s!==a;++s)e.push(Qse(i[s]).scale(r));let o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){let e=[],i=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,s=i.length;o!==s;++o)e.push(ws.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(t,e,i,r){let o=e.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);let f=Kse(l);l=NU(l,1,f),u=NU(u,1,f),!r&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new Nl(".morphTargetInfluences["+e[a].name+"]",l,u).scale(1/i))}return new this(t,-1,s)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let r=t;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){let u=t[a],f=u.name.match(o);if(f&&f.length>1){let h=f[1],m=r[h];m||(r[h]=m=[]),m.push(u)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],e,i));return s}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(h,m,p,y,M){if(p.length!==0){let x=[],b=[];uV(p,x,b,y),x.length!==0&&M.push(new h(m,x,b))}},r=[],o=t.name||"default",s=t.fps||30,a=t.blendMode,l=t.length||-1,u=t.hierarchy||[];for(let h=0;h<u.length;h++){let m=u[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){let p={},y;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(let M=0;M<m[y].morphTargets.length;M++)p[m[y].morphTargets[M]]=-1;for(let M in p){let x=[],b=[];for(let T=0;T!==m[y].morphTargets.length;++T){let E=m[y];x.push(E.time),b.push(E.morphTarget===M?1:0)}r.push(new Nl(".morphTargetInfluence["+M+"]",x,b))}l=p.length*s}else{let p=".bones["+e[h].name+"]";i(Ll,p+".position",m,"pos",r),i(Fl,p+".quaternion",m,"rot",r),i(Ll,p+".scale",m,"scl",r)}}return r.length===0?null:new this(o,l,r,a)}resetDuration(){let t=this.tracks,e=0;for(let i=0,r=t.length;i!==r;++i){let o=this.tracks[i];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function Jse(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nl;case"vector":case"vector2":case"vector3":case"vector4":return Ll;case"color":return Hy;case"quaternion":return Fl;case"bool":case"boolean":return Ic;case"string":return Rc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Qse(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=Jse(n.type);if(n.times===void 0){let e=[],i=[];uV(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var Aa={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},WP=class{constructor(t,e,i){let r=this,o=!1,s=0,a=0,l,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(f){a++,o===!1&&r.onStart!==void 0&&r.onStart(f,s,a),o=!0},this.itemEnd=function(f){s++,r.onProgress!==void 0&&r.onProgress(f,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){let h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,m=u.length;h<m;h+=2){let p=u[h],y=u[h+1];if(p.global&&(p.lastIndex=0),p.test(f))return y}return null}}},eae=new WP,lh=(()=>{class n{constructor(e){this.manager=e!==void 0?e:eae,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let r=this;return new Promise(function(o,s){r.load(e,o,i,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Sl={},GP=class extends Error{constructor(t,e){super(t),this.response=e}},qu=class extends lh{constructor(t){super(t)}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=Aa.get(t);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(Sl[t]!==void 0){Sl[t].push({onLoad:e,onProgress:i,onError:r});return}Sl[t]=[],Sl[t].push({onLoad:e,onProgress:i,onError:r});let s=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let f=Sl[t],h=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=m?parseInt(m):0,y=p!==0,M=0,x=new ReadableStream({start(b){T();function T(){h.read().then(({done:E,value:D})=>{if(E)b.close();else{M+=D.byteLength;let L=new ProgressEvent("progress",{lengthComputable:y,loaded:M,total:p});for(let z=0,k=f.length;z<k;z++){let G=f[z];G.onProgress&&G.onProgress(L)}b.enqueue(D),T()}},E=>{b.error(E)})}}});return new Response(x)}else throw new GP(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),m=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(m);return u.arrayBuffer().then(y=>p.decode(y))}}}).then(u=>{Aa.add(t,u);let f=Sl[t];delete Sl[t];for(let h=0,m=f.length;h<m;h++){let p=f[h];p.onLoad&&p.onLoad(u)}}).catch(u=>{let f=Sl[t];if(f===void 0)throw this.manager.itemError(t),u;delete Sl[t];for(let h=0,m=f.length;h<m;h++){let p=f[h];p.onError&&p.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}};var $P=class extends lh{constructor(t){super(t)}load(t,e,i,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Aa.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;let a=Em("img");function l(){f(),Aa.add(t,this),e&&e(this),o.manager.itemEnd(t)}function u(h){f(),r&&r(h),o.manager.itemError(t),o.manager.itemEnd(t)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(t),a.src=t,a}};var Xr=class extends lh{constructor(t){super(t)}load(t,e,i,r){let o=new Es,s=new $P(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(a){o.image=a,o.needsUpdate=!0,e!==void 0&&e(o)},i,r),o}},oh=class extends pr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new jt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}};var US=new cn,FU=new te,LU=new te,km=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pn(512,512),this.map=null,this.mapPass=null,this.matrix=new cn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tm,this._frameExtents=new pn(1,1),this._viewportCount=1,this._viewports=[new _n(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;FU.setFromMatrixPosition(t.matrixWorld),e.position.copy(FU),LU.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(LU),e.updateMatrixWorld(),US.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(US),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(US)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},qP=class extends km{constructor(){super(new hr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let e=this.camera,i=eh*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;(i!==e.fov||r!==e.aspect||o!==e.far)&&(e.fov=i,e.aspect=r,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},jy=class extends oh{constructor(t,e,i=0,r=Math.PI/3,o=0,s=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pr.DEFAULT_UP),this.updateMatrix(),this.target=new pr,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new qP}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},UU=new cn,gm=new te,VS=new te,YP=class extends km{constructor(){super(new hr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pn(4,2),this._viewportCount=6,this._viewports=[new _n(2,1,1,1),new _n(0,1,1,1),new _n(3,1,1,1),new _n(1,1,1,1),new _n(3,0,1,1),new _n(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,r=this.matrix,o=t.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),gm.setFromMatrixPosition(t.matrixWorld),i.position.copy(gm),VS.copy(i.position),VS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(VS),i.updateMatrixWorld(),r.makeTranslation(-gm.x,-gm.y,-gm.z),UU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UU)}},Yu=class extends oh{constructor(t,e,i=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new YP}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},XP=class extends km{constructor(){super(new Na(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},sh=class extends oh{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pr.DEFAULT_UP),this.updateMatrix(),this.target=new pr,this.shadow=new XP}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},Wy=class extends oh{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var kc=class{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){let e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}};var Gy=class extends lh{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let o=this,s=Aa.get(t);if(s!==void 0){if(o.manager.itemStart(t),s.then){s.then(u=>{e&&e(u),o.manager.itemEnd(t)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(t,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(u){return Aa.add(t,u),e&&e(u),o.manager.itemEnd(t),u}).catch(function(u){r&&r(u),Aa.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)});Aa.add(t,l),o.manager.itemStart(t)}};var $y=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=VU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=VU();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};function VU(){return performance.now()}var ZP=class{constructor(t,e,i){this.binding=t,this.valueSize=i;let r,o,s;switch(e){case"quaternion":r=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){let i=this.buffer,r=this.valueSize,o=t*r+r,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==r;++a)i[o+a]=i[a];s=e}else{s+=e;let a=e/s;this._mixBufferRegion(i,o,0,a,r)}this.cumulativeWeight=s}accumulateAdditive(t){let e=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let e=this.valueSize,i=this.buffer,r=t*e+e,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let l=e*this._origIndex;this._mixBufferRegion(i,r,l,1-o,e)}s>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(let l=e,u=e+e;l!==u;++l)if(i[l]!==i[l+e]){a.setValue(i,r);break}}saveOriginalState(){let t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(let o=i,s=r;o!==s;++o)e[o]=e[r+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,r,o){if(r>=.5)for(let s=0;s!==o;++s)t[e+s]=t[i+s]}_slerp(t,e,i,r){qr.slerpFlat(t,e,t,e,t,i,r)}_slerpAdditive(t,e,i,r,o){let s=this._workIndex*o;qr.multiplyQuaternionsFlat(t,s,t,e,t,i),qr.slerpFlat(t,e,t,e,t,s,r)}_lerp(t,e,i,r,o){let s=1-r;for(let a=0;a!==o;++a){let l=e+a;t[l]=t[l]*s+t[i+a]*r}}_lerpAdditive(t,e,i,r,o){for(let s=0;s!==o;++s){let a=e+s;t[a]=t[a]+t[i+s]*r}}},pT="\\[\\]\\.:\\/",tae=new RegExp("["+pT+"]","g"),mT="[^"+pT+"]",nae="[^"+pT.replace("\\.","")+"]",iae=/((?:WC+[\/:])*)/.source.replace("WC",mT),rae=/(WCOD+)?/.source.replace("WCOD",nae),oae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mT),sae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mT),aae=new RegExp("^"+iae+rae+oae+sae+"$"),lae=["material","materials","bones","map"],KP=class{constructor(t,e,i){let r=i||Ni.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ni=(()=>{class n{constructor(e,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,r){return e&&e.isAnimationObjectGroup?new n.Composite(e,i,r):new n(e,i,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(tae,"")}static parseTrackName(e){let i=aae.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);lae.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(i);if(r!==void 0)return r}if(e.children){let r=function(s){for(let a=0;a<s.length;a++){let l=s[a];if(l.name===i||l.uuid===i)return l;let u=r(l.children);if(u)return u}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[i++]=r[o]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(e||(e=n.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let f=i.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===f){f=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}let a=e[o];if(a===void 0){let f=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+o+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=KP,n})();Ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ni.prototype.GetterByBindingType=[Ni.prototype._getValue_direct,Ni.prototype._getValue_array,Ni.prototype._getValue_arrayElement,Ni.prototype._getValue_toArray];Ni.prototype.SetterByBindingTypeAndVersioning=[[Ni.prototype._setValue_direct,Ni.prototype._setValue_direct_setNeedsUpdate,Ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_array,Ni.prototype._setValue_array_setNeedsUpdate,Ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_arrayElement,Ni.prototype._setValue_arrayElement_setNeedsUpdate,Ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ni.prototype._setValue_fromArray,Ni.prototype._setValue_fromArray_setNeedsUpdate,Ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var JP=class{constructor(t,e,i=null,r=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=r;let o=e.tracks,s=o.length,a=new Array(s),l={endingStart:zf,endingEnd:zf};for(let u=0;u!==s;++u){let f=o[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=bte,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){let r=this._clip.duration,o=t._clip.duration,s=o/r,a=r/o;t.warp(1,s,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){let t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){let r=this._mixer,o=r.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);let l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+i,u[0]=t/s,u[1]=e/s,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,r){if(!this.enabled){this._updateWeight(t);return}let o=this._startTime;if(o!==null){let l=(t-o)*i;l<0||i===0?e=0:(this._startTime=null,e=i*l)}e*=this._updateTimeScale(t);let s=this._updateTime(e),a=this._updateWeight(t);if(a>0){let l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Mte:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulateAdditive(a);break;case dT:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulate(r,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(t)[0];e*=r,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){let e=this._clip.duration,i=this.loop,r=this.time+t,o=this._loopCount,s=i===Cte;if(t===0)return o===-1?r:s&&(o&1)===1?e-r:r;if(i===uT){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=e)r=e;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=e||r<0){let a=Math.floor(r/e);r-=e*a,o+=Math.abs(a);let l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?e:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){let u=t<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return e-r}return r}_setEndings(t,e,i){let r=this._interpolantSettings;i?(r.endingStart=Bf,r.endingEnd=Bf):(t?r.endingStart=this.zeroSlopeAtStart?Bf:zf:r.endingStart=by,e?r.endingEnd=this.zeroSlopeAtEnd?Bf:zf:r.endingEnd=by)}_scheduleFading(t,e,i){let r=this._mixer,o=r.time,s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=e,a[1]=o+t,l[1]=i,this}},cae=new Float32Array(1),qy=class extends Rl{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){let i=t._localRoot||this._root,r=t._clip.tracks,o=r.length,s=t._propertyBindings,a=t._interpolants,l=i.uuid,u=this._bindingsByRootAndName,f=u[l];f===void 0&&(f={},u[l]=f);for(let h=0;h!==o;++h){let m=r[h],p=m.name,y=f[p];if(y!==void 0)++y.referenceCount,s[h]=y;else{if(y=s[h],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,p));continue}let M=e&&e._propertyBindings[h].binding.parsedPath;y=new ZP(Ni.create(i,p,M),m.ValueTypeName,m.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,p),s[h]=y}a[h].resultBuffer=y.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let i=(t._localRoot||this._root).uuid,r=t._clip.uuid,o=this._actionsByClip[r];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,r,i)}let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){let r=this._actions,o=this._actionsByClip,s=o[e];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=s;else{let a=s.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),s.actionByRoot[i]=t}_removeInactiveAction(t){let e=this._actions,i=e[e.length-1],r=t._cacheIndex;i._cacheIndex=r,e[r]=i,e.pop(),t._cacheIndex=null;let o=t._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],f=t._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),t._byClipCacheIndex=null;let h=a.actionByRoot,m=(t._localRoot||this._root).uuid;delete h[m],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let e=t._propertyBindings;for(let i=0,r=e.length;i!==r;++i){let o=e[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){let e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackAction(t){let e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_addInactiveBinding(t,e,i){let r=this._bindingsByRootAndName,o=this._bindings,s=r[e];s===void 0&&(s={},r[e]=s),s[i]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){let e=this._bindings,i=t.binding,r=i.rootNode.uuid,o=i.path,s=this._bindingsByRootAndName,a=s[r],l=e[e.length-1],u=t._cacheIndex;l._cacheIndex=u,e[u]=l,e.pop(),delete a[o],Object.keys(a).length===0&&delete s[r]}_lendBinding(t){let e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_takeBackBinding(t){let e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=i,e[i]=o}_lendControlInterpolant(){let t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return i===void 0&&(i=new By(new Float32Array(2),new Float32Array(2),1,cae),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){let e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=i,e[i]=o}clipAction(t,e,i){let r=e||this._root,o=r.uuid,s=typeof t=="string"?rh.findByName(r,t):t,a=s!==null?s.uuid:t,l=this._actionsByClip[a],u=null;if(i===void 0&&(s!==null?i=s.blendMode:i=dT),l!==void 0){let h=l.actionByRoot[o];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;let f=new JP(this,s,e,i);return this._bindAction(f,u),this._addInactiveAction(f,a,o),f}existingAction(t,e){let i=e||this._root,r=i.uuid,o=typeof t=="string"?rh.findByName(i,t):t,s=o?o.uuid:t,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){let t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let e=this._actions,i=this._nActiveActions,r=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1;for(let u=0;u!==i;++u)e[u]._update(r,t,o,s);let a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let e=this._actions,i=t.uuid,r=this._actionsByClip,o=r[i];if(o!==void 0){let s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){let u=s[a];this._deactivateAction(u);let f=u._cacheIndex,h=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=f,e[f]=h,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(t){let e=t.uuid,i=this._actionsByClip;for(let s in i){let a=i[s].actionByRoot,l=a[e];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}let r=this._bindingsByRootAndName,o=r[e];if(o!==void 0)for(let s in o){let a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(t,e){let i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}};var zU=new cn,Yy=class{constructor(t,e,i=0,r=1/0){this.ray=new ju(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new Sm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return zU.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(zU),this}intersectObject(t,e=!0,i=[]){return QP(t,this,i,e),i.sort(BU),i}intersectObjects(t,e=!0,i=[]){for(let r=0,o=t.length;r<o;r++)QP(t[r],this,i,e);return i.sort(BU),i}};function BU(n,t){return n.distance-t.distance}function QP(n,t,e,i){let r=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(r=!1),r===!0&&i===!0){let o=n.children;for(let s=0,a=o.length;s<a;s++)QP(o[s],t,e,!0)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:eT}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=eT);var Kr=class extends pn{constructor(t=0,e=0){super(),this.x=t,this.y=e}get h(){return this.x}set h(t){this.x=t}get v(){return this.y}set v(t){this.y=t}};var Lm=function(){var n=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(f){f.preventDefault(),i(++n%t.children.length)},!1);function e(f){return t.appendChild(f.dom),f}function i(f){for(var h=0;h<t.children.length;h++)t.children[h].style.display=h===f?"block":"none";n=f}var r=(performance||Date).now(),o=r,s=0,a=e(new Lm.Panel("FPS","#0ff","#002")),l=e(new Lm.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new Lm.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:e,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){s++;var f=(performance||Date).now();if(l.update(f-r,200),f>=o+1e3&&(a.update(s*1e3/(f-o),100),o=f,s=0,u)){var h=performance.memory;u.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return f},update:function(){r=this.end()},domElement:t,setMode:i}};Lm.Panel=function(n,t,e){var i=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,l=48*s,u=3*s,f=2*s,h=3*s,m=15*s,p=74*s,y=30*s,M=document.createElement("canvas");M.width=a,M.height=l,M.style.cssText="width:80px;height:48px";var x=M.getContext("2d");return x.font="bold "+9*s+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=e,x.fillRect(0,0,a,l),x.fillStyle=t,x.fillText(n,u,f),x.fillRect(h,m,p,y),x.fillStyle=e,x.globalAlpha=.9,x.fillRect(h,m,p,y),{dom:M,update:function(b,T){i=Math.min(i,b),r=Math.max(r,b),x.fillStyle=e,x.globalAlpha=1,x.fillRect(0,0,a,m),x.fillStyle=t,x.fillText(o(b)+" "+n+" ("+o(i)+"-"+o(r)+")",u,f),x.drawImage(M,h+s,m,p-s,y,h,m,p-s,y),x.fillRect(h+p-s,m,s,y),x.fillStyle=e,x.globalAlpha=.9,x.fillRect(h+p-s,m,s,o((1-b/T)*y))}}};var dV=Lm;var fV={setDevicePixelRatio:!1},hV={url:"/mazes/Loquitas.json",credits:"Maze designed by Cec\xEDlia Fernandes and Nikita.",scale:new te(1,1,1)},pV={url:"/models/gltf/RobotExpressive/RobotExpressive.glb",credits:"Model and related code snippets created by <a href='https://www.patreon.com/quaternius' target='_blank' rel='noopener'>Tom\xE1s Laulh\xE9</a>. CC0 1.0. Modified by <a href='https://donmccurdy.com/' target='_blank' rel='noopener'>Don McCurdy</a>.",eyeHeight:.8,scale:new te(.1,.1,.1),walkingSpeed:3,initialDirection:0,turningSpeed:250,runningFactor:2,keyCodes:{fixedView:"Digit1",firstPersonView:"Digit2",thirdPersonView:"Digit3",topView:"Digit4",viewMode:"KeyV",userInterface:"KeyU",miniMap:"KeyM",help:"KeyH",statistics:"KeyS",run:"KeyR",left:"ArrowLeft",right:"ArrowRight",backward:"ArrowDown",forward:"ArrowUp",jump:"KeyJ",yes:"KeyY",no:"KeyN",wave:"KeyW",punch:"KeyP",thumbsUp:"KeyT"}},mV={ambientLight:{color:16777215,intensity:1},pointLight1:{color:16777215,intensity:1,distance:0,position:new te(0,0,0)},pointLight2:{color:16777215,intensity:1,distance:0,position:new te(0,0,0)},directionalLight:{color:16777215,intensity:1,position:new te(0,0,0),target:new te(0,0,0)},spotLight:{color:16777215,intensity:1,distance:0,angle:Math.PI/3,penumbra:0,position:new te(0,0,0),direction:0}},gV={enabled:!1,color:14737632,near:.1,far:14},ch={view:"fixed",multipleViewsViewport:new _n(0,0,1,1),target:new te(0,0,0),initialOrientation:new Kr(135,-45),orientationMin:new Kr(-180,-90),orientationMax:new Kr(180,0),initialDistance:8,distanceMin:4,distanceMax:16,initialZoom:1,zoomMin:.5,zoomMax:2,initialFov:45,near:.01,far:100},_V={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new te(.42,.269,1)},vV={url:"/models/gltf/RobotExpressive/hospital_bed.glb",scale:new te(.5,1,.5),name:""},yV={url:"/models/gltf/RobotExpressive/patient.glb",scale:new te(.0045,.01,.0045)},xV={url:"/models/gltf/RobotExpressive/exit_doors.glb",scale:new te(1.35,1.4,1.3)},bV={url:"/models/gltf/RobotExpressive/monitor_with_heart_rate.glb",scale:new te(.5,.5,.5)},CV={url:"/models/gltf/RobotExpressive/adjustable_bedside_table.glb",scale:new te(.5,.5,.5)},MV={url:"/models/gltf/RobotExpressive/surgical.glb",scale:new te(.5,.5,.5)},wV={url:"/models/gltf/RobotExpressive/surgeon.glb",scale:new te(.1,.1,.1)};var Qy=BC(EV());function vr(n,...t){return Qy.mergeWith(n,...t,(e,i,r,o,s)=>{if(Qy.isArray(e))return e.concat(i);{let a=Object.getOwnPropertyDescriptor(o,r);a!==void 0&&!a.writable&&(a.value=i,a.writable=!0,Object.defineProperty(o,r,a),a.writable=!1,Object.defineProperty(o,r,a))}})}var ex=class{constructor(t){for(let[a,l]of Object.entries(t))this[a]=l;let e=new Xr().load(this.textureUrl);e.colorSpace=Ui,e.wrapS=sr,e.wrapT=sr,e.repeat.set(this.size.width,this.size.height),e.magFilter=Pr,e.minFilter=To;let i=null;this.normalMapUrl&&(i=new Xr().load(this.normalMapUrl),i.wrapS=sr,i.wrapT=sr,i.repeat.set(this.size.width,this.size.height));let r=null;this.bumpMapUrl&&(r=new Xr().load(this.bumpMapUrl),r.wrapS=sr,r.wrapT=sr,r.repeat.set(this.size.width,this.size.height));let o=new Ms(this.size.width,this.size.height),s=new Fa({color:16777215,map:e,normalMap:i,bumpMap:r,bumpScale:this.bumpScale||.1,roughness:.8,metalness:.2});this.object=new Ei(o,s),this.object.rotation.x=-Math.PI/2,this.object.receiveShadow=this.shadow||!1,this.object.castShadow=this.shadow||!1,this.object.receiveShadow=!0}setShadow(t){this.object.castShadow=t}setTextureRepeat(t,e){this.object.material.map.repeat.set(t,e),this.object.material.normalMap&&this.object.material.normalMap.repeat.set(t,e),this.object.material.bumpMap&&this.object.material.bumpMap.repeat.set(t,e)}updateTexture(t){let e=new Xr().load(t);e.colorSpace=Ui,e.wrapS=sr,e.wrapT=sr,this.object.material.map=e}updateNormalMap(t){let e=new Xr().load(t);e.wrapS=sr,e.wrapT=sr,this.object.material.normalMap=e}updateBumpMap(t,e=.1){let i=new Xr().load(t);i.wrapS=sr,i.wrapT=sr,this.object.material.bumpMap=i,this.object.material.bumpScale=e}};var tx=class{constructor(t){let{textureUrl:e,bumpMapUrl:i,normalMapUrl:r,aoMapUrl:o,width:s=1,height:a=3,thickness:l=.05}=t,u=new Xr().load(e);u.colorSpace=Ui,u.magFilter=Pr,u.minFilter=To;let f=i?new Xr().load(i):null,h=r?new Xr().load(r):null,m=o?new Xr().load(o):null,p=new Fa({color:16777215,map:u,bumpMap:f,bumpScale:.1,normalMap:h,aoMap:m,side:Xo});this.object=new ni,this.addFrontBackFaces(s,a,l,p),this.addSideFaces(s,a,l,p),this.addTopFace(s,l,p),this.addBottomFace(s,l,p),this.addTopCover(s,l,p)}addFrontBackFaces(t,e,i,r){let o=new Ms(t,e);o.setAttribute("uv2",new Di(o.attributes.uv.array,2));let s=new Ei(o,r);s.position.set(0,0,i/2),s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new Ei(o,r);a.position.set(0,0,-i/2),a.rotation.y=Math.PI,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addSideFaces(t,e,i,r){let o=new Ms(i,e);o.setAttribute("uv2",new Di(o.attributes.uv.array,2));let s=new Ei(o,r);s.position.set(-t/2,0,0),s.rotation.y=Math.PI/2,s.castShadow=!0,s.receiveShadow=!0,this.object.add(s);let a=new Ei(o,r);a.position.set(t/2,0,0),a.rotation.y=-Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,this.object.add(a)}addTopFace(t,e,i){let r=new Ms(t,e);r.setAttribute("uv2",new Di(r.attributes.uv.array,2));let o=new Ei(r,i);o.rotation.x=-Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addBottomFace(t,e,i){let r=new Ms(t,e);r.setAttribute("uv2",new Di(r.attributes.uv.array,2));let o=new Ei(r,i);o.rotation.x=Math.PI/2,o.position.set(0,-e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}addTopCover(t,e,i){let r=new Ms(t,e);r.setAttribute("uv2",new Di(r.attributes.uv.array,2));let o=new Ei(r,i);o.rotation.x=Math.PI/2,o.position.set(0,e/2,0),o.castShadow=!0,o.receiveShadow=!0,this.object.add(o)}};function gT(n,t){if(t===QU)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(t===Fm||t===Zy){let e=n.getIndex();if(e===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)s.push(l);n.setIndex(s),e=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=e.count-2,r=[];if(t===Fm)for(let s=1;s<=i;s++)r.push(e.getX(0)),r.push(e.getX(s)),r.push(e.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(e.getX(s)),r.push(e.getX(s+1)),r.push(e.getX(s+2))):(r.push(e.getX(s+2)),r.push(e.getX(s+1)),r.push(e.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),n}var Tr=class extends lh{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new MT(e)}),this.register(function(e){return new wT(e)}),this.register(function(e){return new RT(e)}),this.register(function(e){return new kT(e)}),this.register(function(e){return new NT(e)}),this.register(function(e){return new ST(e)}),this.register(function(e){return new PT(e)}),this.register(function(e){return new TT(e)}),this.register(function(e){return new DT(e)}),this.register(function(e){return new CT(e)}),this.register(function(e){return new OT(e)}),this.register(function(e){return new ET(e)}),this.register(function(e){return new IT(e)}),this.register(function(e){return new AT(e)}),this.register(function(e){return new xT(e)}),this.register(function(e){return new FT(e)}),this.register(function(e){return new LT(e)})}load(t,e,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let u=kc.extractUrlBase(t);s=kc.resolveURL(u,this.path)}else s=kc.extractUrlBase(t);this.manager.itemStart(t);let a=function(u){r?r(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},l=new qu(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(u){try{o.parse(u,s,function(f){e(f),o.manager.itemEnd(t)},a)}catch(f){a(f)}},i,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,r){let o,s={},a={},l=new TextDecoder;if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===OV){try{s[Fn.KHR_BINARY_GLTF]=new UT(t)}catch(h){r&&r(h);return}o=JSON.parse(s[Fn.KHR_BINARY_GLTF].content)}else o=JSON.parse(l.decode(t));else o=t;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let u=new GT(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){let h=this.pluginCallbacks[f](u);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,s[h.name]=!0}if(o.extensionsUsed)for(let f=0;f<o.extensionsUsed.length;++f){let h=o.extensionsUsed[f],m=o.extensionsRequired||[];switch(h){case Fn.KHR_MATERIALS_UNLIT:s[h]=new bT;break;case Fn.KHR_DRACO_MESH_COMPRESSION:s[h]=new VT(o,this.dracoLoader);break;case Fn.KHR_TEXTURE_TRANSFORM:s[h]=new zT;break;case Fn.KHR_MESH_QUANTIZATION:s[h]=new BT;break;default:m.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}u.setExtensions(s),u.setPlugins(a),u.parse(i,r)}parseAsync(t,e){let i=this;return new Promise(function(r,o){i.parse(t,e,r,o)})}};function uae(){let n={};return{get:function(t){return n[t]},add:function(t,e){n[t]=e},remove:function(t){delete n[t]},removeAll:function(){n={}}}}var Fn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},xT=class{constructor(t){this.parser=t,this.name=Fn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let t=this.parser,e=this.parser.json.nodes||[];for(let i=0,r=e.length;i<r;i++){let o=e[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){let e=this.parser,i="light:"+t,r=e.cache.get(i);if(r)return r;let o=e.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t],u,f=new jt(16777215);l.color!==void 0&&f.setRGB(l.color[0],l.color[1],l.color[2],Zr);let h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new sh(f),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Yu(f),u.distance=h;break;case"spot":u=new jy(f),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Ul(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(u),e.cache.add(i,r),r}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){let e=this,i=this.parser,o=i.json.nodes[t],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(e.cache,a,l)})}},bT=class{constructor(){this.name=Fn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ra}extendParams(t,e,i){let r=[];t.color=new jt(1,1,1),t.opacity=1;let o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],Zr),t.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(t,"map",o.baseColorTexture,Ui))}return Promise.all(r)}},CT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(e.emissiveIntensity=o),Promise.resolve()}},MT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(e.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new pn(a,a)}return Promise.all(o)}},wT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_DISPERSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},ET=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(e.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(e.iridescenceIOR=s.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},ST=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_SHEEN}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];e.sheenColor=new jt(0,0,0),e.sheenRoughness=0,e.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Zr)}return s.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(e,"sheenColorMap",s.sheenColorTexture,Ui)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},PT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(e.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},TT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_VOLUME}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return e.attenuationColor=new jt().setRGB(a[0],a[1],a[2],Zr),Promise.all(o)}},DT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_IOR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return e.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},OT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_SPECULAR}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];e.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(e,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return e.specularColor=new jt().setRGB(a[0],a[1],a[2],Zr),s.specularColorTexture!==void 0&&o.push(i.assignTexture(e,"specularColorMap",s.specularColorTexture,Ui)),Promise.all(o)}},AT=class{constructor(t){this.parser=t,this.name=Fn.EXT_MATERIALS_BUMP}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return e.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(o)}},IT=class{constructor(t){this.parser=t,this.name=Fn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){let i=this.parser.json.materials[t];return!i.extensions||!i.extensions[this.name]?null:Ko}extendMaterialParams(t,e){let i=this.parser,r=i.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(e.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(e.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},RT=class{constructor(t){this.parser=t,this.name=Fn.KHR_TEXTURE_BASISU}loadTexture(t){let e=this.parser,i=e.json,r=i.textures[t];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=e.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,s)}},kT=class{constructor(t){this.parser=t,this.name=Fn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},NT=class{constructor(t){this.parser=t,this.name=Fn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){let e=this.name,i=this.parser,r=i.json,o=r.textures[t];if(!o.extensions||!o.extensions[e])return null;let s=o.extensions[e],a=r.images[s.source],l=i.textureLoader;if(a.uri){let u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(t,s.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){let e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}},FT=class{constructor(t){this.name=Fn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){let e=this.parser.json,i=e.bufferViews[t];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let l=r.byteOffset||0,u=r.byteLength||0,f=r.count,h=r.byteStride,m=new Uint8Array(a,l,u);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(f,h,m,r.mode,r.filter).then(function(p){return p.buffer}):s.ready.then(function(){let p=new ArrayBuffer(f*h);return s.decodeGltfBuffer(new Uint8Array(p),f,h,m,r.mode,r.filter),p})})}else return null}},LT=class{constructor(t){this.name=Fn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){let e=this.parser.json,i=e.nodes[t];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=e.meshes[i.mesh];for(let u of r.primitives)if(u.mode!==Ss.TRIANGLES&&u.mode!==Ss.TRIANGLE_STRIP&&u.mode!==Ss.TRIANGLE_FAN&&u.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],l={};for(let u in s)a.push(this.parser.getDependency("accessor",s[u]).then(f=>(l[u]=f,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(u=>{let f=u.pop(),h=f.isGroup?f.children:[f],m=u[0].count,p=[];for(let y of h){let M=new cn,x=new te,b=new qr,T=new te(1,1,1),E=new Fy(y.geometry,y.material,m);for(let D=0;D<m;D++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,D),l.ROTATION&&b.fromBufferAttribute(l.ROTATION,D),l.SCALE&&T.fromBufferAttribute(l.SCALE,D),E.setMatrixAt(D,M.compose(x,b,T));for(let D in l)if(D==="_COLOR_0"){let L=l[D];E.instanceColor=new Gu(L.array,L.itemSize,L.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&y.geometry.setAttribute(D,l[D]);pr.prototype.copy.call(E,y),this.parser.assignFinalMaterial(E),p.push(E)}return f.isGroup?(f.clear(),f.add(...p),f):p[0]}))}},OV="glTF",Vm=12,SV={JSON:1313821514,BIN:5130562},UT=class{constructor(t){this.name=Fn.KHR_BINARY_GLTF,this.content=null,this.body=null;let e=new DataView(t,0,Vm),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==OV)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Vm,o=new DataView(t,Vm),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let l=o.getUint32(s,!0);if(s+=4,l===SV.JSON){let u=new Uint8Array(t,Vm+s,a);this.content=i.decode(u)}else if(l===SV.BIN){let u=Vm+s;this.body=t.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},VT=class{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Fn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){let i=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,s=t.extensions[this.name].attributes,a={},l={},u={};for(let f in s){let h=jT[f]||f.toLowerCase();a[h]=s[f]}for(let f in t.attributes){let h=jT[f]||f.toLowerCase();if(s[f]!==void 0){let m=i.accessors[t.attributes[f]],p=dh[m.componentType];u[h]=p.name,l[h]=m.normalized===!0}}return e.getDependency("bufferView",o).then(function(f){return new Promise(function(h,m){r.decodeDracoFile(f,function(p){for(let y in p.attributes){let M=p.attributes[y],x=l[y];x!==void 0&&(M.normalized=x)}h(p)},a,u,Zr,m)})})}},zT=class{constructor(){this.name=Fn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}},BT=class{constructor(){this.name=Fn.KHR_MESH_QUANTIZATION}},nx=class extends Ac{constructor(t,e,i,r){super(t,e,i,r)}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let s=0;s!==r;s++)e[s]=i[o+s];return e}interpolate_(t,e,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,f=r-e,h=(i-e)/f,m=h*h,p=m*h,y=t*u,M=y-u,x=-2*p+3*m,b=p-m,T=1-x,E=b-m+h;for(let D=0;D!==a;D++){let L=s[M+D+a],z=s[M+D+l]*f,k=s[y+D+a],G=s[y+D]*f;o[D]=T*L+E*z+x*k+b*G}return o}},dae=new qr,HT=class extends nx{interpolate_(t,e,i,r){let o=super.interpolate_(t,e,i,r);return dae.fromArray(o).normalize().toArray(o),o}},Ss={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},PV={9728:$r,9729:Pr,9984:nT,9985:ym,9986:Vf,9987:To},TV={33071:Dl,33648:Mm,10497:sr},_T={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jT={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Nc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},fae={CUBICSPLINE:void 0,LINEAR:Qf,STEP:Jf},vT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function hae(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Fa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ia})),n.DefaultMaterial}function Xu(n,t,e){for(let i in e.extensions)n[i]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=e.extensions[i])}function Ul(n,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(n.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function pae(n,t,e){let i=!1,r=!1,o=!1;for(let u=0,f=t.length;u<f;u++){let h=t[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],l=[];for(let u=0,f=t.length;u<f;u++){let h=t[u];if(i){let m=h.POSITION!==void 0?e.getDependency("accessor",h.POSITION):n.attributes.position;s.push(m)}if(r){let m=h.NORMAL!==void 0?e.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(m)}if(o){let m=h.COLOR_0!==void 0?e.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(m)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then(function(u){let f=u[0],h=u[1],m=u[2];return i&&(n.morphAttributes.position=f),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=m),n.morphTargetsRelative=!0,n})}function mae(n,t){if(n.updateMorphTargets(),t.weights!==void 0)for(let e=0,i=t.weights.length;e<i;e++)n.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){let e=t.extras.targetNames;if(n.morphTargetInfluences.length===e.length){n.morphTargetDictionary={};for(let i=0,r=e.length;i<r;i++)n.morphTargetDictionary[e[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function gae(n){let t,e=n.extensions&&n.extensions[Fn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+yT(e.attributes):t=n.indices+":"+yT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)t+=":"+yT(n.targets[i]);return t}function yT(n){let t="",e=Object.keys(n).sort();for(let i=0,r=e.length;i<r;i++)t+=e[i]+":"+n[e[i]]+";";return t}function WT(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function _ae(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var vae=new cn,GT=class{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new uae,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let l=a.match(/Version\/(\d+)/);r=i&&l?parseInt(l[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new Xr(this.options.manager):this.textureLoader=new Gy(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Xu(o,a,r),Ul(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){let t=this.json.nodes||[],e=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=e.length;r<o;r++){let s=e[r].joints;for(let a=0,l=s.length;a<l;a++)t[s[a]].isBone=!0}for(let r=0,o=t.length;r<o;r++){let s=t[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,i){if(t.refs[e]<=1)return i;let r=i.clone(),o=(s,a)=>{let l=this.associations.get(s);l!=null&&this.associations.set(a,l);for(let[u,f]of s.children.entries())o(f,a.children[u])};return o(i,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){let e=Object.values(this.plugins);e.push(this);for(let i=0;i<e.length;i++){let r=t(e[i]);if(r)return r}return null}_invokeAll(t){let e=Object.values(this.plugins);e.unshift(this);let i=[];for(let r=0;r<e.length;r++){let o=t(e[r]);o&&i.push(o)}return i}getDependency(t,e){let i=t+":"+e,r=this.cache.get(i);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(e)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(i,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){let i=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(r.map(function(o,s){return i.getDependency(t,s)})),this.cache.add(t,e)}return e}loadBuffer(t){let e=this.json.buffers[t],i=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[Fn.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(kc.resolveURL(e.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){let e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(i){let r=e.byteLength||0,o=e.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(t){let e=this,i=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){let s=_T[r.type],a=dh[r.componentType],l=r.normalized===!0,u=new a(r.count*s);return Promise.resolve(new Di(u,s,l))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],l=_T[r.type],u=dh[r.componentType],f=u.BYTES_PER_ELEMENT,h=f*l,m=r.byteOffset||0,p=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0,M,x;if(p&&p!==h){let b=Math.floor(m/p),T="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+b+":"+r.count,E=e.cache.get(T);E||(M=new u(a,b*p,r.count*p/f),E=new Om(M,p/f),e.cache.add(T,E)),x=new Am(E,l,m%p/f,y)}else a===null?M=new u(r.count*l):M=new u(a,m,r.count*l),x=new Di(M,l,y);if(r.sparse!==void 0){let b=_T.SCALAR,T=dh[r.sparse.indices.componentType],E=r.sparse.indices.byteOffset||0,D=r.sparse.values.byteOffset||0,L=new T(s[1],E,r.sparse.count*b),z=new u(s[2],D,r.sparse.count*l);a!==null&&(x=new Di(x.array.slice(),x.itemSize,x.normalized)),x.normalized=!1;for(let k=0,G=L.length;k<G;k++){let F=L[k];if(x.setX(F,z[k*l]),l>=2&&x.setY(F,z[k*l+1]),l>=3&&x.setZ(F,z[k*l+2]),l>=4&&x.setW(F,z[k*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}x.normalized=y}return x})}loadTexture(t){let e=this.json,i=this.options,o=e.textures[t].source,s=e.images[o],a=this.textureLoader;if(s.uri){let l=i.manager.getHandler(s.uri);l!==null&&(a=l)}return this.loadTextureImage(t,o,a)}loadTextureImage(t,e,i){let r=this,o=this.json,s=o.textures[t],a=o.images[e],l=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let u=this.loadImageSource(e,i).then(function(f){f.flipY=!1,f.name=s.name||a.name||"",f.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(f.name=a.uri);let m=(o.samplers||{})[s.sampler]||{};return f.magFilter=PV[m.magFilter]||Pr,f.minFilter=PV[m.minFilter]||To,f.wrapS=TV[m.wrapS]||sr,f.wrapT=TV[m.wrapT]||sr,f.generateMipmaps=!f.isCompressedTexture&&f.minFilter!==$r&&f.minFilter!==Pr,r.associations.set(f,{textures:t}),f}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(t,e){let i=this,r=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(h=>h.clone());let s=r.images[t],a=self.URL||self.webkitURL,l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=i.getDependency("bufferView",s.bufferView).then(function(h){u=!0;let m=new Blob([h],{type:s.mimeType});return l=a.createObjectURL(m),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");let f=Promise.resolve(l).then(function(h){return new Promise(function(m,p){let y=m;e.isImageBitmapLoader===!0&&(y=function(M){let x=new Es(M);x.needsUpdate=!0,m(x)}),e.load(kc.resolveURL(h,o.path),y,void 0,p)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),Ul(h,s),h.userData.mimeType=s.mimeType||_ae(s.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[t]=f,f}assignTexture(t,e,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[Fn.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Fn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=o.associations.get(s);s=o.extensions[Fn.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,l)}}return r!==void 0&&(s.colorSpace=r),t[e]=s,s})}assignFinalMaterial(t){let e=t.geometry,i=t.material,r=e.attributes.tangent===void 0,o=e.attributes.color!==void 0,s=e.attributes.normal===void 0;if(t.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new Rm,Yr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(t.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new $u,Yr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}t.material=i}getMaterialType(){return Fa}loadMaterial(t){let e=this,i=this.json,r=this.extensions,o=i.materials[t],s,a={},l=o.extensions||{},u=[];if(l[Fn.KHR_MATERIALS_UNLIT]){let h=r[Fn.KHR_MATERIALS_UNLIT];s=h.getMaterialType(),u.push(h.extendParams(a,o,e))}else{let h=o.pbrMetallicRoughness||{};if(a.color=new jt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){let m=h.baseColorFactor;a.color.setRGB(m[0],m[1],m[2],Zr),a.opacity=m[3]}h.baseColorTexture!==void 0&&u.push(e.assignTexture(a,"map",h.baseColorTexture,Ui)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(e.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(e.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),s=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(t,a)})))}o.doubleSided===!0&&(a.side=Xo);let f=o.alphaMode||vT.OPAQUE;if(f===vT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,f===vT.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Ra&&(u.push(e.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new pn(1,1),o.normalTexture.scale!==void 0)){let h=o.normalTexture.scale;a.normalScale.set(h,h)}if(o.occlusionTexture!==void 0&&s!==Ra&&(u.push(e.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Ra){let h=o.emissiveFactor;a.emissive=new jt().setRGB(h[0],h[1],h[2],Zr)}return o.emissiveTexture!==void 0&&s!==Ra&&u.push(e.assignTexture(a,"emissiveMap",o.emissiveTexture,Ui)),Promise.all(u).then(function(){let h=new s(a);return o.name&&(h.name=o.name),Ul(h,o),e.associations.set(h,{materials:t}),o.extensions&&Xu(r,h,o),h})}createUniqueName(t){let e=Ni.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){let e=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Fn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return DV(l,a,e)})}let s=[];for(let a=0,l=t.length;a<l;a++){let u=t[a],f=gae(u),h=r[f];if(h)s.push(h.promise);else{let m;u.extensions&&u.extensions[Fn.KHR_DRACO_MESH_COMPRESSION]?m=o(u):m=DV(new Oo,u,e),r[f]={primitive:u,promise:m},s.push(m)}}return Promise.all(s)}loadMesh(t){let e=this,i=this.json,r=this.extensions,o=i.meshes[t],s=o.primitives,a=[];for(let l=0,u=s.length;l<u;l++){let f=s[l].material===void 0?hae(this.cache):this.getDependency("material",s[l].material);a.push(f)}return a.push(e.loadGeometries(s)),Promise.all(a).then(function(l){let u=l.slice(0,l.length-1),f=l[l.length-1],h=[];for(let p=0,y=f.length;p<y;p++){let M=f[p],x=s[p],b,T=u[p];if(x.mode===Ss.TRIANGLES||x.mode===Ss.TRIANGLE_STRIP||x.mode===Ss.TRIANGLE_FAN||x.mode===void 0)b=o.isSkinnedMesh===!0?new Ry(M,T):new Ei(M,T),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),x.mode===Ss.TRIANGLE_STRIP?b.geometry=gT(b.geometry,Zy):x.mode===Ss.TRIANGLE_FAN&&(b.geometry=gT(b.geometry,Fm));else if(x.mode===Ss.LINES)b=new Vy(M,T);else if(x.mode===Ss.LINE_STRIP)b=new nh(M,T);else if(x.mode===Ss.LINE_LOOP)b=new ih(M,T);else if(x.mode===Ss.POINTS)b=new zy(M,T);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(b.geometry.morphAttributes).length>0&&mae(b,o),b.name=e.createUniqueName(o.name||"mesh_"+t),Ul(b,o),x.extensions&&Xu(r,b,x),e.assignFinalMaterial(b),h.push(b)}for(let p=0,y=h.length;p<y;p++)e.associations.set(h[p],{meshes:t,primitives:p});if(h.length===1)return o.extensions&&Xu(r,h[0],o),h[0];let m=new ni;o.extensions&&Xu(r,m,o),e.associations.set(m,{meshes:t});for(let p=0,y=h.length;p<y;p++)m.add(h[p]);return m})}loadCamera(t){let e,i=this.json.cameras[t],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?e=new hr(Nr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(e=new Na(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(e.name=this.createUniqueName(i.name)),Ul(e,i),Promise.resolve(e)}loadSkin(t){let e=this.json.skins[t],i=[];for(let r=0,o=e.joints.length;r<o;r++)i.push(this._loadNodeShallow(e.joints[r]));return e.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",e.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],l=[];for(let u=0,f=s.length;u<f;u++){let h=s[u];if(h){a.push(h);let m=new cn;o!==null&&m.fromArray(o.array,u*16),l.push(m)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[u])}return new Ny(a,l)})}loadAnimation(t){let e=this.json,i=this,r=e.animations[t],o=r.name?r.name:"animation_"+t,s=[],a=[],l=[],u=[],f=[];for(let h=0,m=r.channels.length;h<m;h++){let p=r.channels[h],y=r.samplers[p.sampler],M=p.target,x=M.node,b=r.parameters!==void 0?r.parameters[y.input]:y.input,T=r.parameters!==void 0?r.parameters[y.output]:y.output;M.node!==void 0&&(s.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",b)),l.push(this.getDependency("accessor",T)),u.push(y),f.push(M))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f)]).then(function(h){let m=h[0],p=h[1],y=h[2],M=h[3],x=h[4],b=[];for(let T=0,E=m.length;T<E;T++){let D=m[T],L=p[T],z=y[T],k=M[T],G=x[T];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();let F=i._createAnimationTracks(D,L,z,k,G);if(F)for(let P=0;P<F.length;P++)b.push(F[P])}return new rh(o,void 0,b)})}createNodeMesh(t){let e=this.json,i=this,r=e.nodes[t];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),s})}loadNode(t){let e=this.json,i=this,r=e.nodes[t],o=i._loadNodeShallow(t),s=[],a=r.children||[];for(let u=0,f=a.length;u<f;u++)s.push(i.getDependency("node",a[u]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),l]).then(function(u){let f=u[0],h=u[1],m=u[2];m!==null&&f.traverse(function(p){p.isSkinnedMesh&&p.bind(m,vae)});for(let p=0,y=h.length;p<y;p++)f.add(h[p]);return f})}_loadNodeShallow(t){let e=this.json,i=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];let o=e.nodes[t],s=o.name?r.createUniqueName(o.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return l&&a.push(l),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){a.push(u)}),this.nodeCache[t]=Promise.all(a).then(function(u){let f;if(o.isBone===!0?f=new Im:u.length>1?f=new ni:u.length===1?f=u[0]:f=new pr,f!==u[0])for(let h=0,m=u.length;h<m;h++)f.add(u[h]);if(o.name&&(f.userData.name=o.name,f.name=s),Ul(f,o),o.extensions&&Xu(i,f,o),o.matrix!==void 0){let h=new cn;h.fromArray(o.matrix),f.applyMatrix4(h)}else o.translation!==void 0&&f.position.fromArray(o.translation),o.rotation!==void 0&&f.quaternion.fromArray(o.rotation),o.scale!==void 0&&f.scale.fromArray(o.scale);return r.associations.has(f)||r.associations.set(f,{}),r.associations.get(f).nodes=t,f}),this.nodeCache[t]}loadScene(t){let e=this.extensions,i=this.json.scenes[t],r=this,o=new ni;i.name&&(o.name=r.createUniqueName(i.name)),Ul(o,i),i.extensions&&Xu(e,o,i);let s=i.nodes||[],a=[];for(let l=0,u=s.length;l<u;l++)a.push(r.getDependency("node",s[l]));return Promise.all(a).then(function(l){for(let f=0,h=l.length;f<h;f++)o.add(l[f]);let u=f=>{let h=new Map;for(let[m,p]of r.associations)(m instanceof Yr||m instanceof Es)&&h.set(m,p);return f.traverse(m=>{let p=r.associations.get(m);p!=null&&h.set(m,p)}),h};return r.associations=u(o),o})}_createAnimationTracks(t,e,i,r,o){let s=[],a=t.name?t.name:t.uuid,l=[];Nc[o.path]===Nc.weights?t.traverse(function(m){m.morphTargetInfluences&&l.push(m.name?m.name:m.uuid)}):l.push(a);let u;switch(Nc[o.path]){case Nc.weights:u=Nl;break;case Nc.rotation:u=Fl;break;case Nc.position:case Nc.scale:u=Ll;break;default:switch(i.itemSize){case 1:u=Nl;break;case 2:case 3:default:u=Ll;break}break}let f=r.interpolation!==void 0?fae[r.interpolation]:Qf,h=this._getArrayFromAccessor(i);for(let m=0,p=l.length;m<p;m++){let y=new u(l[m]+"."+Nc[o.path],e.array,h,f);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),s.push(y)}return s}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){let i=WT(e.constructor),r=new Float32Array(e.length);for(let o=0,s=e.length;o<s;o++)r[o]=e[o]*i;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(i){let r=this instanceof Fl?HT:nx;return new r(this.times,this.values,this.getValueSize()/3,i)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function yae(n,t,e){let i=t.attributes,r=new Ji;if(i.POSITION!==void 0){let a=e.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new te(l[0],l[1],l[2]),new te(u[0],u[1],u[2])),a.normalized){let f=WT(dh[a.componentType]);r.min.multiplyScalar(f),r.max.multiplyScalar(f)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=t.targets;if(o!==void 0){let a=new te,l=new te;for(let u=0,f=o.length;u<f;u++){let h=o[u];if(h.POSITION!==void 0){let m=e.json.accessors[h.POSITION],p=m.min,y=m.max;if(p!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(y[2]))),m.normalized){let M=WT(dh[m.componentType]);l.multiplyScalar(M)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new Zo;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function DV(n,t,e){let i=t.attributes,r=[];function o(s,a){return e.getDependency("accessor",s).then(function(l){n.setAttribute(a,l)})}for(let s in i){let a=jT[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(t.indices!==void 0&&!n.index){let s=e.getDependency("accessor",t.indices).then(function(a){n.setIndex(a)});r.push(s)}return Un.workingColorSpace!==Zr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Un.workingColorSpace}" not supported.`),Ul(n,t),yae(n,t,e),Promise.all(r).then(function(){return t.targets!==void 0?pae(n,t.targets,e):n})}var ebe={url:"/models/gltf/RobotExpressive/hospital_door.glb",scale:new te(1,1,2)},Zu=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,this.isLoaded=!1,new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ji().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}open(){this.isLoaded&&(this.object.rotation.y=Math.PI/2,this.boundingBox.setFromObject(this.object))}isTrespassing(t){if(this.isLoaded){let e=new Ji().setFromObject(t);return this.boundingBox.intersectsBox(e)}return!1}blockMovementIfTrespassing(t){this.isTrespassing(t)&&(console.log("Movement blocked: Door is in the way!"),t.position.copy(t.previousPosition))}};var fh=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,this.tables=[],new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0,o.name=this.name||"Table",o.isTable=!0)}),r.scale.copy(this.scale),this.object.add(r),this.tables.push(this.object)},void 0,i=>{console.error("Error loading the table model:",i)})}addToScene(t){this.tables.forEach(e=>t.add(e))}handleRaycast(t,e){let r=t.intersectObjects(this.tables,!0).find(o=>o.object.isTable);r&&e&&e(r.object)}};var obe={url:"/models/gltf/RobotExpressive/patient.glb",scale:new te(1,1,1)},zm=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var ix=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,this.isLoaded=!1,new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r),this.boundingBox=new Ji().setFromObject(r),this.isLoaded=!0},void 0,i=>{console.error("Error loading the door model:",i)})}};var rx=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var ox=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var sx=class{constructor(t){for(let[i,r]of Object.entries(t))this[i]=r;this.object=new ni,new Tr().load(this.url,i=>{let r=i.scene;r.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),r.scale.copy(this.scale),this.object.add(r)},void 0,i=>{console.error("Error loading the door model:",i)})}};var ax=class{constructor(t,e,i,r,o,s,a,l,u,f){this.onLoad=function(m){this.map=m.map,this.doorMap=m.doorMap,this.tableMap=m.tableMap,this.size=m.size,this.doorParameters=e,this.tableParameters=i,this.humanParameters=r,this.exitDoorParameters=o,this.hearthMonitorParameters=s,this.hearthTableParameters=a,this.surgicalEquipmentParameters=l,this.surgeonParameters=u,this.roomParameters=f,this.initialPosition=this.cellToCartesian(m.initialPosition),this.initialDirection=m.initialDirection,this.object=new ni,this.ground=new ex({textureUrl:m.groundTextureUrl,size:m.size}),this.object.add(this.ground.object),this.wall=new tx({textureUrl:m.wallTextureUrl});for(let p=0;p<=m.size.height;p++)for(let y=0;y<=m.size.width;y++){let M,x=Math.floor(m.size.height/2),b=Math.floor(m.size.width/2);p<x&&y<b?M=0:p<x&&y>=b?M=1:p>=x&&y<b?M=2:M=3;let T=f[M];if(m.map[p][y]===2||m.map[p][y]===3){let E=this.wall.object.clone();E.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),this.object.add(E)}if(m.map[p][y]===1||m.map[p][y]===3){let E=this.wall.object.clone();E.rotateY(Math.PI/2),E.position.set(y-m.size.width/2,.5,p-m.size.height/2+.5),this.object.add(E)}if(m.map[p][y]===4&&!T.isOccupied){let E=new Zu(this.doorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(.0035,.00635,0),E.object.translateY(-.6),E.object.translateX(.5),m.doorMap[p][y]===1?E.object.rotateY(-Math.PI/2):m.doorMap[p][y]===2&&(E.object.translateZ(-.029),E.object.rotateY(Math.PI/2)),this.object.add(E.object)}if(m.map[p][y]===4&&T.isOccupied){let E=new Zu(this.doorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(.0035,.00635,0),E.object.translateY(-.6),E.object.translateX(.5),m.map[p][y]===1?E.object.translateZ(.3):m.map[p][y]===2&&E.object.translateZ(-.029),this.object.add(E.object)}if(this.map[p][y]===5){let E=new fh({url:this.tableParameters.url,scale:new te(.5,1,.5),name:`Table_${p}_${y}`});if(console.log("Table added: "+E.name),E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(1,1,1),E.object.translateX(-.6),E.object.translateY(-.4),this.object.add(E.object),T.isOccupied){console.log("Human added: "+T.isOccupied);let D=new zm(this.humanParameters);D.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),D.object.scale.set(1.2,1,1),D.object.rotateY(Math.PI/2),D.object.translateY(.29),D.object.translateZ(-.67),this.object.add(D.object);let L=new zm(this.surgeonParameters);L.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),L.object.scale.set(.08,.08,.08),L.object.translateY(-.5),L.object.translateZ(.3),L.object.translateX(.15),this.object.add(L.object)}}if(this.map[p][y]===6){let E=new ix(this.exitDoorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.translateX(-.34),E.object.translateY(-1),E.object.translateZ(-.05),this.object.add(E.object)}if(this.map[p][y]===7&&T.isOccupied){let E=new rx(this.hearthMonitorParameters);E.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),E.object.scale.set(.02,.02,.02),E.object.translateZ(.4),E.object.translateX(-.8),E.object.translateY(.6),this.object.add(E.object);let D=new ox(this.hearthTableParameters);D.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),D.object.scale.set(.5,.5,.3),D.object.translateZ(.4),D.object.translateX(-.8),D.object.translateY(-.4),this.object.add(D.object);let L=new sx(this.surgicalEquipmentParameters);L.object.position.set(y-m.size.width/2+.5,.5,p-m.size.height/2),L.object.scale.set(.8,1.55,.87),L.object.translateZ(1.5),L.object.translateX(0),L.object.translateY(-.4),L.object.rotateY(Math.PI/2),this.object.add(L.object)}}this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(m,p){console.log("Resource '"+m+"' "+(100*p.loaded/p.total).toFixed(0)+"% loaded.")},this.onError=function(m,p){console.error("Error loading resource "+m+" ("+p+").")};for(let[m,p]of Object.entries(t))this[m]=p;this.loaded=!1,Aa.enabled=!0;let h=new qu;h.setResponseType("json"),h.load(this.url,m=>this.onLoad(m),m=>this.onProgress(this.url,m),m=>this.onError(this.url,m))}cellToCartesian(t){return new te((t[1]-this.size.width/2+.5)*this.scale.x,0,(t[0]-this.size.height/2+.5)*this.scale.z)}cartesianToCell(t){return[Math.floor(t.z/this.scale.z+this.size.height/2),Math.floor(t.x/this.scale.x+this.size.width/2)]}distanceToWestWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?t.x-this.cellToCartesian(e).x+this.scale.x/2:1/0}distanceToEastWall(t){let e=this.cartesianToCell(t);return e[1]++,this.map[e[0]][e[1]]===1||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).x-this.scale.x/2-t.x:1/0}distanceToNorthWall(t){let e=this.cartesianToCell(t);return this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?t.z-this.cellToCartesian(e).z+this.scale.z/2:1/0}distanceToSouthWall(t){let e=this.cartesianToCell(t);return e[0]++,this.map[e[0]][e[1]]===2||this.map[e[0]][e[1]]===3?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToWestWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===1&&r.isOccupied?t.x-this.cellToCartesian(e).x+this.scale.x/2:1/0}distanceToEastWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===1&&r.isOccupied?this.cellToCartesian(e).x-this.scale.x/2-t.x:1/0}distanceToNorthWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===2&&r.isOccupied?t.z-this.cellToCartesian(e).z+this.scale.z/2:1/0}distanceToSouthWallSound(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===2&&r.isOccupied?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToDoor(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===4&&r.isOccupied?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToTable(t){let e=this.cartesianToCell(t);e[0]++;let i=this.getRoomIndex(e),r=this.roomParameters[i];return this.map[e[0]][e[1]]===5?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}distanceToExitDoor(t){let e=this.cartesianToCell(t);return e[0]++,this.map[e[0]][e[1]]===6?this.cellToCartesian(e).z-this.scale.z/2-t.z:1/0}getRoomIndex(t){let e=Math.floor(this.size.height/2),i=Math.floor(this.size.width/2);return t[0]<e&&t[1]<i?0:t[0]<e&&t[1]>=i?1:t[0]>=e&&t[1]<i?2:3}};var lx=class{constructor(t){this.onLoad=function(i){this.object=i.scene,this.animations=i.animations,this.setShadow(this.object);let r=new Ji;r.setFromObject(this.object);let o=new te;r.getSize(o),o.x=3,o.y=4.4,o.z=2.6,this.radius=o.x/2*this.scale.x,this.eyeHeight*=o.y*this.scale.y,this.object.scale.set(this.scale.x,this.scale.y,this.scale.z),this.loaded=!0},this.onProgress=function(i,r){console.log("Resource '"+i+"' "+(100*r.loaded/r.total).toFixed(0)+"% loaded.")},this.onError=function(i,r){console.error("Error loading resource "+i+" ("+r+").")};for(let[i,r]of Object.entries(t))this[i]=r;this.initialDirection=Nr.degToRad(this.initialDirection),this.keyStates={fixedView:!1,firstPersonView:!1,thirdPersonView:!1,topView:!1,viewMode:!1,miniMap:!1,statistics:!1,userInterface:!1,help:!1,run:!1,left:!1,right:!1,backward:!1,forward:!1,jump:!1,yes:!1,no:!1,wave:!1,punch:!1,thumbsUp:!1},this.loaded=!1,new Tr().load(this.url,i=>this.onLoad(i),i=>this.onProgress(this.url,i),i=>this.onError(this.url,i))}setShadow(t){t.traverseVisible(function(e){e instanceof pr&&(e.castShadow=!0,e.receiveShadow=!1)})}};var cx=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new ni,this.object.ambientLight=new Wy(this.ambientLight.color,this.ambientLight.intensity),this.object.add(this.object.ambientLight),this.object.pointLight1=new Yu(this.pointLight1.color,this.pointLight1.intensity,this.pointLight1.distance),this.object.pointLight1.position.set(this.pointLight1.position.x,this.pointLight1.position.y,this.pointLight1.position.z),this.object.pointLight1.castShadow=!0,this.object.pointLight1.shadow.mapSize.width=512,this.object.pointLight1.shadow.mapSize.height=512,this.object.pointLight1.shadow.camera.near=5,this.object.pointLight1.shadow.camera.far=15,this.object.pointLight1.visible=!1,this.object.add(this.object.pointLight1),this.object.pointLight2=new Yu(this.pointLight2.color,this.pointLight2.intensity,this.pointLight2.distance),this.object.pointLight2.position.set(this.pointLight2.position.x,this.pointLight2.position.y,this.pointLight2.position.z),this.object.pointLight2.castShadow=!0,this.object.pointLight2.shadow.mapSize.width=512,this.object.pointLight2.shadow.mapSize.height=512,this.object.pointLight2.shadow.camera.near=5,this.object.pointLight2.shadow.camera.far=15,this.object.pointLight2.visible=!1,this.object.add(this.object.pointLight2),this.object.directionalLight=new sh(this.directionalLight.color,this.directionalLight.intensity),this.object.directionalLight.castShadow=!0,this.object.directionalLight.position.set(this.directionalLight.position.x,this.directionalLight.position.y,this.directionalLight.position.z),this.object.directionalLight.target.position.set(this.directionalLight.target.x,this.directionalLight.target.y,this.directionalLight.target.z),this.object.add(this.object.directionalLight),this.object.add(this.object.directionalLight.target)}};var ux=class{constructor(t){for(let[e,i]of Object.entries(t))this[e]=i;this.object=new Iy(this.color,this.near,this.far)}};var Fc=class{constructor(t,e,i){for(let[r,o]of Object.entries(t))this[r]=o;this.viewport=this.multipleViewsViewport.clone(),this.target=this.target.clone(),this.initialHalfSize=Math.tan(Nr.degToRad(this.initialFov/2))*this.initialDistance,this.playerDirection=0,this.perspective=new hr,this.orthographic=new Na,this.setWindowSize(e,i),this.initialize()}setViewingParameters(){let t=new Kr(this.orientation.h+this.playerDirection,this.orientation.v),e=Math.cos(Nr.degToRad(t.h)),i=Math.sin(Nr.degToRad(t.h)),r=Math.cos(Nr.degToRad(t.v)),o=Math.sin(Nr.degToRad(t.v)),s=this.target.x,a=this.target.y,l=this.target.z;this.view!="first-person"&&(s-=this.distance*i*r,a-=this.distance*o,l-=this.distance*e*r),this.perspective.position.set(s,a,l),this.orthographic.position.set(s,a,l);let u=-i*o,f=r,h=-e*o;this.perspective.up.set(u,f,h),this.orthographic.up.set(u,f,h);let m=this.target.clone();this.view=="first-person"&&(m.x+=i*r,m.y+=o,m.z+=e*r),this.perspective.lookAt(m),this.orthographic.lookAt(m)}setProjectionParameters(){let t,e,i,r,o;this.aspectRatio<1?(t=2*Nr.radToDeg(Math.atan(Math.tan(Nr.degToRad(this.initialFov/2))/this.aspectRatio)),i=this.initialHalfSize,e=-i,r=i/this.aspectRatio,o=-r):(t=this.initialFov,r=this.initialHalfSize,o=-r,i=r*this.aspectRatio,e=-i),this.perspective.fov=t,this.perspective.aspect=this.aspectRatio,this.perspective.near=this.near,this.perspective.far=this.far,this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.left=e,this.orthographic.right=i,this.orthographic.top=r,this.orthographic.bottom=o,this.orthographic.near=this.near,this.orthographic.far=this.far,this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}setActiveProjection(t){this.projection=t,this.projection!="orthographic"?this.object=this.perspective:this.object=this.orthographic}initialize(){this.orientation=this.initialOrientation.clone(),this.distance=this.initialDistance,this.zoom=this.initialZoom,this.setViewingParameters(),this.setProjectionParameters(),this.view!="mini-map"?this.setActiveProjection("perspective"):this.setActiveProjection("orthographic")}getViewport(){let t=Math.min(this.windowWidth,this.windowHeight),e,i,r=this.viewport.width,o=this.viewport.height;return this.view!="mini-map"?(e=this.viewport.x*(1-this.viewport.width),i=this.viewport.y*(1-this.viewport.height),this.windowWidth<this.windowHeight?(e*=t,i*=this.windowHeight,r*=t,o*=this.windowHeight):(e*=this.windowWidth,i*=t,r*=this.windowWidth,o*=t)):(r*=t,o*=t,e=this.viewport.x*(this.windowWidth-r),i=this.viewport.y*(this.windowHeight-o)),new _n(e,i,r,o)}setViewport(t){t?this.viewport=this.multipleViewsViewport.clone():this.viewport=new _n(0,0,1,1);let e=this.getViewport();this.aspectRatio=e.width/e.height,this.setProjectionParameters()}setWindowSize(t,e){this.windowWidth=t,this.windowHeight=e;let i=this.getViewport();this.aspectRatio=i.width/i.height}updateWindowSize(t,e){this.setWindowSize(t,e),this.setProjectionParameters()}setTarget(t){this.target.copy(t),this.setViewingParameters()}updateTarget(t){this.setTarget(this.target.add(t))}setOrientation(t){this.orientation.copy(t).clamp(this.orientationMin,this.orientationMax),this.setViewingParameters()}updateOrientation(t){this.setOrientation(this.orientation.add(t))}setDistance(t){this.distance=Nr.clamp(t,this.distanceMin,this.distanceMax),this.setViewingParameters()}updateDistance(t){this.setDistance(this.distance+t)}setZoom(t){this.zoom=Nr.clamp(t,this.zoomMin,this.zoomMax),this.perspective.zoom=this.zoom,this.perspective.updateProjectionMatrix(),this.orthographic.zoom=this.zoom,this.orthographic.updateProjectionMatrix()}updateZoom(t){this.setZoom(this.zoom+t)}};var dx=class{constructor(t,e){this.states=["Idle","Walking","Running","Dance","Death","Sitting","Standing"],this.emotes=["Jump","Yes","No","Wave","Punch","ThumbsUp"],this.mixer=new qy(t),this.actionInProgress=!1,this.actions={};for(let i=0;i<e.length;i++){let r=e[i],o=this.mixer.clipAction(r);this.actions[r.name]=o,(this.states.indexOf(r.name)>=4||this.emotes.indexOf(r.name)>=0)&&(o.clampWhenFinished=!0,o.loop=uT)}this.activeName="Idle",this.actions[this.activeName].play()}fadeToAction(t,e){if(this.activeName!=t&&!this.actionInProgress){let i=this.activeName;this.activeName=t,this.actions[i].fadeOut(e),this.actions[this.activeName].reset().setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(e).play(),this.activeName!="Idle"&&this.activeName!="Walking"&&this.activeName!="Running"&&(this.mixer.addEventListener("finished",r=>this.actionFinished(r)),this.actionInProgress=!0)}}actionFinished(){this.actionInProgress&&(this.actionInProgress=!1,this.mixer.removeEventListener("finished",this.actionInProgress))}update(t){this.mixer&&this.mixer.update(t)}};var Lc=class n{constructor(t,e,i,r,o="div"){this.parent=t,this.object=e,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),n.nextNameID=n.nextNameID||0,this.$name.id="lil-gui-name-"+ ++n.nextNameID,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){let e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);let t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}},$T=class extends Lc{constructor(t,e,i){super(t,e,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}};function qT(n){let t,e;return(t=n.match(/(#|0x)?([a-f0-9]{6})/i))?e=t[2]:(t=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?e=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(e=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!e&&"#"+e}var xae={isPrimitive:!0,match:n=>typeof n=="string",fromHexString:qT,toHexString:qT},Hm={isPrimitive:!0,match:n=>typeof n=="number",fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},bae={isPrimitive:!1,match:Array.isArray,fromHexString(n,t,e=1){let i=Hm.fromHexString(n);t[0]=(i>>16&255)/255*e,t[1]=(i>>8&255)/255*e,t[2]=(255&i)/255*e},toHexString:([n,t,e],i=1)=>Hm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},Cae={isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,t,e=1){let i=Hm.fromHexString(n);t.r=(i>>16&255)/255*e,t.g=(i>>8&255)/255*e,t.b=(255&i)/255*e},toHexString:({r:n,g:t,b:e},i=1)=>Hm.toHexString(n*(i=255/i)<<16^t*i<<8^e*i<<0)},Mae=[xae,Hm,bae,Cae],YT=class extends Lc{constructor(t,e,i,r){var o;super(t,e,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(o=this.initialValue,Mae.find(s=>s.match(o))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{let s=qT(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){let e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}},Bm=class extends Lc{constructor(t,e,i){super(t,e,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}},XT=class extends Lc{constructor(t,e,i,r,o,s){super(t,e,i,"number"),this._initInput(),this.min(r),this.max(o);let a=s!==void 0;this.step(a?s:this._getImplicitStep(),a),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){let t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;let t=f=>{let h=parseFloat(this.$input.value);isNaN(h)||(this._snapClampSetValue(h+f),this.$input.value=this.getValue())},e,i,r,o,s,a=!1,l=f=>{if(a){let h=f.clientX-e,m=f.clientY-i;Math.abs(m)>5?(f.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(h)>5&&u()}if(!a){let h=f.clientY-r;s-=h*this._step*this._arrowKeyMultiplier(f),o+s>this._max?s=this._max-o:o+s<this._min&&(s=this._min-o),this._snapClampSetValue(o+s)}r=f.clientY},u=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u)};this.$input.addEventListener("input",()=>{let f=parseFloat(this.$input.value);isNaN(f)||(this._stepExplicit&&(f=this._snap(f)),this.setValue(this._clamp(f)))}),this.$input.addEventListener("keydown",f=>{f.code==="Enter"&&this.$input.blur(),f.code==="ArrowUp"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f))),f.code==="ArrowDown"&&(f.preventDefault(),t(this._step*this._arrowKeyMultiplier(f)*-1))}),this.$input.addEventListener("wheel",f=>{this._inputFocused&&(f.preventDefault(),t(this._step*this._normalizeMouseWheel(f)))},{passive:!1}),this.$input.addEventListener("mousedown",f=>{e=f.clientX,i=r=f.clientY,a=!0,o=this.getValue(),s=0,window.addEventListener("mousemove",l),window.addEventListener("mouseup",u)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");let t=m=>{let p=this.$slider.getBoundingClientRect(),y=(M=m,x=p.left,b=p.right,T=this._min,E=this._max,(M-x)/(b-x)*(E-T)+T);var M,x,b,T,E;this._snapClampSetValue(y)},e=m=>{t(m.clientX)},i=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",i)},r,o,s=!1,a=m=>{m.preventDefault(),this._setDraggingStyle(!0),t(m.touches[0].clientX),s=!1},l=m=>{if(s){let p=m.touches[0].clientX-r,y=m.touches[0].clientY-o;Math.abs(p)>Math.abs(y)?a(m):(window.removeEventListener("touchmove",l),window.removeEventListener("touchend",u))}else m.preventDefault(),t(m.touches[0].clientX)},u=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",u)},f=this._callOnFinishChange.bind(this),h;this.$slider.addEventListener("mousedown",m=>{this._setDraggingStyle(!0),t(m.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",i)}),this.$slider.addEventListener("touchstart",m=>{m.touches.length>1||(this._hasScrollBar?(r=m.touches[0].clientX,o=m.touches[0].clientY,s=!0):a(m),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",u))},{passive:!1}),this.$slider.addEventListener("wheel",m=>{if(Math.abs(m.deltaX)<Math.abs(m.deltaY)&&this._hasScrollBar)return;m.preventDefault();let p=this._normalizeMouseWheel(m)*this._step;this._snapClampSetValue(this.getValue()+p),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(f,400)},{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle("lil-gui-"+e,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:i}=t;return Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,i=-t.wheelDelta/120,i*=this._stepExplicit?1:10),e+-i}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){let e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){let t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}},ZT=class extends Lc{constructor(t,e,i,r){super(t,e,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(o=>{let s=document.createElement("option");s.innerHTML=o,this.$select.appendChild(s)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){let t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=e===-1?t:this._names[e],this}},KT=class extends Lc{constructor(t,e,i){super(t,e,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{r.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}},AV=!1,fx=class n{constructor({parent:t,autoPlace:e=t===void 0,container:i,width:r,title:o="Controls",injectStyles:s=!0,touchStyles:a=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{l.code!=="Enter"&&l.code!=="Space"||(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(o),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!AV&&s&&(function(l){let u=document.createElement("style");u.innerHTML=l;let f=document.querySelector("head link[rel=stylesheet], head style");f?document.head.insertBefore(u,f):document.head.appendChild(u)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"\u2195";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"\u25BE";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"\u25B8"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"\u2713";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),AV=!0),i?i.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",l=>l.stopPropagation()),this.domElement.addEventListener("keyup",l=>l.stopPropagation())}add(t,e,i,r,o){if(Object(i)===i)return new ZT(this,t,e,i);let s=t[e];switch(typeof s){case"number":return new XT(this,t,e,i,r,o);case"boolean":return new $T(this,t,e);case"string":return new KT(this,t,e);case"function":return new Bm(this,t,e)}console.error(`gui.add failed
	property:`,e,`
	object:`,t,`
	value:`,s)}addColor(t,e,i=1){return new YT(this,t,e,i)}addFolder(t){return new n({parent:this,title:t})}load(t,e=!0){return t.controllers&&this.controllers.forEach(i=>{i instanceof Bm||i._name in t.controllers&&i.load(t.controllers[i._name])}),e&&t.folders&&this.folders.forEach(i=>{i._title in t.folders&&i.load(t.folders[i._title])}),this}save(t=!0){let e={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof Bm)){if(i._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);e.controllers[i._name]=i.save()}}),t&&this.folders.forEach(i=>{if(i._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);e.folders[i._title]=i.save()}),e}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{let e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");let i=o=>{o.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);let r=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach(e=>e.reset()),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),this._onChange!==void 0&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(t=>t.destroy())}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach(e=>{t=t.concat(e.controllersRecursive())}),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach(e=>{t=t.concat(e.foldersRecursive())}),t}};var hx=class{constructor(t,e,i,r,o,s){function a(oe,ee){oe.color.set(ee)}function l(oe){e.shadowMap.enabled=oe,t.traverseVisible(function(ee){ee.material&&(ee.material instanceof Yr?ee.material.needsUpdate=!0:Array.isArray(ee.material)&&ee.material.forEach(ge=>{ge instanceof Yr&&(ge.needsUpdate=!0)}))})}function u(oe,ee){P[ee]=function(){oe.fadeToAction(ee,.2)},F.add(P,ee)}this.gui=new fx({hideable:!1});let f=this.gui.addFolder("Lights"),h=f.addFolder("Ambient light");h.add(i.object.ambientLight,"visible").listen();let m=i.object.ambientLight,p={color:"#"+new jt(m.color).getHexString()};h.addColor(p,"color").onChange(oe=>a(m,oe)),h.add(i.object.ambientLight,"intensity",0,1,.01);let y=f.addFolder("Directional light");y.add(i.object.directionalLight,"visible").listen();let M=i.object.directionalLight,x={color:"#"+new jt(M.color).getHexString()};y.addColor(x,"color").onChange(oe=>a(M,oe)),y.add(i.object.directionalLight,"intensity",0,1,.01),y.add(i.object.directionalLight.position,"x",-100,100,.01),y.add(i.object.directionalLight.position,"y",-100,100,.01),y.add(i.object.directionalLight.position,"z",-100,100,.01);let b=f.addFolder("Point light #1");b.close(),b.add(i.object.pointLight1,"visible").listen();let T=i.object.pointLight1,E={color:"#"+new jt(T.color).getHexString()};b.addColor(E,"color").onChange(oe=>a(T,oe)),b.add(i.object.pointLight1,"intensity",0,100,1),b.add(i.object.pointLight1,"distance",0,20,.01),b.add(i.object.pointLight1.position,"x",-10,10,.01),b.add(i.object.pointLight1.position,"y",0,20,.01),b.add(i.object.pointLight1.position,"z",-10,10,.01);let D=f.addFolder("Point light #2");D.close(),D.add(i.object.pointLight2,"visible").listen();let L=i.object.pointLight2,z={color:"#"+new jt(L.color).getHexString()};D.addColor(z,"color").onChange(oe=>a(L,oe)),D.add(i.object.pointLight2,"intensity",0,100,1),D.add(i.object.pointLight2,"distance",0,20,.01),D.add(i.object.pointLight2.position,"x",-10,10,.01),D.add(i.object.pointLight2.position,"y",0,20,.01),D.add(i.object.pointLight2.position,"z",-10,10,.01),this.gui.addFolder("Shadows").add(e.shadowMap,"enabled").onChange(oe=>l(oe));let G=this.gui.addFolder("Character"),F=G.addFolder("Emotes"),P=[];for(let oe=0;oe<s.emotes.length;oe++)u(s,s.emotes[oe]);let N=G.addFolder("Expressions"),S=o.getObjectByName("Head_4"),q=Object.keys(S.morphTargetDictionary);for(let oe=0;oe<q.length;oe++)N.add(S.morphTargetInfluences,oe,0,1,.01).name(q[oe]);this.setVisibility(!0)}setVisibility(t){t?this.gui.domElement.style.display="block":this.gui.domElement.style.display="none"}dispose(){console.log("Disposing of GUI"),this.gui.destroy()}};var px=class{constructor(t){this.selectedRoom=null,this.isInfoVisible=!1,this.roomParameters=t,this.toggleInfoSound=new Audio("audios/i.mp3"),console.log("Sound loaded: "+this.toggleInfoSound.src),this.toggleInfoSound.loop=!1,this.toggleInfoSound.volume=.3,this.toggleHeartMonitorSound=new Audio("audios/heartbit.mp3"),this.toggleHeartMonitorSound.loop=!0,this.initKeyboardListener()}playToggleInfoSound(){this.selectedRoom&&this.toggleInfoSound&&(this.toggleInfoSound.paused||(this.toggleInfoSound.currentTime=0),this.toggleInfoSound.play().catch(t=>{console.error("Error playing sound:",t)}))}playToggleHeartMonitorSound(){this.selectedRoom&&this.selectedRoom.isOccupied&&this.toggleHeartMonitorSound&&(this.toggleHeartMonitorSound.paused||(this.toggleHeartMonitorSound.currentTime=0),this.toggleHeartMonitorSound.play().catch(t=>{console.error("Error playing sound:",t)}))}getRoomFromTable(t){let e=t.name;console.log("getRoomFromTable:"+e);let r={Table_2_2:0,Table_2_8:1,Table_8_2:2,Table_8_8:3}[e];return r===void 0?(console.error(`Table name ${e} is not recognized`),null):this.roomParameters&&Array.isArray(this.roomParameters)&&this.roomParameters.length>r?this.roomParameters[r]:(console.error("roomParameters is not defined, not an array, or out of range"),null)}selectRoomFromTable(t){let e=this.getRoomFromTable(t);if(!e){console.error(`Room not found for table: ${t}`),this.deselectRoom();return}this.selectedRoom=e,this.playToggleHeartMonitorSound(),console.log(`Room selected: ${e.roomNumber}`),this.isInfoVisible&&this.updateRoomInfo()}deselectRoom(){console.log("Deselecting room..."),this.selectedRoom=null,this.clearRoomInfo(),this.toggleHeartMonitorSound.pause()}clearRoomInfo(){let t=document.getElementById("room-info");t&&(t.innerHTML="",t.style.display="none",this.isInfoVisible=!1)}toggleRoomInfo(){if(!this.selectedRoom)return;let t=document.getElementById("room-info")||this.createInfoDiv();this.isInfoVisible?(t.style.display="none",this.isInfoVisible=!1):(this.updateRoomInfo(),t.style.display="block",this.isInfoVisible=!0)}updateRoomInfo(){let t=document.getElementById("room-info");if(t&&this.selectedRoom){let e=this.selectedRoom;t.innerHTML=`
                <h3>Room Information</h3>
                <p><strong>Number:</strong> ${e.roomNumber}</p>
                <p><strong>Capacity:</strong> ${e.capacity}</p>
                <p><strong>Occupied:</strong> ${e.isOccupied?"Yes":"No"}</p>
            `}}initKeyboardListener(){document.addEventListener("keydown",t=>{t.key.toLowerCase()==="i"&&(this.toggleRoomInfo(),this.playToggleInfoSound())})}handlePlayerLeavingRoom(){console.log("Player has left the room."),this.deselectRoom()}createInfoDiv(){let t=document.createElement("div");return t.id="room-info",t.style.position="absolute",t.style.top="10px",t.style.left="10px",t.style.padding="15px",t.style.backgroundColor="rgba(0, 0, 0, 0.8)",t.style.color="white",t.style.borderRadius="5px",t.style.zIndex="1000",t.style.display="none",document.body.appendChild(t),t}};var mx=class{constructor(t,e,i,r,o,s,a,l,u,f,h,m,p,y,M,x,b,T,E){this.generalParameters=vr({},fV,t),this.mazeParameters=vr({},hV,e),this.playerParameters=vr({},pV,i),this.lightsParameters=vr({},mV,r),this.fogParameters=vr({},gV,o),this.fixedViewCameraParameters=vr({},ch,s),this.firstPersonViewCameraParameters=vr({},ch,a),this.thirdPersonViewCameraParameters=vr({},ch,l),this.topViewCameraParameters=vr({},ch,u),this.miniMapCameraParameters=vr({},ch,f),this.doorParameters=vr({},_V,h),this.tableParameters=vr({},vV,m),this.humanParameters=vr({},yV,p),this.exitDoorParameters=vr({},xV,y),this.hearthMonitorParameters=vr({},bV,M),this.hearthTableParameters=vr({},CV,x),this.surgicalEquipmentParameters=vr({},MV,b),this.surgeonParameters=vr({},wV,T),this.roomParameters=E&&E.rooms?E.rooms:[],this.scene2D=new Dm;let D=[new te(0,0,0),new te(1,0,0),new te(1,1,0),new te(0,1,0)],L=new Oo().setFromPoints(D),z=new $u({color:16777215});this.square=new ih(L,z),this.scene2D.add(this.square),this.camera2D=new Na(0,1,1,0,0,1),this.scene3D=new Dm,this.maze=new ax(this.mazeParameters,this.doorParameters,this.tableParameters,this.humanParameters,this.exitDoorParameters,this.hearthMonitorParameters,this.hearthTableParameters,this.surgicalEquipmentParameters,this.surgeonParameters,this.roomParameters),this.player=new lx(this.playerParameters),this.lights=new cx(this.lightsParameters),this.fog=new ux(this.fogParameters),this.door=new Zu(this.doorParameters),this.table=new fh(this.tableParameters),this.fixedViewCamera=new Fc(this.fixedViewCameraParameters,window.innerWidth,window.innerHeight),this.firstPersonViewCamera=new Fc(this.firstPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.thirdPersonViewCamera=new Fc(this.thirdPersonViewCameraParameters,window.innerWidth,window.innerHeight),this.topViewCamera=new Fc(this.topViewCameraParameters,window.innerWidth,window.innerHeight),this.miniMapCamera=new Fc(this.miniMapCameraParameters,window.innerWidth,window.innerHeight),this.statistics=new dV,this.statistics.dom.style.visibility="hidden",document.body.appendChild(this.statistics.dom),this.renderer=new Ay({antialias:!0}),this.generalParameters.setDevicePixelRatio&&this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=tT,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1,this.gameRunning=!1,this.viewsPanel=document.getElementById("views-panel"),this.view=document.getElementById("view"),this.projection=document.getElementById("projection"),this.horizontal=document.getElementById("horizontal"),this.horizontal.step=1,this.vertical=document.getElementById("vertical"),this.vertical.step=1,this.distance=document.getElementById("distance"),this.distance.step=.1,this.zoom=document.getElementById("zoom"),this.zoom.step=.1,this.reset=document.getElementById("reset"),this.resetAll=document.getElementById("reset-all"),this.helpPanel=document.getElementById("help-panel"),this.helpPanel.style.visibility="hidden",this.subwindowsPanel=document.getElementById("subwindows-panel"),this.multipleViewsCheckBox=document.getElementById("multiple-views"),this.multipleViewsCheckBox.checked=!1,this.userInterfaceCheckBox=document.getElementById("user-interface"),this.userInterfaceCheckBox.checked=!0,this.miniMapCheckBox=document.getElementById("mini-map"),this.miniMapCheckBox.checked=!0,this.helpCheckBox=document.getElementById("help"),this.helpCheckBox.checked=!1,this.statisticsCheckBox=document.getElementById("statistics"),this.statisticsCheckBox.checked=!1,this.sceneContainer=document.getElementById("scene-container"),this.renderer.domElement.id="scene-container",this.exitMenu=document.getElementById("exit-menu"),this.exitYesButton=document.getElementById("exit-yes"),this.exitNoButton=document.getElementById("exit-no"),this.exitYesButton&&this.exitNoButton&&(this.exitYesButton.addEventListener("click",()=>this.exitGame()),this.exitNoButton.addEventListener("click",()=>this.continueGame())),this.buildHelpPanel(),this.setActiveViewCamera(this.fixedViewCamera),this.arrangeViewports(this.multipleViewsCheckBox.checked),window.addEventListener("resize",k=>this.windowResize(k)),document.addEventListener("keydown",k=>this.keyChange(k,!0)),document.addEventListener("keyup",k=>this.keyChange(k,!1)),this.renderer.domElement.addEventListener("mousedown",k=>this.mouseDown(k)),this.renderer.domElement.addEventListener("mousemove",k=>this.mouseMove(k)),this.renderer.domElement.addEventListener("mouseup",k=>this.mouseUp(k)),this.renderer.domElement.addEventListener("wheel",k=>this.mouseWheel(k)),this.renderer.domElement.addEventListener("contextmenu",k=>this.contextMenu(k)),this.renderer.domElement.addEventListener("click",k=>this.mouseClick(k)),this.view.addEventListener("change",k=>this.elementChange(k)),this.projection.addEventListener("change",k=>this.elementChange(k)),this.horizontal.addEventListener("change",k=>this.elementChange(k)),this.vertical.addEventListener("change",k=>this.elementChange(k)),this.distance.addEventListener("change",k=>this.elementChange(k)),this.zoom.addEventListener("change",k=>this.elementChange(k)),this.multipleViewsCheckBox.addEventListener("change",k=>this.elementChange(k)),this.userInterfaceCheckBox.addEventListener("change",k=>this.elementChange(k)),this.helpCheckBox.addEventListener("change",k=>this.elementChange(k)),this.statisticsCheckBox.addEventListener("change",k=>this.elementChange(k)),this.reset.addEventListener("click",k=>this.buttonClick(k)),this.resetAll.addEventListener("click",k=>this.buttonClick(k)),this.activeElement=document.activeElement,this.roomInfoHandler=new px(this.roomParameters),this.player.moveSound=new Audio("/audios/walking.mp3"),console.log(this.player.moveSound),this.player.moveSound.loop=!0,this.player.moveSound.volume=.3,this.activeKeys=new Set,this.player.hitWallSound=new Audio("/audios/hurt.mp3"),this.player.hitWallSound.loop=!1,this.player.hitWallSound.volume=.3,this.door.hearthSound=new Audio("/audios/heartbit.mp3"),this.door.hearthSound.loop=!0}mouseClick(t){if(t.button===0&&t.target.id==="scene-container"){t.preventDefault();let e=new Yy,i=new pn(t.clientX/window.innerWidth*2-1,-(t.clientY/window.innerHeight)*2+1);e.setFromCamera(i,this.activeViewCamera.object);let r=e.intersectObjects(this.scene3D.children,!0);if(r.length>0){let o=r.find(s=>s.object.isTable);if(o){let s=o.object;console.log("Picked table:",s.name),this.roomInfoHandler.selectRoomFromTable(s),this.moveCameraToTable(s)}}}}moveCameraToTable(t){if(this.isCameraAnimating){console.log("Camera is already animating");return}this.isCameraAnimating=!0;let e=new Ji().setFromObject(t);console.log("Bounding Box:",e);let i=e.getCenter(new te);console.log("Target Position:",i);let r=this.activeViewCamera.object,o=new te(0,6,0),s=i.clone().add(o);console.log("Final Position:",s);let a=r.position.clone(),l=r.quaternion.clone(),u=new te(0,1,0),f=new qr().setFromRotationMatrix(new cn().lookAt(s,i,u)),h=r.zoom,m=1,p=1500,y=Date.now(),M=b=>b<.5?2*b*b:-1+(4-2*b)*b,x=()=>{let b=Date.now()-y,T=Math.min(b/p,1),E=M(T);if(r.position.lerpVectors(a,s,E),r.quaternion.slerpQuaternions(l,f,E),r.zoom=Nr.lerp(h,m,E),r.updateProjectionMatrix(),this.spotlight){let D=new te(0,10,0),L=s.clone().add(D);this.spotlight.position.lerpVectors(a.clone().add(D),L,E),this.spotlight.target.position.copy(i),this.spotlight.target.updateMatrixWorld()}T<1?requestAnimationFrame(x):this.isCameraAnimating=!1};x()}buildHelpPanel(){let t=document.getElementById("help-table"),e=0;for(let i in this.player.keyCodes){for(;t.rows[e].cells.length<2;)e++;t.rows[e++].cells[0].innerHTML=this.player.keyCodes[i]}t.rows[e].cells[0].innerHTML=this.maze.credits+"<br>"+this.player.credits}displayPanel(){this.view.options.selectedIndex=["fixed","first-person","third-person","top"].indexOf(this.activeViewCamera.view),this.projection.options.selectedIndex=["perspective","orthographic"].indexOf(this.activeViewCamera.projection),this.horizontal.value=this.activeViewCamera.orientation.h.toFixed(0),this.vertical.value=this.activeViewCamera.orientation.v.toFixed(0),this.distance.value=this.activeViewCamera.distance.toFixed(1),this.zoom.value=this.activeViewCamera.zoom.toFixed(1)}setActiveViewCamera(t){this.activeViewCamera=t,this.horizontal.min=this.activeViewCamera.orientationMin.h.toFixed(0),this.horizontal.max=this.activeViewCamera.orientationMax.h.toFixed(0),this.vertical.min=this.activeViewCamera.orientationMin.v.toFixed(0),this.vertical.max=this.activeViewCamera.orientationMax.v.toFixed(0),this.distance.min=this.activeViewCamera.distanceMin.toFixed(1),this.distance.max=this.activeViewCamera.distanceMax.toFixed(1),this.zoom.min=this.activeViewCamera.zoomMin.toFixed(1),this.zoom.max=this.activeViewCamera.zoomMax.toFixed(1),this.displayPanel()}arrangeViewports(t){this.fixedViewCamera.setViewport(t),this.firstPersonViewCamera.setViewport(t),this.thirdPersonViewCamera.setViewport(t),this.topViewCamera.setViewport(t)}pointerIsOverViewport(t,e){return t.x>=e.x&&t.x<e.x+e.width&&t.y>=e.y&&t.y<e.y+e.height}getPointedViewport(t){let e;if(this.miniMapCheckBox.checked&&(e=this.miniMapCamera.getViewport(),this.pointerIsOverViewport(t,e)))return this.miniMapCamera.view;let i;this.multipleViewsCheckBox.checked?i=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:i=[this.activeViewCamera];for(let r of i)if(e=r.getViewport(),this.pointerIsOverViewport(t,e))return r.view;return"none"}setViewMode(t){this.multipleViewsCheckBox.checked=t,this.arrangeViewports(this.multipleViewsCheckBox.checked)}setUserInterfaceVisibility(t){this.userInterfaceCheckBox.checked=t,this.viewsPanel.style.visibility=t?"visible":"hidden",this.subwindowsPanel.style.visibility=t?"visible":"hidden",this.userInterface.setVisibility(t)}setMiniMapVisibility(t){this.miniMapCheckBox.checked=t}setHelpVisibility(t){this.helpCheckBox.checked=t,this.helpPanel.style.visibility=t?"visible":"hidden"}setStatisticsVisibility(t){this.statisticsCheckBox.checked=t,this.statistics.dom.style.visibility=t?"visible":"hidden"}windowResize(){this.fixedViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.firstPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.thirdPersonViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.topViewCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.miniMapCamera.updateWindowSize(window.innerWidth,window.innerHeight),this.renderer.setSize(window.innerWidth,window.innerHeight)}keyChange(t,e){["horizontal","vertical","distance","zoom"].indexOf(t.target.id)<0&&t.target.blur(),["Space","ArrowLeft","ArrowRight","ArrowDown","ArrowUp"].includes(t.code)&&(t.preventDefault(),e?this.activeKeys.has(t.code)||(this.activeKeys.add(t.code),(t.code==="ArrowUp"||t.code==="ArrowDown")&&this.player.moveSound.play()):(this.activeKeys.delete(t.code),(this.activeKeys.size===0||t.code==="ArrowUp"||t.code==="ArrowDown")&&(this.player.moveSound.pause(),this.player.moveSound.currentTime=0)),t.code==this.player.keyCodes.fixedView&&e?this.setActiveViewCamera(this.fixedViewCamera):t.code==this.player.keyCodes.firstPersonView&&e?this.setActiveViewCamera(this.firstPersonViewCamera):t.code==this.player.keyCodes.thirdPersonView&&e?this.setActiveViewCamera(this.thirdPersonViewCamera):t.code==this.player.keyCodes.topView&&e&&this.setActiveViewCamera(this.topViewCamera),t.code==this.player.keyCodes.viewMode&&e&&this.setViewMode(!this.multipleViewsCheckBox.checked),t.code==this.player.keyCodes.miniMap&&e&&this.setMiniMapVisibility(!this.miniMapCheckBox.checked),t.code==this.player.keyCodes.help&&e&&this.setHelpVisibility(!this.helpCheckBox.checked),t.code==this.player.keyCodes.statistics&&e&&this.setStatisticsVisibility(!this.statisticsCheckBox.checked),t.code==this.player.keyCodes.run&&(this.player.keyStates.run=e),t.code==this.player.keyCodes.left?this.player.keyStates.left=e:t.code==this.player.keyCodes.right&&(this.player.keyStates.right=e),t.code==this.player.keyCodes.backward?this.player.keyStates.backward=e:t.code==this.player.keyCodes.forward&&(this.player.keyStates.forward=e),t.code==this.player.keyCodes.jump?this.player.keyStates.jump=e:t.code==this.player.keyCodes.yes?this.player.keyStates.yes=e:t.code==this.player.keyCodes.no?this.player.keyStates.no=e:t.code==this.player.keyCodes.wave?this.player.keyStates.wave=e:t.code==this.player.keyCodes.punch?this.player.keyStates.punch=e:t.code==this.player.keyCodes.thumbsUp&&(this.player.keyStates.thumbsUp=e))}mouseDown(t){if(t.buttons==2){this.isRotating=!0,this.mousePosition=new pn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none")if(e=="mini-map")t.buttons==1&&(this.dragMiniMap=!0);else{let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i,this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i]),t.buttons==1?this.changeCameraDistance=!0:this.changeCameraOrientation=!0}this.isRotating==!0&&this.roomInfoHandler.deselectRoom()}}mouseMove(t){if((t.buttons==1||t.buttons==2)&&(this.changeCameraDistance||this.changeCameraOrientation||this.dragMiniMap)){let e=new pn(t.clientX,window.innerHeight-t.clientY-1),i=e.clone().sub(this.mousePosition);if(this.mousePosition=e,t.buttons==1){if(this.changeCameraDistance)this.activeViewCamera.updateDistance(-.05*(i.x+i.y)),this.displayPanel();else if(this.dragMiniMap){let r=Math.min(window.innerWidth,window.innerHeight),o=this.miniMapCamera.viewport.width*r,s=this.miniMapCamera.viewport.height*r;this.miniMapCamera.viewport.x+=i.x/(window.innerWidth-o),this.miniMapCamera.viewport.y+=i.y/(window.innerHeight-s)}}else this.changeCameraOrientation&&(this.activeViewCamera.updateOrientation(i.multiply(new pn(-.5,.5))),this.displayPanel())}}mouseUp(t){this.dragMiniMap=!1,this.changeCameraDistance=!1,this.changeCameraOrientation=!1}mouseWheel(t){t.preventDefault(),this.mousePosition=new pn(t.clientX,window.innerHeight-t.clientY-1);let e=this.getPointedViewport(this.mousePosition);if(e!="none"&&e!="mini-map"){let i=["fixed","first-person","third-person","top"].indexOf(e);this.view.options.selectedIndex=i;let r=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][i];r.updateZoom(-.001*t.deltaY),this.setActiveViewCamera(r)}}contextMenu(t){t.preventDefault()}elementChange(t){switch(t.target.id){case"view":this.setActiveViewCamera([this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera][this.view.options.selectedIndex]);break;case"projection":this.activeViewCamera.setActiveProjection(["perspective","orthographic"][this.projection.options.selectedIndex]),this.displayPanel();break;case"horizontal":case"vertical":case"distance":case"zoom":if(t.target.checkValidity())switch(t.target.id){case"horizontal":case"vertical":this.activeViewCamera.setOrientation(new Kr(this.horizontal.value,this.vertical.value));break;case"distance":this.activeViewCamera.setDistance(this.distance.value);break;case"zoom":this.activeViewCamera.setZoom(this.zoom.value);break}break;case"multiple-views":this.setViewMode(t.target.checked);break;case"user-interface":this.setUserInterfaceVisibility(t.target.checked);break;case"help":this.setHelpVisibility(t.target.checked);break;case"statistics":this.setStatisticsVisibility(t.target.checked);break}}buttonClick(t){switch(t.target.id){case"reset":this.activeViewCamera.initialize();break;case"reset-all":this.fixedViewCamera.initialize(),this.firstPersonViewCamera.initialize(),this.thirdPersonViewCamera.initialize(),this.topViewCamera.initialize();break}this.displayPanel()}finalSequence(){this.fog.enabled=!1,this.thirdPersonViewCamera.setOrientation(new Kr(-180,this.thirdPersonViewCamera.initialOrientation.v)),this.thirdPersonViewCamera.setDistance(this.thirdPersonViewCamera.initialDistance),this.thirdPersonViewCamera.setZoom(2),this.setActiveViewCamera(this.thirdPersonViewCamera),this.setViewMode(!1),this.animations.fadeToAction("Dance",.2)}collision(t){let e=this.maze.distanceToWestWall(t)<this.player.radius||this.maze.distanceToEastWall(t)<this.player.radius||this.maze.distanceToNorthWall(t)<this.player.radius||this.maze.distanceToSouthWall(t)<this.player.radius,i=this.maze.distanceToDoor(t)<this.player.radius;return e||i}stopPlayerMovement(){this.activeKeys.clear(),this.player.isMoving=!1}exitModelView(t){let e=this.maze.distanceToExitDoor(t)*3<this.player.radius;return e&&(this.showExitMenu(),this.stopPlayerMovement(),!0)}showExitMenu(){this.exitMenu&&(this.exitMenu.style.display="block")}exitGame(){console.log("Exiting game and presenting main menu..."),window.location.href="/index.html"}continueGame(){console.log("Continuing game..."),this.exitMenu&&(this.exitMenu.style.display="none")}update(){if(!this.gameRunning)this.maze.loaded&&this.player.loaded&&(this.scene3D.add(this.maze.object),this.scene3D.add(this.player.object),this.scene3D.add(this.lights.object),this.clock=new $y,this.animations=new dx(this.player.object,this.player.animations),this.player.position=this.maze.initialPosition.clone(),this.player.direction=this.maze.initialDirection,this.userInterface=new hx(this.scene3D,this.renderer,this.lights,this.fog,this.player.object,this.animations),this.gameRunning=!0);else{let t=this.clock.getDelta();if(this.animations.update(t),!this.animations.actionInProgress){let r=this.player.walkingSpeed*t,o=this.player.turningSpeed*t;this.player.keyStates.run&&(r*=this.player.runningFactor,o*=this.player.runningFactor),this.player.keyStates.left?this.player.direction+=o:this.player.keyStates.right&&(this.player.direction-=o);let s=Nr.degToRad(this.player.direction);if(this.player.keyStates.backward){let a=new te(-r*Math.sin(s)+this.player.position.x,this.player.position.y,-r*Math.cos(s)+this.player.position.z);this.collision(a)||this.exitModelView(a)?(this.animations.fadeToAction("Death",.2),this.player.moveSound.pause(),this.player.hitWallSound.play()):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else if(this.player.keyStates.forward){let a=new te(r*Math.sin(s)+this.player.position.x,this.player.position.y,r*Math.cos(s)+this.player.position.z);this.collision(a)||this.exitModelView(a)?(this.animations.fadeToAction("Death",.2),this.player.moveSound.pause(),this.player.hitWallSound.play()):(this.animations.fadeToAction(this.player.keyStates.run?"Running":"Walking",.2),this.player.position=a)}else this.player.keyStates.jump?this.animations.fadeToAction("Jump",.2):this.player.keyStates.yes?this.animations.fadeToAction("Yes",.2):this.player.keyStates.no?this.animations.fadeToAction("No",.2):this.player.keyStates.wave?this.animations.fadeToAction("Wave",.2):this.player.keyStates.punch?this.animations.fadeToAction("Punch",.2):this.player.keyStates.thumbsUp?this.animations.fadeToAction("ThumbsUp",.2):this.animations.fadeToAction("Idle",this.animations.previousAction=="Death"?.6:.2);this.player.object.position.copy(this.player.position),this.player.object.rotation.y=s-this.player.initialDirection}this.firstPersonViewCamera.playerDirection=this.player.direction,this.thirdPersonViewCamera.playerDirection=this.player.direction,this.topViewCamera.playerDirection=this.player.direction;let e=new te(this.player.position.x,this.player.position.y+this.player.eyeHeight,this.player.position.z);this.firstPersonViewCamera.setTarget(e),this.thirdPersonViewCamera.setTarget(e),this.topViewCamera.setTarget(e),this.statistics.update(),this.renderer.clear(),this.fog.enabled?this.scene3D.fog=this.fog.object:this.scene3D.fog=null;let i;this.multipleViewsCheckBox.checked?i=[this.fixedViewCamera,this.firstPersonViewCamera,this.thirdPersonViewCamera,this.topViewCamera]:i=[this.activeViewCamera];for(let r of i){this.player.object.visible=r!=this.firstPersonViewCamera;let o=r.getViewport();this.renderer.setViewport(o.x,o.y,o.width,o.height),this.renderer.render(this.scene3D,r.object),this.renderer.render(this.scene2D,this.camera2D),this.renderer.clearDepth()}if(this.miniMapCheckBox.checked){this.scene3D.fog=null,this.player.object.visible=!0;let r=this.miniMapCamera.getViewport();this.renderer.setViewport(r.x,r.y,r.width,r.height),this.renderer.render(this.scene3D,this.miniMapCamera.object),this.renderer.render(this.scene2D,this.camera2D)}}}dispose(){this.renderer&&this.renderer.dispose(),this.scene&&this.scene.children.forEach(t=>{t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(e=>e.dispose()):t.material.dispose()),this.scene.remove(t)}),this.userInterface&&this.userInterface.dispose()}};var gx=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/SurgeryRoom/"}getRoomsAvailabilityByDate(e){let r=new Date(e).toISOString().split("T")[0];console.log(r);let o=new ms().set("date",r);return this.http.get(this.apiUrl,{params:o})}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Eae(n,t){if(n&1&&(g(0,"tr")(1,"td",38)(2,"p"),C(3),_()()()),n&2){let e=ae();A(3),Je(e.error)}}var IV=(()=>{class n{constructor(e,i){this.platformId=e,this.hospital3dService=i,this.animationFrameId=null,this.selectedDate=new Date,this.firstRooms=[{roomNumber:"101",type:"Conference",capacity:20,equipment:["Projector","Whiteboard"],isOccupied:!1},{roomNumber:"102",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0},{roomNumber:"103",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!1},{roomNumber:"104",type:"Meeting",capacity:10,equipment:["TV","Phone"],isOccupied:!0}],this.rooms=[],this.loading=!1,this.error=null,this.animate=()=>{of(this.platformId)&&(this.animationFrameId=requestAnimationFrame(this.animate),this.thumbRaiser.update())}}initialize(e=this.firstRooms){this.disposeThumbRaiser(),this.thumbRaiser=new mx({},{scale:new te(1,.5,1)},{},{ambientLight:{intensity:.5},pointLight1:{intensity:50,distance:20,position:new te(-3.5,10,2.5)},pointLight2:{intensity:50,distance:20,position:new te(3.5,10,-2.5)},directionalLight:{intensity:.5,position:new te(0,10,0)}},{},{view:"fixed",multipleViewsViewport:new _n(0,1,.45,.5)},{view:"first-person",multipleViewsViewport:new _n(1,1,.55,.5),initialOrientation:new Kr(0,-10),initialDistance:2,distanceMin:1,distanceMax:4},{view:"third-person",multipleViewsViewport:new _n(0,0,.55,.5),initialOrientation:new Kr(0,-20),initialDistance:2,distanceMin:1,distanceMax:4},{view:"top",multipleViewsViewport:new _n(1,0,.45,.5),initialOrientation:new Kr(0,-90),initialDistance:4,distanceMin:1,distanceMax:16},{view:"mini-map",multipleViewsViewport:new _n(.99,.02,.3,.3),initialOrientation:new Kr(180,-90),initialZoom:.64},{},{},{},{},{},{},{},{},{rooms:e}),(!this.thumbRaiser.renderer||!this.thumbRaiser.update)&&console.error("ThumbRaiser properties are not properly initialized");let i=document.getElementById("scene-container");i&&(i.innerHTML="",i.appendChild(this.thumbRaiser.renderer.domElement))}ngOnInit(){of(this.platformId)&&(this.initialize(),this.animate())}ngAfterViewInit(){}ngOnDestroy(){this.disposeThumbRaiser()}disposeThumbRaiser(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.thumbRaiser&&(this.thumbRaiser.dispose(),this.thumbRaiser=null)}checkOperations(){this.selectedDate?(this.loading=!0,this.error=null,this.hospital3dService.getRoomsAvailabilityByDate(this.selectedDate).subscribe(e=>{console.log("Rooms fetched:",e),this.rooms=e;let i=this.rooms;this.update3DVisualization(i),this.loading=!1},e=>{console.error("Error fetching rooms",e),this.error="Error fetching rooms",this.loading=!1})):this.error="No date selected"}onDateChange(e){console.log("Date changed:",this.selectedDate)}update3DVisualization(e){this.disposeThumbRaiser(),this.initialize(e),this.animate()}static{this.\u0275fac=function(i){return new(i||n)($(Br),$(gx))}}static{this.\u0275cmp=We({type:n,selectors:[["app-hospital3d"]],standalone:!0,features:[Hi([gx]),Ke],decls:193,vars:2,consts:[["id","parent"],["id","views-panel"],[1,"views"],["id","view"],["value","fixed"],["value","first"],["value","third"],["value","top"],["type","number","id","horizontal","required",""],["type","number","id","vertical","required",""],["type","button","id","reset","value","Reset view"],["id","projection"],["value","perspective"],["value","orthographic"],["type","number","id","distance","required",""],["type","number","id","zoom","required",""],["type","button","id","reset-all","value","Reset all views"],["colspan","4",2,"text-align","center"],["for","date-picker",2,"margin-right","10px"],["type","datetime-local","id","date-picker",2,"margin-right","10px",3,"ngModelChange","change","ngModel"],[2,"padding","5px 15px",3,"click"],[4,"ngIf"],["id","scene-container"],["id","help-panel"],["id","help-table",1,"help"],["colspan","2",2,"font-size","3.0vmin"],["colspan","2",2,"text-align","left"],["colspan","2",2,"text-align","right"],["id","subwindows-panel"],[1,"subwindows"],["type","checkbox","id","multiple-views"],["type","checkbox","id","user-interface"],["type","checkbox","id","mini-map"],["type","checkbox","id","help"],["type","checkbox","id","statistics"],["id","exit-menu",1,"exit-menu"],["id","exit-yes"],["id","exit-no"],["colspan","4",2,"text-align","center","color","red"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"table",2)(3,"tbody")(4,"tr")(5,"td")(6,"label"),C(7,"View:"),_(),g(8,"select",3)(9,"option",4),C(10,"Fixed"),_(),g(11,"option",5),C(12,"First-person"),_(),g(13,"option",6),C(14,"Third-person"),_(),g(15,"option",7),C(16,"Top"),_()()(),g(17,"td")(18,"label"),C(19,"Orientation (h):"),_(),me(20,"input",8),_(),g(21,"td")(22,"label"),C(23,"Orientation (v):"),_(),me(24,"input",9),_(),g(25,"td"),me(26,"input",10),_()(),g(27,"tr")(28,"td")(29,"label"),C(30,"Projection:"),_(),g(31,"select",11)(32,"option",12),C(33,"Perspective"),_(),g(34,"option",13),C(35,"Orthographic"),_()()(),g(36,"td")(37,"label"),C(38,"Distance:"),_(),me(39,"input",14),_(),g(40,"td")(41,"label"),C(42,"Zoom:"),_(),me(43,"input",15),_(),g(44,"td"),me(45,"input",16),_()(),g(46,"tr")(47,"td",17)(48,"label",18),C(49,"Select a Date:"),_(),g(50,"input",19),Xe("ngModelChange",function(s){return Ze(r.selectedDate,s)||(r.selectedDate=s),s}),se("change",function(s){return r.onDateChange(s)}),_(),g(51,"button",20),se("click",function(){return r.checkOperations()}),C(52,"Check Operations"),_()()(),Se(53,Eae,4,1,"tr",21),_()()(),me(54,"div",22),g(55,"div",23)(56,"table",24)(57,"tbody")(58,"tr")(59,"th",25),C(60," Help "),_()(),g(61,"tr")(62,"th",26),C(63,"Select active view"),_()(),g(64,"tr"),me(65,"td"),g(66,"td"),C(67,"Fixed view"),_()(),g(68,"tr"),me(69,"td"),g(70,"td"),C(71,"First-person view"),_()(),g(72,"tr"),me(73,"td"),g(74,"td"),C(75,"Third-person view"),_()(),g(76,"tr"),me(77,"td"),g(78,"td"),C(79,"Top view"),_()(),g(80,"tr")(81,"th",26),C(82,"Toggle view mode"),_()(),g(83,"tr"),me(84,"td"),g(85,"td"),C(86,"Single-view mode / multiple-views mode"),_()(),g(87,"tr")(88,"th",26),C(89,"Display / hide subwindows"),_()(),g(90,"tr"),me(91,"td"),g(92,"td"),C(93,"User interface"),_()(),g(94,"tr"),me(95,"td"),g(96,"td"),C(97,"Mini-map"),_()(),g(98,"tr"),me(99,"td"),g(100,"td"),C(101,"Help"),_()(),g(102,"tr"),me(103,"td"),g(104,"td"),C(105,"Statistics"),_()(),g(106,"tr")(107,"th",26),C(108,"Move character"),_()(),g(109,"tr"),me(110,"td"),g(111,"td"),C(112,"Walk / run (modifier key)"),_()(),g(113,"tr"),me(114,"td"),g(115,"td"),C(116,"Turn left slowly / quickly"),_()(),g(117,"tr"),me(118,"td"),g(119,"td"),C(120,"Turn right slowly / quickly"),_()(),g(121,"tr"),me(122,"td"),g(123,"td"),C(124,"Walk / run backward"),_()(),g(125,"tr"),me(126,"td"),g(127,"td"),C(128,"Walk / run forward"),_()(),g(129,"tr")(130,"th",26),C(131,"Emote character"),_()(),g(132,"tr"),me(133,"td"),g(134,"td"),C(135,"Jump"),_()(),g(136,"tr"),me(137,"td"),g(138,"td"),C(139,"Yes"),_()(),g(140,"tr"),me(141,"td"),g(142,"td"),C(143,"No"),_()(),g(144,"tr"),me(145,"td"),g(146,"td"),C(147,"Wave"),_()(),g(148,"tr"),me(149,"td"),g(150,"td"),C(151,"Punch"),_()(),g(152,"tr"),me(153,"td"),g(154,"td"),C(155,"Thumbs up"),_()(),g(156,"tr"),me(157,"td",27),_()()()(),g(158,"div",28)(159,"table",29)(160,"tbody")(161,"tr")(162,"td")(163,"label"),C(164,"Multiple views:"),_(),me(165,"input",30),_()(),g(166,"tr")(167,"td")(168,"label"),C(169,"User interface:"),_(),me(170,"input",31),_()(),g(171,"tr")(172,"td")(173,"label"),C(174,"Mini-map:"),_(),me(175,"input",32),_()(),g(176,"tr")(177,"td")(178,"label"),C(179,"Help:"),_(),me(180,"input",33),_()(),g(181,"tr")(182,"td")(183,"label"),C(184,"Statistics:"),_(),me(185,"input",34),_()()()()(),g(186,"div",35)(187,"h2"),C(188,"Do you want to exit?"),_(),g(189,"button",36),C(190,"Yes"),_(),g(191,"button",37),C(192,"No"),_()()()),i&2&&(A(50),Ye("ngModel",r.selectedDate),A(3),X("ngIf",r.error))},dependencies:[bt,Ri,ki,Ot,Nt,hn,vt,Xt],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;background-color:#f0f0f0}canvas[_ngcontent-%COMP%]{display:block;height:100vh;width:100vw;pointer-events:auto}#scene-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;overflow:hidden;background-color:#000;pointer-events:auto}#parent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:auto}#views-panel[_ngcontent-%COMP%]{position:absolute;top:1vh;left:50%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;text-align:center;font-size:1.5vmin;color:#fff;pointer-events:auto}#help-panel[_ngcontent-%COMP%]{position:absolute;right:1vw;top:1vh;z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}#subwindows-panel[_ngcontent-%COMP%]{position:absolute;bottom:1vh;left:5%;transform:translate(-50%);z-index:10;background-color:#0009;padding:1vmin;border-radius:8px;font-size:1.5vmin;color:#fff;pointer-events:auto}.left-align[_ngcontent-%COMP%]{text-align:left}.exit-menu[_ngcontent-%COMP%]{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#000c;color:#fff;padding:20px;border-radius:10px;text-align:center;z-index:1000}.exit-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px;padding:10px 20px;font-size:16px}"]})}}return n})();var RV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}deleteAccount(e){return this.http.delete(`${this.apiUrl}/DeleteUser/${e}`,{observe:"response"}).pipe(nn(i=>(console.error("Error deleting account:",i),En(i))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kV=(()=>{class n{constructor(e,i){this.deleteUserService=e,this.router=i}ngOnInit(){}onDelete(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.deleteUserService.deleteAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully deleted.")},r=>{console.error("Account deletion failed",r),alert("Account deletion failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account deletion failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account deletion cancelled.")}static{this.\u0275fac=function(i){return new(i||n)($(RV),$(Ct))}}static{this.\u0275cmp=We({type:n,selectors:[["app-delete-user"]],standalone:!0,features:[Ke],decls:8,vars:0,consts:[[1,"delete-user-container"],[1,"delete-user-box"],[1,"delete-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"p"),C(3,"Are you sure you want to delete your account? This action is irreversible."),_(),g(4,"button",2),se("click",function(){return r.onDelete()}),C(5,"Delete"),_(),g(6,"button",3),se("click",function(){return r.onCancel()}),C(7,"Cancel"),_()()())},styles:[".delete-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.delete-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.delete-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.delete-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c82333}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function Pae(n,t){if(n&1&&(g(0,"div",9),C(1),_()),n&2){let e=ae();A(),_t(" ",e.errorMessage," ")}}var NV=(()=>{class n{constructor(e){this.staffService=e,this.close=new gt,this.username="",this.errorMessage=""}onModalClick(e){e.stopPropagation()}ngOnInit(){console.log("ActiveModalComponent initialized",this.profile)}closeModal(){this.close.emit(!1)}onSubmit(){if(this.username===""){this.errorMessage="Username is required";return}let e={email:this.profile.email,username:this.username,role:this.profile.staffType,staffId:this.profile.id};this.staffService.activateStaff(e).subscribe({next:i=>{console.log("User activated:",i),this.errorMessage="",this.username="",this.close.emit(!0)},error:i=>{if(console.error("Error Activating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Activing staff failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(rr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-active-modal"]],inputs:{profile:"profile"},outputs:{close:"close"},standalone:!0,features:[Ke],decls:13,vars:2,consts:[[1,"modal",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-form",3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","placeholder","username","required","",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn-submitUser"],[1,"error-message"]],template:function(i,r){i&1&&(g(0,"div",0),se("click",function(){return r.closeModal()}),g(1,"div",1),se("click",function(s){return r.onModalClick(s)}),g(2,"div",2)(3,"h2"),C(4,"Activate User"),_()(),g(5,"form",3),se("ngSubmit",function(){return r.onSubmit()}),g(6,"div",4)(7,"label",5),C(8,"Username"),_(),g(9,"input",6),Xe("ngModelChange",function(s){return Ze(r.username,s)||(r.username=s),s}),_()(),Se(10,Pae,2,1,"div",7),g(11,"button",8),C(12,"Submit"),_()()()()),i&2&&(A(9),Ye("ngModel",r.username),A(),X("ngIf",r.errorMessage))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn,vt,Xt,ir,kt],styles:[".modal[_ngcontent-%COMP%]{display:block;position:fixed;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal-content[_ngcontent-%COMP%]{background-color:#fff;margin:15% auto;padding:20px;border-radius:6px;box-shadow:0 0 10px #0000001a;width:400px;align-items:center;font-family:Poppins,sans-serif}.modal-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin:0}.modal-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.modal-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-top:.5rem;border-radius:4px}.modal-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;text-align:center;font-size:small;margin-bottom:15px}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]{width:100%;padding:10px 20px;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;transition:background-color .5s}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.modal-form[_ngcontent-%COMP%]   .btn-submitUser[_ngcontent-%COMP%]:focus{outline:none}"]})}}return n})();function Tae(n,t){if(n&1){let e=rt();g(0,"app-active-modal",25),se("close",function(r){De(e);let o=ae();return Oe(o.closeModal(r))}),_()}if(n&2){let e=ae();X("profile",e.modalProfile)}}function Dae(n,t){if(n&1&&(g(0,"option",26),C(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),_t(" ",e.specOption," ")}}function Oae(n,t){if(n&1&&(g(0,"div",27),C(1),_()),n&2){let e=ae();A(),_t(" ",e.errorMessage," ")}}function Aae(n,t){if(n&1){let e=rt();g(0,"button",32),se("click",function(){De(e);let r=ae().$implicit,o=ae();return Oe(o.openModal(r))}),C(1,"Activate"),_()}}function Iae(n,t){if(n&1){let e=rt();g(0,"button",33),se("click",function(){De(e);let r=ae().$implicit,o=ae();return Oe(o.deactivateStaff(r.id))}),C(1,"Deactivate"),_()}}function Rae(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td"),C(4),_(),g(5,"td")(6,"button",28),C(7,"Edit"),_(),Se(8,Aae,2,0,"button",29)(9,Iae,2,0,"button",30),g(10,"button",31),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.viewStaffDetails(r))}),C(11,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.fullName),A(2),Je(e.email),A(2),Mu("routerLink","/update-staff/",e.id,""),A(2),X("ngIf",!e.isActive),A(),X("ngIf",e.isActive)}}function kae(n,t){if(n&1){let e=rt();g(0,"div",34)(1,"div",35)(2,"h3"),C(3,"Staff Details"),_(),g(4,"button",36),se("click",function(){De(e);let r=ae();return Oe(r.clearSelectedStaff())}),me(5,"img",37),_(),g(6,"table",38)(7,"tbody")(8,"tr")(9,"th"),C(10,"License Number"),_(),g(11,"td"),C(12),_()(),g(13,"tr")(14,"th"),C(15,"First Name"),_(),g(16,"td"),C(17),_()(),g(18,"tr")(19,"th"),C(20,"Last Name"),_(),g(21,"td"),C(22),_()(),g(23,"tr")(24,"th"),C(25,"Full Name"),_(),g(26,"td"),C(27),_()(),g(28,"tr")(29,"th"),C(30,"Phone Number"),_(),g(31,"td"),C(32),_()(),g(33,"tr")(34,"th"),C(35,"Email"),_(),g(36,"td"),C(37),_()(),g(38,"tr")(39,"th"),C(40,"Specialization"),_(),g(41,"td"),C(42),_()(),g(43,"tr")(44,"th"),C(45,"Staff Type"),_(),g(46,"td"),C(47),_()(),g(48,"tr")(49,"th"),C(50,"Is Active"),_(),g(51,"td"),C(52),_()()()(),g(53,"button",39),C(54,"View Availability"),_()()()}if(n&2){let e=ae();A(12),Je(e.selectedStaff.licenseNumber),A(5),Je(e.selectedStaff.firstName),A(5),Je(e.selectedStaff.lastName),A(5),Je(e.selectedStaff.fullName),A(5),Je(e.selectedStaff.phoneNumber),A(5),Je(e.selectedStaff.email),A(5),Je(e.selectedStaff.specializationName),A(5),Je(e.selectedStaff.staffType),A(5),Je(e.selectedStaff.isActive?"Yes":"No"),A(),Mu("routerLink","/view-availability/",e.selectedStaff.id,"")}}var FV=(()=>{class n{constructor(e,i){this.fb=e,this.staffService=i,this.isModalOpen=!1,this.staffProfiles=[],this.errorMessage="",this.specializations=[],this.selectedStaff=null,this.showAvailabilityModal=!1,this.availabilitySlots=[],this.username="",this.modalProfile=null,this.searchForm=this.fb.group({firstName:new Bn("",[qt.required]),lastName:new Bn("",[qt.required]),fullName:new Bn("",[qt.required]),email:new Bn("",[qt.required,qt.email]),specializationName:new Bn("",[qt.required])})}ngOnInit(){this.loadStaffProfiles(),this.loadSpecializations()}loadSpecializations(){this.staffService.getSpecialization().subscribe({next:e=>{console.log(`Data specialization:
`,e),this.specializations=e},error:e=>{console.error("Error loading specializations",e),e.status===401?alert("Unauthorized page access"):alert("Error loading specializations")}})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}clearFilters(){this.searchForm.reset({firstName:"",lastName:"",fullName:"",email:"",specializationName:""}),this.loadStaffProfiles(),this.errorMessage=""}onSearch(){let e={firstName:this.searchForm.value.firstName?.trim()||"",lastName:this.searchForm.value.lastName?.trim()||"",fullName:this.searchForm.value.fullName?.trim()||"",email:this.searchForm.value.email?.trim()||"",specializationName:this.searchForm.value.specializationName?.trim()||""};if(Object.values(e).every(i=>!i)){this.errorMessage="At least one search parameter is required.";return}if(e.email!==""&&this.searchForm.get("email")?.invalid){this.errorMessage="Invalid email address";return}console.log("Search criteria",e),this.staffService.searchStaffProfiles(e).subscribe({next:i=>{this.errorMessage="",Array.isArray(i)?this.staffProfiles=i:this.staffProfiles=[]},error:i=>{if(console.error("Error search staff",i),this.staffProfiles=[],i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Search Staff - "+i.error)}})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}viewStaffDetails(e){e.specializationName=this.getSpecializationName(e.specializationId),this.selectedStaff=e}clearSelectedStaff(){this.selectedStaff=null}deactivateStaff(e){this.staffService.deactivateStaff(e).subscribe({next:()=>{console.log("Staff Deactivated Successfully"),this.errorMessage="",this.clearFilters()},error:i=>{if(console.error("Error deactivating staff",i),i.status===400){let r=i.error.message;this.errorMessage=r}else i.status===401?alert("Unauthorized page access"):alert("Deactive staff failed - "+i.error)}})}openModal(e){this.modalProfile=e,this.isModalOpen=!0}closeModal(e){e&&this.clearFilters(),this.modalProfile=null,this.isModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)($(Sa),$(rr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-search-staffs"]],inputs:{profile:"profile"},standalone:!0,features:[Ke],decls:45,vars:6,consts:[[1,"manage-container"],[3,"profile","close",4,"ngIf"],[1,"screens-container"],[1,"screen"],["type","button","routerLink","/panel-admin",1,"btn-back"],[1,"manage-title"],[1,"content-container"],[1,"filter-container"],[1,"filter-form",3,"ngSubmit","formGroup"],["type","text","name","firstName","placeholder","First Name","formControlName","firstName"],["type","text","name","lastName","placeholder","Last Name","formControlName","lastName"],["type","text","name","fullName","placeholder","Full Name","formControlName","fullName"],["type","email","name","email","placeholder","Email","formControlName","email"],["name","specialization","formControlName","specializationName","title","Specialization"],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-filter"],["type","reset",1,"btn","btn-clear",3,"click"],[1,"operation"],["type","button","routerLink","/create-staff",1,"btn","btn-create"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[3,"close","profile"],[3,"value"],[1,"error-message"],["type","button",1,"btn","btn-update",3,"routerLink"],["type","button","class","btn btn-activate",3,"click",4,"ngIf"],["type","button","class","btn btn-deactive",3,"click",4,"ngIf"],["type","button",1,"btn","btn-view",3,"click"],["type","button",1,"btn","btn-activate",3,"click"],["type","button",1,"btn","btn-deactive",3,"click"],[1,"details-screen"],[1,"staff-details"],["type","button",3,"click"],["src","fechar.png","alt","Close"],[1,"table","table-bordered"],["type","button",1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",0),Se(1,Tae,1,1,"app-active-modal",1),me(2,"app-sidebar"),g(3,"div",2)(4,"div",3)(5,"button",4),C(6," Back to DashBoard "),_(),g(7,"h2",5),C(8,"Search Staff Profiles"),_(),g(9,"div",6)(10,"div",7)(11,"form",8),se("ngSubmit",function(){return r.onSearch()}),g(12,"p"),C(13," Filter Fields"),_(),me(14,"input",9)(15,"input",10)(16,"input",11)(17,"input",12),g(18,"select",13)(19,"option",14),C(20,"Select Specialization"),_(),Se(21,Dae,2,2,"option",15),_(),Se(22,Oae,2,1,"div",16),g(23,"button",17),C(24,"Search"),_(),g(25,"button",18),se("click",function(){return r.clearFilters()}),C(26," Clear Filters "),_()(),g(27,"div",19)(28,"p"),C(29," Others operations"),_(),g(30,"button",20),C(31," Create Staff "),_()()(),g(32,"div",21)(33,"table",22)(34,"thead")(35,"tr")(36,"th"),C(37,"Full Name"),_(),g(38,"th"),C(39,"Email"),_(),g(40,"th"),C(41,"Actions"),_()()(),g(42,"tbody"),Se(43,Rae,12,6,"tr",23),_()()()()(),Se(44,kae,55,11,"div",24),_()()),i&2&&(A(),X("ngIf",r.isModalOpen),A(10),X("formGroup",r.searchForm),A(10),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage),A(21),X("ngForOf",r.staffProfiles),A(),X("ngIf",r.selectedStaff))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,vt,gn,Xt,Lt,NV,ir,Er,kr,kt,zt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:40px;margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:10px;width:100%;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:250px;overflow:auto;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #ddd;border-radius:8px;padding:10px;background-color:#fff;box-shadow:0 0 10px #0000001a;gap:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{margin-top:10px;text-align:center;font-size:small}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;text-align:center;font-weight:700;margin:0;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-container[_ngcontent-%COMP%]   .operation[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{margin-right:5px;background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]{margin-right:5px;background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-deactive[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{margin-top:1rem;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]{margin-right:5px;background-color:#28a745;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-activate[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;word-wrap:break-word;vertical-align:middle;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 5px;word-wrap:break-word;vertical-align:middle}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:15px;background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:small}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:15px;right:10px;background:none;border:none;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]{position:relative;background-color:#6c757d;color:#fff;display:flex;justify-content:center;align-items:center;margin:0 auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .staff-details[_ngcontent-%COMP%]   button.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();var _x=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Patient")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Ct))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var LV=(()=>{class n{constructor(e,i){this.panelService=e,this.settingsService=i}ngOnInit(){this.panelService.setPanelId("panel-admin")}static{this.\u0275fac=function(i){return new(i||n)($(Rn),$(Ta))}}static{this.\u0275cmp=We({type:n,selectors:[["app-panel-admin"]],standalone:!0,features:[Ke],decls:22,vars:0,consts:[[1,"dashboard-container"],[1,"top-left-corner"],["routerLink","/hospital3d","routerLinkActive","active",1,"open-3d-button"],[1,"dashboard-content"],[1,"header"],[1,"stats"],["routerLink","/operation-types","routerLinkActive","active",1,"box","box1"],["routerLink","/manage-patients","routerLinkActive","active",1,"box","box2"],["routerLink","/search-staffs","routerLinkActive","active",1,"box","box3"],["routerLink","/manage-operation-rooms","routerLinkActive","active",1,"box","box4"],["routerLink","/specializations","routerLinkActive","active",1,"box","box5"],["routerLink","/manage-allergies-and-conditions","routerLinkActive","active",1,"box","box6"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"button",2),C(4," Open 3D Visualization "),_()(),g(5,"div",3)(6,"div",4)(7,"h1"),C(8,"Admin Panel"),_()(),g(9,"div",5)(10,"button",6),C(11," Manage Operation Types "),_(),g(12,"button",7),C(13," Manage Patients "),_(),g(14,"button",8),C(15," Manage Staffs "),_(),g(16,"button",9),C(17," Manage Operation Rooms "),_(),g(18,"button",10),C(19," Manage Specializations "),_(),g(20,"button",11),C(21," Manage Allergies and Conditions "),_()()()())},dependencies:[Lt,kt,zt,_s],styles:['@charset "UTF-8";.dashboard-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif;position:relative}.dashboard-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:250px;height:100vh;background-color:#1e223a;z-index:10;box-shadow:2px 0 8px #0003}.top-left-corner[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:0}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:20px;padding:10px;border-bottom:1px solid #4a4a4a;color:#fff}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;color:#fff;margin:0}.open-3d-button[_ngcontent-%COMP%]{background-color:#1e223a;color:#fff;border:3px solid #4a4a4a;padding:10px 20px;font-size:1em;font-weight:700;border-radius:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,border-color .3s ease;box-shadow:0 4px 8px #0000001a;margin-bottom:20px}.open-3d-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#92a8d1;transform:scale(1.05)}.open-3d-button[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(1)}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box4" "box5 box6";grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.4em;font-weight:700;box-shadow:0 4px 8px #0000001a;width:100%;height:100%;border:3px solid #4a4a4a;background-color:#1e223a;transition:border-color .3s ease,transform .2s ease}.box[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#88b04b}.box4[_ngcontent-%COMP%]{grid-area:box4}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}.box5[_ngcontent-%COMP%]{grid-area:box5}.box5[_ngcontent-%COMP%]:hover{border-color:#b8b528}.box6[_ngcontent-%COMP%]{grid-area:box6}.box6[_ngcontent-%COMP%]:hover{border-color:#92a8d1}a[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;text-decoration:none;color:#fff}@media (max-width: 768px){.stats[_ngcontent-%COMP%]{grid-template-columns:1fr;grid-template-rows:repeat(6,1fr)}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}.open-3d-button[_ngcontent-%COMP%]{font-size:.9em;padding:8px 15px}}']})}}return n})();function Nae(n,t){if(n&1&&(g(0,"option",19),C(1),_()),n&2){let e=t.$implicit;X("value",e.specOption),A(),_t(" ",e.specOption," ")}}function Fae(n,t){if(n&1&&(g(0,"div",20),C(1),_()),n&2){let e=ae();A(),_t(" ",e.errorMessage," ")}}var UV=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.errorMessage="",this.specializations=[],this.staffName="",this.updateStaffForm=this.fb.group({identifier:new Bn("",[qt.required]),phoneNumber:new Bn("",[qt.required]),email:new Bn("",[qt.required,qt.email]),addAvailabilitySlots:[""],removeAvailabilitySlots:[""],specializationName:new Bn("",[qt.required])}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadSpecializations().then(()=>{this.loadStaffDetails()})}loadSpecializations(){return new Promise((e,i)=>{this.staffService.getSpecialization().subscribe({next:r=>{console.log(`Data specialization:
`,r),this.specializations=r,e()},error:r=>{console.error("Error loading specializations",r),r.status===401?alert("Unauthorized page access"):alert("Error loading specializations"),i(r)}})})}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.initFromUpdate(e),this.staffName=e.fullName,console.log(`Staff details:
`,e)},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}initFromUpdate(e){let i=e.phoneNumber,r=i.substring(0,4),o=i.substring(4);this.updateStaffForm.patchValue({identifier:r,phoneNumber:o,email:e.email,addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.getSpecializationName(e.specializationId.trim())})}getSpecializationName(e){let i=this.specializations.find(r=>r.id.value===e);return i?i.specOption:"Unknown"}onSubmit(){if(this.updateStaffForm.invalid){this.errorMessage="",this.updateStaffForm.markAllAsTouched();return}let e={phoneNumber:(this.updateStaffForm.value.identifier?.trim()||"")+(this.updateStaffForm.value.phoneNumber?.trim()||""),email:this.updateStaffForm.value.email?.trim()||"",addAvailabilitySlots:"",removeAvailabilitySlots:"",specializationName:this.updateStaffForm.value.specializationName?.trim()||""};console.log(`Update data:
`,e),this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.router.navigate(["/search-staffs"])},error:i=>{if(console.error("Error Updating staff",i),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(rr),$(Sa),$(Ct),$(nr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-staff"]],standalone:!0,features:[Ke],decls:30,vars:4,consts:[[1,"update-staff-container"],[1,"update-staff-middle"],[1,"top"],["type","button","routerLink","/search-staffs",1,"btn-back"],[3,"ngSubmit","formGroup"],["for","phoneNumber"],[1,"form-row"],[1,"form-group","identifier-group"],["type","text","id","identifier","formControlName","identifier","placeholder","+351","value","+351","required","",1,"identifier"],[1,"form-group","phone-group"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Phone Number","required",""],["for","email"],["type","email","id","email","formControlName","email","placeholder","example@email.com","required",""],["for","specializationName"],["id","specializationName","formControlName","specializationName","title","Specialization","required",""],["value","","hidden",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],[3,"value"],[1,"error-message"]],template:function(i,r){i&1&&(me(0,"app-sidebar"),g(1,"div",0)(2,"div",1)(3,"div",2)(4,"button",3),C(5," Go Back"),_(),g(6,"h2"),C(7,"Edit Staff "),_(),g(8,"h3"),C(9),_()(),g(10,"form",4),se("ngSubmit",function(){return r.onSubmit()}),g(11,"label",5),C(12,"Phone Number"),_(),g(13,"div",6)(14,"div",7),me(15,"input",8),_(),g(16,"div",9),me(17,"input",10),_()(),g(18,"label",11),C(19,"Email"),_(),me(20,"input",12),g(21,"label",13),C(22,"Specialization"),_(),g(23,"select",14)(24,"option",15),C(25,"Select Specialization"),_(),Se(26,Nae,2,2,"option",16),_(),Se(27,Fae,2,1,"div",17),g(28,"button",18),C(29,"Update"),_()()()()),i&2&&(A(9),Je(r.staffName),A(),X("formGroup",r.updateStaffForm),A(16),X("ngForOf",r.specializations),A(),X("ngIf",r.errorMessage))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,tn,vt,gn,Xt,Lt,ir,Er,kr,kt,zt],styles:[".update-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.update-staff-container[_ngcontent-%COMP%]   .update-staff-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:900px;max-width:900px;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.update-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:10px;font-weight:700}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;margin-top:.5rem;border:1px solid #ccc;border-radius:4px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:2px solid red}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .ng-touched.ng-valid[_ngcontent-%COMP%]{border:1px solid green}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;border-radius:50px;background-color:#153e4c;font-weight:700;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .5s}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:last-child{margin-right:0}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .identifier-group[_ngcontent-%COMP%]{flex:0 0 100px;margin-right:10px}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .phone-group[_ngcontent-%COMP%]{flex:1}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.update-staff-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}"]})}}return n})();var VV=(()=>{class n{constructor(e,i,r,o){this.router=e,this.panelService=i,this.settingsService=r,this.profileService=o}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile")}static{this.\u0275fac=function(i){return new(i||n)($(Ct),$(Rn),$(Ta),$(bc))}}static{this.\u0275cmp=We({type:n,selectors:[["app-patient-panel"]],standalone:!0,features:[Ke],decls:14,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"top-right-corner"],["routerLink","/hospital3d","routerLinkActive","active",1,"open-3d-button"],[1,"header"],[1,"stats"],[1,"box","box1"],[1,"box","box2"],[1,"box","box3"],[1,"box","box4"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Open 3D Visualization "),_()(),g(6,"div",4)(7,"h1"),C(8,"Patient Panel"),_()(),g(9,"div",5),me(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9),_()()())},dependencies:[Lt,kt,zt,_s],styles:[".panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif;position:relative}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:250px;height:100vh;background-color:#1e223a;z-index:10;box-shadow:2px 0 8px #0003}.top-right-corner[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:5}.header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin:20px 0;padding:10px;border-bottom:1px solid #4a4a4a;color:#fff}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;color:#fff;margin:0}.open-3d-button[_ngcontent-%COMP%]{background-color:#1e223a;color:#fff;border:3px solid #4a4a4a;padding:10px 20px;font-size:1em;font-weight:700;border-radius:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,border-color .3s ease;box-shadow:0 4px 8px #0000001a;margin-bottom:20px}.open-3d-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#92a8d1;transform:scale(1.05)}.open-3d-button[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(1)}.stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;flex:1;margin:20px 0;width:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.2em;font-weight:700;box-shadow:0 4px 8px #0000001a;padding:15px;border:3px solid #4a4a4a;background-color:#1e223a;transition:border-color .3s ease,transform .2s ease;flex:1 1 calc(50% - 20px);max-width:calc(50% - 20px)}.box[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]:hover{border-color:#e70a0a}.box4[_ngcontent-%COMP%]:hover{border-color:#f7cac9}@media (max-width: 768px){.panel-content[_ngcontent-%COMP%]{margin-left:0;padding:10px}.header[_ngcontent-%COMP%]{text-align:center;font-size:1.5em}.stats[_ngcontent-%COMP%]{flex-direction:column}.open-3d-button[_ngcontent-%COMP%]{font-size:.9em;padding:8px 15px}.box[_ngcontent-%COMP%]{flex:1 1 100%;max-width:100%}}"]})}}return n})();var Ps=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}deletePatient(e){return this.http.delete(`${this.apiUrl}/Patient/${e}`,{observe:"response"}).pipe(nn(i=>(console.error("Error deleting patient:",i),En(i))))}getPatientsWithAdvancedFilter(e,i,r,o,s,a,l,u){let f=new URLSearchParams({firstName:e||"",lastName:i||"",fullName:r||"",dateOfBirth:o||"",medicalRecordNumber:s||"",gender:a||"",email:l||"",phoneNumber:u||""});return this.http.get(`${this.apiUrl}/Patient?${f.toString()}`)}getMyProfile(e){return this.http.get(`${this.apiUrl}/Patient/myProfile/${e}`)}createPatient(e){return this.http.post(`${this.apiUrl}/Patient`,e).pipe(nn(i=>(console.error("Error creating patient:",i),En(i))))}updatePatient(e,i){return this.http.put(`${this.apiUrl}/Patient/${e}`,i,{responseType:"json"}).pipe(nn(r=>(console.error("Error updating patient:",r),En(r))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/allergies"}getAllergies(){return console.log("getAllergies called"),this.http.get(`${this.apiUrl}`).pipe(nn(e=>(console.error("Error fetching allergies:",e),Rt([]))))}createAllergy(e){return this.http.post(`${this.apiUrl}/create`,{allergyCode:e.allergyCode,allergyName:e.allergyName,allergyDescription:e.allergyDescription,allergySymptoms:e.allergySymptoms}).pipe(nn(i=>(console.error("Error creating allergy:",i),En(()=>new Error("Failed to create Allergy. Please try again later.")))))}updateAllergy(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{allergyCode:i.allergyCode,allergyName:i.allergyName,allergyDescription:i.allergyDescription,allergySymptoms:i.allergySymptoms}).pipe(nn(r=>(console.error("Error updating allergy:",r),En(()=>new Error("Failed to update allergy. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qr=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/medicalConditions"}getMedicalConditions(){return this.http.get(`${this.apiUrl}/`)}createMedicalConditions(e){return this.http.post(`${this.apiUrl}/create`,{medicalConditionCode:e.medicalConditionCode,medicalConditionName:e.medicalConditionName,medicalConditionDescription:e.medicalConditionDescription,medicalConditionSymptoms:e.medicalConditionSymptoms}).pipe(nn(i=>(console.error("Error creating medical condition:",i),En(()=>new Error("Failed to create medical condition. Please try again later.")))))}updateCondition(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{medicalConditionCode:i.medicalConditionCode,medicalConditionName:i.medicalConditionName,medicalConditionDescription:i.medicalConditionDescription,medicalConditionSymptoms:i.medicalConditionSymptoms}).pipe(nn(r=>(console.error("Error updating medical condition:",r),En(()=>new Error("Failed to update medical condition. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var La=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/patientsMedicalHistory"}getPatientMedicalHistory(e){return this.http.get(`${this.apiUrl}/get/${e}`).pipe(yi(i=>console.log("Medical history response:",i)),nn(i=>(i.status===404&&console.error("Medical history not found:",i),En(()=>i))))}updatePatientMedicalHistory(e,i,r,o,s){let a=`${this.apiUrl}/update/${e}`,l={medicalConditions:r,allergies:i,familyHistory:o,freeText:s};return this.http.put(a,l).pipe(yi(u=>console.log("Update response:",u)),nn(u=>(console.error("Error updating medical history:",u),En(()=>u))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Lae=n=>["/update-patient",n];function Uae(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td"),C(4),_(),g(5,"td")(6,"a",24),C(7,"Edit"),_(),g(8,"a",25),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.deletePatient(r.medicalRecordNumber,r.fullName))}),C(9,"Delete"),_(),g(10,"a",26),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.viewPatientDetails(r.medicalRecordNumber))}),C(11,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.medicalRecordNumber),A(2),Je(e.fullName),A(2),X("routerLink",ri(3,Lae,e.medicalRecordNumber))}}function Vae(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.allergyName," ")}}function zae(n,t){n&1&&(g(0,"li"),C(1,"No allergies"),_())}function Bae(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.medicalConditionName," ")}}function Hae(n,t){n&1&&(g(0,"li"),C(1,"No medical conditions"),_())}function jae(n,t){if(n&1){let e=rt();g(0,"div",27)(1,"div",28)(2,"h3"),C(3,"Patient Details"),_(),g(4,"button",29),se("click",function(){De(e);let r=ae();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],Oe(r.selectedMedicalHistory=void 0)}),_(),g(5,"table",30)(6,"tbody")(7,"tr")(8,"th"),C(9,"Medical Record Number"),_(),g(10,"td"),C(11),_()(),g(12,"tr")(13,"th"),C(14,"First Name"),_(),g(15,"td"),C(16),_()(),g(17,"tr")(18,"th"),C(19,"Last Name"),_(),g(20,"td"),C(21),_()(),g(22,"tr")(23,"th"),C(24,"Full Name"),_(),g(25,"td"),C(26),_()(),g(27,"tr")(28,"th"),C(29,"Date of Birth"),_(),g(30,"td"),C(31),_()(),g(32,"tr")(33,"th"),C(34,"Gender"),_(),g(35,"td"),C(36),_()(),g(37,"tr")(38,"th"),C(39,"Email"),_(),g(40,"td"),C(41),_()(),g(42,"tr")(43,"th"),C(44,"Phone Number"),_(),g(45,"td"),C(46),_()(),g(47,"tr")(48,"th"),C(49,"Emergency Contact"),_(),g(50,"td"),C(51),_()(),g(52,"tr")(53,"th"),C(54,"Allergies"),_(),g(55,"td")(56,"form",31),se("submit",function(){De(e);let r=ae();return Oe(r.searchAllergies())}),g(57,"input",32),Xe("ngModelChange",function(r){De(e);let o=ae();return Ze(o.allergySearch,r)||(o.allergySearch=r),Oe(r)}),_(),g(58,"button",33),C(59,"Search"),_()(),g(60,"ul",34),Se(61,Vae,2,1,"li",22)(62,zae,2,0,"li",35),_()()(),g(63,"tr")(64,"th"),C(65,"Medical Conditions"),_(),g(66,"td")(67,"form",31),se("submit",function(){De(e);let r=ae();return Oe(r.searchMedicalConditions())}),g(68,"input",36),Xe("ngModelChange",function(r){De(e);let o=ae();return Ze(o.medicalConditionSearch,r)||(o.medicalConditionSearch=r),Oe(r)}),_(),g(69,"button",33),C(70,"Search"),_()(),g(71,"ul",37),Se(72,Bae,2,1,"li",22)(73,Hae,2,0,"li",35),_()()(),g(74,"tr")(75,"th"),C(76,"Appointment History"),_(),g(77,"td"),C(78),_()(),g(79,"tr")(80,"th"),C(81,"Is Active"),_(),g(82,"td"),C(83),_()()()()()()}if(n&2){let e=ae();A(11),Je(e.selectedPatient.medicalRecordNumber),A(5),Je(e.selectedPatient.firstName),A(5),Je(e.selectedPatient.lastName),A(5),Je(e.selectedPatient.fullName),A(5),Je(e.selectedPatient.dateOfBirth),A(5),Je(e.selectedPatient.gender===1?"Male":"Female"),A(5),Je(e.selectedPatient.email),A(5),Je(e.selectedPatient.phoneNumber),A(5),Je(e.selectedPatient.emergencyContact),A(6),Ye("ngModel",e.allergySearch),A(4),X("ngForOf",e.filteredAllergies),A(),X("ngIf",e.filteredAllergies.length===0),A(6),Ye("ngModel",e.medicalConditionSearch),A(4),X("ngForOf",e.filteredMedicalConditions),A(),X("ngIf",e.filteredMedicalConditions.length===0),A(5),_t(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),A(5),Je(e.selectedPatient.isActive?"Yes":"No")}}var zV=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[]}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[]},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}static{this.\u0275fac=function(i){return new(i||n)($(Ps),$(Rn),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=We({type:n,selectors:[["app-manage-patients"]],standalone:!0,features:[Ke],decls:41,vars:10,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-patient",1,"btn","btn-create"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[3,"submit"],["type","text","placeholder","Search Allergies","name","allergySearch",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-search"],[1,"allergies-list"],[4,"ngIf"],["type","text","placeholder","Search Medical Conditions","name","medicalConditionSearch",3,"ngModelChange","ngModel"],[1,"conditions-list"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Create Patient "),_(),g(6,"h2",4),C(7,"Patients Manager"),_(),g(8,"div",5)(9,"form",6),se("submit",function(s){return r.applyFilters(s)}),g(10,"input",7),Xe("ngModelChange",function(s){return Ze(r.filters.firstName,s)||(r.filters.firstName=s),s}),_(),g(11,"input",8),Xe("ngModelChange",function(s){return Ze(r.filters.lastName,s)||(r.filters.lastName=s),s}),_(),g(12,"input",9),Xe("ngModelChange",function(s){return Ze(r.filters.fullName,s)||(r.filters.fullName=s),s}),_(),g(13,"input",10),Xe("ngModelChange",function(s){return Ze(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),_(),g(14,"input",11),Xe("ngModelChange",function(s){return Ze(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),_(),g(15,"select",12),Xe("ngModelChange",function(s){return Ze(r.filters.gender,s)||(r.filters.gender=s),s}),g(16,"option",13),C(17,"Select Gender"),_(),g(18,"option",14),C(19,"Male"),_(),g(20,"option",15),C(21,"Female"),_()(),g(22,"input",16),Xe("ngModelChange",function(s){return Ze(r.filters.email,s)||(r.filters.email=s),s}),_(),g(23,"input",17),Xe("ngModelChange",function(s){return Ze(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),_(),g(24,"button",18),C(25,"Apply Filters"),_(),g(26,"button",19),se("click",function(){return r.clearFilters()}),C(27," Clear Filters "),_()(),g(28,"div",20)(29,"table",21)(30,"thead")(31,"tr")(32,"th"),C(33,"Medical Record Number"),_(),g(34,"th"),C(35,"Name"),_(),g(36,"th"),C(37,"Actions"),_()()(),g(38,"tbody"),Se(39,Uae,12,5,"tr",22),_()()()()(),Se(40,jae,84,17,"div",23),_()()),i&2&&(A(10),Ye("ngModel",r.filters.firstName),A(),Ye("ngModel",r.filters.lastName),A(),Ye("ngModel",r.filters.fullName),A(),Ye("ngModel",r.filters.dateOfBirth),A(),Ye("ngModel",r.filters.medicalRecordNumber),A(),Ye("ngModel",r.filters.gender),A(7),Ye("ngModel",r.filters.email),A(),Ye("ngModel",r.filters.phoneNumber),A(16),X("ngForOf",r.patients),A(),X("ngIf",r.selectedPatient))},dependencies:[Lt,vt,gn,Xt,bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,xl,hn,Nn,kt,zt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;height:900px;background-color:#f9f9f9;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:500px;height:900px;background-color:#fff;max-width:500px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{max-width:500px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}"]})}}return n})();var BV=(()=>{class n{constructor(e,i,r){this.patientService=e,this.router=i,this.panelService=r,this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.showMedicalHistoryModal=!1}ngOnInit(){console.log("CreatePatientComponent initialized"),this.panelService.setPanelId("panel-admin")}createPatient(e){e.preventDefault(),this.patientService.createPatient(this.newPatient).subscribe(i=>{console.log("Patient created:",i),this.clearForm(),alert("Patient created successfully"),this.router.navigate(["/manage-patients"])},i=>{console.error("Error creating patient",i),alert("Error creating patient")})}clearForm(){this.newPatient={firstName:"",lastName:"",fullName:"",dateOfBirth:"",genderOptions:"",email:"",phoneNumber:"",emergencyContact:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""}}static{this.\u0275fac=function(i){return new(i||n)($(Ps),$(Ct),$(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-patient"]],standalone:!0,features:[Ke],decls:28,vars:8,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}","required","",3,"ngModelChange","ngModel"],["name","genderOptions","required","",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","0"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Go Back "),_(),g(6,"h2",4),C(7,"Create Patient"),_(),g(8,"div",5)(9,"form",6),se("submit",function(s){return r.createPatient(s)}),g(10,"input",7),Xe("ngModelChange",function(s){return Ze(r.newPatient.firstName,s)||(r.newPatient.firstName=s),s}),_(),g(11,"input",8),Xe("ngModelChange",function(s){return Ze(r.newPatient.lastName,s)||(r.newPatient.lastName=s),s}),_(),g(12,"input",9),Xe("ngModelChange",function(s){return Ze(r.newPatient.fullName,s)||(r.newPatient.fullName=s),s}),_(),g(13,"input",10),Xe("ngModelChange",function(s){return Ze(r.newPatient.dateOfBirth,s)||(r.newPatient.dateOfBirth=s),s}),_(),g(14,"select",11),Xe("ngModelChange",function(s){return Ze(r.newPatient.genderOptions,s)||(r.newPatient.genderOptions=s),s}),g(15,"option",12),C(16,"Select Gender"),_(),g(17,"option",13),C(18,"Male"),_(),g(19,"option",14),C(20,"Female"),_()(),g(21,"input",15),Xe("ngModelChange",function(s){return Ze(r.newPatient.email,s)||(r.newPatient.email=s),s}),_(),g(22,"input",16),Xe("ngModelChange",function(s){return Ze(r.newPatient.phoneNumber,s)||(r.newPatient.phoneNumber=s),s}),_(),g(23,"input",17),Xe("ngModelChange",function(s){return Ze(r.newPatient.emergencyContact,s)||(r.newPatient.emergencyContact=s),s}),_(),g(24,"button",18),C(25,"Create Patient"),_(),g(26,"button",19),se("click",function(){return r.clearForm()}),C(27," Clear Form "),_()()()()()()),i&2&&(A(10),Ye("ngModel",r.newPatient.firstName),A(),Ye("ngModel",r.newPatient.lastName),A(),Ye("ngModel",r.newPatient.fullName),A(),Ye("ngModel",r.newPatient.dateOfBirth),A(),Ye("ngModel",r.newPatient.genderOptions),A(7),Ye("ngModel",r.newPatient.email),A(),Ye("ngModel",r.newPatient.phoneNumber),A(),Ye("ngModel",r.newPatient.emergencyContact))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,tn,xl,hn,Nn,Lt,kt,zt,_s,vt],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var HV=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api/user"}activateAccount(e){return localStorage.removeItem("authToken"),this.http.post(`${this.apiUrl}/ActivatePatientUser?token=${e}`,{},{observe:"response"}).pipe(nn(i=>(console.error("Error activating account:",i),En(i))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jV=(()=>{class n{constructor(e,i){this.activateUserService=e,this.router=i}ngOnInit(){}onActivate(){let i=new URLSearchParams(window.location.search).get("token");console.log("Token:",i),i?this.activateUserService.activateAccount(i).subscribe(r=>{console.log("Request Finished With Success",r),this.router.navigate(["/"]),alert("Your account has been successfully activated.")},r=>{console.error("Account activation failed",r),alert("Account activation failed - "+r.error)}):(console.error("Token is null"),alert("Invalid token. Account activation failed."))}onCancel(){console.log("Cancel action triggered"),this.router.navigate(["/"]),alert("Account activation cancelled.")}static{this.\u0275fac=function(i){return new(i||n)($(HV),$(Ct))}}static{this.\u0275cmp=We({type:n,selectors:[["app-activate-patient-user"]],standalone:!0,features:[Ke],decls:8,vars:0,consts:[[1,"activate-user-container"],[1,"activate-user-box"],[1,"activate-button",3,"click"],[1,"cancel-button",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"p"),C(3,"Are you sure you want to activate your account?"),_(),g(4,"button",2),se("click",function(){return r.onActivate()}),C(5,"Activate"),_(),g(6,"button",3),se("click",function(){return r.onCancel()}),C(7,"Cancel"),_()()())},styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.activate-user-box[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #dee2e6;border-radius:10px;box-shadow:0 4px 12px #0000001a;text-align:center;max-width:400px;width:100%}.activate-user-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#333;margin-bottom:20px}.activate-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;margin-top:10px;margin-right:10px;font-size:14px}.activate-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-button[_ngcontent-%COMP%]:hover{background-color:#218838}.cancel-button[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.cancel-button[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return n})();function Gae(n,t){if(n&1&&(g(0,"div")(1,"p")(2,"strong"),C(3,"New Phone Number:"),_(),C(4),_()()),n&2){let e=ae(2);A(4),_t(" ",e.phoneNumber,"")}}function $ae(n,t){if(n&1&&(g(0,"div")(1,"p")(2,"strong"),C(3,"New Email:"),_(),C(4),_()()),n&2){let e=ae(2);A(4),_t(" ",e.email,"")}}function qae(n,t){if(n&1&&(g(0,"div",7),Se(1,Gae,5,1,"div",8)(2,$ae,5,1,"div",8),_()),n&2){let e=ae();A(),X("ngIf",e.phoneNumber),A(),X("ngIf",e.email)}}function Yae(n,t){if(n&1&&(g(0,"div",9),C(1),_()),n&2){let e=ae();A(),_t(" ",e.errorMessage," ")}}function Xae(n,t){if(n&1){let e=rt();g(0,"button",10),se("click",function(){De(e);let r=ae();return Oe(r.updateContactInfo())}),C(1,"Confirm"),_()}}function Zae(n,t){if(n&1){let e=rt();g(0,"div",11),me(1,"img",12),g(2,"p"),C(3,"Updates confirmed successfully!"),_(),g(4,"button",13),se("click",function(){De(e);let r=ae();return Oe(r.goToHome())}),C(5,"Go to Home"),_()()}}var WV=(()=>{class n{constructor(e,i,r){this.route=e,this.router=i,this.staffService=r,this.errorMessage="",this.token="",this.phoneNumber="",this.email="",this.updateSuccessful=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.phoneNumber=e.phoneNumber||"",this.email=e.email||"",this.token=e.token||""})}updateContactInfo(){let e={token:this.token,phoneNumber:this.phoneNumber,email:this.email};this.staffService.confirmUpdates(e).subscribe({next:i=>{console.log("Updates confirmed",i),this.updateSuccessful=!0},error:i=>{this.updateSuccessful=!1,console.error("Error confirming updates",i),this.errorMessage="Failed to confirm updates"}})}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)($(nr),$(Ct),$(rr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-confirm-updates-staff"]],standalone:!0,features:[Ke],decls:9,vars:4,consts:[[1,"confirm-updates-container"],[1,"confirm-updates-middle"],[1,"top"],["class","info-container",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit","class","btn btn-filter",3,"click",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container"],[4,"ngIf"],[1,"error-message"],["type","submit",1,"btn","btn-filter",3,"click"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),C(4,"Confirm Contact Information"),_()(),Se(5,qae,3,2,"div",3)(6,Yae,2,1,"div",4)(7,Xae,2,0,"button",5)(8,Zae,6,0,"div",6),_()()),i&2&&(A(5),X("ngIf",!r.updateSuccessful),A(),X("ngIf",r.errorMessage),A(),X("ngIf",!r.updateSuccessful),A(),X("ngIf",r.updateSuccessful))},dependencies:[vt,Xt],styles:[".confirm-updates-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.confirm-updates-container[_ngcontent-%COMP%]   .confirm-updates-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.confirm-updates-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.confirm-updates-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.confirm-updates-container[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:small}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.confirm-updates-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.confirm-updates-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-filter[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.confirm-updates-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var GV=(()=>{class n{constructor(e,i,r,o,s,a){this.patientService=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.medicalHistoryService=a,this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.getPatient()}getPatient(){let e=this.extractMedicalRecordNumberFromUrl();this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.existingPatient=i[0],console.log("Patient fetched:",i)},i=>{console.error("Error fetching patient",i)})}updatePatientDetails(e){e.preventDefault();let i=this.extractMedicalRecordNumberFromUrl();this.patientService.updatePatient(i,this.existingPatient).subscribe(r=>{console.log("Patient updated successfully:",r),alert("Patient updated successfully!"),this.router.navigate(["/manage-patients"])},r=>{console.error("Error updating patient:",r),alert("Error updating patient"+r)})}extractMedicalRecordNumberFromUrl(){let e=window.location.href,i=/\/update-patient\/(\d+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Medical record number not found in URL.")}clearForm(){this.existingPatient={firstName:"",lastName:"",fullName:"",email:"",phoneNumber:"",emergencyContact:""}}static{this.\u0275fac=function(i){return new(i||n)($(Ps),$(Ct),$(Rn),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-patient"]],standalone:!0,features:[Ke],decls:20,vars:6,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/manage-patients","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["type","text","placeholder","First Name","name","firstName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName","required","",3,"ngModelChange","ngModel"],["type","email","placeholder","Email","name","email","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Emergency Contact","name","emergencyContact","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Go Back "),_(),g(6,"h2",4),C(7,"Update Patient"),_(),g(8,"div",5)(9,"form",6),se("submit",function(s){return r.updatePatientDetails(s)}),g(10,"input",7),Xe("ngModelChange",function(s){return Ze(r.existingPatient.firstName,s)||(r.existingPatient.firstName=s),s}),_(),g(11,"input",8),Xe("ngModelChange",function(s){return Ze(r.existingPatient.lastName,s)||(r.existingPatient.lastName=s),s}),_(),g(12,"input",9),Xe("ngModelChange",function(s){return Ze(r.existingPatient.fullName,s)||(r.existingPatient.fullName=s),s}),_(),g(13,"input",10),Xe("ngModelChange",function(s){return Ze(r.existingPatient.email,s)||(r.existingPatient.email=s),s}),_(),g(14,"input",11),Xe("ngModelChange",function(s){return Ze(r.existingPatient.phoneNumber,s)||(r.existingPatient.phoneNumber=s),s}),_(),g(15,"input",12),Xe("ngModelChange",function(s){return Ze(r.existingPatient.emergencyContact,s)||(r.existingPatient.emergencyContact=s),s}),_(),g(16,"button",13),C(17,"Update Patient"),_(),g(18,"button",14),se("click",function(){return r.clearForm()}),C(19," Clear Form "),_()()()()()()),i&2&&(A(10),Ye("ngModel",r.existingPatient.firstName),A(),Ye("ngModel",r.existingPatient.lastName),A(),Ye("ngModel",r.existingPatient.fullName),A(),Ye("ngModel",r.existingPatient.email),A(),Ye("ngModel",r.existingPatient.phoneNumber),A(),Ye("ngModel",r.existingPatient.emergencyContact))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn,Lt,kt,zt,vt],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:90vh;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Kae=function(){function n(){}return n.prototype.getAllStyles=function(t){return window.getComputedStyle(t)},n.prototype.getStyle=function(t,e){return this.getAllStyles(t)[e]},n.prototype.isStaticPositioned=function(t){return(this.getStyle(t,"position")||"static")==="static"},n.prototype.offsetParent=function(t){for(var e=t.offsetParent||document.documentElement;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement},n.prototype.position=function(t,e){e===void 0&&(e=!0);var i,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if(this.getStyle(t,"position")==="fixed")i=t.getBoundingClientRect(),i={top:i.top,bottom:i.bottom,left:i.left,right:i.right,height:i.height,width:i.width};else{var o=this.offsetParent(t);i=this.offset(t,!1),o!==document.documentElement&&(r=this.offset(o,!1)),r.top+=o.clientTop,r.left+=o.clientLeft}return i.top-=r.top,i.bottom-=r.top,i.left-=r.left,i.right-=r.left,e&&(i.top=Math.round(i.top),i.bottom=Math.round(i.bottom),i.left=Math.round(i.left),i.right=Math.round(i.right)),i},n.prototype.offset=function(t,e){e===void 0&&(e=!0);var i=t.getBoundingClientRect(),r={top:window.pageYOffset-document.documentElement.clientTop,left:window.pageXOffset-document.documentElement.clientLeft},o={height:i.height||t.offsetHeight,width:i.width||t.offsetWidth,top:i.top+r.top,bottom:i.bottom+r.top,left:i.left+r.left,right:i.right+r.left};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o},n.prototype.positionElements=function(t,e,i,r){var o=i.split("-"),s=o[0],a=s===void 0?"top":s,l=o[1],u=l===void 0?"center":l,f=r?this.offset(t,!1):this.position(t,!1),h=this.getAllStyles(e),m=parseFloat(h.marginTop),p=parseFloat(h.marginBottom),y=parseFloat(h.marginLeft),M=parseFloat(h.marginRight),x=0,b=0;switch(a){case"top":x=f.top-(e.offsetHeight+m+p);break;case"bottom":x=f.top+f.height;break;case"left":b=f.left-(e.offsetWidth+y+M);break;case"right":b=f.left+f.width;break}switch(u){case"top":x=f.top;break;case"bottom":x=f.top+f.height-e.offsetHeight;break;case"left":b=f.left;break;case"right":b=f.left+f.width-e.offsetWidth;break;case"center":a==="top"||a==="bottom"?b=f.left+f.width/2-e.offsetWidth/2:x=f.top+f.height/2-e.offsetHeight/2;break}e.style.transform="translate("+Math.round(b)+"px, "+Math.round(x)+"px)";var T=e.getBoundingClientRect(),E=document.documentElement,D=window.innerHeight||E.clientHeight,L=window.innerWidth||E.clientWidth;return T.left>=0&&T.top>=0&&T.right<=L&&T.bottom<=D},n}();var Jae=/\s+/,$V=new Kae;function JT(n,t,e,i,r){var o=Array.isArray(e)?e:e.split(Jae),s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t.classList,l=function(x){var b=x.split("-"),T=b[0],E=b[1],D=[];return r&&(D.push(r+"-"+T),E&&D.push(r+"-"+T+"-"+E),D.forEach(function(L){a.add(L)})),D};r&&s.forEach(function(x){a.remove(r+"-"+x)});var u=o.findIndex(function(x){return x==="auto"});u>=0&&s.forEach(function(x){o.find(function(b){return b.search("^"+x)!==-1})==null&&o.splice(u++,1,x)});var f=t.style;f.position="absolute",f.top="0",f.left="0",f["will-change"]="transform";for(var h,m=!1,p=0,y=o;p<y.length;p++){h=y[p];var M=l(h);if($V.positionElements(n,t,h,i)){m=!0;break}r&&M.forEach(function(x){a.remove(x)})}return m||(h=o[0],l(h),$V.positionElements(n,t,h,i)),h}var aa=function(){return aa=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aa.apply(this,arguments)},QT=function(n,t,e){if(e||arguments.length===2)for(var i=0,r=t.length,o;i<r;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return n.concat(o||Array.prototype.slice.call(t))},xx=function(n){return n[n.SUNDAY=0]="SUNDAY",n[n.MONDAY=1]="MONDAY",n[n.TUESDAY=2]="TUESDAY",n[n.WEDNESDAY=3]="WEDNESDAY",n[n.THURSDAY=4]="THURSDAY",n[n.FRIDAY=5]="FRIDAY",n[n.SATURDAY=6]="SATURDAY",n}(xx||{}),Qae=[xx.SUNDAY,xx.SATURDAY],eD=7,tD=24,vx=60,zc=60*60*24;function qV(n,t){var e=t.startDate,i=t.seconds,r=t.excluded,o=t.precision;if(r.length<1)return 0;for(var s=n.addSeconds,a=n.getDay,l=n.addDays,u=s(e,i-1),f=a(e),h=a(u),m=0,p=e,y=function(){var M=a(p);r.some(function(x){return x===M})&&(m+=ele(n,{dayStart:f,dayEnd:h,day:M,precision:o,startDate:e,endDate:u})),p=l(p,1)};p<u;)y();return m}function ele(n,t){var e=t.precision,i=t.day,r=t.dayStart,o=t.dayEnd,s=t.startDate,a=t.endDate,l=n.differenceInSeconds,u=n.endOfDay,f=n.startOfDay;if(e==="minutes"){if(i===r)return l(u(s),s)+1;if(i===o)return l(a,f(a))+1}return zc}function tle(n,t){var e=t.event,i=t.offset,r=t.startOfWeekDate,o=t.excluded,s=t.precision,a=t.totalDaysInView,l=n.max,u=n.differenceInSeconds,f=n.addDays,h=n.endOfDay,m=n.differenceInDays,p=zc,y=l([e.start,r]);if(e.end)switch(s){case"minutes":p=u(e.end,y);break;default:p=m(f(h(e.end),1),y)*zc;break}var M=i*zc,x=M+p,b=a*zc;return x>b&&(p=b-M),p-=qV(n,{startDate:y,seconds:p,excluded:o,precision:s}),p/zc}function nle(n,t){var e=t.event,i=t.startOfWeek,r=t.excluded,o=t.precision,s=n.differenceInDays,a=n.startOfDay,l=n.differenceInSeconds;if(e.start<i)return 0;var u=0;switch(o){case"days":u=s(a(e.start),i)*zc;break;case"minutes":u=l(e.start,i);break}return u-=qV(n,{startDate:i,seconds:u,excluded:r,precision:o}),Math.abs(u/zc)}function ile(n,t){var e=t.event,i=t.periodStart,r=t.periodEnd,o=n.isSameSecond,s=e.start,a=e.end||e.start;return!!(s>i&&s<r||a>i&&a<r||s<i&&a>r||o(s,i)||o(s,r)||o(a,i)||o(a,r))}function Wm(n,t){var e=t.events,i=t.periodStart,r=t.periodEnd;return e.filter(function(o){return ile(n,{event:o,periodStart:i,periodEnd:r})})}function YV(n,t){var e=t.date,i=t.weekendDays,r=i===void 0?Qae:i,o=n.startOfDay,s=n.isSameDay,a=n.getDay,l=o(new Date),u=a(e);return{date:e,day:u,isPast:e<l,isToday:s(e,l),isFuture:e>l,isWeekend:r.indexOf(u)>-1}}function Mx(n,t){for(var e=t.viewDate,i=t.weekStartsOn,r=t.excluded,o=r===void 0?[]:r,s=t.weekendDays,a=t.viewStart,l=a===void 0?n.startOfWeek(e,{weekStartsOn:i}):a,u=t.viewEnd,f=u===void 0?n.addDays(l,eD):u,h=n.addDays,m=n.getDay,p=[],y=l;y<f;)o.some(function(M){return m(y)===M})||p.push(YV(n,{date:y,weekendDays:s})),y=h(y,1);return p}function rle(n,t){for(var e=t.date1,i=t.date2,r=t.excluded,o=e,s=0;o<i;)r.indexOf(n.getDay(o))===-1&&s++,o=n.addDays(o,1);return s}function ole(n,t){var e=t.events,i=e===void 0?[]:e,r=t.excluded,o=r===void 0?[]:r,s=t.precision,a=s===void 0?"days":s,l=t.absolutePositionedEvents,u=l===void 0?!1:l,f=t.viewStart,h=t.viewEnd;f=n.startOfDay(f),h=n.endOfDay(h);var m=n.differenceInSeconds,p=n.differenceInDays,y=rle(n,{date1:f,date2:h,excluded:o}),M=p(h,f)+1,x=i.filter(function(E){return E.allDay}).map(function(E){var D=nle(n,{event:E,startOfWeek:f,excluded:o,precision:a}),L=tle(n,{event:E,offset:D,startOfWeekDate:f,excluded:o,precision:a,totalDaysInView:M});return{event:E,offset:D,span:L}}).filter(function(E){return E.offset<y}).filter(function(E){return E.span>0}).map(function(E){return{event:E.event,offset:E.offset,span:E.span,startsBeforeWeek:E.event.start<f,endsAfterWeek:(E.event.end||E.event.start)>h}}).sort(function(E,D){var L=m(E.event.start,D.event.start);return L===0?m(D.event.end||D.event.start,E.event.end||E.event.start):L}),b=[],T=[];return x.forEach(function(E,D){if(T.indexOf(E)===-1){T.push(E);var L=E.span+E.offset,z=x.slice(D+1).filter(function(F){if(F.offset>=L&&L+F.span<=M&&T.indexOf(F)===-1){var P=F.offset-L;return u||(F.offset=P),L+=F.span+P,T.push(F),!0}}),k=QT([E],z,!0),G=k.filter(function(F){return F.event.id}).map(function(F){return F.event.id}).join("-");b.push(aa({row:k},G?{id:G}:{}))}}),b}function sle(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.hourDuration,s=t.dayStart,a=t.dayEnd,l=t.weekStartsOn,u=t.excluded,f=t.weekendDays,h=t.segmentHeight,m=t.viewStart,p=t.viewEnd,y=t.minimumEventHeight,M=lle(n,{viewDate:i,hourSegments:r,hourDuration:o,dayStart:s,dayEnd:a}),x=Mx(n,{viewDate:i,weekStartsOn:l,excluded:u,weekendDays:f,viewStart:m,viewEnd:p}),b=n.setHours,T=n.setMinutes,E=n.getHours,D=n.getMinutes;return x.map(function(L){var z=ale(n,{events:e,viewDate:L.date,hourSegments:r,dayStart:s,dayEnd:a,segmentHeight:h,eventWidth:1,hourDuration:o,minimumEventHeight:y}),k=M.map(function(P){var N=P.segments.map(function(S){var q=T(b(L.date,E(S.date)),D(S.date));return aa(aa({},S),{date:q})});return aa(aa({},P),{segments:N})});function G(P,N){var S=Math.max.apply(Math,N.map(function(oe){return oe.left+1})),q=P.filter(function(oe){return oe.left>=S}).filter(function(oe){return yx(N,oe.top,oe.top+oe.height).length>0});return q.length>0?G(P,q):S}var F=z.events.map(function(P){var N=G(z.events,yx(z.events,P.top,P.top+P.height)),S=100/N;return aa(aa({},P),{left:P.left*S,width:S})});return{hours:k,date:L.date,events:F.map(function(P){var N=yx(F.filter(function(S){return S.left>P.left}),P.top,P.top+P.height);return N.length>0?aa(aa({},P),{width:Math.min.apply(Math,N.map(function(S){return S.left}))-P.left}):P})}})}function XV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,l=t.precision,u=l===void 0?"days":l,f=t.absolutePositionedEvents,h=f===void 0?!1:f,m=t.hourSegments,p=t.hourDuration,y=t.dayStart,M=t.dayEnd,x=t.weekendDays,b=t.segmentHeight,T=t.minimumEventHeight,E=t.viewStart,D=E===void 0?n.startOfWeek(r,{weekStartsOn:o}):E,L=t.viewEnd,z=L===void 0?n.endOfWeek(r,{weekStartsOn:o}):L;i||(i=[]);var k=n.startOfDay,G=n.endOfDay;D=k(D),z=G(z);var F=Wm(n,{events:i,periodStart:D,periodEnd:z}),P=Mx(n,{viewDate:r,weekStartsOn:o,excluded:a,weekendDays:x,viewStart:D,viewEnd:z});return{allDayEventRows:ole(n,{events:F,excluded:a,precision:u,absolutePositionedEvents:h,viewStart:D,viewEnd:z}),period:{events:F,start:P[0].date,end:G(P[P.length-1].date)},hourColumns:sle(n,{events:i,viewDate:r,hourSegments:m,hourDuration:p,dayStart:y,dayEnd:M,weekStartsOn:o,excluded:a,weekendDays:x,segmentHeight:b,viewStart:D,viewEnd:z,minimumEventHeight:T})}}function ZV(n,t){var e=t.events,i=e===void 0?[]:e,r=t.viewDate,o=t.weekStartsOn,s=t.excluded,a=s===void 0?[]:s,l=t.viewStart,u=l===void 0?n.startOfMonth(r):l,f=t.viewEnd,h=f===void 0?n.endOfMonth(r):f,m=t.weekendDays;i||(i=[]);for(var p=n.startOfWeek,y=n.endOfWeek,M=n.differenceInDays,x=n.startOfDay,b=n.addHours,T=n.endOfDay,E=n.isSameMonth,D=n.getDay,L=p(u,{weekStartsOn:o}),z=y(h,{weekStartsOn:o}),k=Wm(n,{events:i,periodStart:L,periodEnd:z}),G=[],F,P=function(de){var J;if(F?(J=x(b(F,tD)),F.getTime()===J.getTime()&&(J=x(b(F,tD+1))),F=J):J=F=L,!a.some(function(Ue){return D(J)===Ue})){var Q=YV(n,{date:J,weekendDays:m}),Ie=Wm(n,{events:k,periodStart:x(J),periodEnd:T(J)});Q.inMonth=E(J,r),Q.events=Ie,Q.badgeTotal=Ie.length,G.push(Q)}},N=0;N<M(z,L)+1;N++)P(N);var S=[],q=eD-a.length;if(q<eD)for(var N=0;N<G.length;N+=q){var oe=G.slice(N,N+q),ee=oe.some(function(J){return u<=J.date&&J.date<h});ee&&(S=QT(QT([],S,!0),oe,!0))}else S=G;for(var ge=Math.floor(S.length/q),le=[],N=0;N<ge;N++)le.push(N*q);return{rowOffsets:le,totalDaysVisibleInWeek:q,days:S,period:{start:S[0].date,end:T(S[S.length-1].date),events:k}}}function yx(n,t,e){return n.filter(function(i){var r=i.top,o=i.top+i.height;return t<o&&o<e||t<r&&r<e?!0:r<=t&&e<=o})}function ale(n,t){var e=t.events,i=t.viewDate,r=t.hourSegments,o=t.dayStart,s=t.dayEnd,a=t.eventWidth,l=t.segmentHeight,u=t.hourDuration,f=t.minimumEventHeight,h=n.setMinutes,m=n.setHours,p=n.startOfDay,y=n.startOfMinute,M=n.endOfDay,x=n.differenceInMinutes,b=h(m(p(i),bx(o.hour)),Cx(o.minute)),T=h(m(y(M(i)),bx(s.hour)),Cx(s.minute));T.setSeconds(59,999);var E=[],D=Wm(n,{events:e.filter(function(G){return!G.allDay}),periodStart:b,periodEnd:T}),L=D.sort(function(G,F){return G.start.valueOf()-F.start.valueOf()}).map(function(G){var F=G.start,P=G.end||F,N=F<b,S=P>T,q=r*l/(u||vx),oe=0;if(F>b){var ee=n.getTimezoneOffset(F),ge=n.getTimezoneOffset(b),le=ge-ee;oe+=x(F,b)+le}oe*=q,oe=Math.floor(oe);var de=N?b:F,J=S?T:P,Q=n.getTimezoneOffset(de)-n.getTimezoneOffset(J),Ie=x(J,de)+Q;G.end?Ie*=q:Ie=l,f&&Ie<f&&(Ie=f),Ie=Math.floor(Ie);for(var Ue=oe+Ie,ke=yx(E,oe,Ue),Ce=0;ke.some(function($e){return $e.left===Ce});)Ce+=a;var He={event:G,height:Ie,width:a,top:oe,left:Ce,startsBeforeDay:N,endsAfterDay:S};return E.push(He),He}),z=Math.max.apply(Math,L.map(function(G){return G.left+G.width})),k=Wm(n,{events:e.filter(function(G){return G.allDay}),periodStart:p(b),periodEnd:M(T)});return{events:L,width:z,allDayEvents:k,period:{events:D,start:b,end:T}}}function bx(n){return Math.max(Math.min(23,n),0)}function Cx(n){return Math.max(Math.min(59,n),0)}function lle(n,t){var e=t.viewDate,i=t.hourSegments,r=t.hourDuration,o=t.dayStart,s=t.dayEnd,a=n.setMinutes,l=n.setHours,u=n.startOfDay,f=n.startOfMinute,h=n.endOfDay,m=n.addMinutes,p=n.addDays,y=[],M=a(l(u(e),bx(o.hour)),Cx(o.minute)),x=a(l(f(h(e)),bx(s.hour)),Cx(s.minute)),b=(r||vx)/i,T=u(e),E=h(e),D=function(P){return P};n.getTimezoneOffset(T)!==n.getTimezoneOffset(E)&&(T=p(T,1),M=p(M,1),x=p(x,1),D=function(P){return p(P,-1)});for(var L=r?tD*60/r:vx,z=0;z<L;z++){for(var k=[],G=0;G<i;G++){var F=m(m(M,z*(r||vx)),G*b);F>=M&&F<x&&k.push({date:D(F),displayDate:F,isStart:G===0})}k.length>0&&y.push({segments:k})}return y}var ph=function(n){return n.NotArray="Events must be an array",n.StartPropertyMissing="Event is missing the `start` property",n.StartPropertyNotDate="Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.",n.EndPropertyNotDate="Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.",n.EndsBeforeStart="Event `start` property occurs after the `end`",n}(ph||{});function KV(n,t){var e=!0;function i(r,o){t(r,o),e=!1}return Array.isArray(n)?(n.forEach(function(r){r.start?r.start instanceof Date||i(ph.StartPropertyNotDate,r):i(ph.StartPropertyMissing,r),r.end&&(r.end instanceof Date||i(ph.EndPropertyNotDate,r),r.start>r.end&&i(ph.EndsBeforeStart,r))}),e):(t(ph.NotArray,n),!1)}function cle(n,t){return typeof n>"u"?typeof t>"u"?n:t:n}function oD(n,t){return n=cle(n,t),typeof n=="function"?function(){for(var i=arguments,r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=i[s];return!!n.apply(this,o)}:n?function(){return!0}:function(){return!1}}var nD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol?"symbol":typeof n},QV=function(n){return n!=null&&(typeof n>"u"?"undefined":nD(n))==="object"&&n.nodeType===1&&nD(n.style)==="object"&&nD(n.ownerDocument)==="object"};function ez(n,t){if(t=lD(t,!0),!QV(t))return-1;for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function sD(n,t){return ez(n,t)!==-1}function ule(n,t){for(var e=0;e<t.length;e++)sD(n,t[e])||n.push(t[e]);return t}function dle(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e=e.map(lD),ule(n,e)}function fle(n){for(var t=arguments,e=[],i=arguments.length-1;i-- >0;)e[i]=t[i+1];return e.map(lD).reduce(function(r,o){var s=ez(n,o);return s!==-1?r.concat(n.splice(s,1)):r},[])}function lD(n,t){if(typeof n=="string")try{return document.querySelector(n)}catch(e){throw e}if(!QV(n)&&!t)throw new TypeError(n+" is not a DOM element.");return n}function hle(n,t){t=t||{};var e=oD(t.allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,!!e(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(r.pageX===null&&r.clientX!==null){var o=r.target&&r.target.ownerDocument||document,s=o.documentElement,a=o.body;n.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}function ple(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var t={};return Object.defineProperties(t,n),t}function tz(n){if(n===window)return ple();try{var t=n.getBoundingClientRect();return t.x===void 0&&(t.x=t.left,t.y=t.top),t}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}function mle(n,t){var e=tz(t);return n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right}var aD=void 0;typeof Object.create!="function"?aD=function(n){var t=function(){};return function(e,i){if(e!==Object(e)&&e!==null)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,i!==n&&Object.defineProperties(r,i),e===null&&(r.__proto__=null),r}}():aD=Object.create;var gle=aD,Ku=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function _le(n){var t={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};n!==void 0&&n.addEventListener("mousemove",e);function e(o){for(var s=0;s<Ku.length;s++)t[Ku[s]]=o[Ku[s]]}var i=function(){if(MouseEvent)return function(s,a,l){var u=new MouseEvent("mousemove",iD(t,a));return rD(u,l),s.dispatchEvent(u)};if(typeof document.createEvent=="function")return function(s,a,l){var u=iD(t,a),f=document.createEvent("MouseEvents");return f.initMouseEvent("mousemove",!0,!0,window,0,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget),rD(f,l),s.dispatchEvent(f)};if(typeof document.createEventObject=="function")return function(s,a,l){var u=document.createEventObject(),f=iD(t,a);for(var h in f)u[h]=f[h];return rD(u,l),s.dispatchEvent(u)}}();function r(){n&&n.removeEventListener("mousemove",e,!1),t=null}return{destroy:r,dispatch:i}}function iD(n,t){t=t||{};for(var e=gle(n),i=0;i<Ku.length;i++)t[Ku[i]]!==void 0&&(e[Ku[i]]=t[Ku[i]]);return e}function rD(n,t){console.log("data ",t),n.data=t||{},n.dispatched="mousemove"}var $m=["webkit","moz","ms","o"],Gm=function(){if(typeof window>"u")return function(){};for(var n=0,t=$m.length;n<t&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[$m[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var e=0;window.requestAnimationFrame=function(i){var r=new Date().getTime(),o=Math.max(0,16-r-e),s=window.setTimeout(function(){return i(r+o)},o);return e=r+o,s}}return window.requestAnimationFrame.bind(window)}(),mh=function(){if(typeof window>"u")return function(){};for(var n=0,t=$m.length;n<t&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[$m[n]+"CancelAnimationFrame"]||window[$m[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){window.clearTimeout(e)}),window.cancelAnimationFrame.bind(window)}();function vle(n,t){t===void 0&&(t={});var e=this,i=4,r=!1;if(typeof t.margin!="object"){var o=t.margin||-1;this.margin={left:o,right:o,top:o,bottom:o}}else this.margin=t.margin;this.scrollWhenOutside=t.scrollWhenOutside||!1;var s={},a=hle(s),l=_le(),u=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(t.maxSpeed)||(i=t.maxSpeed),typeof i!="object"&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=oD(t.autoScroll),this.syncMove=oD(t.syncMove,!1),this.destroy=function(N){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",M,!1),window.removeEventListener("touchstart",M,!1),window.removeEventListener("mouseup",x,!1),window.removeEventListener("touchend",x,!1),window.removeEventListener("pointerup",x,!1),window.removeEventListener("mouseleave",T,!1),window.removeEventListener("mousemove",L,!1),window.removeEventListener("touchmove",L,!1),window.removeEventListener("scroll",y,!0),n=[],N&&b()},this.add=function(){for(var N=[],S=arguments.length;S--;)N[S]=arguments[S];return dle.apply(void 0,[n].concat(N)),this},this.remove=function(){for(var N=[],S=arguments.length;S--;)N[S]=arguments[S];return fle.apply(void 0,[n].concat(N))};var f=null,h;Object.prototype.toString.call(n)!=="[object Array]"&&(n=[n]),function(N){n=[],N.forEach(function(S){S===window?f=window:e.add(S)})}(n),Object.defineProperties(this,{down:{get:function(){return u}},maxSpeed:{get:function(){return i}},point:{get:function(){return s}},scrolling:{get:function(){return r}}});var m=null,p;window.addEventListener("mousedown",M,!1),window.addEventListener("touchstart",M,!1),window.addEventListener("mouseup",x,!1),window.addEventListener("touchend",x,!1),window.addEventListener("pointerup",x,!1),window.addEventListener("mousemove",L,!1),window.addEventListener("touchmove",L,!1),window.addEventListener("mouseleave",T,!1),window.addEventListener("scroll",y,!0);function y(N){for(var S=0;S<n.length;S++)if(n[S]===N.target){r=!0;break}r&&Gm(function(){return r=!1})}function M(){u=!0}function x(){u=!1,b()}function b(){mh(p),mh(h)}function T(){u=!1}function E(N){if(!N)return null;if(m===N||sD(n,N))return N;for(;N=N.parentNode;)if(sD(n,N))return N;return null}function D(){for(var N=null,S=0;S<n.length;S++)JV(s,n[S])&&(N=n[S]);return N}function L(N){if(e.autoScroll()&&!N.dispatched){var S=N.target,q=document.body;m&&!JV(s,m)&&(e.scrollWhenOutside||(m=null)),S&&S.parentNode===q?S=D():(S=E(S),S||(S=D())),S&&S!==m&&(m=S),f&&(mh(h),h=Gm(z)),m&&(mh(p),p=Gm(k))}}function z(){G(f),mh(h),h=Gm(z)}function k(){m&&(G(m),mh(p),p=Gm(k))}function G(N){var S=tz(N),q,oe;s.x<S.left+e.margin.left?q=Math.floor(Math.max(-1,(s.x-S.left)/e.margin.left-1)*e.maxSpeed.left):s.x>S.right-e.margin.right?q=Math.ceil(Math.min(1,(s.x-S.right)/e.margin.right+1)*e.maxSpeed.right):q=0,s.y<S.top+e.margin.top?oe=Math.floor(Math.max(-1,(s.y-S.top)/e.margin.top-1)*e.maxSpeed.top):s.y>S.bottom-e.margin.bottom?oe=Math.ceil(Math.min(1,(s.y-S.bottom)/e.margin.bottom+1)*e.maxSpeed.bottom):oe=0,e.syncMove()&&l.dispatch(N,{pageX:s.pageX+q,pageY:s.pageY+oe,clientX:s.x+q,clientY:s.y+oe}),setTimeout(function(){oe&&F(N,oe),q&&P(N,q)})}function F(N,S){N===window?window.scrollTo(N.pageXOffset,N.pageYOffset+S):N.scrollTop+=S}function P(N,S){N===window?window.scrollTo(N.pageXOffset+S,N.pageYOffset):N.scrollLeft+=S}}function yle(n,t){return new vle(n,t)}function JV(n,t,e){return e?n.y>e.top&&n.y<e.bottom&&n.x>e.left&&n.x<e.right:mle(n,t)}var nz=yle;function cD(n,t,e){e&&e.split(" ").forEach(i=>n.addClass(t.nativeElement,i))}function wx(n,t,e){e&&e.split(" ").forEach(i=>n.removeClass(t.nativeElement,i))}var rz=(()=>{class n{constructor(){this.currentDrag=new An}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oz=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)($(fi))},n.\u0275dir=en({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),sz=(()=>{class n{constructor(e,i,r,o,s,a,l){this.element=e,this.renderer=i,this.draggableHelper=r,this.zone=o,this.vcr=s,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new gt,this.dragStart=new gt,this.ghostElementCreated=new gt,this.dragging=new gt,this.dragEnd=new gt,this.pointerDown$=new An,this.pointerMove$=new An,this.pointerUp$=new An,this.eventListenerSubscriptions={},this.destroy$=new An,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();let e=this.pointerDown$.pipe(vi(()=>this.canDrag()),_i(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();let r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText(`
          body * {
           -moz-user-select: none;
           -ms-user-select: none;
           -webkit-user-select: none;
           user-select: none;
          }
        `)),requestAnimationFrame(()=>{this.document.head.appendChild(r)});let o=this.getScrollPosition(),s=new Jt(p=>{let y=this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window";return this.renderer.listen(y,"scroll",M=>p.next(M))}).pipe(ou(o),Dt(()=>this.getScrollPosition())),a=new An,l=new Jh;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});let u=as(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(ls()),f=ru([this.pointerMove$,s]).pipe(Dt(([p,y])=>({currentDrag$:a,transformX:p.clientX-i.clientX,transformY:p.clientY-i.clientY,clientX:p.clientX,clientY:p.clientY,scrollLeft:y.left,scrollTop:y.top,target:p.event.target})),Dt(p=>(this.dragSnapGrid.x&&(p.transformX=Math.round(p.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(p.transformY=Math.round(p.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),p)),Dt(p=>(this.dragAxis.x||(p.transformX=0),this.dragAxis.y||(p.transformY=0),p)),Dt(p=>{let y=p.scrollLeft-o.left,M=p.scrollTop-o.top;return Yt(je({},p),{x:p.transformX+y,y:p.transformY+M})}),vi(({x:p,y,transformX:M,transformY:x})=>!this.validateDrag||this.validateDrag({x:p,y,transform:{x:M,y:x}})),Co(u),ls()),h=f.pipe(Vr(1),ls()),m=f.pipe(Jl(1),ls());return h.subscribe(({clientX:p,clientY:y,x:M,y:x})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=nz([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],Yt(je({},this.autoScroll),{autoScroll(){return!0}})),cD(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){let b=this.element.nativeElement.getBoundingClientRect(),T=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(T):this.element.nativeElement.parentNode.insertBefore(T,this.element.nativeElement.nextSibling),this.ghostElement=T,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(T,{position:"fixed",top:`${b.top}px`,left:`${b.left}px`,width:`${b.width}px`,height:`${b.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){let E=this.vcr.createEmbeddedView(this.ghostElementTemplate);T.innerHTML="",E.rootNodes.filter(D=>D instanceof Node).forEach(D=>{T.appendChild(D)}),m.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(E))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:p-M,clientY:y-x,element:T})}),m.subscribe(()=>{T.parentElement.removeChild(T),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),m.pipe(_i(p=>{let y=l.pipe(cM(),Vr(1),Dt(M=>Yt(je({},p),{dragCancelled:M>0})));return l.complete(),y})).subscribe(({x:p,y,dragCancelled:M})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:p,y,dragCancelled:M})}),wx(this.renderer,this.element,this.dragActiveClass),a.complete()}),as(u,m).pipe(Vr(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),f}),ls());as(e.pipe(Vr(1),Dt(i=>[,i])),e.pipe(Od())).pipe(vi(([i,r])=>i?i.x!==r.x||i.y!==r.y:!0),Dt(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:o,clientX:s,clientY:a,transformX:l,transformY:u,target:f})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){let h=`translate3d(${l}px, ${u}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:h,"-webkit-transform":h,"-ms-transform":h,"-moz-transform":h,"-o-transform":h})}}),o.next({clientX:s,clientY:a,dropData:this.dropData,target:f})})}ngOnChanges(e){e.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){let e=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;e&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!e&&i&&this.unsubscribeEventListeners()}onMouseDown(e){e.button===0&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onMouseUp(e){e.button===0&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:e,clientX:e.clientX,clientY:e.clientY}))}onTouchStart(e){let i,r,o;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,o=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){let s=Xl(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Xl(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&o&&(r=this.shouldBeginDrag(e,l,i)),(!this.touchStartLongPress||!o||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{s.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:e,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})}onTouchEnd(e){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:e,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(e){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",e)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(e=>{this.eventListenerSubscriptions[e](),delete this.eventListenerSubscriptions[e]})}setElementStyles(e,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(e,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(e,i,r){let o=this.getScrollPosition(),s={top:Math.abs(o.top-r.top),left:Math.abs(o.left-r.left)},a=Math.abs(i.targetTouches[0].clientX-e.touches[0].clientX)-s.left,l=Math.abs(i.targetTouches[0].clientY-e.touches[0].clientY)-s.top,u=a+l,f=this.touchStartLongPress;return(u>f.delta||s.top>0||s.left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=f.delay?(this.disableScroll(),!0):!1}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){let e=this.getScrollElement(),i=e.scrollWidth>e.clientWidth,r=e.scrollHeight>e.clientHeight;return i||r}}return n.\u0275fac=function(e){return new(e||n)($(fi),$(Mi),$(rz),$(qn),$(Ho),$(oz,8),$(Ki))},n.\u0275dir=en({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Mr]}),n})();function iz(n,t,e){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom}var uD=(()=>{class n{constructor(e,i,r,o,s){this.element=e,this.draggableHelper=i,this.zone=r,this.renderer=o,this.scrollContainer=s,this.dragEnter=new gt,this.dragLeave=new gt,this.dragOver=new gt,this.drop=new gt}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(e=>{cD(this.renderer,this.element,this.dragActiveClass);let i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0}),o,s=e.pipe(Dt(({clientX:u,clientY:f,dropData:h,target:m})=>{o={clientX:u,clientY:f,dropData:h,target:m},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);let p=iz(u,f,i.rect),y=!this.validateDrop||this.validateDrop({clientX:u,clientY:f,target:m,dropData:h});return i.scrollContainerRect?p&&y&&iz(u,f,i.scrollContainerRect):p&&y})),a=s.pipe(dM()),l;a.pipe(vi(u=>u)).subscribe(()=>{l=!0,cD(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(o)})}),s.pipe(vi(u=>u)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(o)})}),a.pipe(Od(),vi(([u,f])=>u&&!f)).subscribe(()=>{l=!1,wx(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(o)})}),e.subscribe({complete:()=>{r(),wx(this.renderer,this.element,this.dragActiveClass),l&&(wx(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(o)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)($(fi),$(rz),$(qn),$(Mi),$(oz,8))},n.\u0275dir=en({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),qm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({}),n})();var gh=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(gh||{});function az(n,t){return{type:gh.Trigger,name:n,definitions:t,options:{}}}function dD(n,t=null){return{type:gh.Animate,styles:t,timings:n}}function fD(n){return{type:gh.Style,styles:n,offset:null}}function hD(n,t,e){return{type:gh.State,name:n,styles:t,options:e}}function pD(n,t,e=null){return{type:gh.Transition,expr:n,animation:t,options:e}}var Ju=typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;function ble(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();return t.removeAttribute("id"),e.forEach(r=>{r.removeAttribute("id")}),i==="canvas"?uz(n,t):(i==="input"||i==="select"||i==="textarea")&&cz(n,t),lz("canvas",n,t,uz),lz("input, textarea, select",n,t,cz),t}function lz(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let o=e.querySelectorAll(n);for(let s=0;s<r.length;s++)i(r[s],o[s])}}var Cle=0;function cz(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${Cle++}`)}function uz(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function dz(n,t,e,i){let r={top:n.top,bottom:n.bottom,left:n.left,right:n.right};return t.top&&(r.top+=i),t.bottom&&(r.bottom+=i),t.left&&(r.left+=e),t.right&&(r.right+=e),r.height=r.bottom-r.top,r.width=r.right-r.left,r}function Mle(n,t){let e=0,i=0,r=n.nativeElement.style,s=["transform","-ms-transform","-moz-transform","-o-transform"].map(a=>r[a]).find(a=>!!a);if(s&&s.includes("translate")&&(e=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$1"),i=s.replace(/.*translate3?d?\((-?[0-9]*)px, (-?[0-9]*)px.*/,"$2")),t==="absolute")return{height:n.nativeElement.offsetHeight,width:n.nativeElement.offsetWidth,top:n.nativeElement.offsetTop-i,bottom:n.nativeElement.offsetHeight+n.nativeElement.offsetTop-i,left:n.nativeElement.offsetLeft-e,right:n.nativeElement.offsetWidth+n.nativeElement.offsetLeft-e};{let a=n.nativeElement.getBoundingClientRect();return{height:a.height,width:a.width,top:a.top-i,bottom:a.bottom-i,left:a.left-e,right:a.right-e,scrollTop:n.nativeElement.scrollTop,scrollLeft:n.nativeElement.scrollLeft}}}var fz=Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});function hz(n,t){return n.left&&n.top?t.topLeft:n.right&&n.top?t.topRight:n.left&&n.bottom?t.bottomLeft:n.right&&n.bottom?t.bottomRight:n.left||n.right?t.leftOrRight:n.top||n.bottom?t.topOrBottom:""}function Ex({edges:n,initialRectangle:t,newRectangle:e}){let i={};return Object.keys(n).forEach(r=>{i[r]=(e[r]||0)-(t[r]||0)}),i}var pz="resize-active",wle="resize-ghost-element",Ele=50,gD=(()=>{class n{constructor(e,i,r,o){this.platformId=e,this.renderer=i,this.elm=r,this.zone=o,this.enableGhostResize=!1,this.resizeSnapGrid={},this.resizeCursors=fz,this.ghostElementPositioning="fixed",this.allowNegativeResizes=!1,this.mouseMoveThrottleMS=Ele,this.resizeStart=new gt,this.resizing=new gt,this.resizeEnd=new gt,this.mouseup=new An,this.mousedown=new An,this.mousemove=new An,this.destroy$=new An,this.pointerEventListeners=mD.getInstance(i,o)}ngOnInit(){let e=as(this.pointerEventListeners.pointerDown,this.mousedown),i=as(this.pointerEventListeners.pointerMove,this.mousemove).pipe(yi(({event:u})=>{o&&u.cancelable&&u.preventDefault()}),ls()),r=as(this.pointerEventListeners.pointerUp,this.mouseup),o,s=()=>{o&&o.clonedNode&&(this.elm.nativeElement.parentElement.removeChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","inherit"))},a=()=>je(je({},fz),this.resizeCursors);e.pipe(_i(u=>{function f(p){return{clientX:p.clientX-u.clientX,clientY:p.clientY-u.clientY}}let h=()=>{let p={x:1,y:1};return o&&(this.resizeSnapGrid.left&&o.edges.left?p.x=+this.resizeSnapGrid.left:this.resizeSnapGrid.right&&o.edges.right&&(p.x=+this.resizeSnapGrid.right),this.resizeSnapGrid.top&&o.edges.top?p.y=+this.resizeSnapGrid.top:this.resizeSnapGrid.bottom&&o.edges.bottom&&(p.y=+this.resizeSnapGrid.bottom)),p};function m(p,y){return{x:Math.ceil(p.clientX/y.x),y:Math.ceil(p.clientY/y.y)}}return as(i.pipe(Vr(1)).pipe(Dt(p=>[,p])),i.pipe(Od())).pipe(Dt(([p,y])=>[p&&f(p),f(y)])).pipe(vi(([p,y])=>{if(!p)return!0;let M=h(),x=m(p,M),b=m(y,M);return x.x!==b.x||x.y!==b.y})).pipe(Dt(([,p])=>{let y=h();return{clientX:Math.round(p.clientX/y.x)*y.x,clientY:Math.round(p.clientY/y.y)*y.y}})).pipe(Co(as(r,e)))})).pipe(vi(()=>!!o)).pipe(Dt(({clientX:u,clientY:f})=>dz(o.startingRect,o.edges,u,f))).pipe(vi(u=>this.allowNegativeResizes||!!(u.height&&u.width&&u.height>0&&u.width>0))).pipe(vi(u=>this.validateResize?this.validateResize({rectangle:u,edges:Ex({edges:o.edges,initialRectangle:o.startingRect,newRectangle:u})}):!0),Co(this.destroy$)).subscribe(u=>{o&&o.clonedNode&&(this.renderer.setStyle(o.clonedNode,"height",`${u.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${u.width}px`),this.renderer.setStyle(o.clonedNode,"top",`${u.top}px`),this.renderer.setStyle(o.clonedNode,"left",`${u.left}px`)),this.resizing.observers.length>0&&this.zone.run(()=>{this.resizing.emit({edges:Ex({edges:o.edges,initialRectangle:o.startingRect,newRectangle:u}),rectangle:u})}),o.currentRect=u}),e.pipe(Dt(({edges:u})=>u||{}),vi(u=>Object.keys(u).length>0),Co(this.destroy$)).subscribe(u=>{o&&s();let f=Mle(this.elm,this.ghostElementPositioning);o={edges:u,startingRect:f,currentRect:f};let h=a(),m=hz(o.edges,h);this.renderer.setStyle(document.body,"cursor",m),this.setElementClass(this.elm,pz,!0),this.enableGhostResize&&(o.clonedNode=ble(this.elm.nativeElement),this.elm.nativeElement.parentElement.appendChild(o.clonedNode),this.renderer.setStyle(this.elm.nativeElement,"visibility","hidden"),this.renderer.setStyle(o.clonedNode,"position",this.ghostElementPositioning),this.renderer.setStyle(o.clonedNode,"left",`${o.startingRect.left}px`),this.renderer.setStyle(o.clonedNode,"top",`${o.startingRect.top}px`),this.renderer.setStyle(o.clonedNode,"height",`${o.startingRect.height}px`),this.renderer.setStyle(o.clonedNode,"width",`${o.startingRect.width}px`),this.renderer.setStyle(o.clonedNode,"cursor",hz(o.edges,h)),this.renderer.addClass(o.clonedNode,wle),o.clonedNode.scrollTop=o.startingRect.scrollTop,o.clonedNode.scrollLeft=o.startingRect.scrollLeft),this.resizeStart.observers.length>0&&this.zone.run(()=>{this.resizeStart.emit({edges:Ex({edges:u,initialRectangle:f,newRectangle:f}),rectangle:dz(f,{},0,0)})})}),r.pipe(Co(this.destroy$)).subscribe(()=>{o&&(this.renderer.removeClass(this.elm.nativeElement,pz),this.renderer.setStyle(document.body,"cursor",""),this.renderer.setStyle(this.elm.nativeElement,"cursor",""),this.resizeEnd.observers.length>0&&this.zone.run(()=>{this.resizeEnd.emit({edges:Ex({edges:o.edges,initialRectangle:o.startingRect,newRectangle:o.currentRect}),rectangle:o.currentRect})}),s(),o=null)})}ngOnDestroy(){of(this.platformId)&&this.renderer.setStyle(document.body,"cursor",""),this.mousedown.complete(),this.mouseup.complete(),this.mousemove.complete(),this.destroy$.next()}setElementClass(e,i,r){r?this.renderer.addClass(e.nativeElement,i):this.renderer.removeClass(e.nativeElement,i)}}return n.\u0275fac=function(e){return new(e||n)($(Br),$(Mi),$(fi),$(qn))},n.\u0275dir=en({type:n,selectors:[["","mwlResizable",""]],inputs:{validateResize:"validateResize",enableGhostResize:"enableGhostResize",resizeSnapGrid:"resizeSnapGrid",resizeCursors:"resizeCursors",ghostElementPositioning:"ghostElementPositioning",allowNegativeResizes:"allowNegativeResizes",mouseMoveThrottleMS:"mouseMoveThrottleMS"},outputs:{resizeStart:"resizeStart",resizing:"resizing",resizeEnd:"resizeEnd"},exportAs:["mwlResizable"]}),n})(),mD=class n{constructor(t,e){this.pointerDown=new Jt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousedown",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ju&&(o=t.listen("document","touchstart",s=>{i.next({clientX:s.touches[0].clientX,clientY:s.touches[0].clientY,event:s})}))}),()=>{r(),Ju&&o()}}).pipe(ls()),this.pointerMove=new Jt(i=>{let r,o;return e.runOutsideAngular(()=>{r=t.listen("document","mousemove",s=>{i.next({clientX:s.clientX,clientY:s.clientY,event:s})}),Ju&&(o=t.listen("document","touchmove",s=>{i.next({clientX:s.targetTouches[0].clientX,clientY:s.targetTouches[0].clientY,event:s})}))}),()=>{r(),Ju&&o()}}).pipe(ls()),this.pointerUp=new Jt(i=>{let r,o,s;return e.runOutsideAngular(()=>{r=t.listen("document","mouseup",a=>{i.next({clientX:a.clientX,clientY:a.clientY,event:a})}),Ju&&(o=t.listen("document","touchend",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}),s=t.listen("document","touchcancel",a=>{i.next({clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,event:a})}))}),()=>{r(),Ju&&(o(),s())}}).pipe(ls())}static getInstance(t,e){return n.instance||(n.instance=new n(t,e)),n.instance}},mz=(()=>{class n{constructor(e,i,r,o){this.renderer=e,this.element=i,this.zone=r,this.resizableDirective=o,this.resizeEdges={},this.eventListeners={},this.destroy$=new An}ngOnInit(){this.zone.runOutsideAngular(()=>{this.listenOnTheHost("mousedown").subscribe(e=>{this.onMousedown(e,e.clientX,e.clientY)}),this.listenOnTheHost("mouseup").subscribe(e=>{this.onMouseup(e.clientX,e.clientY)}),Ju&&(this.listenOnTheHost("touchstart").subscribe(e=>{this.onMousedown(e,e.touches[0].clientX,e.touches[0].clientY)}),as(this.listenOnTheHost("touchend"),this.listenOnTheHost("touchcancel")).subscribe(e=>{this.onMouseup(e.changedTouches[0].clientX,e.changedTouches[0].clientY)}))})}ngOnDestroy(){this.destroy$.next(),this.unsubscribeEventListeners()}onMousedown(e,i,r){e.cancelable&&e.preventDefault(),this.eventListeners.touchmove||(this.eventListeners.touchmove=this.renderer.listen(this.element.nativeElement,"touchmove",o=>{this.onMousemove(o,o.targetTouches[0].clientX,o.targetTouches[0].clientY)})),this.eventListeners.mousemove||(this.eventListeners.mousemove=this.renderer.listen(this.element.nativeElement,"mousemove",o=>{this.onMousemove(o,o.clientX,o.clientY)})),this.resizable.mousedown.next({clientX:i,clientY:r,edges:this.resizeEdges})}onMouseup(e,i){this.unsubscribeEventListeners(),this.resizable.mouseup.next({clientX:e,clientY:i,edges:this.resizeEdges})}get resizable(){return this.resizableDirective||this.resizableContainer}onMousemove(e,i,r){this.resizable.mousemove.next({clientX:i,clientY:r,edges:this.resizeEdges,event:e})}unsubscribeEventListeners(){Object.keys(this.eventListeners).forEach(e=>{this.eventListeners[e](),delete this.eventListeners[e]})}listenOnTheHost(e){return Xl(this.element.nativeElement,e).pipe(Co(this.destroy$))}}return n.\u0275fac=function(e){return new(e||n)($(Mi),$(fi),$(qn),$(gD,8))},n.\u0275dir=en({type:n,selectors:[["","mwlResizeHandle",""]],inputs:{resizeEdges:"resizeEdges",resizableContainer:"resizableContainer"}}),n})(),_D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({}),n})();var Ple=(n,t)=>({event:n,trackByActionId:t}),Tle=n=>({action:n});function Dle(n,t){if(n&1){let e=rt();g(0,"a",5),Hr(1,"calendarA11y"),se("mwlClick",function(r){let o=De(e).$implicit,s=ae(2).event;return Oe(o.onClick({event:s,sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=De(e).$implicit,s=ae(2).event;return Oe(o.onClick({event:s,sourceEvent:r}))}),_()}if(n&2){let e=t.$implicit;X("ngClass",e.cssClass)("innerHtml",e.label,P_),Zi("aria-label",dl(1,3,ri(6,Tle,e),"actionButtonLabel"))}}function Ole(n,t){if(n&1&&(g(0,"span",3),Se(1,Dle,2,8,"a",4),_()),n&2){let e=ae(),i=e.event,r=e.trackByActionId;A(),X("ngForOf",i.actions)("ngForTrackBy",r)}}function Ale(n,t){if(n&1&&Se(0,Ole,2,2,"span",2),n&2){let e=t.event;X("ngIf",e.actions)}}function Ile(n,t){}var Rle=(n,t)=>({event:n,view:t}),Sx=()=>({});function kle(n,t){if(n&1&&(me(0,"span",2),Hr(1,"calendarEventTitle"),Hr(2,"calendarA11y")),n&2){let e=t.event,i=t.view;X("innerHTML",Qd(1,2,e.title,i,e),P_),Zi("aria-hidden",dl(2,6,ji(9,Sx),"hideEventTitle"))}}function Nle(n,t){}var Fle=(n,t,e)=>({contents:n,placement:t,event:e});function Lle(n,t){if(n&1&&(g(0,"div",2),me(1,"div",3)(2,"div",4),_()),n&2){let e=t.contents,i=t.placement;X("ngClass","cal-tooltip-"+i),A(2),X("innerHtml",e,P_)}}function Ule(n,t){}var yD=(n,t)=>({x:n,y:t}),yz=()=>({delay:300,delta:30});var Vle=(n,t)=>({event:n,locale:t});var zle=(n,t,e,i,r,o)=>({days:n,locale:t,dayHeaderClicked:e,eventDropped:i,dragEnter:r,trackByWeekDayHeaderDate:o});function Ble(n,t){if(n&1){let e=rt();g(0,"div",4),se("mwlClick",function(r){let o=De(e).$implicit,s=ae().dayHeaderClicked;return Oe(s.emit({day:o,sourceEvent:r}))})("drop",function(r){let o=De(e).$implicit,s=ae().eventDropped;return Oe(s.emit({event:r.dropData.event,newStart:o.date}))})("dragEnter",function(){let r=De(e).$implicit,o=ae().dragEnter;return Oe(o.emit({date:r.date}))}),g(1,"b"),C(2),Hr(3,"calendarDate"),_(),me(4,"br"),g(5,"span"),C(6),Hr(7,"calendarDate"),_()()}if(n&2){let e=t.$implicit,i=ae().locale;So("cal-past",e.isPast)("cal-today",e.isToday)("cal-future",e.isFuture)("cal-weekend",e.isWeekend),X("ngClass",e.cssClass),A(2),Je(Qd(3,11,e.date,"weekViewColumnHeader",i)),A(4),Je(Qd(7,15,e.date,"weekViewColumnSubHeader",i))}}function Hle(n,t){if(n&1&&(g(0,"div",2),Se(1,Ble,8,19,"div",3),_()),n&2){let e=t.days,i=t.trackByWeekDayHeaderDate;A(),X("ngForOf",e)("ngForTrackBy",i)}}function jle(n,t){}var Wle=(n,t,e,i,r,o,s,a,l)=>({weekEvent:n,tooltipPlacement:t,eventClicked:e,tooltipTemplate:i,tooltipAppendToBody:r,tooltipDisabled:o,tooltipDelay:s,column:a,daysInWeek:l}),Gle=(n,t,e)=>({color:n,backgroundColor:t,borderColor:e});function $le(n,t){if(n&1){let e=rt();g(0,"div",2),Hr(1,"calendarEventTitle"),Hr(2,"calendarA11y"),se("mwlClick",function(r){let o=De(e).eventClicked;return Oe(o.emit({sourceEvent:r}))})("mwlKeydownEnter",function(r){let o=De(e).eventClicked;return Oe(o.emit({sourceEvent:r}))}),me(3,"mwl-calendar-event-actions",3),C(4," "),me(5,"mwl-calendar-event-title",4),_()}if(n&2){let e=t.weekEvent,i=t.tooltipPlacement,r=t.tooltipTemplate,o=t.tooltipAppendToBody,s=t.tooltipDisabled,a=t.tooltipDelay,l=t.daysInWeek,u=ae();X("ngStyle",S1(20,Gle,e.event.color==null?null:e.event.color.secondaryText,e.event.color==null?null:e.event.color.secondary,e.event.color==null?null:e.event.color.primary))("mwlCalendarTooltip",s?"":Qd(1,13,e.event.title,l===1?"dayTooltip":"weekTooltip",e.tempEvent||e.event))("tooltipPlacement",i)("tooltipEvent",e.tempEvent||e.event)("tooltipTemplate",r)("tooltipAppendToBody",o)("tooltipDelay",a),Zi("aria-label",dl(2,17,ba(24,Vle,e.tempEvent||e.event,u.locale),"eventDescription")),A(3),X("event",e.tempEvent||e.event)("customTemplate",u.eventActionsTemplate),A(2),X("event",e.tempEvent||e.event)("customTemplate",u.eventTitleTemplate)("view",l===1?"day":"week")}}function qle(n,t){}var Yle=(n,t,e,i,r)=>({segment:n,locale:t,segmentHeight:e,isTimeLabel:i,daysInWeek:r});function Xle(n,t){if(n&1&&(g(0,"div",4),C(1),Hr(2,"calendarDate"),_()),n&2){let e=ae(),i=e.segment,r=e.locale,o=e.daysInWeek;A(),_t(" ",Qd(2,1,i.displayDate,o===1?"dayViewHour":"weekViewHour",r)," ")}}function Zle(n,t){if(n&1&&(g(0,"div",2),Hr(1,"calendarA11y"),Se(2,Xle,3,5,"div",3),_()),n&2){let e=t.segment,i=t.segmentHeight,r=t.isTimeLabel,o=t.daysInWeek;ul("height",i,"px"),So("cal-hour-start",e.isStart)("cal-after-hour-start",!e.isStart),X("ngClass",e.cssClass),Zi("aria-hidden",dl(1,9,ji(12,Sx),o===1?"hideDayHourSegment":"hideWeekHourSegment")),A(2),X("ngIf",r)}}function Kle(n,t){}var Jle=(n,t,e,i,r,o,s)=>({columnDate:n,dayStartHour:t,dayStartMinute:e,dayEndHour:i,dayEndMinute:r,isVisible:o,topPx:s});function Qle(n,t){if(n&1&&me(0,"div",3),n&2){let e=ae().topPx;ul("top",e,"px")}}function ece(n,t){if(n&1&&Se(0,Qle,1,2,"div",2),n&2){let e=t.isVisible;X("ngIf",e)}}function tce(n,t){}var nce=(n,t)=>({left:n,right:t}),xz=(n,t)=>({event:n,calendarId:t}),ice=n=>({x:n}),rce=()=>({left:!0}),oce=()=>({right:!0}),sce=(n,t,e,i)=>({left:n,right:t,top:e,bottom:i}),ace=()=>({left:!0,top:!0}),lce=()=>({right:!0,bottom:!0});function cce(n,t){n&1&&w1(0)}function uce(n,t){if(n&1){let e=rt();g(0,"div",17),se("drop",function(r){let o=De(e).$implicit,s=ae(2);return Oe(s.eventDropped(r,o.date,!0))})("dragEnter",function(){let r=De(e).$implicit,o=ae(2);return Oe(o.dateDragEnter(r.date))}),_()}}function dce(n,t){n&1&&me(0,"div",24),n&2&&X("resizeEdges",ji(1,rce))}function fce(n,t){n&1&&me(0,"div",25),n&2&&X("resizeEdges",ji(1,oce))}function hce(n,t){if(n&1){let e=rt();g(0,"div",20,3),se("resizeStart",function(r){let o=De(e).$implicit;ae();let s=Ii(1),a=ae(2);return Oe(a.allDayEventResizeStarted(s,o,r))})("resizing",function(r){let o=De(e).$implicit,s=ae(3);return Oe(s.allDayEventResizing(o,r,s.dayColumnWidth))})("resizeEnd",function(){let r=De(e).$implicit,o=ae(3);return Oe(o.allDayEventResizeEnded(r))})("dragStart",function(){let r=De(e).$implicit,o=Ii(1);ae();let s=Ii(1),a=ae(2);return Oe(a.dragStarted(s,o,r,!1))})("dragging",function(){De(e);let r=ae(3);return Oe(r.allDayEventDragMove())})("dragEnd",function(r){let o=De(e).$implicit,s=ae(3);return Oe(s.dragEnded(o,r,s.dayColumnWidth))}),Se(2,dce,1,2,"div",21),g(3,"mwl-calendar-week-view-event",22),se("eventClicked",function(r){let o=De(e).$implicit,s=ae(3);return Oe(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),_(),Se(4,fce,1,2,"div",23),_()}if(n&2){let e=t.$implicit,i=ae(3);ul("width",100/i.days.length*e.span,"%")("margin-left",i.rtl?null:100/i.days.length*e.offset,"%")("margin-right",i.rtl?100/i.days.length*e.offset:null,"%"),So("cal-draggable",e.event.draggable&&i.allDayEventResizes.size===0)("cal-starts-within-week",!e.startsBeforeWeek)("cal-ends-within-week",!e.endsAfterWeek),X("ngClass",e.event==null?null:e.event.cssClass)("resizeCursors",i.resizeCursors)("resizeSnapGrid",ba(33,nce,i.dayColumnWidth,i.dayColumnWidth))("validateResize",i.validateResize)("dropData",ba(36,xz,e.event,i.calendarId))("dragAxis",ba(39,yD,e.event.draggable&&i.allDayEventResizes.size===0,!i.snapDraggedEvents&&e.event.draggable&&i.allDayEventResizes.size===0))("dragSnapGrid",i.snapDraggedEvents?ri(42,ice,i.dayColumnWidth):ji(44,Sx))("validateDrag",i.validateDrag)("touchStartLongPress",ji(45,yz)),A(2),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeWeek),A(),X("locale",i.locale)("weekEvent",e)("tooltipPlacement",i.tooltipPlacement)("tooltipTemplate",i.tooltipTemplate)("tooltipAppendToBody",i.tooltipAppendToBody)("tooltipDelay",i.tooltipDelay)("customTemplate",i.eventTemplate)("eventTitleTemplate",i.eventTitleTemplate)("eventActionsTemplate",i.eventActionsTemplate)("daysInWeek",i.daysInWeek),A(),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterWeek)}}function pce(n,t){if(n&1&&(g(0,"div",18,2),Se(2,hce,5,46,"div",19),_()),n&2){let e=t.$implicit,i=ae(2);A(2),X("ngForOf",e.row)("ngForTrackBy",i.trackByWeekAllDayEvent)}}function mce(n,t){if(n&1){let e=rt();g(0,"div",12,1),se("dragEnter",function(){De(e);let r=ae();return Oe(r.dragEnter("allDay"))})("dragLeave",function(){De(e);let r=ae();return Oe(r.dragLeave("allDay"))}),g(2,"div",10)(3,"div",13),Se(4,cce,1,0,"ng-container",14),_(),Se(5,uce,1,0,"div",15),_(),Se(6,pce,3,2,"div",16),_()}if(n&2){let e=ae();A(4),X("ngTemplateOutlet",e.allDayEventsLabelTemplate),A(),X("ngForOf",e.days)("ngForTrackBy",e.trackByWeekDayHeaderDate),A(),X("ngForOf",e.view.allDayEventRows)("ngForTrackBy",e.trackById)}}function gce(n,t){if(n&1&&me(0,"mwl-calendar-week-view-hour-segment",29),n&2){let e=t.$implicit,i=ae(3);ul("height",i.hourSegmentHeight,"px"),X("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("isTimeLabel",!0)("daysInWeek",i.daysInWeek)}}function _ce(n,t){if(n&1&&(g(0,"div",27),Se(1,gce,1,8,"mwl-calendar-week-view-hour-segment",28),_()),n&2){let e=t.$implicit,i=t.odd,r=ae(2);So("cal-hour-odd",i),A(),X("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function vce(n,t){if(n&1&&(g(0,"div",13),Se(1,_ce,2,4,"div",26),_()),n&2){let e=ae();A(),X("ngForOf",e.view.hourColumns[0].hours)("ngForTrackBy",e.trackByHour)}}function yce(n,t){n&1&&me(0,"div",24),n&2&&X("resizeEdges",ji(1,ace))}function xce(n,t){}function bce(n,t){if(n&1){let e=rt();g(0,"mwl-calendar-week-view-event",36),se("eventClicked",function(r){De(e);let o=ae().$implicit,s=ae(2);return Oe(s.eventClicked.emit({event:o.event,sourceEvent:r.sourceEvent}))}),_()}if(n&2){let e=ae().$implicit,i=ae().$implicit,r=ae();X("locale",r.locale)("weekEvent",e)("tooltipPlacement",r.tooltipPlacement)("tooltipTemplate",r.tooltipTemplate)("tooltipAppendToBody",r.tooltipAppendToBody)("tooltipDisabled",r.dragActive||r.timeEventResizes.size>0)("tooltipDelay",r.tooltipDelay)("customTemplate",r.eventTemplate)("eventTitleTemplate",r.eventTitleTemplate)("eventActionsTemplate",r.eventActionsTemplate)("column",i)("daysInWeek",r.daysInWeek)}}function Cce(n,t){n&1&&me(0,"div",25),n&2&&X("resizeEdges",ji(1,lce))}function Mce(n,t){if(n&1){let e=rt();g(0,"div",34,3),se("resizeStart",function(r){let o=De(e).$implicit,s=ae(2),a=Ii(6);return Oe(s.timeEventResizeStarted(a,o,r))})("resizing",function(r){let o=De(e).$implicit,s=ae(2);return Oe(s.timeEventResizing(o,r))})("resizeEnd",function(){let r=De(e).$implicit,o=ae(2);return Oe(o.timeEventResizeEnded(r))})("dragStart",function(){let r=De(e).$implicit,o=Ii(1),s=ae(2),a=Ii(6);return Oe(s.dragStarted(a,o,r,!0))})("dragging",function(r){let o=De(e).$implicit,s=ae(2);return Oe(s.dragMove(o,r))})("dragEnd",function(r){let o=De(e).$implicit,s=ae(2);return Oe(s.dragEnded(o,r,s.dayColumnWidth,!0))}),Se(2,yce,1,2,"div",21)(3,xce,0,0,"ng-template",35)(4,bce,1,12,"ng-template",null,4,Xs)(6,Cce,1,2,"div",23),_()}if(n&2){let e=t.$implicit,i=Ii(5),r=ae(2);ul("top",e.top,"px")("height",e.height,"px")("left",e.left,"%")("width",e.width,"%"),So("cal-draggable",e.event.draggable&&r.timeEventResizes.size===0)("cal-starts-within-day",!e.startsBeforeDay)("cal-ends-within-day",!e.endsAfterDay),X("ngClass",e.event.cssClass)("hidden",e.height===0&&e.width===0)("resizeCursors",r.resizeCursors)("resizeSnapGrid",yN(30,sce,r.dayColumnWidth,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight,r.eventSnapSize||r.hourSegmentHeight))("validateResize",r.validateResize)("allowNegativeResizes",!0)("dropData",ba(35,xz,e.event,r.calendarId))("dragAxis",ba(38,yD,e.event.draggable&&r.timeEventResizes.size===0,e.event.draggable&&r.timeEventResizes.size===0))("dragSnapGrid",r.snapDraggedEvents?ba(41,yD,r.dayColumnWidth,r.eventSnapSize||r.hourSegmentHeight):ji(44,Sx))("touchStartLongPress",ji(45,yz))("ghostDragEnabled",!r.snapDraggedEvents)("ghostElementTemplate",i)("validateDrag",r.validateDrag),A(2),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.beforeStart)&&!e.startsBeforeDay),A(),X("ngTemplateOutlet",i),A(3),X("ngIf",(e.event==null||e.event.resizable==null?null:e.event.resizable.afterEnd)&&!e.endsAfterDay)}}function wce(n,t){if(n&1){let e=rt();g(0,"mwl-calendar-week-view-hour-segment",38),se("mwlClick",function(r){let o=De(e).$implicit,s=ae(3);return Oe(s.hourSegmentClicked.emit({date:o.date,sourceEvent:r}))})("drop",function(r){let o=De(e).$implicit,s=ae(3);return Oe(s.eventDropped(r,o.date,!1))})("dragEnter",function(){let r=De(e).$implicit,o=ae(3);return Oe(o.dateDragEnter(r.date))}),_()}if(n&2){let e=t.$implicit,i=ae(3);ul("height",i.hourSegmentHeight,"px"),X("segment",e)("segmentHeight",i.hourSegmentHeight)("locale",i.locale)("customTemplate",i.hourSegmentTemplate)("daysInWeek",i.daysInWeek)("clickListenerDisabled",i.hourSegmentClicked.observers.length===0)("dragOverClass",!i.dragActive||!i.snapDraggedEvents?"cal-drag-over":null)("isTimeLabel",i.daysInWeek===1)}}function Ece(n,t){if(n&1&&(g(0,"div",27),Se(1,wce,1,10,"mwl-calendar-week-view-hour-segment",37),_()),n&2){let e=t.$implicit,i=t.odd,r=ae(2);So("cal-hour-odd",i),A(),X("ngForOf",e.segments)("ngForTrackBy",r.trackByHourSegment)}}function Sce(n,t){if(n&1&&(g(0,"div",30),me(1,"mwl-calendar-week-view-current-time-marker",31),g(2,"div",32),Se(3,Mce,7,46,"div",33),_(),Se(4,Ece,2,4,"div",26),_()),n&2){let e=t.$implicit,i=ae();A(),X("columnDate",e.date)("dayStartHour",i.dayStartHour)("dayStartMinute",i.dayStartMinute)("dayEndHour",i.dayEndHour)("dayEndMinute",i.dayEndMinute)("hourSegments",i.hourSegments)("hourDuration",i.hourDuration)("hourSegmentHeight",i.hourSegmentHeight)("customTemplate",i.currentTimeMarkerTemplate),A(2),X("ngForOf",e.events)("ngForTrackBy",i.trackByWeekTimeEvent),A(),X("ngForOf",e.hours)("ngForTrackBy",i.trackByHour)}}var Px=(()=>{class n{constructor(e,i,r){this.renderer=e,this.elm=i,this.document=r,this.clickListenerDisabled=!1,this.click=new gt,this.destroy$=new An}ngOnInit(){this.clickListenerDisabled||this.listen().pipe(Co(this.destroy$)).subscribe(e=>{e.stopPropagation(),this.click.emit(e)})}ngOnDestroy(){this.destroy$.next()}listen(){return new Jt(e=>this.renderer.listen(this.elm.nativeElement,"click",i=>{e.next(i)}))}}return n.\u0275fac=function(e){return new(e||n)($(Mi),$(fi),$(Ki))},n.\u0275dir=en({type:n,selectors:[["","mwlClick",""]],inputs:{clickListenerDisabled:"clickListenerDisabled"},outputs:{click:"mwlClick"}}),n})(),bz=(()=>{class n{constructor(e,i,r){this.host=e,this.ngZone=i,this.renderer=r,this.keydown=new gt,this.keydownListener=null}ngOnInit(){this.ngZone.runOutsideAngular(()=>{this.keydownListener=this.renderer.listen(this.host.nativeElement,"keydown",e=>{(e.keyCode===13||e.which===13||e.key==="Enter")&&(e.preventDefault(),e.stopPropagation(),this.ngZone.run(()=>{this.keydown.emit(e)}))})})}ngOnDestroy(){this.keydownListener!==null&&(this.keydownListener(),this.keydownListener=null)}}return n.\u0275fac=function(e){return new(e||n)($(fi),$(qn),$(Mi))},n.\u0275dir=en({type:n,selectors:[["","mwlKeydownEnter",""]],outputs:{keydown:"mwlKeydownEnter"}}),n})(),_h=(()=>{class n{constructor(e){this.i18nPlural=e}monthCell({day:e,locale:i}){return e.badgeTotal>0?`
        ${tr(e.date,"EEEE MMMM d",i)},
        ${this.i18nPlural.transform(e.badgeTotal,{"=0":"No events","=1":"One event",other:"# events"})},
         click to expand
      `:`${tr(e.date,"EEEE MMMM d",i)}`}openDayEventsLandmark({date:e,locale:i}){return`
      Beginning of expanded view for ${tr(e,"EEEE MMMM dd",i)}
    `}openDayEventsAlert({date:e,locale:i}){return`${tr(e,"EEEE MMMM dd",i)} expanded`}eventDescription({event:e,locale:i}){if(e.allDay===!0)return this.allDayEventDescription({event:e,locale:i});let r=`
      ${tr(e.start,"EEEE MMMM dd",i)},
      ${e.title}, from ${tr(e.start,"hh:mm a",i)}
    `;return e.end?r+` to ${tr(e.end,"hh:mm a",i)}`:r}allDayEventDescription({event:e,locale:i}){let r=`
      ${e.title}, event spans multiple days:
      start time ${tr(e.start,"MMMM dd hh:mm a",i)}
    `;return e.end?r+`, stop time ${tr(e.end,"MMMM d hh:mm a",i)}`:r+", no stop time"}actionButtonLabel({action:e}){return e.a11yLabel}monthCellTabIndex(){return 0}hideMonthCellEvents(){return!0}hideEventTitle(){return!0}hideWeekHourSegment(){return!0}hideDayHourSegment(){return!0}}return n.\u0275fac=function(e){return new(e||n)(qe(tv))},n.\u0275prov=Le({token:n,factory:n.\u0275fac}),n})(),Tx=(()=>{class n{constructor(e,i){this.calendarA11y=e,this.locale=i}transform(e,i){if(e.locale=e.locale||this.locale,typeof this.calendarA11y[i]>"u"){let r=Object.getOwnPropertyNames(Object.getPrototypeOf(_h.prototype)).filter(o=>o!=="constructor");throw new Error(`${i} is not a valid a11y method. Can only be one of ${r.join(", ")}`)}return this.calendarA11y[i](e)}}return n.\u0275fac=function(e){return new(e||n)($(_h,16),$(Ma,16))},n.\u0275pipe=ac({name:"calendarA11y",type:n,pure:!0}),n})(),Pce=(()=>{class n{constructor(){this.trackByActionId=(e,i)=>i.id?i.id:i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-event-actions"]],inputs:{event:"event",customTemplate:"customTemplate"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-event-actions",4,"ngIf"],[1,"cal-event-actions"],["class","cal-event-action","href","javascript:;","tabindex","0","role","button",3,"ngClass","innerHtml","mwlClick","mwlKeydownEnter",4,"ngFor","ngForOf","ngForTrackBy"],["href","javascript:;","tabindex","0","role","button",1,"cal-event-action",3,"mwlClick","mwlKeydownEnter","ngClass","innerHtml"]],template:function(e,i){if(e&1&&Se(0,Ale,1,1,"ng-template",null,0,Xs)(2,Ile,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",ba(2,Ple,i.event,i.trackByActionId))}},dependencies:[Po,gn,Xt,_l,Px,bz,Tx],encapsulation:2}),n})(),td=class{month(t,e){return t.title}monthTooltip(t,e){return t.title}week(t,e){return t.title}weekTooltip(t,e){return t.title}day(t,e){return t.title}dayTooltip(t,e){return t.title}},Cz=(()=>{class n{constructor(e){this.calendarEventTitle=e}transform(e,i,r){return this.calendarEventTitle[i](r,e)}}return n.\u0275fac=function(e){return new(e||n)($(td,16))},n.\u0275pipe=ac({name:"calendarEventTitle",type:n,pure:!0}),n})(),Tce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-event-title"]],inputs:{event:"event",customTemplate:"customTemplate",view:"view"},decls:3,vars:5,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-event-title",3,"innerHTML"]],template:function(e,i){if(e&1&&Se(0,kle,3,10,"ng-template",null,0,Xs)(2,Nle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",ba(2,Rle,i.event,i.view))}},dependencies:[_l,Cz,Tx],encapsulation:2}),n})(),Dce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-tooltip-window"]],inputs:{contents:"contents",placement:"placement",event:"event",customTemplate:"customTemplate"},decls:3,vars:6,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-tooltip",3,"ngClass"],[1,"cal-tooltip-arrow"],[1,"cal-tooltip-inner",3,"innerHtml"]],template:function(e,i){if(e&1&&Se(0,Lle,3,2,"ng-template",null,0,Xs)(2,Ule,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",S1(2,Fle,i.contents,i.placement,i.event))}},dependencies:[Po,_l],encapsulation:2}),n})(),Oce=(()=>{class n{constructor(e,i,r,o,s,a){this.elementRef=e,this.injector=i,this.renderer=r,this.viewContainerRef=s,this.document=a,this.placement="auto",this.delay=null,this.cancelTooltipDelay$=new An,this.tooltipFactory=o.resolveComponentFactory(Dce)}ngOnChanges(e){this.tooltipRef&&(e.contents||e.customTemplate||e.event)&&(this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.tooltipRef.changeDetectorRef.markForCheck(),this.contents||this.hide())}ngOnDestroy(){this.hide()}onMouseOver(){(this.delay===null?Rt("now"):tp(this.delay)).pipe(Co(this.cancelTooltipDelay$)).subscribe(()=>{this.show()})}onMouseOut(){this.hide()}show(){!this.tooltipRef&&this.contents&&(this.tooltipRef=this.viewContainerRef.createComponent(this.tooltipFactory,0,this.injector,[]),this.tooltipRef.instance.contents=this.contents,this.tooltipRef.instance.customTemplate=this.customTemplate,this.tooltipRef.instance.event=this.event,this.appendToBody&&this.document.body.appendChild(this.tooltipRef.location.nativeElement),requestAnimationFrame(()=>{this.positionTooltip()}))}hide(){this.tooltipRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.tooltipRef.hostView)),this.tooltipRef=null),this.cancelTooltipDelay$.next()}positionTooltip(e=[]){this.tooltipRef&&(this.tooltipRef.changeDetectorRef.detectChanges(),this.tooltipRef.instance.placement=JT(this.elementRef.nativeElement,this.tooltipRef.location.nativeElement.children[0],this.placement,this.appendToBody),e.indexOf(this.tooltipRef.instance.placement)===-1&&this.positionTooltip([...e,this.tooltipRef.instance.placement]))}}return n.\u0275fac=function(e){return new(e||n)($(fi),$(Eo),$(Mi),$(oc),$(Ho),$(Ki))},n.\u0275dir=en({type:n,selectors:[["","mwlCalendarTooltip",""]],hostBindings:function(e,i){e&1&&se("mouseenter",function(){return i.onMouseOver()})("mouseleave",function(){return i.onMouseOut()})},inputs:{contents:[0,"mwlCalendarTooltip","contents"],placement:[0,"tooltipPlacement","placement"],customTemplate:[0,"tooltipTemplate","customTemplate"],event:[0,"tooltipEvent","event"],appendToBody:[0,"tooltipAppendToBody","appendToBody"],delay:[0,"tooltipDelay","delay"]},features:[Mr]}),n})(),wD=function(n){return n.Month="month",n.Week="week",n.Day="day",n}(wD||{}),Ace=n=>KV(n,(...e)=>console.warn("angular-calendar",...e));function Mz(n,t){return Math.floor(n.left)<=Math.ceil(t.left)&&Math.floor(t.left)<=Math.ceil(n.right)&&Math.floor(n.left)<=Math.ceil(t.right)&&Math.floor(t.right)<=Math.ceil(n.right)}function Ice(n,t){return Math.floor(n.top)<=Math.ceil(t.top)&&Math.floor(t.top)<=Math.ceil(n.bottom)&&Math.floor(n.top)<=Math.ceil(t.bottom)&&Math.floor(t.bottom)<=Math.ceil(n.bottom)}function Rce(n,t){return Mz(n,t)&&Ice(n,t)}function wz(n,t){return Math.round(n/t)*t}var Ez=(n,t)=>t.date.toISOString(),kce=(n,t)=>t.date.toISOString(),Nce=(n,t)=>t.segments[0].date.toISOString(),Fce=(n,t)=>t.event.id?t.event.id:t.event,Lce=(n,t)=>t.event.id?t.event.id:t.event,Uce=60;function Vce(n,t,e){return(e||Uce)/(n*t)}function vD(n,t,e,i,r){let o=wz(n,i||e),s=Vce(t,e,r);return o*s}function gz(n,t,e){return t.end?t.end:n.addMinutes(t.start,e)}function Qu(n,t,e,i){let r=0,o=0,s=e<0?n.subDays:n.addDays,a=t;for(;o<=Math.abs(e);){a=s(t,r);let l=n.getDay(a);i.indexOf(l)===-1&&o++,r++}return a}function zce(n,t,e){let i=t||n;return e.start<=n&&n<=e.end||e.start<=i&&i<=e.end}function Bce(n,t,e,i){return n.dropData&&n.dropData.event&&(n.dropData.calendarId!==i||n.dropData.event.allDay&&!e||!n.dropData.event.allDay&&e)}function xD(n,t,e,i=[],r){let o=r?n.startOfDay(t):n.startOfWeek(t,{weekStartsOn:e}),s=n.endOfWeek(t,{weekStartsOn:e});for(;i.indexOf(n.getDay(o))>-1&&o<s;)o=n.addDays(o,1);if(r){let a=n.endOfDay(Qu(n,o,r-1,i));return{viewStart:o,viewEnd:a}}else{let a=s;for(;i.indexOf(n.getDay(a))>-1&&a>o;)a=n.subDays(a,1);return{viewStart:o,viewEnd:a}}}function Hce({x:n,y:t}){return Math.abs(n)>1||Math.abs(t)>1}var Bc=class{};var jce=(()=>{class n{constructor(e){this.dateAdapter=e}monthViewColumnHeader({date:e,locale:i}){return tr(e,"EEEE",i)}monthViewDayNumber({date:e,locale:i}){return tr(e,"d",i)}monthViewTitle({date:e,locale:i}){return tr(e,"LLLL y",i)}weekViewColumnHeader({date:e,locale:i}){return tr(e,"EEEE",i)}weekViewColumnSubHeader({date:e,locale:i}){return tr(e,"MMM d",i)}weekViewTitle({date:e,locale:i,weekStartsOn:r,excludeDays:o,daysInWeek:s}){let{viewStart:a,viewEnd:l}=xD(this.dateAdapter,e,r,o,s),u=(f,h)=>tr(f,"MMM d"+(h?", yyyy":""),i);return`${u(a,a.getUTCFullYear()!==l.getUTCFullYear())} - ${u(l,!0)}`}weekViewHour({date:e,locale:i}){return tr(e,"h a",i)}dayViewHour({date:e,locale:i}){return tr(e,"h a",i)}dayViewTitle({date:e,locale:i}){return tr(e,"EEEE, MMMM d, y",i)}}return n.\u0275fac=function(e){return new(e||n)(qe(Bc))},n.\u0275prov=Le({token:n,factory:n.\u0275fac}),n})(),vh=(()=>{class n extends jce{}return n.\u0275fac=(()=>{let t;return function(i){return(t||(t=zr(n)))(i||n)}})(),n.\u0275prov=Le({token:n,factory:n.\u0275fac}),n})(),Sz=(()=>{class n{constructor(e,i){this.dateFormatter=e,this.locale=i}transform(e,i,r=this.locale,o=0,s=[],a){if(typeof this.dateFormatter[i]>"u"){let l=Object.getOwnPropertyNames(Object.getPrototypeOf(vh.prototype)).filter(u=>u!=="constructor");throw new Error(`${i} is not a valid date formatter. Can only be one of ${l.join(", ")}`)}return this.dateFormatter[i]({date:e,locale:r,weekStartsOn:o,excludeDays:s,daysInWeek:a})}}return n.\u0275fac=function(e){return new(e||n)($(vh,16),$(Ma,16))},n.\u0275pipe=ac({name:"calendarDate",type:n,pure:!0}),n})(),Xm=(()=>{class n{constructor(e){this.dateAdapter=e}getMonthView(e){return ZV(this.dateAdapter,e)}getWeekViewHeader(e){return Mx(this.dateAdapter,e)}getWeekView(e){return XV(this.dateAdapter,e)}}return n.\u0275fac=function(e){return new(e||n)(qe(Bc))},n.\u0275prov=Le({token:n,factory:n.\u0275fac}),n})(),iwe=new xt("Moment");var ed=function(n){return n.Drag="drag",n.Drop="drop",n.Resize="resize",n}(ed||{}),Ym=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||td,i.dateFormatter||vh,i.utils||Xm,i.a11y||_h]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({providers:[tv],imports:[vt]}),n})();var rwe=az("collapse",[hD("void",fD({height:0,overflow:"hidden","padding-top":0,"padding-bottom":0})),hD("*",fD({height:"*",overflow:"hidden","padding-top":"*","padding-bottom":"*"})),pD("* => void",dD("150ms ease-out")),pD("void => *",dD("150ms ease-in"))]);var _z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({imports:[vt,qm,Ym,qm]}),n})(),bD=class{constructor(t,e){this.dragContainerElement=t,this.startPosition=e.getBoundingClientRect()}validateDrag({x:t,y:e,snapDraggedEvents:i,dragAlreadyMoved:r,transform:o}){let s=Hce({x:t,y:e})||r;if(i){let a=Object.assign({},this.startPosition,{left:this.startPosition.left+o.x,right:this.startPosition.right+o.x,top:this.startPosition.top+o.y,bottom:this.startPosition.bottom+o.y});if(s){let l=this.dragContainerElement.getBoundingClientRect(),u=l.top<a.top&&a.top<l.bottom,f=l.top<a.bottom&&a.bottom<l.bottom;return Mz(l,a)&&(u||f)}return!1}else return s}},CD=class{constructor(t,e,i){this.resizeContainerElement=t,this.minWidth=e,this.rtl=i}validateResize({rectangle:t,edges:e}){return this.rtl&&(typeof e.left<"u"?(t.left-=e.left,t.right+=e.left):typeof e.right<"u"&&(t.left+=e.right,t.right-=e.right),t.width=t.right-t.left),this.minWidth&&Math.ceil(t.width)<Math.ceil(this.minWidth)?!1:Rce(this.resizeContainerElement.getBoundingClientRect(),t)}},Wce=(()=>{class n{constructor(){this.dayHeaderClicked=new gt,this.eventDropped=new gt,this.dragEnter=new gt,this.trackByWeekDayHeaderDate=Ez}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-week-view-header"]],inputs:{days:"days",locale:"locale",customTemplate:"customTemplate"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventDropped:"eventDropped",dragEnter:"dragEnter"},decls:3,vars:9,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","row",1,"cal-day-headers"],["class","cal-header","mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",3,"cal-past","cal-today","cal-future","cal-weekend","ngClass","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over","tabindex","0","role","columnheader",1,"cal-header",3,"mwlClick","drop","dragEnter","ngClass"]],template:function(e,i){if(e&1&&Se(0,Hle,2,2,"ng-template",null,0,Xs)(2,jle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",bN(2,zle,i.days,i.locale,i.dayHeaderClicked,i.eventDropped,i.dragEnter,i.trackByWeekDayHeaderDate))}},dependencies:[Po,gn,_l,uD,Px,Sz],encapsulation:2}),n})(),Gce=(()=>{class n{constructor(){this.eventClicked=new gt}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-week-view-event"]],inputs:{locale:"locale",weekEvent:"weekEvent",tooltipPlacement:"tooltipPlacement",tooltipAppendToBody:"tooltipAppendToBody",tooltipDisabled:"tooltipDisabled",tooltipDelay:"tooltipDelay",customTemplate:"customTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",tooltipTemplate:"tooltipTemplate",column:"column",daysInWeek:"daysInWeek"},outputs:{eventClicked:"eventClicked"},decls:3,vars:12,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["tabindex","0","role","application",1,"cal-event",3,"mwlClick","mwlKeydownEnter","ngStyle","mwlCalendarTooltip","tooltipPlacement","tooltipEvent","tooltipTemplate","tooltipAppendToBody","tooltipDelay"],[3,"event","customTemplate"],[3,"event","customTemplate","view"]],template:function(e,i){if(e&1&&Se(0,$le,6,27,"ng-template",null,0,Xs)(2,qle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",MN(2,Wle,[i.weekEvent,i.tooltipPlacement,i.eventClicked,i.tooltipTemplate,i.tooltipAppendToBody,i.tooltipDisabled,i.tooltipDelay,i.column,i.daysInWeek]))}},dependencies:[_l,ZN,Pce,Tce,Oce,Px,bz,Cz,Tx],encapsulation:2}),n})(),$ce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-week-view-hour-segment"]],inputs:{segment:"segment",segmentHeight:"segmentHeight",locale:"locale",isTimeLabel:"isTimeLabel",daysInWeek:"daysInWeek",customTemplate:"customTemplate"},decls:3,vars:8,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cal-hour-segment",3,"ngClass"],["class","cal-time",4,"ngIf"],[1,"cal-time"]],template:function(e,i){if(e&1&&Se(0,Zle,3,13,"ng-template",null,0,Xs)(2,Kle,0,0,"ng-template",1),e&2){let r=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||r)("ngTemplateOutletContext",xN(2,Yle,i.segment,i.locale,i.segmentHeight,i.isTimeLabel,i.daysInWeek))}},dependencies:[Po,Xt,_l,Sz,Tx],encapsulation:2}),n})(),qce=(()=>{class n{constructor(e,i){this.dateAdapter=e,this.zone=i,this.columnDate$=new Pi(void 0),this.marker$=this.zone.onStable.pipe(ur(()=>lM(60*1e3)),ou(0),mM(this.columnDate$),Dt(r=>{let o=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayStartHour),this.dayStartMinute),s=this.dateAdapter.setMinutes(this.dateAdapter.setHours(r,this.dayEndHour),this.dayEndMinute),a=this.hourSegments*this.hourSegmentHeight/(this.hourDuration||60),l=new Date;return{isVisible:this.dateAdapter.isSameDay(r,l)&&l>=o&&l<=s,top:this.dateAdapter.differenceInMinutes(l,o)*a}}))}ngOnChanges(e){e.columnDate&&this.columnDate$.next(e.columnDate.currentValue)}}return n.\u0275fac=function(e){return new(e||n)($(Bc),$(qn))},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-week-view-current-time-marker"]],inputs:{columnDate:"columnDate",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",customTemplate:"customTemplate"},features:[Mr],decls:5,vars:14,consts:[["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cal-current-time-marker",3,"top",4,"ngIf"],[1,"cal-current-time-marker"]],template:function(e,i){if(e&1&&(Se(0,ece,1,1,"ng-template",null,0,Xs)(2,tce,0,0,"ng-template",1),Hr(3,"async"),Hr(4,"async")),e&2){let r,o=Ii(1);A(2),X("ngTemplateOutlet",i.customTemplate||o)("ngTemplateOutletContext",CN(6,Jle,i.columnDate,i.dayStartHour,i.dayStartMinute,i.dayEndHour,i.dayEndMinute,(r=P1(3,2,i.marker$))==null?null:r.isVisible,(r=P1(4,4,i.marker$))==null?null:r.top))}},dependencies:[Xt,_l,KN],encapsulation:2}),n})(),Pz=(()=>{class n{constructor(e,i,r,o,s){this.cdr=e,this.utils=i,this.dateAdapter=o,this.element=s,this.events=[],this.excludeDays=[],this.tooltipPlacement="auto",this.tooltipAppendToBody=!0,this.tooltipDelay=null,this.precision="days",this.snapDraggedEvents=!0,this.hourSegments=2,this.hourSegmentHeight=30,this.minimumEventHeight=30,this.dayStartHour=0,this.dayStartMinute=0,this.dayEndHour=23,this.dayEndMinute=59,this.dayHeaderClicked=new gt,this.eventClicked=new gt,this.eventTimesChanged=new gt,this.beforeViewRender=new gt,this.hourSegmentClicked=new gt,this.allDayEventResizes=new Map,this.timeEventResizes=new Map,this.eventDragEnterByType={allDay:0,time:0},this.dragActive=!1,this.dragAlreadyMoved=!1,this.calendarId=Symbol("angular calendar week view id"),this.rtl=!1,this.trackByWeekDayHeaderDate=Ez,this.trackByHourSegment=kce,this.trackByHour=Nce,this.trackByWeekAllDayEvent=Fce,this.trackByWeekTimeEvent=Lce,this.trackByHourColumn=(a,l)=>l.hours[0]?l.hours[0].segments[0].date.toISOString():l,this.trackById=(a,l)=>l.id,this.locale=r}ngOnInit(){this.refresh&&(this.refreshSubscription=this.refresh.subscribe(()=>{this.refreshAll(),this.cdr.markForCheck()}))}ngOnChanges(e){let i=e.viewDate||e.excludeDays||e.weekendDays||e.daysInWeek||e.weekStartsOn,r=e.viewDate||e.dayStartHour||e.dayStartMinute||e.dayEndHour||e.dayEndMinute||e.hourSegments||e.hourDuration||e.weekStartsOn||e.weekendDays||e.excludeDays||e.hourSegmentHeight||e.events||e.daysInWeek||e.minimumEventHeight;i&&this.refreshHeader(),e.events&&Ace(this.events),r&&this.refreshBody(),(i||r)&&this.emitBeforeViewRender()}ngOnDestroy(){this.refreshSubscription&&this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.rtl=typeof window<"u"&&getComputedStyle(this.element.nativeElement).direction==="rtl",this.cdr.detectChanges()}timeEventResizeStarted(e,i,r){this.timeEventResizes.set(i.event,r),this.resizeStarted(e,i)}timeEventResizing(e,i){this.timeEventResizes.set(e.event,i);let r=new Map,o=[...this.events];this.timeEventResizes.forEach((s,a)=>{let l=this.getTimeEventResizedDates(a,s),u=je(je({},a),l);r.set(u,a);let f=o.indexOf(a);o[f]=u}),this.restoreOriginalEvents(o,r,!0)}timeEventResizeEnded(e){this.view=this.getWeekView(this.events);let i=this.timeEventResizes.get(e.event);if(i){this.timeEventResizes.delete(e.event);let r=this.getTimeEventResizedDates(e.event,i);this.eventTimesChanged.emit({newStart:r.start,newEnd:r.end,event:e.event,type:ed.Resize})}}allDayEventResizeStarted(e,i,r){this.allDayEventResizes.set(i,{originalOffset:i.offset,originalSpan:i.span,edge:typeof r.edges.left<"u"?"left":"right"}),this.resizeStarted(e,i,this.getDayColumnWidth(e))}allDayEventResizing(e,i,r){let o=this.allDayEventResizes.get(e),s=this.rtl?-1:1;if(typeof i.edges.left<"u"){let a=Math.round(+i.edges.left/r)*s;e.offset=o.originalOffset+a,e.span=o.originalSpan-a}else if(typeof i.edges.right<"u"){let a=Math.round(+i.edges.right/r)*s;e.span=o.originalSpan+a}}allDayEventResizeEnded(e){let i=this.allDayEventResizes.get(e);if(i){let r=i.edge==="left",o;r?o=e.offset-i.originalOffset:o=e.span-i.originalSpan,e.offset=i.originalOffset,e.span=i.originalSpan;let s=this.getAllDayEventResizedDates(e.event,o,r);this.eventTimesChanged.emit({newStart:s.start,newEnd:s.end,event:e.event,type:ed.Resize}),this.allDayEventResizes.delete(e)}}getDayColumnWidth(e){return Math.floor(e.offsetWidth/this.days.length)}dateDragEnter(e){this.lastDragEnterDate=e}eventDropped(e,i,r){Bce(e,i,r,this.calendarId)&&this.lastDragEnterDate.getTime()===i.getTime()&&(!this.snapDraggedEvents||e.dropData.event!==this.lastDraggedEvent)&&this.eventTimesChanged.emit({type:ed.Drop,event:e.dropData.event,newStart:i,allDay:r}),this.lastDraggedEvent=null}dragEnter(e){this.eventDragEnterByType[e]++}dragLeave(e){this.eventDragEnterByType[e]--}dragStarted(e,i,r,o){this.dayColumnWidth=this.getDayColumnWidth(e);let s=new bD(e,i);this.validateDrag=({x:a,y:l,transform:u})=>{let f=this.allDayEventResizes.size===0&&this.timeEventResizes.size===0&&s.validateDrag({x:a,y:l,snapDraggedEvents:this.snapDraggedEvents,dragAlreadyMoved:this.dragAlreadyMoved,transform:u});if(f&&this.validateEventTimesChanged){let h=this.getDragMovedEventTimes(r,{x:a,y:l},this.dayColumnWidth,o);return this.validateEventTimesChanged({type:ed.Drag,event:r.event,newStart:h.start,newEnd:h.end})}return f},this.dragActive=!0,this.dragAlreadyMoved=!1,this.lastDraggedEvent=null,this.eventDragEnterByType={allDay:0,time:0},!this.snapDraggedEvents&&o&&this.view.hourColumns.forEach(a=>{let l=a.events.find(u=>u.event===r.event&&u!==r);l&&(l.width=0,l.height=0)}),this.cdr.markForCheck()}dragMove(e,i){let r=this.getDragMovedEventTimes(e,i,this.dayColumnWidth,!0),o=e.event,s=je(je({},o),r),a=this.events.map(l=>l===o?s:l);this.restoreOriginalEvents(a,new Map([[s,o]]),this.snapDraggedEvents),this.dragAlreadyMoved=!0}allDayEventDragMove(){this.dragAlreadyMoved=!0}dragEnded(e,i,r,o=!1){this.view=this.getWeekView(this.events),this.dragActive=!1,this.validateDrag=null;let{start:s,end:a}=this.getDragMovedEventTimes(e,i,r,o);(this.snapDraggedEvents||this.eventDragEnterByType[o?"time":"allDay"]>0)&&zce(s,a,this.view.period)&&(this.lastDraggedEvent=e.event,this.eventTimesChanged.emit({newStart:s,newEnd:a,event:e.event,type:ed.Drag,allDay:!o}))}refreshHeader(){this.days=this.utils.getWeekViewHeader(je({viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,weekendDays:this.weekendDays},xD(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}refreshBody(){this.view=this.getWeekView(this.events)}refreshAll(){this.refreshHeader(),this.refreshBody(),this.emitBeforeViewRender()}emitBeforeViewRender(){this.days&&this.view&&this.beforeViewRender.emit(je({header:this.days},this.view))}getWeekView(e){return this.utils.getWeekView(je({events:e,viewDate:this.viewDate,weekStartsOn:this.weekStartsOn,excluded:this.excludeDays,precision:this.precision,absolutePositionedEvents:!0,hourSegments:this.hourSegments,hourDuration:this.hourDuration,dayStart:{hour:this.dayStartHour,minute:this.dayStartMinute},dayEnd:{hour:this.dayEndHour,minute:this.dayEndMinute},segmentHeight:this.hourSegmentHeight,weekendDays:this.weekendDays,minimumEventHeight:this.minimumEventHeight},xD(this.dateAdapter,this.viewDate,this.weekStartsOn,this.excludeDays,this.daysInWeek)))}getDragMovedEventTimes(e,i,r,o){let s=wz(i.x,r)/r*(this.rtl?-1:1),a=o?vD(i.y,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration):0,l=this.dateAdapter.addMinutes(Qu(this.dateAdapter,e.event.start,s,this.excludeDays),a),u;return e.event.end&&(u=this.dateAdapter.addMinutes(Qu(this.dateAdapter,e.event.end,s,this.excludeDays),a)),{start:l,end:u}}restoreOriginalEvents(e,i,r=!0){let o=this.view;r&&(this.view=this.getWeekView(e));let s=e.filter(a=>i.has(a));this.view.hourColumns.forEach((a,l)=>{o.hourColumns[l].hours.forEach((u,f)=>{u.segments.forEach((h,m)=>{a.hours[f].segments[m].cssClass=h.cssClass})}),s.forEach(u=>{let f=i.get(u),h=a.events.find(m=>m.event===(r?u:f));if(h)h.event=f,h.tempEvent=u,r||(h.height=0,h.width=0);else{let m={event:f,left:0,top:0,height:0,width:0,startsBeforeDay:!1,endsAfterDay:!1,tempEvent:u};a.events.push(m)}})}),i.clear()}getTimeEventResizedDates(e,i){let r={start:e.start,end:gz(this.dateAdapter,e,this.minimumEventHeight)},u=e,{end:o}=u,s=Hg(u,["end"]),a={start:this.dateAdapter.addMinutes(r.end,this.minimumEventHeight*-1),end:gz(this.dateAdapter,s,this.minimumEventHeight)},l=this.rtl?-1:1;if(typeof i.edges.left<"u"){let f=Math.round(+i.edges.left/this.dayColumnWidth)*l,h=Qu(this.dateAdapter,r.start,f,this.excludeDays);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.right<"u"){let f=Math.round(+i.edges.right/this.dayColumnWidth)*l,h=Qu(this.dateAdapter,r.end,f,this.excludeDays);h>a.end?r.end=h:r.end=a.end}if(typeof i.edges.top<"u"){let f=vD(i.edges.top,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.start,f);h<a.start?r.start=h:r.start=a.start}else if(typeof i.edges.bottom<"u"){let f=vD(i.edges.bottom,this.hourSegments,this.hourSegmentHeight,this.eventSnapSize,this.hourDuration),h=this.dateAdapter.addMinutes(r.end,f);h>a.end?r.end=h:r.end=a.end}return r}resizeStarted(e,i,r){this.dayColumnWidth=this.getDayColumnWidth(e);let o=new CD(e,r,this.rtl);this.validateResize=({rectangle:s,edges:a})=>{let l=o.validateResize({rectangle:je({},s),edges:a});if(l&&this.validateEventTimesChanged){let u;if(!r)u=this.getTimeEventResizedDates(i.event,{rectangle:s,edges:a});else{let f=this.rtl?-1:1;if(typeof a.left<"u"){let h=Math.round(+a.left/r)*f;u=this.getAllDayEventResizedDates(i.event,h,!this.rtl)}else{let h=Math.round(+a.right/r)*f;u=this.getAllDayEventResizedDates(i.event,h,this.rtl)}}return this.validateEventTimesChanged({type:ed.Resize,event:i.event,newStart:u.start,newEnd:u.end})}return l},this.cdr.markForCheck()}getAllDayEventResizedDates(e,i,r){let o=e.start,s=e.end||e.start;return r?o=Qu(this.dateAdapter,o,i,this.excludeDays):s=Qu(this.dateAdapter,s,i,this.excludeDays),{start:o,end:s}}}return n.\u0275fac=function(e){return new(e||n)($(Zs),$(Xm),$(Ma),$(Bc),$(fi))},n.\u0275cmp=We({type:n,selectors:[["mwl-calendar-week-view"]],inputs:{viewDate:"viewDate",events:"events",excludeDays:"excludeDays",refresh:"refresh",locale:"locale",tooltipPlacement:"tooltipPlacement",tooltipTemplate:"tooltipTemplate",tooltipAppendToBody:"tooltipAppendToBody",tooltipDelay:"tooltipDelay",weekStartsOn:"weekStartsOn",headerTemplate:"headerTemplate",eventTemplate:"eventTemplate",eventTitleTemplate:"eventTitleTemplate",eventActionsTemplate:"eventActionsTemplate",precision:"precision",weekendDays:"weekendDays",snapDraggedEvents:"snapDraggedEvents",hourSegments:"hourSegments",hourDuration:"hourDuration",hourSegmentHeight:"hourSegmentHeight",minimumEventHeight:"minimumEventHeight",dayStartHour:"dayStartHour",dayStartMinute:"dayStartMinute",dayEndHour:"dayEndHour",dayEndMinute:"dayEndMinute",hourSegmentTemplate:"hourSegmentTemplate",eventSnapSize:"eventSnapSize",allDayEventsLabelTemplate:"allDayEventsLabelTemplate",daysInWeek:"daysInWeek",currentTimeMarkerTemplate:"currentTimeMarkerTemplate",validateEventTimesChanged:"validateEventTimesChanged",resizeCursors:"resizeCursors"},outputs:{dayHeaderClicked:"dayHeaderClicked",eventClicked:"eventClicked",eventTimesChanged:"eventTimesChanged",beforeViewRender:"beforeViewRender",hourSegmentClicked:"hourSegmentClicked"},features:[Mr],decls:8,vars:9,consts:[["dayColumns",""],["allDayEventsContainer",""],["eventRowContainer",""],["event",""],["weekEventTemplate",""],["role","grid",1,"cal-week-view"],[3,"dayHeaderClicked","eventDropped","dragEnter","days","locale","customTemplate"],["class","cal-all-day-events","mwlDroppable","",3,"dragEnter","dragLeave",4,"ngIf"],["mwlDroppable","",1,"cal-time-events",3,"dragEnter","dragLeave"],["class","cal-time-label-column",4,"ngIf"],[1,"cal-day-columns"],["class","cal-day-column",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","",1,"cal-all-day-events",3,"dragEnter","dragLeave"],[1,"cal-time-label-column"],[4,"ngTemplateOutlet"],["class","cal-day-column","mwlDroppable","","dragOverClass","cal-drag-over",3,"drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["class","cal-events-row",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragOverClass","cal-drag-over",1,"cal-day-column",3,"drop","dragEnter"],[1,"cal-events-row"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-week","cal-ends-within-week","ngClass","width","marginLeft","marginRight","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","resizeCursors","resizeSnapGrid","validateResize","dropData","dragAxis","dragSnapGrid","validateDrag","touchStartLongPress"],["class","cal-resize-handle cal-resize-handle-before-start","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","daysInWeek"],["class","cal-resize-handle cal-resize-handle-after-end","mwlResizeHandle","",3,"resizeEdges",4,"ngIf"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-before-start",3,"resizeEdges"],["mwlResizeHandle","",1,"cal-resize-handle","cal-resize-handle-after-end",3,"resizeEdges"],["class","cal-hour",3,"cal-hour-odd",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cal-hour"],[3,"height","segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek",4,"ngFor","ngForOf","ngForTrackBy"],[3,"segment","segmentHeight","locale","customTemplate","isTimeLabel","daysInWeek"],[1,"cal-day-column"],[3,"columnDate","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","hourSegments","hourDuration","hourSegmentHeight","customTemplate"],[1,"cal-events-container"],["class","cal-event-container","mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",3,"cal-draggable","cal-starts-within-day","cal-ends-within-day","ngClass","hidden","top","height","left","width","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag","resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd",4,"ngFor","ngForOf","ngForTrackBy"],["mwlResizable","","mwlDraggable","","dragActiveClass","cal-drag-active",1,"cal-event-container",3,"resizeStart","resizing","resizeEnd","dragStart","dragging","dragEnd","ngClass","hidden","resizeCursors","resizeSnapGrid","validateResize","allowNegativeResizes","dropData","dragAxis","dragSnapGrid","touchStartLongPress","ghostDragEnabled","ghostElementTemplate","validateDrag"],[3,"ngTemplateOutlet"],[3,"eventClicked","locale","weekEvent","tooltipPlacement","tooltipTemplate","tooltipAppendToBody","tooltipDisabled","tooltipDelay","customTemplate","eventTitleTemplate","eventActionsTemplate","column","daysInWeek"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"height","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel","mwlClick","drop","dragEnter",4,"ngFor","ngForOf","ngForTrackBy"],["mwlDroppable","","dragActiveClass","cal-drag-active",3,"mwlClick","drop","dragEnter","segment","segmentHeight","locale","customTemplate","daysInWeek","clickListenerDisabled","dragOverClass","isTimeLabel"]],template:function(e,i){if(e&1){let r=rt();g(0,"div",5)(1,"mwl-calendar-week-view-header",6),se("dayHeaderClicked",function(s){return De(r),Oe(i.dayHeaderClicked.emit(s))})("eventDropped",function(s){return De(r),Oe(i.eventDropped({dropData:s},s.newStart,!0))})("dragEnter",function(s){return De(r),Oe(i.dateDragEnter(s.date))}),_(),Se(2,mce,7,5,"div",7),g(3,"div",8),se("dragEnter",function(){return De(r),Oe(i.dragEnter("time"))})("dragLeave",function(){return De(r),Oe(i.dragLeave("time"))}),Se(4,vce,2,2,"div",9),g(5,"div",10,0),Se(7,Sce,5,13,"div",11),_()()()}e&2&&(A(),X("days",i.days)("locale",i.locale)("customTemplate",i.headerTemplate),A(),X("ngIf",i.view.allDayEventRows.length>0),A(2),X("ngIf",i.view.hourColumns.length>0&&i.daysInWeek!==1),A(),So("cal-resize-active",i.timeEventResizes.size>0),A(2),X("ngForOf",i.view.hourColumns)("ngForTrackBy",i.trackByHourColumn))},dependencies:[Po,gn,Xt,_l,gD,mz,sz,uD,Px,Wce,Gce,$ce,qce],encapsulation:2}),n})(),MD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({imports:[vt,_D,qm,Ym,_D,qm]}),n})();var vz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({imports:[vt,Ym,MD]}),n})(),Tz=(()=>{class n{static forRoot(e,i={}){return{ngModule:n,providers:[e,i.eventTitleFormatter||td,i.dateFormatter||vh,i.utils||Xm,i.a11y||_h]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Yi({type:n}),n.\u0275inj=qi({imports:[Ym,_z,MD,vz,Ym,_z,MD,vz]}),n})();var Xce=Math.pow(10,8)*24*60*60*1e3,awe=-Xce,Dx=6048e5,Dz=864e5,yh=6e4,Ox=36e5,Oz=1e3;var Zce=3600;var Az=Zce*24,lwe=Az*7,Kce=Az*365.2425,Jce=Kce/12,cwe=Jce*3,ED=Symbol.for("constructDateFrom");function Kt(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&ED in n?n[ED](t):n instanceof Date?new n.constructor(t):new Date(t)}function it(n,t){return Kt(t||n,n)}function Ua(n,t,e){let i=it(n,e?.in);return isNaN(t)?Kt(e?.in||n,NaN):(t&&i.setDate(i.getDate()+t),i)}function Ax(n,t,e){let i=it(n,e?.in);if(isNaN(t))return Kt(e?.in||n,NaN);if(!t)return i;let r=i.getDate(),o=Kt(e?.in||n,i.getTime());o.setMonth(i.getMonth()+t+1,0);let s=o.getDate();return r>=s?o:(i.setFullYear(o.getFullYear(),o.getMonth(),r),i)}function Ix(n,t,e){return Kt(e?.in||n,+it(n)+t)}function Rx(n,t,e){return Ix(n,t*Ox,e)}var Qce={};function Ts(){return Qce}function eo(n,t){let e=Ts(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=it(n,t?.in),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function la(n,t){return eo(n,Yt(je({},t),{weekStartsOn:1}))}function Iz(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=Kt(e,0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);let o=la(r),s=Kt(e,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);let a=la(s);return e.getTime()>=o.getTime()?i+1:e.getTime()>=a.getTime()?i:i-1}function nd(n){let t=it(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function Hc(n,...t){let e=Kt.bind(null,n||t.find(i=>typeof i=="object"));return t.map(e)}function jc(n,t){let e=it(n,t?.in);return e.setHours(0,0,0,0),e}function Rz(n,t,e){let[i,r]=Hc(e?.in,n,t),o=jc(i),s=jc(r),a=+o-nd(o),l=+s-nd(s);return Math.round((a-l)/Dz)}function kz(n,t){let e=Iz(n,t),i=Kt(t?.in||n,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),la(i)}function Nz(n,t,e){let i=it(n,e?.in);return i.setTime(i.getTime()+t*yh),i}function Fz(n,t,e){return Ix(n,t*1e3,e)}function xh(n,t,e){return Ua(n,t*7,e)}function Lz(n,t){let e,i=t?.in;return n.forEach(r=>{!i&&typeof r=="object"&&(i=Kt.bind(null,r));let o=it(r,i);(!e||e<o||isNaN(+o))&&(e=o)}),Kt(i,e||NaN)}function Uz(n,t,e){let[i,r]=Hc(e?.in,n,t);return+jc(i)==+jc(r)}function Vz(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function zz(n){return!(!Vz(n)&&typeof n!="number"||isNaN(+it(n)))}function Hz(n,t,e){let[i,r]=Hc(e?.in,n,t),o=Bz(i,r),s=Math.abs(Rz(i,r));i.setDate(i.getDate()-o*s);let a=+(Bz(i,r)===-o),l=o*(s-a);return l===0?0:l}function Bz(n,t){let e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function kx(n){return t=>{let i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function Nx(n,t){return+it(n)-+it(t)}function jz(n,t,e){let i=Nx(n,t)/yh;return kx(e?.roundingMethod)(i)}function Wz(n,t){let e=it(n,t?.in);return e.setHours(23,59,59,999),e}function Gz(n,t){let e=it(n,t?.in),i=e.getMonth();return e.setFullYear(e.getFullYear(),i+1,0),e.setHours(23,59,59,999),e}function $z(n,t,e){let i=Nx(n,t)/1e3;return kx(e?.roundingMethod)(i)}function qz(n,t){let e=it(n,t?.in);return e.setDate(1),e.setHours(0,0,0,0),e}function Yz(n,t){let e=Ts(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=it(n,t?.in),o=r.getDay(),s=(o<i?-7:0)+6-(o-i);return r.setDate(r.getDate()+s),r.setHours(23,59,59,999),r}var eue={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xz=(n,t,e)=>{let i,r=eue[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Fx(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var tue={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nue={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iue={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Zz={date:Fx({formats:tue,defaultWidth:"full"}),time:Fx({formats:nue,defaultWidth:"full"}),dateTime:Fx({formats:iue,defaultWidth:"full"})};var rue={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kz=(n,t,e,i)=>rue[n];function bh(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;r=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(t):t;return r[o]}}var oue={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sue={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lue={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},due=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Jz={ordinalNumber:due,era:bh({values:oue,defaultWidth:"wide"}),quarter:bh({values:sue,defaultWidth:"wide",argumentCallback:n=>n-1}),month:bh({values:aue,defaultWidth:"wide"}),day:bh({values:lue,defaultWidth:"wide"}),dayPeriod:bh({values:cue,defaultWidth:"wide",formattingValues:uue,defaultFormattingWidth:"wide"})};function Ch(n){return(t,e={})=>{let i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=t.match(r);if(!o)return null;let s=o[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?hue(a,h=>h.test(s)):fue(a,h=>h.test(s)),u;u=n.valueCallback?n.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;let f=t.slice(s.length);return{value:u,rest:f}}}function fue(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function hue(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function Qz(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let r=i[0],o=t.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=e.valueCallback?e.valueCallback(s):s;let a=t.slice(r.length);return{value:s,rest:a}}}var pue=/^(\d+)(th|st|nd|rd)?/i,mue=/\d+/i,gue={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_ue={any:[/^b/i,/^(a|c)/i]},vue={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yue={any:[/1/i,/2/i,/3/i,/4/i]},xue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cue={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mue={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wue={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Eue={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eB={ordinalNumber:Qz({matchPattern:pue,parsePattern:mue,valueCallback:n=>parseInt(n,10)}),era:Ch({matchPatterns:gue,defaultMatchWidth:"wide",parsePatterns:_ue,defaultParseWidth:"any"}),quarter:Ch({matchPatterns:vue,defaultMatchWidth:"wide",parsePatterns:yue,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Ch({matchPatterns:xue,defaultMatchWidth:"wide",parsePatterns:bue,defaultParseWidth:"any"}),day:Ch({matchPatterns:Cue,defaultMatchWidth:"wide",parsePatterns:Mue,defaultParseWidth:"any"}),dayPeriod:Ch({matchPatterns:wue,defaultMatchWidth:"any",parsePatterns:Eue,defaultParseWidth:"any"})};var SD={code:"en-US",formatDistance:Xz,formatLong:Zz,formatRelative:Kz,localize:Jz,match:eB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Lx(n,t){let e=it(n,t?.in),i=+la(e)-+kz(e);return Math.round(i/Dx)+1}function Ux(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=Ts(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Kt(t?.in||n,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=eo(s,t),l=Kt(t?.in||n,0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);let u=eo(l,t);return+e>=+a?i+1:+e>=+u?i:i-1}function tB(n,t){let e=Ts(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=Ux(n,t),o=Kt(t?.in||n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),eo(o,t)}function nB(n,t){let e=it(n,t?.in),i=+eo(e,t)-+tB(e,t);return Math.round(i/Dx)+1}var iB=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},rB=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Sue=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return iB(n,t);let o;switch(i){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",iB(i,t)).replace("{{time}}",rB(r,t))},PD={p:rB,P:Sue};var Pue=/^D+$/,Tue=/^Y+$/,Due=["D","DD","YY","YYYY"];function oB(n){return Pue.test(n)}function sB(n){return Tue.test(n)}function TD(n,t,e){let i=Oue(n,t,e);if(console.warn(i),Due.includes(n))throw new RangeError(i)}function Oue(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function aB(n,t){return it(n,t?.in).getDate()}function lB(n,t){return it(n,t?.in).getDay()}function cB(n,t){let e=it(n,t?.in),i=e.getFullYear(),r=e.getMonth(),o=Kt(e,0);return o.setFullYear(i,r+1,0),o.setHours(0,0,0,0),o.getDate()}function uB(){return Object.assign({},Ts())}function dB(n,t){return it(n,t?.in).getHours()}function fB(n,t){let e=it(n,t?.in).getDay();return e===0?7:e}function hB(n,t){return it(n,t?.in).getMinutes()}function pB(n,t){return it(n,t?.in).getMonth()}function mB(n,t){return it(n,t?.in).getFullYear()}function gB(n,t){let e=Aue(t)?new t(0):Kt(t,0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}function Aue(n){return typeof n=="function"&&n.prototype?.constructor===n}var Iue=10,Vx=class{subPriority=0;validate(t,e){return!0}},zx=class extends Vx{constructor(t,e,i,r,o){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=r,o&&(this.subPriority=o)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}},Bx=class extends Vx{priority=Iue;subPriority=-1;constructor(t,e){super(),this.context=t||(i=>Kt(e,i))}set(t,e){return e.timestampIsSet?t:Kt(t,gB(t,this.context))}};var Mt=class{run(t,e,i,r){let o=this.parse(t,e,i,r);return o?{setter:new zx(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,e,i){return!0}};var Hx=class extends Mt{priority=140;parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]};var Wn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ds={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function li(n,t){return n&&{value:t(n.value),rest:n.rest}}function Hn(n,t){let e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Os(n,t){let e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};let i=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,s=e[5]?parseInt(e[5],10):0;return{value:i*(r*Ox+o*yh+s*Oz),rest:t.slice(e[0].length)}}function jx(n){return Hn(Wn.anyDigitsSigned,n)}function vn(n,t){switch(n){case 1:return Hn(Wn.singleDigit,t);case 2:return Hn(Wn.twoDigits,t);case 3:return Hn(Wn.threeDigits,t);case 4:return Hn(Wn.fourDigits,t);default:return Hn(new RegExp("^\\d{1,"+n+"}"),t)}}function Mh(n,t){switch(n){case 1:return Hn(Wn.singleDigitSigned,t);case 2:return Hn(Wn.twoDigitsSigned,t);case 3:return Hn(Wn.threeDigitsSigned,t);case 4:return Hn(Wn.fourDigitsSigned,t);default:return Hn(new RegExp("^-?\\d{1,"+n+"}"),t)}}function wh(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Wx(n,t){let e=t>0,i=e?t:1-t,r;if(i<=50)r=n||100;else{let o=i+50,s=Math.trunc(o/100)*100,a=n>=o%100;r=n+s-(a?100:0)}return e?r:1-r}function Gx(n){return n%400===0||n%4===0&&n%100!==0}var $x=class extends Mt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="yy"});switch(e){case"y":return li(vn(4,t),r);case"yo":return li(i.ordinalNumber(t,{unit:"year"}),r);default:return li(vn(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let r=t.getFullYear();if(i.isTwoDigitYear){let s=Wx(i.year,r);return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}let o=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}};var qx=class extends Mt{priority=130;parse(t,e,i){let r=o=>({year:o,isTwoDigitYear:e==="YY"});switch(e){case"Y":return li(vn(4,t),r);case"Yo":return li(i.ordinalNumber(t,{unit:"year"}),r);default:return li(vn(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,r){let o=Ux(t,r);if(i.isTwoDigitYear){let a=Wx(i.year,o);return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),eo(t,r)}let s=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(s,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),eo(t,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]};var Yx=class extends Mt{priority=130;parse(t,e){return e==="R"?Mh(4,t):Mh(e.length,t)}set(t,e,i){let r=Kt(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),la(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]};var Xx=class extends Mt{priority=130;parse(t,e){return e==="u"?Mh(4,t):Mh(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]};var Zx=class extends Mt{priority=120;parse(t,e,i){switch(e){case"Q":case"QQ":return vn(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]};var Kx=class extends Mt{priority=120;parse(t,e,i){switch(e){case"q":case"qq":return vn(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]};var Jx=class extends Mt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"M":return li(Hn(Wn.month,t),r);case"MM":return li(vn(2,t),r);case"Mo":return li(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}};var Qx=class extends Mt{priority=110;parse(t,e,i){let r=o=>o-1;switch(e){case"L":return li(Hn(Wn.month,t),r);case"LL":return li(vn(2,t),r);case"Lo":return li(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]};function _B(n,t,e){let i=it(n,e?.in),r=nB(i,e)-t;return i.setDate(i.getDate()-r*7),it(i,e?.in)}var eb=class extends Mt{priority=100;parse(t,e,i){switch(e){case"w":return Hn(Wn.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return vn(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,r){return eo(_B(t,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]};function vB(n,t,e){let i=it(n,e?.in),r=Lx(i,e)-t;return i.setDate(i.getDate()-r*7),i}var tb=class extends Mt{priority=100;parse(t,e,i){switch(e){case"I":return Hn(Wn.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return vn(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return la(vB(t,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]};var Rue=[31,28,31,30,31,30,31,31,30,31,30,31],kue=[31,29,31,30,31,30,31,31,30,31,30,31],nb=class extends Mt{priority=90;subPriority=1;parse(t,e,i){switch(e){case"d":return Hn(Wn.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return vn(e.length,t)}}validate(t,e){let i=t.getFullYear(),r=Gx(i),o=t.getMonth();return r?e>=1&&e<=kue[o]:e>=1&&e<=Rue[o]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]};var ib=class extends Mt{priority=90;subpriority=1;parse(t,e,i){switch(e){case"D":case"DD":return Hn(Wn.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return vn(e.length,t)}}validate(t,e){let i=t.getFullYear();return Gx(i)?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]};function Eh(n,t,e){let i=Ts(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,o=it(n,e?.in),s=o.getDay(),l=(t%7+7)%7,u=7-r,f=t<0||t>6?t-(s+u)%7:(l+u)%7-(s+u)%7;return Ua(o,f,e)}var rb=class extends Mt{priority=90;parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Eh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]};var ob=class extends Mt{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return li(vn(e.length,t),o);case"eo":return li(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Eh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]};var sb=class extends Mt{priority=90;parse(t,e,i,r){let o=s=>{let a=Math.floor((s-1)/7)*7;return(s+r.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return li(vn(e.length,t),o);case"co":return li(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Eh(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]};function yB(n,t,e){let i=it(n,e?.in),r=fB(i,e),o=t-r;return Ua(i,o,e)}var ab=class extends Mt{priority=90;parse(t,e,i){let r=o=>o===0?7:o;switch(e){case"i":case"ii":return vn(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return li(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return li(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return li(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return li(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return t=yB(t,i),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]};var lb=class extends Mt{priority=80;parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(wh(i),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]};var cb=class extends Mt{priority=80;parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(wh(i),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]};var ub=class extends Mt{priority=80;parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(wh(i),0,0,0),t}incompatibleTokens=["a","b","t","T"]};var db=class extends Mt{priority=70;parse(t,e,i){switch(e){case"h":return Hn(Wn.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return vn(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]};var fb=class extends Mt{priority=70;parse(t,e,i){switch(e){case"H":return Hn(Wn.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return vn(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]};var hb=class extends Mt{priority=70;parse(t,e,i){switch(e){case"K":return Hn(Wn.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return vn(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]};var pb=class extends Mt{priority=70;parse(t,e,i){switch(e){case"k":return Hn(Wn.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return vn(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){let r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]};var mb=class extends Mt{priority=60;parse(t,e,i){switch(e){case"m":return Hn(Wn.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return vn(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}incompatibleTokens=["t","T"]};var gb=class extends Mt{priority=50;parse(t,e,i){switch(e){case"s":return Hn(Wn.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return vn(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}incompatibleTokens=["t","T"]};var _b=class extends Mt{priority=30;parse(t,e){let i=r=>Math.trunc(r*Math.pow(10,-e.length+3));return li(vn(e.length,t),i)}set(t,e,i){return t.setMilliseconds(i),t}incompatibleTokens=["t","T"]};var vb=class extends Mt{priority=10;parse(t,e){switch(e){case"X":return Os(Ds.basicOptionalMinutes,t);case"XX":return Os(Ds.basic,t);case"XXXX":return Os(Ds.basicOptionalSeconds,t);case"XXXXX":return Os(Ds.extendedOptionalSeconds,t);case"XXX":default:return Os(Ds.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Kt(t,t.getTime()-nd(t)-i)}incompatibleTokens=["t","T","x"]};var yb=class extends Mt{priority=10;parse(t,e){switch(e){case"x":return Os(Ds.basicOptionalMinutes,t);case"xx":return Os(Ds.basic,t);case"xxxx":return Os(Ds.basicOptionalSeconds,t);case"xxxxx":return Os(Ds.extendedOptionalSeconds,t);case"xxx":default:return Os(Ds.extended,t)}}set(t,e,i){return e.timestampIsSet?t:Kt(t,t.getTime()-nd(t)-i)}incompatibleTokens=["t","T","X"]};var xb=class extends Mt{priority=40;parse(t){return jx(t)}set(t,e,i){return[Kt(t,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"};var bb=class extends Mt{priority=20;parse(t){return jx(t)}set(t,e,i){return[Kt(t,i),{timestampIsSet:!0}]}incompatibleTokens="*"};var xB={G:new Hx,y:new $x,Y:new qx,R:new Yx,u:new Xx,Q:new Zx,q:new Kx,M:new Jx,L:new Qx,w:new eb,I:new tb,d:new nb,D:new ib,E:new rb,e:new ob,c:new sb,i:new ab,a:new lb,b:new cb,B:new ub,h:new db,H:new fb,K:new hb,k:new pb,m:new mb,s:new gb,S:new _b,X:new vb,x:new yb,t:new xb,T:new bb};var Nue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lue=/^'([^]*?)'?$/,Uue=/''/g,Vue=/\S/,zue=/[a-zA-Z]/;function bB(n,t,e,i){let r=()=>Kt(i?.in||e,NaN),o=uB(),s=i?.locale??o.locale??SD,a=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return n?r():it(e,i?.in);let u={firstWeekContainsDate:a,weekStartsOn:l,locale:s},f=[new Bx(i?.in,e)],h=t.match(Fue).map(x=>{let b=x[0];if(b in PD){let T=PD[b];return T(x,s.formatLong)}return x}).join("").match(Nue),m=[];for(let x of h){!i?.useAdditionalWeekYearTokens&&sB(x)&&TD(x,t,n),!i?.useAdditionalDayOfYearTokens&&oB(x)&&TD(x,t,n);let b=x[0],T=xB[b];if(T){let{incompatibleTokens:E}=T;if(Array.isArray(E)){let L=m.find(z=>E.includes(z.token)||z.token===b);if(L)throw new RangeError(`The format string mustn't contain \`${L.fullToken}\` and \`${x}\` at the same time`)}else if(T.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);m.push({token:b,fullToken:x});let D=T.run(n,x,s.match,u);if(!D)return r();f.push(D.setter),n=D.rest}else{if(b.match(zue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(x==="''"?x="'":b==="'"&&(x=Bue(x)),n.indexOf(x)===0)n=n.slice(x.length);else return r()}}if(n.length>0&&Vue.test(n))return r();let p=f.map(x=>x.priority).sort((x,b)=>b-x).filter((x,b,T)=>T.indexOf(x)===b).map(x=>f.filter(b=>b.priority===x).sort((b,T)=>T.subPriority-b.subPriority)).map(x=>x[0]),y=it(e,i?.in);if(isNaN(+y))return r();let M={};for(let x of p){if(!x.validate(y,u))return r();let b=x.set(y,M,u);Array.isArray(b)?(y=b[0],Object.assign(M,b[1])):y=b}return y}function Bue(n){return n.match(Lue)[1].replace(Uue,"'")}function CB(n,t){let e=it(n,t?.in);return e.setSeconds(0,0),e}function MB(n,t,e){let[i,r]=Hc(e?.in,n,t);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}function DD(n,t){let e=it(n,t?.in);return e.setMilliseconds(0),e}function wB(n,t){return+DD(n)==+DD(t)}function EB(n,t,e){return Ua(n,-t,e)}function SB(n,t,e){let i=it(n,e?.in),r=i.getFullYear(),o=i.getDate(),s=Kt(e?.in||n,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);let a=cB(s);return i.setMonth(t,Math.min(o,a)),i}function PB(n,t,e){let i=it(n,e?.in);return i.setDate(t),i}function TB(n,t,e){let i=it(n,e?.in);return i.setHours(t),i}function DB(n,t,e){let i=it(n,e?.in);return i.setMinutes(t),i}function OB(n,t,e){let i=it(n,e?.in);return isNaN(+i)?Kt(e?.in||n,NaN):(i.setFullYear(t),i)}function AB(n,t,e){return Ax(n,-t,e)}function Cb(n,t,e){return xh(n,-t,e)}function Hue(n){return new Date(n).getTimezoneOffset()}function IB(){return{addDays:Ua,addHours:Rx,addMinutes:Nz,addSeconds:Fz,differenceInDays:Hz,differenceInMinutes:jz,differenceInSeconds:$z,endOfDay:Wz,endOfMonth:Gz,endOfWeek:Yz,getDay:lB,getMonth:pB,isSameDay:Uz,isSameMonth:MB,isSameSecond:wB,max:Lz,setHours:TB,setMinutes:DB,startOfDay:jc,startOfMinute:CB,startOfMonth:qz,startOfWeek:eo,getHours:dB,getMinutes:hB,getTimezoneOffset:Hue}}function RB(){return ep(ep({},IB()),{addWeeks:xh,addMonths:Ax,subDays:EB,subWeeks:Cb,subMonths:AB,getISOWeek:Lx,setDate:PB,setMonth:SB,setYear:OB,getDate:aB,getYear:mB})}function jue(n,t){if(n&1&&(g(0,"div"),me(1,"input",25),C(2),_()),n&2){let e=t.$implicit,i=t.index;A(),X("formControlName",i),A(),_t(" ",e," ")}}function Wue(n,t){if(n&1&&(g(0,"div",26),C(1),_()),n&2){let e=ae(2);A(),_t(" ",e.errorMessage," ")}}function Gue(n,t){if(n&1){let e=rt();g(0,"div",14)(1,"div",15)(2,"h3"),C(3,"Edit Availability Slots"),_(),g(4,"button",9),se("click",function(){De(e);let r=ae();return Oe(r.toggleEditAvailability())}),me(5,"img",16),_(),g(6,"form",17),se("ngSubmit",function(){De(e);let r=ae();return Oe(r.onSubmit())}),g(7,"label",18),C(8,"Date"),_(),g(9,"input",19),se("change",function(r){De(e);let o=ae();return Oe(o.onUpdateDateChange(r))}),_(),g(10,"label",20),C(11,"Select Hours"),_(),g(12,"div",21),Se(13,jue,3,2,"div",22),_(),Se(14,Wue,2,1,"div",23),g(15,"button",24),C(16,"Confirm"),_()()()()}if(n&2){let e=ae();A(6),X("formGroup",e.availabilityForm),A(3),X("value",e.today),A(4),X("ngForOf",e.hours),A(),X("ngIf",e.errorMessage)}}var kB=(()=>{class n{constructor(e,i,r,o){this.staffService=e,this.fb=i,this.router=r,this.route=o,this.staffId="",this.staffName="",this.availabilitySlots=[],this.viewDate=new Date,this.today="",this.view=wD.Week,this.events=[],this.showEditAvailability=!1,this.availabilityType="",this.errorMessage="",this.hours=["08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"],this.addAvailabilitySlots="",this.removeAvailabilitySlots="",this.availabilityForm=this.fb.group({date:[""],selectedHours:this.fb.array(this.hours.map(()=>this.fb.control(!1)))}),this.staffId=this.route.snapshot.paramMap.get("id")||"",this.staffId||alert("Staff ID not found in the route")}ngOnInit(){this.loadStaffDetails()}loadStaffDetails(){this.staffService.getStaffById(this.staffId).subscribe({next:e=>{this.staffName=e.fullName,this.availabilitySlots=e.availabilitySlots,this.populateEvents()},error:e=>{console.error("Error Get Staff to Update",e),e.status===401?alert("Unauthorized page access"):alert("Error loading staff details")}})}populateEvents(){this.events=this.availabilitySlots.map(e=>{let i=bB(e,"dd/MM/yyyy HH:mm:ss",new Date);return zz(i)?{start:i,end:Rx(i,1),title:"Available",color:{primary:"#1e90ff",secondary:"#D1E8FF"}}:null}).filter(e=>e!==null)}initFromUpdate(){let e=new Date;this.today=e.toISOString().split("T")[0],this.availabilityForm.patchValue({date:this.today}),this.onUpdateDateChange({target:{value:this.today}})}previousWeek(){this.viewDate=Cb(this.viewDate,1)}nextWeek(){this.viewDate=xh(this.viewDate,1)}onDateChange(e){this.viewDate=new Date(e.target.value)}toggleEditAvailability(){this.showEditAvailability=!this.showEditAvailability,this.initFromUpdate()}formatDateString(e){let i=new Date(e),r=String(i.getDate()).padStart(2,"0"),o=String(i.getMonth()+1).padStart(2,"0"),s=i.getFullYear();return`${r}/${o}/${s}`}onUpdateDateChange(e){let i=this.formatDateString(e.target.value);this.availabilityForm.setControl("selectedHours",this.fb.array(this.hours.map(()=>this.fb.control(!1)))),this.availabilitySlots.forEach(r=>{let[o,s]=r.split(" ");if(o===i){let a=this.hours.indexOf(s.slice(0,5));a!==-1&&this.availabilityForm.get("selectedHours").at(a).setValue(!0)}})}onSubmit(){if(this.availabilityForm.value.date===""){this.errorMessage="Please select a date";return}let e=this.availabilityForm.value.date,i=this.availabilityForm.value.selectedHours.map((a,l)=>a?this.hours[l]:null).filter(a=>a!==null),r=this.availabilityForm.value.selectedHours.map((a,l)=>a?null:this.hours[l]).filter(a=>a!==null),o=i.map(a=>`${e} ${a}`).join(","),s=r.map(a=>`${e} ${a}`).join(",");if(o===this.addAvailabilitySlots&&s===this.removeAvailabilitySlots){this.errorMessage="No changes detected in availability slots";return}this.addAvailabilitySlots=o,this.removeAvailabilitySlots=s,this.SubmitAvailabilitySlots()}SubmitAvailabilitySlots(){let e={phoneNumber:"",email:"",addAvailabilitySlots:this.addAvailabilitySlots,removeAvailabilitySlots:this.removeAvailabilitySlots,specializationName:""};this.staffService.updateStaff(this.staffId,e).subscribe({next:()=>{console.log("Staff Updated Successfully"),this.errorMessage="",this.loadStaffDetails()},error:i=>{if(console.error("Error Updating staff",i),console.error("Error status",i.status),i.status===400){let r=i.error;this.errorMessage=r.message}else i.status===401?alert("Unauthorized page access"):alert("Updating failed - "+i.error)}})}static{this.\u0275fac=function(i){return new(i||n)($(rr),$(Sa),$(Ct),$(nr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-view-availability"]],standalone:!0,features:[Hi([Xm,_h,vh,td,{provide:Bc,useFactory:RB}]),Ke],decls:25,vars:11,consts:[[1,"view-availability-staff-container"],[1,"screens-container"],[1,"view-availability-staff-screen"],[1,"top"],["type","button",1,"btn-availability",3,"click"],["type","button","routerLink","/search-staffs",1,"btn-back"],[1,"page-body"],[1,"calendar-body"],[1,"calendar-navigation"],["type","button",3,"click"],["type","date","title","Select date","placeholder","Select date",3,"change","value"],[1,"calendar-container"],[3,"viewDate","events","hourSegments","dayStartHour","dayEndHour"],["class","edit-screen",4,"ngIf"],[1,"edit-screen"],[1,"staff-edit"],["src","fechar.png","alt","Close"],[3,"ngSubmit","formGroup"],["for","date"],["type","date","id","date","formControlName","date","required","",3,"change","value"],["for","hours"],["formArrayName","selectedHours"],[4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit"],["type","checkbox","title","Select hour",3,"formControlName"],[1,"error-message"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),se("click",function(){return r.toggleEditAvailability()}),C(6,"Edit Availability Slots"),_(),g(7,"button",5),C(8," Go Back"),_(),g(9,"h2"),C(10,"Availability for Staff"),_(),g(11,"h3"),C(12),_()(),g(13,"div",6)(14,"div",7)(15,"div",8)(16,"button",9),se("click",function(){return r.previousWeek()}),C(17,"Previous Week"),_(),g(18,"input",10),Hr(19,"date"),se("change",function(s){return r.onDateChange(s)}),_(),g(20,"button",9),se("click",function(){return r.nextWeek()}),C(21,"Next Week"),_()(),g(22,"div",11),me(23,"mwl-calendar-week-view",12),_()()()(),Se(24,Gue,17,4,"div",13),_()()),i&2&&(A(12),Je(r.staffName),A(6),X("value",dl(19,8,r.viewDate,"yyyy-MM-dd")),A(5),X("viewDate",r.viewDate)("events",r.events)("hourSegments",1)("dayStartHour",0)("dayEndHour",24),A(),X("ngIf",r.showEditAvailability))},dependencies:[bt,Ht,Ot,rm,Nt,Bt,tn,vt,gn,Xt,Eu,Lt,Tz,Pz,ir,Er,kr,Cf,kt,zt],styles:[".view-availability-staff-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh;font-family:Poppins,sans-serif}.view-availability-staff-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.view-availability-staff-container[_ngcontent-%COMP%]   .view-availability-staff-screen[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:6px;box-shadow:0 0 10px #0000001a;width:1000px;height:90vh;display:flex;flex-direction:column;align-items:center;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{background-color:#c82333}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#28a745;color:#fff;padding:10px 15px;border:none;border-radius:4px;transition:background-color .3s;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   .btn-availability[_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.view-availability-staff-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:10px 0 0}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;flex:1;overflow:hidden}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;background-color:#fff;margin-bottom:10px;display:flex;flex-direction:column;overflow:hidden;flex:1}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:5px 10px;border:1px solid #ddd;border-radius:4px;font-size:16px;cursor:pointer;transition:border-color .3s,box-shadow .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:hover{color:#1e90ff}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]:focus{border-color:#1e90ff;box-shadow:0 0 5px #1e90ff80;outline:none}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::placeholder{color:#aaa}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .calendar-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#1e90ff;color:#fff;border:none;border-radius:3px;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1c86ee}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]     .cal-event-title{display:flex;justify-content:center;align-items:center;height:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-day-column[_ngcontent-%COMP%]{min-height:100px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .mwl-calendar-week-view[_ngcontent-%COMP%]   .cal-hour-segment[_ngcontent-%COMP%]{height:50px}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .page-body[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{color:green;margin-top:10px;text-align:center;font-size:medium}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]{padding:20px;width:300px;height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]{width:100%}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;cursor:pointer}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;font-weight:700}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:4px;margin-bottom:1rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:1rem;text-align:center}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#28a745;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#218838}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]{display:flex;flex-direction:column}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.view-availability-staff-container[_ngcontent-%COMP%]   .edit-screen[_ngcontent-%COMP%]   .staff-edit[_ngcontent-%COMP%]   .selectedHours[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem}"]})}}return n})();var NB=n=>({error:n});function $ue(n,t){if(n&1&&(g(0,"div",13),C(1),_()),n&2){let e=ae(2);A(),_t(" ",e.errorMessage," ")}}function que(n,t){if(n&1){let e=rt();g(0,"form",5),se("ngSubmit",function(){De(e);let r=ae();return Oe(r.activateUser())}),g(1,"div",6)(2,"label",7),C(3,"New Password"),_(),g(4,"input",8),Xe("ngModelChange",function(r){De(e);let o=ae();return Ze(o.newPassword,r)||(o.newPassword=r),Oe(r)}),_(),g(5,"label",9),C(6,"Confirm Password"),_(),g(7,"input",10),Xe("ngModelChange",function(r){De(e);let o=ae();return Ze(o.confirmPassword,r)||(o.confirmPassword=r),Oe(r)}),_()(),Se(8,$ue,2,1,"div",11),g(9,"button",12),C(10,"Activate"),_()()}if(n&2){let e=ae();A(4),Ye("ngModel",e.newPassword),X("ngClass",ri(5,NB,e.newPasswordError)),A(3),Ye("ngModel",e.confirmPassword),X("ngClass",ri(7,NB,e.confirmPasswordError)),A(),X("ngIf",e.errorMessage)}}function Yue(n,t){if(n&1){let e=rt();g(0,"div",14),me(1,"img",15),g(2,"p"),C(3,"User activated successfully!"),_(),g(4,"button",16),se("click",function(){De(e);let r=ae();return Oe(r.goToHome())}),C(5,"Go to Home"),_()()}}var FB=(()=>{class n{constructor(e,i,r){this.staffService=e,this.router=i,this.route=r,this.token="",this.newPassword="",this.confirmPassword="",this.errorMessage="",this.activationSuccessful=!1,this.newPasswordError=!1,this.confirmPasswordError=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.token=e.token||""})}activateUser(){if(this.newPasswordError=!this.newPassword.trim(),this.confirmPasswordError=!this.confirmPassword.trim(),!(this.newPasswordError||this.confirmPasswordError)){if(this.token=this.token.trim(),this.newPassword=this.newPassword.trim(),this.confirmPassword=this.confirmPassword.trim(),this.newPassword!==this.confirmPassword){this.errorMessage="Passwords do not match.";return}this.staffService.activateUser(this.token,this.newPassword).subscribe({next:e=>{console.log("User activated",e),this.errorMessage="",this.activationSuccessful=!0},error:e=>{if(console.error("Error activating user",e),e.status===400){let i=e.error;this.errorMessage=i.message}else e.status===401?alert("Unauthorized page access"):alert("Activation failed - "+e.error)}})}}goToHome(){this.router.navigate(["/"])}static{this.\u0275fac=function(i){return new(i||n)($(rr),$(Ct),$(nr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-active-staff"]],standalone:!0,features:[Ke],decls:7,vars:2,consts:[[1,"activate-user-container"],[1,"activate-user-middle"],[1,"top"],["class","info-container",3,"ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"info-container",3,"ngSubmit"],[1,"form-group"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","placeholder","Enter new password","required","",3,"ngModelChange","ngModel","ngClass"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm password","required","",3,"ngModelChange","ngModel","ngClass"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-submit"],[1,"error-message"],[1,"success-message"],["src","success.jpg","alt","Success"],["type","button",1,"btn","btn-home",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),C(4,"Activate User"),_()(),Se(5,que,11,9,"form",3)(6,Yue,6,0,"div",4),_()()),i&2&&(A(5),X("ngIf",!r.activationSuccessful),A(),X("ngIf",r.activationSuccessful))},dependencies:[vt,Po,Xt,bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:[".activate-user-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.activate-user-container[_ngcontent-%COMP%]   .activate-user-middle[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:500px;padding:2rem;border-radius:6px;box-shadow:0 0 10px #0000001a;display:flex;flex-direction:column;align-items:center;font-family:Poppins,sans-serif}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1.5rem}.activate-user-container[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin:0}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.activate-user-container[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border:2px solid red}.activate-user-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center;font-size:small}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:10px}.activate-user-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:green;margin-bottom:20px}.activate-user-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem;margin-top:1.5rem;padding:10px 20px;border-radius:50px;font-weight:700;text-align:center;cursor:pointer;transition:background-color .5s;font-size:1.2rem}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]{background-color:#153e4c;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-submit[_ngcontent-%COMP%]:hover{color:#153e4c;background-color:#fff;border:2px solid #153e4c}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.activate-user-container[_ngcontent-%COMP%]   button.btn-home[_ngcontent-%COMP%]:hover{background-color:#218838;color:#fff}"]})}}return n})();var Va=(()=>{class n{constructor(e,i){this.loginService=e,this.router=i}canActivate(e,i){if(typeof window<"u"&&typeof localStorage<"u"){let r=localStorage.getItem("token");if((r?this.loginService.getRoleFromToken(r):null)==="Doctor")return!0}return this.router.navigate(["/login"]),!1}static{this.\u0275fac=function(i){return new(i||n)(qe(xc),qe(Ct))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var LB=(()=>{class n{constructor(e){this.panelService=e}ngOnInit(){this.panelService.setPanelId("panel-doctor")}static{this.\u0275fac=function(i){return new(i||n)($(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-doctor-panel"]],standalone:!0,features:[Ke],decls:16,vars:0,consts:[[1,"panel-container"],[1,"panel-content"],[1,"top-left-corner"],["routerLink","/hospital3d","routerLinkActive","active",1,"open-3d-button"],[1,"header"],[1,"stats"],["routerLink","/medical-history-manager","routerLinkActive","active",1,"box","box1"],["routerLink","/appointment-manager","routerLinkActive","active",1,"box","box2"],["routerLink","/operation-requests","routerLinkActive","active",1,"box","box3"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Open 3D Visualization "),_()(),g(6,"div",4)(7,"h1"),C(8,"Doctor Panel"),_()(),g(9,"div",5)(10,"button",6),C(11," Manage Medical Histories "),_(),g(12,"button",7),C(13," Manage Appointments "),_(),g(14,"button",8),C(15," Manage Operation Requests "),_()()()())},dependencies:[Lt,kt,zt,_s],styles:['@charset "UTF-8";.panel-container[_ngcontent-%COMP%]{display:flex;margin-left:85px;height:100vh;background-color:#161a2d;font-family:Poppins,sans-serif;position:relative}.panel-content[_ngcontent-%COMP%]{flex:1;padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:250px;height:100vh;background-color:#1e223a;z-index:10;box-shadow:2px 0 8px #0003}.top-left-corner[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:0}.header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin:20px 0;padding:10px;border-bottom:1px solid #4a4a4a;color:#fff}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;color:#fff;margin:0}.open-3d-button[_ngcontent-%COMP%]{background-color:#1e223a;color:#fff;border:3px solid #4a4a4a;padding:10px 20px;font-size:1em;font-weight:700;border-radius:10px;cursor:pointer;transition:background-color .3s ease,transform .2s ease,border-color .3s ease;box-shadow:0 4px 8px #0000001a;margin-bottom:20px}.open-3d-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#92a8d1;transform:scale(1.05)}.open-3d-button[_ngcontent-%COMP%]:active{background-color:#004085;transform:scale(1)}.stats[_ngcontent-%COMP%]{display:grid;grid-template-areas:"box1 box2" "box3 box3";gap:10px;flex:1;margin:20px;width:100%;height:100%}.box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:10px;color:#fff;font-size:1.2em;font-weight:700;box-shadow:0 4px 8px #0000001a;width:100%;height:100%;padding:15px;border:3px solid #4a4a4a;background-color:#1e223a;transition:border-color .3s ease,transform .2s ease}.box[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.box1[_ngcontent-%COMP%]{grid-area:box1}.box1[_ngcontent-%COMP%]:hover{border-color:#ff6f61}.box2[_ngcontent-%COMP%]{grid-area:box2}.box2[_ngcontent-%COMP%]:hover{border-color:#6b5b95}.box3[_ngcontent-%COMP%]{grid-area:box3}.box3[_ngcontent-%COMP%]:hover{border-color:#e70a0a}@media (max-width: 768px){.panel-content[_ngcontent-%COMP%]{margin-left:0;padding:10px}.header[_ngcontent-%COMP%]{text-align:center;font-size:1.5em}.stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.open-3d-button[_ngcontent-%COMP%]{font-size:.9em;padding:8px 15px}}']})}}return n})();var As=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://localhost:5001/api"}getOperationTypes(){return this.http.get(`${this.apiUrl}/OperationType`)}createOperationRequest(e){return console.log(e),this.http.post(`${this.apiUrl}/OperationRequest`,e).pipe(nn(i=>(console.error("Error creating operation request:",i),En(i))))}editOperationRequest(e,i){return console.log(e),this.http.put(`${this.apiUrl}/OperationRequest/${e}`,i,{responseType:"json"}).pipe(nn(r=>(console.error("Error editing operation request:",r),En(r))))}getOperationRequests(){return this.http.get(`${this.apiUrl}/operationRequest`).pipe(nn(e=>(console.error("Error fetching operation requests:",e),En(()=>new Error("Failed to fetch operation requests")))))}deleteOperationRequest(e,i){return this.http.delete(`${this.apiUrl}/OperationRequest/${e}?doctorLicenseNumber=${i}`,{observe:"response"}).pipe(nn(r=>(console.error("Error deleting operation request:",r),En(r))))}getOperationRequestsWithAdvancedFilter(e,i,r,o,s,a){let l=new URLSearchParams({operationRequest:e||"",doctorLicenseNumber:i||"",operationType:r||"",deadlineDate:o||"",patientMedicalRecordNumber:s||"",priority:a||""});return this.http.get(`${this.apiUrl}/OperationRequest?${l.toString()}`)}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xue=n=>["/update-operation-request",n],Zue=n=>["/create-appointment",n],Kue=n=>["/view-appointment-details",n];function Jue(n,t){if(n&1){let e=rt();bu(0),g(1,"a",12),C(2,"Edit"),_(),g(3,"a",13),se("click",function(){De(e);let r=ae().$implicit,o=ae();return Oe(o.deleteOperationRequest(r.id,r.doctorLicenseNumber))}),C(4,"Delete"),_(),g(5,"a",14),C(6,"Create Appointment"),_(),Cu()}if(n&2){let e=ae().$implicit;A(),X("routerLink",ri(2,Xue,e.id)),A(4),X("routerLink",ri(4,Zue,e.id))}}function Que(n,t){if(n&1&&(g(0,"a",14),C(1,"View Appointment Details"),_()),n&2){let e=ae().$implicit;X("routerLink",ri(1,Kue,e.id))}}function ede(n,t){if(n&1&&(g(0,"tr")(1,"td"),C(2),_(),g(3,"td"),C(4),_(),g(5,"td"),C(6),_(),g(7,"td"),C(8),_(),g(9,"td"),C(10),_(),g(11,"td"),C(12),_(),g(13,"td"),Se(14,Jue,7,6,"ng-container",11)(15,Que,2,3,"ng-template",null,0,Xs),_()()),n&2){let e=t.$implicit,i=t.index,r=Ii(16),o=ae();A(2),Je(i+1),A(2),Je(e.patientName),A(2),Je(e.doctorLicenseNumber),A(2),Je(e.operationType),A(2),Je(e.deadlineDate),A(2),Je(e.priority),A(2),X("ngIf",o.currentView==="Pending")("ngIfElse",r)}}var UB=(()=>{class n{constructor(e,i,r){this.staffService=e,this.panelService=i,this.operationRequestService=r,this.operationRequests=[],this.operationTypes=[],this.searchTerm="",this.patients=[],this.email="",this.doctors=[],this.staffProfiles=[],this.doctorLicenseNumber="",this.currentView="Pending"}ngOnInit(){this.loadStaffProfiles(),this.panelService.setPanelId("panel-doctor"),this.fetchOperationRequests()}toggleView(){this.currentView=this.currentView==="Pending"?"Accepted":"Pending",this.fetchOperationRequests()}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.doctorLicenseNumber===this.doctorLicenseNumber&&i.status===this.currentView),console.log("Filtered operation requests:",this.operationRequests)},e=>{console.error("Error fetching operation requests",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=Pa(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&(this.doctorLicenseNumber=this.doctors[0].licenseNumber,console.log("Doctor license number:",this.doctorLicenseNumber),this.fetchOperationRequests())}console.log("Doctors:",this.doctors)},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}deleteOperationRequest(e,i){window.confirm(`Are you sure you want to delete the operation request: ${e}?`)&&this.operationRequestService.deleteOperationRequest(e,i).subscribe(()=>{alert("Operation request deleted successfully")},o=>{console.error("Error deleting operation Request:",o)})}viewOperationRequestDetails(e){console.log(`Viewing details for operationRequest ${e}`),this.operationRequestService.getOperationRequestsWithAdvancedFilter().subscribe(i=>{this.selectedOperationRequest=e[0],console.log("Operation request fetched:",i)},i=>{console.error("Error fetching operation request",i)})}searchOperationRequests(){this.searchTerm?this.operationRequests=this.operationRequests.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())):this.fetchOperationRequests()}static{this.\u0275fac=function(i){return new(i||n)($(rr),$(Rn),$(As))}}static{this.\u0275cmp=We({type:n,selectors:[["app-operation-requests"]],standalone:!0,features:[Ke],decls:31,vars:2,consts:[["scheduledActions",""],[1,"manage-container"],[1,"screens-container"],[1,"screen"],["routerLink","/create-operation-request",1,"btn","btn-create"],[1,"btn","btn-toggle",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-delete",3,"click"],[1,"btn","btn-view",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",1),me(1,"app-sidebar"),g(2,"div",2)(3,"div",3)(4,"button",4),C(5," Create Operation Request "),_(),g(6,"button",5),se("click",function(){return r.toggleView()}),C(7),_(),g(8,"h2",6),C(9,"Operation Request Manager"),_(),g(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th"),C(16,"Operation Request"),_(),g(17,"th"),C(18,"Patient"),_(),g(19,"th"),C(20,"Doctor"),_(),g(21,"th"),C(22,"Operation Type"),_(),g(23,"th"),C(24,"Deadline"),_(),g(25,"th"),C(26,"Priority"),_(),g(27,"th"),C(28,"Actions"),_()()(),g(29,"tbody"),Se(30,ede,17,8,"tr",10),_()()()()()()()),i&2&&(A(7),_t(" ",r.currentView==="Pending"?"Show Accepted Requests":"Show Pending Requests"," "),A(23),X("ngForOf",r.operationRequests))},dependencies:[vt,gn,Xt,kt,zt,Lt,bt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;height:90vh;background-color:#f9f9f9;width:1500px;max-width:2000px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;background-color:#ffc107;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-toggle[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:150%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var tde=()=>["/operation-requests"];function nde(n,t){n&1&&(g(0,"div")(1,"small",23),C(2,"Deadline date is required."),_()())}function ide(n,t){n&1&&(g(0,"div")(1,"small",23),C(2,"Priority is required."),_()())}function rde(n,t){if(n&1&&(g(0,"option",24),C(1),_()),n&2){let e=t.$implicit;X("value",e.medicalRecordNumber),A(),E1(" ",e.medicalRecordNumber," - ",e.fullName," ")}}function ode(n,t){n&1&&(g(0,"div")(1,"small",23),C(2,"Patient selection is required."),_()())}function sde(n,t){if(n&1&&(g(0,"option"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.name," ")}}function ade(n,t){n&1&&(g(0,"div")(1,"small",23),C(2,"Operation type selection is required."),_()())}var VB=(()=>{class n{constructor(e,i,r,o,s,a,l){this.fb=e,this.operationRequestService=i,this.router=r,this.patientService=o,this.operationTypeService=s,this.staffService=a,this.panelService=l,this.patients=[],this.operationTypes=[],this.doctors=[],this.staffProfiles=[],this.email="",this.operationRequestForm=this.fb.group({deadlineDate:["",qt.required],priority:["",qt.required],patientMedicalRecordNumber:["",qt.required],doctorLicenseNumber:[""],operationType:["",qt.required]})}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.operationRequestForm=this.fb.group({deadlineDate:["",qt.required],priority:["",qt.required],patientMedicalRecordNumber:["",qt.required],doctorLicenseNumber:[""],operationType:["",qt.required]}),this.fetchPatients(),this.loadStaffProfiles()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{let i=this.doctors.length>0?this.doctors[0].specializationId:null;i?(e.forEach(r=>{r.specializations.forEach(o=>{console.log("Operation type specialization ID:",o.id.value)})}),this.operationTypes=e.filter(r=>r.specializations.some(o=>o.id.value===i))):this.operationTypes=e,console.log("Filtered operation types:",this.operationTypes)},e=>{console.error("Error fetching operation types",e)})}loadStaffProfiles(){this.staffService.getAllStaffs().subscribe({next:e=>{console.log(`Data staff profiles:
`,e),this.staffProfiles=e;let i=localStorage.getItem("token");if(i){console.log("Token:",i);let r=Pa(i);console.log("Decoded Token:",r),this.email=r["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],console.log("Email:",this.email),this.doctors=this.staffProfiles.filter(o=>o.email===this.email),this.doctors.length>0&&this.operationRequestForm.patchValue({doctorLicenseNumber:this.doctors[0].licenseNumber})}console.log("Doctors:",this.doctors),this.fetchOperationTypes()},error:e=>{console.error("Error loading staff profiles",e),this.staffProfiles=[],e.status===401?alert("Unauthorized page access"):alert("Error loading staff profiles")}})}onSubmit(){this.operationRequestForm.valid?this.operationRequestService.createOperationRequest(this.operationRequestForm.value).subscribe(e=>{alert("Operation requested successfully"),this.router.navigate(["/operation-requests"])},e=>{console.error("Error requesting operation",e),alert("There was an error requesting the operation. Please try again.")}):alert("Please fill in all required fields.")}static{this.\u0275fac=function(i){return new(i||n)($(Sa),$(As),$(Ct),$(Ps),$(ys),$(rr),$(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-operation-request"]],standalone:!0,features:[Ke],decls:45,vars:10,consts:[[1,"operationRequest-container"],[1,"form-and-table-container"],[1,"form-container"],[1,"operation-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","deadlineDate"],["type","date","id","deadlineDate","formControlName","deadlineDate","placeholder","YYYY-MM-DD"],[4,"ngIf"],["for","priority"],["id","priority","formControlName","priority"],["value","","disabled","","selected",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["for","patientMedicalRecordNumber"],["id","patientMedicalRecordNumber","formControlName","patientMedicalRecordNumber"],[3,"value",4,"ngFor","ngForOf"],["for","operationType"],["id","operationType","formControlName","operationType"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create",3,"disabled"],[1,"btn","btn-back",3,"routerLink"],[1,"error"],[3,"value"]],template:function(i,r){if(i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),C(5,"Create Operation Request"),_(),g(6,"form",4),se("ngSubmit",function(){return r.onSubmit()}),g(7,"div",5)(8,"label",6),C(9,"Deadline Date:"),_(),me(10,"input",7),Se(11,nde,3,0,"div",8),_(),g(12,"div",5)(13,"label",9),C(14,"Priority:"),_(),g(15,"select",10)(16,"option",11),C(17,"Select priority"),_(),g(18,"option",12),C(19,"Elective Surgery"),_(),g(20,"option",13),C(21,"Urgent Surgery"),_(),g(22,"option",14),C(23,"Emergency Surgery"),_()(),Se(24,ide,3,0,"div",8),_(),g(25,"div",5)(26,"label",15),C(27,"Select Patient:"),_(),g(28,"select",16)(29,"option",11),C(30,"Select patient"),_(),Se(31,rde,2,3,"option",17),_(),Se(32,ode,3,0,"div",8),_(),g(33,"div",5)(34,"label",18),C(35,"Select Operation Type:"),_(),g(36,"select",19)(37,"option",11),C(38,"Select operation type"),_(),Se(39,sde,2,1,"option",20),_(),Se(40,ade,3,0,"div",8),_(),g(41,"button",21),C(42," Create Request "),_(),g(43,"a",22),C(44,"Back"),_()()()()()),i&2){let o,s,a,l;A(6),X("formGroup",r.operationRequestForm),A(5),X("ngIf",((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.invalid)&&((o=r.operationRequestForm.get("deadlineDate"))==null?null:o.touched)),A(13),X("ngIf",((s=r.operationRequestForm.get("priority"))==null?null:s.invalid)&&((s=r.operationRequestForm.get("priority"))==null?null:s.touched)),A(7),X("ngForOf",r.patients),A(),X("ngIf",((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.invalid)&&((a=r.operationRequestForm.get("patientMedicalRecordNumber"))==null?null:a.touched)),A(7),X("ngForOf",r.operationTypes),A(),X("ngIf",((l=r.operationRequestForm.get("operationType"))==null?null:l.invalid)&&((l=r.operationRequestForm.get("operationType"))==null?null:l.touched)),A(),X("disabled",r.operationRequestForm.invalid),A(2),X("routerLink",ji(9,tde))}},dependencies:[vt,gn,Xt,ir,Ht,Ri,ki,Ot,Wi,Nt,Bt,Er,kr,kt,zt,Lt],styles:[".operationRequest-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box;padding:20px}.operationRequest-container[_ngcontent-%COMP%]   .form-and-table-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{padding:30px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:600px;background-color:#fff;border:1px solid #e0e0e0;border-radius:12px;box-shadow:0 4px 20px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .operation-title[_ngcontent-%COMP%]{margin-bottom:25px;font-size:24px;font-weight:600;color:#333;text-align:center}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#555;font-size:14px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #cccccc;border-radius:6px;padding:12px;font-size:16px;color:#555;box-sizing:border-box;transition:border-color .3s,box-shadow .3s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80;outline:none}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:13px;margin-top:5px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px;padding:12px 24px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background-color .3s,transform .2s}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;margin-left:135px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;position:absolute;top:10px;right:10px}.operationRequest-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var zB=(()=>{class n{constructor(e,i,r){this.operationRequestService=e,this.router=i,this.panelService=r,this.existingOperationRequest={priority:"",deadlineDate:""}}ngOnInit(){this.panelService.setPanelId("panel-doctor");let e=this.extractOperationRequestFromUrl();this.getOperationRequest(e)}getOperationRequest(e){this.operationRequestService.getOperationRequests().subscribe(i=>{console.log("Operation requests fetched:",i);let r=i.find(o=>o.id===e);r?(this.existingOperationRequest=Yt(je({},r),{deadlineDate:this.formatDate(r.deadlineDate)}),console.log("Operation request fetched:",r)):console.error("Operation request not found with id:",e)},i=>{console.error("Error fetching operation request",i)})}updateOperationRequest(e){e.preventDefault();let i=new Date;if(new Date(this.existingOperationRequest.deadlineDate)<=i){alert("The deadline date must be higher than today.");return}let o=this.extractOperationRequestFromUrl();console.log("Updating operation request:",o),this.operationRequestService.editOperationRequest(o,this.existingOperationRequest).subscribe(s=>{console.log("Operation request updated successfully:",s),alert("Operation request updated successfully!"),this.router.navigate(["/manage-patients"])},s=>{console.error("Error updating operation request:",s),alert("Error updating operation request: "+JSON.stringify(s))})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/update-operation-request\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Operation Request not found in URL.")}formatDate(e){let[i,r,o]=e.split("/");return`${o}-${r}-${i}`}clearForm(){this.existingOperationRequest={priority:"",deadlineDate:""}}static{this.\u0275fac=function(i){return new(i||n)($(As),$(Ct),$(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-operation-request"]],standalone:!0,features:[Ke],decls:24,vars:2,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","type","button",1,"btn","btn-back"],[1,"update-title"],[1,"content-container"],[1,"update-form",3,"submit"],["name","priority","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","ElectiveSurgery"],["value","UrgentSurgery"],["value","EmergencySurgery"],["type","date","placeholder","Deadline Date","name","deadlineDate","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Go Back "),_(),g(6,"h2",4),C(7," Update OperationRequest "),_(),g(8,"div",5)(9,"form",6),se("submit",function(s){return r.updateOperationRequest(s)}),g(10,"select",7),Xe("ngModelChange",function(s){return Ze(r.existingOperationRequest.priority,s)||(r.existingOperationRequest.priority=s),s}),g(11,"option",8),C(12,"Select Priority"),_(),g(13,"option",9),C(14,"Elective Surgery"),_(),g(15,"option",10),C(16,"Urgent Surgery"),_(),g(17,"option",11),C(18,"Emergency Surgery"),_()(),g(19,"input",12),Xe("ngModelChange",function(s){return Ze(r.existingOperationRequest.deadlineDate,s)||(r.existingOperationRequest.deadlineDate=s),s}),_(),g(20,"button",13),C(21," Update OperationRequest "),_(),g(22,"button",14),se("click",function(){return r.clearForm()}),C(23," Clear Form "),_()()()()()()),i&2&&(A(10),Ye("ngModel",r.existingOperationRequest.priority),A(9),Ye("ngModel",r.existingOperationRequest.deadlineDate))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,tn,hn,Nn,Lt,kt,zt,vt],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:900px;height:35;background-color:#f9f9f9;max-width:900px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:260px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#e0a800}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:.5rem 1rem;cursor:pointer;text-decoration:none;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:33.33%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;width:80%;max-width:600px;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;position:absolute;top:10px;right:10px;font-size:28px;font-weight:700}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Ph=(()=>{class n{constructor(e){this.http=e,this.url="http://localhost:4000/api/specializations"}getSpecializations(){return this.http.get(this.url)}createSpecialization(e){return this.http.post(`${this.url}/create`,e)}updateSpecialization(e,i){return this.http.put(`${this.url}/update/${e}`,i)}deleteSpecialization(e){return this.http.delete(`${this.url}/delete/${e}`)}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lde(n,t){n&1&&(g(0,"small",8),C(1," Specialization Type is required and must be between 3 and 50 characters. "),_())}var Zm=(()=>{class n{constructor(e){this.specializationService=e,this.specialization={specializationType:""},this.specializationCreated=new gt}onSubmit(){this.specializationService.createSpecialization(this.specialization).subscribe({next:()=>{alert("Specialization created successfully!"),this.specializationCreated.emit()},error:e=>{console.error("Error creating specialization:",e),alert("Failed to create specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Ph))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-specialization"]],outputs:{specializationCreated:"specializationCreated"},standalone:!0,features:[Ke],decls:15,vars:3,consts:[["specializationForm","ngForm"],[1,"create-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","3","maxlength","50","aria-label","Specialization Type",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"]],template:function(i,r){if(i&1){let o=rt();g(0,"div",1)(1,"h2"),C(2,"Create Specialization"),_(),g(3,"form",2,0),se("ngSubmit",function(){return De(o),Oe(r.onSubmit())}),g(5,"fieldset")(6,"legend"),C(7,"Specialization Details"),_(),g(8,"div",3)(9,"label",4),C(10,"Specialization Type"),_(),g(11,"input",5),Xe("ngModelChange",function(a){return De(o),Ze(r.specialization.specializationType,a)||(r.specialization.specializationType=a),Oe(a)}),_(),Se(12,lde,2,0,"small",6),_(),g(13,"button",7),C(14," Submit "),_()()()()}if(i&2){let o=Ii(4);A(11),Ye("ngModel",r.specialization.specializationType),A(),X("ngIf",(o.form.controls.specializationType==null?null:o.form.controls.specializationType.invalid)&&(o.form.controls.specializationType==null?null:o.form.controls.specializationType.touched)),A(),X("disabled",!o.form.valid)}},dependencies:[bt,Ht,Ot,Nt,Bt,tn,sm,am,hn,Nn,vt,Xt],styles:['@charset "UTF-8";.create-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.create-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700;color:#555}.create-specialization-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:16px}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:16px;transition:background-color .3s}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.create-specialization-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #007bff80}']})}}return n})();function cde(n,t){n&1&&(g(0,"p",10),C(1," Specialization Type is required. "),_())}function ude(n,t){n&1&&(g(0,"p",10),C(1," Specialization Type must be at least 1 character long. "),_())}function dde(n,t){if(n&1&&(g(0,"div"),Se(1,cde,2,0,"p",9)(2,ude,2,0,"p",9),_()),n&2){let e,i;ae();let r=Ii(4);A(),X("ngIf",(e=r.form.get("specializationType"))==null||e.errors==null?null:e.errors.required),A(),X("ngIf",(i=r.form.get("specializationType"))==null||i.errors==null?null:i.errors.minlength)}}var BB=(()=>{class n{constructor(e,i){this.route=e,this.specializationService=i,this.specializationId="",this.specializationUpdated=new gt,this.specialization={specializationType:""}}ngOnInit(){console.log("Specialization ID:",this.specializationId)}onSubmit(){this.specializationService.updateSpecialization(this.specializationId,this.specialization).subscribe({next:()=>{alert("Specialization updated successfully!"),this.specializationUpdated.emit()},error:e=>{console.error("Error updating specialization:",e),alert("Failed to update specialization.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Ct),$(Ph))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-specialization"]],inputs:{specializationId:"specializationId"},outputs:{specializationUpdated:"specializationUpdated"},standalone:!0,features:[Ke],decls:17,vars:3,consts:[["specializationForm","ngForm"],[1,"update-specialization-container"],["novalidate","",3,"ngSubmit"],[1,"form-group"],["for","specializationType"],["type","text","id","specializationType","name","specializationType","required","","minlength","1","aria-label","Specialization Type","aria-describedby","specializationTypeHelp specializationTypeError",1,"form-control",3,"ngModelChange","ngModel"],["id","specializationTypeHelp",1,"form-text","text-muted"],[4,"ngIf"],["type","submit","aria-disabled","!specializationForm.form.valid",1,"btn","btn-primary",3,"disabled"],["id","specializationTypeError","class","error-text",4,"ngIf"],["id","specializationTypeError",1,"error-text"]],template:function(i,r){if(i&1){let o=rt();g(0,"div",1)(1,"h2"),C(2,"Update Specialization"),_(),g(3,"form",2,0),se("ngSubmit",function(){return De(o),Oe(r.onSubmit())}),g(5,"fieldset")(6,"legend"),C(7,"Specialization Details"),_(),g(8,"div",3)(9,"label",4),C(10,"Specialization Type"),_(),g(11,"input",5),Xe("ngModelChange",function(a){return De(o),Ze(r.specialization.specializationType,a)||(r.specialization.specializationType=a),Oe(a)}),_(),g(12,"small",6),C(13," Enter the type of specialization (e.g., Doctor, Nurse). "),_(),Se(14,dde,3,2,"div",7),_(),g(15,"button",8),C(16," Update "),_()()()()}if(i&2){let o,s=Ii(4);A(11),Ye("ngModel",r.specialization.specializationType),A(3),X("ngIf",s.submitted||((o=s.form.get("specializationType"))==null?null:o.touched)),A(),X("disabled",!s.form.valid)}},dependencies:[bt,Ht,Ot,Nt,Bt,tn,sm,hn,Nn,vt,Xt],styles:['@charset "UTF-8";.update-specialization-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 6px #0000001a}.update-specialization-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px;font-size:14px;border:1px solid #ced4da;border-radius:4px}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:none}.form-text[_ngcontent-%COMP%]{font-size:12px;color:#6c757d}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#dc3545}.btn[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:16px;border:none;border-radius:4px}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[aria-disabled=true][_ngcontent-%COMP%]{background-color:silver;cursor:not-allowed}']})}}return n})();function fde(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td")(4,"button",10),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openUpdateSpecialization(r.id))}),C(5," Edit "),_(),g(6,"button",11),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.deleteSpecialization(r.id,r.specializationType))}),C(7," Delete "),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.specializationType),A(2),Zi("aria-label","Edit "+e.specializationType),A(2),Zi("aria-label","Delete "+e.specializationType)}}function hde(n,t){if(n&1){let e=rt();g(0,"div",12),se("click",function(r){De(e);let o=ae();return Oe(o.closeModal(r))}),g(1,"div",13),se("click",function(r){return De(e),Oe(r.stopPropagation())}),g(2,"button",14),se("click",function(){De(e);let r=ae();return Oe(r.closeModal())}),C(3,"X"),_(),g(4,"app-create-specialization",15),se("specializationCreated",function(){De(e);let r=ae();return Oe(r.refreshSpecializations())}),_()()()}}function pde(n,t){if(n&1){let e=rt();g(0,"div",12),se("click",function(r){De(e);let o=ae();return Oe(o.closeUpdateModal(r))}),g(1,"div",13),se("click",function(r){return De(e),Oe(r.stopPropagation())}),g(2,"button",14),se("click",function(){De(e);let r=ae();return Oe(r.closeUpdateModal())}),C(3,"X"),_(),g(4,"app-update-specialization",16),se("specializationUpdated",function(){De(e);let r=ae();return Oe(r.refreshSpecializations())}),_()()()}if(n&2){let e=ae();A(4),X("specializationId",e.selectedSpecializationId)}}var HB=(()=>{class n{constructor(e,i){this.specializationService=e,this.router=i,this.specializations=[],this.isModalOpen=!1,this.isUpdateModalOpen=!1}ngOnInit(){this.fetchSpecializations()}fetchSpecializations(){this.specializationService.getSpecializations().subscribe({next:e=>{console.log("API Response:",e),e.isSuccess&&Array.isArray(e._value)?(this.specializations=e._value,console.log("Specializations:",this.specializations)):(this.specializations=[],console.error("Unexpected API response format:",e))},error:e=>{console.error("Error fetching specializations:",e)}})}openCreateSpecialization(){this.isModalOpen=!0,this.router.navigate(["specializations/create-specialization"])}closeModal(e){e&&e.stopPropagation(),this.isModalOpen=!1,this.router.navigate(["specializations"])}openUpdateSpecialization(e){this.selectedSpecializationId=e,this.isUpdateModalOpen=!0,this.router.navigate(["specializations/update-specialization",e])}closeUpdateModal(e){e&&e.stopPropagation(),this.isUpdateModalOpen=!1,this.router.navigate(["specializations"])}refreshSpecializations(){this.fetchSpecializations(),this.closeModal(),this.closeUpdateModal()}deleteSpecialization(e,i){confirm(`Are you sure you want to delete the specialization "${i}"?`)&&this.specializationService.deleteSpecialization(e).subscribe({next:()=>{alert("Specialization deleted successfully!"),this.refreshSpecializations()},error:r=>{console.error("Error deleting specialization:",r),alert("Failed to delete specialization.")}})}viewSpecializationDetails(e){console.log(`Viewing specialization details for ID: ${e}`)}static{this.\u0275fac=function(i){return new(i||n)($(Ph),$(Ct))}}static{this.\u0275cmp=We({type:n,selectors:[["app-specialization"]],standalone:!0,features:[Ke],decls:21,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],["type","button",1,"btn","btn-create",3,"click"],[1,"manage-title","text-center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal-container",3,"click",4,"ngIf"],["type","button",1,"btn","btn-update",3,"click"],["type","button",1,"btn","btn-delete",3,"click"],[1,"modal-container",3,"click"],[1,"modal-content",3,"click"],["type","button","aria-label","Close modal",1,"btn","btn-close",3,"click"],[3,"specializationCreated"],[3,"specializationUpdated","specializationId"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),se("click",function(){return r.openCreateSpecialization()}),C(5," Create Specialization "),_(),g(6,"h2",4),C(7," Specializations Manager "),_(),g(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead")(12,"tr")(13,"th"),C(14,"Specialization"),_(),g(15,"th"),C(16,"Actions"),_()()(),g(17,"tbody"),Se(18,fde,8,3,"tr",8),_()()()()()(),Se(19,hde,5,0,"div",9)(20,pde,5,1,"div",9),_()),i&2&&(A(18),X("ngForOf",r.specializations),A(),X("ngIf",r.isModalOpen),A(),X("ngIf",r.isUpdateModalOpen))},dependencies:[vt,gn,Xt,kt,Lt,Zm,BB],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;margin:0;padding:0;box-sizing:border-box}.manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;padding:20px}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;width:100%;max-width:1100px;height:auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 10px #0000001a;position:relative}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:15px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{font-size:12px;padding:8px 16px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-size:1.5rem;text-align:center}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{font-size:1.25rem}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;flex-direction:column}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:90%;margin:0 auto;border-collapse:collapse;font-size:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:6px;text-align:left}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:10px;padding:4px}}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{word-wrap:break-word}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:8px 12px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c82333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}@media (max-width: 768px){.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:12px;padding:6px 10px}}.modal-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;padding:20px}@media (max-width: 768px){.modal-container[_ngcontent-%COMP%]{padding:10px}}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;max-width:600px;width:100%;box-shadow:0 4px 6px #0000001a;position:relative;transition:transform .3s ease,opacity .3s ease}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{padding:15px;max-width:90%}}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:#dc3545;border:none;color:#fff;padding:5px 10px;border-radius:50%;cursor:pointer;font-size:16px;transition:background-color .3s}.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background:#c82333}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{font-size:14px;padding:4px 8px}}']})}}return n})();var Mb=(()=>{class n{constructor(e){this.allergyService=e,this.allergy={allergyCode:"",allergyName:"",allergyDescription:"",allergySymptoms:""},this.allergyCreated=new gt}onSubmit(){this.allergyService.createAllergy(this.allergy).subscribe({next:()=>{alert("Allergy created successfully!"),this.allergyCreated.emit()},error:e=>{console.error("Error creating allergy:",e),alert("Failed to create allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Jr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-allergies"]],outputs:{allergyCreated:"allergyCreated"},standalone:!0,features:[Ke],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),C(1,"Create Allergy"),_(),g(2,"form",0),se("submit",function(){return r.onSubmit()}),g(3,"label",1),C(4,"Code:"),_(),g(5,"input",2),Xe("ngModelChange",function(s){return Ze(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),_(),g(6,"label",3),C(7,"Name:"),_(),g(8,"input",4),Xe("ngModelChange",function(s){return Ze(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),_(),g(9,"label",5),C(10,"Description:"),_(),g(11,"input",6),Xe("ngModelChange",function(s){return Ze(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),_(),g(12,"label",7),C(13,"Symptoms:"),_(),g(14,"input",8),Xe("ngModelChange",function(s){return Ze(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),_(),g(15,"button",9),C(16,"Submit"),_()()),i&2&&(A(5),Ye("ngModel",r.allergy.allergyCode),A(3),Ye("ngModel",r.allergy.allergyName),A(3),Ye("ngModel",r.allergy.allergyDescription),A(3),Ye("ngModel",r.allergy.allergySymptoms))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var wb=(()=>{class n{constructor(e){this.conditionService=e,this.medicalCondition={medicalConditionCode:"",medicalConditionName:"",medicalConditionDescription:"",medicalConditionSymptoms:""},this.conditionCreated=new gt}onSubmit(){this.conditionService.createMedicalConditions(this.medicalCondition).subscribe({next:()=>{alert("Medical Condition created successfully!"),this.conditionCreated.emit()},error:e=>{console.error("Error creating condition:",e),alert("Failed to create condition.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Qr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-conditions"]],outputs:{conditionCreated:"conditionCreated"},standalone:!0,features:[Ke],decls:17,vars:4,consts:[[3,"submit"],["for","condition-code"],["type","text","id","condition-code","name","condition-code","required","",3,"ngModelChange","ngModel"],["for","condition-name"],["type","text","id","condition-name","name","condition-name","required","",3,"ngModelChange","ngModel"],["for","condition-description"],["type","text","id","condition-description","name","condition-description","required","",3,"ngModelChange","ngModel"],["for","condition-sypmtoms"],["type","text","id","condition-symptoms","name","condition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),C(1,"Create Medical Condition"),_(),g(2,"form",0),se("submit",function(){return r.onSubmit()}),g(3,"label",1),C(4,"Code:"),_(),g(5,"input",2),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),_(),g(6,"label",3),C(7,"Name:"),_(),g(8,"input",4),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),_(),g(9,"label",5),C(10,"Description:"),_(),g(11,"input",6),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),_(),g(12,"label",7),C(13,"Symptoms:"),_(),g(14,"input",8),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),_(),g(15,"button",9),C(16,"Submit"),_()()),i&2&&(A(5),Ye("ngModel",r.medicalCondition.medicalConditionCode),A(3),Ye("ngModel",r.medicalCondition.medicalConditionName),A(3),Ye("ngModel",r.medicalCondition.medicalConditionDescription),A(3),Ye("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var Eb=(()=>{class n{constructor(e){this.allergyService=e,this.allergyUpdated=new gt}onSubmit(){let e=this.allergy.id;console.log("Allergy:",this.allergy),console.log("Allergy ID:",e),this.allergyService.updateAllergy(e,this.allergy).subscribe({next:()=>{alert("Allergy updated successfully!"),this.allergyUpdated.emit()},error:i=>{console.error("Error updating allergy:",i),alert("Failed to update allergy.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Jr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-allergies"]],inputs:{allergy:"allergy"},outputs:{allergyUpdated:"allergyUpdated"},standalone:!0,features:[Ke],decls:17,vars:4,consts:[[3,"submit"],["for","allergy-code"],["type","text","id","allergy-code","name","allergy-code","required","",3,"ngModelChange","ngModel"],["for","allergy-name"],["type","text","id","allergy-name","name","allergy-name","required","",3,"ngModelChange","ngModel"],["for","allergy-description"],["type","text","id","allergy-description","name","allergy-description","required","",3,"ngModelChange","ngModel"],["for","allergy-symptoms"],["type","text","id","allergy-symptoms","name","allergy-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),C(1,"Update Allergy"),_(),g(2,"form",0),se("submit",function(){return r.onSubmit()}),g(3,"label",1),C(4,"Code:"),_(),g(5,"input",2),Xe("ngModelChange",function(s){return Ze(r.allergy.allergyCode,s)||(r.allergy.allergyCode=s),s}),_(),g(6,"label",3),C(7,"Name:"),_(),g(8,"input",4),Xe("ngModelChange",function(s){return Ze(r.allergy.allergyName,s)||(r.allergy.allergyName=s),s}),_(),g(9,"label",5),C(10,"Description:"),_(),g(11,"input",6),Xe("ngModelChange",function(s){return Ze(r.allergy.allergyDescription,s)||(r.allergy.allergyDescription=s),s}),_(),g(12,"label",7),C(13,"Symptoms:"),_(),g(14,"input",8),Xe("ngModelChange",function(s){return Ze(r.allergy.allergySymptoms,s)||(r.allergy.allergySymptoms=s),s}),_(),g(15,"button",9),C(16,"Submit"),_()()),i&2&&(A(5),Ye("ngModel",r.allergy.allergyCode),A(3),Ye("ngModel",r.allergy.allergyName),A(3),Ye("ngModel",r.allergy.allergyDescription),A(3),Ye("ngModel",r.allergy.allergySymptoms))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var Sb=(()=>{class n{constructor(e){this.medicalConditionService=e,this.conditionUpdated=new gt}onSubmit(){let e=this.medicalCondition.id;this.medicalConditionService.updateCondition(e,this.medicalCondition).subscribe({next:()=>{alert("Condition updated successfully!"),this.conditionUpdated.emit()},error:i=>{console.error("Error creating condition:",i),alert("Failed to update condition.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Qr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-conditions"]],inputs:{medicalCondition:"medicalCondition"},outputs:{conditionUpdated:"conditionUpdated"},standalone:!0,features:[Ke],decls:17,vars:4,consts:[[3,"submit"],["for","medicalCondition-code"],["type","text","id","medicalCondition-code","name","medicalCondition-code","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-name"],["type","text","id","medicalCondition-name","name","medicalCondition-name","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-description"],["type","text","id","medicalCondition-description","name","medicalCondition-description","required","",3,"ngModelChange","ngModel"],["for","medicalCondition-symptoms"],["type","text","id","medicalCondition-symptoms","name","medicalCondition-symptoms","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),C(1,"Update Condition"),_(),g(2,"form",0),se("submit",function(){return r.onSubmit()}),g(3,"label",1),C(4,"Code:"),_(),g(5,"input",2),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionCode,s)||(r.medicalCondition.medicalConditionCode=s),s}),_(),g(6,"label",3),C(7,"Name:"),_(),g(8,"input",4),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionName,s)||(r.medicalCondition.medicalConditionName=s),s}),_(),g(9,"label",5),C(10,"Description:"),_(),g(11,"input",6),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionDescription,s)||(r.medicalCondition.medicalConditionDescription=s),s}),_(),g(12,"label",7),C(13,"Symptoms:"),_(),g(14,"input",8),Xe("ngModelChange",function(s){return Ze(r.medicalCondition.medicalConditionSymptoms,s)||(r.medicalCondition.medicalConditionSymptoms=s),s}),_(),g(15,"button",9),C(16,"Submit"),_()()),i&2&&(A(5),Ye("ngModel",r.medicalCondition.medicalConditionCode),A(3),Ye("ngModel",r.medicalCondition.medicalConditionName),A(3),Ye("ngModel",r.medicalCondition.medicalConditionDescription),A(3),Ye("ngModel",r.medicalCondition.medicalConditionSymptoms))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();function mde(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td")(4,"button",9),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openDetailsModal(r,"allergy"))}),C(5,"View Details"),_(),g(6,"button",9),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openUpdateModal(r,"allergy"))}),C(7,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.allergyName)}}function gde(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td")(4,"button",9),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openDetailsModal(r,"condition"))}),C(5,"View Details"),_(),g(6,"button",9),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openUpdateModal(r,"condition"))}),C(7,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.medicalConditionName)}}function _de(n,t){if(n&1){let e=rt();g(0,"app-create-allergies",18),se("allergyCreated",function(){De(e);let r=ae(2);return Oe(r.handleAllergyCreated())}),_()}}function vde(n,t){if(n&1){let e=rt();g(0,"app-create-conditions",19),se("conditionCreated",function(){De(e);let r=ae(2);return Oe(r.handleConditionCreated())}),_()}}function yde(n,t){if(n&1){let e=rt();g(0,"app-update-allergies",20),se("allergyUpdated",function(){De(e);let r=ae(2);return Oe(r.handleAllergyUpdated())}),_()}if(n&2){let e=ae(2);X("allergy",e.selectedItem)}}function xde(n,t){if(n&1){let e=rt();g(0,"app-update-conditions",21),se("conditionUpdated",function(){De(e);let r=ae(2);return Oe(r.handleConditionUpdated())}),_()}if(n&2){let e=ae(2);X("medicalCondition",e.selectedItem)}}function bde(n,t){if(n&1&&(g(0,"div")(1,"h2"),C(2),_(),g(3,"p")(4,"strong"),C(5,"Code:"),_(),C(6),_(),g(7,"p")(8,"strong"),C(9,"Description:"),_(),C(10),_(),g(11,"p")(12,"strong"),C(13,"Symptoms:"),_(),C(14),_()()),n&2){let e=ae(2);A(2),_t("",e.selectedItemType==="allergy"?e.selectedItem.allergyName:e.selectedItem.medicalConditionName," Details"),A(4),_t(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyCode:e.selectedItem.medicalConditionCode,""),A(4),_t(" ",e.selectedItemType==="allergy"?e.selectedItem.allergyDescription:e.selectedItem.medicalConditionDescription,""),A(4),_t(" ",e.selectedItemType==="allergy"?e.selectedItem.allergySymptoms:e.selectedItem.medicalConditionSymptoms,"")}}function Cde(n,t){if(n&1){let e=rt();g(0,"div",10)(1,"div",11)(2,"span",12),se("click",function(){De(e);let r=ae();return Oe(r.closeModal())}),C(3,"\xD7"),_(),Se(4,_de,1,0,"app-create-allergies",13)(5,vde,1,0,"app-create-conditions",14)(6,yde,1,1,"app-update-allergies",15)(7,xde,1,1,"app-update-conditions",16)(8,bde,15,4,"div",17),_()()}if(n&2){let e=ae();A(4),X("ngIf",e.modalType==="create-allergies"),A(),X("ngIf",e.modalType==="create-conditions"),A(),X("ngIf",e.modalType==="update-allergies"),A(),X("ngIf",e.modalType==="update-conditions"),A(),X("ngIf",e.modalType==="details")}}var jB=(()=>{class n{constructor(e,i,r,o,s){this.renderer=e,this.router=i,this.panelService=r,this.allergyService=o,this.medicalConditionService=s,this.modalType=null,this.allergies=[],this.medicalConditions=[],this.selectedItem=null,this.selectedItemType=null}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.fetchAllergies(),this.fetchMedicalConditions()}openModal(e){this.modalType=e,this.renderer.addClass(document.body,"modal-active"),this.router.navigate([`/manage-allergies-and-conditions/${e}`])}closeModal(){this.modalType=null,this.selectedItem=null,this.selectedItemType=null,this.renderer.removeClass(document.body,"modal-active"),this.router.navigate(["/manage-allergies-and-conditions"]),this.refreshPage()}openDetailsModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType="details",this.renderer.addClass(document.body,"modal-active")}openUpdateModal(e,i){this.selectedItem=e,this.selectedItemType=i,this.modalType=i==="allergy"?"update-allergies":"update-conditions",this.renderer.addClass(document.body,"modal-active"),i==="allergy"?this.router.navigate([`/manage-allergies-and-conditions/update-allergies/${e.id}`]):this.router.navigate([`/manage-allergies-and-conditions/update-conditions/${e.id}`])}handleAllergyCreated(){this.closeModal()}handleConditionCreated(){this.closeModal()}handleAllergyUpdated(){this.closeModal()}handleConditionUpdated(){this.closeModal()}refreshPage(){this.fetchAllergies(),this.fetchMedicalConditions()}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}static{this.\u0275fac=function(i){return new(i||n)($(Mi),$(Ct),$(Rn),$(Jr),$(Qr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-manage-allergies-and-conditions"]],standalone:!0,features:[Ke],decls:34,vars:3,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"btn","btn-create",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[3,"allergyCreated",4,"ngIf"],[3,"conditionCreated",4,"ngIf"],[3,"allergy","allergyUpdated",4,"ngIf"],[3,"medicalCondition","conditionUpdated",4,"ngIf"],[4,"ngIf"],[3,"allergyCreated"],[3,"conditionCreated"],[3,"allergyUpdated","allergy"],[3,"conditionUpdated","medicalCondition"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),se("click",function(){return r.openModal("create-allergies")}),C(5,"Create"),_(),g(6,"h2",4),C(7,"Allergies"),_(),g(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),C(13,"Allergies"),_(),g(14,"th"),C(15,"Actions"),_()()(),g(16,"tbody"),Se(17,mde,8,1,"tr",7),_()()()(),g(18,"div",2)(19,"button",3),se("click",function(){return r.openModal("create-conditions")}),C(20,"Create"),_(),g(21,"h2",4),C(22,"Medical Conditions"),_(),g(23,"div",5)(24,"table",6)(25,"thead")(26,"tr")(27,"th"),C(28,"Conditions"),_(),g(29,"th"),C(30,"Actions"),_()()(),g(31,"tbody"),Se(32,gde,8,1,"tr",7),_()()()()(),Se(33,Cde,9,5,"div",8),_()),i&2&&(A(17),X("ngForOf",r.allergies),A(15),X("ngForOf",r.medicalConditions),A(),X("ngIf",r.modalType))},dependencies:[vt,gn,Xt,bt,kt,Lt,Mb,wb,Eb,Sb],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:800px;height:600px;background-color:#f9f9f9;max-width:800px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:12px;width:80%;max-width:500px;position:relative;box-shadow:0 4px 8px #0000001a}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:24px;cursor:pointer;color:#333;transition:color .3s}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#007bff}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:24px;color:#333}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;margin:10px 0}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}"]})}}return n})();function Mde(n,t){if(n&1){let e=rt();g(0,"div",17)(1,"span"),C(2),_(),g(3,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.onAllergyChange(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ae();A(2),Je(e.allergyName),A(),X("value",e.id)("checked",i.medicalHistory.allergies.includes(e.id))}}function wde(n,t){if(n&1){let e=rt();g(0,"div",17)(1,"span"),C(2),_(),g(3,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.onMedicalConditionChange(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ae();A(2),Je(e.medicalConditionName),A(),X("value",e.id)("checked",i.medicalHistory.medicalConditions.includes(e.id))}}function Ede(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td")(4,"button",9),se("click",function(){let r=De(e).index,o=ae();return Oe(o.editFamilyHistory(r))}),C(5,"Edit"),_(),g(6,"button",9),se("click",function(){let r=De(e).index,o=ae();return Oe(o.removeFamilyHistory(r))}),C(7," Remove "),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e)}}function Sde(n,t){if(n&1){let e=rt();g(0,"div",24)(1,"span"),C(2),_(),g(3,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae(2);return Oe(s.onFamilyHistoryConditionChange(r,o.medicalConditionName))}),_()()}if(n&2){let e=t.$implicit,i=ae(2);A(2),Je(e.medicalConditionName),A(),X("value",e.medicalConditionName)("checked",i.newFamilyHistory.conditions.includes(e.medicalConditionName))}}function Pde(n,t){if(n&1){let e=rt();g(0,"div",19)(1,"div",20)(2,"span",21),se("click",function(){De(e);let r=ae();return Oe(r.closeFamilyConditionsModal())}),C(3,"\xD7"),_(),g(4,"h2"),C(5,"Select Family Conditions"),_(),g(6,"div",22),Se(7,Sde,4,3,"div",23),_(),g(8,"button",15),se("click",function(){De(e);let r=ae();return Oe(r.closeFamilyConditionsModal())}),C(9," Save "),_()()()}if(n&2){let e=ae();A(7),X("ngForOf",e.medicalConditions)}}function Tde(n,t){if(n&1){let e=rt();g(0,"div",19)(1,"div",25)(2,"span",26),se("click",function(){De(e);let r=ae();return Oe(r.closeUpdateFamilyHistoryModal())}),C(3,"\xD7"),_(),g(4,"h2"),C(5,"Edit Family History"),_(),g(6,"div",7)(7,"input",27),Xe("ngModelChange",function(r){De(e);let o=ae();return Ze(o.newFamilyHistory.relationship,r)||(o.newFamilyHistory.relationship=r),Oe(r)}),_(),g(8,"button",9),se("click",function(){De(e);let r=ae();return Oe(r.openFamilyConditionsModal())}),C(9," Select Conditions "),_()(),g(10,"button",28),se("click",function(){De(e);let r=ae();return Oe(r.updateFamilyHistory())}),C(11," Save "),_()()()}if(n&2){let e=ae();A(7),Ye("ngModel",e.newFamilyHistory.relationship),A(3),X("disabled",!e.newFamilyHistory.relationship||e.newFamilyHistory.conditions.length===0)}}var WB=(()=>{class n{constructor(e,i,r,o){this.allergyService=e,this.panelService=i,this.medicalHistoryService=r,this.medicalConditionService=o,this.medicalHistory={id:"",patientMedicalRecordNumber:"",allergies:[],medicalConditions:[],familyHistory:[],freeText:""},this.newFamilyHistory={relationship:"",conditions:[]},this.selectedFamilyHistory=null,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen=!1}ngOnInit(){console.log("ngOnInit called"),this.panelService.setPanelId("panel-doctor"),this.fetchAllergies(),this.fetchMedicalConditions();let e=this.extractMedicalRecordNumberFromUrl();this.fetchMedicalHistory(e)}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(console.log("Family History:",i.familyHistory),this.medicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:i.familyHistory===""?[]:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.medicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){console.log("filterSelectedAllergies called"),this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){console.log("filterSelectedMedicalConditions called"),this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){console.log("searchAllergies called with allergySearch:",this.allergySearch),this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase())),console.log("Filtered allergies after search:",this.filteredAllergies)}searchMedicalConditions(){console.log("searchMedicalConditions called with medicalConditionSearch:",this.medicalConditionSearch),this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase())),console.log("Filtered medical conditions after search:",this.filteredMedicalConditions)}extractMedicalRecordNumberFromUrl(){console.log("extractMedicalRecordNumberFromUrl called");let e=window.location.href,i=/\/update-medical-history\/(\d+)/,r=e.match(i);if(r&&r[1])return console.log("Medical record number extracted from URL:",r[1]),r[1];throw new Error("Medical record number not found in URL.")}fetchAllergies(){console.log("fetchAllergies called"),this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){console.log("fetchMedicalConditions called"),this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,console.log("Medical conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}onAllergyChange(e,i){if(console.log("onAllergyChange called with event:",e,"and allergyId:",i),e.target.checked)this.medicalHistory.allergies.push(i);else{let r=this.medicalHistory.allergies.indexOf(i);r>-1&&this.medicalHistory.allergies.splice(r,1)}console.log("Updated allergies:",this.medicalHistory.allergies)}onMedicalConditionChange(e,i){if(console.log("onMedicalConditionChange called with event:",e,"and medicalConditionId:",i),e.target.checked)this.medicalHistory.medicalConditions.push(i);else{let r=this.medicalHistory.medicalConditions.indexOf(i);r>-1&&this.medicalHistory.medicalConditions.splice(r,1)}console.log("Updated medical conditions:",this.medicalHistory.medicalConditions)}openFamilyConditionsModal(){console.log("openFamilyConditionsModal called"),this.wasUpdateFamilyHistoryModalOpen=this.showUpdateFamilyHistoryModal,this.showUpdateFamilyHistoryModal=!1,this.showFamilyConditionsModal=!0,console.log("Family conditions modal opened")}closeFamilyConditionsModal(){console.log("closeFamilyConditionsModal called"),this.showFamilyConditionsModal=!1,this.wasUpdateFamilyHistoryModalOpen&&(this.showUpdateFamilyHistoryModal=!0),console.log("Family conditions modal closed")}addFamilyHistory(){console.log("addFamilyHistory called with newFamilyHistory:",this.newFamilyHistory);let e=this.newFamilyHistory.conditions.join("; "),i=`${this.newFamilyHistory.relationship}: ${e}`;this.medicalHistory.familyHistory.includes(i)||this.medicalHistory.familyHistory.push(i),this.newFamilyHistory={relationship:"",conditions:[]},console.log("Updated family history:",this.medicalHistory.familyHistory)}removeFamilyHistory(e){console.log("removeFamilyHistory called with index:",e),this.medicalHistory.familyHistory.splice(e,1),this.selectedFamilyHistory=null,console.log("Updated family history:",this.medicalHistory.familyHistory)}onFamilyHistoryConditionChange(e,i){if(console.log("onFamilyHistoryConditionChange called with event:",e,"and condition:",i),e.target.checked)this.newFamilyHistory.conditions.includes(i)||this.newFamilyHistory.conditions.push(i);else{let r=this.newFamilyHistory.conditions.indexOf(i);r>-1&&this.newFamilyHistory.conditions.splice(r,1)}console.log("Updated new family history conditions:",this.newFamilyHistory.conditions)}editFamilyHistory(e){console.log("editFamilyHistory called with index:",e),this.selectedFamilyHistory=e;let i=this.parseFamilyHistory([this.medicalHistory.familyHistory[e]])[0];this.newFamilyHistory={relationship:i.relationship,conditions:i.conditions},this.showUpdateFamilyHistoryModal=!0,console.log("Editing family history:",this.newFamilyHistory)}closeUpdateFamilyHistoryModal(){console.log("closeUpdateFamilyHistoryModal called"),this.showUpdateFamilyHistoryModal=!1,this.newFamilyHistory={relationship:"",conditions:[]},console.log("Update family history modal closed")}updateFamilyHistory(){if(console.log("updateFamilyHistory called"),this.selectedFamilyHistory!==null){let e=`${this.newFamilyHistory.relationship}: ${this.newFamilyHistory.conditions.join("; ")}`;this.medicalHistory.familyHistory.includes(e)||(this.medicalHistory.familyHistory[this.selectedFamilyHistory]=e),this.closeUpdateFamilyHistoryModal(),console.log("Updated family history:",this.medicalHistory.familyHistory)}}submitMedicalHistory(){console.log("submitMedicalHistory called with medicalHistory:",this.medicalHistory),this.medicalHistoryService.updatePatientMedicalHistory(this.medicalHistory.patientMedicalRecordNumber,this.medicalHistory.allergies,this.medicalHistory.medicalConditions,this.medicalHistory.familyHistory,this.medicalHistory.freeText).subscribe(e=>{console.log("Medical history updated:",e),alert("Medical history updated successfully")},e=>{console.error("Error updating medical history:",e),alert("Error updating medical history")})}static{this.\u0275fac=function(i){return new(i||n)($(Jr),$(Rn),$(La),$(Qr))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-medical-history"]],standalone:!0,features:[Ke],decls:42,vars:8,consts:[[1,"content"],[1,"medical-history-container"],[1,"top-section"],[1,"box"],[1,"multi-select-list"],["class","multi-select-item",4,"ngFor","ngForOf"],[1,"middle-section"],[1,"family-history-input"],["type","text","placeholder","Relationship","name","newRelationship","required","",3,"ngModelChange","ngModel"],["type","button",3,"click"],["type","button",3,"click","disabled"],[1,"family-history-table"],[4,"ngFor","ngForOf"],[1,"bottom-section"],["placeholder","Free Text Field","name","freeTextField",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click"],["class","modal",4,"ngIf"],[1,"multi-select-item"],["type","checkbox",3,"change","value","checked"],[1,"modal"],[1,"family-conditions-modal-content"],[1,"family-conditions-close",3,"click"],[1,"family-conditions-multi-select-list"],["class","family-conditions-multi-select-item",4,"ngFor","ngForOf"],[1,"family-conditions-multi-select-item"],[1,"update-family-history-modal-content"],[1,"update-family-history-close",3,"click"],["type","text","placeholder","Relationship","name","editRelationship","required","",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-save",3,"click","disabled"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"h2"),C(4,"Medical History"),_(),g(5,"div",2)(6,"div",3)(7,"h3"),C(8,"Allergies"),_(),g(9,"div",4),Se(10,Mde,4,3,"div",5),_()(),g(11,"div",3)(12,"h3"),C(13,"Medical Conditions"),_(),g(14,"div",4),Se(15,wde,4,3,"div",5),_()()(),g(16,"div",6)(17,"h3"),C(18,"Family History"),_(),g(19,"div",7)(20,"input",8),Xe("ngModelChange",function(s){return Ze(r.newFamilyHistory.relationship,s)||(r.newFamilyHistory.relationship=s),s}),_(),g(21,"button",9),se("click",function(){return r.openFamilyConditionsModal()}),C(22," Select Conditions "),_(),g(23,"button",10),se("click",function(){return r.addFamilyHistory()}),C(24," Add Family History "),_()(),g(25,"table",11)(26,"thead")(27,"tr")(28,"th"),C(29,"Family History"),_(),g(30,"th"),C(31,"Actions"),_()()(),g(32,"tbody"),Se(33,Ede,8,1,"tr",12),_()()(),g(34,"div",13)(35,"h3"),C(36,"Free Text Field"),_(),g(37,"textarea",14),Xe("ngModelChange",function(s){return Ze(r.medicalHistory.freeText,s)||(r.medicalHistory.freeText=s),s}),_()(),g(38,"button",15),se("click",function(){return r.submitMedicalHistory()}),C(39,"Save"),_()(),Se(40,Pde,10,1,"div",16)(41,Tde,12,2,"div",16),_()),i&2&&(A(10),X("ngForOf",r.allergies),A(5),X("ngForOf",r.medicalConditions),A(5),Ye("ngModel",r.newFamilyHistory.relationship),A(3),X("disabled",!r.newFamilyHistory.relationship||r.newFamilyHistory.conditions.length===0),A(10),X("ngForOf",r.medicalHistory.familyHistory),A(4),Ye("ngModel",r.medicalHistory.freeText),A(3),X("ngIf",r.showFamilyConditionsModal),A(),X("ngIf",r.showUpdateFamilyHistoryModal))},dependencies:[bt,Ot,Nt,tn,hn,vt,gn,Xt,Lt],styles:[".content[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100vh;overflow-y:auto;box-sizing:border-box;align-items:center}.medical-history-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;height:fit-content;margin:0 auto;background-color:#f9f9f9;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.medical-history-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-top:0}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;box-shadow:0 1px 3px #0000001a}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.medical-history-container[_ngcontent-%COMP%]   .top-section[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:16px;font-weight:700;color:#333}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;position:relative}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:table;width:calc(100% - 16px);table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{display:block;max-height:150px;overflow-y:scroll;width:100%}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left;font-size:14px;box-sizing:border-box}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;font-weight:700}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar{width:16px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:8px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b3b3b3}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;border-radius:4px;padding:5px 10px;font-size:14px;cursor:pointer;transition:background-color .3s;margin-right:5px}.medical-history-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]   .family-history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c82333}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]{margin-bottom:20px}.medical-history-container[_ngcontent-%COMP%]   .bottom-section[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100px;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px;resize:none;overflow-y:auto}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]{display:block;margin:10px auto;background-color:#17a2b8;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.medical-history-container[_ngcontent-%COMP%]   .btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1;inset:0;width:100%;height:100%;background-color:#0006;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-family-history-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:2}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:hover, .update-family-history-modal-content[_ngcontent-%COMP%]   .update-family-history-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.update-family-history-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:14px}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;border-radius:4px;padding:10px 20px;font-size:14px;cursor:pointer;transition:background-color .3s}.update-family-history-modal-content[_ngcontent-%COMP%]   .family-history-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#218838}.family-conditions-modal-content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;padding:20px;border:1px solid #888;border-radius:8px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 0 10px #0000001a;position:relative;z-index:100}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:28px;font-weight:700;color:#aaa;cursor:pointer;transition:color .3s}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:hover, .family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.family-conditions-modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;text-align:center}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#f9f9f9}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left;font-size:14px;color:#333}.family-conditions-modal-content[_ngcontent-%COMP%]   .family-conditions-multi-select-list[_ngcontent-%COMP%]   .family-conditions-multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.btn-save[_ngcontent-%COMP%]{display:block;margin:20px auto 0;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer;transition:background-color .3s}.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}}return n})();var Dde=n=>["/update-medical-history",n];function Ode(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td"),C(4),_(),g(5,"td")(6,"a",24),C(7,"Edit"),_(),g(8,"a",25),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.viewPatientDetails(r.medicalRecordNumber))}),C(9,"View"),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.medicalRecordNumber),A(2),Je(e.fullName),A(2),X("routerLink",ri(3,Dde,e.medicalRecordNumber))}}function Ade(n,t){if(n&1){let e=rt();g(0,"div",26)(1,"div",27)(2,"h3"),C(3,"Patient Details"),_(),g(4,"button",28),se("click",function(){De(e);let r=ae();return r.selectedPatient=void 0,r.selectedAllergies=[],r.selectedMedicalConditions=[],Oe(r.selectedMedicalHistory=void 0)}),_(),g(5,"table",29)(6,"tbody")(7,"tr")(8,"th"),C(9,"Medical Record Number"),_(),g(10,"td"),C(11),_()(),g(12,"tr")(13,"th"),C(14,"First Name"),_(),g(15,"td"),C(16),_()(),g(17,"tr")(18,"th"),C(19,"Last Name"),_(),g(20,"td"),C(21),_()(),g(22,"tr")(23,"th"),C(24,"Full Name"),_(),g(25,"td"),C(26),_()(),g(27,"tr")(28,"th"),C(29,"Date of Birth"),_(),g(30,"td"),C(31),_()(),g(32,"tr")(33,"th"),C(34,"Gender"),_(),g(35,"td"),C(36),_()(),g(37,"tr")(38,"th"),C(39,"Email"),_(),g(40,"td"),C(41),_()(),g(42,"tr")(43,"th"),C(44,"Phone Number"),_(),g(45,"td"),C(46),_()(),g(47,"tr")(48,"th"),C(49,"Emergency Contact"),_(),g(50,"td"),C(51),_()(),g(52,"tr")(53,"th"),C(54,"Appointment History"),_(),g(55,"td"),C(56),_()(),g(57,"tr")(58,"th"),C(59,"Is Active"),_(),g(60,"td"),C(61),_()(),g(62,"tr")(63,"th"),C(64,"Medical History"),_(),g(65,"td")(66,"button",30),se("click",function(){De(e);let r=ae();return Oe(r.openMedicalHistoryModal())}),C(67," View Medical History "),_()()()()()()()}if(n&2){let e=ae();A(11),Je(e.selectedPatient.medicalRecordNumber),A(5),Je(e.selectedPatient.firstName),A(5),Je(e.selectedPatient.lastName),A(5),Je(e.selectedPatient.fullName),A(5),Je(e.selectedPatient.dateOfBirth),A(5),Je(e.selectedPatient.gender===1?"Male":"Female"),A(5),Je(e.selectedPatient.email),A(5),Je(e.selectedPatient.phoneNumber),A(5),Je(e.selectedPatient.emergencyContact),A(5),_t(" ",e.selectedPatient.appointmentHistory&&e.selectedPatient.appointmentHistory.length>0?e.selectedPatient.appointmentHistory:"No appointments scheduled"," "),A(5),Je(e.selectedPatient.isActive?"Yes":"No")}}function Ide(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e," ")}}function Rde(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.allergyName," ")}}function kde(n,t){n&1&&(g(0,"li"),C(1,"No allergies"),_())}function Nde(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.medicalConditionName," ")}}function Fde(n,t){n&1&&(g(0,"li"),C(1," No medical conditions "),_())}function Lde(n,t){if(n&1){let e=rt();g(0,"div",31)(1,"div",32)(2,"span",33),se("click",function(){De(e);let r=ae();return Oe(r.closeMedicalHistoryModal())}),C(3,"\xD7"),_(),g(4,"h3"),C(5,"Medical History"),_(),g(6,"table",29)(7,"tbody")(8,"tr")(9,"th"),C(10,"Free Text"),_(),g(11,"td"),C(12),_()(),g(13,"tr")(14,"th"),C(15,"Family History"),_(),g(16,"td")(17,"ul"),Se(18,Ide,2,1,"li",21),_()()(),g(19,"tr")(20,"th"),C(21,"Allergies"),_(),g(22,"td")(23,"ul",34),Se(24,Rde,2,1,"li",21)(25,kde,2,0,"li",35),_()()(),g(26,"tr")(27,"th"),C(28,"Medical Conditions"),_(),g(29,"td")(30,"ul",36),Se(31,Nde,2,1,"li",21)(32,Fde,2,0,"li",35),_()()()()()()()}if(n&2){let e=ae();A(12),Je(e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.freeText),A(6),X("ngForOf",e.selectedMedicalHistory==null?null:e.selectedMedicalHistory.familyHistory),A(6),X("ngForOf",e.selectedAllergies),A(),X("ngIf",e.selectedAllergies.length===0),A(6),X("ngForOf",e.selectedMedicalConditions),A(),X("ngIf",e.selectedMedicalConditions.length===0)}}var GB=(()=>{class n{constructor(e,i,r,o,s){this.patientService=e,this.panelService=i,this.allergyService=r,this.medicalConditionService=o,this.medicalHistoryService=s,this.filters={},this.patients=[],this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.allergySearch="",this.medicalConditionSearch="",this.filteredAllergies=[],this.filteredMedicalConditions=[],this.isMedicalHistoryModalOpen=!1}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.clearFilters(),this.fetchAllergies(),this.fetchMedicalConditions()}fetchPatients(){this.patientService.getPatientsWithAdvancedFilter().subscribe(e=>{this.patients=e,console.log("Patients fetched:",e)},e=>{console.error("Error fetching patients",e)})}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}applyFilters(e){e.preventDefault();let i=Object.keys(this.filters).map(r=>`${r}=${this.filters[r]}`).join("&");this.filterPatients(i)}filterPatients(e){let i={};e.split("&").forEach(r=>{let[o,s]=r.split("=");s&&(i[o]=s)}),this.patientService.getPatientsWithAdvancedFilter(i.firstName,i.lastName,i.fullName,i.dateOfBirth,i.medicalRecordNumber,i.gender,i.email,i.phoneNumber).subscribe(r=>{r.length===0?this.patients=[]:this.patients=r,console.log("Patients fetched:",r)},r=>{this.patients=[],console.error("Error fetching patients",r)})}clearFilters(){this.filters={firstName:"",lastName:"",fullName:"",dateOfBirth:"",medicalRecordNumber:"",gender:"",email:"",phoneNumber:""},this.fetchPatients()}deletePatient(e,i){window.confirm(`Are you sure you want to delete patient ${e} called ${i}?`)&&this.patientService.deletePatient(e).subscribe(()=>{alert("Patient deleted successfully"),this.refreshPatientList(e)},o=>{console.error("Error deleting Patient:",o)})}viewPatientDetails(e){console.log(`Viewing details for patient ${e}`),this.patientService.getPatientsWithAdvancedFilter(void 0,void 0,void 0,void 0,e).subscribe(i=>{this.selectedPatient=i[0],console.log("Patient fetched:",i),this.fetchMedicalHistory(e)},i=>{console.error("Error fetching patient",i)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}searchAllergies(){this.filteredAllergies=this.selectedAllergies.filter(e=>e.allergyName.toLowerCase().includes(this.allergySearch.toLowerCase()))}searchMedicalConditions(){this.filteredMedicalConditions=this.selectedMedicalConditions.filter(e=>e.medicalConditionName.toLowerCase().includes(this.medicalConditionSearch.toLowerCase()))}refreshPatientList(e){this.patients=this.patients.filter(i=>i.medicalRecordNumber!==e)}openMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!0}closeMedicalHistoryModal(){this.isMedicalHistoryModalOpen=!1}static{this.\u0275fac=function(i){return new(i||n)($(Ps),$(Rn),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=We({type:n,selectors:[["app-medical-history-manager"]],standalone:!0,features:[Ke],decls:40,vars:11,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"filter-form",3,"submit"],["type","text","placeholder","First Name","name","firstName",3,"ngModelChange","ngModel"],["type","text","placeholder","Last Name","name","lastName",3,"ngModelChange","ngModel"],["type","text","placeholder","Full Name","name","fullName",3,"ngModelChange","ngModel"],["type","date","placeholder","Date of Birth","name","dateOfBirth","pattern","\\d{4}-\\d{2}-\\d{2}",3,"ngModelChange","ngModel"],["type","text","placeholder","Medical Record Number","name","medicalRecordNumber",3,"ngModelChange","ngModel"],["name","gender",3,"ngModelChange","ngModel"],["value",""],["value","Male"],["value","Female"],["type","email","placeholder","Email","name","email",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone Number","name","phoneNumber",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-filter"],["type","button",1,"btn","btn-clear",3,"click"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","details-screen",4,"ngIf"],["class","modal",4,"ngIf"],[1,"btn","btn-update",3,"routerLink"],["href","javascript:void(0)",1,"btn","btn-view",3,"click"],[1,"details-screen"],[1,"patient-details"],[1,"btn","btn-close",3,"click"],[1,"table","table-bordered"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[1,"allergies-list"],[4,"ngIf"],[1,"conditions-list"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),C(5,"Patients Manager"),_(),g(6,"div",4)(7,"form",5),se("submit",function(s){return r.applyFilters(s)}),g(8,"input",6),Xe("ngModelChange",function(s){return Ze(r.filters.firstName,s)||(r.filters.firstName=s),s}),_(),g(9,"input",7),Xe("ngModelChange",function(s){return Ze(r.filters.lastName,s)||(r.filters.lastName=s),s}),_(),g(10,"input",8),Xe("ngModelChange",function(s){return Ze(r.filters.fullName,s)||(r.filters.fullName=s),s}),_(),g(11,"input",9),Xe("ngModelChange",function(s){return Ze(r.filters.dateOfBirth,s)||(r.filters.dateOfBirth=s),s}),_(),g(12,"input",10),Xe("ngModelChange",function(s){return Ze(r.filters.medicalRecordNumber,s)||(r.filters.medicalRecordNumber=s),s}),_(),g(13,"select",11),Xe("ngModelChange",function(s){return Ze(r.filters.gender,s)||(r.filters.gender=s),s}),g(14,"option",12),C(15,"Select Gender"),_(),g(16,"option",13),C(17,"Male"),_(),g(18,"option",14),C(19,"Female"),_()(),g(20,"input",15),Xe("ngModelChange",function(s){return Ze(r.filters.email,s)||(r.filters.email=s),s}),_(),g(21,"input",16),Xe("ngModelChange",function(s){return Ze(r.filters.phoneNumber,s)||(r.filters.phoneNumber=s),s}),_(),g(22,"button",17),C(23,"Apply Filters"),_(),g(24,"button",18),se("click",function(){return r.clearFilters()}),C(25," Clear Filters "),_()(),g(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th"),C(31,"Medical Record Number"),_(),g(32,"th"),C(33,"Name"),_(),g(34,"th"),C(35,"Actions"),_()()(),g(36,"tbody"),Se(37,Ode,10,5,"tr",21),_()()()()(),Se(38,Ade,68,11,"div",22),_(),Se(39,Lde,33,6,"div",23),_()),i&2&&(A(8),Ye("ngModel",r.filters.firstName),A(),Ye("ngModel",r.filters.lastName),A(),Ye("ngModel",r.filters.fullName),A(),Ye("ngModel",r.filters.dateOfBirth),A(),Ye("ngModel",r.filters.medicalRecordNumber),A(),Ye("ngModel",r.filters.gender),A(7),Ye("ngModel",r.filters.email),A(),Ye("ngModel",r.filters.phoneNumber),A(16),X("ngForOf",r.patients),A(),X("ngIf",r.selectedPatient),A(),X("ngIf",r.isMedicalHistoryModalOpen))},dependencies:[Lt,vt,gn,Xt,bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,xl,hn,Nn,kt,zt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;margin-left:85px;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1000px;height:90vh;background-color:#f9f9f9;margin:0 auto;border:1px solid #f5f4f4;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow:hidden}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:start;align-items:center;max-width:500px;height:90vh;background-color:#fff;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .patient-details[_ngcontent-%COMP%]{width:100%}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:20px auto}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#dc3545;color:#fff;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{background-color:#3588d1;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0;margin-top:5px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover{background-color:#70b1e2}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:1px solid #ddd;border-radius:4px;padding:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;padding:8px 15px;border:none;border-radius:4px;cursor:pointer;flex-shrink:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px solid #ddd;color:#555}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.no-results[_ngcontent-%COMP%]{color:#999;text-align:center;font-style:italic}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .allergies-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .manage-container[_ngcontent-%COMP%]   .details-screen[_ngcontent-%COMP%]   .conditions-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#00000080}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border:1px solid #888;width:600px;height:fit-content;max-height:600px;border-radius:10px;box-shadow:0 0 20px #0003;position:relative}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;overflow-y:auto}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}"]})}}return n})();var $B=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=We({type:n,selectors:[["app-patient-policy"]],standalone:!0,features:[Ke],decls:157,vars:0,consts:[[1,"policy-container"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"h1"),C(3,"Privacy Policy"),_(),g(4,"p"),C(5,"Last updated: 4 de Janeiro de 2025"),_(),g(6,"section")(7,"h2"),C(8,"Introdu\xE7\xE3o"),_(),g(9,"p"),C(10," A sua privacidade \xE9 essencial para o Hospital Management App. Esta pol\xEDtica, em conformidade com o Regulamento Geral sobre a Prote\xE7\xE3o de Dados (RGPD), descreve como recolhemos, utilizamos, partilhamos e protegemos os seus dados pessoais ao utilizar a nossa aplica\xE7\xE3o. O RGPD assegura a prote\xE7\xE3o dos seus dados enquanto um direito fundamental. "),_()(),g(11,"section")(12,"h2"),C(13,"Que Dados Pessoais Recolhemos?"),_(),g(14,"ul")(15,"li"),C(16,"Dados de Identifica\xE7\xE3o: Nome, data de nascimento, n\xFAmero de identifica\xE7\xE3o e g\xE9nero."),_(),g(17,"li"),C(18,"Contactos: Morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia"),_(),g(19,"li"),C(20,"Dados de Sa\xFAde: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(21,"li"),C(22,"Informa\xE7\xE3o de Utiliza\xE7\xE3o: Como utiliza a aplica\xE7\xE3o, as suas prefer\xEAncias e defini\xE7\xF5es."),_()()(),g(23,"section")(24,"h2"),C(25,"Finalidades do Tratamento dos Dados"),_(),g(26,"ul")(27,"li"),C(28,"Gerir as suas consultas e marca\xE7\xF5es."),_(),g(29,"li"),C(30,"Fornecer-lhe os cuidados de sa\xFAde adequados."),_(),g(31,"li"),C(32,"Melhorar a qualidade dos nossos servi\xE7os."),_(),g(33,"li"),C(34,"Comunicar consigo sobre as suas consultas."),_(),g(35,"li"),C(36,"Cumprir com as obriga\xE7\xF5es legais."),_(),g(37,"li"),C(38,"Arquivo de interesse p\xFAblico, investiga\xE7\xE3o cient\xEDfica ou hist\xF3rica, ou fins estat\xEDsticos, assegurando a prote\xE7\xE3o dos seus direitos."),_()()(),g(39,"section")(40,"h2"),C(41,"Tempos de Reten\xE7\xE3o de Dados"),_(),g(42,"p"),C(43,"Os tempos de reten\xE7\xE3o foram definidos considerando a finalidade do tratamento, a base legal, as obriga\xE7\xF5es legais e as boas pr\xE1ticas de seguran\xE7a:"),_(),g(44,"h3"),C(45,"1. Dados de Contacto"),_(),g(46,"ul")(47,"li"),C(48,"Inclui: Nome, morada, email, n\xFAmero de telefone e contacto de emerg\xEAncia."),_(),g(49,"li"),C(50,"Tempo de reten\xE7\xE3o: Durante o per\xEDodo em que o paciente for utilizador ativo da aplica\xE7\xE3o. Eliminados 6 meses ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(51,"li"),C(52,"Justificativa: Essenciais para a gest\xE3o de consultas e comunica\xE7\xE3o com o paciente, com reten\xE7\xE3o adicional de 6 meses para eventuais quest\xF5es legais ou administrativas."),_()(),g(53,"h3"),C(54,"2. Dados de Sa\xFAde"),_(),g(55,"ul")(56,"li"),C(57,"Inclui: Informa\xE7\xE3o m\xE9dica, hist\xF3rico cl\xEDnico e resultados de exames."),_(),g(58,"li"),C(59,"Tempo de reten\xE7\xE3o: 20 anos ap\xF3s a \xFAltima consulta, conforme legisla\xE7\xE3o portuguesa para prontu\xE1rios m\xE9dicos."),_(),g(60,"li"),C(61,"Justificativa: Obriga\xE7\xE3o legal de reten\xE7\xE3o por 20 anos para assegurar o cumprimento da legisla\xE7\xE3o e permitir acesso a informa\xE7\xF5es m\xE9dicas em caso de necessidade."),_()(),g(62,"h3"),C(63,"3. Informa\xE7\xE3o de Utiliza\xE7\xE3o"),_(),g(64,"ul")(65,"li"),C(66,"Inclui: Como utiliza a aplica\xE7\xE3o, prefer\xEAncias e defini\xE7\xF5es."),_(),g(67,"li"),C(68,"Tempo de reten\xE7\xE3o: 1 ano ap\xF3s a \xFAltima intera\xE7\xE3o do paciente com a aplica\xE7\xE3o."),_(),g(69,"li"),C(70,"Justificativa: Necess\xE1ria para melhorar os servi\xE7os da aplica\xE7\xE3o, permitindo an\xE1lise de tend\xEAncias e implementa\xE7\xE3o de melhorias."),_()()(),g(71,"section")(72,"h2"),C(73,"Procedimentos Ap\xF3s o Fim do Per\xEDodo de Reten\xE7\xE3o"),_(),g(74,"p"),C(75,"Ap\xF3s o per\xEDodo de reten\xE7\xE3o definido:"),_(),g(76,"ul")(77,"li"),C(78,"Os dados ser\xE3o eliminados de forma segura e irrevers\xEDvel, garantindo que n\xE3o possam ser recuperados."),_(),g(79,"li"),C(80,"Dados necess\xE1rios para fins legais ou contratuais poder\xE3o ser anonimizados e retidos por tempo indeterminado, utilizados exclusivamente para investiga\xE7\xE3o e estat\xEDstica."),_()()(),g(81,"section")(82,"h2"),C(83,"Com Quem Partilhamos os seus Dados?"),_(),g(84,"ul")(85,"li"),C(86,"Profissionais de Sa\xFAde: Para fornecer os cuidados de sa\xFAde necess\xE1rios, apenas na medida estritamente indispens\xE1vel."),_(),g(87,"li"),C(88,"Autoridades de Controlo: Quando exigido por lei, mediante pedido formal, justificado e ocasional."),_(),g(89,"li"),C(90,"Prestadores de Servi\xE7os: Empresas que auxiliam na opera\xE7\xE3o da aplica\xE7\xE3o, sob contrato que garante prote\xE7\xE3o de dados adequada."),_()()(),g(91,"section")(92,"h2"),C(93,"Como Protegemos os seus Dados?"),_(),g(94,"ul")(95,"li"),C(96,"Encripta\xE7\xE3o: Todos os dados s\xE3o encriptados para impedir acessos n\xE3o autorizados."),_(),g(97,"li"),C(98,"Pseudonimiza\xE7\xE3o: Sempre que poss\xEDvel, protegemos a sua identidade atrav\xE9s de pseudonimiza\xE7\xE3o."),_(),g(99,"li"),C(100,"Controlo de Acesso: Apenas utilizadores autorizados, mediante autentica\xE7\xE3o segura, t\xEAm acesso aos seus dados."),_(),g(101,"li"),C(102,"Medidas T\xE9cnicas e Organizativas: Implementamos solu\xE7\xF5es adequadas ao risco, considerando o estado da arte tecnol\xF3gica."),_()()(),g(103,"section")(104,"h2"),C(105,"Os seus Direitos"),_(),g(106,"p"),C(107,"De acordo com o RGPD, tem os seguintes direitos:"),_(),g(108,"ul")(109,"li"),C(110,"Acesso aos seus dados: Solicitar uma c\xF3pia dos seus dados pessoais num formato leg\xEDvel."),_(),g(111,"li"),C(112,"Retifica\xE7\xE3o: Corrigir dados incorretos ou incompletos."),_(),g(113,"li"),C(114,'Apagamento ("direito a ser esquecido"): Solicitar a elimina\xE7\xE3o dos seus dados em condi\xE7\xF5es espec\xEDficas.'),_(),g(115,"li"),C(116,"Limita\xE7\xE3o do Tratamento: Restringir o uso dos seus dados em determinadas situa\xE7\xF5es."),_(),g(117,"li"),C(118,"Oposi\xE7\xE3o ao Tratamento: Recusar o tratamento baseado em interesses leg\xEDtimos ou marketing direto."),_(),g(119,"li"),C(120,"Portabilidade dos Dados: Receber os seus dados num formato estruturado para transferir para outro servi\xE7o."),_()(),g(121,"p"),C(122,"Pode exercer os seus direitos atrav\xE9s de um pedido dirigido ao Hospital Management App, pelos seguintes meios:"),_(),g(123,"ul")(124,"li"),C(125,"Por correio postal para o endere\xE7o: R. Dr. Ant\xF3nio Bernardino de Almeida 431, 4249-015 Porto."),_(),g(126,"li"),C(127,"Por email para o endere\xE7o: privacy@hospital.management.app.com."),_(),g(128,"li"),C(129,"Atrav\xE9s da aplica\xE7\xE3o, utilizando as funcionalidades espec\xEDficas dispon\xEDveis para o efeito."),_()(),g(130,"p"),C(131,"Ao exercer estes direitos, o utilizador deve especificar a natureza da sua solicita\xE7\xE3o e identificar-se devidamente. Ap\xF3s a confirma\xE7\xE3o da identidade do utilizador, para garantir que o pedido n\xE3o \xE9 realizado por terceiros n\xE3o autorizados, a solicita\xE7\xE3o ser\xE1 tratada em total conformidade com os requisitos e prazos legais aplic\xE1veis."),_()(),g(132,"section")(133,"h2"),C(134,"Consentimento"),_(),g(135,"p"),C(136,"Solicitamos o seu consentimento claro e direto para tratar dados, especialmente categorias sens\xEDveis, explicando claramente as finalidades. Pode retirar o seu consentimento a qualquer momento atrav\xE9s das funcionalidades da aplica\xE7\xE3o ou pelos contactos disponibilizados."),_()(),g(137,"section")(138,"h2"),C(139,"Transfer\xEAncia de Dados Pessoais"),_(),g(140,"p"),C(141,"Em nenhum caso, o Hospital Management App transferir\xE1 os dados pessoais fornecidos atrav\xE9s deste website a terceiros sem o consentimento pr\xE9vio do utilizador, exceto se tal for uma obriga\xE7\xE3o legal ou se for identificado um interesse leg\xEDtimo, desde que sejam garantidas as salvaguardas apropriadas."),_()(),g(142,"section")(143,"h2"),C(144,"Autoridade de Supervis\xE3o"),_(),g(145,"p"),C(146,"De acordo com a lei, o titular dos dados tem o direito de apresentar uma reclama\xE7\xE3o relativa \xE0 prote\xE7\xE3o de dados pessoais junto da autoridade de supervis\xE3o competente."),_()(),g(147,"section")(148,"h2"),C(149,"Contactos"),_(),g(150,"p"),C(151,"Se tiver d\xFAvidas sobre esta pol\xEDtica de privacidade, contacte o nosso Encarregado de Prote\xE7\xE3o de Dados atrav\xE9s do email: paulo@hospital.management.app.com."),_()(),g(152,"section")(153,"h2"),C(154,"Atualiza\xE7\xF5es"),_(),g(155,"p"),C(156,"Esta pol\xEDtica de privacidade pode ser alterada. Informaremos com pelo menos 30 dias de anteced\xEAncia sobre mudan\xE7as significativas, e a vers\xE3o atualizada estar\xE1 sempre dispon\xEDvel na nossa aplica\xE7\xE3o."),_()()())},dependencies:[Lt],styles:['@charset "UTF-8";body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;font-family:Poppins,sans-serif,Arial,sans-serif;background-color:#f9f9f9;overflow:hidden}.policy-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;height:100vh;padding:20px;overflow-y:auto;background-color:#fff;color:#333;border-radius:8px;box-shadow:0 4px 10px #0000001a;max-width:900px;margin:auto;border:1px solid rgba(0,0,0,.1)}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:20px;color:#007bff;text-align:center;font-weight:700}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:25px;padding:10px 15px;background-color:#f9f9f9;border-radius:8px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:10px;color:#004085;font-weight:600}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.8;margin-bottom:15px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;margin-left:20px}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer}.policy-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (max-width: 1024px){.policy-container[_ngcontent-%COMP%]{max-width:100%;padding:15px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 768px){.policy-container[_ngcontent-%COMP%]{padding:10px;margin:10px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.9rem}}@media (max-width: 480px){.policy-container[_ngcontent-%COMP%]{padding:8px}.policy-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem}.policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .policy-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:.85rem}}']})}}return n})();var Th=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/appointments"}createAppointment(e){return console.log("Creating appointment:",e),this.http.post(`${this.apiUrl}/create`,e).pipe(nn(i=>(console.error("Error creating appointment:",i),En(()=>new Error("Failed to create appointment. Please try again later.")))))}getAppointments(){return console.log("getAppointments called"),this.http.get(`${this.apiUrl}`).pipe(nn(e=>(console.error("Error fetching appointments:",e),En(()=>new Error("Failed to fetch appointments. Please try again later.")))))}getAppointmentById(e){return console.log("getAppointmentById called"),this.http.get(`${this.apiUrl}/${e}`).pipe(nn(i=>(console.error("Error fetching appointment:",i),En(()=>new Error("Failed to fetch appointment. Please try again later.")))))}updateAppointment(e,i){return console.log("Updating appointment:",i),this.http.put(`${this.apiUrl}/update/${e}`,i).pipe(nn(r=>(console.error("Error updating appointment:",r),En(()=>new Error("Failed to update appointment. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ude(n,t){if(n&1&&(g(0,"option",16),C(1),_()),n&2){let e=t.$implicit;X("value",e.id),A(),Je(e.name)}}function Vde(n,t){if(n&1){let e=rt();g(0,"div",17),C(1),g(2,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit;A(),_t(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)}}function zde(n,t){if(n&1){let e=rt();g(0,"div",17),C(1),g(2,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit;A(),_t(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)}}var qB=(()=>{class n{constructor(e,i,r,o,s){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.panelService=s,this.operationRequests=[],this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.fetchOperationRequests()}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{console.log(this.selectedOperationRequest.operationType),this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],console.log("Filtered operation types:",this.selectedOperationType),this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)}),console.log("Fetched doctors list:",this.doctors),console.log("Fetched nurses list:",this.nurses)):console.error("No staff list found for the selected operation type")}createAppointment(e){e.preventDefault(),console.log("Creating appointment with data:",this.newAppointment),this.appointmentService.createAppointment(this.newAppointment).subscribe(i=>{console.log("Appointment created:",i),this.clearForm(),alert("Appointment created successfully"),this.router.navigate(["/appointment-manager"])},i=>{console.error("Error creating appointment",i),alert("Error creating appointment")})}extractOperationRequestFromUrl(){let e=window.location.href,i=/\/create-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return r[1];throw new Error("Appointment not found in URL.")}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e.filter(i=>i.id===this.extractOperationRequestFromUrl()),console.log("Filtered operation requests:",this.operationRequests),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.newAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.newAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.newAppointment.team.push(i);else{let o=this.newAppointment.team.indexOf(i);o>-1&&this.newAppointment.team.splice(o,1)}console.log("Updated team:",this.newAppointment.team)}static{this.\u0275fac=function(i){return new(i||n)($(Th),$(Ct),$(ys),$(As),$(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-appointment"]],standalone:!0,features:[Ke],decls:28,vars:5,consts:[[1,"create-container"],[1,"screens-container"],[1,"screen"],["routerLink","/operation-requests","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"create-title",2,"text-align","center"],[1,"content-container"],[1,"create-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-create"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Go Back "),_(),g(6,"h2",4),C(7,"Create Appointment"),_(),g(8,"div",5)(9,"form",6),se("submit",function(s){return r.createAppointment(s)}),g(10,"select",7),Xe("ngModelChange",function(s){return Ze(r.newAppointment.roomId,s)||(r.newAppointment.roomId=s),s}),g(11,"option",8),C(12,"Select Room"),_(),Se(13,Ude,2,2,"option",9),_(),g(14,"input",10),Xe("ngModelChange",function(s){return Ze(r.newAppointment.dateTime,s)||(r.newAppointment.dateTime=s),s}),_(),g(15,"div",11)(16,"div",12)(17,"label"),C(18,"Doctors:"),_(),Se(19,Vde,3,2,"div",13),_(),g(20,"div",12)(21,"label"),C(22,"Nurses:"),_(),Se(23,zde,3,2,"div",13),_()(),g(24,"button",14),C(25,"Create Appointment"),_(),g(26,"button",15),se("click",function(){return r.clearForm()}),C(27," Clear Form "),_()()()()()()),i&2&&(A(10),Ye("ngModel",r.newAppointment.roomId),A(3),X("ngForOf",r.rooms),A(),Ye("ngModel",r.newAppointment.dateTime),A(5),X("ngForOf",r.doctors),A(4),X("ngForOf",r.nurses))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,tn,hn,Nn,Lt,kt,zt,_s,vt,gn],styles:[".create-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .create-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.create-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var Bde=n=>["/update-appointment",n];function Hde(n,t){if(n&1&&(g(0,"tr")(1,"td"),C(2),_(),g(3,"td"),C(4),_(),g(5,"td"),C(6),_(),g(7,"td"),C(8),_(),g(9,"td"),C(10),Hr(11,"date"),_(),g(12,"td"),C(13),_(),g(14,"td"),C(15),_(),g(16,"td"),C(17),_(),g(18,"td"),C(19),_(),g(20,"td")(21,"a",8),C(22,"Edit"),_()()()),n&2){let e=t.$implicit,i=ae();A(2),Je(e.operationRequest==null?null:e.operationRequest.patientName),A(2),Je(e.operationRequest==null?null:e.operationRequest.doctorLicenseNumber),A(2),Je(e.operationRequest==null?null:e.operationRequest.priority),A(2),Je(e.roomId),A(2),Je(dl(11,10,e.dateTime,"dd/MM/yyyy - HH:mm")),A(3),Je(e.status),A(2),Je(i.getDoctorNames(e.teamDetails)),A(2),Je(i.getNurseNames(e.teamDetails)),A(2),Je(e.operationRequest==null?null:e.operationRequest.operationType),A(2),X("routerLink",ri(13,Bde,e.id))}}var YB=(()=>{class n{constructor(e,i,r,o){this.appointmentService=e,this.operationRequestService=i,this.staffService=r,this.datePipe=o,this.filters={},this.appointments=[],this.operationRequests=[],this.staffList=[],this.statusTypes=["Pending","Confirmed","Cancelled"]}ngOnInit(){this.fetchAppointments()}fetchAppointments(){this.appointmentService.getAppointments().subscribe(e=>{e.isSuccess&&e._value?(this.appointments=e._value,console.log("Appointments fetched:",this.appointments),this.fetchOperationRequests()):console.error("Failed to fetch appointments:",e.error)},e=>{console.error("Error fetching appointments",e)})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests fetched:",e),this.operationRequests=e,this.mergeAppointmentWithOperationRequests()},e=>{console.error("Error fetching operation requests",e)})}mergeAppointmentWithOperationRequests(){this.appointments=this.appointments.map(e=>{let i=this.operationRequests.find(r=>r.id===e.requestId);return Yt(je({},e),{operationRequest:i})}),console.log("Merged appointments:",this.appointments),this.fetchStaffList()}fetchStaffList(){let e=this.appointments.flatMap(r=>r.team),i=[...new Set(e)];Promise.all(i.map(r=>this.staffService.getStaffById(r).toPromise())).then(r=>{this.staffList=r,this.mergeAppointmentWithStaffList()}).catch(r=>{console.error("Error fetching staff list",r)})}mergeAppointmentWithStaffList(){this.appointments=this.appointments.map(e=>{let i=e.team.map(r=>this.staffList.find(o=>o.id===r)).filter(r=>r!==void 0);return Yt(je({},e),{teamDetails:i})}),console.log("Merged appointments with staff list:",this.appointments)}getTeamNames(e,i){return e?e.filter(r=>r.staffType===i).map(r=>`${r.fullName} (${r.licenseNumber})`).join(", "):""}getDoctorNames(e){return this.getTeamNames(e,"Doctor")}getNurseNames(e){return this.getTeamNames(e,"Nurse")}static{this.\u0275fac=function(i){return new(i||n)($(Th),$(As),$(rr),$(Eu))}}static{this.\u0275cmp=We({type:n,selectors:[["app-appointment-manager"]],standalone:!0,features:[Hi([Eu]),Ke],decls:33,vars:1,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"manage-title",2,"text-align","center"],[1,"content-container"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-update",3,"routerLink"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h2",3),C(5,"Appointments Manager"),_(),g(6,"div",4)(7,"div",5)(8,"table",6)(9,"thead")(10,"tr")(11,"th"),C(12,"Patient Name"),_(),g(13,"th"),C(14,"Doctor License Number"),_(),g(15,"th"),C(16,"Priority"),_(),g(17,"th"),C(18,"Room ID"),_(),g(19,"th"),C(20,"Date and Time"),_(),g(21,"th"),C(22,"Status"),_(),g(23,"th"),C(24,"Doctors"),_(),g(25,"th"),C(26,"Nurses"),_(),g(27,"th"),C(28,"Operation Type"),_(),g(29,"th"),C(30,"Actions"),_()()(),g(31,"tbody"),Se(32,Hde,23,15,"tr",7),_()()()()()()()),i&2&&(A(32),X("ngForOf",r.appointments))},dependencies:[bt,ir,vt,gn,Eu,kt,zt,Lt],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:100%;max-width:1400px;height:auto;background-color:#f9f9f9;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;text-align:center}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:100%}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;max-width:200px;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .filter-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:5px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#0056b3}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-filter[_ngcontent-%COMP%]:hover{background-color:#138496}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-search[_ngcontent-%COMP%]:hover{background-color:#e0a800}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:720px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;width:100%;max-width:600px;margin-top:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .operation-request-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}"]})}}return n})();function jde(n,t){if(n&1&&(g(0,"option",16),C(1),_()),n&2){let e=t.$implicit;X("value",e.id),A(),Je(e.name)}}function Wde(n,t){if(n&1){let e=rt();g(0,"div",17),C(1),g(2,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ae();A(),_t(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}function Gde(n,t){if(n&1){let e=rt();g(0,"div",17),C(1),g(2,"input",18),se("change",function(r){let o=De(e).$implicit,s=ae();return Oe(s.updateTeam(r,o.id))}),_()()}if(n&2){let e=t.$implicit,i=ae();A(),_t(" ",e.licenseNumber+" - "+e.fullName," "),A(),X("value",e.id)("checked",i.existingAppointment.team.includes(e.id))}}var XB=(()=>{class n{constructor(e,i,r,o,s){this.appointmentService=e,this.router=i,this.operationTypeService=r,this.operationRequestService=o,this.panelService=s,this.operationRequests=[],this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]},this.rooms=[{id:"1",name:"Room 1"}],this.doctors=[],this.nurses=[],this.staffProfiles=[],this.operationTypes=[],this.email=""}ngOnInit(){this.panelService.setPanelId("panel-doctor"),this.loadAppointment()}loadAppointment(){let e=this.getAppointmentIdFromRoute();this.appointmentService.getAppointmentById(e).subscribe(i=>{i.isSuccess?(console.log("Appointment loaded:",i._value),this.existingAppointment=i._value,this.existingAppointment.dateTime=new Date(this.existingAppointment.dateTime).toISOString().slice(0,16),this.fetchOperationRequests()):console.error("Error loading appointment",i.error)},i=>{console.error("Error loading appointment",i)})}fetchOperationTypes(){this.operationTypeService.getOperationTypes().subscribe(e=>{this.selectedOperationRequest?this.operationTypes=e.filter(i=>i.name===this.selectedOperationRequest.operationType):this.operationTypes=e,this.selectedOperationType=this.operationTypes[0],this.fetchStaffList(this.selectedOperationType)},e=>{console.error("Error fetching operation types",e)})}fetchStaffList(e){e&&e.staffs?(this.doctors=[],this.nurses=[],e.staffs.forEach(i=>{i.staffType==="Doctor"?this.doctors.push(i):i.staffType==="Nurse"&&this.nurses.push(i)})):console.error("No staff list found for the selected operation type")}updateAppointment(e){e.preventDefault();let i={roomId:this.existingAppointment.roomId,dateTime:this.existingAppointment.dateTime,team:this.existingAppointment.team},r=this.getAppointmentIdFromRoute();this.appointmentService.updateAppointment(r,i).subscribe(o=>{this.clearForm(),alert("Appointment updated successfully"),this.router.navigate(["/appointment-manager"])},o=>{console.error("Error updating appointment",o),alert("Error updating appointment")})}fetchOperationRequests(){this.operationRequestService.getOperationRequests().subscribe(e=>{console.log("Operation requests:",e),console.log("Existing appointment:",this.existingAppointment),console.log("Existing appointment request ID:",this.existingAppointment.requestId),this.existingAppointment.requestId?(this.operationRequests=e.filter(i=>i.id===this.existingAppointment.requestId),this.operationRequests.length>0?(this.selectedOperationRequest=this.operationRequests[0],this.existingAppointment.requestId=this.selectedOperationRequest.id,this.fetchOperationTypes()):console.error("No matching operation request found")):console.error("Existing appointment request ID is undefined")},e=>{console.error("Error fetching operation requests",e)})}clearForm(){this.existingAppointment={requestId:"",roomId:"",dateTime:"",status:"scheduled",team:[]}}updateTeam(e,i){if(e.target.checked)this.existingAppointment.team.push(i);else{let o=this.existingAppointment.team.indexOf(i);o>-1&&this.existingAppointment.team.splice(o,1)}}getAppointmentIdFromRoute(){let e=window.location.href,i=/\/update-appointment\/([0-9a-fA-F-]+)/,r=e.match(i);if(r&&r[1])return console.log("Appointment ID:",r[1]),r[1];throw new Error("Appointment not found in URL.")}static{this.\u0275fac=function(i){return new(i||n)($(Th),$(Ct),$(ys),$(As),$(Rn))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-appointment"]],standalone:!0,features:[Ke],decls:28,vars:5,consts:[[1,"update-container"],[1,"screens-container"],[1,"screen"],["routerLink","/appointment-manager","routerLinkActive","router-link-active","type","button",1,"btn","btn-back"],[1,"update-title",2,"text-align","center"],[1,"content-container"],[1,"update-form",3,"submit"],["name","roomId","required","",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","datetime-local","name","dateTime","required","",3,"ngModelChange","ngModel"],[1,"checkbox-container"],[1,"checkbox-box"],["class","checkbox-item",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-update"],["type","button",1,"btn","btn-clear",3,"click"],[3,"value"],[1,"checkbox-item"],["type","checkbox",3,"change","value","checked"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),C(5," Go Back "),_(),g(6,"h2",4),C(7,"Update Appointment"),_(),g(8,"div",5)(9,"form",6),se("submit",function(s){return r.updateAppointment(s)}),g(10,"select",7),Xe("ngModelChange",function(s){return Ze(r.existingAppointment.roomId,s)||(r.existingAppointment.roomId=s),s}),g(11,"option",8),C(12,"Select Room"),_(),Se(13,jde,2,2,"option",9),_(),g(14,"input",10),Xe("ngModelChange",function(s){return Ze(r.existingAppointment.dateTime,s)||(r.existingAppointment.dateTime=s),s}),_(),g(15,"div",11)(16,"div",12)(17,"label"),C(18,"Doctors:"),_(),Se(19,Wde,3,3,"div",13),_(),g(20,"div",12)(21,"label"),C(22,"Nurses:"),_(),Se(23,Gde,3,3,"div",13),_()(),g(24,"button",14),C(25,"Update Appointment"),_(),g(26,"button",15),se("click",function(){return r.clearForm()}),C(27," Clear Form "),_()()()()()()),i&2&&(A(10),Ye("ngModel",r.existingAppointment.roomId),A(3),X("ngForOf",r.rooms),A(),Ye("ngModel",r.existingAppointment.dateTime),A(5),X("ngForOf",r.doctors),A(4),X("ngForOf",r.nurses))},dependencies:[bt,Ht,Ri,ki,Ot,Wi,Nt,Bt,tn,hn,Nn,Lt,kt,zt,_s,vt,gn],styles:[".update-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1200px;height:90vh;background-color:#f9f9f9;max-width:1200px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;background-color:#fff;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]{flex:1;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:5px;justify-content:space-between}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .update-form[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkbox-box[_ngcontent-%COMP%]   .checkbox-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px;padding:10px;font-size:16px;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:none;overflow-y:auto}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;padding:10px 20px;font-size:16px;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-update[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]{background-color:#4e4d49;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-clear[_ngcontent-%COMP%]:hover{background-color:#1d1c1b}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;top:10px;right:10px;position:absolute}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-back[_ngcontent-%COMP%]:hover{background-color:#0056b3}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-select[_ngcontent-%COMP%]:hover{background-color:#138496}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-save[_ngcontent-%COMP%]:hover{background-color:#218838}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]{margin-bottom:20px;width:100%;height:100%;overflow-y:auto;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:10px;display:block}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:200px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;padding:10px;background-color:#fff;box-sizing:border-box}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px;width:100%}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;text-align:left}.update-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .multi-select-container[_ngcontent-%COMP%]   .multi-select-list[_ngcontent-%COMP%]   .multi-select-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}"]})}}return n})();var QB=BC(KB()),e4=BC(JB());var $de=n=>({show:n});function qde(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.allergyName," ")}}function Yde(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e.medicalConditionName," ")}}function Xde(n,t){if(n&1&&(g(0,"li"),C(1),_()),n&2){let e=t.$implicit;A(),_t(" ",e," ")}}var t4=(()=>{class n{constructor(e,i,r,o,s,a,l){this.panelService=e,this.settingsService=i,this.profileService=r,this.patientService=o,this.allergyService=s,this.medicalConditionService=a,this.medicalHistoryService=l,this.patientProfile={firstName:"",lastName:"",dateOfBirth:"",gender:0,email:"",phoneNumber:"",emergencyContact:"",fullName:"",id:"",isActive:!1,medicalHistory:"",medicalRecordNumber:""},this.allergies=[],this.medicalConditions=[],this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],this.checkCode="",this.isModalOpen=!1}ngOnInit(){this.panelService.setPanelId("patient-panel"),this.settingsService.setSettingsId("patient-settings"),this.profileService.setProfileId("patient-profile"),this.fetchAllergies(),this.fetchMedicalConditions(),this.getPatientProfile()}getPatientProfile(){let e=localStorage.getItem("token");if(e){let r=Pa(e)["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"];this.patientService.getMyProfile(r).subscribe(o=>{console.log(o),this.patientProfile=o[0],this.fetchMedicalHistory(this.patientProfile.medicalRecordNumber)})}}fetchAllergies(){this.allergyService.getAllergies().subscribe(e=>{this.allergies=e,this.filteredAllergies=this.allergies,console.log("Allergies fetched:",this.allergies)},e=>{console.error("Error fetching allergies",e)})}fetchMedicalConditions(){this.medicalConditionService.getMedicalConditions().subscribe(e=>{this.medicalConditions=e,this.filteredMedicalConditions=this.medicalConditions,console.log("Medical Conditions fetched:",this.medicalConditions)},e=>{console.error("Error fetching medical conditions",e)})}fetchMedicalHistory(e){console.log("fetchMedicalHistory called with medicalRecordNumber:",e),this.medicalHistoryService.getPatientMedicalHistory(e).subscribe(i=>{i?(this.selectedMedicalHistory={id:i.id,patientMedicalRecordNumber:i.patientMedicalRecordNumber,medicalConditions:i.medicalConditions?i.medicalConditions.split(","):[],allergies:i.allergies?i.allergies.split(","):[],freeText:i.freeText,familyHistory:Array.isArray(i.familyHistory)?i.familyHistory:this.parseFamilyHistoryString(i.familyHistory)},console.log("Medical history fetched:",this.selectedMedicalHistory),this.filterSelectedAllergies(),this.filterSelectedMedicalConditions()):console.error("Failed to fetch medical history")},i=>{i.status===404?(this.selectedMedicalHistory=void 0,this.selectedAllergies=[],this.selectedMedicalConditions=[],this.filteredAllergies=[],this.filteredMedicalConditions=[],console.error("Medical history not found (404)")):console.error("Error fetching medical history",i)})}parseFamilyHistoryString(e){return e.split(/,(?=\s*[A-Za-z]+:)/).map(i=>i.trim())}parseFamilyHistory(e){return e.map(i=>{let[r,o]=i.split(": ");if(!o)return{relationship:r,conditions:[]};let s=o.split(";").map(a=>a.trim()).filter(a=>a.length>0);return{relationship:r.trim(),conditions:s}})}filterSelectedAllergies(){this.selectedMedicalHistory&&(this.selectedAllergies=this.allergies.filter(e=>this.selectedMedicalHistory.allergies.includes(e.id)),this.filteredAllergies=this.selectedAllergies,console.log("Filtered allergies:",this.selectedAllergies))}filterSelectedMedicalConditions(){this.selectedMedicalHistory&&(this.selectedMedicalConditions=this.medicalConditions.filter(e=>this.selectedMedicalHistory.medicalConditions.includes(e.id)),this.filteredMedicalConditions=this.selectedMedicalConditions,console.log("Filtered medical conditions:",this.selectedMedicalConditions))}downloadProfile(){return Ka(this,null,function*(){let e={fullName:this.patientProfile.fullName,email:this.patientProfile.email,phoneNumber:this.patientProfile.phoneNumber,dateOfBirth:this.patientProfile.dateOfBirth,emergencyContact:this.patientProfile.emergencyContact,gender:this.patientProfile.gender===0?"Male":"Female",medicalRecordNumber:this.patientProfile.medicalRecordNumber,allergies:this.selectedAllergies.map(s=>s.allergyName),medicalConditions:this.selectedMedicalConditions.map(s=>s.medicalConditionName),familyHistory:this.selectedMedicalHistory?.familyHistory||[],freeText:this.selectedMedicalHistory?.freeText||"None"},i=JSON.stringify(e,null,2),r=new QB.default;r.file("profile.json",i);let o=yield r.generateAsync({type:"blob"});(0,e4.saveAs)(o,"patient_profile.zip")})}openModal(){this.isModalOpen=!0,this.profileService.getCode(this.patientProfile.email).subscribe(e=>{this.checkCode=e},e=>{console.error("Error fetching code",e)})}verifyCode(){this.code=parseInt(this.code1.toString()+this.code2.toString()+this.code3.toString()+this.code4.toString()+this.code5.toString()+this.code6.toString()),this.code.toString()===this.checkCode.toString()?(this.isModalOpen=!1,this.downloadProfile()):alert("Invalid code"),this.code1=void 0,this.code2=void 0,this.code3=void 0,this.code4=void 0,this.code5=void 0,this.code6=void 0}closeModal(){this.isModalOpen=!1}moveFocus(e,i){if(e.target.value.length===1){let r=document.getElementById(i);r&&r.focus()}}handleBackspace(e,i){if(e.key==="Backspace"&&e.target.value===""){let r=document.getElementById(i);r&&r.focus()}}allowOnlyNumbers(e){let i=e.which?e.which:e.keyCode;(i<48||i>57)&&e.preventDefault()}handlePaste(e){let i=e.clipboardData?.getData("text");if(i&&/^\d{6}$/.test(i)){e.preventDefault();let r=i.split("");this.code1=parseInt(r[0],10),this.code2=parseInt(r[1],10),this.code3=parseInt(r[2],10),this.code4=parseInt(r[3],10),this.code5=parseInt(r[4],10),this.code6=parseInt(r[5],10),setTimeout(()=>{let o=document.getElementById("code6");o&&o.focus()},0)}}static{this.\u0275fac=function(i){return new(i||n)($(Rn),$(Ta),$(bc),$(Ps),$(Jr),$(Qr),$(La))}}static{this.\u0275cmp=We({type:n,selectors:[["app-patient-profile"]],standalone:!0,features:[Ke],decls:73,vars:20,consts:[[1,"profile-container"],[1,"profile-screen"],[1,"profile-header"],[1,"profile-name"],[1,"download-button",3,"click"],[1,"profile-details"],[4,"ngFor","ngForOf"],["id","codeModal",1,"modal",3,"ngClass"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"close",3,"click"],[1,"code-inputs"],["id","code1","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code2","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code3","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code4","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code5","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","input","keydown","paste","ngModel"],["id","code6","type","text","maxlength","1","pattern","[0-9]*","inputmode","numeric",3,"ngModelChange","keydown","paste","ngModel"],[1,"btn-submit",3,"click"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"h1",3),C(5),_(),g(6,"button",4),se("click",function(){return r.openModal()}),C(7,"Download Profile"),_()(),g(8,"div",5)(9,"h2"),C(10,"Personal Information"),_(),g(11,"p")(12,"strong"),C(13,"Email:"),_(),C(14),_(),g(15,"p")(16,"strong"),C(17,"Phone:"),_(),C(18),_(),g(19,"p")(20,"strong"),C(21,"Date of Birth:"),_(),C(22),_(),g(23,"p")(24,"strong"),C(25,"Emergency Contact:"),_(),C(26),_(),g(27,"p")(28,"strong"),C(29,"Gender:"),_(),C(30),_(),g(31,"p")(32,"strong"),C(33,"Medical Record Number:"),_(),C(34),_()(),g(35,"div",5)(36,"h2"),C(37,"Medical History"),_(),g(38,"p")(39,"strong"),C(40,"Allergies:"),_()(),g(41,"ul"),Se(42,qde,2,1,"li",6),_(),g(43,"p")(44,"strong"),C(45,"Medical Conditions:"),_()(),g(46,"ul"),Se(47,Yde,2,1,"li",6),_(),g(48,"p")(49,"strong"),C(50,"Family History:"),_()(),g(51,"ul"),Se(52,Xde,2,1,"li",6),_(),g(53,"p")(54,"strong"),C(55,"Free Text:"),_(),C(56),_()()()(),g(57,"div",7)(58,"div",8)(59,"div",9)(60,"h2",10),C(61,"Enter Verification Code"),_(),g(62,"span",11),se("click",function(){return r.closeModal()}),C(63,"\xD7"),_()(),g(64,"div",12)(65,"input",13),Xe("ngModelChange",function(s){return Ze(r.code1,s)||(r.code1=s),s}),se("input",function(s){return r.moveFocus(s,"code2")})("keydown",function(s){return r.handleBackspace(s,"code1"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(66,"input",14),Xe("ngModelChange",function(s){return Ze(r.code2,s)||(r.code2=s),s}),se("input",function(s){return r.moveFocus(s,"code3")})("keydown",function(s){return r.handleBackspace(s,"code1"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(67,"input",15),Xe("ngModelChange",function(s){return Ze(r.code3,s)||(r.code3=s),s}),se("input",function(s){return r.moveFocus(s,"code4")})("keydown",function(s){return r.handleBackspace(s,"code2"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(68,"input",16),Xe("ngModelChange",function(s){return Ze(r.code4,s)||(r.code4=s),s}),se("input",function(s){return r.moveFocus(s,"code5")})("keydown",function(s){return r.handleBackspace(s,"code3"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(69,"input",17),Xe("ngModelChange",function(s){return Ze(r.code5,s)||(r.code5=s),s}),se("input",function(s){return r.moveFocus(s,"code6")})("keydown",function(s){return r.handleBackspace(s,"code4"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_(),g(70,"input",18),Xe("ngModelChange",function(s){return Ze(r.code6,s)||(r.code6=s),s}),se("keydown",function(s){return r.handleBackspace(s,"code5"),r.allowOnlyNumbers(s)})("paste",function(s){return r.handlePaste(s)}),_()(),g(71,"button",19),se("click",function(){return r.verifyCode()}),C(72,"Submit"),_()()()),i&2&&(A(5),_t(" ",r.patientProfile.fullName," "),A(9),_t(" ",r.patientProfile.email,""),A(4),_t(" ",r.patientProfile.phoneNumber,""),A(4),_t(" ",r.patientProfile.dateOfBirth,""),A(4),_t(" ",r.patientProfile.emergencyContact," "),A(4),_t(" ",r.patientProfile.gender===0?"Male":"Female"," "),A(4),_t(" ",r.patientProfile.medicalRecordNumber," "),A(8),X("ngForOf",r.selectedAllergies),A(5),X("ngForOf",r.selectedMedicalConditions),A(5),X("ngForOf",r.selectedMedicalHistory==null?null:r.selectedMedicalHistory.familyHistory),A(4),_t(" ",(r.selectedMedicalHistory==null?null:r.selectedMedicalHistory.freeText)||"None "," "),A(),X("ngClass",ri(18,$de,r.isModalOpen)),A(8),Ye("ngModel",r.code1),A(),Ye("ngModel",r.code2),A(),Ye("ngModel",r.code3),A(),Ye("ngModel",r.code4),A(),Ye("ngModel",r.code5),A(),Ye("ngModel",r.code6))},dependencies:[Lt,vt,Po,gn,bt,Ot,Nt,am,xl,hn],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.profile-screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:1100px;max-height:900px;background-color:#fff;max-width:1100px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative;overflow-y:auto;overflow-x:hidden}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;border-bottom:2px solid #ddd;padding-bottom:10px;width:100%}.profile-name[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.download-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px}.download-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.profile-details[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9}.profile-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;font-size:20px;color:#555}.profile-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:16px;color:#666}.profile-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px}.profile-details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0}.separator[_ngcontent-%COMP%]{width:100%;height:1px;background-color:#ddd;margin:20px 0}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:2;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;padding-top:100px}.modal.show[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fefefe;margin:5% auto;padding:20px;width:400px;box-shadow:0 0 10px #0000001a;border-radius:8px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;border-bottom:none}.modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.close[_ngcontent-%COMP%]{color:#aaa;font-size:28px;font-weight:700;cursor:pointer}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.code-inputs[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.code-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;height:40px;font-size:24px;text-align:center;border:1px solid #ddd;border-radius:5px;margin-right:10px}.code-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:last-child{margin-right:0}.btn-submit[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:14px;margin-top:10px}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}}return n})();var Dh=(()=>{class n{constructor(e){this.http=e,this.apiUrl="http://localhost:4000/api/rooms"}getRooms(){return console.log("getRooms called"),this.http.get(`${this.apiUrl}`).pipe(nn(e=>(console.error("Error fetching rooms:",e),Rt([]))))}createRoom(e){return this.http.post(`${this.apiUrl}/create`,{name:e.name,type:e.type,description:e.description}).pipe(nn(i=>(console.error("Error creating room:",i),En(()=>new Error("Failed to create room. Please try again later.")))))}updateRoom(e,i){return this.http.put(`${this.apiUrl}/update/${e}`,{name:i.name,type:i.type,description:i.description}).pipe(nn(r=>(console.error("Error updating room:",r),En(()=>new Error("Failed to update room. Please try again later.")))))}static{this.\u0275fac=function(i){return new(i||n)(qe(zn))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Pb=(()=>{class n{constructor(e){this.roomService=e,this.room={name:"",type:"",description:""},this.roomCreated=new gt}onSubmit(){this.roomService.createRoom(this.room).subscribe({next:()=>{alert("Room created successfully!"),this.roomCreated.emit()},error:e=>{console.error("Error creating room:",e),alert("Failed to create room.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Dh))}}static{this.\u0275cmp=We({type:n,selectors:[["app-create-room"]],outputs:{roomCreated:"roomCreated"},standalone:!0,features:[Ke],decls:14,vars:3,consts:[[3,"submit"],["for","room-name"],["type","text","id","room-name","name","room-name","required","",3,"ngModelChange","ngModel"],["for","room-type"],["type","text","id","room-type","name","room-type","required","",3,"ngModelChange","ngModel"],["for","room-description"],["type","text","id","room-description","name","room-description","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),C(1,"Create Room"),_(),g(2,"form",0),se("submit",function(){return r.onSubmit()}),g(3,"label",1),C(4,"Name:"),_(),g(5,"input",2),Xe("ngModelChange",function(s){return Ze(r.room.name,s)||(r.room.name=s),s}),_(),g(6,"label",3),C(7,"Type:"),_(),g(8,"input",4),Xe("ngModelChange",function(s){return Ze(r.room.type,s)||(r.room.type=s),s}),_(),g(9,"label",5),C(10,"Description:"),_(),g(11,"input",6),Xe("ngModelChange",function(s){return Ze(r.room.description,s)||(r.room.description=s),s}),_(),g(12,"button",7),C(13,"Submit"),_()()),i&2&&(A(5),Ye("ngModel",r.room.name),A(3),Ye("ngModel",r.room.type),A(3),Ye("ngModel",r.room.description))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();var Tb=(()=>{class n{constructor(e){this.roomService=e,this.roomUpdated=new gt}onSubmit(){let e=this.room.id;console.log("Room:",this.room),console.log("Room ID:",e),this.roomService.updateRoom(e,this.room).subscribe({next:()=>{alert("Room updated successfully!"),this.roomUpdated.emit()},error:i=>{console.error("Error updating room:",i),alert("Failed to update room.")}})}static{this.\u0275fac=function(i){return new(i||n)($(Dh))}}static{this.\u0275cmp=We({type:n,selectors:[["app-update-room"]],inputs:{room:"room"},outputs:{roomUpdated:"roomUpdated"},standalone:!0,features:[Ke],decls:14,vars:3,consts:[[3,"submit"],["for","room-name"],["type","text","id","room-name","name","room-name","required","",3,"ngModelChange","ngModel"],["for","room-type"],["type","text","id","room-type","name","room-type","required","",3,"ngModelChange","ngModel"],["for","room-description"],["type","text","id","room-description","name","room-description","required","",3,"ngModelChange","ngModel"],["type","submit"]],template:function(i,r){i&1&&(g(0,"h2"),C(1,"Update Room"),_(),g(2,"form",0),se("submit",function(){return r.onSubmit()}),g(3,"label",1),C(4,"Name:"),_(),g(5,"input",2),Xe("ngModelChange",function(s){return Ze(r.room.name,s)||(r.room.name=s),s}),_(),g(6,"label",3),C(7,"Type:"),_(),g(8,"input",4),Xe("ngModelChange",function(s){return Ze(r.room.type,s)||(r.room.type=s),s}),_(),g(9,"label",5),C(10,"Description:"),_(),g(11,"input",6),Xe("ngModelChange",function(s){return Ze(r.room.description,s)||(r.room.description=s),s}),_(),g(12,"button",7),C(13,"Submit"),_()()),i&2&&(A(5),Ye("ngModel",r.room.name),A(3),Ye("ngModel",r.room.type),A(3),Ye("ngModel",r.room.description))},dependencies:[bt,Ht,Ot,Nt,Bt,tn,hn,Nn],styles:["h2[_ngcontent-%COMP%]{font-size:1.625rem;font-weight:600;color:#333;text-align:center;letter-spacing:1px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#fff;padding:20px;width:100%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:25px;color:#333;text-align:center;text-transform:uppercase;letter-spacing:1px;word-wrap:break-word}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;margin-bottom:8px;color:#555;align-self:flex-start;font-weight:500}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;margin-bottom:20px;font-size:16px;border:1px solid #ccc;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;background-color:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff4d;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#999}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:18px;font-weight:600;background:linear-gradient(135deg,#28a745,#218838);color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00000026;width:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1e7e34);transform:translateY(-2px);box-shadow:0 6px 18px #0003}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(1px)}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:30px;font-weight:700;cursor:pointer;color:#444;transition:color .3s ease}form[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width: 768px){form[_ngcontent-%COMP%]{padding:15px;max-width:90%}form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 14px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px}}"]})}}return n})();function Zde(n,t){if(n&1){let e=rt();g(0,"tr")(1,"td"),C(2),_(),g(3,"td"),C(4),_(),g(5,"td")(6,"button",9),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openDetailsModal(r))}),C(7,"View Details"),_(),g(8,"button",9),se("click",function(){let r=De(e).$implicit,o=ae();return Oe(o.openUpdateModal(r))}),C(9,"Update"),_()()()}if(n&2){let e=t.$implicit;A(2),Je(e.name),A(2),Je(e.type)}}function Kde(n,t){if(n&1){let e=rt();g(0,"app-create-room",16),se("roomCreated",function(){De(e);let r=ae(2);return Oe(r.handleRoomCreated())}),_()}}function Jde(n,t){if(n&1){let e=rt();g(0,"app-update-room",17),se("roomUpdated",function(){De(e);let r=ae(2);return Oe(r.handleRoomUpdated())}),_()}if(n&2){let e=ae(2);X("room",e.selectedItem)}}function Qde(n,t){if(n&1&&(g(0,"div")(1,"h2"),C(2),_(),g(3,"p")(4,"strong"),C(5,"Type:"),_(),C(6),_(),g(7,"p")(8,"strong"),C(9,"Description:"),_(),C(10),_()()),n&2){let e=ae(2);A(2),_t("",e.selectedItem.name," Details"),A(4),_t(" ",e.selectedItem.type,""),A(4),_t(" ",e.selectedItem.description,"")}}function efe(n,t){if(n&1){let e=rt();g(0,"div",10)(1,"div",11)(2,"span",12),se("click",function(){De(e);let r=ae();return Oe(r.closeModal())}),C(3,"\xD7"),_(),Se(4,Kde,1,0,"app-create-room",13)(5,Jde,1,1,"app-update-room",14)(6,Qde,11,3,"div",15),_()()}if(n&2){let e=ae();A(4),X("ngIf",e.modalType==="create-room"),A(),X("ngIf",e.modalType==="update-room"),A(),X("ngIf",e.modalType==="details")}}var n4=(()=>{class n{constructor(e,i,r,o){this.renderer=e,this.router=i,this.panelService=r,this.roomService=o,this.modalType=null,this.rooms=[],this.selectedItem=null}ngOnInit(){this.panelService.setPanelId("panel-admin"),this.fetchRooms()}openModal(e){this.modalType=e,this.renderer.addClass(document.body,"modal-active"),this.router.navigate([`/manage-operation-rooms/${e}`])}closeModal(){this.modalType=null,this.selectedItem=null,this.renderer.removeClass(document.body,"modal-active"),this.router.navigate(["/manage-operation-rooms"]),this.refreshPage()}openDetailsModal(e){this.selectedItem=e,this.modalType="details",this.renderer.addClass(document.body,"modal-active")}openUpdateModal(e){this.selectedItem=e,this.modalType="update-room",this.renderer.addClass(document.body,"modal-active"),this.router.navigate(["/manage-operation-rooms/update-room"])}fetchRooms(){this.roomService.getRooms().subscribe({next:e=>{this.rooms=e},error:e=>{console.error("Error fetching rooms:",e)}})}refreshPage(){this.fetchRooms()}handleRoomCreated(){this.closeModal(),this.fetchRooms()}handleRoomUpdated(){this.closeModal(),this.fetchRooms()}static{this.\u0275fac=function(i){return new(i||n)($(Mi),$(Ct),$(Rn),$(Dh))}}static{this.\u0275cmp=We({type:n,selectors:[["app-manage-operation-rooms"]],standalone:!0,features:[Ke],decls:21,vars:2,consts:[[1,"manage-container"],[1,"screens-container"],[1,"screen"],[1,"btn","btn-create",3,"click"],[1,"manage-title",2,"text-align","center"],[1,"table-container"],[1,"table"],[4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],[1,"btn","btn-view",3,"click"],[1,"modal"],[1,"modal-content"],[1,"close",3,"click"],[3,"roomCreated",4,"ngIf"],[3,"room","roomUpdated",4,"ngIf"],[4,"ngIf"],[3,"roomCreated"],[3,"roomUpdated","room"]],template:function(i,r){i&1&&(g(0,"div",0),me(1,"app-sidebar"),g(2,"div",1)(3,"div",2)(4,"button",3),se("click",function(){return r.openModal("create-room")}),C(5,"Create"),_(),g(6,"h2",4),C(7,"Rooms"),_(),g(8,"div",5)(9,"table",6)(10,"thead")(11,"tr")(12,"th"),C(13,"Room Name"),_(),g(14,"th"),C(15,"Room Type"),_(),g(16,"th"),C(17,"Actions"),_()()(),g(18,"tbody"),Se(19,Zde,10,2,"tr",7),_()()()()(),Se(20,efe,7,3,"div",8),_()),i&2&&(A(19),X("ngForOf",r.rooms),A(),X("ngIf",r.modalType))},dependencies:[vt,gn,Xt,bt,kt,Lt,Pb,Tb],styles:[".manage-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Poppins,sans-serif}.manage-container[_ngcontent-%COMP%]   .screens-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;justify-content:start;align-items:center;width:800px;height:600px;background-color:#f9f9f9;max-width:800px;margin:0 auto;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a;position:relative}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn-create[_ngcontent-%COMP%]:hover{background-color:#218838}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .manage-title[_ngcontent-%COMP%]{margin-bottom:20px;color:#333}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;height:400px;overflow-y:auto;margin-bottom:20px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px;text-align:left}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px;transition:background-color .3s}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.manage-container[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]   .btn.btn-view[_ngcontent-%COMP%]:hover{background-color:#5a6268}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:12px;width:80%;max-width:500px;position:relative;box-shadow:0 4px 8px #0000001a}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;font-size:24px;cursor:pointer;color:#333;transition:color .3s}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#007bff}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;font-size:24px;color:#333}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#555;margin:10px 0}.manage-container[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}"]})}}return n})();var i4=[{path:"register",component:pL},{path:"login",component:fL},{path:"update-staff/ConfirmUpdates",component:WV},{path:"activate",component:FB},{path:"panel-admin",component:LV,canActivate:[Li]},{path:"panel-doctor",component:LB,canActivate:[Va]},{path:"create-staff",component:yL,canActivate:[Li]},{path:"search-staffs",component:FV,canActivate:[Li]},{path:"update-staff/:id",component:UV,canActivate:[Li]},{path:"view-availability/:id",component:kB,canActivate:[Li]},{path:"operation-types",component:_L,canActivate:[Li]},{path:"specializations",component:HB,canActivate:[Li],children:[{path:"create-specialization",component:Zm,canActivate:[Li]},{path:"update-specialization/:id",component:Zm,canActivate:[Li]}]},{path:"update-operation-type/:name",component:bL,canActivate:[Li]},{path:"create-operation-type",component:vL,canActivate:[Li]},{path:"patient-panel",component:VV,canActivate:[_x]},{path:"patient-settings",component:xL,canActivate:[_x]},{path:"privacy-policy",component:$B},{path:"patient-profile",component:t4,canActivate:[_x]},{path:"hospital3d",component:IV},{path:"delete-user",component:kV},{path:"manage-patients",component:zV,canActivate:[Li]},{path:"create-patient",component:BV,canActivate:[Li]},{path:"activate-patient-user",component:jV},{path:"update-patient/:medicalRecordNumber",component:GV,canActivate:[Li]},{path:"operation-requests",component:UB,canActivate:[Va]},{path:"create-operation-request",component:VB,canActivate:[Va]},{path:"update-operation-request/:id",component:zB,canActivate:[Va]},{path:"manage-allergies-and-conditions",component:jB,canActivate:[Li],children:[{path:"create-allergies",component:Mb,canActivate:[Li]},{path:"create-conditions",component:wb,canActivate:[Li]},{path:"update-allergies/:id",component:Eb,canActivate:[Li]},{path:"update-conditions/:id",component:Sb,canActivate:[Li]}]},{path:"update-medical-history/:medicalRecordNumber",component:WB,canActivate:[Va]},{path:"medical-history-manager",component:GB,canActivate:[Va]},{path:"create-appointment/:id",component:qB,canActivate:[Va]},{path:"appointment-manager",component:YB,canActivate:[Va]},{path:"update-appointment/:id",component:XB,canActivate:[Va]},{path:"manage-operation-rooms",component:n4,canActivate:[Li],children:[{path:"create-room",component:Pb,canActivate:[Li]},{path:"update-room",component:Tb,canActivate:[Li]}]},{path:"",component:mL},{path:"**",component:gL}];var tfe={provide:eE,useClass:R3,multi:!0},r4={providers:[ON({eventCoalescing:!0}),CF(i4),I3(),iE(x3()),Uw(b3),tfe]};var o4=(()=>{class n{constructor(e){this.router=e,this.title="Angular-View"}static{this.\u0275fac=function(i){return new(i||n)($(Ct))}}static{this.\u0275cmp=We({type:n,selectors:[["app-root"]],standalone:!0,features:[Ke],decls:2,vars:0,consts:[[1,"main-content"]],template:function(i,r){i&1&&(g(0,"main",0),me(1,"router-outlet"),_())},dependencies:[vt,jE,bt],styles:['@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJnecmNE.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiEyp8kv8JHgFVrJJfecg.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLGT9Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLEj6Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1JlFc-K.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Poppins;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/poppins/v22/pxiByp8kv8JHgFVrLCz7Z1xlFQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.main-content-with-sidebar[_ngcontent-%COMP%]{margin-left:85px;width:calc(100% - 85px);transition:margin-left .4s ease,width .4s ease;height:100vh;overflow:hidden}.main-content-with-sidebar[_ngcontent-%COMP%] ~ .sidebar[_ngcontent-%COMP%]{transition:all .4s ease}.main-content[_ngcontent-%COMP%]{width:100%;height:100%}']})}}return n})();O3(o4,r4).catch(n=>console.error(n));
